function Cv(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in e)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(e,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const f of l.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();var qs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ph(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Ev(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var o=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(n,i,o.get?o:{enumerable:!0,get:function(){return e[i]}})}),n}var nx={exports:{}},xh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tv=Symbol.for("react.transitional.element"),jv=Symbol.for("react.fragment");function rx(e,t,n){var i=null;if(n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),"key"in t){n={};for(var o in t)o!=="key"&&(n[o]=t[o])}else n=t;return t=n.ref,{$$typeof:Tv,type:e,key:i,ref:t!==void 0?t:null,props:n}}xh.Fragment=jv;xh.jsx=rx;xh.jsxs=rx;nx.exports=xh;var s=nx.exports,ix={exports:{}},ln={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c2=Symbol.for("react.transitional.element"),_v=Symbol.for("react.portal"),Iv=Symbol.for("react.fragment"),Dv=Symbol.for("react.strict_mode"),Lv=Symbol.for("react.profiler"),Ov=Symbol.for("react.consumer"),Mv=Symbol.for("react.context"),Rv=Symbol.for("react.forward_ref"),kv=Symbol.for("react.suspense"),Pv=Symbol.for("react.memo"),ax=Symbol.for("react.lazy"),qm=Symbol.iterator;function Fv(e){return e===null||typeof e!="object"?null:(e=qm&&e[qm]||e["@@iterator"],typeof e=="function"?e:null)}var sx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ox=Object.assign,lx={};function $c(e,t,n){this.props=e,this.context=t,this.refs=lx,this.updater=n||sx}$c.prototype.isReactComponent={};$c.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};$c.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function cx(){}cx.prototype=$c.prototype;function u2(e,t,n){this.props=e,this.context=t,this.refs=lx,this.updater=n||sx}var d2=u2.prototype=new cx;d2.constructor=u2;ox(d2,$c.prototype);d2.isPureReactComponent=!0;var Gm=Array.isArray,vr={H:null,A:null,T:null,S:null,V:null},ux=Object.prototype.hasOwnProperty;function f2(e,t,n,i,o,l){return n=l.ref,{$$typeof:c2,type:e,key:t,ref:n!==void 0?n:null,props:l}}function Bv(e,t){return f2(e.type,t,void 0,void 0,void 0,e.props)}function h2(e){return typeof e=="object"&&e!==null&&e.$$typeof===c2}function Uv(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Wm=/\/+/g;function i0(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Uv(""+e.key):t.toString(36)}function Ym(){}function zv(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(Ym,Ym):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function dc(e,t,n,i,o){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var f=!1;if(e===null)f=!0;else switch(l){case"bigint":case"string":case"number":f=!0;break;case"object":switch(e.$$typeof){case c2:case _v:f=!0;break;case ax:return f=e._init,dc(f(e._payload),t,n,i,o)}}if(f)return o=o(e),f=i===""?"."+i0(e,0):i,Gm(o)?(n="",f!=null&&(n=f.replace(Wm,"$&/")+"/"),dc(o,t,n,"",function(x){return x})):o!=null&&(h2(o)&&(o=Bv(o,n+(o.key==null||e&&e.key===o.key?"":(""+o.key).replace(Wm,"$&/")+"/")+f)),t.push(o)),1;f=0;var m=i===""?".":i+":";if(Gm(e))for(var p=0;p<e.length;p++)i=e[p],l=m+i0(i,p),f+=dc(i,t,n,l,o);else if(p=Fv(e),typeof p=="function")for(e=p.call(e),p=0;!(i=e.next()).done;)i=i.value,l=m+i0(i,p++),f+=dc(i,t,n,l,o);else if(l==="object"){if(typeof e.then=="function")return dc(zv(e),t,n,i,o);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return f}function ef(e,t,n){if(e==null)return e;var i=[],o=0;return dc(e,i,"","",function(l){return t.call(n,l,o++)}),i}function Hv(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Xm=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Vv(){}ln.Children={map:ef,forEach:function(e,t,n){ef(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ef(e,function(){t++}),t},toArray:function(e){return ef(e,function(t){return t})||[]},only:function(e){if(!h2(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ln.Component=$c;ln.Fragment=Iv;ln.Profiler=Lv;ln.PureComponent=u2;ln.StrictMode=Dv;ln.Suspense=kv;ln.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=vr;ln.__COMPILER_RUNTIME={__proto__:null,c:function(e){return vr.H.useMemoCache(e)}};ln.cache=function(e){return function(){return e.apply(null,arguments)}};ln.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var i=ox({},e.props),o=e.key,l=void 0;if(t!=null)for(f in t.ref!==void 0&&(l=void 0),t.key!==void 0&&(o=""+t.key),t)!ux.call(t,f)||f==="key"||f==="__self"||f==="__source"||f==="ref"&&t.ref===void 0||(i[f]=t[f]);var f=arguments.length-2;if(f===1)i.children=n;else if(1<f){for(var m=Array(f),p=0;p<f;p++)m[p]=arguments[p+2];i.children=m}return f2(e.type,o,void 0,void 0,l,i)};ln.createContext=function(e){return e={$$typeof:Mv,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:Ov,_context:e},e};ln.createElement=function(e,t,n){var i,o={},l=null;if(t!=null)for(i in t.key!==void 0&&(l=""+t.key),t)ux.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(o[i]=t[i]);var f=arguments.length-2;if(f===1)o.children=n;else if(1<f){for(var m=Array(f),p=0;p<f;p++)m[p]=arguments[p+2];o.children=m}if(e&&e.defaultProps)for(i in f=e.defaultProps,f)o[i]===void 0&&(o[i]=f[i]);return f2(e,l,void 0,void 0,null,o)};ln.createRef=function(){return{current:null}};ln.forwardRef=function(e){return{$$typeof:Rv,render:e}};ln.isValidElement=h2;ln.lazy=function(e){return{$$typeof:ax,_payload:{_status:-1,_result:e},_init:Hv}};ln.memo=function(e,t){return{$$typeof:Pv,type:e,compare:t===void 0?null:t}};ln.startTransition=function(e){var t=vr.T,n={};vr.T=n;try{var i=e(),o=vr.S;o!==null&&o(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(Vv,Xm)}catch(l){Xm(l)}finally{vr.T=t}};ln.unstable_useCacheRefresh=function(){return vr.H.useCacheRefresh()};ln.use=function(e){return vr.H.use(e)};ln.useActionState=function(e,t,n){return vr.H.useActionState(e,t,n)};ln.useCallback=function(e,t){return vr.H.useCallback(e,t)};ln.useContext=function(e){return vr.H.useContext(e)};ln.useDebugValue=function(){};ln.useDeferredValue=function(e,t){return vr.H.useDeferredValue(e,t)};ln.useEffect=function(e,t,n){var i=vr.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(e,t)};ln.useId=function(){return vr.H.useId()};ln.useImperativeHandle=function(e,t,n){return vr.H.useImperativeHandle(e,t,n)};ln.useInsertionEffect=function(e,t){return vr.H.useInsertionEffect(e,t)};ln.useLayoutEffect=function(e,t){return vr.H.useLayoutEffect(e,t)};ln.useMemo=function(e,t){return vr.H.useMemo(e,t)};ln.useOptimistic=function(e,t){return vr.H.useOptimistic(e,t)};ln.useReducer=function(e,t,n){return vr.H.useReducer(e,t,n)};ln.useRef=function(e){return vr.H.useRef(e)};ln.useState=function(e){return vr.H.useState(e)};ln.useSyncExternalStore=function(e,t,n){return vr.H.useSyncExternalStore(e,t,n)};ln.useTransition=function(){return vr.H.useTransition()};ln.version="19.1.1";ix.exports=ln;var pe=ix.exports;const pd=ph(pe);var dx={exports:{}},bh={},fx={exports:{}},hx={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(K,G){var te=K.length;K.push(G);e:for(;0<te;){var W=te-1>>>1,fe=K[W];if(0<o(fe,G))K[W]=G,K[te]=fe,te=W;else break e}}function n(K){return K.length===0?null:K[0]}function i(K){if(K.length===0)return null;var G=K[0],te=K.pop();if(te!==G){K[0]=te;e:for(var W=0,fe=K.length,le=fe>>>1;W<le;){var B=2*(W+1)-1,q=K[B],Q=B+1,he=K[Q];if(0>o(q,te))Q<fe&&0>o(he,q)?(K[W]=he,K[Q]=te,W=Q):(K[W]=q,K[B]=te,W=B);else if(Q<fe&&0>o(he,te))K[W]=he,K[Q]=te,W=Q;else break e}}return G}function o(K,G){var te=K.sortIndex-G.sortIndex;return te!==0?te:K.id-G.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var f=Date,m=f.now();e.unstable_now=function(){return f.now()-m}}var p=[],x=[],S=1,N=null,j=3,v=!1,O=!1,E=!1,P=!1,C=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function U(K){for(var G=n(x);G!==null;){if(G.callback===null)i(x);else if(G.startTime<=K)i(x),G.sortIndex=G.expirationTime,t(p,G);else break;G=n(x)}}function Y(K){if(E=!1,U(K),!O)if(n(p)!==null)O=!0,ae||(ae=!0,R());else{var G=n(x);G!==null&&ne(Y,G.startTime-K)}}var ae=!1,F=-1,L=5,M=-1;function z(){return P?!0:!(e.unstable_now()-M<L)}function k(){if(P=!1,ae){var K=e.unstable_now();M=K;var G=!0;try{e:{O=!1,E&&(E=!1,_(F),F=-1),v=!0;var te=j;try{t:{for(U(K),N=n(p);N!==null&&!(N.expirationTime>K&&z());){var W=N.callback;if(typeof W=="function"){N.callback=null,j=N.priorityLevel;var fe=W(N.expirationTime<=K);if(K=e.unstable_now(),typeof fe=="function"){N.callback=fe,U(K),G=!0;break t}N===n(p)&&i(p),U(K)}else i(p);N=n(p)}if(N!==null)G=!0;else{var le=n(x);le!==null&&ne(Y,le.startTime-K),G=!1}}break e}finally{N=null,j=te,v=!1}G=void 0}}finally{G?R():ae=!1}}}var R;if(typeof D=="function")R=function(){D(k)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,ee=re.port2;re.port1.onmessage=k,R=function(){ee.postMessage(null)}}else R=function(){C(k,0)};function ne(K,G){F=C(function(){K(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(K){K.callback=null},e.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<K?Math.floor(1e3/K):5},e.unstable_getCurrentPriorityLevel=function(){return j},e.unstable_next=function(K){switch(j){case 1:case 2:case 3:var G=3;break;default:G=j}var te=j;j=G;try{return K()}finally{j=te}},e.unstable_requestPaint=function(){P=!0},e.unstable_runWithPriority=function(K,G){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var te=j;j=K;try{return G()}finally{j=te}},e.unstable_scheduleCallback=function(K,G,te){var W=e.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?W+te:W):te=W,K){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=te+fe,K={id:S++,callback:G,priorityLevel:K,startTime:te,expirationTime:fe,sortIndex:-1},te>W?(K.sortIndex=te,t(x,K),n(p)===null&&K===n(x)&&(E?(_(F),F=-1):E=!0,ne(Y,te-W))):(K.sortIndex=fe,t(p,K),O||v||(O=!0,ae||(ae=!0,R()))),K},e.unstable_shouldYield=z,e.unstable_wrapCallback=function(K){var G=j;return function(){var te=j;j=G;try{return K.apply(this,arguments)}finally{j=te}}}})(hx);fx.exports=hx;var qv=fx.exports,mx={exports:{}},Xi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gv=pe;function gx(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function So(){}var Yi={d:{f:So,r:function(){throw Error(gx(522))},D:So,C:So,L:So,m:So,X:So,S:So,M:So},p:0,findDOMNode:null},Wv=Symbol.for("react.portal");function Yv(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wv,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}var Iu=Gv.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function yh(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}Xi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Yi;Xi.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(gx(299));return Yv(e,t,null,n)};Xi.flushSync=function(e){var t=Iu.T,n=Yi.p;try{if(Iu.T=null,Yi.p=2,e)return e()}finally{Iu.T=t,Yi.p=n,Yi.d.f()}};Xi.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,Yi.d.C(e,t))};Xi.prefetchDNS=function(e){typeof e=="string"&&Yi.d.D(e)};Xi.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,i=yh(n,t.crossOrigin),o=typeof t.integrity=="string"?t.integrity:void 0,l=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?Yi.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:i,integrity:o,fetchPriority:l}):n==="script"&&Yi.d.X(e,{crossOrigin:i,integrity:o,fetchPriority:l,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};Xi.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=yh(t.as,t.crossOrigin);Yi.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&Yi.d.M(e)};Xi.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,i=yh(n,t.crossOrigin);Yi.d.L(e,n,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};Xi.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=yh(t.as,t.crossOrigin);Yi.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else Yi.d.m(e)};Xi.requestFormReset=function(e){Yi.d.r(e)};Xi.unstable_batchedUpdates=function(e,t){return e(t)};Xi.useFormState=function(e,t,n){return Iu.H.useFormState(e,t,n)};Xi.useFormStatus=function(){return Iu.H.useHostTransitionStatus()};Xi.version="19.1.1";function px(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(px)}catch(e){console.error(e)}}px(),mx.exports=Xi;var Xv=mx.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var li=qv,xx=pe,Zv=Xv;function it(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function bx(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function xd(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function yx(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Zm(e){if(xd(e)!==e)throw Error(it(188))}function Qv(e){var t=e.alternate;if(!t){if(t=xd(e),t===null)throw Error(it(188));return t!==e?null:e}for(var n=e,i=t;;){var o=n.return;if(o===null)break;var l=o.alternate;if(l===null){if(i=o.return,i!==null){n=i;continue}break}if(o.child===l.child){for(l=o.child;l;){if(l===n)return Zm(o),e;if(l===i)return Zm(o),t;l=l.sibling}throw Error(it(188))}if(n.return!==i.return)n=o,i=l;else{for(var f=!1,m=o.child;m;){if(m===n){f=!0,n=o,i=l;break}if(m===i){f=!0,i=o,n=l;break}m=m.sibling}if(!f){for(m=l.child;m;){if(m===n){f=!0,n=l,i=o;break}if(m===i){f=!0,i=l,n=o;break}m=m.sibling}if(!f)throw Error(it(189))}}if(n.alternate!==i)throw Error(it(190))}if(n.tag!==3)throw Error(it(188));return n.stateNode.current===n?e:t}function vx(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=vx(e),t!==null)return t;e=e.sibling}return null}var hr=Object.assign,Kv=Symbol.for("react.element"),tf=Symbol.for("react.transitional.element"),Eu=Symbol.for("react.portal"),bc=Symbol.for("react.fragment"),wx=Symbol.for("react.strict_mode"),Z0=Symbol.for("react.profiler"),Jv=Symbol.for("react.provider"),Nx=Symbol.for("react.consumer"),Ws=Symbol.for("react.context"),m2=Symbol.for("react.forward_ref"),Q0=Symbol.for("react.suspense"),K0=Symbol.for("react.suspense_list"),g2=Symbol.for("react.memo"),Io=Symbol.for("react.lazy"),J0=Symbol.for("react.activity"),$v=Symbol.for("react.memo_cache_sentinel"),Qm=Symbol.iterator;function pu(e){return e===null||typeof e!="object"?null:(e=Qm&&e[Qm]||e["@@iterator"],typeof e=="function"?e:null)}var e3=Symbol.for("react.client.reference");function $0(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===e3?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case bc:return"Fragment";case Z0:return"Profiler";case wx:return"StrictMode";case Q0:return"Suspense";case K0:return"SuspenseList";case J0:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case Eu:return"Portal";case Ws:return(e.displayName||"Context")+".Provider";case Nx:return(e._context.displayName||"Context")+".Consumer";case m2:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case g2:return t=e.displayName||null,t!==null?t:$0(e.type)||"Memo";case Io:t=e._payload,e=e._init;try{return $0(e(t))}catch{}}return null}var Tu=Array.isArray,Xt=xx.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ln=Zv.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Dl={pending:!1,data:null,method:null,action:null},e1=[],yc=-1;function js(e){return{current:e}}function gi(e){0>yc||(e.current=e1[yc],e1[yc]=null,yc--)}function wr(e,t){yc++,e1[yc]=e.current,e.current=t}var As=js(null),Ku=js(null),Vo=js(null),Rf=js(null);function kf(e,t){switch(wr(Vo,t),wr(Ku,e),wr(As,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?tp(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=tp(t),e=B5(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}gi(As),wr(As,e)}function zc(){gi(As),gi(Ku),gi(Vo)}function t1(e){e.memoizedState!==null&&wr(Rf,e);var t=As.current,n=B5(t,e.type);t!==n&&(wr(Ku,e),wr(As,n))}function Pf(e){Ku.current===e&&(gi(As),gi(Ku)),Rf.current===e&&(gi(Rf),od._currentValue=Dl)}var n1=Object.prototype.hasOwnProperty,p2=li.unstable_scheduleCallback,a0=li.unstable_cancelCallback,t3=li.unstable_shouldYield,n3=li.unstable_requestPaint,Ss=li.unstable_now,r3=li.unstable_getCurrentPriorityLevel,Ax=li.unstable_ImmediatePriority,Sx=li.unstable_UserBlockingPriority,Ff=li.unstable_NormalPriority,i3=li.unstable_LowPriority,Cx=li.unstable_IdlePriority,a3=li.log,s3=li.unstable_setDisableYieldValue,bd=null,Ta=null;function Fo(e){if(typeof a3=="function"&&s3(e),Ta&&typeof Ta.setStrictMode=="function")try{Ta.setStrictMode(bd,e)}catch{}}var ja=Math.clz32?Math.clz32:c3,o3=Math.log,l3=Math.LN2;function c3(e){return e>>>=0,e===0?32:31-(o3(e)/l3|0)|0}var nf=256,rf=4194304;function Cl(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function vh(e,t,n){var i=e.pendingLanes;if(i===0)return 0;var o=0,l=e.suspendedLanes,f=e.pingedLanes;e=e.warmLanes;var m=i&134217727;return m!==0?(i=m&~l,i!==0?o=Cl(i):(f&=m,f!==0?o=Cl(f):n||(n=m&~e,n!==0&&(o=Cl(n))))):(m=i&~l,m!==0?o=Cl(m):f!==0?o=Cl(f):n||(n=i&~e,n!==0&&(o=Cl(n)))),o===0?0:t!==0&&t!==o&&!(t&l)&&(l=o&-o,n=t&-t,l>=n||l===32&&(n&4194048)!==0)?t:o}function yd(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function u3(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ex(){var e=nf;return nf<<=1,!(nf&4194048)&&(nf=256),e}function Tx(){var e=rf;return rf<<=1,!(rf&62914560)&&(rf=4194304),e}function s0(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vd(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function d3(e,t,n,i,o,l){var f=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var m=e.entanglements,p=e.expirationTimes,x=e.hiddenUpdates;for(n=f&~n;0<n;){var S=31-ja(n),N=1<<S;m[S]=0,p[S]=-1;var j=x[S];if(j!==null)for(x[S]=null,S=0;S<j.length;S++){var v=j[S];v!==null&&(v.lane&=-536870913)}n&=~N}i!==0&&jx(e,i,0),l!==0&&o===0&&e.tag!==0&&(e.suspendedLanes|=l&~(f&~t))}function jx(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-ja(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&4194090}function _x(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-ja(n),o=1<<i;o&t|e[i]&t&&(e[i]|=t),n&=~o}}function x2(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function b2(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function Ix(){var e=Ln.p;return e!==0?e:(e=window.event,e===void 0?32:Z5(e.type))}function f3(e,t){var n=Ln.p;try{return Ln.p=e,t()}finally{Ln.p=n}}var al=Math.random().toString(36).slice(2),ki="__reactFiber$"+al,la="__reactProps$"+al,eu="__reactContainer$"+al,r1="__reactEvents$"+al,h3="__reactListeners$"+al,m3="__reactHandles$"+al,Km="__reactResources$"+al,wd="__reactMarker$"+al;function y2(e){delete e[ki],delete e[la],delete e[r1],delete e[h3],delete e[m3]}function vc(e){var t=e[ki];if(t)return t;for(var n=e.parentNode;n;){if(t=n[eu]||n[ki]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=ip(e);e!==null;){if(n=e[ki])return n;e=ip(e)}return t}e=n,n=e.parentNode}return null}function tu(e){if(e=e[ki]||e[eu]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function ju(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(it(33))}function Lc(e){var t=e[Km];return t||(t=e[Km]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function hi(e){e[wd]=!0}var Dx=new Set,Lx={};function Xl(e,t){Hc(e,t),Hc(e+"Capture",t)}function Hc(e,t){for(Lx[e]=t,e=0;e<t.length;e++)Dx.add(t[e])}var g3=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Jm={},$m={};function p3(e){return n1.call($m,e)?!0:n1.call(Jm,e)?!1:g3.test(e)?$m[e]=!0:(Jm[e]=!0,!1)}function vf(e,t,n){if(p3(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function af(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function Us(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}var o0,eg;function fc(e){if(o0===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);o0=t&&t[1]||"",eg=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+o0+e+eg}var l0=!1;function c0(e,t){if(!e||l0)return"";l0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var N=function(){throw Error()};if(Object.defineProperty(N.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(N,[])}catch(v){var j=v}Reflect.construct(e,[],N)}else{try{N.call()}catch(v){j=v}e.call(N.prototype)}}else{try{throw Error()}catch(v){j=v}(N=e())&&typeof N.catch=="function"&&N.catch(function(){})}}catch(v){if(v&&j&&typeof v.stack=="string")return[v.stack,j.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var l=i.DetermineComponentFrameRoot(),f=l[0],m=l[1];if(f&&m){var p=f.split(`
`),x=m.split(`
`);for(o=i=0;i<p.length&&!p[i].includes("DetermineComponentFrameRoot");)i++;for(;o<x.length&&!x[o].includes("DetermineComponentFrameRoot");)o++;if(i===p.length||o===x.length)for(i=p.length-1,o=x.length-1;1<=i&&0<=o&&p[i]!==x[o];)o--;for(;1<=i&&0<=o;i--,o--)if(p[i]!==x[o]){if(i!==1||o!==1)do if(i--,o--,0>o||p[i]!==x[o]){var S=`
`+p[i].replace(" at new "," at ");return e.displayName&&S.includes("<anonymous>")&&(S=S.replace("<anonymous>",e.displayName)),S}while(1<=i&&0<=o);break}}}finally{l0=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?fc(n):""}function x3(e){switch(e.tag){case 26:case 27:case 5:return fc(e.type);case 16:return fc("Lazy");case 13:return fc("Suspense");case 19:return fc("SuspenseList");case 0:case 15:return c0(e.type,!1);case 11:return c0(e.type.render,!1);case 1:return c0(e.type,!0);case 31:return fc("Activity");default:return""}}function tg(e){try{var t="";do t+=x3(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function Ha(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ox(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function b3(e){var t=Ox(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(f){i=""+f,l.call(this,f)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(f){i=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Bf(e){e._valueTracker||(e._valueTracker=b3(e))}function Mx(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=Ox(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function Uf(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var y3=/[\n"\\]/g;function Ga(e){return e.replace(y3,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function i1(e,t,n,i,o,l,f,m){e.name="",f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"?e.type=f:e.removeAttribute("type"),t!=null?f==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Ha(t)):e.value!==""+Ha(t)&&(e.value=""+Ha(t)):f!=="submit"&&f!=="reset"||e.removeAttribute("value"),t!=null?a1(e,f,Ha(t)):n!=null?a1(e,f,Ha(n)):i!=null&&e.removeAttribute("value"),o==null&&l!=null&&(e.defaultChecked=!!l),o!=null&&(e.checked=o&&typeof o!="function"&&typeof o!="symbol"),m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"?e.name=""+Ha(m):e.removeAttribute("name")}function Rx(e,t,n,i,o,l,f,m){if(l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"&&(e.type=l),t!=null||n!=null){if(!(l!=="submit"&&l!=="reset"||t!=null))return;n=n!=null?""+Ha(n):"",t=t!=null?""+Ha(t):n,m||t===e.value||(e.value=t),e.defaultValue=t}i=i??o,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=m?e.checked:!!i,e.defaultChecked=!!i,f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.name=f)}function a1(e,t,n){t==="number"&&Uf(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Oc(e,t,n,i){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&i&&(e[n].defaultSelected=!0)}else{for(n=""+Ha(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,i&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function kx(e,t,n){if(t!=null&&(t=""+Ha(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+Ha(n):""}function Px(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(it(92));if(Tu(i)){if(1<i.length)throw Error(it(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=Ha(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i)}function Vc(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var v3=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ng(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||v3.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Fx(e,t,n){if(t!=null&&typeof t!="object")throw Error(it(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var o in t)i=t[o],t.hasOwnProperty(o)&&n[o]!==i&&ng(e,o,i)}else for(var l in t)t.hasOwnProperty(l)&&ng(e,l,t[l])}function v2(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var w3=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),N3=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function wf(e){return N3.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var s1=null;function w2(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var wc=null,Mc=null;function rg(e){var t=tu(e);if(t&&(e=t.stateNode)){var n=e[la]||null;e:switch(e=t.stateNode,t.type){case"input":if(i1(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Ga(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var o=i[la]||null;if(!o)throw Error(it(90));i1(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&Mx(i)}break e;case"textarea":kx(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&Oc(e,!!n.multiple,t,!1)}}}var u0=!1;function Bx(e,t,n){if(u0)return e(t,n);u0=!0;try{var i=e(t);return i}finally{if(u0=!1,(wc!==null||Mc!==null)&&(Ih(),wc&&(t=wc,e=Mc,Mc=wc=null,rg(t),e)))for(t=0;t<e.length;t++)rg(e[t])}}function Ju(e,t){var n=e.stateNode;if(n===null)return null;var i=n[la]||null;if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(it(231,t,typeof n));return n}var eo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),o1=!1;if(eo)try{var xu={};Object.defineProperty(xu,"passive",{get:function(){o1=!0}}),window.addEventListener("test",xu,xu),window.removeEventListener("test",xu,xu)}catch{o1=!1}var Bo=null,N2=null,Nf=null;function Ux(){if(Nf)return Nf;var e,t=N2,n=t.length,i,o="value"in Bo?Bo.value:Bo.textContent,l=o.length;for(e=0;e<n&&t[e]===o[e];e++);var f=n-e;for(i=1;i<=f&&t[n-i]===o[l-i];i++);return Nf=o.slice(e,1<i?1-i:void 0)}function Af(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function sf(){return!0}function ig(){return!1}function ua(e){function t(n,i,o,l,f){this._reactName=n,this._targetInst=o,this.type=i,this.nativeEvent=l,this.target=f,this.currentTarget=null;for(var m in e)e.hasOwnProperty(m)&&(n=e[m],this[m]=n?n(l):l[m]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?sf:ig,this.isPropagationStopped=ig,this}return hr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=sf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=sf)},persist:function(){},isPersistent:sf}),t}var Zl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wh=ua(Zl),Nd=hr({},Zl,{view:0,detail:0}),A3=ua(Nd),d0,f0,bu,Nh=hr({},Nd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:A2,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==bu&&(bu&&e.type==="mousemove"?(d0=e.screenX-bu.screenX,f0=e.screenY-bu.screenY):f0=d0=0,bu=e),d0)},movementY:function(e){return"movementY"in e?e.movementY:f0}}),ag=ua(Nh),S3=hr({},Nh,{dataTransfer:0}),C3=ua(S3),E3=hr({},Nd,{relatedTarget:0}),h0=ua(E3),T3=hr({},Zl,{animationName:0,elapsedTime:0,pseudoElement:0}),j3=ua(T3),_3=hr({},Zl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),I3=ua(_3),D3=hr({},Zl,{data:0}),sg=ua(D3),L3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},O3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},M3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function R3(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=M3[e])?!!t[e]:!1}function A2(){return R3}var k3=hr({},Nd,{key:function(e){if(e.key){var t=L3[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Af(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?O3[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:A2,charCode:function(e){return e.type==="keypress"?Af(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Af(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),P3=ua(k3),F3=hr({},Nh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),og=ua(F3),B3=hr({},Nd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:A2}),U3=ua(B3),z3=hr({},Zl,{propertyName:0,elapsedTime:0,pseudoElement:0}),H3=ua(z3),V3=hr({},Nh,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),q3=ua(V3),G3=hr({},Zl,{newState:0,oldState:0}),W3=ua(G3),Y3=[9,13,27,32],S2=eo&&"CompositionEvent"in window,Du=null;eo&&"documentMode"in document&&(Du=document.documentMode);var X3=eo&&"TextEvent"in window&&!Du,zx=eo&&(!S2||Du&&8<Du&&11>=Du),lg=" ",cg=!1;function Hx(e,t){switch(e){case"keyup":return Y3.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vx(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Nc=!1;function Z3(e,t){switch(e){case"compositionend":return Vx(t);case"keypress":return t.which!==32?null:(cg=!0,lg);case"textInput":return e=t.data,e===lg&&cg?null:e;default:return null}}function Q3(e,t){if(Nc)return e==="compositionend"||!S2&&Hx(e,t)?(e=Ux(),Nf=N2=Bo=null,Nc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return zx&&t.locale!=="ko"?null:t.data;default:return null}}var K3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ug(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!K3[e.type]:t==="textarea"}function qx(e,t,n,i){wc?Mc?Mc.push(i):Mc=[i]:wc=i,t=ih(t,"onChange"),0<t.length&&(n=new wh("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Lu=null,$u=null;function J3(e){k5(e,0)}function Ah(e){var t=ju(e);if(Mx(t))return e}function dg(e,t){if(e==="change")return t}var Gx=!1;if(eo){var m0;if(eo){var g0="oninput"in document;if(!g0){var fg=document.createElement("div");fg.setAttribute("oninput","return;"),g0=typeof fg.oninput=="function"}m0=g0}else m0=!1;Gx=m0&&(!document.documentMode||9<document.documentMode)}function hg(){Lu&&(Lu.detachEvent("onpropertychange",Wx),$u=Lu=null)}function Wx(e){if(e.propertyName==="value"&&Ah($u)){var t=[];qx(t,$u,e,w2(e)),Bx(J3,t)}}function $3(e,t,n){e==="focusin"?(hg(),Lu=t,$u=n,Lu.attachEvent("onpropertychange",Wx)):e==="focusout"&&hg()}function e4(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ah($u)}function t4(e,t){if(e==="click")return Ah(t)}function n4(e,t){if(e==="input"||e==="change")return Ah(t)}function r4(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Da=typeof Object.is=="function"?Object.is:r4;function ed(e,t){if(Da(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var o=n[i];if(!n1.call(t,o)||!Da(e[o],t[o]))return!1}return!0}function mg(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function gg(e,t){var n=mg(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=mg(n)}}function Yx(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Yx(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Xx(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Uf(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Uf(e.document)}return t}function C2(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var i4=eo&&"documentMode"in document&&11>=document.documentMode,Ac=null,l1=null,Ou=null,c1=!1;function pg(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;c1||Ac==null||Ac!==Uf(i)||(i=Ac,"selectionStart"in i&&C2(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ou&&ed(Ou,i)||(Ou=i,i=ih(l1,"onSelect"),0<i.length&&(t=new wh("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=Ac)))}function Sl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sc={animationend:Sl("Animation","AnimationEnd"),animationiteration:Sl("Animation","AnimationIteration"),animationstart:Sl("Animation","AnimationStart"),transitionrun:Sl("Transition","TransitionRun"),transitionstart:Sl("Transition","TransitionStart"),transitioncancel:Sl("Transition","TransitionCancel"),transitionend:Sl("Transition","TransitionEnd")},p0={},Zx={};eo&&(Zx=document.createElement("div").style,"AnimationEvent"in window||(delete Sc.animationend.animation,delete Sc.animationiteration.animation,delete Sc.animationstart.animation),"TransitionEvent"in window||delete Sc.transitionend.transition);function Ql(e){if(p0[e])return p0[e];if(!Sc[e])return e;var t=Sc[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Zx)return p0[e]=t[n];return e}var Qx=Ql("animationend"),Kx=Ql("animationiteration"),Jx=Ql("animationstart"),a4=Ql("transitionrun"),s4=Ql("transitionstart"),o4=Ql("transitioncancel"),$x=Ql("transitionend"),eb=new Map,u1="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");u1.push("scrollEnd");function os(e,t){eb.set(e,t),Xl(t,[e])}var xg=new WeakMap;function Wa(e,t){if(typeof e=="object"&&e!==null){var n=xg.get(e);return n!==void 0?n:(t={value:e,source:t,stack:tg(t)},xg.set(e,t),t)}return{value:e,source:t,stack:tg(t)}}var za=[],Cc=0,E2=0;function Sh(){for(var e=Cc,t=E2=Cc=0;t<e;){var n=za[t];za[t++]=null;var i=za[t];za[t++]=null;var o=za[t];za[t++]=null;var l=za[t];if(za[t++]=null,i!==null&&o!==null){var f=i.pending;f===null?o.next=o:(o.next=f.next,f.next=o),i.pending=o}l!==0&&tb(n,o,l)}}function Ch(e,t,n,i){za[Cc++]=e,za[Cc++]=t,za[Cc++]=n,za[Cc++]=i,E2|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function T2(e,t,n,i){return Ch(e,t,n,i),zf(e)}function nu(e,t){return Ch(e,null,null,t),zf(e)}function tb(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var o=!1,l=e.return;l!==null;)l.childLanes|=n,i=l.alternate,i!==null&&(i.childLanes|=n),l.tag===22&&(e=l.stateNode,e===null||e._visibility&1||(o=!0)),e=l,l=l.return;return e.tag===3?(l=e.stateNode,o&&t!==null&&(o=31-ja(n),e=l.hiddenUpdates,i=e[o],i===null?e[o]=[t]:i.push(t),t.lane=n|536870912),l):null}function zf(e){if(50<Vu)throw Vu=0,D1=null,Error(it(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Ec={};function l4(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sa(e,t,n,i){return new l4(e,t,n,i)}function j2(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Js(e,t){var n=e.alternate;return n===null?(n=Sa(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function nb(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Sf(e,t,n,i,o,l){var f=0;if(i=e,typeof e=="function")j2(e)&&(f=1);else if(typeof e=="string")f=uw(e,n,As.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case J0:return e=Sa(31,n,t,o),e.elementType=J0,e.lanes=l,e;case bc:return Ll(n.children,o,l,t);case wx:f=8,o|=24;break;case Z0:return e=Sa(12,n,t,o|2),e.elementType=Z0,e.lanes=l,e;case Q0:return e=Sa(13,n,t,o),e.elementType=Q0,e.lanes=l,e;case K0:return e=Sa(19,n,t,o),e.elementType=K0,e.lanes=l,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Jv:case Ws:f=10;break e;case Nx:f=9;break e;case m2:f=11;break e;case g2:f=14;break e;case Io:f=16,i=null;break e}f=29,n=Error(it(130,e===null?"null":typeof e,"")),i=null}return t=Sa(f,n,t,o),t.elementType=e,t.type=i,t.lanes=l,t}function Ll(e,t,n,i){return e=Sa(7,e,i,t),e.lanes=n,e}function x0(e,t,n){return e=Sa(6,e,null,t),e.lanes=n,e}function b0(e,t,n){return t=Sa(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Tc=[],jc=0,Hf=null,Vf=0,Va=[],qa=0,Ol=null,Ys=1,Xs="";function El(e,t){Tc[jc++]=Vf,Tc[jc++]=Hf,Hf=e,Vf=t}function rb(e,t,n){Va[qa++]=Ys,Va[qa++]=Xs,Va[qa++]=Ol,Ol=e;var i=Ys;e=Xs;var o=32-ja(i)-1;i&=~(1<<o),n+=1;var l=32-ja(t)+o;if(30<l){var f=o-o%5;l=(i&(1<<f)-1).toString(32),i>>=f,o-=f,Ys=1<<32-ja(t)+o|n<<o|i,Xs=l+e}else Ys=1<<l|n<<o|i,Xs=e}function _2(e){e.return!==null&&(El(e,1),rb(e,1,0))}function I2(e){for(;e===Hf;)Hf=Tc[--jc],Tc[jc]=null,Vf=Tc[--jc],Tc[jc]=null;for(;e===Ol;)Ol=Va[--qa],Va[qa]=null,Xs=Va[--qa],Va[qa]=null,Ys=Va[--qa],Va[qa]=null}var Wi=null,Lr=null,Dn=!1,Ml=null,vs=!1,d1=Error(it(519));function Vl(e){var t=Error(it(418,""));throw td(Wa(t,e)),d1}function bg(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[ki]=e,t[la]=i,n){case"dialog":gn("cancel",t),gn("close",t);break;case"iframe":case"object":case"embed":gn("load",t);break;case"video":case"audio":for(n=0;n<id.length;n++)gn(id[n],t);break;case"source":gn("error",t);break;case"img":case"image":case"link":gn("error",t),gn("load",t);break;case"details":gn("toggle",t);break;case"input":gn("invalid",t),Rx(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),Bf(t);break;case"select":gn("invalid",t);break;case"textarea":gn("invalid",t),Px(t,i.value,i.defaultValue,i.children),Bf(t)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||F5(t.textContent,n)?(i.popover!=null&&(gn("beforetoggle",t),gn("toggle",t)),i.onScroll!=null&&gn("scroll",t),i.onScrollEnd!=null&&gn("scrollend",t),i.onClick!=null&&(t.onclick=Oh),t=!0):t=!1,t||Vl(e)}function yg(e){for(Wi=e.return;Wi;)switch(Wi.tag){case 5:case 13:vs=!1;return;case 27:case 3:vs=!0;return;default:Wi=Wi.return}}function yu(e){if(e!==Wi)return!1;if(!Dn)return yg(e),Dn=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||P1(e.type,e.memoizedProps)),n=!n),n&&Lr&&Vl(e),yg(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(it(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){Lr=ss(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}Lr=null}}else t===27?(t=Lr,sl(e.type)?(e=U1,U1=null,Lr=e):Lr=t):Lr=Wi?ss(e.stateNode.nextSibling):null;return!0}function Ad(){Lr=Wi=null,Dn=!1}function vg(){var e=Ml;return e!==null&&(aa===null?aa=e:aa.push.apply(aa,e),Ml=null),e}function td(e){Ml===null?Ml=[e]:Ml.push(e)}var f1=js(null),Kl=null,Zs=null;function Lo(e,t,n){wr(f1,t._currentValue),t._currentValue=n}function $s(e){e._currentValue=f1.current,gi(f1)}function h1(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function m1(e,t,n,i){var o=e.child;for(o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){var f=o.child;l=l.firstContext;e:for(;l!==null;){var m=l;l=o;for(var p=0;p<t.length;p++)if(m.context===t[p]){l.lanes|=n,m=l.alternate,m!==null&&(m.lanes|=n),h1(l.return,n,e),i||(f=null);break e}l=m.next}}else if(o.tag===18){if(f=o.return,f===null)throw Error(it(341));f.lanes|=n,l=f.alternate,l!==null&&(l.lanes|=n),h1(f,n,e),f=null}else f=o.child;if(f!==null)f.return=o;else for(f=o;f!==null;){if(f===e){f=null;break}if(o=f.sibling,o!==null){o.return=f.return,f=o;break}f=f.return}o=f}}function Sd(e,t,n,i){e=null;for(var o=t,l=!1;o!==null;){if(!l){if(o.flags&524288)l=!0;else if(o.flags&262144)break}if(o.tag===10){var f=o.alternate;if(f===null)throw Error(it(387));if(f=f.memoizedProps,f!==null){var m=o.type;Da(o.pendingProps.value,f.value)||(e!==null?e.push(m):e=[m])}}else if(o===Rf.current){if(f=o.alternate,f===null)throw Error(it(387));f.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(e!==null?e.push(od):e=[od])}o=o.return}e!==null&&m1(t,e,n,i),t.flags|=262144}function qf(e){for(e=e.firstContext;e!==null;){if(!Da(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ql(e){Kl=e,Zs=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Pi(e){return ib(Kl,e)}function of(e,t){return Kl===null&&ql(e),ib(e,t)}function ib(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Zs===null){if(e===null)throw Error(it(308));Zs=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Zs=Zs.next=t;return n}var c4=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},u4=li.unstable_scheduleCallback,d4=li.unstable_NormalPriority,si={$$typeof:Ws,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function D2(){return{controller:new c4,data:new Map,refCount:0}}function Cd(e){e.refCount--,e.refCount===0&&u4(d4,function(){e.controller.abort()})}var Mu=null,g1=0,qc=0,Rc=null;function f4(e,t){if(Mu===null){var n=Mu=[];g1=0,qc=em(),Rc={status:"pending",value:void 0,then:function(i){n.push(i)}}}return g1++,t.then(wg,wg),t}function wg(){if(--g1===0&&Mu!==null){Rc!==null&&(Rc.status="fulfilled");var e=Mu;Mu=null,qc=0,Rc=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function h4(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(o){n.push(o)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var o=0;o<n.length;o++)(0,n[o])(t)},function(o){for(i.status="rejected",i.reason=o,o=0;o<n.length;o++)(0,n[o])(void 0)}),i}var Ng=Xt.S;Xt.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&f4(e,t),Ng!==null&&Ng(e,t)};var Rl=js(null);function L2(){var e=Rl.current;return e!==null?e:sr.pooledCache}function Cf(e,t){t===null?wr(Rl,Rl.current):wr(Rl,t.pool)}function ab(){var e=L2();return e===null?null:{parent:si._currentValue,pool:e}}var Ed=Error(it(460)),sb=Error(it(474)),Eh=Error(it(542)),p1={then:function(){}};function Ag(e){return e=e.status,e==="fulfilled"||e==="rejected"}function lf(){}function ob(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(lf,lf),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Cg(e),e;default:if(typeof t.status=="string")t.then(lf,lf);else{if(e=sr,e!==null&&100<e.shellSuspendCounter)throw Error(it(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var o=t;o.status="fulfilled",o.value=i}},function(i){if(t.status==="pending"){var o=t;o.status="rejected",o.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Cg(e),e}throw Ru=t,Ed}}var Ru=null;function Sg(){if(Ru===null)throw Error(it(459));var e=Ru;return Ru=null,e}function Cg(e){if(e===Ed||e===Eh)throw Error(it(483))}var Do=!1;function O2(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function x1(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function qo(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Go(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,Hn&2){var o=i.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),i.pending=t,t=zf(e),tb(e,null,n),t}return Ch(e,i,t,n),zf(e)}function ku(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,_x(e,n)}}function y0(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var o=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var f={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};l===null?o=l=f:l=l.next=f,n=n.next}while(n!==null);l===null?o=l=t:l=l.next=t}else o=l=t;n={baseState:i.baseState,firstBaseUpdate:o,lastBaseUpdate:l,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var b1=!1;function Pu(){if(b1){var e=Rc;if(e!==null)throw e}}function Fu(e,t,n,i){b1=!1;var o=e.updateQueue;Do=!1;var l=o.firstBaseUpdate,f=o.lastBaseUpdate,m=o.shared.pending;if(m!==null){o.shared.pending=null;var p=m,x=p.next;p.next=null,f===null?l=x:f.next=x,f=p;var S=e.alternate;S!==null&&(S=S.updateQueue,m=S.lastBaseUpdate,m!==f&&(m===null?S.firstBaseUpdate=x:m.next=x,S.lastBaseUpdate=p))}if(l!==null){var N=o.baseState;f=0,S=x=p=null,m=l;do{var j=m.lane&-536870913,v=j!==m.lane;if(v?(Sn&j)===j:(i&j)===j){j!==0&&j===qc&&(b1=!0),S!==null&&(S=S.next={lane:0,tag:m.tag,payload:m.payload,callback:null,next:null});e:{var O=e,E=m;j=t;var P=n;switch(E.tag){case 1:if(O=E.payload,typeof O=="function"){N=O.call(P,N,j);break e}N=O;break e;case 3:O.flags=O.flags&-65537|128;case 0:if(O=E.payload,j=typeof O=="function"?O.call(P,N,j):O,j==null)break e;N=hr({},N,j);break e;case 2:Do=!0}}j=m.callback,j!==null&&(e.flags|=64,v&&(e.flags|=8192),v=o.callbacks,v===null?o.callbacks=[j]:v.push(j))}else v={lane:j,tag:m.tag,payload:m.payload,callback:m.callback,next:null},S===null?(x=S=v,p=N):S=S.next=v,f|=j;if(m=m.next,m===null){if(m=o.shared.pending,m===null)break;v=m,m=v.next,v.next=null,o.lastBaseUpdate=v,o.shared.pending=null}}while(!0);S===null&&(p=N),o.baseState=p,o.firstBaseUpdate=x,o.lastBaseUpdate=S,l===null&&(o.shared.lanes=0),el|=f,e.lanes=f,e.memoizedState=N}}function lb(e,t){if(typeof e!="function")throw Error(it(191,e));e.call(t)}function cb(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)lb(n[e],t)}var Gc=js(null),Gf=js(0);function Eg(e,t){e=ro,wr(Gf,e),wr(Gc,t),ro=e|t.baseLanes}function y1(){wr(Gf,ro),wr(Gc,Gc.current)}function M2(){ro=Gf.current,gi(Gc),gi(Gf)}var Jo=0,un=null,Zn=null,Xr=null,Wf=!1,kc=!1,Gl=!1,Yf=0,nd=0,Pc=null,m4=0;function Br(){throw Error(it(321))}function R2(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Da(e[n],t[n]))return!1;return!0}function k2(e,t,n,i,o,l){return Jo=l,un=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Xt.H=e===null||e.memoizedState===null?Ub:zb,Gl=!1,l=n(i,o),Gl=!1,kc&&(l=db(t,n,i,o)),ub(e),l}function ub(e){Xt.H=Xf;var t=Zn!==null&&Zn.next!==null;if(Jo=0,Xr=Zn=un=null,Wf=!1,nd=0,Pc=null,t)throw Error(it(300));e===null||mi||(e=e.dependencies,e!==null&&qf(e)&&(mi=!0))}function db(e,t,n,i){un=e;var o=0;do{if(kc&&(Pc=null),nd=0,kc=!1,25<=o)throw Error(it(301));if(o+=1,Xr=Zn=null,e.updateQueue!=null){var l=e.updateQueue;l.lastEffect=null,l.events=null,l.stores=null,l.memoCache!=null&&(l.memoCache.index=0)}Xt.H=w4,l=t(n,i)}while(kc);return l}function g4(){var e=Xt.H,t=e.useState()[0];return t=typeof t.then=="function"?Td(t):t,e=e.useState()[0],(Zn!==null?Zn.memoizedState:null)!==e&&(un.flags|=1024),t}function P2(){var e=Yf!==0;return Yf=0,e}function F2(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function B2(e){if(Wf){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Wf=!1}Jo=0,Xr=Zn=un=null,kc=!1,nd=Yf=0,Pc=null}function ra(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xr===null?un.memoizedState=Xr=e:Xr=Xr.next=e,Xr}function Qr(){if(Zn===null){var e=un.alternate;e=e!==null?e.memoizedState:null}else e=Zn.next;var t=Xr===null?un.memoizedState:Xr.next;if(t!==null)Xr=t,Zn=e;else{if(e===null)throw un.alternate===null?Error(it(467)):Error(it(310));Zn=e,e={memoizedState:Zn.memoizedState,baseState:Zn.baseState,baseQueue:Zn.baseQueue,queue:Zn.queue,next:null},Xr===null?un.memoizedState=Xr=e:Xr=Xr.next=e}return Xr}function U2(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Td(e){var t=nd;return nd+=1,Pc===null&&(Pc=[]),e=ob(Pc,e,t),t=un,(Xr===null?t.memoizedState:Xr.next)===null&&(t=t.alternate,Xt.H=t===null||t.memoizedState===null?Ub:zb),e}function Th(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Td(e);if(e.$$typeof===Ws)return Pi(e)}throw Error(it(438,String(e)))}function z2(e){var t=null,n=un.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=un.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(o){return o.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=U2(),un.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=$v;return t.index++,n}function to(e,t){return typeof t=="function"?t(e):t}function Ef(e){var t=Qr();return H2(t,Zn,e)}function H2(e,t,n){var i=e.queue;if(i===null)throw Error(it(311));i.lastRenderedReducer=n;var o=e.baseQueue,l=i.pending;if(l!==null){if(o!==null){var f=o.next;o.next=l.next,l.next=f}t.baseQueue=o=l,i.pending=null}if(l=e.baseState,o===null)e.memoizedState=l;else{t=o.next;var m=f=null,p=null,x=t,S=!1;do{var N=x.lane&-536870913;if(N!==x.lane?(Sn&N)===N:(Jo&N)===N){var j=x.revertLane;if(j===0)p!==null&&(p=p.next={lane:0,revertLane:0,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null}),N===qc&&(S=!0);else if((Jo&j)===j){x=x.next,j===qc&&(S=!0);continue}else N={lane:0,revertLane:x.revertLane,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null},p===null?(m=p=N,f=l):p=p.next=N,un.lanes|=j,el|=j;N=x.action,Gl&&n(l,N),l=x.hasEagerState?x.eagerState:n(l,N)}else j={lane:N,revertLane:x.revertLane,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null},p===null?(m=p=j,f=l):p=p.next=j,un.lanes|=N,el|=N;x=x.next}while(x!==null&&x!==t);if(p===null?f=l:p.next=m,!Da(l,e.memoizedState)&&(mi=!0,S&&(n=Rc,n!==null)))throw n;e.memoizedState=l,e.baseState=f,e.baseQueue=p,i.lastRenderedState=l}return o===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function v0(e){var t=Qr(),n=t.queue;if(n===null)throw Error(it(311));n.lastRenderedReducer=e;var i=n.dispatch,o=n.pending,l=t.memoizedState;if(o!==null){n.pending=null;var f=o=o.next;do l=e(l,f.action),f=f.next;while(f!==o);Da(l,t.memoizedState)||(mi=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,i]}function fb(e,t,n){var i=un,o=Qr(),l=Dn;if(l){if(n===void 0)throw Error(it(407));n=n()}else n=t();var f=!Da((Zn||o).memoizedState,n);f&&(o.memoizedState=n,mi=!0),o=o.queue;var m=gb.bind(null,i,o,e);if(jd(2048,8,m,[e]),o.getSnapshot!==t||f||Xr!==null&&Xr.memoizedState.tag&1){if(i.flags|=2048,Wc(9,jh(),mb.bind(null,i,o,n,t),null),sr===null)throw Error(it(349));l||Jo&124||hb(i,t,n)}return n}function hb(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=un.updateQueue,t===null?(t=U2(),un.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function mb(e,t,n,i){t.value=n,t.getSnapshot=i,pb(t)&&xb(e)}function gb(e,t,n){return n(function(){pb(t)&&xb(e)})}function pb(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Da(e,n)}catch{return!0}}function xb(e){var t=nu(e,2);t!==null&&Ia(t,e,2)}function v1(e){var t=ra();if(typeof e=="function"){var n=e;if(e=n(),Gl){Fo(!0);try{n()}finally{Fo(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:to,lastRenderedState:e},t}function bb(e,t,n,i){return e.baseState=n,H2(e,Zn,typeof i=="function"?i:to)}function p4(e,t,n,i,o){if(_h(e))throw Error(it(485));if(e=t.action,e!==null){var l={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(f){l.listeners.push(f)}};Xt.T!==null?n(!0):l.isTransition=!1,i(l),n=t.pending,n===null?(l.next=t.pending=l,yb(t,l)):(l.next=n.next,t.pending=n.next=l)}}function yb(e,t){var n=t.action,i=t.payload,o=e.state;if(t.isTransition){var l=Xt.T,f={};Xt.T=f;try{var m=n(o,i),p=Xt.S;p!==null&&p(f,m),Tg(e,t,m)}catch(x){w1(e,t,x)}finally{Xt.T=l}}else try{l=n(o,i),Tg(e,t,l)}catch(x){w1(e,t,x)}}function Tg(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){jg(e,t,i)},function(i){return w1(e,t,i)}):jg(e,t,n)}function jg(e,t,n){t.status="fulfilled",t.value=n,vb(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,yb(e,n)))}function w1(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,vb(t),t=t.next;while(t!==i)}e.action=null}function vb(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function wb(e,t){return t}function _g(e,t){if(Dn){var n=sr.formState;if(n!==null){e:{var i=un;if(Dn){if(Lr){t:{for(var o=Lr,l=vs;o.nodeType!==8;){if(!l){o=null;break t}if(o=ss(o.nextSibling),o===null){o=null;break t}}l=o.data,o=l==="F!"||l==="F"?o:null}if(o){Lr=ss(o.nextSibling),i=o.data==="F!";break e}}Vl(i)}i=!1}i&&(t=n[0])}}return n=ra(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wb,lastRenderedState:t},n.queue=i,n=Pb.bind(null,un,i),i.dispatch=n,i=v1(!1),l=W2.bind(null,un,!1,i.queue),i=ra(),o={state:t,dispatch:null,action:e,pending:null},i.queue=o,n=p4.bind(null,un,o,l,n),o.dispatch=n,i.memoizedState=e,[t,n,!1]}function Ig(e){var t=Qr();return Nb(t,Zn,e)}function Nb(e,t,n){if(t=H2(e,t,wb)[0],e=Ef(to)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=Td(t)}catch(f){throw f===Ed?Eh:f}else i=t;t=Qr();var o=t.queue,l=o.dispatch;return n!==t.memoizedState&&(un.flags|=2048,Wc(9,jh(),x4.bind(null,o,n),null)),[i,l,e]}function x4(e,t){e.action=t}function Dg(e){var t=Qr(),n=Zn;if(n!==null)return Nb(t,n,e);Qr(),t=t.memoizedState,n=Qr();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function Wc(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},t=un.updateQueue,t===null&&(t=U2(),un.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function jh(){return{destroy:void 0,resource:void 0}}function Ab(){return Qr().memoizedState}function Tf(e,t,n,i){var o=ra();i=i===void 0?null:i,un.flags|=e,o.memoizedState=Wc(1|t,jh(),n,i)}function jd(e,t,n,i){var o=Qr();i=i===void 0?null:i;var l=o.memoizedState.inst;Zn!==null&&i!==null&&R2(i,Zn.memoizedState.deps)?o.memoizedState=Wc(t,l,n,i):(un.flags|=e,o.memoizedState=Wc(1|t,l,n,i))}function Lg(e,t){Tf(8390656,8,e,t)}function Sb(e,t){jd(2048,8,e,t)}function Cb(e,t){return jd(4,2,e,t)}function Eb(e,t){return jd(4,4,e,t)}function Tb(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function jb(e,t,n){n=n!=null?n.concat([e]):null,jd(4,4,Tb.bind(null,t,e),n)}function V2(){}function _b(e,t){var n=Qr();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&R2(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Ib(e,t){var n=Qr();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&R2(t,i[1]))return i[0];if(i=e(),Gl){Fo(!0);try{e()}finally{Fo(!1)}}return n.memoizedState=[i,t],i}function q2(e,t,n){return n===void 0||Jo&1073741824?e.memoizedState=t:(e.memoizedState=n,e=v5(),un.lanes|=e,el|=e,n)}function Db(e,t,n,i){return Da(n,t)?n:Gc.current!==null?(e=q2(e,n,i),Da(e,t)||(mi=!0),e):Jo&42?(e=v5(),un.lanes|=e,el|=e,t):(mi=!0,e.memoizedState=n)}function Lb(e,t,n,i,o){var l=Ln.p;Ln.p=l!==0&&8>l?l:8;var f=Xt.T,m={};Xt.T=m,W2(e,!1,t,n);try{var p=o(),x=Xt.S;if(x!==null&&x(m,p),p!==null&&typeof p=="object"&&typeof p.then=="function"){var S=h4(p,i);Bu(e,t,S,_a(e))}else Bu(e,t,i,_a(e))}catch(N){Bu(e,t,{then:function(){},status:"rejected",reason:N},_a())}finally{Ln.p=l,Xt.T=f}}function b4(){}function N1(e,t,n,i){if(e.tag!==5)throw Error(it(476));var o=Ob(e).queue;Lb(e,o,t,Dl,n===null?b4:function(){return Mb(e),n(i)})}function Ob(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Dl,baseState:Dl,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:to,lastRenderedState:Dl},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:to,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Mb(e){var t=Ob(e).next.queue;Bu(e,t,{},_a())}function G2(){return Pi(od)}function Rb(){return Qr().memoizedState}function kb(){return Qr().memoizedState}function y4(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=_a();e=qo(n);var i=Go(t,e,n);i!==null&&(Ia(i,t,n),ku(i,t,n)),t={cache:D2()},e.payload=t;return}t=t.return}}function v4(e,t,n){var i=_a();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},_h(e)?Fb(t,n):(n=T2(e,t,n,i),n!==null&&(Ia(n,e,i),Bb(n,t,i)))}function Pb(e,t,n){var i=_a();Bu(e,t,n,i)}function Bu(e,t,n,i){var o={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(_h(e))Fb(t,o);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var f=t.lastRenderedState,m=l(f,n);if(o.hasEagerState=!0,o.eagerState=m,Da(m,f))return Ch(e,t,o,0),sr===null&&Sh(),!1}catch{}finally{}if(n=T2(e,t,o,i),n!==null)return Ia(n,e,i),Bb(n,t,i),!0}return!1}function W2(e,t,n,i){if(i={lane:2,revertLane:em(),action:i,hasEagerState:!1,eagerState:null,next:null},_h(e)){if(t)throw Error(it(479))}else t=T2(e,n,i,2),t!==null&&Ia(t,e,2)}function _h(e){var t=e.alternate;return e===un||t!==null&&t===un}function Fb(e,t){kc=Wf=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Bb(e,t,n){if(n&4194048){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,_x(e,n)}}var Xf={readContext:Pi,use:Th,useCallback:Br,useContext:Br,useEffect:Br,useImperativeHandle:Br,useLayoutEffect:Br,useInsertionEffect:Br,useMemo:Br,useReducer:Br,useRef:Br,useState:Br,useDebugValue:Br,useDeferredValue:Br,useTransition:Br,useSyncExternalStore:Br,useId:Br,useHostTransitionStatus:Br,useFormState:Br,useActionState:Br,useOptimistic:Br,useMemoCache:Br,useCacheRefresh:Br},Ub={readContext:Pi,use:Th,useCallback:function(e,t){return ra().memoizedState=[e,t===void 0?null:t],e},useContext:Pi,useEffect:Lg,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,Tf(4194308,4,Tb.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Tf(4194308,4,e,t)},useInsertionEffect:function(e,t){Tf(4,2,e,t)},useMemo:function(e,t){var n=ra();t=t===void 0?null:t;var i=e();if(Gl){Fo(!0);try{e()}finally{Fo(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=ra();if(n!==void 0){var o=n(t);if(Gl){Fo(!0);try{n(t)}finally{Fo(!1)}}}else o=t;return i.memoizedState=i.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},i.queue=e,e=e.dispatch=v4.bind(null,un,e),[i.memoizedState,e]},useRef:function(e){var t=ra();return e={current:e},t.memoizedState=e},useState:function(e){e=v1(e);var t=e.queue,n=Pb.bind(null,un,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:V2,useDeferredValue:function(e,t){var n=ra();return q2(n,e,t)},useTransition:function(){var e=v1(!1);return e=Lb.bind(null,un,e.queue,!0,!1),ra().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=un,o=ra();if(Dn){if(n===void 0)throw Error(it(407));n=n()}else{if(n=t(),sr===null)throw Error(it(349));Sn&124||hb(i,t,n)}o.memoizedState=n;var l={value:n,getSnapshot:t};return o.queue=l,Lg(gb.bind(null,i,l,e),[e]),i.flags|=2048,Wc(9,jh(),mb.bind(null,i,l,n,t),null),n},useId:function(){var e=ra(),t=sr.identifierPrefix;if(Dn){var n=Xs,i=Ys;n=(i&~(1<<32-ja(i)-1)).toString(32)+n,t=""+t+"R"+n,n=Yf++,0<n&&(t+="H"+n.toString(32)),t+=""}else n=m4++,t=""+t+"r"+n.toString(32)+"";return e.memoizedState=t},useHostTransitionStatus:G2,useFormState:_g,useActionState:_g,useOptimistic:function(e){var t=ra();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=W2.bind(null,un,!0,n),n.dispatch=t,[e,t]},useMemoCache:z2,useCacheRefresh:function(){return ra().memoizedState=y4.bind(null,un)}},zb={readContext:Pi,use:Th,useCallback:_b,useContext:Pi,useEffect:Sb,useImperativeHandle:jb,useInsertionEffect:Cb,useLayoutEffect:Eb,useMemo:Ib,useReducer:Ef,useRef:Ab,useState:function(){return Ef(to)},useDebugValue:V2,useDeferredValue:function(e,t){var n=Qr();return Db(n,Zn.memoizedState,e,t)},useTransition:function(){var e=Ef(to)[0],t=Qr().memoizedState;return[typeof e=="boolean"?e:Td(e),t]},useSyncExternalStore:fb,useId:Rb,useHostTransitionStatus:G2,useFormState:Ig,useActionState:Ig,useOptimistic:function(e,t){var n=Qr();return bb(n,Zn,e,t)},useMemoCache:z2,useCacheRefresh:kb},w4={readContext:Pi,use:Th,useCallback:_b,useContext:Pi,useEffect:Sb,useImperativeHandle:jb,useInsertionEffect:Cb,useLayoutEffect:Eb,useMemo:Ib,useReducer:v0,useRef:Ab,useState:function(){return v0(to)},useDebugValue:V2,useDeferredValue:function(e,t){var n=Qr();return Zn===null?q2(n,e,t):Db(n,Zn.memoizedState,e,t)},useTransition:function(){var e=v0(to)[0],t=Qr().memoizedState;return[typeof e=="boolean"?e:Td(e),t]},useSyncExternalStore:fb,useId:Rb,useHostTransitionStatus:G2,useFormState:Dg,useActionState:Dg,useOptimistic:function(e,t){var n=Qr();return Zn!==null?bb(n,Zn,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:z2,useCacheRefresh:kb},Fc=null,rd=0;function cf(e){var t=rd;return rd+=1,Fc===null&&(Fc=[]),ob(Fc,e,t)}function vu(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function uf(e,t){throw t.$$typeof===Kv?Error(it(525)):(e=Object.prototype.toString.call(t),Error(it(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Og(e){var t=e._init;return t(e._payload)}function Hb(e){function t(C,_){if(e){var D=C.deletions;D===null?(C.deletions=[_],C.flags|=16):D.push(_)}}function n(C,_){if(!e)return null;for(;_!==null;)t(C,_),_=_.sibling;return null}function i(C){for(var _=new Map;C!==null;)C.key!==null?_.set(C.key,C):_.set(C.index,C),C=C.sibling;return _}function o(C,_){return C=Js(C,_),C.index=0,C.sibling=null,C}function l(C,_,D){return C.index=D,e?(D=C.alternate,D!==null?(D=D.index,D<_?(C.flags|=67108866,_):D):(C.flags|=67108866,_)):(C.flags|=1048576,_)}function f(C){return e&&C.alternate===null&&(C.flags|=67108866),C}function m(C,_,D,U){return _===null||_.tag!==6?(_=x0(D,C.mode,U),_.return=C,_):(_=o(_,D),_.return=C,_)}function p(C,_,D,U){var Y=D.type;return Y===bc?S(C,_,D.props.children,U,D.key):_!==null&&(_.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===Io&&Og(Y)===_.type)?(_=o(_,D.props),vu(_,D),_.return=C,_):(_=Sf(D.type,D.key,D.props,null,C.mode,U),vu(_,D),_.return=C,_)}function x(C,_,D,U){return _===null||_.tag!==4||_.stateNode.containerInfo!==D.containerInfo||_.stateNode.implementation!==D.implementation?(_=b0(D,C.mode,U),_.return=C,_):(_=o(_,D.children||[]),_.return=C,_)}function S(C,_,D,U,Y){return _===null||_.tag!==7?(_=Ll(D,C.mode,U,Y),_.return=C,_):(_=o(_,D),_.return=C,_)}function N(C,_,D){if(typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint")return _=x0(""+_,C.mode,D),_.return=C,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case tf:return D=Sf(_.type,_.key,_.props,null,C.mode,D),vu(D,_),D.return=C,D;case Eu:return _=b0(_,C.mode,D),_.return=C,_;case Io:var U=_._init;return _=U(_._payload),N(C,_,D)}if(Tu(_)||pu(_))return _=Ll(_,C.mode,D,null),_.return=C,_;if(typeof _.then=="function")return N(C,cf(_),D);if(_.$$typeof===Ws)return N(C,of(C,_),D);uf(C,_)}return null}function j(C,_,D,U){var Y=_!==null?_.key:null;if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return Y!==null?null:m(C,_,""+D,U);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case tf:return D.key===Y?p(C,_,D,U):null;case Eu:return D.key===Y?x(C,_,D,U):null;case Io:return Y=D._init,D=Y(D._payload),j(C,_,D,U)}if(Tu(D)||pu(D))return Y!==null?null:S(C,_,D,U,null);if(typeof D.then=="function")return j(C,_,cf(D),U);if(D.$$typeof===Ws)return j(C,_,of(C,D),U);uf(C,D)}return null}function v(C,_,D,U,Y){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return C=C.get(D)||null,m(_,C,""+U,Y);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case tf:return C=C.get(U.key===null?D:U.key)||null,p(_,C,U,Y);case Eu:return C=C.get(U.key===null?D:U.key)||null,x(_,C,U,Y);case Io:var ae=U._init;return U=ae(U._payload),v(C,_,D,U,Y)}if(Tu(U)||pu(U))return C=C.get(D)||null,S(_,C,U,Y,null);if(typeof U.then=="function")return v(C,_,D,cf(U),Y);if(U.$$typeof===Ws)return v(C,_,D,of(_,U),Y);uf(_,U)}return null}function O(C,_,D,U){for(var Y=null,ae=null,F=_,L=_=0,M=null;F!==null&&L<D.length;L++){F.index>L?(M=F,F=null):M=F.sibling;var z=j(C,F,D[L],U);if(z===null){F===null&&(F=M);break}e&&F&&z.alternate===null&&t(C,F),_=l(z,_,L),ae===null?Y=z:ae.sibling=z,ae=z,F=M}if(L===D.length)return n(C,F),Dn&&El(C,L),Y;if(F===null){for(;L<D.length;L++)F=N(C,D[L],U),F!==null&&(_=l(F,_,L),ae===null?Y=F:ae.sibling=F,ae=F);return Dn&&El(C,L),Y}for(F=i(F);L<D.length;L++)M=v(F,C,L,D[L],U),M!==null&&(e&&M.alternate!==null&&F.delete(M.key===null?L:M.key),_=l(M,_,L),ae===null?Y=M:ae.sibling=M,ae=M);return e&&F.forEach(function(k){return t(C,k)}),Dn&&El(C,L),Y}function E(C,_,D,U){if(D==null)throw Error(it(151));for(var Y=null,ae=null,F=_,L=_=0,M=null,z=D.next();F!==null&&!z.done;L++,z=D.next()){F.index>L?(M=F,F=null):M=F.sibling;var k=j(C,F,z.value,U);if(k===null){F===null&&(F=M);break}e&&F&&k.alternate===null&&t(C,F),_=l(k,_,L),ae===null?Y=k:ae.sibling=k,ae=k,F=M}if(z.done)return n(C,F),Dn&&El(C,L),Y;if(F===null){for(;!z.done;L++,z=D.next())z=N(C,z.value,U),z!==null&&(_=l(z,_,L),ae===null?Y=z:ae.sibling=z,ae=z);return Dn&&El(C,L),Y}for(F=i(F);!z.done;L++,z=D.next())z=v(F,C,L,z.value,U),z!==null&&(e&&z.alternate!==null&&F.delete(z.key===null?L:z.key),_=l(z,_,L),ae===null?Y=z:ae.sibling=z,ae=z);return e&&F.forEach(function(R){return t(C,R)}),Dn&&El(C,L),Y}function P(C,_,D,U){if(typeof D=="object"&&D!==null&&D.type===bc&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case tf:e:{for(var Y=D.key;_!==null;){if(_.key===Y){if(Y=D.type,Y===bc){if(_.tag===7){n(C,_.sibling),U=o(_,D.props.children),U.return=C,C=U;break e}}else if(_.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===Io&&Og(Y)===_.type){n(C,_.sibling),U=o(_,D.props),vu(U,D),U.return=C,C=U;break e}n(C,_);break}else t(C,_);_=_.sibling}D.type===bc?(U=Ll(D.props.children,C.mode,U,D.key),U.return=C,C=U):(U=Sf(D.type,D.key,D.props,null,C.mode,U),vu(U,D),U.return=C,C=U)}return f(C);case Eu:e:{for(Y=D.key;_!==null;){if(_.key===Y)if(_.tag===4&&_.stateNode.containerInfo===D.containerInfo&&_.stateNode.implementation===D.implementation){n(C,_.sibling),U=o(_,D.children||[]),U.return=C,C=U;break e}else{n(C,_);break}else t(C,_);_=_.sibling}U=b0(D,C.mode,U),U.return=C,C=U}return f(C);case Io:return Y=D._init,D=Y(D._payload),P(C,_,D,U)}if(Tu(D))return O(C,_,D,U);if(pu(D)){if(Y=pu(D),typeof Y!="function")throw Error(it(150));return D=Y.call(D),E(C,_,D,U)}if(typeof D.then=="function")return P(C,_,cf(D),U);if(D.$$typeof===Ws)return P(C,_,of(C,D),U);uf(C,D)}return typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint"?(D=""+D,_!==null&&_.tag===6?(n(C,_.sibling),U=o(_,D),U.return=C,C=U):(n(C,_),U=x0(D,C.mode,U),U.return=C,C=U),f(C)):n(C,_)}return function(C,_,D,U){try{rd=0;var Y=P(C,_,D,U);return Fc=null,Y}catch(F){if(F===Ed||F===Eh)throw F;var ae=Sa(29,F,null,C.mode);return ae.lanes=U,ae.return=C,ae}finally{}}}var Yc=Hb(!0),Vb=Hb(!1),Xa=js(null),Cs=null;function Oo(e){var t=e.alternate;wr(oi,oi.current&1),wr(Xa,e),Cs===null&&(t===null||Gc.current!==null||t.memoizedState!==null)&&(Cs=e)}function qb(e){if(e.tag===22){if(wr(oi,oi.current),wr(Xa,e),Cs===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Cs=e)}}else Mo()}function Mo(){wr(oi,oi.current),wr(Xa,Xa.current)}function Qs(e){gi(Xa),Cs===e&&(Cs=null),gi(oi)}var oi=js(0);function Zf(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||B1(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function w0(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:hr({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var A1={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=_a(),o=qo(i);o.payload=t,n!=null&&(o.callback=n),t=Go(e,o,i),t!==null&&(Ia(t,e,i),ku(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=_a(),o=qo(i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Go(e,o,i),t!==null&&(Ia(t,e,i),ku(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=_a(),i=qo(n);i.tag=2,t!=null&&(i.callback=t),t=Go(e,i,n),t!==null&&(Ia(t,e,n),ku(t,e,n))}};function Mg(e,t,n,i,o,l,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,l,f):t.prototype&&t.prototype.isPureReactComponent?!ed(n,i)||!ed(o,l):!0}function Rg(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&A1.enqueueReplaceState(t,t.state,null)}function Wl(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=hr({},n));for(var o in e)n[o]===void 0&&(n[o]=e[o])}return n}var Qf=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Gb(e){Qf(e)}function Wb(e){console.error(e)}function Yb(e){Qf(e)}function Kf(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function kg(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function S1(e,t,n){return n=qo(n),n.tag=3,n.payload={element:null},n.callback=function(){Kf(e,t)},n}function Xb(e){return e=qo(e),e.tag=3,e}function Zb(e,t,n,i){var o=n.type.getDerivedStateFromError;if(typeof o=="function"){var l=i.value;e.payload=function(){return o(l)},e.callback=function(){kg(t,n,i)}}var f=n.stateNode;f!==null&&typeof f.componentDidCatch=="function"&&(e.callback=function(){kg(t,n,i),typeof o!="function"&&(Wo===null?Wo=new Set([this]):Wo.add(this));var m=i.stack;this.componentDidCatch(i.value,{componentStack:m!==null?m:""})})}function N4(e,t,n,i,o){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&Sd(t,n,o,!0),n=Xa.current,n!==null){switch(n.tag){case 13:return Cs===null?L1():n.alternate===null&&Or===0&&(Or=3),n.flags&=-257,n.flags|=65536,n.lanes=o,i===p1?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),L0(e,i,o)),!1;case 22:return n.flags|=65536,i===p1?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),L0(e,i,o)),!1}throw Error(it(435,n.tag))}return L0(e,i,o),L1(),!1}if(Dn)return t=Xa.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=o,i!==d1&&(e=Error(it(422),{cause:i}),td(Wa(e,n)))):(i!==d1&&(t=Error(it(423),{cause:i}),td(Wa(t,n))),e=e.current.alternate,e.flags|=65536,o&=-o,e.lanes|=o,i=Wa(i,n),o=S1(e.stateNode,i,o),y0(e,o),Or!==4&&(Or=2)),!1;var l=Error(it(520),{cause:i});if(l=Wa(l,n),Hu===null?Hu=[l]:Hu.push(l),Or!==4&&(Or=2),t===null)return!0;i=Wa(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=o&-o,n.lanes|=e,e=S1(n.stateNode,i,e),y0(n,e),!1;case 1:if(t=n.type,l=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||l!==null&&typeof l.componentDidCatch=="function"&&(Wo===null||!Wo.has(l))))return n.flags|=65536,o&=-o,n.lanes|=o,o=Xb(o),Zb(o,e,n,i),y0(n,o),!1}n=n.return}while(n!==null);return!1}var Qb=Error(it(461)),mi=!1;function vi(e,t,n,i){t.child=e===null?Vb(t,null,n,i):Yc(t,e.child,n,i)}function Pg(e,t,n,i,o){n=n.render;var l=t.ref;if("ref"in i){var f={};for(var m in i)m!=="ref"&&(f[m]=i[m])}else f=i;return ql(t),i=k2(e,t,n,f,l,o),m=P2(),e!==null&&!mi?(F2(e,t,o),no(e,t,o)):(Dn&&m&&_2(t),t.flags|=1,vi(e,t,i,o),t.child)}function Fg(e,t,n,i,o){if(e===null){var l=n.type;return typeof l=="function"&&!j2(l)&&l.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=l,Kb(e,t,l,i,o)):(e=Sf(n.type,null,i,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!Y2(e,o)){var f=l.memoizedProps;if(n=n.compare,n=n!==null?n:ed,n(f,i)&&e.ref===t.ref)return no(e,t,o)}return t.flags|=1,e=Js(l,i),e.ref=t.ref,e.return=t,t.child=e}function Kb(e,t,n,i,o){if(e!==null){var l=e.memoizedProps;if(ed(l,i)&&e.ref===t.ref)if(mi=!1,t.pendingProps=i=l,Y2(e,o))e.flags&131072&&(mi=!0);else return t.lanes=e.lanes,no(e,t,o)}return C1(e,t,n,i,o)}function Jb(e,t,n){var i=t.pendingProps,o=i.children,l=e!==null?e.memoizedState:null;if(i.mode==="hidden"){if(t.flags&128){if(i=l!==null?l.baseLanes|n:n,e!==null){for(o=t.child=e.child,l=0;o!==null;)l=l|o.lanes|o.childLanes,o=o.sibling;t.childLanes=l&~i}else t.childLanes=0,t.child=null;return Bg(e,t,i,n)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Cf(t,l!==null?l.cachePool:null),l!==null?Eg(t,l):y1(),qb(t);else return t.lanes=t.childLanes=536870912,Bg(e,t,l!==null?l.baseLanes|n:n,n)}else l!==null?(Cf(t,l.cachePool),Eg(t,l),Mo(),t.memoizedState=null):(e!==null&&Cf(t,null),y1(),Mo());return vi(e,t,o,n),t.child}function Bg(e,t,n,i){var o=L2();return o=o===null?null:{parent:si._currentValue,pool:o},t.memoizedState={baseLanes:n,cachePool:o},e!==null&&Cf(t,null),y1(),qb(t),e!==null&&Sd(e,t,i,!0),null}function jf(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(it(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function C1(e,t,n,i,o){return ql(t),n=k2(e,t,n,i,void 0,o),i=P2(),e!==null&&!mi?(F2(e,t,o),no(e,t,o)):(Dn&&i&&_2(t),t.flags|=1,vi(e,t,n,o),t.child)}function Ug(e,t,n,i,o,l){return ql(t),t.updateQueue=null,n=db(t,i,n,o),ub(e),i=P2(),e!==null&&!mi?(F2(e,t,l),no(e,t,l)):(Dn&&i&&_2(t),t.flags|=1,vi(e,t,n,l),t.child)}function zg(e,t,n,i,o){if(ql(t),t.stateNode===null){var l=Ec,f=n.contextType;typeof f=="object"&&f!==null&&(l=Pi(f)),l=new n(i,l),t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=A1,t.stateNode=l,l._reactInternals=t,l=t.stateNode,l.props=i,l.state=t.memoizedState,l.refs={},O2(t),f=n.contextType,l.context=typeof f=="object"&&f!==null?Pi(f):Ec,l.state=t.memoizedState,f=n.getDerivedStateFromProps,typeof f=="function"&&(w0(t,n,f,i),l.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(f=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),f!==l.state&&A1.enqueueReplaceState(l,l.state,null),Fu(t,i,l,o),Pu(),l.state=t.memoizedState),typeof l.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){l=t.stateNode;var m=t.memoizedProps,p=Wl(n,m);l.props=p;var x=l.context,S=n.contextType;f=Ec,typeof S=="object"&&S!==null&&(f=Pi(S));var N=n.getDerivedStateFromProps;S=typeof N=="function"||typeof l.getSnapshotBeforeUpdate=="function",m=t.pendingProps!==m,S||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(m||x!==f)&&Rg(t,l,i,f),Do=!1;var j=t.memoizedState;l.state=j,Fu(t,i,l,o),Pu(),x=t.memoizedState,m||j!==x||Do?(typeof N=="function"&&(w0(t,n,N,i),x=t.memoizedState),(p=Do||Mg(t,n,p,i,j,x,f))?(S||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=x),l.props=i,l.state=x,l.context=f,i=p):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{l=t.stateNode,x1(e,t),f=t.memoizedProps,S=Wl(n,f),l.props=S,N=t.pendingProps,j=l.context,x=n.contextType,p=Ec,typeof x=="object"&&x!==null&&(p=Pi(x)),m=n.getDerivedStateFromProps,(x=typeof m=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(f!==N||j!==p)&&Rg(t,l,i,p),Do=!1,j=t.memoizedState,l.state=j,Fu(t,i,l,o),Pu();var v=t.memoizedState;f!==N||j!==v||Do||e!==null&&e.dependencies!==null&&qf(e.dependencies)?(typeof m=="function"&&(w0(t,n,m,i),v=t.memoizedState),(S=Do||Mg(t,n,S,i,j,v,p)||e!==null&&e.dependencies!==null&&qf(e.dependencies))?(x||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(i,v,p),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(i,v,p)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||f===e.memoizedProps&&j===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&j===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=v),l.props=i,l.state=v,l.context=p,i=S):(typeof l.componentDidUpdate!="function"||f===e.memoizedProps&&j===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&j===e.memoizedState||(t.flags|=1024),i=!1)}return l=i,jf(e,t),i=(t.flags&128)!==0,l||i?(l=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:l.render(),t.flags|=1,e!==null&&i?(t.child=Yc(t,e.child,null,o),t.child=Yc(t,null,n,o)):vi(e,t,n,o),t.memoizedState=l.state,e=t.child):e=no(e,t,o),e}function Hg(e,t,n,i){return Ad(),t.flags|=256,vi(e,t,n,i),t.child}var N0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function A0(e){return{baseLanes:e,cachePool:ab()}}function S0(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=Ya),e}function $b(e,t,n){var i=t.pendingProps,o=!1,l=(t.flags&128)!==0,f;if((f=l)||(f=e!==null&&e.memoizedState===null?!1:(oi.current&2)!==0),f&&(o=!0,t.flags&=-129),f=(t.flags&32)!==0,t.flags&=-33,e===null){if(Dn){if(o?Oo(t):Mo(),Dn){var m=Lr,p;if(p=m){e:{for(p=m,m=vs;p.nodeType!==8;){if(!m){m=null;break e}if(p=ss(p.nextSibling),p===null){m=null;break e}}m=p}m!==null?(t.memoizedState={dehydrated:m,treeContext:Ol!==null?{id:Ys,overflow:Xs}:null,retryLane:536870912,hydrationErrors:null},p=Sa(18,null,null,0),p.stateNode=m,p.return=t,t.child=p,Wi=t,Lr=null,p=!0):p=!1}p||Vl(t)}if(m=t.memoizedState,m!==null&&(m=m.dehydrated,m!==null))return B1(m)?t.lanes=32:t.lanes=536870912,null;Qs(t)}return m=i.children,i=i.fallback,o?(Mo(),o=t.mode,m=Jf({mode:"hidden",children:m},o),i=Ll(i,o,n,null),m.return=t,i.return=t,m.sibling=i,t.child=m,o=t.child,o.memoizedState=A0(n),o.childLanes=S0(e,f,n),t.memoizedState=N0,i):(Oo(t),E1(t,m))}if(p=e.memoizedState,p!==null&&(m=p.dehydrated,m!==null)){if(l)t.flags&256?(Oo(t),t.flags&=-257,t=C0(e,t,n)):t.memoizedState!==null?(Mo(),t.child=e.child,t.flags|=128,t=null):(Mo(),o=i.fallback,m=t.mode,i=Jf({mode:"visible",children:i.children},m),o=Ll(o,m,n,null),o.flags|=2,i.return=t,o.return=t,i.sibling=o,t.child=i,Yc(t,e.child,null,n),i=t.child,i.memoizedState=A0(n),i.childLanes=S0(e,f,n),t.memoizedState=N0,t=o);else if(Oo(t),B1(m)){if(f=m.nextSibling&&m.nextSibling.dataset,f)var x=f.dgst;f=x,i=Error(it(419)),i.stack="",i.digest=f,td({value:i,source:null,stack:null}),t=C0(e,t,n)}else if(mi||Sd(e,t,n,!1),f=(n&e.childLanes)!==0,mi||f){if(f=sr,f!==null&&(i=n&-n,i=i&42?1:x2(i),i=i&(f.suspendedLanes|n)?0:i,i!==0&&i!==p.retryLane))throw p.retryLane=i,nu(e,i),Ia(f,e,i),Qb;m.data==="$?"||L1(),t=C0(e,t,n)}else m.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=p.treeContext,Lr=ss(m.nextSibling),Wi=t,Dn=!0,Ml=null,vs=!1,e!==null&&(Va[qa++]=Ys,Va[qa++]=Xs,Va[qa++]=Ol,Ys=e.id,Xs=e.overflow,Ol=t),t=E1(t,i.children),t.flags|=4096);return t}return o?(Mo(),o=i.fallback,m=t.mode,p=e.child,x=p.sibling,i=Js(p,{mode:"hidden",children:i.children}),i.subtreeFlags=p.subtreeFlags&65011712,x!==null?o=Js(x,o):(o=Ll(o,m,n,null),o.flags|=2),o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,m=e.child.memoizedState,m===null?m=A0(n):(p=m.cachePool,p!==null?(x=si._currentValue,p=p.parent!==x?{parent:x,pool:x}:p):p=ab(),m={baseLanes:m.baseLanes|n,cachePool:p}),o.memoizedState=m,o.childLanes=S0(e,f,n),t.memoizedState=N0,i):(Oo(t),n=e.child,e=n.sibling,n=Js(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(f=t.deletions,f===null?(t.deletions=[e],t.flags|=16):f.push(e)),t.child=n,t.memoizedState=null,n)}function E1(e,t){return t=Jf({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Jf(e,t){return e=Sa(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function C0(e,t,n){return Yc(t,e.child,null,n),e=E1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Vg(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),h1(e.return,t,n)}function E0(e,t,n,i,o){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:o}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=i,l.tail=n,l.tailMode=o)}function e5(e,t,n){var i=t.pendingProps,o=i.revealOrder,l=i.tail;if(vi(e,t,i.children,n),i=oi.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Vg(e,n,t);else if(e.tag===19)Vg(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(wr(oi,i),o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&Zf(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),E0(t,!1,o,n,l);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Zf(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}E0(t,!0,n,null,l);break;case"together":E0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function no(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),el|=t.lanes,!(n&t.childLanes))if(e!==null){if(Sd(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(it(153));if(t.child!==null){for(e=t.child,n=Js(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Js(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Y2(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&qf(e)))}function A4(e,t,n){switch(t.tag){case 3:kf(t,t.stateNode.containerInfo),Lo(t,si,e.memoizedState.cache),Ad();break;case 27:case 5:t1(t);break;case 4:kf(t,t.stateNode.containerInfo);break;case 10:Lo(t,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(Oo(t),t.flags|=128,null):n&t.child.childLanes?$b(e,t,n):(Oo(t),e=no(e,t,n),e!==null?e.sibling:null);Oo(t);break;case 19:var o=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(Sd(e,t,n,!1),i=(n&t.childLanes)!==0),o){if(i)return e5(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),wr(oi,oi.current),i)break;return null;case 22:case 23:return t.lanes=0,Jb(e,t,n);case 24:Lo(t,si,e.memoizedState.cache)}return no(e,t,n)}function t5(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)mi=!0;else{if(!Y2(e,n)&&!(t.flags&128))return mi=!1,A4(e,t,n);mi=!!(e.flags&131072)}else mi=!1,Dn&&t.flags&1048576&&rb(t,Vf,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var i=t.elementType,o=i._init;if(i=o(i._payload),t.type=i,typeof i=="function")j2(i)?(e=Wl(i,e),t.tag=1,t=zg(null,t,i,e,n)):(t.tag=0,t=C1(null,t,i,e,n));else{if(i!=null){if(o=i.$$typeof,o===m2){t.tag=11,t=Pg(null,t,i,e,n);break e}else if(o===g2){t.tag=14,t=Fg(null,t,i,e,n);break e}}throw t=$0(i)||i,Error(it(306,t,""))}}return t;case 0:return C1(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,o=Wl(i,t.pendingProps),zg(e,t,i,o,n);case 3:e:{if(kf(t,t.stateNode.containerInfo),e===null)throw Error(it(387));i=t.pendingProps;var l=t.memoizedState;o=l.element,x1(e,t),Fu(t,i,null,n);var f=t.memoizedState;if(i=f.cache,Lo(t,si,i),i!==l.cache&&m1(t,[si],n,!0),Pu(),i=f.element,l.isDehydrated)if(l={element:i,isDehydrated:!1,cache:f.cache},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){t=Hg(e,t,i,n);break e}else if(i!==o){o=Wa(Error(it(424)),t),td(o),t=Hg(e,t,i,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Lr=ss(e.firstChild),Wi=t,Dn=!0,Ml=null,vs=!0,n=Vb(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Ad(),i===o){t=no(e,t,n);break e}vi(e,t,i,n)}t=t.child}return t;case 26:return jf(e,t),e===null?(n=sp(t.type,null,t.pendingProps,null))?t.memoizedState=n:Dn||(n=t.type,e=t.pendingProps,i=ah(Vo.current).createElement(n),i[ki]=t,i[la]=e,Ni(i,n,e),hi(i),t.stateNode=i):t.memoizedState=sp(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return t1(t),e===null&&Dn&&(i=t.stateNode=z5(t.type,t.pendingProps,Vo.current),Wi=t,vs=!0,o=Lr,sl(t.type)?(U1=o,Lr=ss(i.firstChild)):Lr=o),vi(e,t,t.pendingProps.children,n),jf(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Dn&&((o=i=Lr)&&(i=K4(i,t.type,t.pendingProps,vs),i!==null?(t.stateNode=i,Wi=t,Lr=ss(i.firstChild),vs=!1,o=!0):o=!1),o||Vl(t)),t1(t),o=t.type,l=t.pendingProps,f=e!==null?e.memoizedProps:null,i=l.children,P1(o,l)?i=null:f!==null&&P1(o,f)&&(t.flags|=32),t.memoizedState!==null&&(o=k2(e,t,g4,null,null,n),od._currentValue=o),jf(e,t),vi(e,t,i,n),t.child;case 6:return e===null&&Dn&&((e=n=Lr)&&(n=J4(n,t.pendingProps,vs),n!==null?(t.stateNode=n,Wi=t,Lr=null,e=!0):e=!1),e||Vl(t)),null;case 13:return $b(e,t,n);case 4:return kf(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Yc(t,null,i,n):vi(e,t,i,n),t.child;case 11:return Pg(e,t,t.type,t.pendingProps,n);case 7:return vi(e,t,t.pendingProps,n),t.child;case 8:return vi(e,t,t.pendingProps.children,n),t.child;case 12:return vi(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,Lo(t,t.type,i.value),vi(e,t,i.children,n),t.child;case 9:return o=t.type._context,i=t.pendingProps.children,ql(t),o=Pi(o),i=i(o),t.flags|=1,vi(e,t,i,n),t.child;case 14:return Fg(e,t,t.type,t.pendingProps,n);case 15:return Kb(e,t,t.type,t.pendingProps,n);case 19:return e5(e,t,n);case 31:return i=t.pendingProps,n=t.mode,i={mode:i.mode,children:i.children},e===null?(n=Jf(i,n),n.ref=t.ref,t.child=n,n.return=t,t=n):(n=Js(e.child,i),n.ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Jb(e,t,n);case 24:return ql(t),i=Pi(si),e===null?(o=L2(),o===null&&(o=sr,l=D2(),o.pooledCache=l,l.refCount++,l!==null&&(o.pooledCacheLanes|=n),o=l),t.memoizedState={parent:i,cache:o},O2(t),Lo(t,si,o)):(e.lanes&n&&(x1(e,t),Fu(t,null,null,n),Pu()),o=e.memoizedState,l=t.memoizedState,o.parent!==i?(o={parent:i,cache:i},t.memoizedState=o,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=o),Lo(t,si,i)):(i=l.cache,Lo(t,si,i),i!==o.cache&&m1(t,[si],n,!0))),vi(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(it(156,t.tag))}function zs(e){e.flags|=4}function qg(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!q5(t)){if(t=Xa.current,t!==null&&((Sn&4194048)===Sn?Cs!==null:(Sn&62914560)!==Sn&&!(Sn&536870912)||t!==Cs))throw Ru=p1,sb;e.flags|=8192}}function df(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Tx():536870912,e.lanes|=t,Xc|=t)}function wu(e,t){if(!Dn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Er(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags&65011712,i|=o.flags&65011712,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags,i|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function S4(e,t,n){var i=t.pendingProps;switch(I2(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Er(t),null;case 1:return Er(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),$s(si),zc(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(yu(t)?zs(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,vg())),Er(t),null;case 26:return n=t.memoizedState,e===null?(zs(t),n!==null?(Er(t),qg(t,n)):(Er(t),t.flags&=-16777217)):n?n!==e.memoizedState?(zs(t),Er(t),qg(t,n)):(Er(t),t.flags&=-16777217):(e.memoizedProps!==i&&zs(t),Er(t),t.flags&=-16777217),null;case 27:Pf(t),n=Vo.current;var o=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==i&&zs(t);else{if(!i){if(t.stateNode===null)throw Error(it(166));return Er(t),null}e=As.current,yu(t)?bg(t):(e=z5(o,i,n),t.stateNode=e,zs(t))}return Er(t),null;case 5:if(Pf(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&zs(t);else{if(!i){if(t.stateNode===null)throw Error(it(166));return Er(t),null}if(e=As.current,yu(t))bg(t);else{switch(o=ah(Vo.current),e){case 1:e=o.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=o.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=o.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=o.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof i.is=="string"?o.createElement("select",{is:i.is}):o.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e=typeof i.is=="string"?o.createElement(n,{is:i.is}):o.createElement(n)}}e[ki]=t,e[la]=i;e:for(o=t.child;o!==null;){if(o.tag===5||o.tag===6)e.appendChild(o.stateNode);else if(o.tag!==4&&o.tag!==27&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;o.sibling===null;){if(o.return===null||o.return===t)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=e;e:switch(Ni(e,n,i),n){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&zs(t)}}return Er(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&zs(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(it(166));if(e=Vo.current,yu(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,o=Wi,o!==null)switch(o.tag){case 27:case 5:i=o.memoizedProps}e[ki]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||F5(e.nodeValue,n)),e||Vl(t)}else e=ah(e).createTextNode(i),e[ki]=t,t.stateNode=e}return Er(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(o=yu(t),i!==null&&i.dehydrated!==null){if(e===null){if(!o)throw Error(it(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(it(317));o[ki]=t}else Ad(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Er(t),o=!1}else o=vg(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return t.flags&256?(Qs(t),t):(Qs(t),null)}if(Qs(t),t.flags&128)return t.lanes=n,t;if(n=i!==null,e=e!==null&&e.memoizedState!==null,n){i=t.child,o=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(o=i.alternate.memoizedState.cachePool.pool);var l=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==o&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),df(t,t.updateQueue),Er(t),null;case 4:return zc(),e===null&&tm(t.stateNode.containerInfo),Er(t),null;case 10:return $s(t.type),Er(t),null;case 19:if(gi(oi),o=t.memoizedState,o===null)return Er(t),null;if(i=(t.flags&128)!==0,l=o.rendering,l===null)if(i)wu(o,!1);else{if(Or!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=Zf(e),l!==null){for(t.flags|=128,wu(o,!1),e=l.updateQueue,t.updateQueue=e,df(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)nb(n,e),n=n.sibling;return wr(oi,oi.current&1|2),t.child}e=e.sibling}o.tail!==null&&Ss()>eh&&(t.flags|=128,i=!0,wu(o,!1),t.lanes=4194304)}else{if(!i)if(e=Zf(l),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,df(t,e),wu(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!Dn)return Er(t),null}else 2*Ss()-o.renderingStartTime>eh&&n!==536870912&&(t.flags|=128,i=!0,wu(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(e=o.last,e!==null?e.sibling=l:t.child=l,o.last=l)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ss(),t.sibling=null,e=oi.current,wr(oi,i?e&1|2:e&1),t):(Er(t),null);case 22:case 23:return Qs(t),M2(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?n&536870912&&!(t.flags&128)&&(Er(t),t.subtreeFlags&6&&(t.flags|=8192)):Er(t),n=t.updateQueue,n!==null&&df(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&gi(Rl),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),$s(si),Er(t),null;case 25:return null;case 30:return null}throw Error(it(156,t.tag))}function C4(e,t){switch(I2(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return $s(si),zc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Pf(t),null;case 13:if(Qs(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(it(340));Ad()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return gi(oi),null;case 4:return zc(),null;case 10:return $s(t.type),null;case 22:case 23:return Qs(t),M2(),e!==null&&gi(Rl),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return $s(si),null;case 25:return null;default:return null}}function n5(e,t){switch(I2(t),t.tag){case 3:$s(si),zc();break;case 26:case 27:case 5:Pf(t);break;case 4:zc();break;case 13:Qs(t);break;case 19:gi(oi);break;case 10:$s(t.type);break;case 22:case 23:Qs(t),M2(),e!==null&&gi(Rl);break;case 24:$s(si)}}function _d(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var o=i.next;n=o;do{if((n.tag&e)===e){i=void 0;var l=n.create,f=n.inst;i=l(),f.destroy=i}n=n.next}while(n!==o)}}catch(m){rr(t,t.return,m)}}function $o(e,t,n){try{var i=t.updateQueue,o=i!==null?i.lastEffect:null;if(o!==null){var l=o.next;i=l;do{if((i.tag&e)===e){var f=i.inst,m=f.destroy;if(m!==void 0){f.destroy=void 0,o=t;var p=n,x=m;try{x()}catch(S){rr(o,p,S)}}}i=i.next}while(i!==l)}}catch(S){rr(t,t.return,S)}}function r5(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{cb(t,n)}catch(i){rr(e,e.return,i)}}}function i5(e,t,n){n.props=Wl(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){rr(e,t,i)}}function Uu(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof n=="function"?e.refCleanup=n(i):n.current=i}}catch(o){rr(e,t,o)}}function ws(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(o){rr(e,t,o)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(o){rr(e,t,o)}else n.current=null}function a5(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(o){rr(e,e.return,o)}}function T0(e,t,n){try{var i=e.stateNode;W4(i,e.type,n,t),i[la]=t}catch(o){rr(e,e.return,o)}}function s5(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&sl(e.type)||e.tag===4}function j0(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||s5(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&sl(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function T1(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Oh));else if(i!==4&&(i===27&&sl(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(T1(e,t,n),e=e.sibling;e!==null;)T1(e,t,n),e=e.sibling}function $f(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(i===27&&sl(e.type)&&(n=e.stateNode),e=e.child,e!==null))for($f(e,t,n),e=e.sibling;e!==null;)$f(e,t,n),e=e.sibling}function o5(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,o=t.attributes;o.length;)t.removeAttributeNode(o[0]);Ni(t,i,n),t[ki]=e,t[la]=n}catch(l){rr(e,e.return,l)}}var Gs=!1,Ur=!1,_0=!1,Gg=typeof WeakSet=="function"?WeakSet:Set,fi=null;function E4(e,t){if(e=e.containerInfo,R1=ch,e=Xx(e),C2(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var o=i.anchorOffset,l=i.focusNode;i=i.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var f=0,m=-1,p=-1,x=0,S=0,N=e,j=null;t:for(;;){for(var v;N!==n||o!==0&&N.nodeType!==3||(m=f+o),N!==l||i!==0&&N.nodeType!==3||(p=f+i),N.nodeType===3&&(f+=N.nodeValue.length),(v=N.firstChild)!==null;)j=N,N=v;for(;;){if(N===e)break t;if(j===n&&++x===o&&(m=f),j===l&&++S===i&&(p=f),(v=N.nextSibling)!==null)break;N=j,j=N.parentNode}N=v}n=m===-1||p===-1?null:{start:m,end:p}}else n=null}n=n||{start:0,end:0}}else n=null;for(k1={focusedElem:e,selectionRange:n},ch=!1,fi=t;fi!==null;)if(t=fi,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,fi=e;else for(;fi!==null;){switch(t=fi,l=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&l!==null){e=void 0,n=t,o=l.memoizedProps,l=l.memoizedState,i=n.stateNode;try{var O=Wl(n.type,o,n.elementType===n.type);e=i.getSnapshotBeforeUpdate(O,l),i.__reactInternalSnapshotBeforeUpdate=e}catch(E){rr(n,n.return,E)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)F1(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":F1(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(it(163))}if(e=t.sibling,e!==null){e.return=t.return,fi=e;break}fi=t.return}}function l5(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:Co(e,n),i&4&&_d(5,n);break;case 1:if(Co(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(f){rr(n,n.return,f)}else{var o=Wl(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(f){rr(n,n.return,f)}}i&64&&r5(n),i&512&&Uu(n,n.return);break;case 3:if(Co(e,n),i&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{cb(e,t)}catch(f){rr(n,n.return,f)}}break;case 27:t===null&&i&4&&o5(n);case 26:case 5:Co(e,n),t===null&&i&4&&a5(n),i&512&&Uu(n,n.return);break;case 12:Co(e,n);break;case 13:Co(e,n),i&4&&d5(e,n),i&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=R4.bind(null,n),$4(e,n))));break;case 22:if(i=n.memoizedState!==null||Gs,!i){t=t!==null&&t.memoizedState!==null||Ur,o=Gs;var l=Ur;Gs=i,(Ur=t)&&!l?_o(e,n,(n.subtreeFlags&8772)!==0):Co(e,n),Gs=o,Ur=l}break;case 30:break;default:Co(e,n)}}function c5(e){var t=e.alternate;t!==null&&(e.alternate=null,c5(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&y2(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var yr=null,ia=!1;function Hs(e,t,n){for(n=n.child;n!==null;)u5(e,t,n),n=n.sibling}function u5(e,t,n){if(Ta&&typeof Ta.onCommitFiberUnmount=="function")try{Ta.onCommitFiberUnmount(bd,n)}catch{}switch(n.tag){case 26:Ur||ws(n,t),Hs(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Ur||ws(n,t);var i=yr,o=ia;sl(n.type)&&(yr=n.stateNode,ia=!1),Hs(e,t,n),qu(n.stateNode),yr=i,ia=o;break;case 5:Ur||ws(n,t);case 6:if(i=yr,o=ia,yr=null,Hs(e,t,n),yr=i,ia=o,yr!==null)if(ia)try{(yr.nodeType===9?yr.body:yr.nodeName==="HTML"?yr.ownerDocument.body:yr).removeChild(n.stateNode)}catch(l){rr(n,t,l)}else try{yr.removeChild(n.stateNode)}catch(l){rr(n,t,l)}break;case 18:yr!==null&&(ia?(e=yr,rp(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),ud(e)):rp(yr,n.stateNode));break;case 4:i=yr,o=ia,yr=n.stateNode.containerInfo,ia=!0,Hs(e,t,n),yr=i,ia=o;break;case 0:case 11:case 14:case 15:Ur||$o(2,n,t),Ur||$o(4,n,t),Hs(e,t,n);break;case 1:Ur||(ws(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&i5(n,t,i)),Hs(e,t,n);break;case 21:Hs(e,t,n);break;case 22:Ur=(i=Ur)||n.memoizedState!==null,Hs(e,t,n),Ur=i;break;default:Hs(e,t,n)}}function d5(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ud(e)}catch(n){rr(t,t.return,n)}}function T4(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Gg),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Gg),t;default:throw Error(it(435,e.tag))}}function I0(e,t){var n=T4(e);t.forEach(function(i){var o=k4.bind(null,e,i);n.has(i)||(n.add(i),i.then(o,o))})}function ya(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var o=n[i],l=e,f=t,m=f;e:for(;m!==null;){switch(m.tag){case 27:if(sl(m.type)){yr=m.stateNode,ia=!1;break e}break;case 5:yr=m.stateNode,ia=!1;break e;case 3:case 4:yr=m.stateNode.containerInfo,ia=!0;break e}m=m.return}if(yr===null)throw Error(it(160));u5(l,f,o),yr=null,ia=!1,l=o.alternate,l!==null&&(l.return=null),o.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)f5(t,e),t=t.sibling}var is=null;function f5(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ya(t,e),va(e),i&4&&($o(3,e,e.return),_d(3,e),$o(5,e,e.return));break;case 1:ya(t,e),va(e),i&512&&(Ur||n===null||ws(n,n.return)),i&64&&Gs&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var o=is;if(ya(t,e),va(e),i&512&&(Ur||n===null||ws(n,n.return)),i&4){var l=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){e:{i=e.type,n=e.memoizedProps,o=o.ownerDocument||o;t:switch(i){case"title":l=o.getElementsByTagName("title")[0],(!l||l[wd]||l[ki]||l.namespaceURI==="http://www.w3.org/2000/svg"||l.hasAttribute("itemprop"))&&(l=o.createElement(i),o.head.insertBefore(l,o.querySelector("head > title"))),Ni(l,i,n),l[ki]=e,hi(l),i=l;break e;case"link":var f=lp("link","href",o).get(i+(n.href||""));if(f){for(var m=0;m<f.length;m++)if(l=f[m],l.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&l.getAttribute("rel")===(n.rel==null?null:n.rel)&&l.getAttribute("title")===(n.title==null?null:n.title)&&l.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){f.splice(m,1);break t}}l=o.createElement(i),Ni(l,i,n),o.head.appendChild(l);break;case"meta":if(f=lp("meta","content",o).get(i+(n.content||""))){for(m=0;m<f.length;m++)if(l=f[m],l.getAttribute("content")===(n.content==null?null:""+n.content)&&l.getAttribute("name")===(n.name==null?null:n.name)&&l.getAttribute("property")===(n.property==null?null:n.property)&&l.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&l.getAttribute("charset")===(n.charSet==null?null:n.charSet)){f.splice(m,1);break t}}l=o.createElement(i),Ni(l,i,n),o.head.appendChild(l);break;default:throw Error(it(468,i))}l[ki]=e,hi(l),i=l}e.stateNode=i}else cp(o,e.type,e.stateNode);else e.stateNode=op(o,i,e.memoizedProps);else l!==i?(l===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):l.count--,i===null?cp(o,e.type,e.stateNode):op(o,i,e.memoizedProps)):i===null&&e.stateNode!==null&&T0(e,e.memoizedProps,n.memoizedProps)}break;case 27:ya(t,e),va(e),i&512&&(Ur||n===null||ws(n,n.return)),n!==null&&i&4&&T0(e,e.memoizedProps,n.memoizedProps);break;case 5:if(ya(t,e),va(e),i&512&&(Ur||n===null||ws(n,n.return)),e.flags&32){o=e.stateNode;try{Vc(o,"")}catch(v){rr(e,e.return,v)}}i&4&&e.stateNode!=null&&(o=e.memoizedProps,T0(e,o,n!==null?n.memoizedProps:o)),i&1024&&(_0=!0);break;case 6:if(ya(t,e),va(e),i&4){if(e.stateNode===null)throw Error(it(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(v){rr(e,e.return,v)}}break;case 3:if(Df=null,o=is,is=sh(t.containerInfo),ya(t,e),is=o,va(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{ud(t.containerInfo)}catch(v){rr(e,e.return,v)}_0&&(_0=!1,h5(e));break;case 4:i=is,is=sh(e.stateNode.containerInfo),ya(t,e),va(e),is=i;break;case 12:ya(t,e),va(e);break;case 13:ya(t,e),va(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(J2=Ss()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,I0(e,i)));break;case 22:o=e.memoizedState!==null;var p=n!==null&&n.memoizedState!==null,x=Gs,S=Ur;if(Gs=x||o,Ur=S||p,ya(t,e),Ur=S,Gs=x,va(e),i&8192)e:for(t=e.stateNode,t._visibility=o?t._visibility&-2:t._visibility|1,o&&(n===null||p||Gs||Ur||Tl(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){p=n=t;try{if(l=p.stateNode,o)f=l.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none";else{m=p.stateNode;var N=p.memoizedProps.style,j=N!=null&&N.hasOwnProperty("display")?N.display:null;m.style.display=j==null||typeof j=="boolean"?"":(""+j).trim()}}catch(v){rr(p,p.return,v)}}}else if(t.tag===6){if(n===null){p=t;try{p.stateNode.nodeValue=o?"":p.memoizedProps}catch(v){rr(p,p.return,v)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,I0(e,n))));break;case 19:ya(t,e),va(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,I0(e,i)));break;case 30:break;case 21:break;default:ya(t,e),va(e)}}function va(e){var t=e.flags;if(t&2){try{for(var n,i=e.return;i!==null;){if(s5(i)){n=i;break}i=i.return}if(n==null)throw Error(it(160));switch(n.tag){case 27:var o=n.stateNode,l=j0(e);$f(e,l,o);break;case 5:var f=n.stateNode;n.flags&32&&(Vc(f,""),n.flags&=-33);var m=j0(e);$f(e,m,f);break;case 3:case 4:var p=n.stateNode.containerInfo,x=j0(e);T1(e,x,p);break;default:throw Error(it(161))}}catch(S){rr(e,e.return,S)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function h5(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;h5(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Co(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)l5(e,t.alternate,t),t=t.sibling}function Tl(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:$o(4,t,t.return),Tl(t);break;case 1:ws(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&i5(t,t.return,n),Tl(t);break;case 27:qu(t.stateNode);case 26:case 5:ws(t,t.return),Tl(t);break;case 22:t.memoizedState===null&&Tl(t);break;case 30:Tl(t);break;default:Tl(t)}e=e.sibling}}function _o(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,o=e,l=t,f=l.flags;switch(l.tag){case 0:case 11:case 15:_o(o,l,n),_d(4,l);break;case 1:if(_o(o,l,n),i=l,o=i.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(x){rr(i,i.return,x)}if(i=l,o=i.updateQueue,o!==null){var m=i.stateNode;try{var p=o.shared.hiddenCallbacks;if(p!==null)for(o.shared.hiddenCallbacks=null,o=0;o<p.length;o++)lb(p[o],m)}catch(x){rr(i,i.return,x)}}n&&f&64&&r5(l),Uu(l,l.return);break;case 27:o5(l);case 26:case 5:_o(o,l,n),n&&i===null&&f&4&&a5(l),Uu(l,l.return);break;case 12:_o(o,l,n);break;case 13:_o(o,l,n),n&&f&4&&d5(o,l);break;case 22:l.memoizedState===null&&_o(o,l,n),Uu(l,l.return);break;case 30:break;default:_o(o,l,n)}t=t.sibling}}function X2(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Cd(n))}function Z2(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Cd(e))}function xs(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)m5(e,t,n,i),t=t.sibling}function m5(e,t,n,i){var o=t.flags;switch(t.tag){case 0:case 11:case 15:xs(e,t,n,i),o&2048&&_d(9,t);break;case 1:xs(e,t,n,i);break;case 3:xs(e,t,n,i),o&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Cd(e)));break;case 12:if(o&2048){xs(e,t,n,i),e=t.stateNode;try{var l=t.memoizedProps,f=l.id,m=l.onPostCommit;typeof m=="function"&&m(f,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(p){rr(t,t.return,p)}}else xs(e,t,n,i);break;case 13:xs(e,t,n,i);break;case 23:break;case 22:l=t.stateNode,f=t.alternate,t.memoizedState!==null?l._visibility&2?xs(e,t,n,i):zu(e,t):l._visibility&2?xs(e,t,n,i):(l._visibility|=2,hc(e,t,n,i,(t.subtreeFlags&10256)!==0)),o&2048&&X2(f,t);break;case 24:xs(e,t,n,i),o&2048&&Z2(t.alternate,t);break;default:xs(e,t,n,i)}}function hc(e,t,n,i,o){for(o=o&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var l=e,f=t,m=n,p=i,x=f.flags;switch(f.tag){case 0:case 11:case 15:hc(l,f,m,p,o),_d(8,f);break;case 23:break;case 22:var S=f.stateNode;f.memoizedState!==null?S._visibility&2?hc(l,f,m,p,o):zu(l,f):(S._visibility|=2,hc(l,f,m,p,o)),o&&x&2048&&X2(f.alternate,f);break;case 24:hc(l,f,m,p,o),o&&x&2048&&Z2(f.alternate,f);break;default:hc(l,f,m,p,o)}t=t.sibling}}function zu(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,o=i.flags;switch(i.tag){case 22:zu(n,i),o&2048&&X2(i.alternate,i);break;case 24:zu(n,i),o&2048&&Z2(i.alternate,i);break;default:zu(n,i)}t=t.sibling}}var _u=8192;function oc(e){if(e.subtreeFlags&_u)for(e=e.child;e!==null;)g5(e),e=e.sibling}function g5(e){switch(e.tag){case 26:oc(e),e.flags&_u&&e.memoizedState!==null&&fw(is,e.memoizedState,e.memoizedProps);break;case 5:oc(e);break;case 3:case 4:var t=is;is=sh(e.stateNode.containerInfo),oc(e),is=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=_u,_u=16777216,oc(e),_u=t):oc(e));break;default:oc(e)}}function p5(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Nu(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];fi=i,b5(i,e)}p5(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)x5(e),e=e.sibling}function x5(e){switch(e.tag){case 0:case 11:case 15:Nu(e),e.flags&2048&&$o(9,e,e.return);break;case 3:Nu(e);break;case 12:Nu(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,_f(e)):Nu(e);break;default:Nu(e)}}function _f(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];fi=i,b5(i,e)}p5(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:$o(8,t,t.return),_f(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,_f(t));break;default:_f(t)}e=e.sibling}}function b5(e,t){for(;fi!==null;){var n=fi;switch(n.tag){case 0:case 11:case 15:$o(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:Cd(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,fi=i;else e:for(n=e;fi!==null;){i=fi;var o=i.sibling,l=i.return;if(c5(i),i===n){fi=null;break e}if(o!==null){o.return=l,fi=o;break e}fi=l}}}var j4={getCacheForType:function(e){var t=Pi(si),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},_4=typeof WeakMap=="function"?WeakMap:Map,Hn=0,sr=null,pn=null,Sn=0,Un=0,Aa=null,Uo=!1,ru=!1,Q2=!1,ro=0,Or=0,el=0,kl=0,K2=0,Ya=0,Xc=0,Hu=null,aa=null,j1=!1,J2=0,eh=1/0,th=null,Wo=null,wi=0,Yo=null,Zc=null,Bc=0,_1=0,I1=null,y5=null,Vu=0,D1=null;function _a(){if(Hn&2&&Sn!==0)return Sn&-Sn;if(Xt.T!==null){var e=qc;return e!==0?e:em()}return Ix()}function v5(){Ya===0&&(Ya=!(Sn&536870912)||Dn?Ex():536870912);var e=Xa.current;return e!==null&&(e.flags|=32),Ya}function Ia(e,t,n){(e===sr&&(Un===2||Un===9)||e.cancelPendingCommit!==null)&&(Qc(e,0),zo(e,Sn,Ya,!1)),vd(e,n),(!(Hn&2)||e!==sr)&&(e===sr&&(!(Hn&2)&&(kl|=n),Or===4&&zo(e,Sn,Ya,!1)),_s(e))}function w5(e,t,n){if(Hn&6)throw Error(it(327));var i=!n&&(t&124)===0&&(t&e.expiredLanes)===0||yd(e,t),o=i?L4(e,t):D0(e,t,!0),l=i;do{if(o===0){ru&&!i&&zo(e,t,0,!1);break}else{if(n=e.current.alternate,l&&!I4(n)){o=D0(e,t,!1),l=!1;continue}if(o===2){if(l=t,e.errorRecoveryDisabledLanes&l)var f=0;else f=e.pendingLanes&-536870913,f=f!==0?f:f&536870912?536870912:0;if(f!==0){t=f;e:{var m=e;o=Hu;var p=m.current.memoizedState.isDehydrated;if(p&&(Qc(m,f).flags|=256),f=D0(m,f,!1),f!==2){if(Q2&&!p){m.errorRecoveryDisabledLanes|=l,kl|=l,o=4;break e}l=aa,aa=o,l!==null&&(aa===null?aa=l:aa.push.apply(aa,l))}o=f}if(l=!1,o!==2)continue}}if(o===1){Qc(e,0),zo(e,t,0,!0);break}e:{switch(i=e,l=o,l){case 0:case 1:throw Error(it(345));case 4:if((t&4194048)!==t)break;case 6:zo(i,t,Ya,!Uo);break e;case 2:aa=null;break;case 3:case 5:break;default:throw Error(it(329))}if((t&62914560)===t&&(o=J2+300-Ss(),10<o)){if(zo(i,t,Ya,!Uo),vh(i,0,!0)!==0)break e;i.timeoutHandle=U5(Wg.bind(null,i,n,aa,th,j1,t,Ya,kl,Xc,Uo,l,2,-0,0),o);break e}Wg(i,n,aa,th,j1,t,Ya,kl,Xc,Uo,l,0,-0,0)}}break}while(!0);_s(e)}function Wg(e,t,n,i,o,l,f,m,p,x,S,N,j,v){if(e.timeoutHandle=-1,N=t.subtreeFlags,(N&8192||(N&16785408)===16785408)&&(sd={stylesheets:null,count:0,unsuspend:dw},g5(t),N=hw(),N!==null)){e.cancelPendingCommit=N(Xg.bind(null,e,t,l,n,i,o,f,m,p,S,1,j,v)),zo(e,l,f,!x);return}Xg(e,t,l,n,i,o,f,m,p)}function I4(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var o=n[i],l=o.getSnapshot;o=o.value;try{if(!Da(l(),o))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function zo(e,t,n,i){t&=~K2,t&=~kl,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var o=t;0<o;){var l=31-ja(o),f=1<<l;i[l]=-1,o&=~f}n!==0&&jx(e,n,t)}function Ih(){return Hn&6?!0:(Id(0),!1)}function $2(){if(pn!==null){if(Un===0)var e=pn.return;else e=pn,Zs=Kl=null,B2(e),Fc=null,rd=0,e=pn;for(;e!==null;)n5(e.alternate,e),e=e.return;pn=null}}function Qc(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,X4(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),$2(),sr=e,pn=n=Js(e.current,null),Sn=t,Un=0,Aa=null,Uo=!1,ru=yd(e,t),Q2=!1,Xc=Ya=K2=kl=el=Or=0,aa=Hu=null,j1=!1,t&8&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var o=31-ja(i),l=1<<o;t|=e[o],i&=~l}return ro=t,Sh(),n}function N5(e,t){un=null,Xt.H=Xf,t===Ed||t===Eh?(t=Sg(),Un=3):t===sb?(t=Sg(),Un=4):Un=t===Qb?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Aa=t,pn===null&&(Or=1,Kf(e,Wa(t,e.current)))}function A5(){var e=Xt.H;return Xt.H=Xf,e===null?Xf:e}function S5(){var e=Xt.A;return Xt.A=j4,e}function L1(){Or=4,Uo||(Sn&4194048)!==Sn&&Xa.current!==null||(ru=!0),!(el&134217727)&&!(kl&134217727)||sr===null||zo(sr,Sn,Ya,!1)}function D0(e,t,n){var i=Hn;Hn|=2;var o=A5(),l=S5();(sr!==e||Sn!==t)&&(th=null,Qc(e,t)),t=!1;var f=Or;e:do try{if(Un!==0&&pn!==null){var m=pn,p=Aa;switch(Un){case 8:$2(),f=6;break e;case 3:case 2:case 9:case 6:Xa.current===null&&(t=!0);var x=Un;if(Un=0,Aa=null,_c(e,m,p,x),n&&ru){f=0;break e}break;default:x=Un,Un=0,Aa=null,_c(e,m,p,x)}}D4(),f=Or;break}catch(S){N5(e,S)}while(!0);return t&&e.shellSuspendCounter++,Zs=Kl=null,Hn=i,Xt.H=o,Xt.A=l,pn===null&&(sr=null,Sn=0,Sh()),f}function D4(){for(;pn!==null;)C5(pn)}function L4(e,t){var n=Hn;Hn|=2;var i=A5(),o=S5();sr!==e||Sn!==t?(th=null,eh=Ss()+500,Qc(e,t)):ru=yd(e,t);e:do try{if(Un!==0&&pn!==null){t=pn;var l=Aa;t:switch(Un){case 1:Un=0,Aa=null,_c(e,t,l,1);break;case 2:case 9:if(Ag(l)){Un=0,Aa=null,Yg(t);break}t=function(){Un!==2&&Un!==9||sr!==e||(Un=7),_s(e)},l.then(t,t);break e;case 3:Un=7;break e;case 4:Un=5;break e;case 7:Ag(l)?(Un=0,Aa=null,Yg(t)):(Un=0,Aa=null,_c(e,t,l,7));break;case 5:var f=null;switch(pn.tag){case 26:f=pn.memoizedState;case 5:case 27:var m=pn;if(!f||q5(f)){Un=0,Aa=null;var p=m.sibling;if(p!==null)pn=p;else{var x=m.return;x!==null?(pn=x,Dh(x)):pn=null}break t}}Un=0,Aa=null,_c(e,t,l,5);break;case 6:Un=0,Aa=null,_c(e,t,l,6);break;case 8:$2(),Or=6;break e;default:throw Error(it(462))}}O4();break}catch(S){N5(e,S)}while(!0);return Zs=Kl=null,Xt.H=i,Xt.A=o,Hn=n,pn!==null?0:(sr=null,Sn=0,Sh(),Or)}function O4(){for(;pn!==null&&!t3();)C5(pn)}function C5(e){var t=t5(e.alternate,e,ro);e.memoizedProps=e.pendingProps,t===null?Dh(e):pn=t}function Yg(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Ug(n,t,t.pendingProps,t.type,void 0,Sn);break;case 11:t=Ug(n,t,t.pendingProps,t.type.render,t.ref,Sn);break;case 5:B2(t);default:n5(n,t),t=pn=nb(t,ro),t=t5(n,t,ro)}e.memoizedProps=e.pendingProps,t===null?Dh(e):pn=t}function _c(e,t,n,i){Zs=Kl=null,B2(t),Fc=null,rd=0;var o=t.return;try{if(N4(e,o,t,n,Sn)){Or=1,Kf(e,Wa(n,e.current)),pn=null;return}}catch(l){if(o!==null)throw pn=o,l;Or=1,Kf(e,Wa(n,e.current)),pn=null;return}t.flags&32768?(Dn||i===1?e=!0:ru||Sn&536870912?e=!1:(Uo=e=!0,(i===2||i===9||i===3||i===6)&&(i=Xa.current,i!==null&&i.tag===13&&(i.flags|=16384))),E5(t,e)):Dh(t)}function Dh(e){var t=e;do{if(t.flags&32768){E5(t,Uo);return}e=t.return;var n=S4(t.alternate,t,ro);if(n!==null){pn=n;return}if(t=t.sibling,t!==null){pn=t;return}pn=t=e}while(t!==null);Or===0&&(Or=5)}function E5(e,t){do{var n=C4(e.alternate,e);if(n!==null){n.flags&=32767,pn=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){pn=e;return}pn=e=n}while(e!==null);Or=6,pn=null}function Xg(e,t,n,i,o,l,f,m,p){e.cancelPendingCommit=null;do Lh();while(wi!==0);if(Hn&6)throw Error(it(327));if(t!==null){if(t===e.current)throw Error(it(177));if(l=t.lanes|t.childLanes,l|=E2,d3(e,n,l,f,m,p),e===sr&&(pn=sr=null,Sn=0),Zc=t,Yo=e,Bc=n,_1=l,I1=o,y5=i,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,P4(Ff,function(){return D5(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,t.subtreeFlags&13878||i){i=Xt.T,Xt.T=null,o=Ln.p,Ln.p=2,f=Hn,Hn|=4;try{E4(e,t,n)}finally{Hn=f,Ln.p=o,Xt.T=i}}wi=1,T5(),j5(),_5()}}function T5(){if(wi===1){wi=0;var e=Yo,t=Zc,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=Xt.T,Xt.T=null;var i=Ln.p;Ln.p=2;var o=Hn;Hn|=4;try{f5(t,e);var l=k1,f=Xx(e.containerInfo),m=l.focusedElem,p=l.selectionRange;if(f!==m&&m&&m.ownerDocument&&Yx(m.ownerDocument.documentElement,m)){if(p!==null&&C2(m)){var x=p.start,S=p.end;if(S===void 0&&(S=x),"selectionStart"in m)m.selectionStart=x,m.selectionEnd=Math.min(S,m.value.length);else{var N=m.ownerDocument||document,j=N&&N.defaultView||window;if(j.getSelection){var v=j.getSelection(),O=m.textContent.length,E=Math.min(p.start,O),P=p.end===void 0?E:Math.min(p.end,O);!v.extend&&E>P&&(f=P,P=E,E=f);var C=gg(m,E),_=gg(m,P);if(C&&_&&(v.rangeCount!==1||v.anchorNode!==C.node||v.anchorOffset!==C.offset||v.focusNode!==_.node||v.focusOffset!==_.offset)){var D=N.createRange();D.setStart(C.node,C.offset),v.removeAllRanges(),E>P?(v.addRange(D),v.extend(_.node,_.offset)):(D.setEnd(_.node,_.offset),v.addRange(D))}}}}for(N=[],v=m;v=v.parentNode;)v.nodeType===1&&N.push({element:v,left:v.scrollLeft,top:v.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<N.length;m++){var U=N[m];U.element.scrollLeft=U.left,U.element.scrollTop=U.top}}ch=!!R1,k1=R1=null}finally{Hn=o,Ln.p=i,Xt.T=n}}e.current=t,wi=2}}function j5(){if(wi===2){wi=0;var e=Yo,t=Zc,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=Xt.T,Xt.T=null;var i=Ln.p;Ln.p=2;var o=Hn;Hn|=4;try{l5(e,t.alternate,t)}finally{Hn=o,Ln.p=i,Xt.T=n}}wi=3}}function _5(){if(wi===4||wi===3){wi=0,n3();var e=Yo,t=Zc,n=Bc,i=y5;t.subtreeFlags&10256||t.flags&10256?wi=5:(wi=0,Zc=Yo=null,I5(e,e.pendingLanes));var o=e.pendingLanes;if(o===0&&(Wo=null),b2(n),t=t.stateNode,Ta&&typeof Ta.onCommitFiberRoot=="function")try{Ta.onCommitFiberRoot(bd,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=Xt.T,o=Ln.p,Ln.p=2,Xt.T=null;try{for(var l=e.onRecoverableError,f=0;f<i.length;f++){var m=i[f];l(m.value,{componentStack:m.stack})}}finally{Xt.T=t,Ln.p=o}}Bc&3&&Lh(),_s(e),o=e.pendingLanes,n&4194090&&o&42?e===D1?Vu++:(Vu=0,D1=e):Vu=0,Id(0)}}function I5(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Cd(t)))}function Lh(e){return T5(),j5(),_5(),D5()}function D5(){if(wi!==5)return!1;var e=Yo,t=_1;_1=0;var n=b2(Bc),i=Xt.T,o=Ln.p;try{Ln.p=32>n?32:n,Xt.T=null,n=I1,I1=null;var l=Yo,f=Bc;if(wi=0,Zc=Yo=null,Bc=0,Hn&6)throw Error(it(331));var m=Hn;if(Hn|=4,x5(l.current),m5(l,l.current,f,n),Hn=m,Id(0,!1),Ta&&typeof Ta.onPostCommitFiberRoot=="function")try{Ta.onPostCommitFiberRoot(bd,l)}catch{}return!0}finally{Ln.p=o,Xt.T=i,I5(e,t)}}function Zg(e,t,n){t=Wa(n,t),t=S1(e.stateNode,t,2),e=Go(e,t,2),e!==null&&(vd(e,2),_s(e))}function rr(e,t,n){if(e.tag===3)Zg(e,e,n);else for(;t!==null;){if(t.tag===3){Zg(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Wo===null||!Wo.has(i))){e=Wa(n,e),n=Xb(2),i=Go(t,n,2),i!==null&&(Zb(n,i,t,e),vd(i,2),_s(i));break}}t=t.return}}function L0(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new _4;var o=new Set;i.set(t,o)}else o=i.get(t),o===void 0&&(o=new Set,i.set(t,o));o.has(n)||(Q2=!0,o.add(n),e=M4.bind(null,e,t,n),t.then(e,e))}function M4(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,sr===e&&(Sn&n)===n&&(Or===4||Or===3&&(Sn&62914560)===Sn&&300>Ss()-J2?!(Hn&2)&&Qc(e,0):K2|=n,Xc===Sn&&(Xc=0)),_s(e)}function L5(e,t){t===0&&(t=Tx()),e=nu(e,t),e!==null&&(vd(e,t),_s(e))}function R4(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),L5(e,n)}function k4(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(it(314))}i!==null&&i.delete(t),L5(e,n)}function P4(e,t){return p2(e,t)}var nh=null,mc=null,O1=!1,rh=!1,O0=!1,Pl=0;function _s(e){e!==mc&&e.next===null&&(mc===null?nh=mc=e:mc=mc.next=e),rh=!0,O1||(O1=!0,B4())}function Id(e,t){if(!O0&&rh){O0=!0;do for(var n=!1,i=nh;i!==null;){if(e!==0){var o=i.pendingLanes;if(o===0)var l=0;else{var f=i.suspendedLanes,m=i.pingedLanes;l=(1<<31-ja(42|e)+1)-1,l&=o&~(f&~m),l=l&201326741?l&201326741|1:l?l|2:0}l!==0&&(n=!0,Qg(i,l))}else l=Sn,l=vh(i,i===sr?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(l&3)||yd(i,l)||(n=!0,Qg(i,l));i=i.next}while(n);O0=!1}}function F4(){O5()}function O5(){rh=O1=!1;var e=0;Pl!==0&&(Y4()&&(e=Pl),Pl=0);for(var t=Ss(),n=null,i=nh;i!==null;){var o=i.next,l=M5(i,t);l===0?(i.next=null,n===null?nh=o:n.next=o,o===null&&(mc=n)):(n=i,(e!==0||l&3)&&(rh=!0)),i=o}Id(e)}function M5(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,l=e.pendingLanes&-62914561;0<l;){var f=31-ja(l),m=1<<f,p=o[f];p===-1?(!(m&n)||m&i)&&(o[f]=u3(m,t)):p<=t&&(e.expiredLanes|=m),l&=~m}if(t=sr,n=Sn,n=vh(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,n===0||e===t&&(Un===2||Un===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&a0(i),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||yd(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&a0(i),b2(n)){case 2:case 8:n=Sx;break;case 32:n=Ff;break;case 268435456:n=Cx;break;default:n=Ff}return i=R5.bind(null,e),n=p2(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&a0(i),e.callbackPriority=2,e.callbackNode=null,2}function R5(e,t){if(wi!==0&&wi!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Lh()&&e.callbackNode!==n)return null;var i=Sn;return i=vh(e,e===sr?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(w5(e,i,t),M5(e,Ss()),e.callbackNode!=null&&e.callbackNode===n?R5.bind(null,e):null)}function Qg(e,t){if(Lh())return null;w5(e,t,!0)}function B4(){Z4(function(){Hn&6?p2(Ax,F4):O5()})}function em(){return Pl===0&&(Pl=Ex()),Pl}function Kg(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:wf(""+e)}function Jg(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function U4(e,t,n,i,o){if(t==="submit"&&n&&n.stateNode===o){var l=Kg((o[la]||null).action),f=i.submitter;f&&(t=(t=f[la]||null)?Kg(t.formAction):f.getAttribute("formAction"),t!==null&&(l=t,f=null));var m=new wh("action","action",null,i,o);e.push({event:m,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Pl!==0){var p=f?Jg(o,f):new FormData(o);N1(n,{pending:!0,data:p,method:o.method,action:l},null,p)}}else typeof l=="function"&&(m.preventDefault(),p=f?Jg(o,f):new FormData(o),N1(n,{pending:!0,data:p,method:o.method,action:l},l,p))},currentTarget:o}]})}}for(var M0=0;M0<u1.length;M0++){var R0=u1[M0],z4=R0.toLowerCase(),H4=R0[0].toUpperCase()+R0.slice(1);os(z4,"on"+H4)}os(Qx,"onAnimationEnd");os(Kx,"onAnimationIteration");os(Jx,"onAnimationStart");os("dblclick","onDoubleClick");os("focusin","onFocus");os("focusout","onBlur");os(a4,"onTransitionRun");os(s4,"onTransitionStart");os(o4,"onTransitionCancel");os($x,"onTransitionEnd");Hc("onMouseEnter",["mouseout","mouseover"]);Hc("onMouseLeave",["mouseout","mouseover"]);Hc("onPointerEnter",["pointerout","pointerover"]);Hc("onPointerLeave",["pointerout","pointerover"]);Xl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Xl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Xl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Xl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Xl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Xl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var id="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),V4=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(id));function k5(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],o=i.event;i=i.listeners;e:{var l=void 0;if(t)for(var f=i.length-1;0<=f;f--){var m=i[f],p=m.instance,x=m.currentTarget;if(m=m.listener,p!==l&&o.isPropagationStopped())break e;l=m,o.currentTarget=x;try{l(o)}catch(S){Qf(S)}o.currentTarget=null,l=p}else for(f=0;f<i.length;f++){if(m=i[f],p=m.instance,x=m.currentTarget,m=m.listener,p!==l&&o.isPropagationStopped())break e;l=m,o.currentTarget=x;try{l(o)}catch(S){Qf(S)}o.currentTarget=null,l=p}}}}function gn(e,t){var n=t[r1];n===void 0&&(n=t[r1]=new Set);var i=e+"__bubble";n.has(i)||(P5(t,e,2,!1),n.add(i))}function k0(e,t,n){var i=0;t&&(i|=4),P5(n,e,i,t)}var ff="_reactListening"+Math.random().toString(36).slice(2);function tm(e){if(!e[ff]){e[ff]=!0,Dx.forEach(function(n){n!=="selectionchange"&&(V4.has(n)||k0(n,!1,e),k0(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ff]||(t[ff]=!0,k0("selectionchange",!1,t))}}function P5(e,t,n,i){switch(Z5(t)){case 2:var o=pw;break;case 8:o=xw;break;default:o=am}n=o.bind(null,t,n,e),o=void 0,!o1||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),i?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function P0(e,t,n,i,o){var l=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var f=i.tag;if(f===3||f===4){var m=i.stateNode.containerInfo;if(m===o)break;if(f===4)for(f=i.return;f!==null;){var p=f.tag;if((p===3||p===4)&&f.stateNode.containerInfo===o)return;f=f.return}for(;m!==null;){if(f=vc(m),f===null)return;if(p=f.tag,p===5||p===6||p===26||p===27){i=l=f;continue e}m=m.parentNode}}i=i.return}Bx(function(){var x=l,S=w2(n),N=[];e:{var j=eb.get(e);if(j!==void 0){var v=wh,O=e;switch(e){case"keypress":if(Af(n)===0)break e;case"keydown":case"keyup":v=P3;break;case"focusin":O="focus",v=h0;break;case"focusout":O="blur",v=h0;break;case"beforeblur":case"afterblur":v=h0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=ag;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=C3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=U3;break;case Qx:case Kx:case Jx:v=j3;break;case $x:v=H3;break;case"scroll":case"scrollend":v=A3;break;case"wheel":v=q3;break;case"copy":case"cut":case"paste":v=I3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=og;break;case"toggle":case"beforetoggle":v=W3}var E=(t&4)!==0,P=!E&&(e==="scroll"||e==="scrollend"),C=E?j!==null?j+"Capture":null:j;E=[];for(var _=x,D;_!==null;){var U=_;if(D=U.stateNode,U=U.tag,U!==5&&U!==26&&U!==27||D===null||C===null||(U=Ju(_,C),U!=null&&E.push(ad(_,U,D))),P)break;_=_.return}0<E.length&&(j=new v(j,O,null,n,S),N.push({event:j,listeners:E}))}}if(!(t&7)){e:{if(j=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",j&&n!==s1&&(O=n.relatedTarget||n.fromElement)&&(vc(O)||O[eu]))break e;if((v||j)&&(j=S.window===S?S:(j=S.ownerDocument)?j.defaultView||j.parentWindow:window,v?(O=n.relatedTarget||n.toElement,v=x,O=O?vc(O):null,O!==null&&(P=xd(O),E=O.tag,O!==P||E!==5&&E!==27&&E!==6)&&(O=null)):(v=null,O=x),v!==O)){if(E=ag,U="onMouseLeave",C="onMouseEnter",_="mouse",(e==="pointerout"||e==="pointerover")&&(E=og,U="onPointerLeave",C="onPointerEnter",_="pointer"),P=v==null?j:ju(v),D=O==null?j:ju(O),j=new E(U,_+"leave",v,n,S),j.target=P,j.relatedTarget=D,U=null,vc(S)===x&&(E=new E(C,_+"enter",O,n,S),E.target=D,E.relatedTarget=P,U=E),P=U,v&&O)t:{for(E=v,C=O,_=0,D=E;D;D=lc(D))_++;for(D=0,U=C;U;U=lc(U))D++;for(;0<_-D;)E=lc(E),_--;for(;0<D-_;)C=lc(C),D--;for(;_--;){if(E===C||C!==null&&E===C.alternate)break t;E=lc(E),C=lc(C)}E=null}else E=null;v!==null&&$g(N,j,v,E,!1),O!==null&&P!==null&&$g(N,P,O,E,!0)}}e:{if(j=x?ju(x):window,v=j.nodeName&&j.nodeName.toLowerCase(),v==="select"||v==="input"&&j.type==="file")var Y=dg;else if(ug(j))if(Gx)Y=n4;else{Y=e4;var ae=$3}else v=j.nodeName,!v||v.toLowerCase()!=="input"||j.type!=="checkbox"&&j.type!=="radio"?x&&v2(x.elementType)&&(Y=dg):Y=t4;if(Y&&(Y=Y(e,x))){qx(N,Y,n,S);break e}ae&&ae(e,j,x),e==="focusout"&&x&&j.type==="number"&&x.memoizedProps.value!=null&&a1(j,"number",j.value)}switch(ae=x?ju(x):window,e){case"focusin":(ug(ae)||ae.contentEditable==="true")&&(Ac=ae,l1=x,Ou=null);break;case"focusout":Ou=l1=Ac=null;break;case"mousedown":c1=!0;break;case"contextmenu":case"mouseup":case"dragend":c1=!1,pg(N,n,S);break;case"selectionchange":if(i4)break;case"keydown":case"keyup":pg(N,n,S)}var F;if(S2)e:{switch(e){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else Nc?Hx(e,n)&&(L="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(L="onCompositionStart");L&&(zx&&n.locale!=="ko"&&(Nc||L!=="onCompositionStart"?L==="onCompositionEnd"&&Nc&&(F=Ux()):(Bo=S,N2="value"in Bo?Bo.value:Bo.textContent,Nc=!0)),ae=ih(x,L),0<ae.length&&(L=new sg(L,e,null,n,S),N.push({event:L,listeners:ae}),F?L.data=F:(F=Vx(n),F!==null&&(L.data=F)))),(F=X3?Z3(e,n):Q3(e,n))&&(L=ih(x,"onBeforeInput"),0<L.length&&(ae=new sg("onBeforeInput","beforeinput",null,n,S),N.push({event:ae,listeners:L}),ae.data=F)),U4(N,e,x,n,S)}k5(N,t)})}function ad(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ih(e,t){for(var n=t+"Capture",i=[];e!==null;){var o=e,l=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||l===null||(o=Ju(e,n),o!=null&&i.unshift(ad(e,o,l)),o=Ju(e,t),o!=null&&i.push(ad(e,o,l))),e.tag===3)return i;e=e.return}return[]}function lc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function $g(e,t,n,i,o){for(var l=t._reactName,f=[];n!==null&&n!==i;){var m=n,p=m.alternate,x=m.stateNode;if(m=m.tag,p!==null&&p===i)break;m!==5&&m!==26&&m!==27||x===null||(p=x,o?(x=Ju(n,l),x!=null&&f.unshift(ad(n,x,p))):o||(x=Ju(n,l),x!=null&&f.push(ad(n,x,p)))),n=n.return}f.length!==0&&e.push({event:t,listeners:f})}var q4=/\r\n?/g,G4=/\u0000|\uFFFD/g;function ep(e){return(typeof e=="string"?e:""+e).replace(q4,`
`).replace(G4,"")}function F5(e,t){return t=ep(t),ep(e)===t}function Oh(){}function Xn(e,t,n,i,o,l){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||Vc(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&Vc(e,""+i);break;case"className":af(e,"class",i);break;case"tabIndex":af(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":af(e,n,i);break;case"style":Fx(e,i,l);break;case"data":if(t!=="object"){af(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=wf(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof l=="function"&&(n==="formAction"?(t!=="input"&&Xn(e,t,"name",o.name,o,null),Xn(e,t,"formEncType",o.formEncType,o,null),Xn(e,t,"formMethod",o.formMethod,o,null),Xn(e,t,"formTarget",o.formTarget,o,null)):(Xn(e,t,"encType",o.encType,o,null),Xn(e,t,"method",o.method,o,null),Xn(e,t,"target",o.target,o,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=wf(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=Oh);break;case"onScroll":i!=null&&gn("scroll",e);break;case"onScrollEnd":i!=null&&gn("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(it(61));if(n=i.__html,n!=null){if(o.children!=null)throw Error(it(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=wf(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":gn("beforetoggle",e),gn("toggle",e),vf(e,"popover",i);break;case"xlinkActuate":Us(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":Us(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":Us(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":Us(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":Us(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":Us(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":Us(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":Us(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":Us(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":vf(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=w3.get(n)||n,vf(e,n,i))}}function M1(e,t,n,i,o,l){switch(n){case"style":Fx(e,i,l);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(it(61));if(n=i.__html,n!=null){if(o.children!=null)throw Error(it(60));e.innerHTML=n}}break;case"children":typeof i=="string"?Vc(e,i):(typeof i=="number"||typeof i=="bigint")&&Vc(e,""+i);break;case"onScroll":i!=null&&gn("scroll",e);break;case"onScrollEnd":i!=null&&gn("scrollend",e);break;case"onClick":i!=null&&(e.onclick=Oh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Lx.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(o=n.endsWith("Capture"),t=n.slice(2,o?n.length-7:void 0),l=e[la]||null,l=l!=null?l[n]:null,typeof l=="function"&&e.removeEventListener(t,l,o),typeof i=="function")){typeof l!="function"&&l!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,o);break e}n in e?e[n]=i:i===!0?e.setAttribute(n,""):vf(e,n,i)}}}function Ni(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":gn("error",e),gn("load",e);var i=!1,o=!1,l;for(l in n)if(n.hasOwnProperty(l)){var f=n[l];if(f!=null)switch(l){case"src":i=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(it(137,t));default:Xn(e,t,l,f,n,null)}}o&&Xn(e,t,"srcSet",n.srcSet,n,null),i&&Xn(e,t,"src",n.src,n,null);return;case"input":gn("invalid",e);var m=l=f=o=null,p=null,x=null;for(i in n)if(n.hasOwnProperty(i)){var S=n[i];if(S!=null)switch(i){case"name":o=S;break;case"type":f=S;break;case"checked":p=S;break;case"defaultChecked":x=S;break;case"value":l=S;break;case"defaultValue":m=S;break;case"children":case"dangerouslySetInnerHTML":if(S!=null)throw Error(it(137,t));break;default:Xn(e,t,i,S,n,null)}}Rx(e,l,m,p,x,f,o,!1),Bf(e);return;case"select":gn("invalid",e),i=f=l=null;for(o in n)if(n.hasOwnProperty(o)&&(m=n[o],m!=null))switch(o){case"value":l=m;break;case"defaultValue":f=m;break;case"multiple":i=m;default:Xn(e,t,o,m,n,null)}t=l,n=f,e.multiple=!!i,t!=null?Oc(e,!!i,t,!1):n!=null&&Oc(e,!!i,n,!0);return;case"textarea":gn("invalid",e),l=o=i=null;for(f in n)if(n.hasOwnProperty(f)&&(m=n[f],m!=null))switch(f){case"value":i=m;break;case"defaultValue":o=m;break;case"children":l=m;break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(it(91));break;default:Xn(e,t,f,m,n,null)}Px(e,i,o,l),Bf(e);return;case"option":for(p in n)if(n.hasOwnProperty(p)&&(i=n[p],i!=null))switch(p){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:Xn(e,t,p,i,n,null)}return;case"dialog":gn("beforetoggle",e),gn("toggle",e),gn("cancel",e),gn("close",e);break;case"iframe":case"object":gn("load",e);break;case"video":case"audio":for(i=0;i<id.length;i++)gn(id[i],e);break;case"image":gn("error",e),gn("load",e);break;case"details":gn("toggle",e);break;case"embed":case"source":case"link":gn("error",e),gn("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(x in n)if(n.hasOwnProperty(x)&&(i=n[x],i!=null))switch(x){case"children":case"dangerouslySetInnerHTML":throw Error(it(137,t));default:Xn(e,t,x,i,n,null)}return;default:if(v2(t)){for(S in n)n.hasOwnProperty(S)&&(i=n[S],i!==void 0&&M1(e,t,S,i,n,void 0));return}}for(m in n)n.hasOwnProperty(m)&&(i=n[m],i!=null&&Xn(e,t,m,i,n,null))}function W4(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,l=null,f=null,m=null,p=null,x=null,S=null;for(v in n){var N=n[v];if(n.hasOwnProperty(v)&&N!=null)switch(v){case"checked":break;case"value":break;case"defaultValue":p=N;default:i.hasOwnProperty(v)||Xn(e,t,v,null,i,N)}}for(var j in i){var v=i[j];if(N=n[j],i.hasOwnProperty(j)&&(v!=null||N!=null))switch(j){case"type":l=v;break;case"name":o=v;break;case"checked":x=v;break;case"defaultChecked":S=v;break;case"value":f=v;break;case"defaultValue":m=v;break;case"children":case"dangerouslySetInnerHTML":if(v!=null)throw Error(it(137,t));break;default:v!==N&&Xn(e,t,j,v,i,N)}}i1(e,f,m,p,x,S,l,o);return;case"select":v=f=m=j=null;for(l in n)if(p=n[l],n.hasOwnProperty(l)&&p!=null)switch(l){case"value":break;case"multiple":v=p;default:i.hasOwnProperty(l)||Xn(e,t,l,null,i,p)}for(o in i)if(l=i[o],p=n[o],i.hasOwnProperty(o)&&(l!=null||p!=null))switch(o){case"value":j=l;break;case"defaultValue":m=l;break;case"multiple":f=l;default:l!==p&&Xn(e,t,o,l,i,p)}t=m,n=f,i=v,j!=null?Oc(e,!!n,j,!1):!!i!=!!n&&(t!=null?Oc(e,!!n,t,!0):Oc(e,!!n,n?[]:"",!1));return;case"textarea":v=j=null;for(m in n)if(o=n[m],n.hasOwnProperty(m)&&o!=null&&!i.hasOwnProperty(m))switch(m){case"value":break;case"children":break;default:Xn(e,t,m,null,i,o)}for(f in i)if(o=i[f],l=n[f],i.hasOwnProperty(f)&&(o!=null||l!=null))switch(f){case"value":j=o;break;case"defaultValue":v=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(it(91));break;default:o!==l&&Xn(e,t,f,o,i,l)}kx(e,j,v);return;case"option":for(var O in n)if(j=n[O],n.hasOwnProperty(O)&&j!=null&&!i.hasOwnProperty(O))switch(O){case"selected":e.selected=!1;break;default:Xn(e,t,O,null,i,j)}for(p in i)if(j=i[p],v=n[p],i.hasOwnProperty(p)&&j!==v&&(j!=null||v!=null))switch(p){case"selected":e.selected=j&&typeof j!="function"&&typeof j!="symbol";break;default:Xn(e,t,p,j,i,v)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var E in n)j=n[E],n.hasOwnProperty(E)&&j!=null&&!i.hasOwnProperty(E)&&Xn(e,t,E,null,i,j);for(x in i)if(j=i[x],v=n[x],i.hasOwnProperty(x)&&j!==v&&(j!=null||v!=null))switch(x){case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(it(137,t));break;default:Xn(e,t,x,j,i,v)}return;default:if(v2(t)){for(var P in n)j=n[P],n.hasOwnProperty(P)&&j!==void 0&&!i.hasOwnProperty(P)&&M1(e,t,P,void 0,i,j);for(S in i)j=i[S],v=n[S],!i.hasOwnProperty(S)||j===v||j===void 0&&v===void 0||M1(e,t,S,j,i,v);return}}for(var C in n)j=n[C],n.hasOwnProperty(C)&&j!=null&&!i.hasOwnProperty(C)&&Xn(e,t,C,null,i,j);for(N in i)j=i[N],v=n[N],!i.hasOwnProperty(N)||j===v||j==null&&v==null||Xn(e,t,N,j,i,v)}var R1=null,k1=null;function ah(e){return e.nodeType===9?e:e.ownerDocument}function tp(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function B5(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function P1(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var F0=null;function Y4(){var e=window.event;return e&&e.type==="popstate"?e===F0?!1:(F0=e,!0):(F0=null,!1)}var U5=typeof setTimeout=="function"?setTimeout:void 0,X4=typeof clearTimeout=="function"?clearTimeout:void 0,np=typeof Promise=="function"?Promise:void 0,Z4=typeof queueMicrotask=="function"?queueMicrotask:typeof np<"u"?function(e){return np.resolve(null).then(e).catch(Q4)}:U5;function Q4(e){setTimeout(function(){throw e})}function sl(e){return e==="head"}function rp(e,t){var n=t,i=0,o=0;do{var l=n.nextSibling;if(e.removeChild(n),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(0<i&&8>i){n=i;var f=e.ownerDocument;if(n&1&&qu(f.documentElement),n&2&&qu(f.body),n&4)for(n=f.head,qu(n),f=n.firstChild;f;){var m=f.nextSibling,p=f.nodeName;f[wd]||p==="SCRIPT"||p==="STYLE"||p==="LINK"&&f.rel.toLowerCase()==="stylesheet"||n.removeChild(f),f=m}}if(o===0){e.removeChild(l),ud(t);return}o--}else n==="$"||n==="$?"||n==="$!"?o++:i=n.charCodeAt(0)-48;else i=0;n=l}while(n);ud(t)}function F1(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":F1(n),y2(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function K4(e,t,n,i){for(;e.nodeType===1;){var o=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[wd])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(l=e.getAttribute("rel"),l==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(l!==o.rel||e.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||e.getAttribute("title")!==(o.title==null?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(l=e.getAttribute("src"),(l!==(o.src==null?null:o.src)||e.getAttribute("type")!==(o.type==null?null:o.type)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&l&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var l=o.name==null?null:""+o.name;if(o.type==="hidden"&&e.getAttribute("name")===l)return e}else return e;if(e=ss(e.nextSibling),e===null)break}return null}function J4(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=ss(e.nextSibling),e===null))return null;return e}function B1(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function $4(e,t){var n=e.ownerDocument;if(e.data!=="$?"||n.readyState==="complete")t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function ss(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var U1=null;function ip(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function z5(e,t,n){switch(t=ah(n),e){case"html":if(e=t.documentElement,!e)throw Error(it(452));return e;case"head":if(e=t.head,!e)throw Error(it(453));return e;case"body":if(e=t.body,!e)throw Error(it(454));return e;default:throw Error(it(451))}}function qu(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);y2(e)}var Za=new Map,ap=new Set;function sh(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var io=Ln.d;Ln.d={f:ew,r:tw,D:nw,C:rw,L:iw,m:aw,X:ow,S:sw,M:lw};function ew(){var e=io.f(),t=Ih();return e||t}function tw(e){var t=tu(e);t!==null&&t.tag===5&&t.type==="form"?Mb(t):io.r(e)}var iu=typeof document>"u"?null:document;function H5(e,t,n){var i=iu;if(i&&typeof t=="string"&&t){var o=Ga(t);o='link[rel="'+e+'"][href="'+o+'"]',typeof n=="string"&&(o+='[crossorigin="'+n+'"]'),ap.has(o)||(ap.add(o),e={rel:e,crossOrigin:n,href:t},i.querySelector(o)===null&&(t=i.createElement("link"),Ni(t,"link",e),hi(t),i.head.appendChild(t)))}}function nw(e){io.D(e),H5("dns-prefetch",e,null)}function rw(e,t){io.C(e,t),H5("preconnect",e,t)}function iw(e,t,n){io.L(e,t,n);var i=iu;if(i&&e&&t){var o='link[rel="preload"][as="'+Ga(t)+'"]';t==="image"&&n&&n.imageSrcSet?(o+='[imagesrcset="'+Ga(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(o+='[imagesizes="'+Ga(n.imageSizes)+'"]')):o+='[href="'+Ga(e)+'"]';var l=o;switch(t){case"style":l=Kc(e);break;case"script":l=au(e)}Za.has(l)||(e=hr({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),Za.set(l,e),i.querySelector(o)!==null||t==="style"&&i.querySelector(Dd(l))||t==="script"&&i.querySelector(Ld(l))||(t=i.createElement("link"),Ni(t,"link",e),hi(t),i.head.appendChild(t)))}}function aw(e,t){io.m(e,t);var n=iu;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",o='link[rel="modulepreload"][as="'+Ga(i)+'"][href="'+Ga(e)+'"]',l=o;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":l=au(e)}if(!Za.has(l)&&(e=hr({rel:"modulepreload",href:e},t),Za.set(l,e),n.querySelector(o)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Ld(l)))return}i=n.createElement("link"),Ni(i,"link",e),hi(i),n.head.appendChild(i)}}}function sw(e,t,n){io.S(e,t,n);var i=iu;if(i&&e){var o=Lc(i).hoistableStyles,l=Kc(e);t=t||"default";var f=o.get(l);if(!f){var m={loading:0,preload:null};if(f=i.querySelector(Dd(l)))m.loading=5;else{e=hr({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Za.get(l))&&nm(e,n);var p=f=i.createElement("link");hi(p),Ni(p,"link",e),p._p=new Promise(function(x,S){p.onload=x,p.onerror=S}),p.addEventListener("load",function(){m.loading|=1}),p.addEventListener("error",function(){m.loading|=2}),m.loading|=4,If(f,t,i)}f={type:"stylesheet",instance:f,count:1,state:m},o.set(l,f)}}}function ow(e,t){io.X(e,t);var n=iu;if(n&&e){var i=Lc(n).hoistableScripts,o=au(e),l=i.get(o);l||(l=n.querySelector(Ld(o)),l||(e=hr({src:e,async:!0},t),(t=Za.get(o))&&rm(e,t),l=n.createElement("script"),hi(l),Ni(l,"link",e),n.head.appendChild(l)),l={type:"script",instance:l,count:1,state:null},i.set(o,l))}}function lw(e,t){io.M(e,t);var n=iu;if(n&&e){var i=Lc(n).hoistableScripts,o=au(e),l=i.get(o);l||(l=n.querySelector(Ld(o)),l||(e=hr({src:e,async:!0,type:"module"},t),(t=Za.get(o))&&rm(e,t),l=n.createElement("script"),hi(l),Ni(l,"link",e),n.head.appendChild(l)),l={type:"script",instance:l,count:1,state:null},i.set(o,l))}}function sp(e,t,n,i){var o=(o=Vo.current)?sh(o):null;if(!o)throw Error(it(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Kc(n.href),n=Lc(o).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Kc(n.href);var l=Lc(o).hoistableStyles,f=l.get(e);if(f||(o=o.ownerDocument||o,f={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},l.set(e,f),(l=o.querySelector(Dd(e)))&&!l._p&&(f.instance=l,f.state.loading=5),Za.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Za.set(e,n),l||cw(o,e,n,f.state))),t&&i===null)throw Error(it(528,""));return f}if(t&&i!==null)throw Error(it(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=au(n),n=Lc(o).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(it(444,e))}}function Kc(e){return'href="'+Ga(e)+'"'}function Dd(e){return'link[rel="stylesheet"]['+e+"]"}function V5(e){return hr({},e,{"data-precedence":e.precedence,precedence:null})}function cw(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),Ni(t,"link",n),hi(t),e.head.appendChild(t))}function au(e){return'[src="'+Ga(e)+'"]'}function Ld(e){return"script[async]"+e}function op(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+Ga(n.href)+'"]');if(i)return t.instance=i,hi(i),i;var o=hr({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),hi(i),Ni(i,"style",o),If(i,n.precedence,e),t.instance=i;case"stylesheet":o=Kc(n.href);var l=e.querySelector(Dd(o));if(l)return t.state.loading|=4,t.instance=l,hi(l),l;i=V5(n),(o=Za.get(o))&&nm(i,o),l=(e.ownerDocument||e).createElement("link"),hi(l);var f=l;return f._p=new Promise(function(m,p){f.onload=m,f.onerror=p}),Ni(l,"link",i),t.state.loading|=4,If(l,n.precedence,e),t.instance=l;case"script":return l=au(n.src),(o=e.querySelector(Ld(l)))?(t.instance=o,hi(o),o):(i=n,(o=Za.get(l))&&(i=hr({},n),rm(i,o)),e=e.ownerDocument||e,o=e.createElement("script"),hi(o),Ni(o,"link",i),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(it(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(i=t.instance,t.state.loading|=4,If(i,n.precedence,e));return t.instance}function If(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=i.length?i[i.length-1]:null,l=o,f=0;f<i.length;f++){var m=i[f];if(m.dataset.precedence===t)l=m;else if(l!==o)break}l?l.parentNode.insertBefore(e,l.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function nm(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function rm(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Df=null;function lp(e,t,n){if(Df===null){var i=new Map,o=Df=new Map;o.set(n,i)}else o=Df,i=o.get(n),i||(i=new Map,o.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),o=0;o<n.length;o++){var l=n[o];if(!(l[wd]||l[ki]||e==="link"&&l.getAttribute("rel")==="stylesheet")&&l.namespaceURI!=="http://www.w3.org/2000/svg"){var f=l.getAttribute(t)||"";f=e+f;var m=i.get(f);m?m.push(l):i.set(f,[l])}}return i}function cp(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function uw(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function q5(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var sd=null;function dw(){}function fw(e,t,n){if(sd===null)throw Error(it(475));var i=sd;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var o=Kc(n.href),l=e.querySelector(Dd(o));if(l){e=l._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(i.count++,i=oh.bind(i),e.then(i,i)),t.state.loading|=4,t.instance=l,hi(l);return}l=e.ownerDocument||e,n=V5(n),(o=Za.get(o))&&nm(n,o),l=l.createElement("link"),hi(l);var f=l;f._p=new Promise(function(m,p){f.onload=m,f.onerror=p}),Ni(l,"link",n),t.instance=l}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(i.count++,t=oh.bind(i),e.addEventListener("load",t),e.addEventListener("error",t))}}function hw(){if(sd===null)throw Error(it(475));var e=sd;return e.stylesheets&&e.count===0&&z1(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&z1(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function oh(){if(this.count--,this.count===0){if(this.stylesheets)z1(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var lh=null;function z1(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,lh=new Map,t.forEach(mw,e),lh=null,oh.call(e))}function mw(e,t){if(!(t.state.loading&4)){var n=lh.get(e);if(n)var i=n.get(null);else{n=new Map,lh.set(e,n);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),l=0;l<o.length;l++){var f=o[l];(f.nodeName==="LINK"||f.getAttribute("media")!=="not all")&&(n.set(f.dataset.precedence,f),i=f)}i&&n.set(null,i)}o=t.instance,f=o.getAttribute("data-precedence"),l=n.get(f)||i,l===i&&n.set(null,o),n.set(f,o),this.count++,i=oh.bind(this),o.addEventListener("load",i),o.addEventListener("error",i),l?l.parentNode.insertBefore(o,l.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(o,e.firstChild)),t.state.loading|=4}}var od={$$typeof:Ws,Provider:null,Consumer:null,_currentValue:Dl,_currentValue2:Dl,_threadCount:0};function gw(e,t,n,i,o,l,f,m){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=s0(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=s0(0),this.hiddenUpdates=s0(null),this.identifierPrefix=i,this.onUncaughtError=o,this.onCaughtError=l,this.onRecoverableError=f,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=m,this.incompleteTransitions=new Map}function G5(e,t,n,i,o,l,f,m,p,x,S,N){return e=new gw(e,t,n,f,m,p,x,N),t=1,l===!0&&(t|=24),l=Sa(3,null,null,t),e.current=l,l.stateNode=e,t=D2(),t.refCount++,e.pooledCache=t,t.refCount++,l.memoizedState={element:i,isDehydrated:n,cache:t},O2(l),e}function W5(e){return e?(e=Ec,e):Ec}function Y5(e,t,n,i,o,l){o=W5(o),i.context===null?i.context=o:i.pendingContext=o,i=qo(t),i.payload={element:n},l=l===void 0?null:l,l!==null&&(i.callback=l),n=Go(e,i,t),n!==null&&(Ia(n,e,t),ku(n,e,t))}function up(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function im(e,t){up(e,t),(e=e.alternate)&&up(e,t)}function X5(e){if(e.tag===13){var t=nu(e,67108864);t!==null&&Ia(t,e,67108864),im(e,67108864)}}var ch=!0;function pw(e,t,n,i){var o=Xt.T;Xt.T=null;var l=Ln.p;try{Ln.p=2,am(e,t,n,i)}finally{Ln.p=l,Xt.T=o}}function xw(e,t,n,i){var o=Xt.T;Xt.T=null;var l=Ln.p;try{Ln.p=8,am(e,t,n,i)}finally{Ln.p=l,Xt.T=o}}function am(e,t,n,i){if(ch){var o=H1(i);if(o===null)P0(e,t,i,uh,n),dp(e,i);else if(yw(o,e,t,n,i))i.stopPropagation();else if(dp(e,i),t&4&&-1<bw.indexOf(e)){for(;o!==null;){var l=tu(o);if(l!==null)switch(l.tag){case 3:if(l=l.stateNode,l.current.memoizedState.isDehydrated){var f=Cl(l.pendingLanes);if(f!==0){var m=l;for(m.pendingLanes|=2,m.entangledLanes|=2;f;){var p=1<<31-ja(f);m.entanglements[1]|=p,f&=~p}_s(l),!(Hn&6)&&(eh=Ss()+500,Id(0))}}break;case 13:m=nu(l,2),m!==null&&Ia(m,l,2),Ih(),im(l,2)}if(l=H1(i),l===null&&P0(e,t,i,uh,n),l===o)break;o=l}o!==null&&i.stopPropagation()}else P0(e,t,i,null,n)}}function H1(e){return e=w2(e),sm(e)}var uh=null;function sm(e){if(uh=null,e=vc(e),e!==null){var t=xd(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=yx(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return uh=e,null}function Z5(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(r3()){case Ax:return 2;case Sx:return 8;case Ff:case i3:return 32;case Cx:return 268435456;default:return 32}default:return 32}}var V1=!1,Xo=null,Zo=null,Qo=null,ld=new Map,cd=new Map,Ro=[],bw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function dp(e,t){switch(e){case"focusin":case"focusout":Xo=null;break;case"dragenter":case"dragleave":Zo=null;break;case"mouseover":case"mouseout":Qo=null;break;case"pointerover":case"pointerout":ld.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":cd.delete(t.pointerId)}}function Au(e,t,n,i,o,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:l,targetContainers:[o]},t!==null&&(t=tu(t),t!==null&&X5(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function yw(e,t,n,i,o){switch(t){case"focusin":return Xo=Au(Xo,e,t,n,i,o),!0;case"dragenter":return Zo=Au(Zo,e,t,n,i,o),!0;case"mouseover":return Qo=Au(Qo,e,t,n,i,o),!0;case"pointerover":var l=o.pointerId;return ld.set(l,Au(ld.get(l)||null,e,t,n,i,o)),!0;case"gotpointercapture":return l=o.pointerId,cd.set(l,Au(cd.get(l)||null,e,t,n,i,o)),!0}return!1}function Q5(e){var t=vc(e.target);if(t!==null){var n=xd(t);if(n!==null){if(t=n.tag,t===13){if(t=yx(n),t!==null){e.blockedOn=t,f3(e.priority,function(){if(n.tag===13){var i=_a();i=x2(i);var o=nu(n,i);o!==null&&Ia(o,n,i),im(n,i)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Lf(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=H1(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);s1=i,n.target.dispatchEvent(i),s1=null}else return t=tu(n),t!==null&&X5(t),e.blockedOn=n,!1;t.shift()}return!0}function fp(e,t,n){Lf(e)&&n.delete(t)}function vw(){V1=!1,Xo!==null&&Lf(Xo)&&(Xo=null),Zo!==null&&Lf(Zo)&&(Zo=null),Qo!==null&&Lf(Qo)&&(Qo=null),ld.forEach(fp),cd.forEach(fp)}function hf(e,t){e.blockedOn===t&&(e.blockedOn=null,V1||(V1=!0,li.unstable_scheduleCallback(li.unstable_NormalPriority,vw)))}var mf=null;function hp(e){mf!==e&&(mf=e,li.unstable_scheduleCallback(li.unstable_NormalPriority,function(){mf===e&&(mf=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],o=e[t+2];if(typeof i!="function"){if(sm(i||n)===null)continue;break}var l=tu(n);l!==null&&(e.splice(t,3),t-=3,N1(l,{pending:!0,data:o,method:n.method,action:i},i,o))}}))}function ud(e){function t(p){return hf(p,e)}Xo!==null&&hf(Xo,e),Zo!==null&&hf(Zo,e),Qo!==null&&hf(Qo,e),ld.forEach(t),cd.forEach(t);for(var n=0;n<Ro.length;n++){var i=Ro[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<Ro.length&&(n=Ro[0],n.blockedOn===null);)Q5(n),n.blockedOn===null&&Ro.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var o=n[i],l=n[i+1],f=o[la]||null;if(typeof l=="function")f||hp(n);else if(f){var m=null;if(l&&l.hasAttribute("formAction")){if(o=l,f=l[la]||null)m=f.formAction;else if(sm(o)!==null)continue}else m=f.action;typeof m=="function"?n[i+1]=m:(n.splice(i,3),i-=3),hp(n)}}}function om(e){this._internalRoot=e}Mh.prototype.render=om.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(it(409));var n=t.current,i=_a();Y5(n,i,e,t,null,null)};Mh.prototype.unmount=om.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Y5(e.current,2,null,e,null,null),Ih(),t[eu]=null}};function Mh(e){this._internalRoot=e}Mh.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ix();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ro.length&&t!==0&&t<Ro[n].priority;n++);Ro.splice(n,0,e),n===0&&Q5(e)}};var mp=xx.version;if(mp!=="19.1.1")throw Error(it(527,mp,"19.1.1"));Ln.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(it(188)):(e=Object.keys(e).join(","),Error(it(268,e)));return e=Qv(t),e=e!==null?vx(e):null,e=e===null?null:e.stateNode,e};var ww={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Xt,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gf.isDisabled&&gf.supportsFiber)try{bd=gf.inject(ww),Ta=gf}catch{}}bh.createRoot=function(e,t){if(!bx(e))throw Error(it(299));var n=!1,i="",o=Gb,l=Wb,f=Yb,m=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(l=t.onCaughtError),t.onRecoverableError!==void 0&&(f=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(m=t.unstable_transitionCallbacks)),t=G5(e,1,!1,null,null,n,i,o,l,f,m,null),e[eu]=t.current,tm(e),new om(t)};bh.hydrateRoot=function(e,t,n){if(!bx(e))throw Error(it(299));var i=!1,o="",l=Gb,f=Wb,m=Yb,p=null,x=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(l=n.onUncaughtError),n.onCaughtError!==void 0&&(f=n.onCaughtError),n.onRecoverableError!==void 0&&(m=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(p=n.unstable_transitionCallbacks),n.formState!==void 0&&(x=n.formState)),t=G5(e,1,!0,t,n??null,i,o,l,f,m,p,x),t.context=W5(null),n=t.current,i=_a(),i=x2(i),o=qo(i),o.callback=null,Go(n,o,i),n=i,t.current.lanes=n,vd(t,n),_s(t),e[eu]=t.current,tm(e),new Mh(t)};bh.version="19.1.1";function K5(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(K5)}catch(e){console.error(e)}}K5(),dx.exports=bh;var Nw=dx.exports;const Aw=ph(Nw);var Vt=(e=>(e.ADMIN="Administrator",e.SUPER_USER="Super User",e.CLIENT="Client",e.COURIER="Courier",e.ASSIGNING_USER="Assigning User",e))(Vt||{}),ht=(e=>(e.WAITING_FOR_PACKAGING="Waiting for Packaging",e.PACKAGED_AND_WAITING_FOR_ASSIGNMENT="Packaged and Waiting for Assignment",e.ASSIGNED_TO_COURIER="Assigned to Courier",e.OUT_FOR_DELIVERY="Out for Delivery",e.DELIVERED="Delivered",e.DELIVERY_FAILED="Delivery Failed",e))(ht||{}),Mn=(e=>(e.COD="COD",e.WALLET="Wallet",e.TRANSFER="Transfer",e))(Mn||{}),nn=(e=>(e.STANDARD="Standard",e.URGENT="Urgent",e.EXPRESS="Express",e))(nn||{}),J5=(e=>(e.FLAT="flat",e.PERCENTAGE="percentage",e))(J5||{}),Jc=(e=>(e.COMMISSION="Commission",e.PENALTY="Penalty",e.BONUS="Bonus",e.WITHDRAWAL_REQUEST="Withdrawal Request",e.WITHDRAWAL_PROCESSED="Withdrawal Processed",e.WITHDRAWAL_DECLINED="Withdrawal Declined",e.REFERRAL_BONUS="Referral Bonus",e))(Jc||{}),Fl=(e=>(e.PENDING="Pending",e.PROCESSED="Processed",e.FAILED="Failed",e))(Fl||{}),ko=(e=>(e.DEPOSIT="Deposit",e.PAYMENT="Payment",e.WITHDRAWAL_REQUEST="Withdrawal Request",e.WITHDRAWAL_PROCESSED="Withdrawal Processed",e))(ko||{}),jl=(e=>(e.EMAIL="Email",e.SMS="SMS",e.SYSTEM="System",e))(jl||{}),Of=(e=>(e.VEHICLE="Vehicle",e.DEVICE="Device",e.EQUIPMENT="Equipment",e.OTHER="Other",e))(Of||{}),dd=(e=>(e.AVAILABLE="Available",e.ASSIGNED="Assigned",e.IN_REPAIR="In Repair",e.RETIRED="Retired",e))(dd||{}),Gi=(e=>(e.BRONZE="Bronze",e.SILVER="Silver",e.GOLD="Gold",e))(Gi||{});const Ut={MANAGE_USERS:"manage_users",EDIT_USER_PROFILE:"edit_user_profile",MANAGE_ROLES:"manage_roles",CREATE_SHIPMENTS:"create_shipments",CREATE_SHIPMENTS_FOR_OTHERS:"create_shipments_for_others",VIEW_OWN_SHIPMENTS:"view_own_shipments",VIEW_ALL_SHIPMENTS:"view_all_shipments",ASSIGN_SHIPMENTS:"assign_shipments",VIEW_COURIER_TASKS:"view_courier_tasks",UPDATE_SHIPMENT_STATUS:"update_shipment_status",VIEW_OWN_WALLET:"view_own_wallet",VIEW_OWN_FINANCIALS:"view_own_financials",VIEW_ADMIN_FINANCIALS:"view_admin_financials",VIEW_CLIENT_ANALYTICS:"view_client_analytics",VIEW_COURIER_PERFORMANCE:"view_courier_performance",MANAGE_COURIER_PAYOUTS:"manage_courier_payouts",VIEW_COURIER_EARNINGS:"view_courier_earnings",VIEW_NOTIFICATIONS_LOG:"view_notifications_log",VIEW_DASHBOARD:"view_dashboard",VIEW_PROFILE:"view_profile",VIEW_TOTAL_SHIPMENTS_OVERVIEW:"view_total_shipments_overview",VIEW_COURIER_COMPLETED_ORDERS:"view_courier_completed_orders",MANAGE_INVENTORY:"manage_inventory",DELETE_INVENTORY_ITEM:"delete_inventory_item",MANAGE_ASSETS:"manage_assets",DELETE_ASSET:"delete_asset",VIEW_OWN_ASSETS:"view_own_assets",MANAGE_CLIENT_PAYOUTS:"manage_client_payouts",MANAGE_SUPPLIERS:"manage_suppliers",PRINT_LABELS:"print_labels",VIEW_DELIVERED_SHIPMENTS:"view_delivered_shipments",VIEW_COURIERS_BY_ZONE:"view_couriers_by_zone",MANAGE_PARTNER_TIERS:"manage_partner_tiers",EDIT_CLIENT_ADDRESS:"edit_client_address",VIEW_ADMIN_DELIVERY_MANAGEMENT:"view_admin_delivery_management"},Zr={GreaterCairo:{Cairo:["Nasr City","Heliopolis","New Cairo","5th Settlement","3rd Settlement","1st Settlement","Rehab City","Madinty","El Shorouk","El Obour","Maadi","Zahraa El Maadi","Katameya","Mokattam","Downtown Cairo","Garden City","Zamalek","Shubra","Abbassia","Ain Shams","El Marg","Matariya","Helwan","15th of May City","New Administrative Capital"],Giza:["Mohandessin","Dokki","Agouza","Haram","Faisal","Giza Square","Imbaba","Boulak El Dakrour","Warraq","6th of October City","Sheikh Zayed","Hadayek October","Mansoureya","Nazlet El Semman","Maryoteya","Bahariya Oasis Road"]},Alexandria:["Alexandria - Raml Station","Alexandria - Laurent","Alexandria - Smouha","Alexandria - Asafra"],Other:["Other - Shibin El Kom","Other - Port Said","Other - Mansoura (University)","Other - Mansoura (El Geish)","Other - Tanta","Other - Ismailia","Other - Zagazig","Other - Suez","Other - Mahalla","Other - Assiut","Other - Marina","Other - Hurghada"]},Sw="https://flash-express-app-production.up.railway.app",Kt=async(e,t={})=>{const n=`${Sw}${e}`;try{const i=await fetch(n,{...t,headers:{"Content-Type":"application/json",...t.headers}});if(!i.ok)try{const l=await i.json();throw new Error(l.error||`Server error: ${i.statusText}`)}catch{throw new Error(`Server error: ${i.status} ${i.statusText}`)}const o=i.headers.get("content-type");return o&&o.includes("application/json")?i.json():{success:!0}}catch(i){throw i}},Cw=(e,t)=>{try{const n=window.localStorage.getItem(e);return n==null?t:JSON.parse(n)}catch(n){return console.error(`Error reading from localStorage for key "${e}":`,n),t}},Ew=(e,t)=>{try{if(t===void 0)window.localStorage.removeItem(e);else{const n=JSON.stringify(t);window.localStorage.setItem(e,n)}}catch(n){console.error(`Error writing to localStorage for key "${e}":`,n)}},$5=pd.createContext(null),jn=()=>{const e=pd.useContext($5);if(!e)throw new Error("useAppContext must be used within an AppProvider");return e},Tw=({children:e})=>{const[t,n]=pe.useState(null),[i,o]=pe.useState([]),[l,f]=pe.useState([]),[m,p]=pe.useState([]),[x,S]=pe.useState([]),[N,j]=pe.useState({}),[v,O]=pe.useState([]),[E,P]=pe.useState([]),[C,_]=pe.useState([]),[D,U]=pe.useState([]),[Y,ae]=pe.useState([]),[F,L]=pe.useState([]),[M,z]=pe.useState([]),[k,R]=pe.useState([]),[re,ee]=pe.useState([]),[ne,K]=pe.useState([]),[G,te]=pe.useState(null),[W,fe]=pe.useState(()=>Cw("app-theme","dark")),[le,B]=pe.useState(!1),q=We=>{fe(We),Ew("app-theme",We)},Q=pe.useCallback((We,Je,bt)=>{const fn=Date.now(),Bi=bt||1e4;O(er=>[...er,{id:fn,message:We,type:Je,duration:Bi}])},[]),he=pe.useCallback(We=>{O(Je=>Je.filter(bt=>bt.id!==We))},[]),ue=pe.useCallback(()=>{n(null),o([]),f([]),p([]),S([]),_([]),U([]),P([]),ae([]),L([]),z([]),R([]),ee([]),K([]),Q("You have been logged out.","info")},[Q]),je=pe.useCallback(async(We,Je)=>{B(!0);try{console.log(" Starting login process...");const bt=await Kt("/api/roles");P(bt),console.log(" Attempting login...");const fn=await Kt("/api/login",{method:"POST",body:JSON.stringify({email:We,password:Je})});console.log(" Login API successful:",fn.name);const er=(Array.isArray(fn.roles)?fn.roles:[]).reduce((La,xi)=>{const Ui=bt.find($e=>$e.name===xi);return Ui!=null&&Ui.permissions?[...La,...Ui.permissions]:La},[]),qn=[...new Set(er)].sort(),wn={...fn,permissions:qn};return n(wn),Q(`Welcome back, ${fn.name}!`,"success"),console.log(" Login completed successfully with permissions"),!0}catch(bt){const fn=bt.message||"Login failed - please try again";return Q(fn,"error"),ue(),!1}finally{B(!1)}},[Q,ue]),Ae=pe.useCallback(We=>{var Je;return((Je=t==null?void 0:t.permissions)==null?void 0:Je.includes(We))??!1},[t]),ve=pe.useCallback(async We=>{t&&await Kt("/api/shipments",{method:"POST",body:JSON.stringify(We)})},[t]),Pe=pe.useCallback(async(We,Je,bt={})=>{try{return await Kt(`/api/shipments/${We}/status`,{method:"PUT",body:JSON.stringify({status:Je,...bt})}),Q(`Shipment ${We} updated to ${Je}`,"success"),!0}catch(fn){return Q(`Error: ${fn.message}`,"error"),!1}},[Q]),Te=pe.useCallback(async We=>{try{await Kt(`/api/shipments/${We}/status`,{method:"PUT",body:JSON.stringify({isRevert:!0})}),Q(`Shipment ${We} status has been reverted.`,"success")}catch(Je){Q(`Error reverting status: ${Je.message}`,"error"),console.error("Revert status failed:",Je)}},[Q]),Ye=pe.useCallback(async We=>{try{return await Kt(`/api/shipments/${We}/send-delivery-code`,{method:"POST"}),Q("Verification code sent to recipient!","success"),!0}catch(Je){return Q(`Failed to send code: ${Je.message}`,"error"),!1}},[Q]),He=pe.useCallback(async(We,Je)=>{try{return await Kt(`/api/shipments/${We}/verify-delivery`,{method:"POST",body:JSON.stringify({code:Je})}),Q("Delivery confirmed!","success"),!0}catch(bt){return Q(`Verification failed: ${bt.message}`,"error"),!1}},[Q]),ut=pe.useCallback(async(We,Je)=>{try{return await Kt(`/api/shipments/${We}/assign`,{method:"PUT",body:JSON.stringify({courierId:Je})}),Q(`Shipment ${We} assigned successfully`,"success"),!0}catch(bt){return Q(bt.message,"error"),!1}},[Q]),Me=pe.useCallback(async We=>{try{await Kt("/api/users",{method:"POST",body:JSON.stringify(We)}),Q(`User ${We.name} created successfully.`,"success")}catch(Je){Q(Je.message,"error")}},[Q]),me=pe.useCallback(async(We,Je,bt=!1)=>{try{await Kt(`/api/users/${We}`,{method:"PUT",body:JSON.stringify(Je)}),bt||Q("User updated successfully.","success")}catch(fn){Q(fn.message,"error")}},[Q]),st=pe.useCallback(async We=>{try{await Kt(`/api/users/${We}`,{method:"DELETE"}),Q("User deleted successfully.","success")}catch(Je){Q(Je.message,"error")}},[Q]),Fe=pe.useCallback(async(We,Je)=>{try{await Kt(`/api/users/${We}/password`,{method:"PUT",body:JSON.stringify({password:Je})}),Q("Password reset successfully.","success")}catch(bt){Q(bt.message,"error")}},[Q]),we=pe.useCallback(We=>{var Je;return We?((Je=i.find(bt=>bt.id===We))==null?void 0:Je.name)||"Unknown Courier":"Unassigned"},[i]),Xe=pe.useCallback(async(We,Je)=>{await ut(We,Je)},[ut]),Re=pe.useCallback(We=>{const Je=C.find(bt=>bt.courierId===We);return!(Je!=null&&Je.isRestricted)},[C]),Qe=pe.useCallback(()=>{const We=l.filter(dn=>dn.status===ht.DELIVERED),Je=l.filter(dn=>![ht.DELIVERED,ht.DELIVERY_FAILED].includes(dn.status)),bt=l.filter(dn=>[ht.OUT_FOR_DELIVERY].includes(dn.status)&&dn.paymentMethod===Mn.COD),fn=l.filter(dn=>dn.status===ht.DELIVERED&&dn.paymentMethod===Mn.COD),Bi=We.reduce((dn,Bt)=>dn+Bt.price,0),er=Je.reduce((dn,Bt)=>dn+Bt.price,0),qn=Je.filter(dn=>dn.paymentMethod===Mn.TRANSFER).reduce((dn,Bt)=>dn+(Bt.clientFlatRateFee||0),0),wn=l.filter(dn=>dn.status===ht.DELIVERED||dn.status===ht.DELIVERY_FAILED),La=Je.reduce((dn,Bt)=>dn+(Bt.clientFlatRateFee||0),0),xi=wn.reduce((dn,Bt)=>dn+(Bt.clientFlatRateFee||0),0),Ui=We.reduce((dn,Bt)=>dn+(Bt.courierCommission||0),0),$e=xi-Ui,so=bt.reduce((dn,Bt)=>dn+Bt.price,0),Gn=fn.reduce((dn,Bt)=>dn+Bt.price,0),Qi=C.reduce((dn,Bt)=>dn+(Bt.currentBalance||0),0);return{totalCollectedMoney:Bi,undeliveredPackagesValue:er,uncollectedTransferFees:qn,totalOwedToCouriers:Qi,totalRevenue:xi,totalFees:La,totalCommission:Ui,netRevenue:$e,cashToCollect:so,totalCODCollected:Gn,totalOrders:We.length}},[l,C]),gt=pe.useCallback(()=>i.filter(Je=>(Je.roles||[]).includes(Vt.CLIENT)).map(Je=>{const bt=l.filter(er=>er.clientId===Je.id),fn=bt.length,Bi=bt.reduce((er,qn)=>er+qn.price,0);return{clientId:Je.id,clientName:Je.name,totalOrders:fn,orderSum:Bi,flatRateFee:Je.flatRateFee||0,partnerTier:Je.partnerTier,manualTierAssignment:Je.manualTierAssignment}}),[i,l]),pt=async(We,Je)=>{await Kt(`/api/shipments/${We}/fees`,{method:"PUT",body:JSON.stringify(Je)})},qe=async(We,Je,bt)=>{await Kt(`/api/shipments/${We}/packaging`,{method:"PUT",body:JSON.stringify({packagingLog:Je,packagingNotes:bt})})},ct=async We=>{j(Je=>({...Je,[We]:"sending"}));try{await Kt(`/api/notifications/${We}/resend`,{method:"POST"}),j(Je=>({...Je,[We]:"sent"}))}catch{j(bt=>({...bt,[We]:"failed"}))}},St=async(We,Je)=>{await Kt(`/api/couriers/${We}/settings`,{method:"PUT",body:JSON.stringify(Je)})},Ot=async(We,Je,bt)=>{await Kt(`/api/couriers/${We}/penalty`,{method:"POST",body:JSON.stringify({amount:Je,description:bt})})},At=async(We,Je,bt)=>{await Kt(`/api/payouts/${We}/process`,{method:"PUT",body:JSON.stringify({transferEvidence:bt,processedAmount:Je})})},qt=async We=>{await Kt(`/api/payouts/${We}/decline`,{method:"PUT"})},mt=async(We,Je,bt)=>{await Kt("/api/couriers/payouts",{method:"POST",body:JSON.stringify({courierId:We,amount:Je,paymentMethod:bt})})},yn=async(We,Je)=>{await Kt(`/api/clients/${We}/payouts`,{method:"POST",body:JSON.stringify({amount:Je})})},Tt=async We=>{await Kt(`/api/client-transactions/${We}/process`,{method:"PUT"})},Ne=async(We,Je)=>{await Kt(`/api/clients/${We}/flatrate`,{method:"PUT",body:JSON.stringify({flatRateFee:Je})})},ft=async(We,Je)=>{await Kt(`/api/clients/${We}/taxcard`,{method:"PUT",body:JSON.stringify({taxCardNumber:Je})})},xt=async We=>{await Kt("/api/tier-settings",{method:"PUT",body:JSON.stringify({settings:We})})},Pt=async(We,Je)=>{await Kt(`/api/clients/${We}/tier`,{method:"PUT",body:JSON.stringify({tier:Je})})},Ft=We=>{var Je;return((Je=i.find(bt=>bt.id===We))==null?void 0:Je.taxCardNumber)||""},Ai=(We,Je)=>Je.commissionType===J5.FLAT?Je.commissionValue:We.price*(Je.commissionValue/100),Qn=(We,Je,bt)=>{const fn=bt.priorityMultipliers||{[nn.STANDARD]:1,[nn.URGENT]:1.5,[nn.EXPRESS]:2};return We*(fn[Je]||1)},Jt=async We=>{await Kt("/api/roles",{method:"POST",body:JSON.stringify(We)})},Kr=async(We,Je)=>{await Kt(`/api/roles/${We}`,{method:"PUT",body:JSON.stringify(Je)})},Kn=async We=>{await Kt(`/api/roles/${We}`,{method:"DELETE"})},Gt=pe.useCallback(async We=>{try{ee(Je=>Je.map(bt=>bt.id===We?{...bt,isRead:!0}:bt)),await Kt(`/api/notifications/${We}/read`,{method:"PUT"})}catch(Je){Q(`Failed to mark notification as read: ${Je.message}`,"error"),ee(bt=>bt.map(fn=>fn.id===We?{...fn,isRead:!1}:fn))}},[Q]),en=async()=>{try{const We=await Kt("/api/shipments/auto-assign",{method:"POST"});Q(We.message||"Auto-assignment completed.","success")}catch(We){Q(`Auto-assignment failed: ${We.message}`,"error")}},fa=pe.useCallback(async(We,Je,bt)=>{try{const fn=await Kt("/api/shipments/bulk-package",{method:"POST",body:JSON.stringify({shipmentIds:We,materialsSummary:Je,packagingNotes:bt})});Q(fn.message||"Shipments packaged successfully.","success")}catch(fn){Q(`Bulk packaging failed: ${fn.message}`,"error")}},[Q]),xn=pe.useCallback(async(We,Je)=>{try{const bt=await Kt("/api/shipments/bulk-assign",{method:"POST",body:JSON.stringify({shipmentIds:We,courierId:Je})});Q(bt.message||"Shipments assigned successfully.","success")}catch(bt){Q(`Bulk assignment failed: ${bt.message}`,"error")}},[Q]),Jr=pe.useCallback(async(We,Je)=>{try{const bt=await Kt("/api/shipments/bulk-status-update",{method:"POST",body:JSON.stringify({shipmentIds:We,status:Je})});Q(bt.message||"Shipments updated successfully.","success")}catch(bt){Q(`Bulk update failed: ${bt.message}`,"error")}},[Q]),qr={currentUser:t,users:i,shipments:l,clientTransactions:m,toasts:v,notifications:x,notificationStatus:N,courierStats:C,courierTransactions:D,customRoles:E,inventoryItems:Y,assets:F,suppliers:M,supplierTransactions:k,inAppNotifications:re,tierSettings:ne,isLoading:le,theme:W,setTheme:q,login:je,logout:ue,addShipment:ve,updateShipmentStatus:Pe,revertShipmentStatus:Te,updateShipmentFees:pt,updateShipmentPackaging:qe,assignShipmentToCourier:ut,reassignCourier:Xe,addUser:Me,updateUser:me,removeUser:st,resetPassword:Fe,addToast:Q,removeToast:he,resendNotification:ct,canCourierReceiveAssignment:Re,updateCourierSettings:St,applyManualPenalty:Ot,processCourierPayout:At,declineCourierPayout:qt,requestCourierPayout:mt,requestClientPayout:yn,processClientPayout:Tt,updateClientFlatRate:Ne,updateClientTaxCard:ft,updateTierSettings:xt,updateClientTier:Pt,getTaxCardNumber:Ft,getAdminFinancials:Qe,getClientFinancials:gt,hasPermission:Ae,calculateCommission:Ai,calculatePriorityPrice:Qn,getCourierName:we,addRole:Jt,updateRole:Kr,deleteRole:Kn,sendDeliveryVerificationCode:Ye,verifyDelivery:He,shipmentFilter:G,setShipmentFilter:te,markNotificationAsRead:Gt,autoAssignShipments:en,bulkPackageShipments:fa,bulkAssignShipments:xn,bulkUpdateShipmentStatus:Jr,addInventoryItem:async We=>{await Kt("/api/inventory",{method:"POST",body:JSON.stringify(We)})},updateInventoryItem:async(We,Je)=>{await Kt(`/api/inventory/${We}`,{method:"PUT",body:JSON.stringify(Je)})},deleteInventoryItem:async We=>{await Kt(`/api/inventory/${We}`,{method:"DELETE"})},addAsset:async We=>{await Kt("/api/assets",{method:"POST",body:JSON.stringify(We)})},updateAsset:async(We,Je)=>{await Kt(`/api/assets/${We}`,{method:"PUT",body:JSON.stringify(Je)})},deleteAsset:async We=>{await Kt(`/api/assets/${We}`,{method:"DELETE"})},assignAsset:async(We,Je)=>{Je?await Kt(`/api/assets/${We}/assign`,{method:"POST",body:JSON.stringify({userId:Je})}):await Kt(`/api/assets/${We}/unassign`,{method:"POST"})},addSupplier:async We=>{await Kt("/api/suppliers",{method:"POST",body:JSON.stringify(We)})},updateSupplier:async(We,Je)=>{await Kt(`/api/suppliers/${We}`,{method:"PUT",body:JSON.stringify(Je)})},deleteSupplier:async We=>{await Kt(`/api/suppliers/${We}`,{method:"DELETE"})},addSupplierTransaction:async We=>{await Kt("/api/supplier-transactions",{method:"POST",body:JSON.stringify(We)})},deleteSupplierTransaction:async We=>{await Kt(`/api/supplier-transactions/${We}`,{method:"DELETE"})}};return s.jsx($5.Provider,{value:qr,children:e})},ey=({className:e="w-10 h-10"})=>s.jsxs("svg",{viewBox:"0 0 200 165",className:e,xmlns:"http://www.w3.org/2000/svg",children:[s.jsxs("g",{transform:"translate(0, 5)",children:[s.jsx("path",{d:"M17,67 v-20 h20 l15-20 h50 v40 h20 v-15 h15 v20 h10 v-20 h-5",stroke:"#061A40",strokeWidth:"6",fill:"#061A40",strokeLinejoin:"round",strokeLinecap:"round"}),s.jsx("path",{d:"M37,47 v20",stroke:"#061A40",strokeWidth:"6",fill:"none",strokeLinejoin:"round",strokeLinecap:"round"}),s.jsx("path",{d:"M17,57 H7",stroke:"#061A40",strokeWidth:"6",fill:"none",strokeLinejoin:"round",strokeLinecap:"round"}),s.jsx("circle",{cx:"45",cy:"67",r:"12",stroke:"#061A40",strokeWidth:"6",fill:"#FFFFFF"}),s.jsx("circle",{cx:"125",cy:"67",r:"12",stroke:"#061A40",strokeWidth:"6",fill:"#FFFFFF"}),s.jsx("circle",{cx:"45",cy:"67",r:"5",fill:"#FFD000"}),s.jsx("circle",{cx:"125",cy:"67",r:"5",fill:"#FFD000"}),s.jsx("path",{d:"M87,25 L70,48 L85,48 L75,70 L92,45 L77,45 Z",fill:"#FFD000",stroke:"none"})]}),s.jsx("text",{x:"100",y:"115",fontFamily:"Arial, Helvetica, sans-serif",fontSize:"36",fontWeight:"bold",fill:"#061A40",textAnchor:"middle",children:"FLASH"}),s.jsx("text",{x:"100",y:"140",fontFamily:"Arial, Helvetica, sans-serif",fontSize:"16",fontWeight:"500",fill:"#FFD000",textAnchor:"middle",letterSpacing:"0.5",children:"EXPRESS SHIPPING"})]}),jw=({className:e="w-6 h-6"})=>s.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),sa=({className:e="w-6 h-6"})=>s.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),qi=({className:e="w-6 h-6"})=>s.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"})}),Ic=({className:e="w-6 h-6"})=>s.jsx("svg",{className:e,fill:"currentColor",viewBox:"0 0 256 256",children:s.jsx("path",{d:"M240,128a113.33,113.33,0,0,1-48.84,92.51,16,16,0,0,1-19.82-24.64,80.1,80.1,0,0,0-86.68,0A16,16,0,0,1,64.84,220.51,112,112,0,1,1,240,128ZM128,144a40,40,0,1,0-40-40A40,40,0,0,0,128,144Z"})}),oa=({className:e="w-6 h-6"})=>s.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),_w=({className:e="w-6 h-6"})=>s.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),Uc=({className:e="w-6 h-6"})=>s.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),gc=({className:e="w-6 h-6"})=>s.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),tl=({className:e="w-6 h-6"})=>s.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),Iw=({className:e="w-5 h-5"})=>s.jsx("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})}),ao=({className:e="w-6 h-6"})=>s.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),su=({className:e="w-6 h-6"})=>s.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),Dw=({className:e="w-6 h-6"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),Gu=({className:e="w-6 h-6"})=>s.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),Ts=({className:e="w-5 h-5"})=>s.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.536L16.732 3.732z"})}),q1=({className:e="w-6 h-6"})=>s.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),Od=({className:e="w-5 h-5"})=>s.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),ty=({className:e="w-5 h-5"})=>s.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4v-3l1.258-1.258a6 6 0 015.742-10.485A6 6 0 0115 7z"})}),Lw=({className:e="w-6 h-6"})=>s.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 11l3-3m0 0l3 3m-3-3v8m0-13a9 9 0 110 18 9 9 0 010-18z"})}),ca=({className:e="w-6 h-6"})=>s.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),dh=({className:e="w-6 h-6"})=>s.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 10h10a8 8 0 018 8v2M3 10l4-4m-4 4l4 4"})}),G1=({className:e="w-6 h-6"})=>s.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),lm=({className:e="w-6 h-6"})=>s.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),ny=({className:e="w-6 h-6"})=>s.jsxs("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),Ow=({className:e="w-6 h-6"})=>s.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),Mw=({className:e="w-6 h-6"})=>s.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v1m6 11v1m-6-16v1m12 11v1M4 12H3m10 6H3m10-12H3m18 12h-1M4 20v-1m0-6V3m0 18v-1M20 4v1m0 12v1M4 4h1m15 15h1M4 8h1m15 7h1m-6-4h.01M12 12h.01M8 12h.01M12 16h.01M16 12h.01M16 16h.01M8 16h.01M12 8h.01M16 8h.01M8 8h.01"})}),ry=({className:e="w-6 h-6"})=>s.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),W1=({className:e="w-6 h-6"})=>s.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),fh=({className:e="w-6 h-6"})=>s.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v.01M12 14v3m-3-3h6M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),iy=({className:e="w-6 h-6"})=>s.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),ay=({className:e="w-6 h-6"})=>s.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l4-4m0 0l4 4m-4-4v12"})}),Rh=({className:e="w-6 h-6"})=>s.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),sy=({className:e="w-6 h-6"})=>s.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}),Rw=({className:e="w-6 h-6"})=>s.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})}),oy=({className:e="w-6 h-6"})=>s.jsxs("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),gp=({className:e="w-5 h-5"})=>s.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),kw=({className:e="w-6 h-6"})=>s.jsxs("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),Yl=({className:e="w-6 h-6"})=>s.jsxs("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 12l-8 4-8-4"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 12v6a2 2 0 002 2h12a2 2 0 002-2v-6"})]}),Y1=({className:e="w-6 h-6"})=>s.jsxs("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 7h.01M7 3h5a2 2 0 012 2v5a2 2 0 01-2 2H7a2 2 0 01-2-2V5a2 2 0 012-2z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 12l-4 4 4 4"})]}),Pw=({className:e="w-6 h-6"})=>s.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 20.944a11.955 11.955 0 019-2.606 11.955 11.955 0 019 2.606 12.02 12.02 0 00-2.382-9.008z"})}),Fw=({className:e="w-6 h-6"})=>s.jsxs("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2m-2-2a9 9 0 11-18 0 9 9 0 0118 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),cm=({className:e="w-6 h-6"})=>s.jsxs("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm-3-7a9 9 0 01.121 17.804m-2.121-2.121a1.5 1.5 0 00-2.121 2.121M12 21a9 9 0 01-9-9h18a9 9 0 01-9 9z",transform:"rotate(-45 12 12)"}),s.jsx("path",{d:"M14 21L12 19l-2 2"}),s.jsx("path",{d:"M12 3v2"}),s.jsx("path",{d:"M5.636 5.636l1.414 1.414M18.364 5.636l-1.414 1.414"})]}),Bw=({className:e="w-6 h-6"})=>s.jsx("svg",{className:e,fill:"currentColor",viewBox:"0 0 256 256",children:s.jsx("path",{d:"M128,80a48,48,0,1,0,48,48A48.05,48.05,0,0,0,128,80Zm0,80a32,32,0,1,1,32-32A32,32,0,0,1,128,160ZM232,128A8,8,0,0,1,224,136H200a8,8,0,0,1,0-16h24A8,8,0,0,1,232,128ZM128,24a8,8,0,0,1-8-8V8a8,8,0,0,1,16,0V16A8,8,0,0,1,128,24Zm-80,42.34A8,8,0,0,0,59.31,77.66l17-17a8,8,0,0,0-11.32-11.32l-17,17A8,8,0,0,0,48,66.34ZM183,183a8,8,0,0,0-11.31-11.31l-17,17a8,8,0,0,0,11.31,11.31l17-17A8,8,0,0,0,183,183ZM128,232a8,8,0,0,1,8,8v8a8,8,0,0,1-16,0v-8A8,8,0,0,1,128,232ZM56,128a8,8,0,0,1-8-8V96a8,8,0,0,1,16,0v24A8,8,0,0,1,56,128ZM197.66,48a8,8,0,0,0-11.32,0l-17,17a8,8,0,0,0,11.32,11.32l17-17A8,8,0,0,0,197.66,48ZM76.34,197.66,59.31,180.69a8,8,0,0,0-11.31,11.31l17,17a8,8,0,0,0,11.31-11.31Z"})}),Uw=({className:e="w-6 h-6"})=>s.jsx("svg",{className:e,fill:"currentColor",viewBox:"0 0 256 256",children:s.jsx("path",{d:"M216.7,152.61A95.82,95.82,0,0,1,103.39,39.3a8,8,0,0,0-10.9-10.9,111.94,111.94,0,0,0,16.5,152.91A112,112,0,0,0,227.6,227.6a8,8,0,0,0-10.9-10.9A95.82,95.82,0,0,1,216.7,152.61Z"})}),zw=({toast:e})=>{const{removeToast:t}=jn(),n={success:"bg-green-600",error:"bg-red-600",info:"bg-primary-600"},i={success:s.jsx(ao,{className:"w-6 h-6 text-white"}),error:s.jsx(su,{className:"w-6 h-6 text-white"}),info:s.jsx(Dw,{className:"w-6 h-6 text-white"})};return pe.useEffect(()=>{const o=e.duration||1e4,l=setTimeout(()=>{t(e.id)},o);return()=>clearTimeout(l)},[e.id,e.duration,t]),s.jsxs("div",{className:`flex items-center gap-4 text-white p-4 pr-6 rounded-xl shadow-2xl animate-fade-in-up ${n[e.type]} relative`,children:[i[e.type],s.jsx("p",{className:"font-medium flex-1",children:e.message}),s.jsx("button",{onClick:()=>t(e.id),className:"ml-2 hover:bg-white hover:bg-opacity-20 rounded-full p-1 transition-colors","aria-label":"Close notification",children:s.jsx(sy,{className:"w-4 h-4 text-white"})})]})},Hw=()=>{const{toasts:e}=jn();return s.jsx("div",{className:"fixed bottom-8 right-8 z-[100] space-y-3",children:e.map(t=>s.jsx(zw,{toast:t},t.id))})},Vw=()=>{const{login:e,isLoading:t}=jn(),[n,i]=pe.useState(""),[o,l]=pe.useState(""),f=m=>{m.preventDefault(),e(n,o)};return s.jsx("div",{className:"min-h-screen w-full flex items-center justify-center p-4 bg-login-image",children:s.jsxs("div",{className:"w-full max-w-sm",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"inline-block p-4 bg-primary/10 border-2 border-primary/20 rounded-2xl",children:s.jsx("svg",{viewBox:"0 0 24 24",className:"w-16 h-16 text-primary",fill:"currentColor",children:s.jsx("path",{d:"M13,3V9H16L11,21V15H8L13,3Z"})})}),s.jsx("h1",{className:"text-4xl font-bold tracking-tight text-foreground mt-4",children:"Flash Express"}),s.jsx("p",{className:"mt-2 text-muted-foreground",children:"Your world, delivered."})]}),s.jsxs("div",{className:"bg-card/60 dark:bg-card/80 backdrop-blur-md p-8 rounded-2xl border border-border shadow-2xl",children:[s.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Portal Login"}),s.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Enter your credentials to access your account."}),s.jsxs("form",{onSubmit:f,className:"mt-8 space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-muted-foreground mb-1",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3",children:s.jsx(W1,{className:"h-5 w-5 text-muted-foreground"})}),s.jsx("input",{id:"email",type:"email",value:n,onChange:m=>i(m.target.value),className:"w-full pl-10 pr-4 py-3 bg-background/60 border border-border rounded-lg text-foreground placeholder-muted-foreground focus:ring-2 focus:ring-primary/80 focus:border-primary transition",placeholder:"you@example.com",required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-muted-foreground mb-1",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3",children:s.jsx(ty,{className:"h-5 w-5 text-muted-foreground"})}),s.jsx("input",{id:"password",type:"password",value:o,onChange:m=>l(m.target.value),className:"w-full pl-10 pr-4 py-3 bg-background/60 border border-border rounded-lg text-foreground placeholder-muted-foreground focus:ring-2 focus:ring-primary/80 focus:border-primary transition",placeholder:"",required:!0})]})]}),s.jsx("button",{type:"submit",disabled:t,className:"w-full flex justify-center bg-primary text-primary-foreground font-bold py-3 px-4 rounded-lg shadow-lg hover:bg-primary/90 focus:outline-none focus:ring-4 focus:ring-primary/50 transition duration-300 disabled:bg-primary/50 disabled:cursor-not-allowed",children:t?"Logging in...":"Login"})]})]}),s.jsxs("p",{className:"text-center text-xs text-muted-foreground mt-6",children:["Test with: ",s.jsx("code",{className:"bg-card text-secondary-foreground px-1.5 py-0.5 rounded-md",children:"admin@flash.com"})," / ",s.jsx("code",{className:"bg-card text-secondary-foreground px-1.5 py-0.5 rounded-md",children:"password123"})]})]})})},pp=[{name:"Dashboard",icon:s.jsx(jw,{}),view:"dashboard",permission:Ut.VIEW_DASHBOARD},{name:"My Shipments",icon:s.jsx(sa,{}),view:"shipments",permission:Ut.VIEW_OWN_SHIPMENTS},{name:"Create Shipment",icon:s.jsx(tl,{}),view:"create",permission:Ut.CREATE_SHIPMENTS},{name:"My Wallet",icon:s.jsx(oa,{}),view:"wallet",permission:Ut.VIEW_OWN_WALLET},{name:"My Financials",icon:s.jsx(Uc,{}),view:"financials",permission:Ut.VIEW_OWN_FINANCIALS},{name:"My Tasks",icon:s.jsx(gc,{}),view:"tasks",permission:Ut.VIEW_COURIER_TASKS},{name:"Completed Orders",icon:s.jsx(ao,{}),view:"completed-orders",permission:Ut.VIEW_COURIER_COMPLETED_ORDERS},{name:"My Earnings",icon:s.jsx(fh,{}),view:"courier-financials",permission:Ut.VIEW_COURIER_EARNINGS},{name:"Delivered Shipments",icon:s.jsx(sa,{}),view:"delivered-shipments",permission:Ut.VIEW_DELIVERED_SHIPMENTS},{name:"Couriers By Zone",icon:s.jsx(ny,{}),view:"couriers-by-zone",permission:Ut.VIEW_COURIERS_BY_ZONE},{name:"My Profile",icon:s.jsx(lm,{}),view:"profile",permission:Ut.VIEW_PROFILE},{name:"My Assets",icon:s.jsx(Y1,{}),view:"my-assets",permission:Ut.VIEW_OWN_ASSETS},{name:"All Shipments",icon:s.jsx(sa,{}),view:"shipments",permission:Ut.VIEW_ALL_SHIPMENTS},{name:"Packaging & Assignment",icon:s.jsx(Yl,{}),view:"packaging-and-assignment",permission:Ut.ASSIGN_SHIPMENTS},{name:"Delivery Management",icon:s.jsx(G1,{}),view:"admin-delivery-management",permission:Ut.VIEW_ADMIN_DELIVERY_MANAGEMENT},{name:"User Management",icon:s.jsx(Ic,{}),view:"users",permission:Ut.MANAGE_USERS},{name:"Role Management",icon:s.jsx(oy,{}),view:"roles",permission:Ut.MANAGE_ROLES},{name:"Partner Tiers",icon:s.jsx(cm,{}),view:"partner-tier-management",permission:Ut.MANAGE_PARTNER_TIERS},{name:"Inventory",icon:s.jsx(Yl,{}),view:"inventory",permission:Ut.MANAGE_INVENTORY},{name:"Asset Management",icon:s.jsx(Y1,{}),view:"asset-management",permission:Ut.MANAGE_ASSETS},{name:"Supplier Management",icon:s.jsx(G1,{}),view:"supplier-management",permission:Ut.MANAGE_SUPPLIERS},{name:"Client Analytics",icon:s.jsx(Ow,{}),view:"client-analytics",permission:Ut.VIEW_CLIENT_ANALYTICS},{name:"Courier Performance",icon:s.jsx(fh,{}),view:"courier-performance",permission:Ut.VIEW_COURIER_PERFORMANCE},{name:"Financials",icon:s.jsx(Uc,{}),view:"financials",permission:Ut.VIEW_ADMIN_FINANCIALS},{name:"Admin Financials",icon:s.jsx(Uc,{}),view:"admin-financials",permission:Ut.VIEW_ADMIN_FINANCIALS},{name:"Total Shipments",icon:s.jsx(sa,{}),view:"total-shipments",permission:Ut.VIEW_TOTAL_SHIPMENTS_OVERVIEW},{name:"Notifications Log",icon:s.jsx(ry,{}),view:"notifications",permission:Ut.VIEW_NOTIFICATIONS_LOG}],qw=({activeView:e,setActiveView:t,isOpen:n,setIsOpen:i})=>{const{hasPermission:o}=jn(),l=pp.filter(m=>{if(m.view==="financials"&&o(Ut.VIEW_ADMIN_FINANCIALS)){const p=pp.find(x=>x.view==="admin-financials");if(p&&o(p.permission))return!1}return m.view==="shipments"&&m.permission===Ut.VIEW_OWN_SHIPMENTS&&o(Ut.VIEW_ALL_SHIPMENTS)?!1:o(m.permission)}),f=m=>{t(m),i(!1)};return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:`fixed inset-0 bg-black/60 z-30 lg:hidden transition-opacity ${n?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:()=>i(!1)}),s.jsxs("aside",{className:`fixed inset-y-0 left-0 z-40 w-64 bg-card text-card-foreground flex flex-col flex-shrink-0 transition-transform duration-300 ease-in-out
                ${n?"translate-x-0":"-translate-x-full"}
                lg:relative lg:translate-x-0 lg:w-64`,children:[s.jsxs("div",{className:"p-4 flex items-center justify-between border-b border-border",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-primary/10 p-1.5 rounded-lg",children:s.jsx(ey,{className:"w-8 h-8"})}),s.jsx("div",{children:s.jsx("h1",{className:"text-lg font-bold text-foreground",children:"Flash Express"})})]}),s.jsx("button",{onClick:()=>i(!1),className:"p-1 text-muted-foreground hover:text-foreground lg:hidden",children:s.jsx(sy,{className:"w-6 h-6"})})]}),s.jsx("nav",{className:"flex-1 p-4 space-y-1.5 overflow-y-auto",children:l.map(m=>s.jsxs("button",{onClick:()=>f(m.view),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-md text-left transition-all duration-200 group relative ${e===m.view?"bg-primary/10 text-primary font-semibold":"hover:bg-accent hover:text-accent-foreground"}`,children:[s.jsx("div",{className:`absolute left-0 top-0 h-full w-1 rounded-r-full transition-all duration-200 ${e===m.view?"bg-primary":"bg-transparent"}`}),s.jsx("div",{className:"w-6 h-6",children:m.icon}),s.jsx("span",{className:"text-sm font-medium",children:m.name})]},m.view+m.name))})]})]})},Gw=({onLogout:e,user:t,onNavigate:n,onMenuClick:i})=>{const{inAppNotifications:o,markNotificationAsRead:l,theme:f,setTheme:m}=jn(),[p,x]=pe.useState(!1),S=pe.useRef(null),N=o.filter(E=>E.userId===t.id).sort((E,P)=>new Date(P.timestamp).getTime()-new Date(E.timestamp).getTime()),j=N.filter(E=>!E.isRead).length;pe.useEffect(()=>{const E=P=>{S.current&&!S.current.contains(P.target)&&x(!1)};return document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[]);const v=(E,P)=>{if(l(E),P){const C=P.startsWith("/")?P.substring(1):P;n(C)}x(!1)},O=Array.isArray(t.roles)?t.roles:[];return s.jsxs("header",{className:"bg-card/80 backdrop-blur-sm border-b border-border p-4 flex justify-between items-center z-20 sticky top-0",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:i,className:"p-1 -ml-1 text-foreground lg:hidden",children:s.jsx(Rw,{className:"w-6 h-6"})}),s.jsxs("div",{className:"text-lg font-bold text-foreground",children:[O.join(" & ")," Portal"]})]}),s.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[s.jsx("button",{onClick:()=>m(f==="dark"?"light":"dark"),className:"p-2 rounded-full text-foreground hover:bg-accent transition","aria-label":"Toggle theme",children:f==="dark"?s.jsx(Bw,{className:"w-6 h-6 text-yellow-400"}):s.jsx(Uw,{className:"w-6 h-6"})}),s.jsxs("div",{className:"relative",ref:S,children:[s.jsxs("button",{onClick:()=>x(E=>!E),className:"p-2 rounded-full hover:bg-accent transition relative",children:[s.jsx(ry,{className:"w-6 h-6 text-foreground"}),j>0&&s.jsxs("span",{className:"absolute top-0 right-0 flex h-3 w-3",children:[s.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),s.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-red-500"})]})]}),p&&s.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-card rounded-lg shadow-xl border border-border overflow-hidden",children:[s.jsx("div",{className:"p-3 font-semibold text-foreground border-b border-border",children:"Notifications"}),s.jsx("div",{className:"max-h-96 overflow-y-auto",children:N.length>0?N.map(E=>s.jsx("button",{onClick:()=>v(E.id,E.link),className:`w-full text-left p-3 border-b border-border last:border-b-0 ${E.isRead?"hover:bg-accent":"bg-primary/10"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:`mt-1 w-2 h-2 rounded-full flex-shrink-0 ${E.isRead?"bg-transparent":"bg-primary"}`}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm text-foreground",children:E.message}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(E.timestamp).toLocaleString()})]})]})},E.id)):s.jsx("p",{className:"text-sm text-muted-foreground p-4 text-center",children:"No notifications yet."})})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"text-right hidden sm:block",children:[s.jsx("p",{className:"font-semibold text-foreground",children:t.name}),s.jsx("p",{className:"text-xs text-muted-foreground",children:t.email})]}),s.jsx("button",{onClick:e,title:"Logout",className:"p-2 rounded-full hover:bg-red-100/50 dark:hover:bg-red-900/20 transition",children:s.jsx(_w,{className:"w-6 h-6 text-red-500"})})]})]})]})},kt=({title:e,value:t,icon:n,color:i,subtitle:o,onClick:l})=>s.jsxs("div",{className:`card p-5 flex items-center justify-between border-t-4 ${l?"cursor-pointer hover:shadow-lg hover:-translate-y-1 transition-all duration-300":""}`,style:{borderTopColor:i},onClick:l,children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:e}),s.jsx("p",{className:"text-3xl font-bold text-foreground dark:text-primary mt-1",children:t}),o&&s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:o})]}),s.jsx("div",{className:"p-4 rounded-full",style:{color:i,backgroundColor:`${i}1A`},children:pd.cloneElement(n,{className:"w-8 h-8"})})]}),xp=({setActiveView:e})=>{const{currentUser:t,shipments:n,users:i,courierStats:o,hasPermission:l,setShipmentFilter:f}=jn();if(!t)return null;const m=n.filter(E=>E.clientId===t.id),p=(E,P="total-shipments")=>{f(()=>E),e(P)},x=()=>{var E;return s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsx(kt,{title:"Total Shipments",value:m.length,icon:s.jsx(sa,{}),color:"#3b82f6",onClick:()=>e("shipments")}),s.jsx(kt,{title:"Out for Delivery",value:m.filter(P=>P.status===ht.OUT_FOR_DELIVERY).length,icon:s.jsx(qi,{}),color:"#8b5cf6",onClick:()=>p(P=>P.clientId===t.id&&P.status===ht.OUT_FOR_DELIVERY,"shipments")}),s.jsx(kt,{title:"Wallet Balance",value:`${((E=t.walletBalance)==null?void 0:E.toFixed(2))??0} EGP`,icon:s.jsx(oa,{}),color:"#22c55e",onClick:()=>e("wallet")})]})},S=()=>{const E=o.find(D=>D.courierId===t.id),P=n.filter(D=>D.courierId===t.id&&![ht.DELIVERED,ht.DELIVERY_FAILED].includes(D.status)),C=P.filter(D=>D.paymentMethod===Mn.COD).reduce((D,U)=>D+U.price,0),_=n.filter(D=>D.courierId===t.id&&D.status===ht.DELIVERED);return s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(kt,{title:"Cash to Collect",value:`${C.toFixed(2)} EGP`,icon:s.jsx(oa,{}),color:"#f97316",onClick:()=>e("tasks")}),s.jsx(kt,{title:"Current Balance",value:`${(E==null?void 0:E.currentBalance.toFixed(2))??"0.00"} EGP`,icon:s.jsx(fh,{}),color:"#16a34a",onClick:()=>e("courier-financials")}),s.jsx(kt,{title:"Pending Deliveries",value:P.length,icon:s.jsx(qi,{}),color:"#06b6d4",onClick:()=>e("tasks")}),s.jsx(kt,{title:"Total Deliveries",value:_.length,icon:s.jsx(ao,{}),color:"#8b5cf6",onClick:()=>e("completed-orders")})]})},N=()=>{const E=C=>{if([ht.DELIVERED,ht.DELIVERY_FAILED].includes(C.status))return!1;const _=new Date(Date.now()-2.5*24*60*60*1e3);return new Date(C.creationDate)<_},P=n.filter(E);return s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsx(kt,{title:"Total Shipments",value:n.length,icon:s.jsx(sa,{}),color:"#3b82f6",onClick:()=>e("total-shipments")}),s.jsx(kt,{title:"Total Clients",value:i.filter(C=>(C.roles||[]).includes(Vt.CLIENT)).length,icon:s.jsx(Ic,{}),color:"#8b5cf6",onClick:()=>e("client-analytics")}),s.jsx(kt,{title:"Total Couriers",value:i.filter(C=>(C.roles||[]).includes(Vt.COURIER)).length,icon:s.jsx(qi,{}),color:"#f97316",onClick:()=>e("courier-performance")})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(kt,{title:"Processing",value:n.filter(C=>[ht.WAITING_FOR_PACKAGING,ht.PACKAGED_AND_WAITING_FOR_ASSIGNMENT].includes(C.status)).length,icon:s.jsx(gc,{}),color:"#f59e0b",onClick:()=>e("packaging-and-assignment")}),s.jsx(kt,{title:"Out for Delivery",value:n.filter(C=>C.status===ht.OUT_FOR_DELIVERY).length,icon:s.jsx(qi,{}),color:"#06b6d4",onClick:()=>p(C=>C.status===ht.OUT_FOR_DELIVERY)}),s.jsx(kt,{title:"Delivered Today",value:n.filter(C=>C.status===ht.DELIVERED&&new Date(C.deliveryDate||"").toDateString()===new Date().toDateString()).length,icon:s.jsx(sa,{}),color:"#16a34a",onClick:()=>p(C=>C.status===ht.DELIVERED&&new Date(C.deliveryDate||"").toDateString()===new Date().toDateString())}),s.jsx(kt,{title:"Overdue",value:P.length,icon:s.jsx(Rh,{}),color:"#ef4444",onClick:()=>p(E)})]}),s.jsxs("div",{className:"card",children:[s.jsx("h2",{className:"text-xl font-bold text-foreground mb-4",children:"Quick Actions"}),s.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("button",{onClick:()=>e("users"),className:"p-4 bg-secondary hover:bg-accent rounded-lg border border-border transition-colors text-center group",children:[s.jsx(Ic,{className:"w-8 h-8 text-primary mx-auto mb-2 group-hover:scale-110 transition-transform"}),s.jsx("span",{className:"text-sm font-semibold text-foreground",children:"Manage Users"})]}),s.jsxs("button",{onClick:()=>e("courier-performance"),className:"p-4 bg-secondary hover:bg-accent rounded-lg border border-border transition-colors text-center group",children:[s.jsx(qi,{className:"w-8 h-8 text-primary mx-auto mb-2 group-hover:scale-110 transition-transform"}),s.jsx("span",{className:"text-sm font-semibold text-foreground",children:"Courier Performance"})]}),s.jsxs("button",{onClick:()=>e("admin-financials"),className:"p-4 bg-secondary hover:bg-accent rounded-lg border border-border transition-colors text-center group",children:[s.jsx(Uc,{className:"w-8 h-8 text-primary mx-auto mb-2 group-hover:scale-110 transition-transform"}),s.jsx("span",{className:"text-sm font-semibold text-foreground",children:"Financials"})]}),s.jsxs("button",{onClick:()=>e("notifications"),className:"p-4 bg-secondary hover:bg-accent rounded-lg border border-border transition-colors text-center group",children:[s.jsx(gc,{className:"w-8 h-8 text-primary mx-auto mb-2 group-hover:scale-110 transition-transform"}),s.jsx("span",{className:"text-sm font-semibold text-foreground",children:"Notifications Log"})]})]})]})]})},j=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsx(kt,{title:"Total Shipments",value:n.length,icon:s.jsx(sa,{}),color:"#3b82f6",onClick:()=>e("total-shipments")}),s.jsx(kt,{title:"Total Clients",value:i.filter(E=>(E.roles||[]).includes(Vt.CLIENT)).length,icon:s.jsx(Ic,{}),color:"#8b5cf6",onClick:()=>e("client-analytics")}),s.jsx(kt,{title:"Total Couriers",value:i.filter(E=>(E.roles||[]).includes(Vt.COURIER)).length,icon:s.jsx(qi,{}),color:"#f97316",onClick:()=>e("courier-performance")})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsx(kt,{title:"Processing",value:n.filter(E=>[ht.WAITING_FOR_PACKAGING,ht.PACKAGED_AND_WAITING_FOR_ASSIGNMENT].includes(E.status)).length,icon:s.jsx(gc,{}),color:"#f59e0b",onClick:()=>e("packaging-and-assignment")}),s.jsx(kt,{title:"Out for Delivery",value:n.filter(E=>E.status===ht.OUT_FOR_DELIVERY).length,icon:s.jsx(qi,{}),color:"#06b6d4",onClick:()=>p(E=>E.status===ht.OUT_FOR_DELIVERY)}),s.jsx(kt,{title:"Delivered Today",value:n.filter(E=>E.status===ht.DELIVERED&&new Date(E.deliveryDate||"").toDateString()===new Date().toDateString()).length,icon:s.jsx(sa,{}),color:"#16a34a",onClick:()=>p(E=>E.status===ht.DELIVERED&&new Date(E.deliveryDate||"").toDateString()===new Date().toDateString())})]}),s.jsxs("div",{className:"card",children:[s.jsx("h2",{className:"text-xl font-bold text-foreground mb-4",children:"Quick Actions"}),s.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("button",{onClick:()=>e("users"),className:"p-4 bg-secondary hover:bg-accent rounded-lg border border-border transition-colors text-center group",children:[s.jsx(Ic,{className:"w-8 h-8 text-primary mx-auto mb-2 group-hover:scale-110 transition-transform"}),s.jsx("span",{className:"text-sm font-semibold text-foreground",children:"Manage Users"})]}),s.jsxs("button",{onClick:()=>e("courier-performance"),className:"p-4 bg-secondary hover:bg-accent rounded-lg border border-border transition-colors text-center group",children:[s.jsx(qi,{className:"w-8 h-8 text-primary mx-auto mb-2 group-hover:scale-110 transition-transform"}),s.jsx("span",{className:"text-sm font-semibold text-foreground",children:"Courier Performance"})]}),s.jsxs("button",{onClick:()=>e("client-analytics"),className:"p-4 bg-secondary hover:bg-accent rounded-lg border border-border transition-colors text-center group",children:[s.jsx(Uc,{className:"w-8 h-8 text-primary mx-auto mb-2 group-hover:scale-110 transition-transform"}),s.jsx("span",{className:"text-sm font-semibold text-foreground",children:"Client Analytics"})]}),s.jsxs("button",{onClick:()=>e("notifications"),className:"p-4 bg-secondary hover:bg-accent rounded-lg border border-border transition-colors text-center group",children:[s.jsx(gc,{className:"w-8 h-8 text-primary mx-auto mb-2 group-hover:scale-110 transition-transform"}),s.jsx("span",{className:"text-sm font-semibold text-foreground",children:"Notifications Log"})]})]})]})]}),v=()=>{const E=n.filter(C=>C.status===ht.PACKAGED_AND_WAITING_FOR_ASSIGNMENT),P=n.filter(C=>C.status===ht.OUT_FOR_DELIVERY);return s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsx(kt,{title:"Ready for Assignment",value:E.length,icon:s.jsx(sa,{}),color:"#8b5cf6",onClick:()=>e("packaging-and-assignment")}),s.jsx(kt,{title:"Total Out for Delivery",value:P.length,icon:s.jsx(qi,{}),color:"#06b6d4",onClick:()=>p(C=>C.status===ht.OUT_FOR_DELIVERY)}),s.jsx(kt,{title:"Total Shipments",value:n.length,icon:s.jsx(gc,{}),color:"#3b82f6",onClick:()=>e("total-shipments")})]}),s.jsxs("div",{className:"card",children:[s.jsx("h2",{className:"text-xl font-bold text-foreground mb-4",children:"Quick Actions"}),s.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("button",{onClick:()=>e("packaging-and-assignment"),className:"p-4 bg-secondary hover:bg-accent rounded-lg border border-border transition-colors text-center group",children:[s.jsx(Yl,{className:"w-8 h-8 text-primary mx-auto mb-2 group-hover:scale-110 transition-transform"}),s.jsx("span",{className:"text-sm font-semibold text-foreground",children:"Assign Shipments"})]}),s.jsxs("button",{onClick:()=>e("total-shipments"),className:"p-4 bg-secondary hover:bg-accent rounded-lg border border-border transition-colors text-center group",children:[s.jsx(sa,{className:"w-8 h-8 text-primary mx-auto mb-2 group-hover:scale-110 transition-transform"}),s.jsx("span",{className:"text-sm font-semibold text-foreground",children:"View All Shipments"})]}),s.jsxs("button",{onClick:()=>e("inventory"),className:"p-4 bg-secondary hover:bg-accent rounded-lg border border-border transition-colors text-center group",children:[s.jsx(Yl,{className:"w-8 h-8 text-primary mx-auto mb-2 group-hover:scale-110 transition-transform"}),s.jsx("span",{className:"text-sm font-semibold text-foreground",children:"Manage Inventory"})]})]})]})]})},O=Array.isArray(t.roles)?t.roles:[];return O.includes(Vt.ADMIN)?N():O.includes(Vt.SUPER_USER)?j():O.includes(Vt.ASSIGNING_USER)?v():O.includes(Vt.COURIER)?S():O.includes(Vt.CLIENT)?x():s.jsxs("div",{className:"card p-6",children:[s.jsxs("h1",{className:"text-2xl font-bold",children:["Welcome, ",t.name]}),s.jsx("p",{children:"Your dashboard is ready."})]})},Ww="modulepreload",Yw=function(e){return"/"+e},bp={},X1=function(t,n,i){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),m=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));o=Promise.allSettled(n.map(p=>{if(p=Yw(p),p in bp)return;bp[p]=!0;const x=p.endsWith(".css"),S=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${S}`))return;const N=document.createElement("link");if(N.rel=x?"stylesheet":Ww,x||(N.as="script"),N.crossOrigin="",N.href=p,m&&N.setAttribute("nonce",m),document.head.appendChild(N),x)return new Promise((j,v)=>{N.addEventListener("load",j),N.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${p}`)))})}))}function l(f){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=f,window.dispatchEvent(m),!m.defaultPrevented)throw f}return o.then(f=>{for(const m of f||[])m.status==="rejected"&&l(m.reason);return t().catch(l)})};function Vn(e){"@babel/helpers - typeof";return Vn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vn(e)}var Ri=Uint8Array,Ea=Uint16Array,um=Int32Array,kh=new Ri([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Ph=new Ri([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Z1=new Ri([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ly=function(e,t){for(var n=new Ea(31),i=0;i<31;++i)n[i]=t+=1<<e[i-1];for(var o=new um(n[30]),i=1;i<30;++i)for(var l=n[i];l<n[i+1];++l)o[l]=l-n[i]<<5|i;return{b:n,r:o}},cy=ly(kh,2),uy=cy.b,Q1=cy.r;uy[28]=258,Q1[258]=28;var dy=ly(Ph,0),Xw=dy.b,yp=dy.r,K1=new Ea(32768);for(var dr=0;dr<32768;++dr){var Eo=(dr&43690)>>1|(dr&21845)<<1;Eo=(Eo&52428)>>2|(Eo&13107)<<2,Eo=(Eo&61680)>>4|(Eo&3855)<<4,K1[dr]=((Eo&65280)>>8|(Eo&255)<<8)>>1}var Es=function(e,t,n){for(var i=e.length,o=0,l=new Ea(t);o<i;++o)e[o]&&++l[e[o]-1];var f=new Ea(t);for(o=1;o<t;++o)f[o]=f[o-1]+l[o-1]<<1;var m;if(n){m=new Ea(1<<t);var p=15-t;for(o=0;o<i;++o)if(e[o])for(var x=o<<4|e[o],S=t-e[o],N=f[e[o]-1]++<<S,j=N|(1<<S)-1;N<=j;++N)m[K1[N]>>p]=x}else for(m=new Ea(i),o=0;o<i;++o)e[o]&&(m[o]=K1[f[e[o]-1]++]>>15-e[o]);return m},nl=new Ri(288);for(var dr=0;dr<144;++dr)nl[dr]=8;for(var dr=144;dr<256;++dr)nl[dr]=9;for(var dr=256;dr<280;++dr)nl[dr]=7;for(var dr=280;dr<288;++dr)nl[dr]=8;var fd=new Ri(32);for(var dr=0;dr<32;++dr)fd[dr]=5;var Zw=Es(nl,9,0),Qw=Es(nl,9,1),Kw=Es(fd,5,0),Jw=Es(fd,5,1),B0=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},ts=function(e,t,n){var i=t/8|0;return(e[i]|e[i+1]<<8)>>(t&7)&n},U0=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(t&7)},dm=function(e){return(e+7)/8|0},fy=function(e,t,n){return(n==null||n>e.length)&&(n=e.length),new Ri(e.subarray(t,n))},$w=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],rs=function(e,t,n){var i=new Error(t||$w[e]);if(i.code=e,Error.captureStackTrace&&Error.captureStackTrace(i,rs),!n)throw i;return i},eN=function(e,t,n,i){var o=e.length,l=0;if(!o||t.f&&!t.l)return n||new Ri(0);var f=!n,m=f||t.i!=2,p=t.i;f&&(n=new Ri(o*3));var x=function(Te){var Ye=n.length;if(Te>Ye){var He=new Ri(Math.max(Ye*2,Te));He.set(n),n=He}},S=t.f||0,N=t.p||0,j=t.b||0,v=t.l,O=t.d,E=t.m,P=t.n,C=o*8;do{if(!v){S=ts(e,N,1);var _=ts(e,N+1,3);if(N+=3,_)if(_==1)v=Qw,O=Jw,E=9,P=5;else if(_==2){var ae=ts(e,N,31)+257,F=ts(e,N+10,15)+4,L=ae+ts(e,N+5,31)+1;N+=14;for(var M=new Ri(L),z=new Ri(19),k=0;k<F;++k)z[Z1[k]]=ts(e,N+k*3,7);N+=F*3;for(var R=B0(z),re=(1<<R)-1,ee=Es(z,R,1),k=0;k<L;){var ne=ee[ts(e,N,re)];N+=ne&15;var D=ne>>4;if(D<16)M[k++]=D;else{var K=0,G=0;for(D==16?(G=3+ts(e,N,3),N+=2,K=M[k-1]):D==17?(G=3+ts(e,N,7),N+=3):D==18&&(G=11+ts(e,N,127),N+=7);G--;)M[k++]=K}}var te=M.subarray(0,ae),W=M.subarray(ae);E=B0(te),P=B0(W),v=Es(te,E,1),O=Es(W,P,1)}else rs(1);else{var D=dm(N)+4,U=e[D-4]|e[D-3]<<8,Y=D+U;if(Y>o){p&&rs(0);break}m&&x(j+U),n.set(e.subarray(D,Y),j),t.b=j+=U,t.p=N=Y*8,t.f=S;continue}if(N>C){p&&rs(0);break}}m&&x(j+131072);for(var fe=(1<<E)-1,le=(1<<P)-1,B=N;;B=N){var K=v[U0(e,N)&fe],q=K>>4;if(N+=K&15,N>C){p&&rs(0);break}if(K||rs(2),q<256)n[j++]=q;else if(q==256){B=N,v=null;break}else{var Q=q-254;if(q>264){var k=q-257,he=kh[k];Q=ts(e,N,(1<<he)-1)+uy[k],N+=he}var ue=O[U0(e,N)&le],je=ue>>4;ue||rs(3),N+=ue&15;var W=Xw[je];if(je>3){var he=Ph[je];W+=U0(e,N)&(1<<he)-1,N+=he}if(N>C){p&&rs(0);break}m&&x(j+131072);var Ae=j+Q;if(j<W){var ve=l-W,Pe=Math.min(W,Ae);for(ve+j<0&&rs(3);j<Pe;++j)n[j]=i[ve+j]}for(;j<Ae;++j)n[j]=n[j-W]}}t.l=v,t.p=B,t.b=j,t.f=S,v&&(S=1,t.m=E,t.d=O,t.n=P)}while(!S);return j!=n.length&&f?fy(n,0,j):n.subarray(0,j)},Vs=function(e,t,n){n<<=t&7;var i=t/8|0;e[i]|=n,e[i+1]|=n>>8},Su=function(e,t,n){n<<=t&7;var i=t/8|0;e[i]|=n,e[i+1]|=n>>8,e[i+2]|=n>>16},z0=function(e,t){for(var n=[],i=0;i<e.length;++i)e[i]&&n.push({s:i,f:e[i]});var o=n.length,l=n.slice();if(!o)return{t:my,l:0};if(o==1){var f=new Ri(n[0].s+1);return f[n[0].s]=1,{t:f,l:1}}n.sort(function(Y,ae){return Y.f-ae.f}),n.push({s:-1,f:25001});var m=n[0],p=n[1],x=0,S=1,N=2;for(n[0]={s:-1,f:m.f+p.f,l:m,r:p};S!=o-1;)m=n[n[x].f<n[N].f?x++:N++],p=n[x!=S&&n[x].f<n[N].f?x++:N++],n[S++]={s:-1,f:m.f+p.f,l:m,r:p};for(var j=l[0].s,i=1;i<o;++i)l[i].s>j&&(j=l[i].s);var v=new Ea(j+1),O=J1(n[S-1],v,0);if(O>t){var i=0,E=0,P=O-t,C=1<<P;for(l.sort(function(ae,F){return v[F.s]-v[ae.s]||ae.f-F.f});i<o;++i){var _=l[i].s;if(v[_]>t)E+=C-(1<<O-v[_]),v[_]=t;else break}for(E>>=P;E>0;){var D=l[i].s;v[D]<t?E-=1<<t-v[D]++-1:++i}for(;i>=0&&E;--i){var U=l[i].s;v[U]==t&&(--v[U],++E)}O=t}return{t:new Ri(v),l:O}},J1=function(e,t,n){return e.s==-1?Math.max(J1(e.l,t,n+1),J1(e.r,t,n+1)):t[e.s]=n},vp=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new Ea(++t),i=0,o=e[0],l=1,f=function(p){n[i++]=p},m=1;m<=t;++m)if(e[m]==o&&m!=t)++l;else{if(!o&&l>2){for(;l>138;l-=138)f(32754);l>2&&(f(l>10?l-11<<5|28690:l-3<<5|12305),l=0)}else if(l>3){for(f(o),--l;l>6;l-=6)f(8304);l>2&&(f(l-3<<5|8208),l=0)}for(;l--;)f(o);l=1,o=e[m]}return{c:n.subarray(0,i),n:t}},Cu=function(e,t){for(var n=0,i=0;i<t.length;++i)n+=e[i]*t[i];return n},hy=function(e,t,n){var i=n.length,o=dm(t+2);e[o]=i&255,e[o+1]=i>>8,e[o+2]=e[o]^255,e[o+3]=e[o+1]^255;for(var l=0;l<i;++l)e[o+l+4]=n[l];return(o+4+i)*8},wp=function(e,t,n,i,o,l,f,m,p,x,S){Vs(t,S++,n),++o[256];for(var N=z0(o,15),j=N.t,v=N.l,O=z0(l,15),E=O.t,P=O.l,C=vp(j),_=C.c,D=C.n,U=vp(E),Y=U.c,ae=U.n,F=new Ea(19),L=0;L<_.length;++L)++F[_[L]&31];for(var L=0;L<Y.length;++L)++F[Y[L]&31];for(var M=z0(F,7),z=M.t,k=M.l,R=19;R>4&&!z[Z1[R-1]];--R);var re=x+5<<3,ee=Cu(o,nl)+Cu(l,fd)+f,ne=Cu(o,j)+Cu(l,E)+f+14+3*R+Cu(F,z)+2*F[16]+3*F[17]+7*F[18];if(p>=0&&re<=ee&&re<=ne)return hy(t,S,e.subarray(p,p+x));var K,G,te,W;if(Vs(t,S,1+(ne<ee)),S+=2,ne<ee){K=Es(j,v,0),G=j,te=Es(E,P,0),W=E;var fe=Es(z,k,0);Vs(t,S,D-257),Vs(t,S+5,ae-1),Vs(t,S+10,R-4),S+=14;for(var L=0;L<R;++L)Vs(t,S+3*L,z[Z1[L]]);S+=3*R;for(var le=[_,Y],B=0;B<2;++B)for(var q=le[B],L=0;L<q.length;++L){var Q=q[L]&31;Vs(t,S,fe[Q]),S+=z[Q],Q>15&&(Vs(t,S,q[L]>>5&127),S+=q[L]>>12)}}else K=Zw,G=nl,te=Kw,W=fd;for(var L=0;L<m;++L){var he=i[L];if(he>255){var Q=he>>18&31;Su(t,S,K[Q+257]),S+=G[Q+257],Q>7&&(Vs(t,S,he>>23&31),S+=kh[Q]);var ue=he&31;Su(t,S,te[ue]),S+=W[ue],ue>3&&(Su(t,S,he>>5&8191),S+=Ph[ue])}else Su(t,S,K[he]),S+=G[he]}return Su(t,S,K[256]),S+G[256]},tN=new um([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),my=new Ri(0),nN=function(e,t,n,i,o,l){var f=l.z||e.length,m=new Ri(i+f+5*(1+Math.ceil(f/7e3))+o),p=m.subarray(i,m.length-o),x=l.l,S=(l.r||0)&7;if(t){S&&(p[0]=l.r>>3);for(var N=tN[t-1],j=N>>13,v=N&8191,O=(1<<n)-1,E=l.p||new Ea(32768),P=l.h||new Ea(O+1),C=Math.ceil(n/3),_=2*C,D=function(ut){return(e[ut]^e[ut+1]<<C^e[ut+2]<<_)&O},U=new um(25e3),Y=new Ea(288),ae=new Ea(32),F=0,L=0,M=l.i||0,z=0,k=l.w||0,R=0;M+2<f;++M){var re=D(M),ee=M&32767,ne=P[re];if(E[ee]=ne,P[re]=ee,k<=M){var K=f-M;if((F>7e3||z>24576)&&(K>423||!x)){S=wp(e,p,0,U,Y,ae,L,z,R,M-R,S),z=F=L=0,R=M;for(var G=0;G<286;++G)Y[G]=0;for(var G=0;G<30;++G)ae[G]=0}var te=2,W=0,fe=v,le=ee-ne&32767;if(K>2&&re==D(M-le))for(var B=Math.min(j,K)-1,q=Math.min(32767,M),Q=Math.min(258,K);le<=q&&--fe&&ee!=ne;){if(e[M+te]==e[M+te-le]){for(var he=0;he<Q&&e[M+he]==e[M+he-le];++he);if(he>te){if(te=he,W=le,he>B)break;for(var ue=Math.min(le,he-2),je=0,G=0;G<ue;++G){var Ae=M-le+G&32767,ve=E[Ae],Pe=Ae-ve&32767;Pe>je&&(je=Pe,ne=Ae)}}}ee=ne,ne=E[ee],le+=ee-ne&32767}if(W){U[z++]=268435456|Q1[te]<<18|yp[W];var Te=Q1[te]&31,Ye=yp[W]&31;L+=kh[Te]+Ph[Ye],++Y[257+Te],++ae[Ye],k=M+te,++F}else U[z++]=e[M],++Y[e[M]]}}for(M=Math.max(M,k);M<f;++M)U[z++]=e[M],++Y[e[M]];S=wp(e,p,x,U,Y,ae,L,z,R,M-R,S),x||(l.r=S&7|p[S/8|0]<<3,S-=7,l.h=P,l.p=E,l.i=M,l.w=k)}else{for(var M=l.w||0;M<f+x;M+=65535){var He=M+65535;He>=f&&(p[S/8|0]=x,He=f),S=hy(p,S+1,e.subarray(M,He))}l.i=f}return fy(m,0,i+dm(S)+o)},gy=function(){var e=1,t=0;return{p:function(n){for(var i=e,o=t,l=n.length|0,f=0;f!=l;){for(var m=Math.min(f+2655,l);f<m;++f)o+=i+=n[f];i=(i&65535)+15*(i>>16),o=(o&65535)+15*(o>>16)}e=i,t=o},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},rN=function(e,t,n,i,o){if(!o&&(o={l:1},t.dictionary)){var l=t.dictionary.subarray(-32768),f=new Ri(l.length+e.length);f.set(l),f.set(e,l.length),e=f,o.w=l.length}return nN(e,t.level==null?6:t.level,t.mem==null?o.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,n,i,o)},py=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},iN=function(e,t){var n=t.level,i=n==0?0:n<6?1:n==9?3:2;if(e[0]=120,e[1]=i<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var o=gy();o.p(t.dictionary),py(e,2,o.d())}},aN=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&rs(6,"invalid zlib data"),(e[1]>>5&1)==1&&rs(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function $1(e,t){t||(t={});var n=gy();n.p(e);var i=rN(e,t,t.dictionary?6:2,4);return iN(i,t),py(i,i.length-4,n.d()),i}function sN(e,t){return eN(e.subarray(aN(e),-4),{i:2},t,t)}var oN=typeof TextDecoder<"u"&&new TextDecoder,lN=0;try{oN.decode(my,{stream:!0}),lN=1}catch{}var Wt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function H0(){Wt.console&&typeof Wt.console.log=="function"&&Wt.console.log.apply(Wt.console,arguments)}var nr={log:H0,warn:function(e){Wt.console&&(typeof Wt.console.warn=="function"?Wt.console.warn.apply(Wt.console,arguments):H0.call(null,arguments))},error:function(e){Wt.console&&(typeof Wt.console.error=="function"?Wt.console.error.apply(Wt.console,arguments):H0(e))}};function V0(e,t,n){var i=new XMLHttpRequest;i.open("GET",e),i.responseType="blob",i.onload=function(){_l(i.response,t,n)},i.onerror=function(){nr.error("could not download file")},i.send()}function Np(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function pf(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Wu,e2,_l=Wt.saveAs||((typeof window>"u"?"undefined":Vn(window))!=="object"||window!==Wt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var i=Wt.URL||Wt.webkitURL,o=document.createElement("a");t=t||e.name||"download",o.download=t,o.rel="noopener",typeof e=="string"?(o.href=e,o.origin!==location.origin?Np(o.href)?V0(e,t,n):pf(o,o.target="_blank"):pf(o)):(o.href=i.createObjectURL(e),setTimeout(function(){i.revokeObjectURL(o.href)},4e4),setTimeout(function(){pf(o)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download",typeof e=="string")if(Np(e))V0(e,t,n);else{var i=document.createElement("a");i.href=e,i.target="_blank",setTimeout(function(){pf(i)})}else navigator.msSaveOrOpenBlob(function(o,l){return l===void 0?l={autoBom:!1}:Vn(l)!=="object"&&(nr.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob(["\uFEFF",o],{type:o.type}):o}(e,n),t)}:function(e,t,n,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),typeof e=="string")return V0(e,t,n);var o=e.type==="application/octet-stream",l=/constructor/i.test(Wt.HTMLElement)||Wt.safari,f=/CriOS\/[\d]+/.test(navigator.userAgent);if((f||o&&l)&&(typeof FileReader>"u"?"undefined":Vn(FileReader))==="object"){var m=new FileReader;m.onloadend=function(){var S=m.result;S=f?S:S.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=S:location=S,i=null},m.readAsDataURL(e)}else{var p=Wt.URL||Wt.webkitURL,x=p.createObjectURL(e);i?i.location=x:location.href=x,i=null,setTimeout(function(){p.revokeObjectURL(x)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function xy(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(m){return[parseInt(m[1]),parseInt(m[2]),parseInt(m[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(m){return[parseInt(m[1],16),parseInt(m[2],16),parseInt(m[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(m){return[parseInt(m[1]+m[1],16),parseInt(m[2]+m[2],16),parseInt(m[3]+m[3],16)]}}],i=0;i<n.length;i++){var o=n[i].re,l=n[i].process,f=o.exec(e);f&&(t=l(f),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var m=this.r.toString(16),p=this.g.toString(16),x=this.b.toString(16);return m.length==1&&(m="0"+m),p.length==1&&(p="0"+p),x.length==1&&(x="0"+x),"#"+m+p+x}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function q0(e,t){var n=e[0],i=e[1],o=e[2],l=e[3];n=Di(n,i,o,l,t[0],7,-680876936),l=Di(l,n,i,o,t[1],12,-389564586),o=Di(o,l,n,i,t[2],17,606105819),i=Di(i,o,l,n,t[3],22,-1044525330),n=Di(n,i,o,l,t[4],7,-176418897),l=Di(l,n,i,o,t[5],12,1200080426),o=Di(o,l,n,i,t[6],17,-1473231341),i=Di(i,o,l,n,t[7],22,-45705983),n=Di(n,i,o,l,t[8],7,1770035416),l=Di(l,n,i,o,t[9],12,-1958414417),o=Di(o,l,n,i,t[10],17,-42063),i=Di(i,o,l,n,t[11],22,-1990404162),n=Di(n,i,o,l,t[12],7,1804603682),l=Di(l,n,i,o,t[13],12,-40341101),o=Di(o,l,n,i,t[14],17,-1502002290),n=Li(n,i=Di(i,o,l,n,t[15],22,1236535329),o,l,t[1],5,-165796510),l=Li(l,n,i,o,t[6],9,-1069501632),o=Li(o,l,n,i,t[11],14,643717713),i=Li(i,o,l,n,t[0],20,-373897302),n=Li(n,i,o,l,t[5],5,-701558691),l=Li(l,n,i,o,t[10],9,38016083),o=Li(o,l,n,i,t[15],14,-660478335),i=Li(i,o,l,n,t[4],20,-405537848),n=Li(n,i,o,l,t[9],5,568446438),l=Li(l,n,i,o,t[14],9,-1019803690),o=Li(o,l,n,i,t[3],14,-187363961),i=Li(i,o,l,n,t[8],20,1163531501),n=Li(n,i,o,l,t[13],5,-1444681467),l=Li(l,n,i,o,t[2],9,-51403784),o=Li(o,l,n,i,t[7],14,1735328473),n=Oi(n,i=Li(i,o,l,n,t[12],20,-1926607734),o,l,t[5],4,-378558),l=Oi(l,n,i,o,t[8],11,-2022574463),o=Oi(o,l,n,i,t[11],16,1839030562),i=Oi(i,o,l,n,t[14],23,-35309556),n=Oi(n,i,o,l,t[1],4,-1530992060),l=Oi(l,n,i,o,t[4],11,1272893353),o=Oi(o,l,n,i,t[7],16,-155497632),i=Oi(i,o,l,n,t[10],23,-1094730640),n=Oi(n,i,o,l,t[13],4,681279174),l=Oi(l,n,i,o,t[0],11,-358537222),o=Oi(o,l,n,i,t[3],16,-722521979),i=Oi(i,o,l,n,t[6],23,76029189),n=Oi(n,i,o,l,t[9],4,-640364487),l=Oi(l,n,i,o,t[12],11,-421815835),o=Oi(o,l,n,i,t[15],16,530742520),n=Mi(n,i=Oi(i,o,l,n,t[2],23,-995338651),o,l,t[0],6,-198630844),l=Mi(l,n,i,o,t[7],10,1126891415),o=Mi(o,l,n,i,t[14],15,-1416354905),i=Mi(i,o,l,n,t[5],21,-57434055),n=Mi(n,i,o,l,t[12],6,1700485571),l=Mi(l,n,i,o,t[3],10,-1894986606),o=Mi(o,l,n,i,t[10],15,-1051523),i=Mi(i,o,l,n,t[1],21,-2054922799),n=Mi(n,i,o,l,t[8],6,1873313359),l=Mi(l,n,i,o,t[15],10,-30611744),o=Mi(o,l,n,i,t[6],15,-1560198380),i=Mi(i,o,l,n,t[13],21,1309151649),n=Mi(n,i,o,l,t[4],6,-145523070),l=Mi(l,n,i,o,t[11],10,-1120210379),o=Mi(o,l,n,i,t[2],15,718787259),i=Mi(i,o,l,n,t[9],21,-343485551),e[0]=Ho(n,e[0]),e[1]=Ho(i,e[1]),e[2]=Ho(o,e[2]),e[3]=Ho(l,e[3])}function Fh(e,t,n,i,o,l){return t=Ho(Ho(t,e),Ho(i,l)),Ho(t<<o|t>>>32-o,n)}function Di(e,t,n,i,o,l,f){return Fh(t&n|~t&i,e,t,o,l,f)}function Li(e,t,n,i,o,l,f){return Fh(t&i|n&~i,e,t,o,l,f)}function Oi(e,t,n,i,o,l,f){return Fh(t^n^i,e,t,o,l,f)}function Mi(e,t,n,i,o,l,f){return Fh(n^(t|~i),e,t,o,l,f)}function by(e){var t,n=e.length,i=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)q0(i,cN(e.substring(t-64,t)));e=e.substring(t-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)o[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(o[t>>2]|=128<<(t%4<<3),t>55)for(q0(i,o),t=0;t<16;t++)o[t]=0;return o[14]=8*n,q0(i,o),i}function cN(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}Wu=Wt.atob.bind(Wt),e2=Wt.btoa.bind(Wt);var Ap="0123456789abcdef".split("");function uN(e){for(var t="",n=0;n<4;n++)t+=Ap[e>>8*n+4&15]+Ap[e>>8*n&15];return t}function dN(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function t2(e){return by(e).map(dN).join("")}var fN=function(e){for(var t=0;t<e.length;t++)e[t]=uN(e[t]);return e.join("")}(by("hello"))!="5d41402abc4b2a76b9719d911017c592";function Ho(e,t){if(fN){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function n2(e,t){var n,i,o,l;if(e!==n){for(var f=(o=e,l=1+(256/e.length>>0),new Array(l+1).join(o)),m=[],p=0;p<256;p++)m[p]=p;var x=0;for(p=0;p<256;p++){var S=m[p];x=(x+S+f.charCodeAt(p))%256,m[p]=m[x],m[x]=S}n=e,i=m}else m=i;var N=t.length,j=0,v=0,O="";for(p=0;p<N;p++)v=(v+(S=m[j=(j+1)%256]))%256,m[j]=m[v],m[v]=S,f=m[(m[j]+m[v])%256],O+=String.fromCharCode(t.charCodeAt(p)^f);return O}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Sp={print:4,modify:8,copy:16,"annot-forms":32};function pc(e,t,n,i){this.v=1,this.r=2;var o=192;e.forEach(function(m){if(Sp.perm!==void 0)throw new Error("Invalid permission: "+m);o+=Sp[m]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var l=(t+this.padding).substr(0,32),f=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(l,f),this.P=-(1+(255^o)),this.encryptionKey=t2(l+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=n2(this.encryptionKey,this.padding)}function xc(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,i=0;i<n;i++){var o=e.charCodeAt(i);o<33||o===35||o===37||o===40||o===41||o===47||o===60||o===62||o===91||o===93||o===123||o===125||o>126?t+="#"+("0"+o.toString(16)).slice(-2):t+=e[i]}return t}function Cp(e){if(Vn(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(n,i,o){if(o=o||!1,typeof n!="string"||typeof i!="function"||typeof o!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(n)||(t[n]={});var l=Math.random().toString(35);return t[n][l]=[i,!!o],l},this.unsubscribe=function(n){for(var i in t)if(t[i][n])return delete t[i][n],Object.keys(t[i]).length===0&&delete t[i],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var i=Array.prototype.slice.call(arguments,1),o=[];for(var l in t[n]){var f=t[n][l];try{f[0].apply(e,i)}catch(m){Wt.console&&nr.error("jsPDF PubSub Error",m.message,m)}f[1]&&o.push(l)}o.length&&o.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function hd(e){if(!(this instanceof hd))return new hd(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function yy(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Po(e,t,n,i,o){if(!(this instanceof Po))return new Po(e,t,n,i,o);this.type=e==="axial"?2:3,this.coords=t,this.colors=n,yy.call(this,i,o)}function Il(e,t,n,i,o){if(!(this instanceof Il))return new Il(e,t,n,i,o);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,yy.call(this,i,o)}function Ht(e){var t,n=typeof arguments[0]=="string"?arguments[0]:"p",i=arguments[1],o=arguments[2],l=arguments[3],f=[],m=1,p=16,x="S",S=null;Vn(e=e||{})==="object"&&(n=e.orientation,i=e.unit||i,o=e.format||o,l=e.compress||e.compressPdf||l,(S=e.encryption||null)!==null&&(S.userPassword=S.userPassword||"",S.ownerPassword=S.ownerPassword||"",S.userPermissions=S.userPermissions||[]),m=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(p=e.floatPrecision),x=e.defaultPathOperation||"S"),f=e.filters||(l===!0?["FlateEncode"]:f),i=i||"mm",n=(""+(n||"P")).toLowerCase();var N=e.putOnlyUsedFonts||!1,j={},v={internal:{},__private__:{}};v.__private__.PubSub=Cp;var O="1.3",E=v.__private__.getPdfVersion=function(){return O};v.__private__.setPdfVersion=function(A){O=A};var P={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};v.__private__.getPageFormats=function(){return P};var C=v.__private__.getPageFormat=function(A){return P[A]};o=o||"a4";var _={COMPAT:"compat",ADVANCED:"advanced"},D=_.COMPAT;function U(){this.saveGraphicsState(),me(new It(mt,0,0,-mt,0,_i()*mt).toString()+" cm"),this.setFontSize(this.getFontSize()/mt),x="n",D=_.ADVANCED}function Y(){this.restoreGraphicsState(),x="S",D=_.COMPAT}var ae=v.__private__.combineFontStyleAndFontWeight=function(A,$){if(A=="bold"&&$=="normal"||A=="bold"&&$==400||A=="normal"&&$=="italic"||A=="bold"&&$=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return $&&(A=$==400||$==="normal"?A==="italic"?"italic":"normal":$!=700&&$!=="bold"||A!=="normal"?($==700?"bold":$)+""+A:"bold"),A};v.advancedAPI=function(A){var $=D===_.COMPAT;return $&&U.call(this),typeof A!="function"||(A(this),$&&Y.call(this)),this},v.compatAPI=function(A){var $=D===_.ADVANCED;return $&&Y.call(this),typeof A!="function"||(A(this),$&&U.call(this)),this},v.isAdvancedAPI=function(){return D===_.ADVANCED};var F,L=function(A){if(D!==_.ADVANCED)throw new Error(A+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},M=v.roundToPrecision=v.__private__.roundToPrecision=function(A,$){var xe=t||$;if(isNaN(A)||isNaN(xe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return A.toFixed(xe).replace(/0+$/,"")};F=v.hpf=v.__private__.hpf=typeof p=="number"?function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.hpf");return M(A,p)}:p==="smart"?function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.hpf");return M(A,A>-1&&A<1?16:5)}:function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.hpf");return M(A,16)};var z=v.f2=v.__private__.f2=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.f2");return M(A,2)},k=v.__private__.f3=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.f3");return M(A,3)},R=v.scale=v.__private__.scale=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.scale");return D===_.COMPAT?A*mt:D===_.ADVANCED?A:void 0},re=function(A){return D===_.COMPAT?_i()-A:D===_.ADVANCED?A:void 0},ee=function(A){return R(re(A))};v.__private__.setPrecision=v.setPrecision=function(A){typeof parseInt(A,10)=="number"&&(t=parseInt(A,10))};var ne,K="00000000000000000000000000000000",G=v.__private__.getFileId=function(){return K},te=v.__private__.setFileId=function(A){return K=A!==void 0&&/^[a-fA-F0-9]{32}$/.test(A)?A.toUpperCase():K.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),S!==null&&(kr=new pc(S.userPermissions,S.userPassword,S.ownerPassword,K)),K};v.setFileId=function(A){return te(A),this},v.getFileId=function(){return G()};var W=v.__private__.convertDateToPDFDate=function(A){var $=A.getTimezoneOffset(),xe=$<0?"+":"-",Ce=Math.floor(Math.abs($/60)),ke=Math.abs($%60),Ke=[xe,Q(Ce),"'",Q(ke),"'"].join("");return["D:",A.getFullYear(),Q(A.getMonth()+1),Q(A.getDate()),Q(A.getHours()),Q(A.getMinutes()),Q(A.getSeconds()),Ke].join("")},fe=v.__private__.convertPDFDateToDate=function(A){var $=parseInt(A.substr(2,4),10),xe=parseInt(A.substr(6,2),10)-1,Ce=parseInt(A.substr(8,2),10),ke=parseInt(A.substr(10,2),10),Ke=parseInt(A.substr(12,2),10),rt=parseInt(A.substr(14,2),10);return new Date($,xe,Ce,ke,Ke,rt,0)},le=v.__private__.setCreationDate=function(A){var $;if(A===void 0&&(A=new Date),A instanceof Date)$=W(A);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(A))throw new Error("Invalid argument passed to jsPDF.setCreationDate");$=A}return ne=$},B=v.__private__.getCreationDate=function(A){var $=ne;return A==="jsDate"&&($=fe(ne)),$};v.setCreationDate=function(A){return le(A),this},v.getCreationDate=function(A){return B(A)};var q,Q=v.__private__.padd2=function(A){return("0"+parseInt(A)).slice(-2)},he=v.__private__.padd2Hex=function(A){return("00"+(A=A.toString())).substr(A.length)},ue=0,je=[],Ae=[],ve=0,Pe=[],Te=[],Ye=!1,He=Ae,ut=function(){ue=0,ve=0,Ae=[],je=[],Pe=[],pi=kn(),Ci=kn()};v.__private__.setCustomOutputDestination=function(A){Ye=!0,He=A};var Me=function(A){Ye||(He=A)};v.__private__.resetCustomOutputDestination=function(){Ye=!1,He=Ae};var me=v.__private__.out=function(A){return A=A.toString(),ve+=A.length+1,He.push(A),He},st=v.__private__.write=function(A){return me(arguments.length===1?A.toString():Array.prototype.join.call(arguments," "))},Fe=v.__private__.getArrayBuffer=function(A){for(var $=A.length,xe=new ArrayBuffer($),Ce=new Uint8Array(xe);$--;)Ce[$]=A.charCodeAt($);return xe},we=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];v.__private__.getStandardFonts=function(){return we};var Xe=e.fontSize||16;v.__private__.setFontSize=v.setFontSize=function(A){return Xe=D===_.ADVANCED?A/mt:A,this};var Re,Qe=v.__private__.getFontSize=v.getFontSize=function(){return D===_.COMPAT?Xe:Xe*mt},gt=e.R2L||!1;v.__private__.setR2L=v.setR2L=function(A){return gt=A,this},v.__private__.getR2L=v.getR2L=function(){return gt};var pt,qe=v.__private__.setZoomMode=function(A){var $=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(A))Re=A;else if(isNaN(A)){if($.indexOf(A)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+A+'" is not recognized.');Re=A}else Re=parseInt(A,10)};v.__private__.getZoomMode=function(){return Re};var ct,St=v.__private__.setPageMode=function(A){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(A)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+A+'" is not recognized.');pt=A};v.__private__.getPageMode=function(){return pt};var Ot=v.__private__.setLayoutMode=function(A){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(A)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+A+'" is not recognized.');ct=A};v.__private__.getLayoutMode=function(){return ct},v.__private__.setDisplayMode=v.setDisplayMode=function(A,$,xe){return qe(A),Ot($),St(xe),this};var At={title:"",subject:"",author:"",keywords:"",creator:""};v.__private__.getDocumentProperty=function(A){if(Object.keys(At).indexOf(A)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return At[A]},v.__private__.getDocumentProperties=function(){return At},v.__private__.setDocumentProperties=v.setProperties=v.setDocumentProperties=function(A){for(var $ in At)At.hasOwnProperty($)&&A[$]&&(At[$]=A[$]);return this},v.__private__.setDocumentProperty=function(A,$){if(Object.keys(At).indexOf(A)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return At[A]=$};var qt,mt,yn,Tt,Ne,ft={},xt={},Pt=[],Ft={},Ai={},Qn={},Jt={},Kr=null,Kn=0,Gt=[],en=new Cp(v),fa=e.hotfixes||[],xn={},Jr={},Si=[],It=function A($,xe,Ce,ke,Ke,rt){if(!(this instanceof A))return new A($,xe,Ce,ke,Ke,rt);isNaN($)&&($=1),isNaN(xe)&&(xe=0),isNaN(Ce)&&(Ce=0),isNaN(ke)&&(ke=1),isNaN(Ke)&&(Ke=0),isNaN(rt)&&(rt=0),this._matrix=[$,xe,Ce,ke,Ke,rt]};Object.defineProperty(It.prototype,"sx",{get:function(){return this._matrix[0]},set:function(A){this._matrix[0]=A}}),Object.defineProperty(It.prototype,"shy",{get:function(){return this._matrix[1]},set:function(A){this._matrix[1]=A}}),Object.defineProperty(It.prototype,"shx",{get:function(){return this._matrix[2]},set:function(A){this._matrix[2]=A}}),Object.defineProperty(It.prototype,"sy",{get:function(){return this._matrix[3]},set:function(A){this._matrix[3]=A}}),Object.defineProperty(It.prototype,"tx",{get:function(){return this._matrix[4]},set:function(A){this._matrix[4]=A}}),Object.defineProperty(It.prototype,"ty",{get:function(){return this._matrix[5]},set:function(A){this._matrix[5]=A}}),Object.defineProperty(It.prototype,"a",{get:function(){return this._matrix[0]},set:function(A){this._matrix[0]=A}}),Object.defineProperty(It.prototype,"b",{get:function(){return this._matrix[1]},set:function(A){this._matrix[1]=A}}),Object.defineProperty(It.prototype,"c",{get:function(){return this._matrix[2]},set:function(A){this._matrix[2]=A}}),Object.defineProperty(It.prototype,"d",{get:function(){return this._matrix[3]},set:function(A){this._matrix[3]=A}}),Object.defineProperty(It.prototype,"e",{get:function(){return this._matrix[4]},set:function(A){this._matrix[4]=A}}),Object.defineProperty(It.prototype,"f",{get:function(){return this._matrix[5]},set:function(A){this._matrix[5]=A}}),Object.defineProperty(It.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(It.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(It.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(It.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),It.prototype.join=function(A){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(F).join(A)},It.prototype.multiply=function(A){var $=A.sx*this.sx+A.shy*this.shx,xe=A.sx*this.shy+A.shy*this.sy,Ce=A.shx*this.sx+A.sy*this.shx,ke=A.shx*this.shy+A.sy*this.sy,Ke=A.tx*this.sx+A.ty*this.shx+this.tx,rt=A.tx*this.shy+A.ty*this.sy+this.ty;return new It($,xe,Ce,ke,Ke,rt)},It.prototype.decompose=function(){var A=this.sx,$=this.shy,xe=this.shx,Ce=this.sy,ke=this.tx,Ke=this.ty,rt=Math.sqrt(A*A+$*$),Nt=(A/=rt)*xe+($/=rt)*Ce;xe-=A*Nt,Ce-=$*Nt;var Mt=Math.sqrt(xe*xe+Ce*Ce);return Nt/=Mt,A*(Ce/=Mt)<$*(xe/=Mt)&&(A=-A,$=-$,Nt=-Nt,rt=-rt),{scale:new It(rt,0,0,Mt,0,0),translate:new It(1,0,0,1,ke,Ke),rotate:new It(A,$,-$,A,0,0),skew:new It(1,0,Nt,1,0,0)}},It.prototype.toString=function(A){return this.join(" ")},It.prototype.inversed=function(){var A=this.sx,$=this.shy,xe=this.shx,Ce=this.sy,ke=this.tx,Ke=this.ty,rt=1/(A*Ce-$*xe),Nt=Ce*rt,Mt=-$*rt,Zt=-xe*rt,Qt=A*rt;return new It(Nt,Mt,Zt,Qt,-Nt*ke-Zt*Ke,-Mt*ke-Qt*Ke)},It.prototype.applyToPoint=function(A){var $=A.x*this.sx+A.y*this.shx+this.tx,xe=A.x*this.shy+A.y*this.sy+this.ty;return new fo($,xe)},It.prototype.applyToRectangle=function(A){var $=this.applyToPoint(A),xe=this.applyToPoint(new fo(A.x+A.w,A.y+A.h));return new vl($.x,$.y,xe.x-$.x,xe.y-$.y)},It.prototype.clone=function(){var A=this.sx,$=this.shy,xe=this.shx,Ce=this.sy,ke=this.tx,Ke=this.ty;return new It(A,$,xe,Ce,ke,Ke)},v.Matrix=It;var Zi=v.matrixMult=function(A,$){return $.multiply(A)},$r=new It(1,0,0,1,0,0);v.unitMatrix=v.identityMatrix=$r;var ei=function(A,$){if(!Ai[A]){var xe=($ instanceof Po?"Sh":"P")+(Object.keys(Ft).length+1).toString(10);$.id=xe,Ai[A]=xe,Ft[xe]=$,en.publish("addPattern",$)}};v.ShadingPattern=Po,v.TilingPattern=Il,v.addShadingPattern=function(A,$){return L("addShadingPattern()"),ei(A,$),this},v.beginTilingPattern=function(A){L("beginTilingPattern()"),ho(A.boundingBox[0],A.boundingBox[1],A.boundingBox[2]-A.boundingBox[0],A.boundingBox[3]-A.boundingBox[1],A.matrix)},v.endTilingPattern=function(A,$){L("endTilingPattern()"),$.stream=Te[q].join(`
`),ei(A,$),en.publish("endTilingPattern",$),Si.pop().restore()};var vn=v.__private__.newObject=function(){var A=kn();return Jn(A,!0),A},kn=v.__private__.newObjectDeferred=function(){return ue++,je[ue]=function(){return ve},ue},Jn=function(A,$){return $=typeof $=="boolean"&&$,je[A]=ve,$&&me(A+" 0 obj"),A},wt=v.__private__.newAdditionalObject=function(){var A={objId:kn(),content:""};return Pe.push(A),A},pi=kn(),Ci=kn(),$n=v.__private__.decodeColorString=function(A){var $=A.split(" ");if($.length!==2||$[1]!=="g"&&$[1]!=="G")$.length===5&&($[4]==="k"||$[4]==="K")&&($=[(1-$[0])*(1-$[3]),(1-$[1])*(1-$[3]),(1-$[2])*(1-$[3]),"r"]);else{var xe=parseFloat($[0]);$=[xe,xe,xe,"r"]}for(var Ce="#",ke=0;ke<3;ke++)Ce+=("0"+Math.floor(255*parseFloat($[ke])).toString(16)).slice(-2);return Ce},qr=v.__private__.encodeColorString=function(A){var $;typeof A=="string"&&(A={ch1:A});var xe=A.ch1,Ce=A.ch2,ke=A.ch3,Ke=A.ch4,rt=A.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof xe=="string"&&xe.charAt(0)!=="#"){var Nt=new xy(xe);if(Nt.ok)xe=Nt.toHex();else if(!/^\d*\.?\d*$/.test(xe))throw new Error('Invalid color "'+xe+'" passed to jsPDF.encodeColorString.')}if(typeof xe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(xe)&&(xe="#"+xe[1]+xe[1]+xe[2]+xe[2]+xe[3]+xe[3]),typeof xe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(xe)){var Mt=parseInt(xe.substr(1),16);xe=Mt>>16&255,Ce=Mt>>8&255,ke=255&Mt}if(Ce===void 0||Ke===void 0&&xe===Ce&&Ce===ke)if(typeof xe=="string")$=xe+" "+rt[0];else switch(A.precision){case 2:$=z(xe/255)+" "+rt[0];break;case 3:default:$=k(xe/255)+" "+rt[0]}else if(Ke===void 0||Vn(Ke)==="object"){if(Ke&&!isNaN(Ke.a)&&Ke.a===0)return $=["1.","1.","1.",rt[1]].join(" ");if(typeof xe=="string")$=[xe,Ce,ke,rt[1]].join(" ");else switch(A.precision){case 2:$=[z(xe/255),z(Ce/255),z(ke/255),rt[1]].join(" ");break;default:case 3:$=[k(xe/255),k(Ce/255),k(ke/255),rt[1]].join(" ")}}else if(typeof xe=="string")$=[xe,Ce,ke,Ke,rt[2]].join(" ");else switch(A.precision){case 2:$=[z(xe),z(Ce),z(ke),z(Ke),rt[2]].join(" ");break;case 3:default:$=[k(xe),k(Ce),k(ke),k(Ke),rt[2]].join(" ")}return $},We=v.__private__.getFilters=function(){return f},Je=v.__private__.putStream=function(A){var $=(A=A||{}).data||"",xe=A.filters||We(),Ce=A.alreadyAppliedFilters||[],ke=A.addLength1||!1,Ke=$.length,rt=A.objectId,Nt=function(ci){return ci};if(S!==null&&rt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");S!==null&&(Nt=kr.encryptor(rt,0));var Mt={};xe===!0&&(xe=["FlateEncode"]);var Zt=A.additionalKeyValues||[],Qt=(Mt=Ht.API.processDataByFilters!==void 0?Ht.API.processDataByFilters($,xe):{data:$,reverseChain:[]}).reverseChain+(Array.isArray(Ce)?Ce.join(" "):Ce.toString());if(Mt.data.length!==0&&(Zt.push({key:"Length",value:Mt.data.length}),ke===!0&&Zt.push({key:"Length1",value:Ke})),Qt.length!=0)if(Qt.split("/").length-1==1)Zt.push({key:"Filter",value:Qt});else{Zt.push({key:"Filter",value:"["+Qt+"]"});for(var mn=0;mn<Zt.length;mn+=1)if(Zt[mn].key==="DecodeParms"){for(var cr=[],Pn=0;Pn<Mt.reverseChain.split("/").length-1;Pn+=1)cr.push("null");cr.push(Zt[mn].value),Zt[mn].value="["+cr.join(" ")+"]"}}me("<<");for(var pr=0;pr<Zt.length;pr++)me("/"+Zt[pr].key+" "+Zt[pr].value);me(">>"),Mt.data.length!==0&&(me("stream"),me(Nt(Mt.data)),me("endstream"))},bt=v.__private__.putPage=function(A){var $=A.number,xe=A.data,Ce=A.objId,ke=A.contentsObjId;Jn(Ce,!0),me("<</Type /Page"),me("/Parent "+A.rootDictionaryObjId+" 0 R"),me("/Resources "+A.resourceDictionaryObjId+" 0 R"),me("/MediaBox ["+parseFloat(F(A.mediaBox.bottomLeftX))+" "+parseFloat(F(A.mediaBox.bottomLeftY))+" "+F(A.mediaBox.topRightX)+" "+F(A.mediaBox.topRightY)+"]"),A.cropBox!==null&&me("/CropBox ["+F(A.cropBox.bottomLeftX)+" "+F(A.cropBox.bottomLeftY)+" "+F(A.cropBox.topRightX)+" "+F(A.cropBox.topRightY)+"]"),A.bleedBox!==null&&me("/BleedBox ["+F(A.bleedBox.bottomLeftX)+" "+F(A.bleedBox.bottomLeftY)+" "+F(A.bleedBox.topRightX)+" "+F(A.bleedBox.topRightY)+"]"),A.trimBox!==null&&me("/TrimBox ["+F(A.trimBox.bottomLeftX)+" "+F(A.trimBox.bottomLeftY)+" "+F(A.trimBox.topRightX)+" "+F(A.trimBox.topRightY)+"]"),A.artBox!==null&&me("/ArtBox ["+F(A.artBox.bottomLeftX)+" "+F(A.artBox.bottomLeftY)+" "+F(A.artBox.topRightX)+" "+F(A.artBox.topRightY)+"]"),typeof A.userUnit=="number"&&A.userUnit!==1&&me("/UserUnit "+A.userUnit),en.publish("putPage",{objId:Ce,pageContext:Gt[$],pageNumber:$,page:xe}),me("/Contents "+ke+" 0 R"),me(">>"),me("endobj");var Ke=xe.join(`
`);return D===_.ADVANCED&&(Ke+=`
Q`),Jn(ke,!0),Je({data:Ke,filters:We(),objectId:ke}),me("endobj"),Ce},fn=v.__private__.putPages=function(){var A,$,xe=[];for(A=1;A<=Kn;A++)Gt[A].objId=kn(),Gt[A].contentsObjId=kn();for(A=1;A<=Kn;A++)xe.push(bt({number:A,data:Te[A],objId:Gt[A].objId,contentsObjId:Gt[A].contentsObjId,mediaBox:Gt[A].mediaBox,cropBox:Gt[A].cropBox,bleedBox:Gt[A].bleedBox,trimBox:Gt[A].trimBox,artBox:Gt[A].artBox,userUnit:Gt[A].userUnit,rootDictionaryObjId:pi,resourceDictionaryObjId:Ci}));Jn(pi,!0),me("<</Type /Pages");var Ce="/Kids [";for($=0;$<Kn;$++)Ce+=xe[$]+" 0 R ";me(Ce+"]"),me("/Count "+Kn),me(">>"),me("endobj"),en.publish("postPutPages")},Bi=function(A){en.publish("putFont",{font:A,out:me,newObject:vn,putStream:Je}),A.isAlreadyPutted!==!0&&(A.objectNumber=vn(),me("<<"),me("/Type /Font"),me("/BaseFont /"+xc(A.postScriptName)),me("/Subtype /Type1"),typeof A.encoding=="string"&&me("/Encoding /"+A.encoding),me("/FirstChar 32"),me("/LastChar 255"),me(">>"),me("endobj"))},er=function(){for(var A in ft)ft.hasOwnProperty(A)&&(N===!1||N===!0&&j.hasOwnProperty(A))&&Bi(ft[A])},qn=function(A){A.objectNumber=vn();var $=[];$.push({key:"Type",value:"/XObject"}),$.push({key:"Subtype",value:"/Form"}),$.push({key:"BBox",value:"["+[F(A.x),F(A.y),F(A.x+A.width),F(A.y+A.height)].join(" ")+"]"}),$.push({key:"Matrix",value:"["+A.matrix.toString()+"]"});var xe=A.pages[1].join(`
`);Je({data:xe,additionalKeyValues:$,objectId:A.objectNumber}),me("endobj")},wn=function(){for(var A in xn)xn.hasOwnProperty(A)&&qn(xn[A])},La=function(A,$){var xe,Ce=[],ke=1/($-1);for(xe=0;xe<1;xe+=ke)Ce.push(xe);if(Ce.push(1),A[0].offset!=0){var Ke={offset:0,color:A[0].color};A.unshift(Ke)}if(A[A.length-1].offset!=1){var rt={offset:1,color:A[A.length-1].color};A.push(rt)}for(var Nt="",Mt=0,Zt=0;Zt<Ce.length;Zt++){for(xe=Ce[Zt];xe>A[Mt+1].offset;)Mt++;var Qt=A[Mt].offset,mn=(xe-Qt)/(A[Mt+1].offset-Qt),cr=A[Mt].color,Pn=A[Mt+1].color;Nt+=he(Math.round((1-mn)*cr[0]+mn*Pn[0]).toString(16))+he(Math.round((1-mn)*cr[1]+mn*Pn[1]).toString(16))+he(Math.round((1-mn)*cr[2]+mn*Pn[2]).toString(16))}return Nt.trim()},xi=function(A,$){$||($=21);var xe=vn(),Ce=La(A.colors,$),ke=[];ke.push({key:"FunctionType",value:"0"}),ke.push({key:"Domain",value:"[0.0 1.0]"}),ke.push({key:"Size",value:"["+$+"]"}),ke.push({key:"BitsPerSample",value:"8"}),ke.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ke.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Je({data:Ce,additionalKeyValues:ke,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:xe}),me("endobj"),A.objectNumber=vn(),me("<< /ShadingType "+A.type),me("/ColorSpace /DeviceRGB");var Ke="/Coords ["+F(parseFloat(A.coords[0]))+" "+F(parseFloat(A.coords[1]))+" ";A.type===2?Ke+=F(parseFloat(A.coords[2]))+" "+F(parseFloat(A.coords[3])):Ke+=F(parseFloat(A.coords[2]))+" "+F(parseFloat(A.coords[3]))+" "+F(parseFloat(A.coords[4]))+" "+F(parseFloat(A.coords[5])),me(Ke+="]"),A.matrix&&me("/Matrix ["+A.matrix.toString()+"]"),me("/Function "+xe+" 0 R"),me("/Extend [true true]"),me(">>"),me("endobj")},Ui=function(A,$){var xe=kn(),Ce=vn();$.push({resourcesOid:xe,objectOid:Ce}),A.objectNumber=Ce;var ke=[];ke.push({key:"Type",value:"/Pattern"}),ke.push({key:"PatternType",value:"1"}),ke.push({key:"PaintType",value:"1"}),ke.push({key:"TilingType",value:"1"}),ke.push({key:"BBox",value:"["+A.boundingBox.map(F).join(" ")+"]"}),ke.push({key:"XStep",value:F(A.xStep)}),ke.push({key:"YStep",value:F(A.yStep)}),ke.push({key:"Resources",value:xe+" 0 R"}),A.matrix&&ke.push({key:"Matrix",value:"["+A.matrix.toString()+"]"}),Je({data:A.stream,additionalKeyValues:ke,objectId:A.objectNumber}),me("endobj")},$e=function(A){var $;for($ in Ft)Ft.hasOwnProperty($)&&(Ft[$]instanceof Po?xi(Ft[$]):Ft[$]instanceof Il&&Ui(Ft[$],A))},so=function(A){for(var $ in A.objectNumber=vn(),me("<<"),A)switch($){case"opacity":me("/ca "+z(A[$]));break;case"stroke-opacity":me("/CA "+z(A[$]))}me(">>"),me("endobj")},Gn=function(){var A;for(A in Qn)Qn.hasOwnProperty(A)&&so(Qn[A])},Qi=function(){for(var A in me("/XObject <<"),xn)xn.hasOwnProperty(A)&&xn[A].objectNumber>=0&&me("/"+A+" "+xn[A].objectNumber+" 0 R");en.publish("putXobjectDict"),me(">>")},dn=function(){kr.oid=vn(),me("<<"),me("/Filter /Standard"),me("/V "+kr.v),me("/R "+kr.r),me("/U <"+kr.toHexString(kr.U)+">"),me("/O <"+kr.toHexString(kr.O)+">"),me("/P "+kr.P),me(">>"),me("endobj")},Bt=function(){for(var A in me("/Font <<"),ft)ft.hasOwnProperty(A)&&(N===!1||N===!0&&j.hasOwnProperty(A))&&me("/"+A+" "+ft[A].objectNumber+" 0 R");me(">>")},Nn=function(){if(Object.keys(Ft).length>0){for(var A in me("/Shading <<"),Ft)Ft.hasOwnProperty(A)&&Ft[A]instanceof Po&&Ft[A].objectNumber>=0&&me("/"+A+" "+Ft[A].objectNumber+" 0 R");en.publish("putShadingPatternDict"),me(">>")}},an=function(A){if(Object.keys(Ft).length>0){for(var $ in me("/Pattern <<"),Ft)Ft.hasOwnProperty($)&&Ft[$]instanceof v.TilingPattern&&Ft[$].objectNumber>=0&&Ft[$].objectNumber<A&&me("/"+$+" "+Ft[$].objectNumber+" 0 R");en.publish("putTilingPatternDict"),me(">>")}},ll=function(){if(Object.keys(Qn).length>0){var A;for(A in me("/ExtGState <<"),Qn)Qn.hasOwnProperty(A)&&Qn[A].objectNumber>=0&&me("/"+A+" "+Qn[A].objectNumber+" 0 R");en.publish("putGStateDict"),me(">>")}},or=function(A){Jn(A.resourcesOid,!0),me("<<"),me("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Bt(),Nn(),an(A.objectOid),ll(),Qi(),me(">>"),me("endobj")},oo=function(){var A=[];er(),Gn(),wn(),$e(A),en.publish("putResources"),A.forEach(or),or({resourcesOid:Ci,objectOid:Number.MAX_SAFE_INTEGER}),en.publish("postPutResources")},mr=function(){en.publish("putAdditionalObjects");for(var A=0;A<Pe.length;A++){var $=Pe[A];Jn($.objId,!0),me($.content),me("endobj")}en.publish("postPutAdditionalObjects")},ha=function(A){xt[A.fontName]=xt[A.fontName]||{},xt[A.fontName][A.fontStyle]=A.id},cl=function(A,$,xe,Ce,ke){var Ke={id:"F"+(Object.keys(ft).length+1).toString(10),postScriptName:A,fontName:$,fontStyle:xe,encoding:Ce,isStandardFont:ke||!1,metadata:{}};return en.publish("addFont",{font:Ke,instance:this}),ft[Ke.id]=Ke,ha(Ke),Ke.id},lr=function(A){for(var $=0,xe=we.length;$<xe;$++){var Ce=cl.call(this,A[$][0],A[$][1],A[$][2],we[$][3],!0);N===!1&&(j[Ce]=!0);var ke=A[$][0].split("-");ha({id:Ce,fontName:ke[0],fontStyle:ke[1]||""})}en.publish("addFonts",{fonts:ft,dictionary:xt})},Gr=function(A){return A.foo=function(){try{return A.apply(this,arguments)}catch(Ce){var $=Ce.stack||"";~$.indexOf(" at ")&&($=$.split(" at ")[1]);var xe="Error in function "+$.split(`
`)[0].split("<")[0]+": "+Ce.message;if(!Wt.console)throw new Error(xe);Wt.console.error(xe,Ce),Wt.alert&&alert(xe)}},A.foo.bar=A,A.foo},lo=function(A,$){var xe,Ce,ke,Ke,rt,Nt,Mt,Zt,Qt;if(ke=($=$||{}).sourceEncoding||"Unicode",rt=$.outputEncoding,($.autoencode||rt)&&ft[qt].metadata&&ft[qt].metadata[ke]&&ft[qt].metadata[ke].encoding&&(Ke=ft[qt].metadata[ke].encoding,!rt&&ft[qt].encoding&&(rt=ft[qt].encoding),!rt&&Ke.codePages&&(rt=Ke.codePages[0]),typeof rt=="string"&&(rt=Ke[rt]),rt)){for(Mt=!1,Nt=[],xe=0,Ce=A.length;xe<Ce;xe++)(Zt=rt[A.charCodeAt(xe)])?Nt.push(String.fromCharCode(Zt)):Nt.push(A[xe]),Nt[xe].charCodeAt(0)>>8&&(Mt=!0);A=Nt.join("")}for(xe=A.length;Mt===void 0&&xe!==0;)A.charCodeAt(xe-1)>>8&&(Mt=!0),xe--;if(!Mt)return A;for(Nt=$.noBOM?[]:[254,255],xe=0,Ce=A.length;xe<Ce;xe++){if((Qt=(Zt=A.charCodeAt(xe))>>8)>>8)throw new Error("Character at position "+xe+" of string '"+A+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Nt.push(Qt),Nt.push(Zt-(Qt<<8))}return String.fromCharCode.apply(void 0,Nt)},Mr=v.__private__.pdfEscape=v.pdfEscape=function(A,$){return lo(A,$).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},_n=v.__private__.beginPage=function(A){Te[++Kn]=[],Gt[Kn]={objId:0,contentsObjId:0,userUnit:Number(m),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(A[0]),topRightY:Number(A[1])}},ge(Kn),Me(Te[q])},Rr=function(A,$){var xe,Ce,ke;switch(n=$||n,typeof A=="string"&&(xe=C(A.toLowerCase()),Array.isArray(xe)&&(Ce=xe[0],ke=xe[1])),Array.isArray(A)&&(Ce=A[0]*mt,ke=A[1]*mt),isNaN(Ce)&&(Ce=o[0],ke=o[1]),(Ce>14400||ke>14400)&&(nr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Ce=Math.min(14400,Ce),ke=Math.min(14400,ke)),o=[Ce,ke],n.substr(0,1)){case"l":ke>Ce&&(o=[ke,Ce]);break;case"p":Ce>ke&&(o=[ke,Ce])}_n(o),ti(Ka),me(Ji),Ar!==0&&me(Ar+" J"),fs!==0&&me(fs+" j"),en.publish("addPage",{pageNumber:Kn})},Be=function(A){A>0&&A<=Kn&&(Te.splice(A,1),Gt.splice(A,1),Kn--,q>Kn&&(q=Kn),this.setPage(q))},ge=function(A){A>0&&A<=Kn&&(q=A)},Dt=v.__private__.getNumberOfPages=v.getNumberOfPages=function(){return Te.length-1},Nr=function(A,$,xe){var Ce,ke=void 0;return xe=xe||{},A=A!==void 0?A:ft[qt].fontName,$=$!==void 0?$:ft[qt].fontStyle,Ce=A.toLowerCase(),xt[Ce]!==void 0&&xt[Ce][$]!==void 0?ke=xt[Ce][$]:xt[A]!==void 0&&xt[A][$]!==void 0?ke=xt[A][$]:xe.disableWarning===!1&&nr.warn("Unable to look up font label for font '"+A+"', '"+$+"'. Refer to getFontList() for available fonts."),ke||xe.noFallback||(ke=xt.times[$])==null&&(ke=xt.times.normal),ke},Ei=v.__private__.putInfo=function(){var A=vn(),$=function(Ce){return Ce};for(var xe in S!==null&&($=kr.encryptor(A,0)),me("<<"),me("/Producer ("+Mr($("jsPDF "+Ht.version))+")"),At)At.hasOwnProperty(xe)&&At[xe]&&me("/"+xe.substr(0,1).toUpperCase()+xe.substr(1)+" ("+Mr($(At[xe]))+")");me("/CreationDate ("+Mr($(ne))+")"),me(">>"),me("endobj")},ul=v.__private__.putCatalog=function(A){var $=(A=A||{}).rootDictionaryObjId||pi;switch(vn(),me("<<"),me("/Type /Catalog"),me("/Pages "+$+" 0 R"),Re||(Re="fullwidth"),Re){case"fullwidth":me("/OpenAction [3 0 R /FitH null]");break;case"fullheight":me("/OpenAction [3 0 R /FitV null]");break;case"fullpage":me("/OpenAction [3 0 R /Fit]");break;case"original":me("/OpenAction [3 0 R /XYZ null null 1]");break;default:var xe=""+Re;xe.substr(xe.length-1)==="%"&&(Re=parseInt(Re)/100),typeof Re=="number"&&me("/OpenAction [3 0 R /XYZ null null "+z(Re)+"]")}switch(ct||(ct="continuous"),ct){case"continuous":me("/PageLayout /OneColumn");break;case"single":me("/PageLayout /SinglePage");break;case"two":case"twoleft":me("/PageLayout /TwoColumnLeft");break;case"tworight":me("/PageLayout /TwoColumnRight")}pt&&me("/PageMode /"+pt),en.publish("putCatalog"),me(">>"),me("endobj")},dl=v.__private__.putTrailer=function(){me("trailer"),me("<<"),me("/Size "+(ue+1)),me("/Root "+ue+" 0 R"),me("/Info "+(ue-1)+" 0 R"),S!==null&&me("/Encrypt "+kr.oid+" 0 R"),me("/ID [ <"+K+"> <"+K+"> ]"),me(">>")},Ti=v.__private__.putHeader=function(){me("%PDF-"+O),me("%")},Rt=v.__private__.putXRef=function(){var A="0000000000";me("xref"),me("0 "+(ue+1)),me("0000000000 65535 f ");for(var $=1;$<=ue;$++)typeof je[$]=="function"?me((A+je[$]()).slice(-10)+" 00000 n "):je[$]!==void 0?me((A+je[$]).slice(-10)+" 00000 n "):me("0000000000 00000 n ")},Cn=v.__private__.buildDocument=function(){ut(),Me(Ae),en.publish("buildDocument"),Ti(),fn(),mr(),oo(),S!==null&&dn(),Ei(),ul();var A=ve;return Rt(),dl(),me("startxref"),me(""+A),me("%%EOF"),Me(Te[q]),Ae.join(`
`)},Ds=v.__private__.getBlob=function(A){return new Blob([Fe(A)],{type:"application/pdf"})},co=v.output=v.__private__.output=Gr(function(A,$){switch(typeof($=$||{})=="string"?$={filename:$}:$.filename=$.filename||"generated.pdf",A){case void 0:return Cn();case"save":v.save($.filename);break;case"arraybuffer":return Fe(Cn());case"blob":return Ds(Cn());case"bloburi":case"bloburl":if(Wt.URL!==void 0&&typeof Wt.URL.createObjectURL=="function")return Wt.URL&&Wt.URL.createObjectURL(Ds(Cn()))||void 0;nr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var xe="",Ce=Cn();try{xe=e2(Ce)}catch{xe=e2(unescape(encodeURIComponent(Ce)))}return"data:application/pdf;filename="+$.filename+";base64,"+xe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Wt)==="[object Window]"){var ke="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ke=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';$.pdfObjectUrl&&(ke=$.pdfObjectUrl,Ke="");var rt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ke+'"'+Ke+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify($)+");<\/script></body></html>",Nt=Wt.open();return Nt!==null&&Nt.document.write(rt),Nt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Wt)==="[object Window]"){var Mt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+($.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+$.filename+'" width="500px" height="400px" /></body></html>',Zt=Wt.open();if(Zt!==null){Zt.document.write(Mt);var Qt=this;Zt.document.documentElement.querySelector("#pdfViewer").onload=function(){Zt.document.title=$.filename,Zt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Qt.output("bloburl"))}}return Zt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Wt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var mn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",$)+'"></iframe></body></html>',cr=Wt.open();if(cr!==null&&(cr.document.write(mn),cr.document.title=$.filename),cr||typeof safari>"u")return cr;break;case"datauri":case"dataurl":return Wt.document.location.href=this.output("datauristring",$);default:return null}}),uo=function(A){return Array.isArray(fa)===!0&&fa.indexOf(A)>-1};switch(i){case"pt":mt=1;break;case"mm":mt=72/25.4;break;case"cm":mt=72/2.54;break;case"in":mt=72;break;case"px":mt=uo("px_scaling")==1?.75:96/72;break;case"pc":case"em":mt=12;break;case"ex":mt=6;break;default:if(typeof i!="number")throw new Error("Invalid unit: "+i);mt=i}var kr=null;le(),te();var fl=function(A){return S!==null?kr.encryptor(A,0):function($){return $}},$l=v.__private__.getPageInfo=v.getPageInfo=function(A){if(isNaN(A)||A%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Gt[A].objId,pageNumber:A,pageContext:Gt[A]}},_t=v.__private__.getPageInfoByObjId=function(A){if(isNaN(A)||A%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var $ in Gt)if(Gt[$].objId===A)break;return $l($)},Ls=v.__private__.getCurrentPageInfo=v.getCurrentPageInfo=function(){return{objId:Gt[q].objId,pageNumber:q,pageContext:Gt[q]}};v.addPage=function(){return Rr.apply(this,arguments),this},v.setPage=function(){return ge.apply(this,arguments),Me.call(this,Te[q]),this},v.insertPage=function(A){return this.addPage(),this.movePage(q,A),this},v.movePage=function(A,$){var xe,Ce;if(A>$){xe=Te[A],Ce=Gt[A];for(var ke=A;ke>$;ke--)Te[ke]=Te[ke-1],Gt[ke]=Gt[ke-1];Te[$]=xe,Gt[$]=Ce,this.setPage($)}else if(A<$){xe=Te[A],Ce=Gt[A];for(var Ke=A;Ke<$;Ke++)Te[Ke]=Te[Ke+1],Gt[Ke]=Gt[Ke+1];Te[$]=xe,Gt[$]=Ce,this.setPage($)}return this},v.deletePage=function(){return Be.apply(this,arguments),this},v.__private__.text=v.text=function(A,$,xe,Ce,ke){var Ke,rt,Nt,Mt,Zt,Qt,mn,cr,Pn,pr=(Ce=Ce||{}).scope||this;if(typeof A=="number"&&typeof $=="number"&&(typeof xe=="string"||Array.isArray(xe))){var ci=xe;xe=$,$=A,A=ci}if(arguments[3]instanceof It?(L("The transform parameter of text() with a Matrix value"),Pn=ke):(Nt=arguments[4],Mt=arguments[5],Vn(mn=arguments[3])==="object"&&mn!==null||(typeof Nt=="string"&&(Mt=Nt,Nt=null),typeof mn=="string"&&(Mt=mn,mn=null),typeof mn=="number"&&(Nt=mn,mn=null),Ce={flags:mn,angle:Nt,align:Mt})),isNaN($)||isNaN(xe)||A==null)throw new Error("Invalid arguments passed to jsPDF.text");if(A.length===0)return pr;var xr="",ga=!1,jr=typeof Ce.lineHeightFactor=="number"?Ce.lineHeightFactor:us,zi=pr.internal.scaleFactor;function bi(ir){return ir=ir.split("	").join(Array(Ce.TabLen||9).join(" ")),Mr(ir,mn)}function mo(ir){for(var ar,Fr=ir.concat(),ii=[],ks=Fr.length;ks--;)typeof(ar=Fr.shift())=="string"?ii.push(ar):Array.isArray(ir)&&(ar.length===1||ar[1]===void 0&&ar[2]===void 0)?ii.push(ar[0]):ii.push([ar[0],ar[1],ar[2]]);return ii}function Ii(ir,ar){var Fr;if(typeof ir=="string")Fr=ar(ir)[0];else if(Array.isArray(ir)){for(var ii,ks,cu=ir.concat(),nc=[],Md=cu.length;Md--;)typeof(ii=cu.shift())=="string"?nc.push(ar(ii)[0]):Array.isArray(ii)&&typeof ii[0]=="string"&&(ks=ar(ii[0],ii[1],ii[2]),nc.push([ks[0],ks[1],ks[2]]));Fr=nc}return Fr}var go=!1,Ms=!0;if(typeof A=="string")go=!0;else if(Array.isArray(A)){var Nl=A.concat();rt=[];for(var Rs,Wn=Nl.length;Wn--;)(typeof(Rs=Nl.shift())!="string"||Array.isArray(Rs)&&typeof Rs[0]!="string")&&(Ms=!1);go=Ms}if(go===!1)throw new Error('Type of text must be string or Array. "'+A+'" is not recognized.');typeof A=="string"&&(A=A.match(/[\r?\n]/)?A.split(/\r\n|\r|\n/g):[A]);var po=Xe/pr.internal.scaleFactor,gs=po*(jr-1);switch(Ce.baseline){case"bottom":xe-=gs;break;case"top":xe+=po-gs;break;case"hanging":xe+=po-2*gs;break;case"middle":xe+=po/2-gs}if((Qt=Ce.maxWidth||0)>0&&(typeof A=="string"?A=pr.splitTextToSize(A,Qt):Object.prototype.toString.call(A)==="[object Array]"&&(A=A.reduce(function(ir,ar){return ir.concat(pr.splitTextToSize(ar,Qt))},[]))),Ke={text:A,x:$,y:xe,options:Ce,mutex:{pdfEscape:Mr,activeFontKey:qt,fonts:ft,activeFontSize:Xe}},en.publish("preProcessText",Ke),A=Ke.text,Nt=(Ce=Ke.options).angle,!(Pn instanceof It)&&Nt&&typeof Nt=="number"){Nt*=Math.PI/180,Ce.rotationDirection===0&&(Nt=-Nt),D===_.ADVANCED&&(Nt=-Nt);var ka=Math.cos(Nt),cn=Math.sin(Nt);Pn=new It(ka,cn,-cn,ka,0,0)}else Nt&&Nt instanceof It&&(Pn=Nt);D!==_.ADVANCED||Pn||(Pn=$r),(Zt=Ce.charSpace||Ve)!==void 0&&(xr+=F(R(Zt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(cr=Ce.horizontalScale)!==void 0&&(xr+=F(100*cr)+` Tz
`),Ce.lang;var ni=-1,Z=Ce.renderingMode!==void 0?Ce.renderingMode:Ce.stroke,r=pr.internal.getCurrentPageInfo().pageContext;switch(Z){case 0:case!1:case"fill":ni=0;break;case 1:case!0:case"stroke":ni=1;break;case 2:case"fillThenStroke":ni=2;break;case 3:case"invisible":ni=3;break;case 4:case"fillAndAddForClipping":ni=4;break;case 5:case"strokeAndAddPathForClipping":ni=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ni=6;break;case 7:case"addToPathForClipping":ni=7}var a=r.usedRenderingMode!==void 0?r.usedRenderingMode:-1;ni!==-1?xr+=ni+` Tr
`:a!==-1&&(xr+=`0 Tr
`),ni!==-1&&(r.usedRenderingMode=ni),Mt=Ce.align||"left";var c,u=Xe*jr,d=pr.internal.pageSize.getWidth(),h=ft[qt];Zt=Ce.charSpace||Ve,Qt=Ce.maxWidth||0,mn=Object.assign({autoencode:!0,noBOM:!0},Ce.flags);var b=[],w=function(ir){return pr.getStringUnitWidth(ir,{font:h,charSpace:Zt,fontSize:Xe,doKerning:!1})*Xe/zi};if(Object.prototype.toString.call(A)==="[object Array]"){var T;rt=mo(A),Mt!=="left"&&(c=rt.map(w));var V,X=0;if(Mt==="right"){$-=c[0],A=[],Wn=rt.length;for(var se=0;se<Wn;se++)se===0?(V=Ra($),T=Ja(xe)):(V=R(X-c[se]),T=-u),A.push([rt[se],V,T]),X=c[se]}else if(Mt==="center"){$-=c[0]/2,A=[],Wn=rt.length;for(var be=0;be<Wn;be++)be===0?(V=Ra($),T=Ja(xe)):(V=R((X-c[be])/2),T=-u),A.push([rt[be],V,T]),X=c[be]}else if(Mt==="left"){A=[],Wn=rt.length;for(var Se=0;Se<Wn;Se++)A.push(rt[Se])}else if(Mt==="justify"&&h.encoding==="Identity-H"){A=[],Wn=rt.length,Qt=Qt!==0?Qt:d;for(var Ee=0,Le=0;Le<Wn;Le++)if(T=Le===0?Ja(xe):-u,V=Le===0?Ra($):Ee,Le<Wn-1){var Ge=R((Qt-c[Le])/(rt[Le].split(" ").length-1)),at=rt[Le].split(" ");A.push([at[0]+" ",V,T]),Ee=0;for(var dt=1;dt<at.length;dt++){var ot=(w(at[dt-1]+" "+at[dt])-w(at[dt]))*zi+Ge;dt==at.length-1?A.push([at[dt],ot,0]):A.push([at[dt]+" ",ot,0]),Ee-=ot}}else A.push([rt[Le],V,T]);A.push(["",Ee,0])}else{if(Mt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(A=[],Wn=rt.length,Qt=Qt!==0?Qt:d,Le=0;Le<Wn;Le++)T=Le===0?Ja(xe):-u,V=Le===0?Ra($):0,Le<Wn-1?b.push(F(R((Qt-c[Le])/(rt[Le].split(" ").length-1)))):b.push(0),A.push([rt[Le],V,T])}}var on=typeof Ce.R2L=="boolean"?Ce.R2L:gt;on===!0&&(A=Ii(A,function(ir,ar,Fr){return[ir.split("").reverse().join(""),ar,Fr]})),Ke={text:A,x:$,y:xe,options:Ce,mutex:{pdfEscape:Mr,activeFontKey:qt,fonts:ft,activeFontSize:Xe}},en.publish("postProcessText",Ke),A=Ke.text,ga=Ke.mutex.isHex||!1;var Yt=ft[qt].encoding;Yt!=="WinAnsiEncoding"&&Yt!=="StandardEncoding"||(A=Ii(A,function(ir,ar,Fr){return[bi(ir),ar,Fr]})),rt=mo(A),A=[];for(var _r,ri,Cr,An=0,br=1,Pr=Array.isArray(rt[0])?br:An,Hi="",Pa=function(ir,ar,Fr){var ii="";return Fr instanceof It?(Fr=typeof Ce.angle=="number"?Zi(Fr,new It(1,0,0,1,ir,ar)):Zi(new It(1,0,0,1,ir,ar),Fr),D===_.ADVANCED&&(Fr=Zi(new It(1,0,0,-1,0,0),Fr)),ii=Fr.join(" ")+` Tm
`):ii=F(ir)+" "+F(ar)+` Td
`,ii},$i=0;$i<rt.length;$i++){switch(Hi="",Pr){case br:Cr=(ga?"<":"(")+rt[$i][0]+(ga?">":")"),_r=parseFloat(rt[$i][1]),ri=parseFloat(rt[$i][2]);break;case An:Cr=(ga?"<":"(")+rt[$i]+(ga?">":")"),_r=Ra($),ri=Ja(xe)}b!==void 0&&b[$i]!==void 0&&(Hi=b[$i]+` Tw
`),$i===0?A.push(Hi+Pa(_r,ri,Pn)+Cr):Pr===An?A.push(Hi+Cr):Pr===br&&A.push(Hi+Pa(_r,ri,Pn)+Cr)}A=Pr===An?A.join(` Tj
T* `):A.join(` Tj
`),A+=` Tj
`;var ea=`BT
/`;return ea+=qt+" "+Xe+` Tf
`,ea+=F(Xe*jr)+` TL
`,ea+=ji+`
`,ea+=xr,ea+=A,me(ea+="ET"),j[qt]=!0,pr};var Oa=v.__private__.clip=v.clip=function(A){return me(A==="evenodd"?"W*":"W"),this};v.clipEvenOdd=function(){return Oa("evenodd")},v.__private__.discardPath=v.discardPath=function(){return me("n"),this};var Lt=v.__private__.isValidStyle=function(A){var $=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(A)!==-1&&($=!0),$};v.__private__.setDefaultPathOperation=v.setDefaultPathOperation=function(A){return Lt(A)&&(x=A),this};var ec=v.__private__.getStyle=v.getStyle=function(A){var $=x;switch(A){case"D":case"S":$="S";break;case"F":$="f";break;case"FD":case"DF":$="B";break;case"f":case"f*":case"B":case"B*":$=A}return $},$t=v.close=function(){return me("h"),this};v.stroke=function(){return me("S"),this},v.fill=function(A){return gr("f",A),this},v.fillEvenOdd=function(A){return gr("f*",A),this},v.fillStroke=function(A){return gr("B",A),this},v.fillStrokeEvenOdd=function(A){return gr("B*",A),this};var gr=function(A,$){Vn($)==="object"?tc($,A):me(A)},hl=function(A){A===null||D===_.ADVANCED&&A===void 0||(A=ec(A),me(A))};function ml(A,$,xe,Ce,ke){var Ke=new Il($||this.boundingBox,xe||this.xStep,Ce||this.yStep,this.gState,ke||this.matrix);Ke.stream=this.stream;var rt=A+"$$"+this.cloneIndex+++"$$";return ei(rt,Ke),Ke}var tc=function(A,$){var xe=Ai[A.key],Ce=Ft[xe];if(Ce instanceof Po)me("q"),me(Qa($)),Ce.gState&&v.setGState(Ce.gState),me(A.matrix.toString()+" cm"),me("/"+xe+" sh"),me("Q");else if(Ce instanceof Il){var ke=new It(1,0,0,-1,0,_i());A.matrix&&(ke=ke.multiply(A.matrix||$r),xe=ml.call(Ce,A.key,A.boundingBox,A.xStep,A.yStep,ke).id),me("q"),me("/Pattern cs"),me("/"+xe+" scn"),Ce.gState&&v.setGState(Ce.gState),me($),me("Q")}},Qa=function(A){switch(A){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},gl=v.moveTo=function(A,$){return me(F(R(A))+" "+F(ee($))+" m"),this},ma=v.lineTo=function(A,$){return me(F(R(A))+" "+F(ee($))+" l"),this},Ki=v.curveTo=function(A,$,xe,Ce,ke,Ke){return me([F(R(A)),F(ee($)),F(R(xe)),F(ee(Ce)),F(R(ke)),F(ee(Ke)),"c"].join(" ")),this};v.__private__.line=v.line=function(A,$,xe,Ce,ke){if(isNaN(A)||isNaN($)||isNaN(xe)||isNaN(Ce)||!Lt(ke))throw new Error("Invalid arguments passed to jsPDF.line");return D===_.COMPAT?this.lines([[xe-A,Ce-$]],A,$,[1,1],ke||"S"):this.lines([[xe-A,Ce-$]],A,$,[1,1]).stroke()},v.__private__.lines=v.lines=function(A,$,xe,Ce,ke,Ke){var rt,Nt,Mt,Zt,Qt,mn,cr,Pn,pr,ci,xr,ga;if(typeof A=="number"&&(ga=xe,xe=$,$=A,A=ga),Ce=Ce||[1,1],Ke=Ke||!1,isNaN($)||isNaN(xe)||!Array.isArray(A)||!Array.isArray(Ce)||!Lt(ke)||typeof Ke!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(gl($,xe),rt=Ce[0],Nt=Ce[1],Zt=A.length,ci=$,xr=xe,Mt=0;Mt<Zt;Mt++)(Qt=A[Mt]).length===2?(ci=Qt[0]*rt+ci,xr=Qt[1]*Nt+xr,ma(ci,xr)):(mn=Qt[0]*rt+ci,cr=Qt[1]*Nt+xr,Pn=Qt[2]*rt+ci,pr=Qt[3]*Nt+xr,ci=Qt[4]*rt+ci,xr=Qt[5]*Nt+xr,Ki(mn,cr,Pn,pr,ci,xr));return Ke&&$t(),hl(ke),this},v.path=function(A){for(var $=0;$<A.length;$++){var xe=A[$],Ce=xe.c;switch(xe.op){case"m":gl(Ce[0],Ce[1]);break;case"l":ma(Ce[0],Ce[1]);break;case"c":Ki.apply(this,Ce);break;case"h":$t()}}return this},v.__private__.rect=v.rect=function(A,$,xe,Ce,ke){if(isNaN(A)||isNaN($)||isNaN(xe)||isNaN(Ce)||!Lt(ke))throw new Error("Invalid arguments passed to jsPDF.rect");return D===_.COMPAT&&(Ce=-Ce),me([F(R(A)),F(ee($)),F(R(xe)),F(R(Ce)),"re"].join(" ")),hl(ke),this},v.__private__.triangle=v.triangle=function(A,$,xe,Ce,ke,Ke,rt){if(isNaN(A)||isNaN($)||isNaN(xe)||isNaN(Ce)||isNaN(ke)||isNaN(Ke)||!Lt(rt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[xe-A,Ce-$],[ke-xe,Ke-Ce],[A-ke,$-Ke]],A,$,[1,1],rt,!0),this},v.__private__.roundedRect=v.roundedRect=function(A,$,xe,Ce,ke,Ke,rt){if(isNaN(A)||isNaN($)||isNaN(xe)||isNaN(Ce)||isNaN(ke)||isNaN(Ke)||!Lt(rt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Nt=4/3*(Math.SQRT2-1);return ke=Math.min(ke,.5*xe),Ke=Math.min(Ke,.5*Ce),this.lines([[xe-2*ke,0],[ke*Nt,0,ke,Ke-Ke*Nt,ke,Ke],[0,Ce-2*Ke],[0,Ke*Nt,-ke*Nt,Ke,-ke,Ke],[2*ke-xe,0],[-ke*Nt,0,-ke,-Ke*Nt,-ke,-Ke],[0,2*Ke-Ce],[0,-Ke*Nt,ke*Nt,-Ke,ke,-Ke]],A+ke,$,[1,1],rt,!0),this},v.__private__.ellipse=v.ellipse=function(A,$,xe,Ce,ke){if(isNaN(A)||isNaN($)||isNaN(xe)||isNaN(Ce)||!Lt(ke))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ke=4/3*(Math.SQRT2-1)*xe,rt=4/3*(Math.SQRT2-1)*Ce;return gl(A+xe,$),Ki(A+xe,$-rt,A+Ke,$-Ce,A,$-Ce),Ki(A-Ke,$-Ce,A-xe,$-rt,A-xe,$),Ki(A-xe,$+rt,A-Ke,$+Ce,A,$+Ce),Ki(A+Ke,$+Ce,A+xe,$+rt,A+xe,$),hl(ke),this},v.__private__.circle=v.circle=function(A,$,xe,Ce){if(isNaN(A)||isNaN($)||isNaN(xe)||!Lt(Ce))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(A,$,xe,xe,Ce)},v.setFont=function(A,$,xe){return xe&&($=ae($,xe)),qt=Nr(A,$,{disableWarning:!1}),this};var Os=v.__private__.getFont=v.getFont=function(){return ft[Nr.apply(v,arguments)]};v.__private__.getFontList=v.getFontList=function(){var A,$,xe={};for(A in xt)if(xt.hasOwnProperty(A))for($ in xe[A]=[],xt[A])xt[A].hasOwnProperty($)&&xe[A].push($);return xe},v.addFont=function(A,$,xe,Ce,ke){var Ke=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ke.indexOf(arguments[3])!==-1?ke=arguments[3]:arguments[3]&&Ke.indexOf(arguments[3])==-1&&(xe=ae(xe,Ce)),ke=ke||"Identity-H",cl.call(this,A,$,xe,ke)};var us,Ka=e.lineWidth||.200025,Ma=v.__private__.getLineWidth=v.getLineWidth=function(){return Ka},ti=v.__private__.setLineWidth=v.setLineWidth=function(A){return Ka=A,me(F(R(A))+" w"),this};v.__private__.setLineDash=Ht.API.setLineDash=Ht.API.setLineDashPattern=function(A,$){if(A=A||[],$=$||0,isNaN($)||!Array.isArray(A))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return A=A.map(function(xe){return F(R(xe))}).join(" "),$=F(R($)),me("["+A+"] "+$+" d"),this};var pl=v.__private__.getLineHeight=v.getLineHeight=function(){return Xe*us};v.__private__.getLineHeight=v.getLineHeight=function(){return Xe*us};var xl=v.__private__.setLineHeightFactor=v.setLineHeightFactor=function(A){return typeof(A=A||1.15)=="number"&&(us=A),this},bl=v.__private__.getLineHeightFactor=v.getLineHeightFactor=function(){return us};xl(e.lineHeight);var Ra=v.__private__.getHorizontalCoordinate=function(A){return R(A)},Ja=v.__private__.getVerticalCoordinate=function(A){return D===_.ADVANCED?A:Gt[q].mediaBox.topRightY-Gt[q].mediaBox.bottomLeftY-R(A)},ou=v.__private__.getHorizontalCoordinateString=v.getHorizontalCoordinateString=function(A){return F(Ra(A))},hn=v.__private__.getVerticalCoordinateString=v.getVerticalCoordinateString=function(A){return F(Ja(A))},Ji=e.strokeColor||"0 G";v.__private__.getStrokeColor=v.getDrawColor=function(){return $n(Ji)},v.__private__.setStrokeColor=v.setDrawColor=function(A,$,xe,Ce){return Ji=qr({ch1:A,ch2:$,ch3:xe,ch4:Ce,pdfColorType:"draw",precision:2}),me(Ji),this};var ds=e.fillColor||"0 g";v.__private__.getFillColor=v.getFillColor=function(){return $n(ds)},v.__private__.setFillColor=v.setFillColor=function(A,$,xe,Ce){return ds=qr({ch1:A,ch2:$,ch3:xe,ch4:Ce,pdfColorType:"fill",precision:2}),me(ds),this};var ji=e.textColor||"0 g",lu=v.__private__.getTextColor=v.getTextColor=function(){return $n(ji)};v.__private__.setTextColor=v.setTextColor=function(A,$,xe,Ce){return ji=qr({ch1:A,ch2:$,ch3:xe,ch4:Ce,pdfColorType:"text",precision:3}),this};var Ve=e.charSpace,rn=v.__private__.getCharSpace=v.getCharSpace=function(){return parseFloat(Ve||0)};v.__private__.setCharSpace=v.setCharSpace=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ve=A,this};var Ar=0;v.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},v.__private__.setLineCap=v.setLineCap=function(A){var $=v.CapJoinStyles[A];if($===void 0)throw new Error("Line cap style of '"+A+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ar=$,me($+" J"),this};var fs=0;v.__private__.setLineJoin=v.setLineJoin=function(A){var $=v.CapJoinStyles[A];if($===void 0)throw new Error("Line join style of '"+A+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return fs=$,me($+" j"),this},v.__private__.setLineMiterLimit=v.__private__.setMiterLimit=v.setLineMiterLimit=v.setMiterLimit=function(A){if(A=A||0,isNaN(A))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return me(F(R(A))+" M"),this},v.GState=hd,v.setGState=function(A){(A=typeof A=="string"?Qn[Jt[A]]:yl(null,A)).equals(Kr)||(me("/"+A.id+" gs"),Kr=A)};var yl=function(A,$){if(!A||!Jt[A]){var xe=!1;for(var Ce in Qn)if(Qn.hasOwnProperty(Ce)&&Qn[Ce].equals($)){xe=!0;break}if(xe)$=Qn[Ce];else{var ke="GS"+(Object.keys(Qn).length+1).toString(10);Qn[ke]=$,$.id=ke}return A&&(Jt[A]=$.id),en.publish("addGState",$),$}};v.addGState=function(A,$){return yl(A,$),this},v.saveGraphicsState=function(){return me("q"),Pt.push({key:qt,size:Xe,color:ji}),this},v.restoreGraphicsState=function(){me("Q");var A=Pt.pop();return qt=A.key,Xe=A.size,ji=A.color,Kr=null,this},v.setCurrentTransformationMatrix=function(A){return me(A.toString()+" cm"),this},v.comment=function(A){return me("#"+A),this};var fo=function(A,$){var xe=A||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return xe},set:function(Ke){isNaN(Ke)||(xe=parseFloat(Ke))}});var Ce=$||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Ce},set:function(Ke){isNaN(Ke)||(Ce=parseFloat(Ke))}});var ke="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ke},set:function(Ke){ke=Ke.toString()}}),this},vl=function(A,$,xe,Ce){fo.call(this,A,$),this.type="rect";var ke=xe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ke},set:function(rt){isNaN(rt)||(ke=parseFloat(rt))}});var Ke=Ce||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ke},set:function(rt){isNaN(rt)||(Ke=parseFloat(rt))}}),this},wl=function(){this.page=Kn,this.currentPage=q,this.pages=Te.slice(0),this.pagesContext=Gt.slice(0),this.x=yn,this.y=Tt,this.matrix=Ne,this.width=On(q),this.height=_i(q),this.outputDestination=He,this.id="",this.objectNumber=-1};wl.prototype.restore=function(){Kn=this.page,q=this.currentPage,Gt=this.pagesContext,Te=this.pages,yn=this.x,Tt=this.y,Ne=this.matrix,ms(q,this.width),En(q,this.height),He=this.outputDestination};var ho=function(A,$,xe,Ce,ke){Si.push(new wl),Kn=q=0,Te=[],yn=A,Tt=$,Ne=ke,_n([xe,Ce])},Sr=function(A){if(Jr[A])Si.pop().restore();else{var $=new wl,xe="Xo"+(Object.keys(xn).length+1).toString(10);$.id=xe,Jr[A]=xe,xn[xe]=$,en.publish("addFormObject",$),Si.pop().restore()}};for(var hs in v.beginFormObject=function(A,$,xe,Ce,ke){return ho(A,$,xe,Ce,ke),this},v.endFormObject=function(A){return Sr(A),this},v.doFormObject=function(A,$){var xe=xn[Jr[A]];return me("q"),me($.toString()+" cm"),me("/"+xe.id+" Do"),me("Q"),this},v.getFormObject=function(A){var $=xn[Jr[A]];return{x:$.x,y:$.y,width:$.width,height:$.height,matrix:$.matrix}},v.save=function(A,$){return A=A||"generated.pdf",($=$||{}).returnPromise=$.returnPromise||!1,$.returnPromise===!1?(_l(Ds(Cn()),A),typeof _l.unload=="function"&&Wt.setTimeout&&setTimeout(_l.unload,911),this):new Promise(function(xe,Ce){try{var ke=_l(Ds(Cn()),A);typeof _l.unload=="function"&&Wt.setTimeout&&setTimeout(_l.unload,911),xe(ke)}catch(Ke){Ce(Ke.message)}})},Ht.API)Ht.API.hasOwnProperty(hs)&&(hs==="events"&&Ht.API.events.length?function(A,$){var xe,Ce,ke;for(ke=$.length-1;ke!==-1;ke--)xe=$[ke][0],Ce=$[ke][1],A.subscribe.apply(A,[xe].concat(typeof Ce=="function"?[Ce]:Ce))}(en,Ht.API.events):v[hs]=Ht.API[hs]);var On=v.getPageWidth=function(A){return(Gt[A=A||q].mediaBox.topRightX-Gt[A].mediaBox.bottomLeftX)/mt},ms=v.setPageWidth=function(A,$){Gt[A].mediaBox.topRightX=$*mt+Gt[A].mediaBox.bottomLeftX},_i=v.getPageHeight=function(A){return(Gt[A=A||q].mediaBox.topRightY-Gt[A].mediaBox.bottomLeftY)/mt},En=v.setPageHeight=function(A,$){Gt[A].mediaBox.topRightY=$*mt+Gt[A].mediaBox.bottomLeftY};return v.internal={pdfEscape:Mr,getStyle:ec,getFont:Os,getFontSize:Qe,getCharSpace:rn,getTextColor:lu,getLineHeight:pl,getLineHeightFactor:bl,getLineWidth:Ma,write:st,getHorizontalCoordinate:Ra,getVerticalCoordinate:Ja,getCoordinateString:ou,getVerticalCoordinateString:hn,collections:{},newObject:vn,newAdditionalObject:wt,newObjectDeferred:kn,newObjectDeferredBegin:Jn,getFilters:We,putStream:Je,events:en,scaleFactor:mt,pageSize:{getWidth:function(){return On(q)},setWidth:function(A){ms(q,A)},getHeight:function(){return _i(q)},setHeight:function(A){En(q,A)}},encryptionOptions:S,encryption:kr,getEncryptor:fl,output:co,getNumberOfPages:Dt,pages:Te,out:me,f2:z,f3:k,getPageInfo:$l,getPageInfoByObjId:_t,getCurrentPageInfo:Ls,getPDFVersion:E,Point:fo,Rectangle:vl,Matrix:It,hasHotfix:uo},Object.defineProperty(v.internal.pageSize,"width",{get:function(){return On(q)},set:function(A){ms(q,A)},enumerable:!0,configurable:!0}),Object.defineProperty(v.internal.pageSize,"height",{get:function(){return _i(q)},set:function(A){En(q,A)},enumerable:!0,configurable:!0}),lr.call(v,we),qt="F1",Rr(o,n),en.publish("initialized"),v}pc.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},pc.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},pc.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},pc.prototype.processOwnerPassword=function(e,t){return n2(t2(t).substr(0,5),e)},pc.prototype.encryptor=function(e,t){var n=t2(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(i){return n2(n,i)}},hd.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||Vn(e)!==Vn(this))return!1;var i=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;i++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&i--;return i===0},Ht.API={events:[]},Ht.version="2.5.2";var Dr=Ht.API,fm=1,Jl=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},cc=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},tn=function(e){return e.toFixed(2)},To=function(e){return e.toFixed(5)};Dr.__acroform__={};var da=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},Ep=function(e){return e*fm},bs=function(e){var t=new wy,n=jt.internal.getHeight(e)||0,i=jt.internal.getWidth(e)||0;return t.BBox=[0,0,Number(tn(i)),Number(tn(n))],t},hN=Dr.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},mN=Dr.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},gN=Dr.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},zr=Dr.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return gN(e,t-1)},Hr=Dr.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return hN(e,t-1)},Vr=Dr.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return mN(e,t-1)},pN=Dr.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,i=t.internal.getVerticalCoordinate,o=e[0],l=e[1],f=e[2],m=e[3],p={};return p.lowerLeft_X=n(o)||0,p.lowerLeft_Y=i(l+m)||0,p.upperRight_X=n(o+f)||0,p.upperRight_Y=i(l)||0,[Number(tn(p.lowerLeft_X)),Number(tn(p.lowerLeft_Y)),Number(tn(p.upperRight_X)),Number(tn(p.upperRight_Y))]},xN=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,i=r2(e,n),o=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+o+" "+tn(i.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(i.text),t.push("ET"),t.push("Q"),t.push("EMC");var l=bs(e);return l.scope=e.scope,l.stream=t.join(`
`),l}},r2=function(e,t){var n=e.fontSize===0?e.maxFontSize:e.fontSize,i={text:"",fontSize:""},o=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");o=e.multiline?o.map(function(k){return k.split(`
`)}):o.map(function(k){return[k]});var l=n,f=jt.internal.getHeight(e)||0;f=f<0?-f:f;var m=jt.internal.getWidth(e)||0;m=m<0?-m:m;var p=function(k,R,re){if(k+1<o.length){var ee=R+" "+o[k+1][0];return xf(ee,e,re).width<=m-4}return!1};l++;e:for(;l>0;){t="",l--;var x,S,N=xf("3",e,l).height,j=e.multiline?f-l:(f-N)/2,v=j+=2,O=0,E=0,P=0;if(l<=0){t=`(...) Tj
`,t+="% Width of Text: "+xf(t,e,l=12).width+", FieldWidth:"+m+`
`;break}for(var C="",_=0,D=0;D<o.length;D++)if(o.hasOwnProperty(D)){var U=!1;if(o[D].length!==1&&P!==o[D].length-1){if((N+2)*(_+2)+2>f)continue e;C+=o[D][P],U=!0,E=D,D--}else{C=(C+=o[D][P]+" ").substr(C.length-1)==" "?C.substr(0,C.length-1):C;var Y=parseInt(D),ae=p(Y,C,l),F=D>=o.length-1;if(ae&&!F){C+=" ",P=0;continue}if(ae||F){if(F)E=Y;else if(e.multiline&&(N+2)*(_+2)+2>f)continue e}else{if(!e.multiline||(N+2)*(_+2)+2>f)continue e;E=Y}}for(var L="",M=O;M<=E;M++){var z=o[M];if(e.multiline){if(M===E){L+=z[P]+" ",P=(P+1)%z.length;continue}if(M===O){L+=z[z.length-1]+" ";continue}}L+=z[0]+" "}switch(L=L.substr(L.length-1)==" "?L.substr(0,L.length-1):L,S=xf(L,e,l).width,e.textAlign){case"right":x=m-S-2;break;case"center":x=(m-S)/2;break;case"left":default:x=2}t+=tn(x)+" "+tn(v)+` Td
`,t+="("+Jl(L)+`) Tj
`,t+=-tn(x)+` 0 Td
`,v=-(l+2),S=0,O=U?E:E+1,_++,C=""}break}return i.text=t,i.fontSize=l,i},xf=function(e,t,n){var i=t.scope.internal.getFont(t.fontName,t.fontStyle),o=t.scope.getStringUnitWidth(e,{font:i,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:o}},bN={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},yN=function(e,t){var n={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(i){return i.type===n.type&&i.object===n.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},vN=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var i=n,o=e[n];t.internal.newObjectDeferredBegin(o.objId,!0),Vn(o)==="object"&&typeof o.putStream=="function"&&o.putStream(),delete e[i]}},wN=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(ls.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(bN)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");fm=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new Ny,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var i=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];l.objId=void 0,l.hasAnnotation&&yN(l,n)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(n){(function(i,o){var l=!i;for(var f in i||(o.internal.newObjectDeferredBegin(o.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),o.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),i=i||o.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(i.hasOwnProperty(f)){var m=i[f],p=[],x=m.Rect;if(m.Rect&&(m.Rect=pN(m.Rect,o)),o.internal.newObjectDeferredBegin(m.objId,!0),m.DA=jt.createDefaultAppearanceStream(m),Vn(m)==="object"&&typeof m.getKeyValueListForStream=="function"&&(p=m.getKeyValueListForStream()),m.Rect=x,m.hasAppearanceStream&&!m.appearanceStreamContent){var S=xN(m);p.push({key:"AP",value:"<</N "+S+">>"}),o.internal.acroformPlugin.xForms.push(S)}if(m.appearanceStreamContent){var N="";for(var j in m.appearanceStreamContent)if(m.appearanceStreamContent.hasOwnProperty(j)){var v=m.appearanceStreamContent[j];if(N+="/"+j+" ",N+="<<",Object.keys(v).length>=1||Array.isArray(v)){for(var f in v)if(v.hasOwnProperty(f)){var O=v[f];typeof O=="function"&&(O=O.call(o,m)),N+="/"+f+" "+O+" ",o.internal.acroformPlugin.xForms.indexOf(O)>=0||o.internal.acroformPlugin.xForms.push(O)}}else typeof(O=v)=="function"&&(O=O.call(o,m)),N+="/"+f+" "+O,o.internal.acroformPlugin.xForms.indexOf(O)>=0||o.internal.acroformPlugin.xForms.push(O);N+=">>"}p.push({key:"AP",value:`<<
`+N+">>"})}o.internal.putStream({additionalKeyValues:p,objectId:m.objId}),o.internal.out("endobj")}l&&vN(o.internal.acroformPlugin.xForms,o)})(n,e)}),e.internal.acroformPlugin.isInitialized=!0}},vy=Dr.__acroform__.arrayToPdfArray=function(e,t,n){var i=function(f){return f};if(Array.isArray(e)){for(var o="[",l=0;l<e.length;l++)switch(l!==0&&(o+=" "),Vn(e[l])){case"boolean":case"number":case"object":o+=e[l].toString();break;case"string":e[l].substr(0,1)!=="/"?(t!==void 0&&n&&(i=n.internal.getEncryptor(t)),o+="("+Jl(i(e[l].toString()))+")"):o+=e[l].toString()}return o+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},G0=function(e,t,n){var i=function(o){return o};return t!==void 0&&n&&(i=n.internal.getEncryptor(t)),(e=e||"").toString(),e="("+Jl(i(e))+")"},Ns=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ns.prototype.toString=function(){return this.objId+" 0 R"},Ns.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Ns.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(l){return l!="content"&&l!="appearanceStreamContent"&&l!="scope"&&l!="objId"&&l.substring(0,1)!="_"});for(var n in t)if(Object.getOwnPropertyDescriptor(this,t[n]).configurable===!1){var i=t[n],o=this[i];o&&(Array.isArray(o)?e.push({key:i,value:vy(o,this.objId,this.scope)}):o instanceof Ns?(o.scope=this.scope,e.push({key:i,value:o.objId+" 0 R"})):typeof o!="function"&&e.push({key:i,value:o}))}return e};var wy=function(){Ns.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){e=n.trim()},get:function(){return e||null}})};da(wy,Ns);var Ny=function(){Ns.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var n=function(i){return i};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Jl(n(e))+")"}},set:function(n){e=n}})};da(Ny,Ns);var ls=function e(){Ns.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(C){if(isNaN(C))throw new Error('Invalid value "'+C+'" for attribute F supplied.');t=C}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!zr(t,3)},set:function(C){C?this.F=Hr(t,3):this.F=Vr(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(C){if(isNaN(C))throw new Error('Invalid value "'+C+'" for attribute Ff supplied.');n=C}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(i.length!==0)return i},set:function(C){i=C!==void 0?C:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(C){i[0]=C}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(C){i[1]=C}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(C){i[2]=C}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(C){i[3]=C}});var o="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return o},set:function(C){switch(C){case"/Btn":case"/Tx":case"/Ch":case"/Sig":o=C;break;default:throw new Error('Invalid value "'+C+'" for attribute FT supplied.')}}});var l=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!l||l.length<1){if(this instanceof hh)return;l="FieldObject"+e.FieldNum++}var C=function(_){return _};return this.scope&&(C=this.scope.internal.getEncryptor(this.objId)),"("+Jl(C(l))+")"},set:function(C){l=C.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return l},set:function(C){l=C}});var f="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return f},set:function(C){f=C}});var m="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return m},set:function(C){m=C}});var p=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return p},set:function(C){p=C}});var x=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return x===void 0?50/fm:x},set:function(C){x=C}});var S="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return S},set:function(C){S=C}});var N="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!N||this instanceof hh||this instanceof Ko))return G0(N,this.objId,this.scope)},set:function(C){C=C.toString(),N=C}});var j=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(j)return this instanceof ai?j:G0(j,this.objId,this.scope)},set:function(C){C=C.toString(),j=this instanceof ai?C:C.substr(0,1)==="("?cc(C.substr(1,C.length-2)):cc(C)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ai?cc(j.substr(1,j.length-1)):j},set:function(C){C=C.toString(),j=this instanceof ai?"/"+C:C}});var v=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(v)return v},set:function(C){this.V=C}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof ai?v:G0(v,this.objId,this.scope)},set:function(C){C=C.toString(),v=this instanceof ai?C:C.substr(0,1)==="("?cc(C.substr(1,C.length-2)):cc(C)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ai?cc(v.substr(1,v.length-1)):v},set:function(C){C=C.toString(),v=this instanceof ai?"/"+C:C}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var O,E=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return E},set:function(C){C=!!C,E=C}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(O)return O},set:function(C){O=C}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!zr(this.Ff,1)},set:function(C){C?this.Ff=Hr(this.Ff,1):this.Ff=Vr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!zr(this.Ff,2)},set:function(C){C?this.Ff=Hr(this.Ff,2):this.Ff=Vr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!zr(this.Ff,3)},set:function(C){C?this.Ff=Hr(this.Ff,3):this.Ff=Vr(this.Ff,3)}});var P=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(P!==null)return P},set:function(C){if([0,1,2].indexOf(C)===-1)throw new Error('Invalid value "'+C+'" for attribute Q supplied.');P=C}}),Object.defineProperty(this,"textAlign",{get:function(){var C;switch(P){case 0:default:C="left";break;case 1:C="center";break;case 2:C="right"}return C},configurable:!0,enumerable:!0,set:function(C){switch(C){case"right":case 2:P=2;break;case"center":case 1:P=1;break;case"left":case 0:default:P=0}}})};da(ls,Ns);var Bl=function(){ls.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){e=n}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return vy(t,this.objId,this.scope)},set:function(n){var i,o;o=[],typeof(i=n)=="string"&&(o=function(l,f,m){m||(m=1);for(var p,x=[];p=f.exec(l);)x.push(p[m]);return x}(i,/\((.*?)\)/g)),t=o}}),this.getOptions=function(){return t},this.setOptions=function(n){t=n,this.sort&&t.sort()},this.addOption=function(n){n=(n=n||"").toString(),t.push(n),this.sort&&t.sort()},this.removeOption=function(n,i){for(i=i||!1,n=(n=n||"").toString();t.indexOf(n)!==-1&&(t.splice(t.indexOf(n),1),i!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!zr(this.Ff,18)},set:function(n){n?this.Ff=Hr(this.Ff,18):this.Ff=Vr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!zr(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Hr(this.Ff,19):this.Ff=Vr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!zr(this.Ff,20)},set:function(n){n?(this.Ff=Hr(this.Ff,20),t.sort()):this.Ff=Vr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!zr(this.Ff,22)},set:function(n){n?this.Ff=Hr(this.Ff,22):this.Ff=Vr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!zr(this.Ff,23)},set:function(n){n?this.Ff=Hr(this.Ff,23):this.Ff=Vr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!zr(this.Ff,27)},set:function(n){n?this.Ff=Hr(this.Ff,27):this.Ff=Vr(this.Ff,27)}}),this.hasAppearanceStream=!1};da(Bl,ls);var Ul=function(){Bl.call(this),this.fontName="helvetica",this.combo=!1};da(Ul,Bl);var zl=function(){Ul.call(this),this.combo=!0};da(zl,Ul);var Yu=function(){zl.call(this),this.edit=!0};da(Yu,zl);var ai=function(){ls.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!zr(this.Ff,15)},set:function(n){n?this.Ff=Hr(this.Ff,15):this.Ff=Vr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!zr(this.Ff,16)},set:function(n){n?this.Ff=Hr(this.Ff,16):this.Ff=Vr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!zr(this.Ff,17)},set:function(n){n?this.Ff=Hr(this.Ff,17):this.Ff=Vr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!zr(this.Ff,26)},set:function(n){n?this.Ff=Hr(this.Ff,26):this.Ff=Vr(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(l){return l};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var i,o=[];for(i in o.push("<<"),t)o.push("/"+i+" ("+Jl(n(t[i]))+")");return o.push(">>"),o.join(`
`)}},set:function(n){Vn(n)==="object"&&(t=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(n){typeof n=="string"&&(t.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(n){e="/"+n}})};da(ai,ls);var Xu=function(){ai.call(this),this.pushButton=!0};da(Xu,ai);var Hl=function(){ai.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};da(Hl,ai);var hh=function(){var e,t;ls.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(o){e=o}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(o){t=o}});var n,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var o=function(m){return m};this.scope&&(o=this.scope.internal.getEncryptor(this.objId));var l,f=[];for(l in f.push("<<"),i)f.push("/"+l+" ("+Jl(o(i[l]))+")");return f.push(">>"),f.join(`
`)},set:function(o){Vn(o)==="object"&&(i=o)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(o){typeof o=="string"&&(i.CA=o)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(o){n=o}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(o){n="/"+o}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=jt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};da(hh,ls),Hl.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},Hl.prototype.createOption=function(e){var t=new hh;return t.Parent=this,t.optionName=e,this.Kids.push(t),NN.call(this.scope,t),t};var Zu=function(){ai.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=jt.CheckBox.createAppearanceStream()};da(Zu,ai);var Ko=function(){ls.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!zr(this.Ff,13)},set:function(t){t?this.Ff=Hr(this.Ff,13):this.Ff=Vr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!zr(this.Ff,21)},set:function(t){t?this.Ff=Hr(this.Ff,21):this.Ff=Vr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!zr(this.Ff,23)},set:function(t){t?this.Ff=Hr(this.Ff,23):this.Ff=Vr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!zr(this.Ff,24)},set:function(t){t?this.Ff=Hr(this.Ff,24):this.Ff=Vr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!zr(this.Ff,25)},set:function(t){t?this.Ff=Hr(this.Ff,25):this.Ff=Vr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!zr(this.Ff,26)},set:function(t){t?this.Ff=Hr(this.Ff,26):this.Ff=Vr(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};da(Ko,ls);var Qu=function(){Ko.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!zr(this.Ff,14)},set:function(e){e?this.Ff=Hr(this.Ff,14):this.Ff=Vr(this.Ff,14)}}),this.password=!0};da(Qu,Ko);var jt={CheckBox:{createAppearanceStream:function(){return{N:{On:jt.CheckBox.YesNormal},D:{On:jt.CheckBox.YesPushDown,Off:jt.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=bs(e);t.scope=e.scope;var n=[],i=e.scope.internal.getFont(e.fontName,e.fontStyle).id,o=e.scope.__private__.encodeColorString(e.color),l=r2(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+tn(jt.internal.getWidth(e))+" "+tn(jt.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+i+" "+tn(l.fontSize)+" Tf "+o),n.push("BT"),n.push(l.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join(`
`),t},YesNormal:function(e){var t=bs(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),o=[],l=jt.internal.getHeight(e),f=jt.internal.getWidth(e),m=r2(e,e.caption);return o.push("1 g"),o.push("0 0 "+tn(f)+" "+tn(l)+" re"),o.push("f"),o.push("q"),o.push("0 0 1 rg"),o.push("0 0 "+tn(f-1)+" "+tn(l-1)+" re"),o.push("W"),o.push("n"),o.push("0 g"),o.push("BT"),o.push("/"+n+" "+tn(m.fontSize)+" Tf "+i),o.push(m.text),o.push("ET"),o.push("Q"),t.stream=o.join(`
`),t},OffPushDown:function(e){var t=bs(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+tn(jt.internal.getWidth(e))+" "+tn(jt.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:jt.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=jt.RadioButton.Circle.YesNormal,t.D[e]=jt.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=bs(e);t.scope=e.scope;var n=[],i=jt.internal.getWidth(e)<=jt.internal.getHeight(e)?jt.internal.getWidth(e)/4:jt.internal.getHeight(e)/4;i=Number((.9*i).toFixed(5));var o=jt.internal.Bezier_C,l=Number((i*o).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+To(jt.internal.getWidth(e)/2)+" "+To(jt.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+l+" "+l+" "+i+" 0 "+i+" c"),n.push("-"+l+" "+i+" -"+i+" "+l+" -"+i+" 0 c"),n.push("-"+i+" -"+l+" -"+l+" -"+i+" 0 -"+i+" c"),n.push(l+" -"+i+" "+i+" -"+l+" "+i+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=bs(e);t.scope=e.scope;var n=[],i=jt.internal.getWidth(e)<=jt.internal.getHeight(e)?jt.internal.getWidth(e)/4:jt.internal.getHeight(e)/4;i=Number((.9*i).toFixed(5));var o=Number((2*i).toFixed(5)),l=Number((o*jt.internal.Bezier_C).toFixed(5)),f=Number((i*jt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+To(jt.internal.getWidth(e)/2)+" "+To(jt.internal.getHeight(e)/2)+" cm"),n.push(o+" 0 m"),n.push(o+" "+l+" "+l+" "+o+" 0 "+o+" c"),n.push("-"+l+" "+o+" -"+o+" "+l+" -"+o+" 0 c"),n.push("-"+o+" -"+l+" -"+l+" -"+o+" 0 -"+o+" c"),n.push(l+" -"+o+" "+o+" -"+l+" "+o+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+To(jt.internal.getWidth(e)/2)+" "+To(jt.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+f+" "+f+" "+i+" 0 "+i+" c"),n.push("-"+f+" "+i+" -"+i+" "+f+" -"+i+" 0 c"),n.push("-"+i+" -"+f+" -"+f+" -"+i+" 0 -"+i+" c"),n.push(f+" -"+i+" "+i+" -"+f+" "+i+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=bs(e);t.scope=e.scope;var n=[],i=jt.internal.getWidth(e)<=jt.internal.getHeight(e)?jt.internal.getWidth(e)/4:jt.internal.getHeight(e)/4;i=Number((.9*i).toFixed(5));var o=Number((2*i).toFixed(5)),l=Number((o*jt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+To(jt.internal.getWidth(e)/2)+" "+To(jt.internal.getHeight(e)/2)+" cm"),n.push(o+" 0 m"),n.push(o+" "+l+" "+l+" "+o+" 0 "+o+" c"),n.push("-"+l+" "+o+" -"+o+" "+l+" -"+o+" 0 c"),n.push("-"+o+" -"+l+" -"+l+" -"+o+" 0 -"+o+" c"),n.push(l+" -"+o+" "+o+" -"+l+" "+o+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:jt.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=jt.RadioButton.Cross.YesNormal,t.D[e]=jt.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=bs(e);t.scope=e.scope;var n=[],i=jt.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+tn(jt.internal.getWidth(e)-2)+" "+tn(jt.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(tn(i.x1.x)+" "+tn(i.x1.y)+" m"),n.push(tn(i.x2.x)+" "+tn(i.x2.y)+" l"),n.push(tn(i.x4.x)+" "+tn(i.x4.y)+" m"),n.push(tn(i.x3.x)+" "+tn(i.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=bs(e);t.scope=e.scope;var n=jt.internal.calculateCross(e),i=[];return i.push("0.749023 g"),i.push("0 0 "+tn(jt.internal.getWidth(e))+" "+tn(jt.internal.getHeight(e))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+tn(jt.internal.getWidth(e)-2)+" "+tn(jt.internal.getHeight(e)-2)+" re"),i.push("W"),i.push("n"),i.push(tn(n.x1.x)+" "+tn(n.x1.y)+" m"),i.push(tn(n.x2.x)+" "+tn(n.x2.y)+" l"),i.push(tn(n.x4.x)+" "+tn(n.x4.y)+" m"),i.push(tn(n.x3.x)+" "+tn(n.x3.y)+" l"),i.push("s"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(e){var t=bs(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+tn(jt.internal.getWidth(e))+" "+tn(jt.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};jt.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=jt.internal.getWidth(e),n=jt.internal.getHeight(e),i=Math.min(t,n);return{x1:{x:(t-i)/2,y:(n-i)/2+i},x2:{x:(t-i)/2+i,y:(n-i)/2},x3:{x:(t-i)/2,y:(n-i)/2},x4:{x:(t-i)/2+i,y:(n-i)/2+i}}}},jt.internal.getWidth=function(e){var t=0;return Vn(e)==="object"&&(t=Ep(e.Rect[2])),t},jt.internal.getHeight=function(e){var t=0;return Vn(e)==="object"&&(t=Ep(e.Rect[3])),t};var NN=Dr.addField=function(e){if(wN(this,e),!(e instanceof ls))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Dr.AcroFormChoiceField=Bl,Dr.AcroFormListBox=Ul,Dr.AcroFormComboBox=zl,Dr.AcroFormEditBox=Yu,Dr.AcroFormButton=ai,Dr.AcroFormPushButton=Xu,Dr.AcroFormRadioButton=Hl,Dr.AcroFormCheckBox=Zu,Dr.AcroFormTextField=Ko,Dr.AcroFormPasswordField=Qu,Dr.AcroFormAppearance=jt,Dr.AcroForm={ChoiceField:Bl,ListBox:Ul,ComboBox:zl,EditBox:Yu,Button:ai,PushButton:Xu,RadioButton:Hl,CheckBox:Zu,TextField:Ko,PasswordField:Qu,Appearance:jt},Ht.AcroForm={ChoiceField:Bl,ListBox:Ul,ComboBox:zl,EditBox:Yu,Button:ai,PushButton:Xu,RadioButton:Hl,CheckBox:Zu,TextField:Ko,PasswordField:Qu,Appearance:jt};var AN=Ht.AcroForm;function Ay(e){return e.reduce(function(t,n,i){return t[n]=i,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=e.__addimage__.getImageFileTypeByImageData=function(k,R){var re,ee,ne,K,G,te=t;if((R=R||t)==="RGBA"||k.data!==void 0&&k.data instanceof Uint8ClampedArray&&"height"in k&&"width"in k)return"RGBA";if(ae(k))for(G in n)for(ne=n[G],re=0;re<ne.length;re+=1){for(K=!0,ee=0;ee<ne[re].length;ee+=1)if(ne[re][ee]!==void 0&&ne[re][ee]!==k[ee]){K=!1;break}if(K===!0){te=G;break}}else for(G in n)for(ne=n[G],re=0;re<ne.length;re+=1){for(K=!0,ee=0;ee<ne[re].length;ee+=1)if(ne[re][ee]!==void 0&&ne[re][ee]!==k.charCodeAt(ee)){K=!1;break}if(K===!0){te=G;break}}return te===t&&R!==t&&(te=R),te},o=function k(R){for(var re=this.internal.write,ee=this.internal.putStream,ne=(0,this.internal.getFilters)();ne.indexOf("FlateEncode")!==-1;)ne.splice(ne.indexOf("FlateEncode"),1);R.objectId=this.internal.newObject();var K=[];if(K.push({key:"Type",value:"/XObject"}),K.push({key:"Subtype",value:"/Image"}),K.push({key:"Width",value:R.width}),K.push({key:"Height",value:R.height}),R.colorSpace===P.INDEXED?K.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(R.palette.length/3-1)+" "+("sMask"in R&&R.sMask!==void 0?R.objectId+2:R.objectId+1)+" 0 R]"}):(K.push({key:"ColorSpace",value:"/"+R.colorSpace}),R.colorSpace===P.DEVICE_CMYK&&K.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),K.push({key:"BitsPerComponent",value:R.bitsPerComponent}),"decodeParameters"in R&&R.decodeParameters!==void 0&&K.push({key:"DecodeParms",value:"<<"+R.decodeParameters+">>"}),"transparency"in R&&Array.isArray(R.transparency)){for(var G="",te=0,W=R.transparency.length;te<W;te++)G+=R.transparency[te]+" "+R.transparency[te]+" ";K.push({key:"Mask",value:"["+G+"]"})}R.sMask!==void 0&&K.push({key:"SMask",value:R.objectId+1+" 0 R"});var fe=R.filter!==void 0?["/"+R.filter]:void 0;if(ee({data:R.data,additionalKeyValues:K,alreadyAppliedFilters:fe,objectId:R.objectId}),re("endobj"),"sMask"in R&&R.sMask!==void 0){var le="/Predictor "+R.predictor+" /Colors 1 /BitsPerComponent "+R.bitsPerComponent+" /Columns "+R.width,B={width:R.width,height:R.height,colorSpace:"DeviceGray",bitsPerComponent:R.bitsPerComponent,decodeParameters:le,data:R.sMask};"filter"in R&&(B.filter=R.filter),k.call(this,B)}if(R.colorSpace===P.INDEXED){var q=this.internal.newObject();ee({data:L(new Uint8Array(R.palette)),objectId:q}),re("endobj")}},l=function(){var k=this.internal.collections.addImage_images;for(var R in k)o.call(this,k[R])},f=function(){var k,R=this.internal.collections.addImage_images,re=this.internal.write;for(var ee in R)re("/I"+(k=R[ee]).index,k.objectId,"0","R")},m=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",l),this.internal.events.subscribe("putXobjectDict",f))},p=function(){var k=this.internal.collections.addImage_images;return m.call(this),k},x=function(){return Object.keys(this.internal.collections.addImage_images).length},S=function(k){return typeof e["process"+k.toUpperCase()]=="function"},N=function(k){return Vn(k)==="object"&&k.nodeType===1},j=function(k,R){if(k.nodeName==="IMG"&&k.hasAttribute("src")){var re=""+k.getAttribute("src");if(re.indexOf("data:image/")===0)return Wu(unescape(re).split("base64,").pop());var ee=e.loadFile(re,!0);if(ee!==void 0)return ee}if(k.nodeName==="CANVAS"){if(k.width===0||k.height===0)throw new Error("Given canvas must have data. Canvas width: "+k.width+", height: "+k.height);var ne;switch(R){case"PNG":ne="image/png";break;case"WEBP":ne="image/webp";break;case"JPEG":case"JPG":default:ne="image/jpeg"}return Wu(k.toDataURL(ne,1).split("base64,").pop())}},v=function(k){var R=this.internal.collections.addImage_images;if(R){for(var re in R)if(k===R[re].alias)return R[re]}},O=function(k,R,re){return k||R||(k=-96,R=-96),k<0&&(k=-1*re.width*72/k/this.internal.scaleFactor),R<0&&(R=-1*re.height*72/R/this.internal.scaleFactor),k===0&&(k=R*re.width/re.height),R===0&&(R=k*re.height/re.width),[k,R]},E=function(k,R,re,ee,ne,K){var G=O.call(this,re,ee,ne),te=this.internal.getCoordinateString,W=this.internal.getVerticalCoordinateString,fe=p.call(this);if(re=G[0],ee=G[1],fe[ne.index]=ne,K){K*=Math.PI/180;var le=Math.cos(K),B=Math.sin(K),q=function(he){return he.toFixed(4)},Q=[q(le),q(B),q(-1*B),q(le),0,0,"cm"]}this.internal.write("q"),K?(this.internal.write([1,"0","0",1,te(k),W(R+ee),"cm"].join(" ")),this.internal.write(Q.join(" ")),this.internal.write([te(re),"0","0",te(ee),"0","0","cm"].join(" "))):this.internal.write([te(re),"0","0",te(ee),te(k),W(R+ee),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ne.index+" Do"),this.internal.write("Q")},P=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var C=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},_=e.__addimage__.sHashCode=function(k){var R,re,ee=0;if(typeof k=="string")for(re=k.length,R=0;R<re;R++)ee=(ee<<5)-ee+k.charCodeAt(R),ee|=0;else if(ae(k))for(re=k.byteLength/2,R=0;R<re;R++)ee=(ee<<5)-ee+k[R],ee|=0;return ee},D=e.__addimage__.validateStringAsBase64=function(k){(k=k||"").toString().trim();var R=!0;return k.length===0&&(R=!1),k.length%4!=0&&(R=!1),/^[A-Za-z0-9+/]+$/.test(k.substr(0,k.length-2))===!1&&(R=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(k.substr(-2))===!1&&(R=!1),R},U=e.__addimage__.extractImageFromDataUrl=function(k){var R=(k=k||"").split("base64,"),re=null;if(R.length===2){var ee=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(R[0]);Array.isArray(ee)&&(re={mimeType:ee[1],charset:ee[2],data:R[1]})}return re},Y=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(k){return Y()&&k instanceof ArrayBuffer};var ae=e.__addimage__.isArrayBufferView=function(k){return Y()&&typeof Uint32Array<"u"&&(k instanceof Int8Array||k instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&k instanceof Uint8ClampedArray||k instanceof Int16Array||k instanceof Uint16Array||k instanceof Int32Array||k instanceof Uint32Array||k instanceof Float32Array||k instanceof Float64Array)},F=e.__addimage__.binaryStringToUint8Array=function(k){for(var R=k.length,re=new Uint8Array(R),ee=0;ee<R;ee++)re[ee]=k.charCodeAt(ee);return re},L=e.__addimage__.arrayBufferToBinaryString=function(k){for(var R="",re=ae(k)?k:new Uint8Array(k),ee=0;ee<re.length;ee+=8192)R+=String.fromCharCode.apply(null,re.subarray(ee,ee+8192));return R};e.addImage=function(){var k,R,re,ee,ne,K,G,te,W;if(typeof arguments[1]=="number"?(R=t,re=arguments[1],ee=arguments[2],ne=arguments[3],K=arguments[4],G=arguments[5],te=arguments[6],W=arguments[7]):(R=arguments[1],re=arguments[2],ee=arguments[3],ne=arguments[4],K=arguments[5],G=arguments[6],te=arguments[7],W=arguments[8]),Vn(k=arguments[0])==="object"&&!N(k)&&"imageData"in k){var fe=k;k=fe.imageData,R=fe.format||R||t,re=fe.x||re||0,ee=fe.y||ee||0,ne=fe.w||fe.width||ne,K=fe.h||fe.height||K,G=fe.alias||G,te=fe.compression||te,W=fe.rotation||fe.angle||W}var le=this.internal.getFilters();if(te===void 0&&le.indexOf("FlateEncode")!==-1&&(te="SLOW"),isNaN(re)||isNaN(ee))throw new Error("Invalid coordinates passed to jsPDF.addImage");m.call(this);var B=M.call(this,k,R,G,te);return E.call(this,re,ee,ne,K,B,W),this};var M=function(k,R,re,ee){var ne,K,G;if(typeof k=="string"&&i(k)===t){k=unescape(k);var te=z(k,!1);(te!==""||(te=e.loadFile(k,!0))!==void 0)&&(k=te)}if(N(k)&&(k=j(k,R)),R=i(k,R),!S(R))throw new Error("addImage does not support files of type '"+R+"', please ensure that a plugin for '"+R+"' support is added.");if(((G=re)==null||G.length===0)&&(re=function(W){return typeof W=="string"||ae(W)?_(W):ae(W.data)?_(W.data):null}(k)),(ne=v.call(this,re))||(Y()&&(k instanceof Uint8Array||R==="RGBA"||(K=k,k=F(k))),ne=this["process"+R.toUpperCase()](k,x.call(this),re,function(W){return W&&typeof W=="string"&&(W=W.toUpperCase()),W in e.image_compression?W:C.NONE}(ee),K)),!ne)throw new Error("An unknown error occurred whilst processing the image.");return ne},z=e.__addimage__.convertBase64ToBinaryString=function(k,R){var re;R=typeof R!="boolean"||R;var ee,ne="";if(typeof k=="string"){ee=(re=U(k))!==null?re.data:k;try{ne=Wu(ee)}catch(K){if(R)throw D(ee)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+K.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ne};e.getImageProperties=function(k){var R,re,ee="";if(N(k)&&(k=j(k)),typeof k=="string"&&i(k)===t&&((ee=z(k,!1))===""&&(ee=e.loadFile(k)||""),k=ee),re=i(k),!S(re))throw new Error("addImage does not support files of type '"+re+"', please ensure that a plugin for '"+re+"' support is added.");if(!Y()||k instanceof Uint8Array||(k=F(k)),!(R=this["process"+re.toUpperCase()](k)))throw new Error("An unknown error occurred whilst processing the image");return R.fileType=re,R}})(Ht.API),function(e){var t=function(n){if(n!==void 0&&n!="")return!0};Ht.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(n){for(var i,o,l,f=this.internal.getCoordinateString,m=this.internal.getVerticalCoordinateString,p=this.internal.getPageInfoByObjId(n.objId),x=n.pageContext.annotations,S=!1,N=0;N<x.length&&!S;N++)switch((i=x[N]).type){case"link":(t(i.options.url)||t(i.options.pageNumber))&&(S=!0);break;case"reference":case"text":case"freetext":S=!0}if(S!=0){this.internal.write("/Annots [");for(var j=0;j<x.length;j++){i=x[j];var v=this.internal.pdfEscape,O=this.internal.getEncryptor(n.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var E=this.internal.newAdditionalObject(),P=this.internal.newAdditionalObject(),C=this.internal.getEncryptor(E.objId),_=i.title||"Note";l="<</Type /Annot /Subtype /Text "+(o="/Rect ["+f(i.bounds.x)+" "+m(i.bounds.y+i.bounds.h)+" "+f(i.bounds.x+i.bounds.w)+" "+m(i.bounds.y)+"] ")+"/Contents ("+v(C(i.contents))+")",l+=" /Popup "+P.objId+" 0 R",l+=" /P "+p.objId+" 0 R",l+=" /T ("+v(C(_))+") >>",E.content=l;var D=E.objId+" 0 R";l="<</Type /Annot /Subtype /Popup "+(o="/Rect ["+f(i.bounds.x+30)+" "+m(i.bounds.y+i.bounds.h)+" "+f(i.bounds.x+i.bounds.w+30)+" "+m(i.bounds.y)+"] ")+" /Parent "+D,i.open&&(l+=" /Open true"),l+=" >>",P.content=l,this.internal.write(E.objId,"0 R",P.objId,"0 R");break;case"freetext":o="/Rect ["+f(i.bounds.x)+" "+m(i.bounds.y)+" "+f(i.bounds.x+i.bounds.w)+" "+m(i.bounds.y+i.bounds.h)+"] ";var U=i.color||"#000000";l="<</Type /Annot /Subtype /FreeText "+o+"/Contents ("+v(O(i.contents))+")",l+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+U+")",l+=" /Border [0 0 0]",l+=" >>",this.internal.write(l);break;case"link":if(i.options.name){var Y=this.annotations._nameMap[i.options.name];i.options.pageNumber=Y.page,i.options.top=Y.y}else i.options.top||(i.options.top=0);if(o="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",l="",i.options.url)l="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /A <</S /URI /URI ("+v(O(i.options.url))+") >>";else if(i.options.pageNumber)switch(l="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":l+=" /Fit]";break;case"FitH":l+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,l+=" /FitV "+i.options.left+"]";break;case"XYZ":default:var ae=m(i.options.top);i.options.left=i.options.left||0,i.options.zoom===void 0&&(i.options.zoom=0),l+=" /XYZ "+i.options.left+" "+ae+" "+i.options.zoom+"]"}l!=""&&(l+=" >>",this.internal.write(l))}}this.internal.write("]")}}]),e.createAnnotation=function(n){var i=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":i.pageContext.annotations.push(n)}},e.link=function(n,i,o,l,f){var m=this.internal.getCurrentPageInfo(),p=this.internal.getCoordinateString,x=this.internal.getVerticalCoordinateString;m.pageContext.annotations.push({finalBounds:{x:p(n),y:x(i),w:p(n+o),h:x(i+l)},options:f,type:"link"})},e.textWithLink=function(n,i,o,l){var f,m,p=this.getTextWidth(n),x=this.internal.getLineHeight()/this.internal.scaleFactor;if(l.maxWidth!==void 0){m=l.maxWidth;var S=this.splitTextToSize(n,m).length;f=Math.ceil(x*S)}else m=p,f=x;return this.text(n,i,o,l),o+=.2*x,l.align==="center"&&(i-=p/2),l.align==="right"&&(i-=p),this.link(i,o-x,m,f,l),p},e.getTextWidth=function(n){var i=this.internal.getFontSize();return this.getStringUnitWidth(n)*i/this.internal.scaleFactor}}(Ht.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},o=[1570,1571,1573,1575];e.__arabicParser__={};var l=e.__arabicParser__.isInArabicSubstitutionA=function(E){return t[E.charCodeAt(0)]!==void 0},f=e.__arabicParser__.isArabicLetter=function(E){return typeof E=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(E)},m=e.__arabicParser__.isArabicEndLetter=function(E){return f(E)&&l(E)&&t[E.charCodeAt(0)].length<=2},p=e.__arabicParser__.isArabicAlfLetter=function(E){return f(E)&&o.indexOf(E.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(E){return f(E)&&l(E)&&t[E.charCodeAt(0)].length>=1};var x=e.__arabicParser__.arabicLetterHasFinalForm=function(E){return f(E)&&l(E)&&t[E.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(E){return f(E)&&l(E)&&t[E.charCodeAt(0)].length>=3};var S=e.__arabicParser__.arabicLetterHasMedialForm=function(E){return f(E)&&l(E)&&t[E.charCodeAt(0)].length==4},N=e.__arabicParser__.resolveLigatures=function(E){var P=0,C=n,_="",D=0;for(P=0;P<E.length;P+=1)C[E.charCodeAt(P)]!==void 0?(D++,typeof(C=C[E.charCodeAt(P)])=="number"&&(_+=String.fromCharCode(C),C=n,D=0),P===E.length-1&&(C=n,_+=E.charAt(P-(D-1)),P-=D-1,D=0)):(C=n,_+=E.charAt(P-D),P-=D,D=0);return _};e.__arabicParser__.isArabicDiacritic=function(E){return E!==void 0&&i[E.charCodeAt(0)]!==void 0};var j=e.__arabicParser__.getCorrectForm=function(E,P,C){return f(E)?l(E)===!1?-1:!x(E)||!f(P)&&!f(C)||!f(C)&&m(P)||m(E)&&!f(P)||m(E)&&p(P)||m(E)&&m(P)?0:S(E)&&f(P)&&!m(P)&&f(C)&&x(C)?3:m(E)||!f(C)?1:2:-1},v=function(E){var P=0,C=0,_=0,D="",U="",Y="",ae=(E=E||"").split("\\s+"),F=[];for(P=0;P<ae.length;P+=1){for(F.push(""),C=0;C<ae[P].length;C+=1)D=ae[P][C],U=ae[P][C-1],Y=ae[P][C+1],f(D)?(_=j(D,U,Y),F[P]+=_!==-1?String.fromCharCode(t[D.charCodeAt(0)][_]):D):F[P]+=D;F[P]=N(F[P])}return F.join(" ")},O=e.__arabicParser__.processArabic=e.processArabic=function(){var E,P=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,C=[];if(Array.isArray(P)){var _=0;for(C=[],_=0;_<P.length;_+=1)Array.isArray(P[_])?C.push([v(P[_][0]),P[_][1],P[_][2]]):C.push([v(P[_])]);E=C}else E=v(P);return typeof arguments[0]=="string"?E:(arguments[0].text=E,arguments[0])};e.events.push(["preProcessText",O])}(Ht.API),Ht.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(m){n=m}});var i=150;Object.defineProperty(this,"width",{get:function(){return i},set:function(m){i=isNaN(m)||Number.isInteger(m)===!1||m<0?150:m,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=i+1)}});var o=300;Object.defineProperty(this,"height",{get:function(){return o},set:function(m){o=isNaN(m)||Number.isInteger(m)===!1||m<0?300:m,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=o+1)}});var l=[];Object.defineProperty(this,"childNodes",{get:function(){return l},set:function(m){l=m}});var f={};Object.defineProperty(this,"style",{get:function(){return f},set:function(m){f=m}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(n,i){var o;if((n=n||"2d")!=="2d")return null;for(o in i)this.pdf.context2d.hasOwnProperty(o)&&(this.pdf.context2d[o]=i[o]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Ht.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,i=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),o.call(this))},o=function(){this.internal.__cell__.lastCell=new l,this.internal.__cell__.pages=1},l=function(){var p=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return p},set:function(E){p=E}});var x=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return x},set:function(E){x=E}});var S=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return S},set:function(E){S=E}});var N=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return N},set:function(E){N=E}});var j=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return j},set:function(E){j=E}});var v=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return v},set:function(E){v=E}});var O=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return O},set:function(E){O=E}}),this};l.prototype.clone=function(){return new l(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},l.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(p){return i.call(this),this.internal.__cell__.headerFunction=typeof p=="function"?p:void 0,this},e.getTextDimensions=function(p,x){i.call(this);var S=(x=x||{}).fontSize||this.getFontSize(),N=x.font||this.getFont(),j=x.scaleFactor||this.internal.scaleFactor,v=0,O=0,E=0,P=this;if(!Array.isArray(p)&&typeof p!="string"){if(typeof p!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");p=String(p)}var C=x.maxWidth;C>0?typeof p=="string"?p=this.splitTextToSize(p,C):Object.prototype.toString.call(p)==="[object Array]"&&(p=p.reduce(function(D,U){return D.concat(P.splitTextToSize(U,C))},[])):p=Array.isArray(p)?p:[p];for(var _=0;_<p.length;_++)v<(E=this.getStringUnitWidth(p[_],{font:N})*S)&&(v=E);return v!==0&&(O=p.length),{w:v/=j,h:Math.max((O*S*this.getLineHeightFactor()-S*(this.getLineHeightFactor()-1))/j,0)}},e.cellAddPage=function(){i.call(this),this.addPage();var p=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new l(p.left,p.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var f=e.cell=function(){var p;p=arguments[0]instanceof l?arguments[0]:new l(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),i.call(this);var x=this.internal.__cell__.lastCell,S=this.internal.__cell__.padding,N=this.internal.__cell__.margins||t,j=this.internal.__cell__.tableHeaderRow,v=this.internal.__cell__.printHeaders;return x.lineNumber!==void 0&&(x.lineNumber===p.lineNumber?(p.x=(x.x||0)+(x.width||0),p.y=x.y||0):x.y+x.height+p.height+N.bottom>this.getPageHeight()?(this.cellAddPage(),p.y=N.top,v&&j&&(this.printHeaderRow(p.lineNumber,!0),p.y+=j[0].height)):p.y=x.y+x.height||p.y),p.text[0]!==void 0&&(this.rect(p.x,p.y,p.width,p.height,n===!0?"FD":void 0),p.align==="right"?this.text(p.text,p.x+p.width-S,p.y+S,{align:"right",baseline:"top"}):p.align==="center"?this.text(p.text,p.x+p.width/2,p.y+S,{align:"center",baseline:"top",maxWidth:p.width-S-S}):this.text(p.text,p.x+S,p.y+S,{align:"left",baseline:"top",maxWidth:p.width-S-S})),this.internal.__cell__.lastCell=p,this};e.table=function(p,x,S,N,j){if(i.call(this),!S)throw new Error("No data for PDF table.");var v,O,E,P,C=[],_=[],D=[],U={},Y={},ae=[],F=[],L=(j=j||{}).autoSize||!1,M=j.printHeaders!==!1,z=j.css&&j.css["font-size"]!==void 0?16*j.css["font-size"]:j.fontSize||12,k=j.margins||Object.assign({width:this.getPageWidth()},t),R=typeof j.padding=="number"?j.padding:3,re=j.headerBackgroundColor||"#c8c8c8",ee=j.headerTextColor||"#000";if(o.call(this),this.internal.__cell__.printHeaders=M,this.internal.__cell__.margins=k,this.internal.__cell__.table_font_size=z,this.internal.__cell__.padding=R,this.internal.__cell__.headerBackgroundColor=re,this.internal.__cell__.headerTextColor=ee,this.setFontSize(z),N==null)_=C=Object.keys(S[0]),D=C.map(function(){return"left"});else if(Array.isArray(N)&&Vn(N[0])==="object")for(C=N.map(function(fe){return fe.name}),_=N.map(function(fe){return fe.prompt||fe.name||""}),D=N.map(function(fe){return fe.align||"left"}),v=0;v<N.length;v+=1)Y[N[v].name]=N[v].width*(19.049976/25.4);else Array.isArray(N)&&typeof N[0]=="string"&&(_=C=N,D=C.map(function(){return"left"}));if(L||Array.isArray(N)&&typeof N[0]=="string")for(v=0;v<C.length;v+=1){for(U[P=C[v]]=S.map(function(fe){return fe[P]}),this.setFont(void 0,"bold"),ae.push(this.getTextDimensions(_[v],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),O=U[P],this.setFont(void 0,"normal"),E=0;E<O.length;E+=1)ae.push(this.getTextDimensions(O[E],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Y[P]=Math.max.apply(null,ae)+R+R,ae=[]}if(M){var ne={};for(v=0;v<C.length;v+=1)ne[C[v]]={},ne[C[v]].text=_[v],ne[C[v]].align=D[v];var K=m.call(this,ne,Y);F=C.map(function(fe){return new l(p,x,Y[fe],K,ne[fe].text,void 0,ne[fe].align)}),this.setTableHeaderRow(F),this.printHeaderRow(1,!1)}var G=N.reduce(function(fe,le){return fe[le.name]=le.align,fe},{});for(v=0;v<S.length;v+=1){"rowStart"in j&&j.rowStart instanceof Function&&j.rowStart({row:v,data:S[v]},this);var te=m.call(this,S[v],Y);for(E=0;E<C.length;E+=1){var W=S[v][C[E]];"cellStart"in j&&j.cellStart instanceof Function&&j.cellStart({row:v,col:E,data:W},this),f.call(this,new l(p,x,Y[C[E]],te,W,v+2,G[C[E]]))}}return this.internal.__cell__.table_x=p,this.internal.__cell__.table_y=x,this};var m=function(p,x){var S=this.internal.__cell__.padding,N=this.internal.__cell__.table_font_size,j=this.internal.scaleFactor;return Object.keys(p).map(function(v){var O=p[v];return this.splitTextToSize(O.hasOwnProperty("text")?O.text:O,x[v]-S-S)},this).map(function(v){return this.getLineHeightFactor()*v.length*N/j+S+S},this).reduce(function(v,O){return Math.max(v,O)},0)};e.setTableHeaderRow=function(p){i.call(this),this.internal.__cell__.tableHeaderRow=p},e.printHeaderRow=function(p,x){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var S;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var N=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new l(N[0],N[1],N[2],N[3],void 0,-1)}this.setFont(void 0,"bold");for(var j=[],v=0;v<this.internal.__cell__.tableHeaderRow.length;v+=1){S=this.internal.__cell__.tableHeaderRow[v].clone(),x&&(S.y=this.internal.__cell__.margins.top||0,j.push(S)),S.lineNumber=p;var O=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),f.call(this,S),this.setTextColor(O)}j.length>0&&this.setTableHeaderRow(j),this.setFont(void 0,"normal"),n=!1}}(Ht.API);var Sy={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Cy=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],i2=Ay(Cy),Ey=[100,200,300,400,500,600,700,800,900],SN=Ay(Ey);function a2(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(l){return Sy[l=l||"normal"]?l:"normal"}(e.style),i=function(l){if(!l)return 400;if(typeof l=="number")return l>=100&&l<=900&&l%100==0?l:400;if(/^\d00$/.test(l))return parseInt(l);switch(l){case"bold":return 700;case"normal":default:return 400}}(e.weight),o=function(l){return typeof i2[l=l||"normal"]=="number"?l:"normal"}(e.stretch);return{family:t,style:n,weight:i,stretch:o,src:e.src||[],ref:e.ref||{name:t,style:[o,n,i].join(" ")}}}function Tp(e,t,n,i){var o;for(o=n;o>=0&&o<t.length;o+=i)if(e[t[o]])return e[t[o]];for(o=n;o>=0&&o<t.length;o-=i)if(e[t[o]])return e[t[o]]}var CN={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},jp={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function _p(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function EN(e,t,n){for(var i=(n=n||{}).defaultFontFamily||"times",o=Object.assign({},CN,n.genericFontFamilies||{}),l=null,f=null,m=0;m<t.length;++m)if(o[(l=a2(t[m])).family]&&(l.family=o[l.family]),e.hasOwnProperty(l.family)){f=e[l.family];break}if(!(f=f||e[i]))throw new Error("Could not find a font-family for the rule '"+_p(l)+"' and default family '"+i+"'.");if(f=function(p,x){if(x[p])return x[p];var S=i2[p],N=S<=i2.normal?-1:1,j=Tp(x,Cy,S,N);if(!j)throw new Error("Could not find a matching font-stretch value for "+p);return j}(l.stretch,f),f=function(p,x){if(x[p])return x[p];for(var S=Sy[p],N=0;N<S.length;++N)if(x[S[N]])return x[S[N]];throw new Error("Could not find a matching font-style for "+p)}(l.style,f),!(f=function(p,x){if(x[p])return x[p];if(p===400&&x[500])return x[500];if(p===500&&x[400])return x[400];var S=SN[p],N=Tp(x,Ey,S,p<400?-1:1);if(!N)throw new Error("Could not find a matching font-weight for value "+p);return N}(l.weight,f)))throw new Error("Failed to resolve a font for the rule '"+_p(l)+"'.");return f}function Ip(e){return e.trimLeft()}function TN(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function jN(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var bf,Dp,Lp,W0=["times"];(function(e){var t,n,i,o,l,f,m,p,x,S=function(B){return B=B||{},this.isStrokeTransparent=B.isStrokeTransparent||!1,this.strokeOpacity=B.strokeOpacity||1,this.strokeStyle=B.strokeStyle||"#000000",this.fillStyle=B.fillStyle||"#000000",this.isFillTransparent=B.isFillTransparent||!1,this.fillOpacity=B.fillOpacity||1,this.font=B.font||"10px sans-serif",this.textBaseline=B.textBaseline||"alphabetic",this.textAlign=B.textAlign||"left",this.lineWidth=B.lineWidth||1,this.lineJoin=B.lineJoin||"miter",this.lineCap=B.lineCap||"butt",this.path=B.path||[],this.transform=B.transform!==void 0?B.transform.clone():new p,this.globalCompositeOperation=B.globalCompositeOperation||"normal",this.globalAlpha=B.globalAlpha||1,this.clip_path=B.clip_path||[],this.currentPoint=B.currentPoint||new f,this.miterLimit=B.miterLimit||10,this.lastPoint=B.lastPoint||new f,this.lineDashOffset=B.lineDashOffset||0,this.lineDash=B.lineDash||[],this.margin=B.margin||[0,0,0,0],this.prevPageLastElemOffset=B.prevPageLastElemOffset||0,this.ignoreClearRect=typeof B.ignoreClearRect!="boolean"||B.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new N(this),t=this.internal.f2,n=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,o=this.internal.getHorizontalCoordinate,l=this.internal.getVerticalCoordinate,f=this.internal.Point,m=this.internal.Rectangle,p=this.internal.Matrix,x=new S}]);var N=function(B){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var q=B;Object.defineProperty(this,"pdf",{get:function(){return q}});var Q=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Q},set:function(Me){Q=!!Me}});var he=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return he},set:function(Me){he=!!Me}});var ue=0;Object.defineProperty(this,"posX",{get:function(){return ue},set:function(Me){isNaN(Me)||(ue=Me)}});var je=0;Object.defineProperty(this,"posY",{get:function(){return je},set:function(Me){isNaN(Me)||(je=Me)}}),Object.defineProperty(this,"margin",{get:function(){return x.margin},set:function(Me){var me;typeof Me=="number"?me=[Me,Me,Me,Me]:((me=new Array(4))[0]=Me[0],me[1]=Me.length>=2?Me[1]:me[0],me[2]=Me.length>=3?Me[2]:me[0],me[3]=Me.length>=4?Me[3]:me[1]),x.margin=me}});var Ae=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ae},set:function(Me){Ae=Me}});var ve=0;Object.defineProperty(this,"lastBreak",{get:function(){return ve},set:function(Me){ve=Me}});var Pe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Pe},set:function(Me){Pe=Me}}),Object.defineProperty(this,"ctx",{get:function(){return x},set:function(Me){Me instanceof S&&(x=Me)}}),Object.defineProperty(this,"path",{get:function(){return x.path},set:function(Me){x.path=Me}});var Te=[];Object.defineProperty(this,"ctxStack",{get:function(){return Te},set:function(Me){Te=Me}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Me){var me;me=j(Me),this.ctx.fillStyle=me.style,this.ctx.isFillTransparent=me.a===0,this.ctx.fillOpacity=me.a,this.pdf.setFillColor(me.r,me.g,me.b,{a:me.a}),this.pdf.setTextColor(me.r,me.g,me.b,{a:me.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Me){var me=j(Me);this.ctx.strokeStyle=me.style,this.ctx.isStrokeTransparent=me.a===0,this.ctx.strokeOpacity=me.a,me.a===0?this.pdf.setDrawColor(255,255,255):(me.a,this.pdf.setDrawColor(me.r,me.g,me.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Me){["butt","round","square"].indexOf(Me)!==-1&&(this.ctx.lineCap=Me,this.pdf.setLineCap(Me))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Me){isNaN(Me)||(this.ctx.lineWidth=Me,this.pdf.setLineWidth(Me))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Me){["bevel","round","miter"].indexOf(Me)!==-1&&(this.ctx.lineJoin=Me,this.pdf.setLineJoin(Me))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Me){isNaN(Me)||(this.ctx.miterLimit=Me,this.pdf.setMiterLimit(Me))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Me){this.ctx.textBaseline=Me}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Me){["right","end","center","left","start"].indexOf(Me)!==-1&&(this.ctx.textAlign=Me)}});var Ye=null;function He(Me,me){if(Ye===null){var st=function(Fe){var we=[];return Object.keys(Fe).forEach(function(Xe){Fe[Xe].forEach(function(Re){var Qe=null;switch(Re){case"bold":Qe={family:Xe,weight:"bold"};break;case"italic":Qe={family:Xe,style:"italic"};break;case"bolditalic":Qe={family:Xe,weight:"bold",style:"italic"};break;case"":case"normal":Qe={family:Xe}}Qe!==null&&(Qe.ref={name:Xe,style:Re},we.push(Qe))})}),we}(Me.getFontList());Ye=function(Fe){for(var we={},Xe=0;Xe<Fe.length;++Xe){var Re=a2(Fe[Xe]),Qe=Re.family,gt=Re.stretch,pt=Re.style,qe=Re.weight;we[Qe]=we[Qe]||{},we[Qe][gt]=we[Qe][gt]||{},we[Qe][gt][pt]=we[Qe][gt][pt]||{},we[Qe][gt][pt][qe]=Re}return we}(st.concat(me))}return Ye}var ut=null;Object.defineProperty(this,"fontFaces",{get:function(){return ut},set:function(Me){Ye=null,ut=Me}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Me){var me;if(this.ctx.font=Me,(me=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Me))!==null){var st=me[1],Fe=(me[2],me[3]),we=me[4],Xe=(me[5],me[6]),Re=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(we)[2];we=Math.floor(Re==="px"?parseFloat(we)*this.pdf.internal.scaleFactor:Re==="em"?parseFloat(we)*this.pdf.getFontSize():parseFloat(we)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(we);var Qe=function(At){var qt,mt,yn=[],Tt=At.trim();if(Tt==="")return W0;if(Tt in jp)return[jp[Tt]];for(;Tt!=="";){switch(mt=null,qt=(Tt=Ip(Tt)).charAt(0)){case'"':case"'":mt=TN(Tt.substring(1),qt);break;default:mt=jN(Tt)}if(mt===null||(yn.push(mt[0]),(Tt=Ip(mt[1]))!==""&&Tt.charAt(0)!==","))return W0;Tt=Tt.replace(/^,/,"")}return yn}(Xe);if(this.fontFaces){var gt=EN(He(this.pdf,this.fontFaces),Qe.map(function(At){return{family:At,stretch:"normal",weight:Fe,style:st}}));this.pdf.setFont(gt.ref.name,gt.ref.style)}else{var pt="";(Fe==="bold"||parseInt(Fe,10)>=700||st==="bold")&&(pt="bold"),st==="italic"&&(pt+="italic"),pt.length===0&&(pt="normal");for(var qe="",ct={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},St=0;St<Qe.length;St++){if(this.pdf.internal.getFont(Qe[St],pt,{noFallback:!0,disableWarning:!0})!==void 0){qe=Qe[St];break}if(pt==="bolditalic"&&this.pdf.internal.getFont(Qe[St],"bold",{noFallback:!0,disableWarning:!0})!==void 0)qe=Qe[St],pt="bold";else if(this.pdf.internal.getFont(Qe[St],"normal",{noFallback:!0,disableWarning:!0})!==void 0){qe=Qe[St],pt="normal";break}}if(qe===""){for(var Ot=0;Ot<Qe.length;Ot++)if(ct[Qe[Ot]]){qe=ct[Qe[Ot]];break}}qe=qe===""?"Times":qe,this.pdf.setFont(qe,pt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Me){this.ctx.globalCompositeOperation=Me}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Me){this.ctx.globalAlpha=Me}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Me){this.ctx.lineDashOffset=Me,le.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Me){this.ctx.lineDash=Me,le.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Me){this.ctx.ignoreClearRect=!!Me}})};N.prototype.setLineDash=function(B){this.lineDash=B},N.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},N.prototype.fill=function(){U.call(this,"fill",!1)},N.prototype.stroke=function(){U.call(this,"stroke",!1)},N.prototype.beginPath=function(){this.path=[{type:"begin"}]},N.prototype.moveTo=function(B,q){if(isNaN(B)||isNaN(q))throw nr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Q=this.ctx.transform.applyToPoint(new f(B,q));this.path.push({type:"mt",x:Q.x,y:Q.y}),this.ctx.lastPoint=new f(B,q)},N.prototype.closePath=function(){var B=new f(0,0),q=0;for(q=this.path.length-1;q!==-1;q--)if(this.path[q].type==="begin"&&Vn(this.path[q+1])==="object"&&typeof this.path[q+1].x=="number"){B=new f(this.path[q+1].x,this.path[q+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new f(B.x,B.y)},N.prototype.lineTo=function(B,q){if(isNaN(B)||isNaN(q))throw nr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Q=this.ctx.transform.applyToPoint(new f(B,q));this.path.push({type:"lt",x:Q.x,y:Q.y}),this.ctx.lastPoint=new f(Q.x,Q.y)},N.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),U.call(this,null,!0)},N.prototype.quadraticCurveTo=function(B,q,Q,he){if(isNaN(Q)||isNaN(he)||isNaN(B)||isNaN(q))throw nr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ue=this.ctx.transform.applyToPoint(new f(Q,he)),je=this.ctx.transform.applyToPoint(new f(B,q));this.path.push({type:"qct",x1:je.x,y1:je.y,x:ue.x,y:ue.y}),this.ctx.lastPoint=new f(ue.x,ue.y)},N.prototype.bezierCurveTo=function(B,q,Q,he,ue,je){if(isNaN(ue)||isNaN(je)||isNaN(B)||isNaN(q)||isNaN(Q)||isNaN(he))throw nr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ae=this.ctx.transform.applyToPoint(new f(ue,je)),ve=this.ctx.transform.applyToPoint(new f(B,q)),Pe=this.ctx.transform.applyToPoint(new f(Q,he));this.path.push({type:"bct",x1:ve.x,y1:ve.y,x2:Pe.x,y2:Pe.y,x:Ae.x,y:Ae.y}),this.ctx.lastPoint=new f(Ae.x,Ae.y)},N.prototype.arc=function(B,q,Q,he,ue,je){if(isNaN(B)||isNaN(q)||isNaN(Q)||isNaN(he)||isNaN(ue))throw nr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(je=!!je,!this.ctx.transform.isIdentity){var Ae=this.ctx.transform.applyToPoint(new f(B,q));B=Ae.x,q=Ae.y;var ve=this.ctx.transform.applyToPoint(new f(0,Q)),Pe=this.ctx.transform.applyToPoint(new f(0,0));Q=Math.sqrt(Math.pow(ve.x-Pe.x,2)+Math.pow(ve.y-Pe.y,2))}Math.abs(ue-he)>=2*Math.PI&&(he=0,ue=2*Math.PI),this.path.push({type:"arc",x:B,y:q,radius:Q,startAngle:he,endAngle:ue,counterclockwise:je})},N.prototype.arcTo=function(B,q,Q,he,ue){throw new Error("arcTo not implemented.")},N.prototype.rect=function(B,q,Q,he){if(isNaN(B)||isNaN(q)||isNaN(Q)||isNaN(he))throw nr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(B,q),this.lineTo(B+Q,q),this.lineTo(B+Q,q+he),this.lineTo(B,q+he),this.lineTo(B,q),this.lineTo(B+Q,q),this.lineTo(B,q)},N.prototype.fillRect=function(B,q,Q,he){if(isNaN(B)||isNaN(q)||isNaN(Q)||isNaN(he))throw nr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!v.call(this)){var ue={};this.lineCap!=="butt"&&(ue.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ue.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(B,q,Q,he),this.fill(),ue.hasOwnProperty("lineCap")&&(this.lineCap=ue.lineCap),ue.hasOwnProperty("lineJoin")&&(this.lineJoin=ue.lineJoin)}},N.prototype.strokeRect=function(B,q,Q,he){if(isNaN(B)||isNaN(q)||isNaN(Q)||isNaN(he))throw nr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");O.call(this)||(this.beginPath(),this.rect(B,q,Q,he),this.stroke())},N.prototype.clearRect=function(B,q,Q,he){if(isNaN(B)||isNaN(q)||isNaN(Q)||isNaN(he))throw nr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(B,q,Q,he))},N.prototype.save=function(B){B=typeof B!="boolean"||B;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,Q=0;Q<this.pdf.internal.getNumberOfPages();Q++)this.pdf.setPage(Q+1),this.pdf.internal.out("q");if(this.pdf.setPage(q),B){this.ctx.fontSize=this.pdf.internal.getFontSize();var he=new S(this.ctx);this.ctxStack.push(this.ctx),this.ctx=he}},N.prototype.restore=function(B){B=typeof B!="boolean"||B;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,Q=0;Q<this.pdf.internal.getNumberOfPages();Q++)this.pdf.setPage(Q+1),this.pdf.internal.out("Q");this.pdf.setPage(q),B&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},N.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var j=function(B){var q,Q,he,ue;if(B.isCanvasGradient===!0&&(B=B.getColor()),!B)return{r:0,g:0,b:0,a:0,style:B};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(B))q=0,Q=0,he=0,ue=0;else{var je=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(B);if(je!==null)q=parseInt(je[1]),Q=parseInt(je[2]),he=parseInt(je[3]),ue=1;else if((je=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(B))!==null)q=parseInt(je[1]),Q=parseInt(je[2]),he=parseInt(je[3]),ue=parseFloat(je[4]);else{if(ue=1,typeof B=="string"&&B.charAt(0)!=="#"){var Ae=new xy(B);B=Ae.ok?Ae.toHex():"#000000"}B.length===4?(q=B.substring(1,2),q+=q,Q=B.substring(2,3),Q+=Q,he=B.substring(3,4),he+=he):(q=B.substring(1,3),Q=B.substring(3,5),he=B.substring(5,7)),q=parseInt(q,16),Q=parseInt(Q,16),he=parseInt(he,16)}}return{r:q,g:Q,b:he,a:ue,style:B}},v=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},O=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};N.prototype.fillText=function(B,q,Q,he){if(isNaN(q)||isNaN(Q)||typeof B!="string")throw nr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(he=isNaN(he)?void 0:he,!v.call(this)){var ue=te(this.ctx.transform.rotation),je=this.ctx.transform.scaleX;R.call(this,{text:B,x:q,y:Q,scale:je,angle:ue,align:this.textAlign,maxWidth:he})}},N.prototype.strokeText=function(B,q,Q,he){if(isNaN(q)||isNaN(Q)||typeof B!="string")throw nr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!O.call(this)){he=isNaN(he)?void 0:he;var ue=te(this.ctx.transform.rotation),je=this.ctx.transform.scaleX;R.call(this,{text:B,x:q,y:Q,scale:je,renderingMode:"stroke",angle:ue,align:this.textAlign,maxWidth:he})}},N.prototype.measureText=function(B){if(typeof B!="string")throw nr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var q=this.pdf,Q=this.pdf.internal.scaleFactor,he=q.internal.getFontSize(),ue=q.getStringUnitWidth(B)*he/q.internal.scaleFactor,je=function(Ae){var ve=(Ae=Ae||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ve}}),this};return new je({width:ue*=Math.round(96*Q/72*1e4)/1e4})},N.prototype.scale=function(B,q){if(isNaN(B)||isNaN(q))throw nr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Q=new p(B,0,0,q,0,0);this.ctx.transform=this.ctx.transform.multiply(Q)},N.prototype.rotate=function(B){if(isNaN(B))throw nr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var q=new p(Math.cos(B),Math.sin(B),-Math.sin(B),Math.cos(B),0,0);this.ctx.transform=this.ctx.transform.multiply(q)},N.prototype.translate=function(B,q){if(isNaN(B)||isNaN(q))throw nr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Q=new p(1,0,0,1,B,q);this.ctx.transform=this.ctx.transform.multiply(Q)},N.prototype.transform=function(B,q,Q,he,ue,je){if(isNaN(B)||isNaN(q)||isNaN(Q)||isNaN(he)||isNaN(ue)||isNaN(je))throw nr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ae=new p(B,q,Q,he,ue,je);this.ctx.transform=this.ctx.transform.multiply(Ae)},N.prototype.setTransform=function(B,q,Q,he,ue,je){B=isNaN(B)?1:B,q=isNaN(q)?0:q,Q=isNaN(Q)?0:Q,he=isNaN(he)?1:he,ue=isNaN(ue)?0:ue,je=isNaN(je)?0:je,this.ctx.transform=new p(B,q,Q,he,ue,je)};var E=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};N.prototype.drawImage=function(B,q,Q,he,ue,je,Ae,ve,Pe){var Te=this.pdf.getImageProperties(B),Ye=1,He=1,ut=1,Me=1;he!==void 0&&ve!==void 0&&(ut=ve/he,Me=Pe/ue,Ye=Te.width/he*ve/he,He=Te.height/ue*Pe/ue),je===void 0&&(je=q,Ae=Q,q=0,Q=0),he!==void 0&&ve===void 0&&(ve=he,Pe=ue),he===void 0&&ve===void 0&&(ve=Te.width,Pe=Te.height);for(var me,st=this.ctx.transform.decompose(),Fe=te(st.rotate.shx),we=new p,Xe=(we=(we=(we=we.multiply(st.translate)).multiply(st.skew)).multiply(st.scale)).applyToRectangle(new m(je-q*ut,Ae-Q*Me,he*Ye,ue*He)),Re=P.call(this,Xe),Qe=[],gt=0;gt<Re.length;gt+=1)Qe.indexOf(Re[gt])===-1&&Qe.push(Re[gt]);if(D(Qe),this.autoPaging)for(var pt=Qe[0],qe=Qe[Qe.length-1],ct=pt;ct<qe+1;ct++){this.pdf.setPage(ct);var St=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ot=ct===1?this.posY+this.margin[0]:this.margin[0],At=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],qt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],mt=ct===1?0:At+(ct-2)*qt;if(this.ctx.clip_path.length!==0){var yn=this.path;me=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(me,this.posX+this.margin[3],-mt+Ot+this.ctx.prevPageLastElemOffset),Y.call(this,"fill",!0),this.path=yn}var Tt=JSON.parse(JSON.stringify(Xe));Tt=_([Tt],this.posX+this.margin[3],-mt+Ot+this.ctx.prevPageLastElemOffset)[0];var Ne=(ct>pt||ct<qe)&&E.call(this);Ne&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],St,qt,null).clip().discardPath()),this.pdf.addImage(B,"JPEG",Tt.x,Tt.y,Tt.w,Tt.h,null,null,Fe),Ne&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(B,"JPEG",Xe.x,Xe.y,Xe.w,Xe.h,null,null,Fe)};var P=function(B,q,Q){var he=[];q=q||this.pdf.internal.pageSize.width,Q=Q||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ue=this.posY+this.ctx.prevPageLastElemOffset;switch(B.type){default:case"mt":case"lt":he.push(Math.floor((B.y+ue)/Q)+1);break;case"arc":he.push(Math.floor((B.y+ue-B.radius)/Q)+1),he.push(Math.floor((B.y+ue+B.radius)/Q)+1);break;case"qct":var je=W(this.ctx.lastPoint.x,this.ctx.lastPoint.y,B.x1,B.y1,B.x,B.y);he.push(Math.floor((je.y+ue)/Q)+1),he.push(Math.floor((je.y+je.h+ue)/Q)+1);break;case"bct":var Ae=fe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,B.x1,B.y1,B.x2,B.y2,B.x,B.y);he.push(Math.floor((Ae.y+ue)/Q)+1),he.push(Math.floor((Ae.y+Ae.h+ue)/Q)+1);break;case"rect":he.push(Math.floor((B.y+ue)/Q)+1),he.push(Math.floor((B.y+B.h+ue)/Q)+1)}for(var ve=0;ve<he.length;ve+=1)for(;this.pdf.internal.getNumberOfPages()<he[ve];)C.call(this);return he},C=function(){var B=this.fillStyle,q=this.strokeStyle,Q=this.font,he=this.lineCap,ue=this.lineWidth,je=this.lineJoin;this.pdf.addPage(),this.fillStyle=B,this.strokeStyle=q,this.font=Q,this.lineCap=he,this.lineWidth=ue,this.lineJoin=je},_=function(B,q,Q){for(var he=0;he<B.length;he++)switch(B[he].type){case"bct":B[he].x2+=q,B[he].y2+=Q;case"qct":B[he].x1+=q,B[he].y1+=Q;case"mt":case"lt":case"arc":default:B[he].x+=q,B[he].y+=Q}return B},D=function(B){return B.sort(function(q,Q){return q-Q})},U=function(B,q){for(var Q,he,ue=this.fillStyle,je=this.strokeStyle,Ae=this.lineCap,ve=this.lineWidth,Pe=Math.abs(ve*this.ctx.transform.scaleX),Te=this.lineJoin,Ye=JSON.parse(JSON.stringify(this.path)),He=JSON.parse(JSON.stringify(this.path)),ut=[],Me=0;Me<He.length;Me++)if(He[Me].x!==void 0)for(var me=P.call(this,He[Me]),st=0;st<me.length;st+=1)ut.indexOf(me[st])===-1&&ut.push(me[st]);for(var Fe=0;Fe<ut.length;Fe++)for(;this.pdf.internal.getNumberOfPages()<ut[Fe];)C.call(this);if(D(ut),this.autoPaging)for(var we=ut[0],Xe=ut[ut.length-1],Re=we;Re<Xe+1;Re++){this.pdf.setPage(Re),this.fillStyle=ue,this.strokeStyle=je,this.lineCap=Ae,this.lineWidth=Pe,this.lineJoin=Te;var Qe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],gt=Re===1?this.posY+this.margin[0]:this.margin[0],pt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],qe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ct=Re===1?0:pt+(Re-2)*qe;if(this.ctx.clip_path.length!==0){var St=this.path;Q=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(Q,this.posX+this.margin[3],-ct+gt+this.ctx.prevPageLastElemOffset),Y.call(this,B,!0),this.path=St}if(he=JSON.parse(JSON.stringify(Ye)),this.path=_(he,this.posX+this.margin[3],-ct+gt+this.ctx.prevPageLastElemOffset),q===!1||Re===0){var Ot=(Re>we||Re<Xe)&&E.call(this);Ot&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Qe,qe,null).clip().discardPath()),Y.call(this,B,q),Ot&&this.pdf.restoreGraphicsState()}this.lineWidth=ve}else this.lineWidth=Pe,Y.call(this,B,q),this.lineWidth=ve;this.path=Ye},Y=function(B,q){if((B!=="stroke"||q||!O.call(this))&&(B==="stroke"||q||!v.call(this))){for(var Q,he,ue=[],je=this.path,Ae=0;Ae<je.length;Ae++){var ve=je[Ae];switch(ve.type){case"begin":ue.push({begin:!0});break;case"close":ue.push({close:!0});break;case"mt":ue.push({start:ve,deltas:[],abs:[]});break;case"lt":var Pe=ue.length;if(je[Ae-1]&&!isNaN(je[Ae-1].x)&&(Q=[ve.x-je[Ae-1].x,ve.y-je[Ae-1].y],Pe>0)){for(;Pe>=0;Pe--)if(ue[Pe-1].close!==!0&&ue[Pe-1].begin!==!0){ue[Pe-1].deltas.push(Q),ue[Pe-1].abs.push(ve);break}}break;case"bct":Q=[ve.x1-je[Ae-1].x,ve.y1-je[Ae-1].y,ve.x2-je[Ae-1].x,ve.y2-je[Ae-1].y,ve.x-je[Ae-1].x,ve.y-je[Ae-1].y],ue[ue.length-1].deltas.push(Q);break;case"qct":var Te=je[Ae-1].x+2/3*(ve.x1-je[Ae-1].x),Ye=je[Ae-1].y+2/3*(ve.y1-je[Ae-1].y),He=ve.x+2/3*(ve.x1-ve.x),ut=ve.y+2/3*(ve.y1-ve.y),Me=ve.x,me=ve.y;Q=[Te-je[Ae-1].x,Ye-je[Ae-1].y,He-je[Ae-1].x,ut-je[Ae-1].y,Me-je[Ae-1].x,me-je[Ae-1].y],ue[ue.length-1].deltas.push(Q);break;case"arc":ue.push({deltas:[],abs:[],arc:!0}),Array.isArray(ue[ue.length-1].abs)&&ue[ue.length-1].abs.push(ve)}}he=q?null:B==="stroke"?"stroke":"fill";for(var st=!1,Fe=0;Fe<ue.length;Fe++)if(ue[Fe].arc)for(var we=ue[Fe].abs,Xe=0;Xe<we.length;Xe++){var Re=we[Xe];Re.type==="arc"?L.call(this,Re.x,Re.y,Re.radius,Re.startAngle,Re.endAngle,Re.counterclockwise,void 0,q,!st):re.call(this,Re.x,Re.y),st=!0}else if(ue[Fe].close===!0)this.pdf.internal.out("h"),st=!1;else if(ue[Fe].begin!==!0){var Qe=ue[Fe].start.x,gt=ue[Fe].start.y;ee.call(this,ue[Fe].deltas,Qe,gt),st=!0}he&&M.call(this,he),q&&z.call(this)}},ae=function(B){var q=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Q=q*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return B-Q;case"top":return B+q-Q;case"hanging":return B+q-2*Q;case"middle":return B+q/2-Q;case"ideographic":return B;case"alphabetic":default:return B}},F=function(B){return B+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};N.prototype.createLinearGradient=function(){var B=function(){};return B.colorStops=[],B.addColorStop=function(q,Q){this.colorStops.push([q,Q])},B.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},B.isCanvasGradient=!0,B},N.prototype.createPattern=function(){return this.createLinearGradient()},N.prototype.createRadialGradient=function(){return this.createLinearGradient()};var L=function(B,q,Q,he,ue,je,Ae,ve,Pe){for(var Te=K.call(this,Q,he,ue,je),Ye=0;Ye<Te.length;Ye++){var He=Te[Ye];Ye===0&&(Pe?k.call(this,He.x1+B,He.y1+q):re.call(this,He.x1+B,He.y1+q)),ne.call(this,B,q,He.x2,He.y2,He.x3,He.y3,He.x4,He.y4)}ve?z.call(this):M.call(this,Ae)},M=function(B){switch(B){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},z=function(){this.pdf.clip(),this.pdf.discardPath()},k=function(B,q){this.pdf.internal.out(n(B)+" "+i(q)+" m")},R=function(B){var q;switch(B.align){case"right":case"end":q="right";break;case"center":q="center";break;case"left":case"start":default:q="left"}var Q=this.pdf.getTextDimensions(B.text),he=ae.call(this,B.y),ue=F.call(this,he)-Q.h,je=this.ctx.transform.applyToPoint(new f(B.x,he)),Ae=this.ctx.transform.decompose(),ve=new p;ve=(ve=(ve=ve.multiply(Ae.translate)).multiply(Ae.skew)).multiply(Ae.scale);for(var Pe,Te,Ye,He=this.ctx.transform.applyToRectangle(new m(B.x,he,Q.w,Q.h)),ut=ve.applyToRectangle(new m(B.x,ue,Q.w,Q.h)),Me=P.call(this,ut),me=[],st=0;st<Me.length;st+=1)me.indexOf(Me[st])===-1&&me.push(Me[st]);if(D(me),this.autoPaging)for(var Fe=me[0],we=me[me.length-1],Xe=Fe;Xe<we+1;Xe++){this.pdf.setPage(Xe);var Re=Xe===1?this.posY+this.margin[0]:this.margin[0],Qe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],gt=this.pdf.internal.pageSize.height-this.margin[2],pt=gt-this.margin[0],qe=this.pdf.internal.pageSize.width-this.margin[1],ct=qe-this.margin[3],St=Xe===1?0:Qe+(Xe-2)*pt;if(this.ctx.clip_path.length!==0){var Ot=this.path;Pe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(Pe,this.posX+this.margin[3],-1*St+Re),Y.call(this,"fill",!0),this.path=Ot}var At=_([JSON.parse(JSON.stringify(ut))],this.posX+this.margin[3],-St+Re+this.ctx.prevPageLastElemOffset)[0];B.scale>=.01&&(Te=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Te*B.scale),Ye=this.lineWidth,this.lineWidth=Ye*B.scale);var qt=this.autoPaging!=="text";if(qt||At.y+At.h<=gt){if(qt||At.y>=Re&&At.x<=qe){var mt=qt?B.text:this.pdf.splitTextToSize(B.text,B.maxWidth||qe-At.x)[0],yn=_([JSON.parse(JSON.stringify(He))],this.posX+this.margin[3],-St+Re+this.ctx.prevPageLastElemOffset)[0],Tt=qt&&(Xe>Fe||Xe<we)&&E.call(this);Tt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ct,pt,null).clip().discardPath()),this.pdf.text(mt,yn.x,yn.y,{angle:B.angle,align:q,renderingMode:B.renderingMode}),Tt&&this.pdf.restoreGraphicsState()}}else At.y<gt&&(this.ctx.prevPageLastElemOffset+=gt-At.y);B.scale>=.01&&(this.pdf.setFontSize(Te),this.lineWidth=Ye)}else B.scale>=.01&&(Te=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Te*B.scale),Ye=this.lineWidth,this.lineWidth=Ye*B.scale),this.pdf.text(B.text,je.x+this.posX,je.y+this.posY,{angle:B.angle,align:q,renderingMode:B.renderingMode,maxWidth:B.maxWidth}),B.scale>=.01&&(this.pdf.setFontSize(Te),this.lineWidth=Ye)},re=function(B,q,Q,he){Q=Q||0,he=he||0,this.pdf.internal.out(n(B+Q)+" "+i(q+he)+" l")},ee=function(B,q,Q){return this.pdf.lines(B,q,Q,null,null)},ne=function(B,q,Q,he,ue,je,Ae,ve){this.pdf.internal.out([t(o(Q+B)),t(l(he+q)),t(o(ue+B)),t(l(je+q)),t(o(Ae+B)),t(l(ve+q)),"c"].join(" "))},K=function(B,q,Q,he){for(var ue=2*Math.PI,je=Math.PI/2;q>Q;)q-=ue;var Ae=Math.abs(Q-q);Ae<ue&&he&&(Ae=ue-Ae);for(var ve=[],Pe=he?-1:1,Te=q;Ae>1e-5;){var Ye=Te+Pe*Math.min(Ae,je);ve.push(G.call(this,B,Te,Ye)),Ae-=Math.abs(Ye-Te),Te=Ye}return ve},G=function(B,q,Q){var he=(Q-q)/2,ue=B*Math.cos(he),je=B*Math.sin(he),Ae=ue,ve=-je,Pe=Ae*Ae+ve*ve,Te=Pe+Ae*ue+ve*je,Ye=4/3*(Math.sqrt(2*Pe*Te)-Te)/(Ae*je-ve*ue),He=Ae-Ye*ve,ut=ve+Ye*Ae,Me=He,me=-ut,st=he+q,Fe=Math.cos(st),we=Math.sin(st);return{x1:B*Math.cos(q),y1:B*Math.sin(q),x2:He*Fe-ut*we,y2:He*we+ut*Fe,x3:Me*Fe-me*we,y3:Me*we+me*Fe,x4:B*Math.cos(Q),y4:B*Math.sin(Q)}},te=function(B){return 180*B/Math.PI},W=function(B,q,Q,he,ue,je){var Ae=B+.5*(Q-B),ve=q+.5*(he-q),Pe=ue+.5*(Q-ue),Te=je+.5*(he-je),Ye=Math.min(B,ue,Ae,Pe),He=Math.max(B,ue,Ae,Pe),ut=Math.min(q,je,ve,Te),Me=Math.max(q,je,ve,Te);return new m(Ye,ut,He-Ye,Me-ut)},fe=function(B,q,Q,he,ue,je,Ae,ve){var Pe,Te,Ye,He,ut,Me,me,st,Fe,we,Xe,Re,Qe,gt,pt=Q-B,qe=he-q,ct=ue-Q,St=je-he,Ot=Ae-ue,At=ve-je;for(Te=0;Te<41;Te++)Fe=(me=(Ye=B+(Pe=Te/40)*pt)+Pe*((ut=Q+Pe*ct)-Ye))+Pe*(ut+Pe*(ue+Pe*Ot-ut)-me),we=(st=(He=q+Pe*qe)+Pe*((Me=he+Pe*St)-He))+Pe*(Me+Pe*(je+Pe*At-Me)-st),Te==0?(Xe=Fe,Re=we,Qe=Fe,gt=we):(Xe=Math.min(Xe,Fe),Re=Math.min(Re,we),Qe=Math.max(Qe,Fe),gt=Math.max(gt,we));return new m(Math.round(Xe),Math.round(Re),Math.round(Qe-Xe),Math.round(gt-Re))},le=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var B,q,Q=(B=this.ctx.lineDash,q=this.ctx.lineDashOffset,JSON.stringify({lineDash:B,lineDashOffset:q}));this.prevLineDash!==Q&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Q)}}})(Ht.API),function(e){var t=function(l){var f,m,p,x,S,N,j,v,O,E;for(m=[],p=0,x=(l+=f="\0\0\0\0".slice(l.length%4||4)).length;x>p;p+=4)(S=(l.charCodeAt(p)<<24)+(l.charCodeAt(p+1)<<16)+(l.charCodeAt(p+2)<<8)+l.charCodeAt(p+3))!==0?(N=(S=((S=((S=((S=(S-(E=S%85))/85)-(O=S%85))/85)-(v=S%85))/85)-(j=S%85))/85)%85,m.push(N+33,j+33,v+33,O+33,E+33)):m.push(122);return function(P,C){for(var _=C;_>0;_--)P.pop()}(m,f.length),String.fromCharCode.apply(String,m)+"~>"},n=function(l){var f,m,p,x,S,N=String,j="length",v=255,O="charCodeAt",E="slice",P="replace";for(l[E](-2),l=l[E](0,-2)[P](/\s/g,"")[P]("z","!!!!!"),p=[],x=0,S=(l+=f="uuuuu"[E](l[j]%5||5))[j];S>x;x+=5)m=52200625*(l[O](x)-33)+614125*(l[O](x+1)-33)+7225*(l[O](x+2)-33)+85*(l[O](x+3)-33)+(l[O](x+4)-33),p.push(v&m>>24,v&m>>16,v&m>>8,v&m);return function(C,_){for(var D=_;D>0;D--)C.pop()}(p,f[j]),N.fromCharCode.apply(N,p)},i=function(l){var f=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((l=l.replace(/\s/g,"")).indexOf(">")!==-1&&(l=l.substr(0,l.indexOf(">"))),l.length%2&&(l+="0"),f.test(l)===!1)return"";for(var m="",p=0;p<l.length;p+=2)m+=String.fromCharCode("0x"+(l[p]+l[p+1]));return m},o=function(l){for(var f=new Uint8Array(l.length),m=l.length;m--;)f[m]=l.charCodeAt(m);return l=(f=$1(f)).reduce(function(p,x){return p+String.fromCharCode(x)},"")};e.processDataByFilters=function(l,f){var m=0,p=l||"",x=[];for(typeof(f=f||[])=="string"&&(f=[f]),m=0;m<f.length;m+=1)switch(f[m]){case"ASCII85Decode":case"/ASCII85Decode":p=n(p),x.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":p=t(p),x.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":p=i(p),x.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":p=p.split("").map(function(S){return("0"+S.charCodeAt().toString(16)).slice(-2)}).join("")+">",x.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":p=o(p),x.push("/FlateDecode");break;default:throw new Error('The filter: "'+f[m]+'" is not implemented')}return{data:p,reverseChain:x.reverse().join(" ")}}}(Ht.API),function(e){e.loadFile=function(t,n,i){return function(o,l,f){l=l!==!1,f=typeof f=="function"?f:function(){};var m=void 0;try{m=function(p,x,S){var N=new XMLHttpRequest,j=0,v=function(O){var E=O.length,P=[],C=String.fromCharCode;for(j=0;j<E;j+=1)P.push(C(255&O.charCodeAt(j)));return P.join("")};if(N.open("GET",p,!x),N.overrideMimeType("text/plain; charset=x-user-defined"),x===!1&&(N.onload=function(){N.status===200?S(v(this.responseText)):S(void 0)}),N.send(null),x&&N.status===200)return v(N.responseText)}(o,l,f)}catch{}return m}(t,n,i)},e.loadImageFile=e.loadFile}(Ht.API),function(e){function t(){return(Wt.html2canvas?Promise.resolve(Wt.html2canvas):X1(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(f){return Promise.reject(new Error("Could not load html2canvas: "+f))}).then(function(f){return f.default?f.default:f})}function n(){return(Wt.DOMPurify?Promise.resolve(Wt.DOMPurify):X1(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(f){return Promise.reject(new Error("Could not load dompurify: "+f))}).then(function(f){return f.default?f.default:f})}var i=function(f){var m=Vn(f);return m==="undefined"?"undefined":m==="string"||f instanceof String?"string":m==="number"||f instanceof Number?"number":m==="function"||f instanceof Function?"function":f&&f.constructor===Array?"array":f&&f.nodeType===1?"element":m==="object"?"object":"unknown"},o=function(f,m){var p=document.createElement(f);for(var x in m.className&&(p.className=m.className),m.innerHTML&&m.dompurify&&(p.innerHTML=m.dompurify.sanitize(m.innerHTML)),m.style)p.style[x]=m.style[x];return p},l=function f(m){var p=Object.assign(f.convert(Promise.resolve()),JSON.parse(JSON.stringify(f.template))),x=f.convert(Promise.resolve(),p);return x=(x=x.setProgress(1,f,1,[f])).set(m)};(l.prototype=Object.create(Promise.prototype)).constructor=l,l.convert=function(f,m){return f.__proto__=m||l.prototype,f},l.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},l.prototype.from=function(f,m){return this.then(function(){switch(m=m||function(p){switch(i(p)){case"string":return"string";case"element":return p.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(f)){case"string":return this.then(n).then(function(p){return this.set({src:o("div",{innerHTML:f,dompurify:p})})});case"element":return this.set({src:f});case"canvas":return this.set({canvas:f});case"img":return this.set({img:f});default:return this.error("Unknown source type.")}})},l.prototype.to=function(f){switch(f){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},l.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var f={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},m=function p(x,S){for(var N=x.nodeType===3?document.createTextNode(x.nodeValue):x.cloneNode(!1),j=x.firstChild;j;j=j.nextSibling)S!==!0&&j.nodeType===1&&j.nodeName==="SCRIPT"||N.appendChild(p(j,S));return x.nodeType===1&&(x.nodeName==="CANVAS"?(N.width=x.width,N.height=x.height,N.getContext("2d").drawImage(x,0,0)):x.nodeName!=="TEXTAREA"&&x.nodeName!=="SELECT"||(N.value=x.value),N.addEventListener("load",function(){N.scrollTop=x.scrollTop,N.scrollLeft=x.scrollLeft},!0)),N}(this.prop.src,this.opt.html2canvas.javascriptEnabled);m.tagName==="BODY"&&(f.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=o("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=o("div",{className:"html2pdf__container",style:f}),this.prop.container.appendChild(m),this.prop.container.firstChild.appendChild(o("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},l.prototype.toCanvas=function(){var f=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(f).then(t).then(function(m){var p=Object.assign({},this.opt.html2canvas);return delete p.onrendered,m(this.prop.container,p)}).then(function(m){(this.opt.html2canvas.onrendered||function(){})(m),this.prop.canvas=m,document.body.removeChild(this.prop.overlay)})},l.prototype.toContext2d=function(){var f=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(f).then(t).then(function(m){var p=this.opt.jsPDF,x=this.opt.fontFaces,S=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,N=Object.assign({async:!0,allowTaint:!0,scale:S,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete N.onrendered,p.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,p.context2d.posX=this.opt.x,p.context2d.posY=this.opt.y,p.context2d.margin=this.opt.margin,p.context2d.fontFaces=x,x)for(var j=0;j<x.length;++j){var v=x[j],O=v.src.find(function(E){return E.format==="truetype"});O&&p.addFont(O.url,v.ref.name,v.ref.style)}return N.windowHeight=N.windowHeight||0,N.windowHeight=N.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):N.windowHeight,p.context2d.save(!0),m(this.prop.container,N)}).then(function(m){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(m),this.prop.canvas=m,document.body.removeChild(this.prop.overlay)})},l.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var f=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=f})},l.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},l.prototype.output=function(f,m,p){return(p=p||"pdf").toLowerCase()==="img"||p.toLowerCase()==="image"?this.outputImg(f,m):this.outputPdf(f,m)},l.prototype.outputPdf=function(f,m){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(f,m)})},l.prototype.outputImg=function(f){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(f){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+f+'" is not supported.'}})},l.prototype.save=function(f){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(f?{filename:f}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},l.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},l.prototype.set=function(f){if(i(f)!=="object")return this;var m=Object.keys(f||{}).map(function(p){if(p in l.template.prop)return function(){this.prop[p]=f[p]};switch(p){case"margin":return this.setMargin.bind(this,f.margin);case"jsPDF":return function(){return this.opt.jsPDF=f.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,f.pageSize);default:return function(){this.opt[p]=f[p]}}},this);return this.then(function(){return this.thenList(m)})},l.prototype.get=function(f,m){return this.then(function(){var p=f in l.template.prop?this.prop[f]:this.opt[f];return m?m(p):p})},l.prototype.setMargin=function(f){return this.then(function(){switch(i(f)){case"number":f=[f,f,f,f];case"array":if(f.length===2&&(f=[f[0],f[1],f[0],f[1]]),f.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=f}).then(this.setPageSize)},l.prototype.setPageSize=function(f){function m(p,x){return Math.floor(p*x/72*96)}return this.then(function(){(f=f||Ht.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(f.inner={width:f.width-this.opt.margin[1]-this.opt.margin[3],height:f.height-this.opt.margin[0]-this.opt.margin[2]},f.inner.px={width:m(f.inner.width,f.k),height:m(f.inner.height,f.k)},f.inner.ratio=f.inner.height/f.inner.width),this.prop.pageSize=f})},l.prototype.setProgress=function(f,m,p,x){return f!=null&&(this.progress.val=f),m!=null&&(this.progress.state=m),p!=null&&(this.progress.n=p),x!=null&&(this.progress.stack=x),this.progress.ratio=this.progress.val/this.progress.state,this},l.prototype.updateProgress=function(f,m,p,x){return this.setProgress(f?this.progress.val+f:null,m||null,p?this.progress.n+p:null,x?this.progress.stack.concat(x):null)},l.prototype.then=function(f,m){var p=this;return this.thenCore(f,m,function(x,S){return p.updateProgress(null,null,1,[x]),Promise.prototype.then.call(this,function(N){return p.updateProgress(null,x),N}).then(x,S).then(function(N){return p.updateProgress(1),N})})},l.prototype.thenCore=function(f,m,p){p=p||Promise.prototype.then,f&&(f=f.bind(this)),m&&(m=m.bind(this));var x=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:l.convert(Object.assign({},this),Promise.prototype),S=p.call(x,f,m);return l.convert(S,this.__proto__)},l.prototype.thenExternal=function(f,m){return Promise.prototype.then.call(this,f,m)},l.prototype.thenList=function(f){var m=this;return f.forEach(function(p){m=m.thenCore(p)}),m},l.prototype.catch=function(f){f&&(f=f.bind(this));var m=Promise.prototype.catch.call(this,f);return l.convert(m,this)},l.prototype.catchExternal=function(f){return Promise.prototype.catch.call(this,f)},l.prototype.error=function(f){return this.then(function(){throw new Error(f)})},l.prototype.using=l.prototype.set,l.prototype.saveAs=l.prototype.save,l.prototype.export=l.prototype.output,l.prototype.run=l.prototype.then,Ht.getPageSize=function(f,m,p){if(Vn(f)==="object"){var x=f;f=x.orientation,m=x.unit||m,p=x.format||p}m=m||"mm",p=p||"a4",f=(""+(f||"P")).toLowerCase();var S,N=(""+p).toLowerCase(),j={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(m){case"pt":S=1;break;case"mm":S=72/25.4;break;case"cm":S=72/2.54;break;case"in":S=72;break;case"px":S=.75;break;case"pc":case"em":S=12;break;case"ex":S=6;break;default:throw"Invalid unit: "+m}var v,O=0,E=0;if(j.hasOwnProperty(N))O=j[N][1]/S,E=j[N][0]/S;else try{O=p[1],E=p[0]}catch{throw new Error("Invalid format: "+p)}if(f==="p"||f==="portrait")f="p",E>O&&(v=E,E=O,O=v);else{if(f!=="l"&&f!=="landscape")throw"Invalid orientation: "+f;f="l",O>E&&(v=E,E=O,O=v)}return{width:E,height:O,unit:m,k:S,orientation:f}},e.html=function(f,m){(m=m||{}).callback=m.callback||function(){},m.html2canvas=m.html2canvas||{},m.html2canvas.canvas=m.html2canvas.canvas||this.canvas,m.jsPDF=m.jsPDF||this,m.fontFaces=m.fontFaces?m.fontFaces.map(a2):null;var p=new l(m);return m.worker?p:p.from(f).doCallback()}}(Ht.API),Ht.API.addJS=function(e){return Lp=e,this.internal.events.subscribe("postPutResources",function(){bf=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(bf+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Dp=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Lp+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){bf!==void 0&&Dp!==void 0&&this.internal.out("/Names <</JavaScript "+bf+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var n=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var o=n.outline.render().split(/\r\n/),l=0;l<o.length;l++){var f=o[l],m=i.exec(f);if(m!=null){var p=m[1];n.internal.newObjectDeferredBegin(p,!1)}n.internal.write(f)}if(this.outline.createNamedDestinations){var x=this.internal.pages.length,S=[];for(l=0;l<x;l++){var N=n.internal.newObject();S.push(N);var j=n.internal.getPageInfo(l+1);n.internal.write("<< /D["+j.objId+" 0 R /XYZ null null null]>> endobj")}var v=n.internal.newObject();for(n.internal.write("<< /Names [ "),l=0;l<S.length;l++)n.internal.write("(page_"+(l+1)+")"+S[l]+" 0 R");n.internal.write(" ] >>","endobj"),t=n.internal.newObject(),n.internal.write("<< /Dests "+v+" 0 R"),n.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(i,o,l){var f={title:o,options:l,children:[]};return i==null&&(i=this.root),i.children.push(f),f},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(i){i.id=n.internal.newObjectDeferred();for(var o=0;o<i.children.length;o++)this.genIds_r(i.children[o])},n.outline.renderRoot=function(i){this.objStart(i),this.line("/Type /Outlines"),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1]))),this.line("/Count "+this.count_r({count:0},i)),this.objEnd()},n.outline.renderItems=function(i){for(var o=this.ctx.pdf.internal.getVerticalCoordinateString,l=0;l<i.children.length;l++){var f=i.children[l];this.objStart(f),this.line("/Title "+this.makeString(f.title)),this.line("/Parent "+this.makeRef(i)),l>0&&this.line("/Prev "+this.makeRef(i.children[l-1])),l<i.children.length-1&&this.line("/Next "+this.makeRef(i.children[l+1])),f.children.length>0&&(this.line("/First "+this.makeRef(f.children[0])),this.line("/Last "+this.makeRef(f.children[f.children.length-1])));var m=this.count=this.count_r({count:0},f);if(m>0&&this.line("/Count "+m),f.options&&f.options.pageNumber){var p=n.internal.getPageInfo(f.options.pageNumber);this.line("/Dest ["+p.objId+" 0 R /XYZ 0 "+o(0)+" 0]")}this.objEnd()}for(var x=0;x<i.children.length;x++)this.renderItems(i.children[x])},n.outline.line=function(i){this.ctx.val+=i+`\r
`},n.outline.makeRef=function(i){return i.id+" 0 R"},n.outline.makeString=function(i){return"("+n.internal.pdfEscape(i)+")"},n.outline.objStart=function(i){this.ctx.val+=`\r
`+i.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(i,o){for(var l=0;l<o.children.length;l++)i.count++,this.count_r(i,o.children[l]);return i.count}}])}(Ht.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(n,i,o,l,f,m){var p,x=this.decode.DCT_DECODE,S=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=f||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(p=function(N){for(var j,v=256*N.charCodeAt(4)+N.charCodeAt(5),O=N.length,E={width:0,height:0,numcomponents:1},P=4;P<O;P+=2){if(P+=v,t.indexOf(N.charCodeAt(P+1))!==-1){j=256*N.charCodeAt(P+5)+N.charCodeAt(P+6),E={width:256*N.charCodeAt(P+7)+N.charCodeAt(P+8),height:j,numcomponents:N.charCodeAt(P+9)};break}v=256*N.charCodeAt(P+2)+N.charCodeAt(P+3)}return E}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:m=this.color_spaces.DEVICE_GRAY;break;case 4:m=this.color_spaces.DEVICE_CMYK;break;case 3:m=this.color_spaces.DEVICE_RGB}S={data:n,width:p.width,height:p.height,colorSpace:m,bitsPerComponent:8,filter:x,index:i,alias:o}}return S}}(Ht.API);var uc,yf,Op,Mp,Rp,_N=function(){var e,t,n;function i(l){var f,m,p,x,S,N,j,v,O,E,P,C,_,D;for(this.data=l,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},N=null;;){switch(f=this.readUInt32(),O=(function(){var U,Y;for(Y=[],U=0;U<4;++U)Y.push(String.fromCharCode(this.data[this.pos++]));return Y}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(f);break;case"fcTL":N&&this.animation.frames.push(N),this.pos+=4,N={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},S=this.readUInt16(),x=this.readUInt16()||100,N.delay=1e3*S/x,N.disposeOp=this.data[this.pos++],N.blendOp=this.data[this.pos++],N.data=[];break;case"IDAT":case"fdAT":for(O==="fdAT"&&(this.pos+=4,f-=4),l=(N!=null?N.data:void 0)||this.imgData,C=0;0<=f?C<f:C>f;0<=f?++C:--C)l.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(p=this.palette.length/3,this.transparency.indexed=this.read(f),this.transparency.indexed.length>p)throw new Error("More transparent colors than palette size");if((E=p-this.transparency.indexed.length)>0)for(_=0;0<=E?_<E:_>E;0<=E?++_:--_)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(f)[0];break;case 2:this.transparency.rgb=this.read(f)}break;case"tEXt":j=(P=this.read(f)).indexOf(0),v=String.fromCharCode.apply(String,P.slice(0,j)),this.text[v]=String.fromCharCode.apply(String,P.slice(j+1));break;case"IEND":return N&&this.animation.frames.push(N),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(D=this.colorType)===4||D===6,m=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*m,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=f}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}i.prototype.read=function(l){var f,m;for(m=[],f=0;0<=l?f<l:f>l;0<=l?++f:--f)m.push(this.data[this.pos++]);return m},i.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.decodePixels=function(l){var f=this.pixelBitlength/8,m=new Uint8Array(this.width*this.height*f),p=0,x=this;if(l==null&&(l=this.imgData),l.length===0)return new Uint8Array(0);function S(N,j,v,O){var E,P,C,_,D,U,Y,ae,F,L,M,z,k,R,re,ee,ne,K,G,te,W,fe=Math.ceil((x.width-N)/v),le=Math.ceil((x.height-j)/O),B=x.width==fe&&x.height==le;for(R=f*fe,z=B?m:new Uint8Array(R*le),U=l.length,k=0,P=0;k<le&&p<U;){switch(l[p++]){case 0:for(_=ne=0;ne<R;_=ne+=1)z[P++]=l[p++];break;case 1:for(_=K=0;K<R;_=K+=1)E=l[p++],D=_<f?0:z[P-f],z[P++]=(E+D)%256;break;case 2:for(_=G=0;G<R;_=G+=1)E=l[p++],C=(_-_%f)/f,re=k&&z[(k-1)*R+C*f+_%f],z[P++]=(re+E)%256;break;case 3:for(_=te=0;te<R;_=te+=1)E=l[p++],C=(_-_%f)/f,D=_<f?0:z[P-f],re=k&&z[(k-1)*R+C*f+_%f],z[P++]=(E+Math.floor((D+re)/2))%256;break;case 4:for(_=W=0;W<R;_=W+=1)E=l[p++],C=(_-_%f)/f,D=_<f?0:z[P-f],k===0?re=ee=0:(re=z[(k-1)*R+C*f+_%f],ee=C&&z[(k-1)*R+(C-1)*f+_%f]),Y=D+re-ee,ae=Math.abs(Y-D),L=Math.abs(Y-re),M=Math.abs(Y-ee),F=ae<=L&&ae<=M?D:L<=M?re:ee,z[P++]=(E+F)%256;break;default:throw new Error("Invalid filter algorithm: "+l[p-1])}if(!B){var q=((j+k*O)*x.width+N)*f,Q=k*R;for(_=0;_<fe;_+=1){for(var he=0;he<f;he+=1)m[q++]=z[Q++];q+=(v-1)*f}}k++}}return l=sN(l),x.interlaceMethod==1?(S(0,0,8,8),S(4,0,8,8),S(0,4,4,8),S(2,0,4,4),S(0,2,2,4),S(1,0,2,2),S(0,1,1,2)):S(0,0,1,1),m},i.prototype.decodePalette=function(){var l,f,m,p,x,S,N,j,v;for(m=this.palette,S=this.transparency.indexed||[],x=new Uint8Array((S.length||0)+m.length),p=0,l=0,f=N=0,j=m.length;N<j;f=N+=3)x[p++]=m[f],x[p++]=m[f+1],x[p++]=m[f+2],x[p++]=(v=S[l++])!=null?v:255;return x},i.prototype.copyToImageData=function(l,f){var m,p,x,S,N,j,v,O,E,P,C;if(p=this.colors,E=null,m=this.hasAlphaChannel,this.palette.length&&(E=(C=this._decodedPalette)!=null?C:this._decodedPalette=this.decodePalette(),p=4,m=!0),O=(x=l.data||l).length,N=E||f,S=j=0,p===1)for(;S<O;)v=E?4*f[S/4]:j,P=N[v++],x[S++]=P,x[S++]=P,x[S++]=P,x[S++]=m?N[v++]:255,j=v;else for(;S<O;)v=E?4*f[S/4]:j,x[S++]=N[v++],x[S++]=N[v++],x[S++]=N[v++],x[S++]=m?N[v++]:255,j=v},i.prototype.decode=function(){var l;return l=new Uint8Array(this.width*this.height*4),this.copyToImageData(l,this.decodePixels()),l};var o=function(){if(Object.prototype.toString.call(Wt)==="[object Window]"){try{t=Wt.document.createElement("canvas"),n=t.getContext("2d")}catch{return!1}return!0}return!1};return o(),e=function(l){var f;if(o()===!0)return n.width=l.width,n.height=l.height,n.clearRect(0,0,l.width,l.height),n.putImageData(l,0,0),(f=new Image).src=t.toDataURL(),f;throw new Error("This method requires a Browser with Canvas-capability.")},i.prototype.decodeFrames=function(l){var f,m,p,x,S,N,j,v;if(this.animation){for(v=[],m=S=0,N=(j=this.animation.frames).length;S<N;m=++S)f=j[m],p=l.createImageData(f.width,f.height),x=this.decodePixels(new Uint8Array(f.data)),this.copyToImageData(p,x),f.imageData=p,v.push(f.image=e(p));return v}},i.prototype.renderFrame=function(l,f){var m,p,x;return m=(p=this.animation.frames)[f],x=p[f-1],f===0&&l.clearRect(0,0,this.width,this.height),(x!=null?x.disposeOp:void 0)===1?l.clearRect(x.xOffset,x.yOffset,x.width,x.height):(x!=null?x.disposeOp:void 0)===2&&l.putImageData(x.imageData,x.xOffset,x.yOffset),m.blendOp===0&&l.clearRect(m.xOffset,m.yOffset,m.width,m.height),l.drawImage(m.image,m.xOffset,m.yOffset)},i.prototype.animate=function(l){var f,m,p,x,S,N,j=this;return m=0,N=this.animation,x=N.numFrames,p=N.frames,S=N.numPlays,(f=function(){var v,O;if(v=m++%x,O=p[v],j.renderFrame(l,v),x>1&&m/x<S)return j.animation._timeout=setTimeout(f,O.delay)})()},i.prototype.stopAnimation=function(){var l;return clearTimeout((l=this.animation)!=null?l._timeout:void 0)},i.prototype.render=function(l){var f,m;return l._png&&l._png.stopAnimation(),l._png=this,l.width=this.width,l.height=this.height,f=l.getContext("2d"),this.animation?(this.decodeFrames(f),this.animate(f)):(m=f.createImageData(this.width,this.height),this.copyToImageData(m,this.decodePixels()),f.putImageData(m,0,0))},i}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function IN(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,i=e[t++]|e[t++]<<8,o=e[t++],l=o>>7,f=1<<(7&o)+1;e[t++],e[t++];var m=null,p=null;l&&(m=t,p=f,t+=3*f);var x=!0,S=[],N=0,j=null,v=0,O=null;for(this.width=n,this.height=i;x&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,O=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((k=e[t++])>=0))throw Error("Invalid block size");if(k===0)break;t+=k}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var E=e[t++];N=e[t++]|e[t++]<<8,j=e[t++],!(1&E)&&(j=null),v=E>>2&7,t++;break;case 254:for(;;){if(!((k=e[t++])>=0))throw Error("Invalid block size");if(k===0)break;t+=k}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var P=e[t++]|e[t++]<<8,C=e[t++]|e[t++]<<8,_=e[t++]|e[t++]<<8,D=e[t++]|e[t++]<<8,U=e[t++],Y=U>>6&1,ae=1<<(7&U)+1,F=m,L=p,M=!1;U>>7&&(M=!0,F=t,L=ae,t+=3*ae);var z=t;for(t++;;){var k;if(!((k=e[t++])>=0))throw Error("Invalid block size");if(k===0)break;t+=k}S.push({x:P,y:C,width:_,height:D,has_local_palette:M,palette_offset:F,palette_size:L,data_offset:z,data_length:t-z,transparent_index:j,interlaced:!!Y,delay:N,disposal:v});break;case 59:x=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return S.length},this.loopCount=function(){return O},this.frameInfo=function(R){if(R<0||R>=S.length)throw new Error("Frame index out of range.");return S[R]},this.decodeAndBlitFrameBGRA=function(R,re){var ee=this.frameInfo(R),ne=ee.width*ee.height,K=new Uint8Array(ne);kp(e,ee.data_offset,K,ne);var G=ee.palette_offset,te=ee.transparent_index;te===null&&(te=256);var W=ee.width,fe=n-W,le=W,B=4*(ee.y*n+ee.x),q=4*((ee.y+ee.height)*n+ee.x),Q=B,he=4*fe;ee.interlaced===!0&&(he+=4*n*7);for(var ue=8,je=0,Ae=K.length;je<Ae;++je){var ve=K[je];if(le===0&&(le=W,(Q+=he)>=q&&(he=4*fe+4*n*(ue-1),Q=B+(W+fe)*(ue<<1),ue>>=1)),ve===te)Q+=4;else{var Pe=e[G+3*ve],Te=e[G+3*ve+1],Ye=e[G+3*ve+2];re[Q++]=Ye,re[Q++]=Te,re[Q++]=Pe,re[Q++]=255}--le}},this.decodeAndBlitFrameRGBA=function(R,re){var ee=this.frameInfo(R),ne=ee.width*ee.height,K=new Uint8Array(ne);kp(e,ee.data_offset,K,ne);var G=ee.palette_offset,te=ee.transparent_index;te===null&&(te=256);var W=ee.width,fe=n-W,le=W,B=4*(ee.y*n+ee.x),q=4*((ee.y+ee.height)*n+ee.x),Q=B,he=4*fe;ee.interlaced===!0&&(he+=4*n*7);for(var ue=8,je=0,Ae=K.length;je<Ae;++je){var ve=K[je];if(le===0&&(le=W,(Q+=he)>=q&&(he=4*fe+4*n*(ue-1),Q=B+(W+fe)*(ue<<1),ue>>=1)),ve===te)Q+=4;else{var Pe=e[G+3*ve],Te=e[G+3*ve+1],Ye=e[G+3*ve+2];re[Q++]=Pe,re[Q++]=Te,re[Q++]=Ye,re[Q++]=255}--le}}}function kp(e,t,n,i){for(var o=e[t++],l=1<<o,f=l+1,m=f+1,p=o+1,x=(1<<p)-1,S=0,N=0,j=0,v=e[t++],O=new Int32Array(4096),E=null;;){for(;S<16&&v!==0;)N|=e[t++]<<S,S+=8,v===1?v=e[t++]:--v;if(S<p)break;var P=N&x;if(N>>=p,S-=p,P!==l){if(P===f)break;for(var C=P<m?P:E,_=0,D=C;D>l;)D=O[D]>>8,++_;var U=D;if(j+_+(C!==P?1:0)>i)return void nr.log("Warning, gif stream longer than expected.");n[j++]=U;var Y=j+=_;for(C!==P&&(n[j++]=U),D=C;_--;)D=O[D],n[--Y]=255&D,D>>=8;E!==null&&m<4096&&(O[m++]=E<<8|U,m>=x+1&&p<12&&(++p,x=x<<1|1)),E=P}else m=f+1,x=(1<<(p=o+1))-1,E=null}return j!==i&&nr.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Y0(e){var t,n,i,o,l,f=Math.floor,m=new Array(64),p=new Array(64),x=new Array(64),S=new Array(64),N=new Array(65535),j=new Array(65535),v=new Array(64),O=new Array(64),E=[],P=0,C=7,_=new Array(64),D=new Array(64),U=new Array(64),Y=new Array(256),ae=new Array(2048),F=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],L=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],M=[0,1,2,3,4,5,6,7,8,9,10,11],z=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],k=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],R=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],re=[0,1,2,3,4,5,6,7,8,9,10,11],ee=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ne=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function K(B,q){for(var Q=0,he=0,ue=new Array,je=1;je<=16;je++){for(var Ae=1;Ae<=B[je];Ae++)ue[q[he]]=[],ue[q[he]][0]=Q,ue[q[he]][1]=je,he++,Q++;Q*=2}return ue}function G(B){for(var q=B[0],Q=B[1]-1;Q>=0;)q&1<<Q&&(P|=1<<C),Q--,--C<0&&(P==255?(te(255),te(0)):te(P),C=7,P=0)}function te(B){E.push(B)}function W(B){te(B>>8&255),te(255&B)}function fe(B,q,Q,he,ue){for(var je,Ae=ue[0],ve=ue[240],Pe=function(we,Xe){var Re,Qe,gt,pt,qe,ct,St,Ot,At,qt,mt=0;for(At=0;At<8;++At){Re=we[mt],Qe=we[mt+1],gt=we[mt+2],pt=we[mt+3],qe=we[mt+4],ct=we[mt+5],St=we[mt+6];var yn=Re+(Ot=we[mt+7]),Tt=Re-Ot,Ne=Qe+St,ft=Qe-St,xt=gt+ct,Pt=gt-ct,Ft=pt+qe,Ai=pt-qe,Qn=yn+Ft,Jt=yn-Ft,Kr=Ne+xt,Kn=Ne-xt;we[mt]=Qn+Kr,we[mt+4]=Qn-Kr;var Gt=.707106781*(Kn+Jt);we[mt+2]=Jt+Gt,we[mt+6]=Jt-Gt;var en=.382683433*((Qn=Ai+Pt)-(Kn=ft+Tt)),fa=.5411961*Qn+en,xn=1.306562965*Kn+en,Jr=.707106781*(Kr=Pt+ft),Si=Tt+Jr,It=Tt-Jr;we[mt+5]=It+fa,we[mt+3]=It-fa,we[mt+1]=Si+xn,we[mt+7]=Si-xn,mt+=8}for(mt=0,At=0;At<8;++At){Re=we[mt],Qe=we[mt+8],gt=we[mt+16],pt=we[mt+24],qe=we[mt+32],ct=we[mt+40],St=we[mt+48];var Zi=Re+(Ot=we[mt+56]),$r=Re-Ot,ei=Qe+St,vn=Qe-St,kn=gt+ct,Jn=gt-ct,wt=pt+qe,pi=pt-qe,Ci=Zi+wt,$n=Zi-wt,qr=ei+kn,We=ei-kn;we[mt]=Ci+qr,we[mt+32]=Ci-qr;var Je=.707106781*(We+$n);we[mt+16]=$n+Je,we[mt+48]=$n-Je;var bt=.382683433*((Ci=pi+Jn)-(We=vn+$r)),fn=.5411961*Ci+bt,Bi=1.306562965*We+bt,er=.707106781*(qr=Jn+vn),qn=$r+er,wn=$r-er;we[mt+40]=wn+fn,we[mt+24]=wn-fn,we[mt+8]=qn+Bi,we[mt+56]=qn-Bi,mt++}for(At=0;At<64;++At)qt=we[At]*Xe[At],v[At]=qt>0?qt+.5|0:qt-.5|0;return v}(B,q),Te=0;Te<64;++Te)O[F[Te]]=Pe[Te];var Ye=O[0]-Q;Q=O[0],Ye==0?G(he[0]):(G(he[j[je=32767+Ye]]),G(N[je]));for(var He=63;He>0&&O[He]==0;)He--;if(He==0)return G(Ae),Q;for(var ut,Me=1;Me<=He;){for(var me=Me;O[Me]==0&&Me<=He;)++Me;var st=Me-me;if(st>=16){ut=st>>4;for(var Fe=1;Fe<=ut;++Fe)G(ve);st&=15}je=32767+O[Me],G(ue[(st<<4)+j[je]]),G(N[je]),Me++}return He!=63&&G(Ae),Q}function le(B){B=Math.min(Math.max(B,1),100),l!=B&&(function(q){for(var Q=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],he=0;he<64;he++){var ue=f((Q[he]*q+50)/100);ue=Math.min(Math.max(ue,1),255),m[F[he]]=ue}for(var je=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ae=0;Ae<64;Ae++){var ve=f((je[Ae]*q+50)/100);ve=Math.min(Math.max(ve,1),255),p[F[Ae]]=ve}for(var Pe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Te=0,Ye=0;Ye<8;Ye++)for(var He=0;He<8;He++)x[Te]=1/(m[F[Te]]*Pe[Ye]*Pe[He]*8),S[Te]=1/(p[F[Te]]*Pe[Ye]*Pe[He]*8),Te++}(B<50?Math.floor(5e3/B):Math.floor(200-2*B)),l=B)}this.encode=function(B,q){q&&le(q),E=new Array,P=0,C=7,W(65496),W(65504),W(16),te(74),te(70),te(73),te(70),te(0),te(1),te(1),te(0),W(1),W(1),te(0),te(0),function(){W(65499),W(132),te(0);for(var Qe=0;Qe<64;Qe++)te(m[Qe]);te(1);for(var gt=0;gt<64;gt++)te(p[gt])}(),function(Qe,gt){W(65472),W(17),te(8),W(gt),W(Qe),te(3),te(1),te(17),te(0),te(2),te(17),te(1),te(3),te(17),te(1)}(B.width,B.height),function(){W(65476),W(418),te(0);for(var Qe=0;Qe<16;Qe++)te(L[Qe+1]);for(var gt=0;gt<=11;gt++)te(M[gt]);te(16);for(var pt=0;pt<16;pt++)te(z[pt+1]);for(var qe=0;qe<=161;qe++)te(k[qe]);te(1);for(var ct=0;ct<16;ct++)te(R[ct+1]);for(var St=0;St<=11;St++)te(re[St]);te(17);for(var Ot=0;Ot<16;Ot++)te(ee[Ot+1]);for(var At=0;At<=161;At++)te(ne[At])}(),W(65498),W(12),te(3),te(1),te(0),te(2),te(17),te(3),te(17),te(0),te(63),te(0);var Q=0,he=0,ue=0;P=0,C=7,this.encode.displayName="_encode_";for(var je,Ae,ve,Pe,Te,Ye,He,ut,Me,me=B.data,st=B.width,Fe=B.height,we=4*st,Xe=0;Xe<Fe;){for(je=0;je<we;){for(Te=we*Xe+je,He=-1,ut=0,Me=0;Me<64;Me++)Ye=Te+(ut=Me>>3)*we+(He=4*(7&Me)),Xe+ut>=Fe&&(Ye-=we*(Xe+1+ut-Fe)),je+He>=we&&(Ye-=je+He-we+4),Ae=me[Ye++],ve=me[Ye++],Pe=me[Ye++],_[Me]=(ae[Ae]+ae[ve+256>>0]+ae[Pe+512>>0]>>16)-128,D[Me]=(ae[Ae+768>>0]+ae[ve+1024>>0]+ae[Pe+1280>>0]>>16)-128,U[Me]=(ae[Ae+1280>>0]+ae[ve+1536>>0]+ae[Pe+1792>>0]>>16)-128;Q=fe(_,x,Q,t,i),he=fe(D,S,he,n,o),ue=fe(U,S,ue,n,o),je+=32}Xe+=8}if(C>=0){var Re=[];Re[1]=C+1,Re[0]=(1<<C+1)-1,G(Re)}return W(65497),new Uint8Array(E)},e=e||50,function(){for(var B=String.fromCharCode,q=0;q<256;q++)Y[q]=B(q)}(),t=K(L,M),n=K(R,re),i=K(z,k),o=K(ee,ne),function(){for(var B=1,q=2,Q=1;Q<=15;Q++){for(var he=B;he<q;he++)j[32767+he]=Q,N[32767+he]=[],N[32767+he][1]=Q,N[32767+he][0]=he;for(var ue=-(q-1);ue<=-B;ue++)j[32767+ue]=Q,N[32767+ue]=[],N[32767+ue][1]=Q,N[32767+ue][0]=q-1+ue;B<<=1,q<<=1}}(),function(){for(var B=0;B<256;B++)ae[B]=19595*B,ae[B+256>>0]=38470*B,ae[B+512>>0]=7471*B+32768,ae[B+768>>0]=-11059*B,ae[B+1024>>0]=-21709*B,ae[B+1280>>0]=32768*B+8421375,ae[B+1536>>0]=-27439*B,ae[B+1792>>0]=-5329*B}(),le(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function ns(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Pp(e){function t(L){if(!L)throw Error("assert :P")}function n(L,M,z){for(var k=0;4>k;k++)if(L[M+k]!=z.charCodeAt(k))return!0;return!1}function i(L,M,z,k,R){for(var re=0;re<R;re++)L[M+re]=z[k+re]}function o(L,M,z,k){for(var R=0;R<k;R++)L[M+R]=z}function l(L){return new Int32Array(L)}function f(L,M){for(var z=[],k=0;k<L;k++)z.push(new M);return z}function m(L,M){var z=[];return function k(R,re,ee){for(var ne=ee[re],K=0;K<ne&&(R.push(ee.length>re+1?[]:new M),!(ee.length<re+1));K++)k(R[K],re+1,ee)}(z,0,L),z}var p=function(){var L=this;function M(g,y){for(var I=1<<y-1>>>0;g&I;)I>>>=1;return I?(g&I-1)+I:g}function z(g,y,I,H,J){t(!(H%I));do g[y+(H-=I)]=J;while(0<H)}function k(g,y,I,H,J){if(t(2328>=J),512>=J)var ie=l(512);else if((ie=l(J))==null)return 0;return function(oe,ce,de,ye,_e,Ue){var ze,Oe,nt=ce,Ze=1<<de,Ie=l(16),De=l(16);for(t(_e!=0),t(ye!=null),t(oe!=null),t(0<de),Oe=0;Oe<_e;++Oe){if(15<ye[Oe])return 0;++Ie[ye[Oe]]}if(Ie[0]==_e)return 0;for(De[1]=0,ze=1;15>ze;++ze){if(Ie[ze]>1<<ze)return 0;De[ze+1]=De[ze]+Ie[ze]}for(Oe=0;Oe<_e;++Oe)ze=ye[Oe],0<ye[Oe]&&(Ue[De[ze]++]=Oe);if(De[15]==1)return(ye=new R).g=0,ye.value=Ue[0],z(oe,nt,1,Ze,ye),Ze;var et,lt=-1,tt=Ze-1,Ct=0,yt=1,zt=1,vt=1<<de;for(Oe=0,ze=1,_e=2;ze<=de;++ze,_e<<=1){if(yt+=zt<<=1,0>(zt-=Ie[ze]))return 0;for(;0<Ie[ze];--Ie[ze])(ye=new R).g=ze,ye.value=Ue[Oe++],z(oe,nt+Ct,_e,vt,ye),Ct=M(Ct,ze)}for(ze=de+1,_e=2;15>=ze;++ze,_e<<=1){if(yt+=zt<<=1,0>(zt-=Ie[ze]))return 0;for(;0<Ie[ze];--Ie[ze]){if(ye=new R,(Ct&tt)!=lt){for(nt+=vt,et=1<<(lt=ze)-de;15>lt&&!(0>=(et-=Ie[lt]));)++lt,et<<=1;Ze+=vt=1<<(et=lt-de),oe[ce+(lt=Ct&tt)].g=et+de,oe[ce+lt].value=nt-ce-lt}ye.g=ze-de,ye.value=Ue[Oe++],z(oe,nt+(Ct>>de),_e,vt,ye),Ct=M(Ct,ze)}}return yt!=2*De[15]-1?0:Ze}(g,y,I,H,J,ie)}function R(){this.value=this.g=0}function re(){this.value=this.g=0}function ee(){this.G=f(5,R),this.H=l(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=f(Wn,re)}function ne(g,y,I,H){t(g!=null),t(y!=null),t(2147483648>H),g.Ca=254,g.I=0,g.b=-8,g.Ka=0,g.oa=y,g.pa=I,g.Jd=y,g.Yc=I+H,g.Zc=4<=H?I+H-4+1:I,je(g)}function K(g,y){for(var I=0;0<y--;)I|=ve(g,128)<<y;return I}function G(g,y){var I=K(g,y);return Ae(g)?-I:I}function te(g,y,I,H){var J,ie=0;for(t(g!=null),t(y!=null),t(4294967288>H),g.Sb=H,g.Ra=0,g.u=0,g.h=0,4<H&&(H=4),J=0;J<H;++J)ie+=y[I+J]<<8*J;g.Ra=ie,g.bb=H,g.oa=y,g.pa=I}function W(g){for(;8<=g.u&&g.bb<g.Sb;)g.Ra>>>=8,g.Ra+=g.oa[g.pa+g.bb]<<ka-8>>>0,++g.bb,g.u-=8;Q(g)&&(g.h=1,g.u=0)}function fe(g,y){if(t(0<=y),!g.h&&y<=gs){var I=q(g)&po[y];return g.u+=y,W(g),I}return g.h=1,g.u=0}function le(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function B(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function q(g){return g.Ra>>>(g.u&ka-1)>>>0}function Q(g){return t(g.bb<=g.Sb),g.h||g.bb==g.Sb&&g.u>ka}function he(g,y){g.u=y,g.h=Q(g)}function ue(g){g.u>=cn&&(t(g.u>=cn),W(g))}function je(g){t(g!=null&&g.oa!=null),g.pa<g.Zc?(g.I=(g.oa[g.pa++]|g.I<<8)>>>0,g.b+=8):(t(g!=null&&g.oa!=null),g.pa<g.Yc?(g.b+=8,g.I=g.oa[g.pa++]|g.I<<8):g.Ka?g.b=0:(g.I<<=8,g.b+=8,g.Ka=1))}function Ae(g){return K(g,1)}function ve(g,y){var I=g.Ca;0>g.b&&je(g);var H=g.b,J=I*y>>>8,ie=(g.I>>>H>J)+0;for(ie?(I-=J,g.I-=J+1<<H>>>0):I=J+1,H=I,J=0;256<=H;)J+=8,H>>=8;return H=7^J+ni[H],g.b-=H,g.Ca=(I<<H)-1,ie}function Pe(g,y,I){g[y+0]=I>>24&255,g[y+1]=I>>16&255,g[y+2]=I>>8&255,g[y+3]=I>>0&255}function Te(g,y){return g[y+0]<<0|g[y+1]<<8}function Ye(g,y){return Te(g,y)|g[y+2]<<16}function He(g,y){return Te(g,y)|Te(g,y+2)<<16}function ut(g,y){var I=1<<y;return t(g!=null),t(0<y),g.X=l(I),g.X==null?0:(g.Mb=32-y,g.Xa=y,1)}function Me(g,y){t(g!=null),t(y!=null),t(g.Xa==y.Xa),i(y.X,0,g.X,0,1<<y.Xa)}function me(){this.X=[],this.Xa=this.Mb=0}function st(g,y,I,H){t(I!=null),t(H!=null);var J=I[0],ie=H[0];return J==0&&(J=(g*ie+y/2)/y),ie==0&&(ie=(y*J+g/2)/g),0>=J||0>=ie?0:(I[0]=J,H[0]=ie,1)}function Fe(g,y){return g+(1<<y)-1>>>y}function we(g,y){return((4278255360&g)+(4278255360&y)>>>0&4278255360)+((16711935&g)+(16711935&y)>>>0&16711935)>>>0}function Xe(g,y){L[y]=function(I,H,J,ie,oe,ce,de){var ye;for(ye=0;ye<oe;++ye){var _e=L[g](ce[de+ye-1],J,ie+ye);ce[de+ye]=we(I[H+ye],_e)}}}function Re(){this.ud=this.hd=this.jd=0}function Qe(g,y){return((4278124286&(g^y))>>>1)+(g&y)>>>0}function gt(g){return 0<=g&&256>g?g:0>g?0:255<g?255:void 0}function pt(g,y){return gt(g+(g-y+.5>>1))}function qe(g,y,I){return Math.abs(y-I)-Math.abs(g-I)}function ct(g,y,I,H,J,ie,oe){for(H=ie[oe-1],I=0;I<J;++I)ie[oe+I]=H=we(g[y+I],H)}function St(g,y,I,H,J){var ie;for(ie=0;ie<I;++ie){var oe=g[y+ie],ce=oe>>8&255,de=16711935&(de=(de=16711935&oe)+((ce<<16)+ce));H[J+ie]=(4278255360&oe)+de>>>0}}function Ot(g,y){y.jd=g>>0&255,y.hd=g>>8&255,y.ud=g>>16&255}function At(g,y,I,H,J,ie){var oe;for(oe=0;oe<H;++oe){var ce=y[I+oe],de=ce>>>8,ye=ce,_e=255&(_e=(_e=ce>>>16)+((g.jd<<24>>24)*(de<<24>>24)>>>5));ye=255&(ye=(ye=ye+((g.hd<<24>>24)*(de<<24>>24)>>>5))+((g.ud<<24>>24)*(_e<<24>>24)>>>5)),J[ie+oe]=(4278255360&ce)+(_e<<16)+ye}}function qt(g,y,I,H,J){L[y]=function(ie,oe,ce,de,ye,_e,Ue,ze,Oe){for(de=Ue;de<ze;++de)for(Ue=0;Ue<Oe;++Ue)ye[_e++]=J(ce[H(ie[oe++])])},L[g]=function(ie,oe,ce,de,ye,_e,Ue){var ze=8>>ie.b,Oe=ie.Ea,nt=ie.K[0],Ze=ie.w;if(8>ze)for(ie=(1<<ie.b)-1,Ze=(1<<ze)-1;oe<ce;++oe){var Ie,De=0;for(Ie=0;Ie<Oe;++Ie)Ie&ie||(De=H(de[ye++])),_e[Ue++]=J(nt[De&Ze]),De>>=ze}else L["VP8LMapColor"+I](de,ye,nt,Ze,_e,Ue,oe,ce,Oe)}}function mt(g,y,I,H,J){for(I=y+I;y<I;){var ie=g[y++];H[J++]=ie>>16&255,H[J++]=ie>>8&255,H[J++]=ie>>0&255}}function yn(g,y,I,H,J){for(I=y+I;y<I;){var ie=g[y++];H[J++]=ie>>16&255,H[J++]=ie>>8&255,H[J++]=ie>>0&255,H[J++]=ie>>24&255}}function Tt(g,y,I,H,J){for(I=y+I;y<I;){var ie=(oe=g[y++])>>16&240|oe>>12&15,oe=oe>>0&240|oe>>28&15;H[J++]=ie,H[J++]=oe}}function Ne(g,y,I,H,J){for(I=y+I;y<I;){var ie=(oe=g[y++])>>16&248|oe>>13&7,oe=oe>>5&224|oe>>3&31;H[J++]=ie,H[J++]=oe}}function ft(g,y,I,H,J){for(I=y+I;y<I;){var ie=g[y++];H[J++]=ie>>0&255,H[J++]=ie>>8&255,H[J++]=ie>>16&255}}function xt(g,y,I,H,J,ie){if(ie==0)for(I=y+I;y<I;)Pe(H,((ie=g[y++])[0]>>24|ie[1]>>8&65280|ie[2]<<8&16711680|ie[3]<<24)>>>0),J+=32;else i(H,J,g,y,I)}function Pt(g,y){L[y][0]=L[g+"0"],L[y][1]=L[g+"1"],L[y][2]=L[g+"2"],L[y][3]=L[g+"3"],L[y][4]=L[g+"4"],L[y][5]=L[g+"5"],L[y][6]=L[g+"6"],L[y][7]=L[g+"7"],L[y][8]=L[g+"8"],L[y][9]=L[g+"9"],L[y][10]=L[g+"10"],L[y][11]=L[g+"11"],L[y][12]=L[g+"12"],L[y][13]=L[g+"13"],L[y][14]=L[g+"0"],L[y][15]=L[g+"0"]}function Ft(g){return g==Vh||g==qh||g==Ud||g==Gh}function Ai(){this.eb=[],this.size=this.A=this.fb=0}function Qn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Jt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ai,this.f.kb=new Qn,this.sd=null}function Kr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Kn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Gt(g){return alert("todo:WebPSamplerProcessPlane"),g.T}function en(g,y){var I=g.T,H=y.ba.f.RGBA,J=H.eb,ie=H.fb+g.ka*H.A,oe=Ba[y.ba.S],ce=g.y,de=g.O,ye=g.f,_e=g.N,Ue=g.ea,ze=g.W,Oe=y.cc,nt=y.dc,Ze=y.Mc,Ie=y.Nc,De=g.ka,et=g.ka+g.T,lt=g.U,tt=lt+1>>1;for(De==0?oe(ce,de,null,null,ye,_e,Ue,ze,ye,_e,Ue,ze,J,ie,null,null,lt):(oe(y.ec,y.fc,ce,de,Oe,nt,Ze,Ie,ye,_e,Ue,ze,J,ie-H.A,J,ie,lt),++I);De+2<et;De+=2)Oe=ye,nt=_e,Ze=Ue,Ie=ze,_e+=g.Rc,ze+=g.Rc,ie+=2*H.A,oe(ce,(de+=2*g.fa)-g.fa,ce,de,Oe,nt,Ze,Ie,ye,_e,Ue,ze,J,ie-H.A,J,ie,lt);return de+=g.fa,g.j+et<g.o?(i(y.ec,y.fc,ce,de,lt),i(y.cc,y.dc,ye,_e,tt),i(y.Mc,y.Nc,Ue,ze,tt),I--):1&et||oe(ce,de,null,null,ye,_e,Ue,ze,ye,_e,Ue,ze,J,ie+H.A,null,null,lt),I}function fa(g,y,I){var H=g.F,J=[g.J];if(H!=null){var ie=g.U,oe=y.ba.S,ce=oe==Bd||oe==Ud;y=y.ba.f.RGBA;var de=[0],ye=g.ka;de[0]=g.T,g.Kb&&(ye==0?--de[0]:(--ye,J[0]-=g.width),g.j+g.ka+g.T==g.o&&(de[0]=g.o-g.j-ye));var _e=y.eb;ye=y.fb+ye*y.A,g=ar(H,J[0],g.width,ie,de,_e,ye+(ce?0:3),y.A),t(I==de),g&&Ft(oe)&&ea(_e,ye,ce,ie,de,y.A)}return 0}function xn(g){var y=g.ma,I=y.ba.S,H=11>I,J=I==Pd||I==Fd||I==Bd||I==Hh||I==12||Ft(I);if(y.memory=null,y.Ib=null,y.Jb=null,y.Nd=null,!Ms(y.Oa,g,J?11:12))return 0;if(J&&Ft(I)&&rt(),g.da)alert("todo:use_scaling");else{if(H){if(y.Ib=Gt,g.Kb){if(I=g.U+1>>1,y.memory=l(g.U+2*I),y.memory==null)return 0;y.ec=y.memory,y.fc=0,y.cc=y.ec,y.dc=y.fc+g.U,y.Mc=y.cc,y.Nc=y.dc+I,y.Ib=en,rt()}}else alert("todo:EmitYUV");J&&(y.Jb=fa,H&&ke())}if(H&&!Em){for(g=0;256>g;++g)sv[g]=89858*(g-128)+Hd>>zd,cv[g]=-22014*(g-128)+Hd,lv[g]=-45773*(g-128),ov[g]=113618*(g-128)+Hd>>zd;for(g=du;g<Xh;++g)y=76283*(g-16)+Hd>>zd,uv[g-du]=jr(y,255),dv[g-du]=jr(y+8>>4,15);Em=1}return 1}function Jr(g){var y=g.ma,I=g.U,H=g.T;return t(!(1&g.ka)),0>=I||0>=H?0:(I=y.Ib(g,y),y.Jb!=null&&y.Jb(g,y,I),y.Dc+=I,1)}function Si(g){g.ma.memory=null}function It(g,y,I,H){return fe(g,8)!=47?0:(y[0]=fe(g,14)+1,I[0]=fe(g,14)+1,H[0]=fe(g,1),fe(g,3)!=0?0:!g.h)}function Zi(g,y){if(4>g)return g+1;var I=g-2>>1;return(2+(1&g)<<I)+fe(y,I)+1}function $r(g,y){return 120<y?y-120:1<=(I=((I=Wy[y-1])>>4)*g+(8-(15&I)))?I:1;var I}function ei(g,y,I){var H=q(I),J=g[y+=255&H].g-8;return 0<J&&(he(I,I.u+8),H=q(I),y+=g[y].value,y+=H&(1<<J)-1),he(I,I.u+g[y].g),g[y].value}function vn(g,y,I){return I.g+=g.g,I.value+=g.value<<y>>>0,t(8>=I.g),g.g}function kn(g,y,I){var H=g.xc;return t((y=H==0?0:g.vc[g.md*(I>>H)+(y>>H)])<g.Wb),g.Ya[y]}function Jn(g,y,I,H){var J=g.ab,ie=g.c*y,oe=g.C;y=oe+y;var ce=I,de=H;for(H=g.Ta,I=g.Ua;0<J--;){var ye=g.gc[J],_e=oe,Ue=y,ze=ce,Oe=de,nt=(de=H,ce=I,ye.Ea);switch(t(_e<Ue),t(Ue<=ye.nc),ye.hc){case 2:a(ze,Oe,(Ue-_e)*nt,de,ce);break;case 0:var Ze=_e,Ie=Ue,De=de,et=ce,lt=(vt=ye).Ea;Ze==0&&(Z(ze,Oe,null,null,1,De,et),ct(ze,Oe+1,0,0,lt-1,De,et+1),Oe+=lt,et+=lt,++Ze);for(var tt=1<<vt.b,Ct=tt-1,yt=Fe(lt,vt.b),zt=vt.K,vt=vt.w+(Ze>>vt.b)*yt;Ze<Ie;){var In=zt,Fn=vt,Tn=1;for(r(ze,Oe,De,et-lt,1,De,et);Tn<lt;){var bn=(Tn&~Ct)+tt;bn>lt&&(bn=lt),(0,b[In[Fn++]>>8&15])(ze,Oe+ +Tn,De,et+Tn-lt,bn-Tn,De,et+Tn),Tn=bn}Oe+=lt,et+=lt,++Ze&Ct||(vt+=yt)}Ue!=ye.nc&&i(de,ce-nt,de,ce+(Ue-_e-1)*nt,nt);break;case 1:for(nt=ze,Ie=Oe,lt=(ze=ye.Ea)-(et=ze&~(De=(Oe=1<<ye.b)-1)),Ze=Fe(ze,ye.b),tt=ye.K,ye=ye.w+(_e>>ye.b)*Ze;_e<Ue;){for(Ct=tt,yt=ye,zt=new Re,vt=Ie+et,In=Ie+ze;Ie<vt;)Ot(Ct[yt++],zt),w(zt,nt,Ie,Oe,de,ce),Ie+=Oe,ce+=Oe;Ie<In&&(Ot(Ct[yt++],zt),w(zt,nt,Ie,lt,de,ce),Ie+=lt,ce+=lt),++_e&De||(ye+=Ze)}break;case 3:if(ze==de&&Oe==ce&&0<ye.b){for(Ie=de,ze=nt=ce+(Ue-_e)*nt-(et=(Ue-_e)*Fe(ye.Ea,ye.b)),Oe=de,De=ce,Ze=[],et=(lt=et)-1;0<=et;--et)Ze[et]=Oe[De+et];for(et=lt-1;0<=et;--et)Ie[ze+et]=Ze[et];c(ye,_e,Ue,de,nt,de,ce)}else c(ye,_e,Ue,ze,Oe,de,ce)}ce=H,de=I}de!=I&&i(H,I,ce,de,ie)}function wt(g,y){var I=g.V,H=g.Ba+g.c*g.C,J=y-g.C;if(t(y<=g.l.o),t(16>=J),0<J){var ie=g.l,oe=g.Ta,ce=g.Ua,de=ie.width;if(Jn(g,J,I,H),J=ce=[ce],t((I=g.C)<(H=y)),t(ie.v<ie.va),H>ie.o&&(H=ie.o),I<ie.j){var ye=ie.j-I;I=ie.j,J[0]+=ye*de}if(I>=H?I=0:(J[0]+=4*ie.v,ie.ka=I-ie.j,ie.U=ie.va-ie.v,ie.T=H-I,I=1),I){if(ce=ce[0],11>(I=g.ca).S){var _e=I.f.RGBA,Ue=(H=I.S,J=ie.U,ie=ie.T,ye=_e.eb,_e.A),ze=ie;for(_e=_e.fb+g.Ma*_e.A;0<ze--;){var Oe=oe,nt=ce,Ze=J,Ie=ye,De=_e;switch(H){case kd:T(Oe,nt,Ze,Ie,De);break;case Pd:V(Oe,nt,Ze,Ie,De);break;case Vh:V(Oe,nt,Ze,Ie,De),ea(Ie,De,0,Ze,1,0);break;case xm:be(Oe,nt,Ze,Ie,De);break;case Fd:xt(Oe,nt,Ze,Ie,De,1);break;case qh:xt(Oe,nt,Ze,Ie,De,1),ea(Ie,De,0,Ze,1,0);break;case Bd:xt(Oe,nt,Ze,Ie,De,0);break;case Ud:xt(Oe,nt,Ze,Ie,De,0),ea(Ie,De,1,Ze,1,0);break;case Hh:X(Oe,nt,Ze,Ie,De);break;case Gh:X(Oe,nt,Ze,Ie,De),ir(Ie,De,Ze,1,0);break;case bm:se(Oe,nt,Ze,Ie,De);break;default:t(0)}ce+=de,_e+=Ue}g.Ma+=ie}else alert("todo:EmitRescaledRowsYUVA");t(g.Ma<=I.height)}}g.C=y,t(g.C<=g.i)}function pi(g){var y;if(0<g.ua)return 0;for(y=0;y<g.Wb;++y){var I=g.Ya[y].G,H=g.Ya[y].H;if(0<I[1][H[1]+0].g||0<I[2][H[2]+0].g||0<I[3][H[3]+0].g)return 0}return 1}function Ci(g,y,I,H,J,ie){if(g.Z!=0){var oe=g.qd,ce=g.rd;for(t(bo[g.Z]!=null);y<I;++y)bo[g.Z](oe,ce,H,J,H,J,ie),oe=H,ce=J,J+=ie;g.qd=oe,g.rd=ce}}function $n(g,y){var I=g.l.ma,H=I.Z==0||I.Z==1?g.l.j:g.C;if(H=g.C<H?H:g.C,t(y<=g.l.o),y>H){var J=g.l.width,ie=I.ca,oe=I.tb+J*H,ce=g.V,de=g.Ba+g.c*H,ye=g.gc;t(g.ab==1),t(ye[0].hc==3),d(ye[0],H,y,ce,de,ie,oe),Ci(I,H,y,ie,oe,J)}g.C=g.Ma=y}function qr(g,y,I,H,J,ie,oe){var ce=g.$/H,de=g.$%H,ye=g.m,_e=g.s,Ue=I+g.$,ze=Ue;J=I+H*J;var Oe=I+H*ie,nt=280+_e.ua,Ze=g.Pb?ce:16777216,Ie=0<_e.ua?_e.Wa:null,De=_e.wc,et=Ue<Oe?kn(_e,de,ce):null;t(g.C<ie),t(Oe<=J);var lt=!1;e:for(;;){for(;lt||Ue<Oe;){var tt=0;if(ce>=Ze){var Ct=Ue-I;t((Ze=g).Pb),Ze.wd=Ze.m,Ze.xd=Ct,0<Ze.s.ua&&Me(Ze.s.Wa,Ze.s.vb),Ze=ce+Xy}if(de&De||(et=kn(_e,de,ce)),t(et!=null),et.Qb&&(y[Ue]=et.qb,lt=!0),!lt)if(ue(ye),et.jc){tt=ye,Ct=y;var yt=Ue,zt=et.pd[q(tt)&Wn-1];t(et.jc),256>zt.g?(he(tt,tt.u+zt.g),Ct[yt]=zt.value,tt=0):(he(tt,tt.u+zt.g-256),t(256<=zt.value),tt=zt.value),tt==0&&(lt=!0)}else tt=ei(et.G[0],et.H[0],ye);if(ye.h)break;if(lt||256>tt){if(!lt)if(et.nd)y[Ue]=(et.qb|tt<<8)>>>0;else{if(ue(ye),lt=ei(et.G[1],et.H[1],ye),ue(ye),Ct=ei(et.G[2],et.H[2],ye),yt=ei(et.G[3],et.H[3],ye),ye.h)break;y[Ue]=(yt<<24|lt<<16|tt<<8|Ct)>>>0}if(lt=!1,++Ue,++de>=H&&(de=0,++ce,oe!=null&&ce<=ie&&!(ce%16)&&oe(g,ce),Ie!=null))for(;ze<Ue;)tt=y[ze++],Ie.X[(506832829*tt&4294967295)>>>Ie.Mb]=tt}else if(280>tt){if(tt=Zi(tt-256,ye),Ct=ei(et.G[4],et.H[4],ye),ue(ye),Ct=$r(H,Ct=Zi(Ct,ye)),ye.h)break;if(Ue-I<Ct||J-Ue<tt)break e;for(yt=0;yt<tt;++yt)y[Ue+yt]=y[Ue+yt-Ct];for(Ue+=tt,de+=tt;de>=H;)de-=H,++ce,oe!=null&&ce<=ie&&!(ce%16)&&oe(g,ce);if(t(Ue<=J),de&De&&(et=kn(_e,de,ce)),Ie!=null)for(;ze<Ue;)tt=y[ze++],Ie.X[(506832829*tt&4294967295)>>>Ie.Mb]=tt}else{if(!(tt<nt))break e;for(lt=tt-280,t(Ie!=null);ze<Ue;)tt=y[ze++],Ie.X[(506832829*tt&4294967295)>>>Ie.Mb]=tt;tt=Ue,t(!(lt>>>(Ct=Ie).Xa)),y[tt]=Ct.X[lt],lt=!0}lt||t(ye.h==Q(ye))}if(g.Pb&&ye.h&&Ue<J)t(g.m.h),g.a=5,g.m=g.wd,g.$=g.xd,0<g.s.ua&&Me(g.s.vb,g.s.Wa);else{if(ye.h)break e;oe!=null&&oe(g,ce>ie?ie:ce),g.a=0,g.$=Ue-I}return 1}return g.a=3,0}function We(g){t(g!=null),g.vc=null,g.yc=null,g.Ya=null;var y=g.Wa;y!=null&&(y.X=null),g.vb=null,t(g!=null)}function Je(){var g=new Sr;return g==null?null:(g.a=0,g.xb=wm,Pt("Predictor","VP8LPredictors"),Pt("Predictor","VP8LPredictors_C"),Pt("PredictorAdd","VP8LPredictorsAdd"),Pt("PredictorAdd","VP8LPredictorsAdd_C"),a=St,w=At,T=mt,V=yn,X=Tt,se=Ne,be=ft,L.VP8LMapColor32b=u,L.VP8LMapColor8b=h,g)}function bt(g,y,I,H,J){var ie=1,oe=[g],ce=[y],de=H.m,ye=H.s,_e=null,Ue=0;e:for(;;){if(I)for(;ie&&fe(de,1);){var ze=oe,Oe=ce,nt=H,Ze=1,Ie=nt.m,De=nt.gc[nt.ab],et=fe(Ie,2);if(nt.Oc&1<<et)ie=0;else{switch(nt.Oc|=1<<et,De.hc=et,De.Ea=ze[0],De.nc=Oe[0],De.K=[null],++nt.ab,t(4>=nt.ab),et){case 0:case 1:De.b=fe(Ie,3)+2,Ze=bt(Fe(De.Ea,De.b),Fe(De.nc,De.b),0,nt,De.K),De.K=De.K[0];break;case 3:var lt,tt=fe(Ie,8)+1,Ct=16<tt?0:4<tt?1:2<tt?2:3;if(ze[0]=Fe(De.Ea,Ct),De.b=Ct,lt=Ze=bt(tt,1,0,nt,De.K)){var yt,zt=tt,vt=De,In=1<<(8>>vt.b),Fn=l(In);if(Fn==null)lt=0;else{var Tn=vt.K[0],bn=vt.w;for(Fn[0]=vt.K[0][0],yt=1;yt<1*zt;++yt)Fn[yt]=we(Tn[bn+yt],Fn[yt-1]);for(;yt<4*In;++yt)Fn[yt]=0;vt.K[0]=null,vt.K[0]=Fn,lt=1}}Ze=lt;break;case 2:break;default:t(0)}ie=Ze}}if(oe=oe[0],ce=ce[0],ie&&fe(de,1)&&!(ie=1<=(Ue=fe(de,4))&&11>=Ue)){H.a=3;break e}var tr;if(tr=ie)t:{var Yn,sn,Wr,ta=H,Yr=oe,na=ce,Bn=Ue,xa=I,ba=ta.m,ui=ta.s,yi=[null],Vi=1,Ua=0,ps=Yy[Bn];n:for(;;){if(xa&&fe(ba,1)){var di=fe(ba,3)+2,Fs=Fe(Yr,di),Al=Fe(na,di),rc=Fs*Al;if(!bt(Fs,Al,0,ta,yi))break n;for(yi=yi[0],ui.xc=di,Yn=0;Yn<rc;++Yn){var yo=yi[Yn]>>8&65535;yi[Yn]=yo,yo>=Vi&&(Vi=yo+1)}}if(ba.h)break n;for(sn=0;5>sn;++sn){var Ir=ym[sn];!sn&&0<Bn&&(Ir+=1<<Bn),Ua<Ir&&(Ua=Ir)}var Zh=f(Vi*ps,R),_m=Vi,Im=f(_m,ee);if(Im==null)var qd=null;else t(65536>=_m),qd=Im;var fu=l(Ua);if(qd==null||fu==null||Zh==null){ta.a=1;break n}var Gd=Zh;for(Yn=Wr=0;Yn<Vi;++Yn){var es=qd[Yn],ic=es.G,ac=es.H,Dm=0,Wd=1,Lm=0;for(sn=0;5>sn;++sn){Ir=ym[sn],ic[sn]=Gd,ac[sn]=Wr,!sn&&0<Bn&&(Ir+=1<<Bn);i:{var Yd,Qh=Ir,Xd=ta,hu=fu,mv=Gd,gv=Wr,Kh=0,vo=Xd.m,pv=fe(vo,1);if(o(hu,0,0,Qh),pv){var xv=fe(vo,1)+1,bv=fe(vo,1),Om=fe(vo,bv==0?1:8);hu[Om]=1,xv==2&&(hu[Om=fe(vo,8)]=1);var Zd=1}else{var Mm=l(19),Rm=fe(vo,4)+4;if(19<Rm){Xd.a=3;var Qd=0;break i}for(Yd=0;Yd<Rm;++Yd)Mm[Gy[Yd]]=fe(vo,3);var Jh=void 0,mu=void 0,km=Xd,yv=Mm,Kd=Qh,Pm=hu,$h=0,wo=km.m,Fm=8,Bm=f(128,R);r:for(;k(Bm,0,7,yv,19);){if(fe(wo,1)){var vv=2+2*fe(wo,3);if((Jh=2+fe(wo,vv))>Kd)break r}else Jh=Kd;for(mu=0;mu<Kd&&Jh--;){ue(wo);var Um=Bm[0+(127&q(wo))];he(wo,wo.u+Um.g);var sc=Um.value;if(16>sc)Pm[mu++]=sc,sc!=0&&(Fm=sc);else{var wv=sc==16,zm=sc-16,Nv=Vy[zm],Hm=fe(wo,Hy[zm])+Nv;if(mu+Hm>Kd)break r;for(var Av=wv?Fm:0;0<Hm--;)Pm[mu++]=Av}}$h=1;break r}$h||(km.a=3),Zd=$h}(Zd=Zd&&!vo.h)&&(Kh=k(mv,gv,8,hu,Qh)),Zd&&Kh!=0?Qd=Kh:(Xd.a=3,Qd=0)}if(Qd==0)break n;if(Wd&&qy[sn]==1&&(Wd=Gd[Wr].g==0),Dm+=Gd[Wr].g,Wr+=Qd,3>=sn){var gu,e0=fu[0];for(gu=1;gu<Ir;++gu)fu[gu]>e0&&(e0=fu[gu]);Lm+=e0}}if(es.nd=Wd,es.Qb=0,Wd&&(es.qb=(ic[3][ac[3]+0].value<<24|ic[1][ac[1]+0].value<<16|ic[2][ac[2]+0].value)>>>0,Dm==0&&256>ic[0][ac[0]+0].value&&(es.Qb=1,es.qb+=ic[0][ac[0]+0].value<<8)),es.jc=!es.Qb&&6>Lm,es.jc){var Jd,Bs=es;for(Jd=0;Jd<Wn;++Jd){var No=Jd,Ao=Bs.pd[No],$d=Bs.G[0][Bs.H[0]+No];256<=$d.value?(Ao.g=$d.g+256,Ao.value=$d.value):(Ao.g=0,Ao.value=0,No>>=vn($d,8,Ao),No>>=vn(Bs.G[1][Bs.H[1]+No],16,Ao),No>>=vn(Bs.G[2][Bs.H[2]+No],0,Ao),vn(Bs.G[3][Bs.H[3]+No],24,Ao))}}}ui.vc=yi,ui.Wb=Vi,ui.Ya=qd,ui.yc=Zh,tr=1;break t}tr=0}if(!(ie=tr)){H.a=3;break e}if(0<Ue){if(ye.ua=1<<Ue,!ut(ye.Wa,Ue)){H.a=1,ie=0;break e}}else ye.ua=0;var t0=H,Vm=oe,Sv=ce,n0=t0.s,r0=n0.xc;if(t0.c=Vm,t0.i=Sv,n0.md=Fe(Vm,r0),n0.wc=r0==0?-1:(1<<r0)-1,I){H.xb=tv;break e}if((_e=l(oe*ce))==null){H.a=1,ie=0;break e}ie=(ie=qr(H,_e,0,oe,ce,ce,null))&&!de.h;break e}return ie?(J!=null?J[0]=_e:(t(_e==null),t(I)),H.$=0,I||We(ye)):We(ye),ie}function fn(g,y){var I=g.c*g.i,H=I+y+16*y;return t(g.c<=y),g.V=l(H),g.V==null?(g.Ta=null,g.Ua=0,g.a=1,0):(g.Ta=g.V,g.Ua=g.Ba+I+y,1)}function Bi(g,y){var I=g.C,H=y-I,J=g.V,ie=g.Ba+g.c*I;for(t(y<=g.l.o);0<H;){var oe=16<H?16:H,ce=g.l.ma,de=g.l.width,ye=de*oe,_e=ce.ca,Ue=ce.tb+de*I,ze=g.Ta,Oe=g.Ua;Jn(g,oe,J,ie),Fr(ze,Oe,_e,Ue,ye),Ci(ce,I,I+oe,_e,Ue,de),H-=oe,J+=oe*g.c,I+=oe}t(I==y),g.C=g.Ma=y}function er(){this.ub=this.yd=this.td=this.Rb=0}function qn(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function wn(){this.Fb=this.Bb=this.Cb=0,this.Zb=l(4),this.Lb=l(4)}function La(){this.Yb=function(){var g=[];return function y(I,H,J){for(var ie=J[H],oe=0;oe<ie&&(I.push(J.length>H+1?[]:0),!(J.length<H+1));oe++)y(I[oe],H+1,J)}(g,0,[3,11]),g}()}function xi(){this.jb=l(3),this.Wc=m([4,8],La),this.Xc=m([4,17],La)}function Ui(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new l(4),this.od=new l(4)}function $e(){this.ld=this.La=this.dd=this.tc=0}function so(){this.Na=this.la=0}function Gn(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Qi(){this.ad=l(384),this.Za=0,this.Ob=l(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function dn(){this.uc=this.M=this.Nb=0,this.wa=Array(new $e),this.Y=0,this.ya=Array(new Qi),this.aa=0,this.l=new an}function Bt(){this.y=l(16),this.f=l(8),this.ea=l(8)}function Nn(){this.cb=this.a=0,this.sc="",this.m=new le,this.Od=new er,this.Kc=new qn,this.ed=new Ui,this.Qa=new wn,this.Ic=this.$c=this.Aa=0,this.D=new dn,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=f(8,le),this.ia=0,this.pb=f(4,Gn),this.Pa=new xi,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Bt),this.Hd=0,this.rb=Array(new so),this.sb=0,this.wa=Array(new $e),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Qi),this.L=this.aa=0,this.gd=m([4,2],$e),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function an(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function ll(){var g=new Nn;return g!=null&&(g.a=0,g.sc="OK",g.cb=0,g.Xb=0,uu||(uu=ha)),g}function or(g,y,I){return g.a==0&&(g.a=y,g.sc=I,g.cb=0),0}function oo(g,y,I){return 3<=I&&g[y+0]==157&&g[y+1]==1&&g[y+2]==42}function mr(g,y){if(g==null)return 0;if(g.a=0,g.sc="OK",y==null)return or(g,2,"null VP8Io passed to VP8GetHeaders()");var I=y.data,H=y.w,J=y.ha;if(4>J)return or(g,7,"Truncated header.");var ie=I[H+0]|I[H+1]<<8|I[H+2]<<16,oe=g.Od;if(oe.Rb=!(1&ie),oe.td=ie>>1&7,oe.yd=ie>>4&1,oe.ub=ie>>5,3<oe.td)return or(g,3,"Incorrect keyframe parameters.");if(!oe.yd)return or(g,4,"Frame not displayable.");H+=3,J-=3;var ce=g.Kc;if(oe.Rb){if(7>J)return or(g,7,"cannot parse picture header");if(!oo(I,H,J))return or(g,3,"Bad code word");ce.c=16383&(I[H+4]<<8|I[H+3]),ce.Td=I[H+4]>>6,ce.i=16383&(I[H+6]<<8|I[H+5]),ce.Ud=I[H+6]>>6,H+=7,J-=7,g.za=ce.c+15>>4,g.Ub=ce.i+15>>4,y.width=ce.c,y.height=ce.i,y.Da=0,y.j=0,y.v=0,y.va=y.width,y.o=y.height,y.da=0,y.ib=y.width,y.hb=y.height,y.U=y.width,y.T=y.height,o((ie=g.Pa).jb,0,255,ie.jb.length),t((ie=g.Qa)!=null),ie.Cb=0,ie.Bb=0,ie.Fb=1,o(ie.Zb,0,0,ie.Zb.length),o(ie.Lb,0,0,ie.Lb)}if(oe.ub>J)return or(g,7,"bad partition length");ne(ie=g.m,I,H,oe.ub),H+=oe.ub,J-=oe.ub,oe.Rb&&(ce.Ld=Ae(ie),ce.Kd=Ae(ie)),ce=g.Qa;var de,ye=g.Pa;if(t(ie!=null),t(ce!=null),ce.Cb=Ae(ie),ce.Cb){if(ce.Bb=Ae(ie),Ae(ie)){for(ce.Fb=Ae(ie),de=0;4>de;++de)ce.Zb[de]=Ae(ie)?G(ie,7):0;for(de=0;4>de;++de)ce.Lb[de]=Ae(ie)?G(ie,6):0}if(ce.Bb)for(de=0;3>de;++de)ye.jb[de]=Ae(ie)?K(ie,8):255}else ce.Bb=0;if(ie.Ka)return or(g,3,"cannot parse segment header");if((ce=g.ed).zd=Ae(ie),ce.Tb=K(ie,6),ce.wb=K(ie,3),ce.Pc=Ae(ie),ce.Pc&&Ae(ie)){for(ye=0;4>ye;++ye)Ae(ie)&&(ce.vd[ye]=G(ie,6));for(ye=0;4>ye;++ye)Ae(ie)&&(ce.od[ye]=G(ie,6))}if(g.L=ce.Tb==0?0:ce.zd?1:2,ie.Ka)return or(g,3,"cannot parse filter header");var _e=J;if(J=de=H,H=de+_e,ce=_e,g.Xb=(1<<K(g.m,2))-1,_e<3*(ye=g.Xb))I=7;else{for(de+=3*ye,ce-=3*ye,_e=0;_e<ye;++_e){var Ue=I[J+0]|I[J+1]<<8|I[J+2]<<16;Ue>ce&&(Ue=ce),ne(g.Jc[+_e],I,de,Ue),de+=Ue,ce-=Ue,J+=3}ne(g.Jc[+ye],I,de,ce),I=de<H?0:5}if(I!=0)return or(g,I,"cannot parse partitions");for(I=K(de=g.m,7),J=Ae(de)?G(de,4):0,H=Ae(de)?G(de,4):0,ce=Ae(de)?G(de,4):0,ye=Ae(de)?G(de,4):0,de=Ae(de)?G(de,4):0,_e=g.Qa,Ue=0;4>Ue;++Ue){if(_e.Cb){var ze=_e.Zb[Ue];_e.Fb||(ze+=I)}else{if(0<Ue){g.pb[Ue]=g.pb[0];continue}ze=I}var Oe=g.pb[Ue];Oe.Sc[0]=Wh[jr(ze+J,127)],Oe.Sc[1]=Yh[jr(ze+0,127)],Oe.Eb[0]=2*Wh[jr(ze+H,127)],Oe.Eb[1]=101581*Yh[jr(ze+ce,127)]>>16,8>Oe.Eb[1]&&(Oe.Eb[1]=8),Oe.Qc[0]=Wh[jr(ze+ye,117)],Oe.Qc[1]=Yh[jr(ze+de,127)],Oe.lc=ze+de}if(!oe.Rb)return or(g,4,"Not a key frame.");for(Ae(ie),oe=g.Pa,I=0;4>I;++I){for(J=0;8>J;++J)for(H=0;3>H;++H)for(ce=0;11>ce;++ce)ye=ve(ie,$y[I][J][H][ce])?K(ie,8):Ky[I][J][H][ce],oe.Wc[I][J].Yb[H][ce]=ye;for(J=0;17>J;++J)oe.Xc[I][J]=oe.Wc[I][ev[J]]}return g.kc=Ae(ie),g.kc&&(g.Bd=K(ie,8)),g.cb=1}function ha(g,y,I,H,J,ie,oe){var ce=y[J].Yb[I];for(I=0;16>J;++J){if(!ve(g,ce[I+0]))return J;for(;!ve(g,ce[I+1]);)if(ce=y[++J].Yb[0],I=0,J==16)return 16;var de=y[J+1].Yb;if(ve(g,ce[I+2])){var ye=g,_e=0;if(ve(ye,(ze=ce)[(Ue=I)+3]))if(ve(ye,ze[Ue+6])){for(ce=0,Ue=2*(_e=ve(ye,ze[Ue+8]))+(ze=ve(ye,ze[Ue+9+_e])),_e=0,ze=Zy[Ue];ze[ce];++ce)_e+=_e+ve(ye,ze[ce]);_e+=3+(8<<Ue)}else ve(ye,ze[Ue+7])?(_e=7+2*ve(ye,165),_e+=ve(ye,145)):_e=5+ve(ye,159);else _e=ve(ye,ze[Ue+4])?3+ve(ye,ze[Ue+5]):2;ce=de[2]}else _e=1,ce=de[1];de=oe+Qy[J],0>(ye=g).b&&je(ye);var Ue,ze=ye.b,Oe=(Ue=ye.Ca>>1)-(ye.I>>ze)>>31;--ye.b,ye.Ca+=Oe,ye.Ca|=1,ye.I-=(Ue+1&Oe)<<ze,ie[de]=((_e^Oe)-Oe)*H[(0<J)+0]}return 16}function cl(g){var y=g.rb[g.sb-1];y.la=0,y.Na=0,o(g.zc,0,0,g.zc.length),g.ja=0}function lr(g,y){if(g==null)return 0;if(y==null)return or(g,2,"NULL VP8Io parameter in VP8Decode().");if(!g.cb&&!mr(g,y))return 0;if(t(g.cb),y.ac==null||y.ac(y)){y.ob&&(g.L=0);var I=Vd[g.L];if(g.L==2?(g.yb=0,g.zb=0):(g.yb=y.v-I>>4,g.zb=y.j-I>>4,0>g.yb&&(g.yb=0),0>g.zb&&(g.zb=0)),g.Va=y.o+15+I>>4,g.Hb=y.va+15+I>>4,g.Hb>g.za&&(g.Hb=g.za),g.Va>g.Ub&&(g.Va=g.Ub),0<g.L){var H=g.ed;for(I=0;4>I;++I){var J;if(g.Qa.Cb){var ie=g.Qa.Lb[I];g.Qa.Fb||(ie+=H.Tb)}else ie=H.Tb;for(J=0;1>=J;++J){var oe=g.gd[I][J],ce=ie;if(H.Pc&&(ce+=H.vd[0],J&&(ce+=H.od[0])),0<(ce=0>ce?0:63<ce?63:ce)){var de=ce;0<H.wb&&(de=4<H.wb?de>>2:de>>1)>9-H.wb&&(de=9-H.wb),1>de&&(de=1),oe.dd=de,oe.tc=2*ce+de,oe.ld=40<=ce?2:15<=ce?1:0}else oe.tc=0;oe.La=J}}}I=0}else or(g,6,"Frame setup failed"),I=g.a;if(I=I==0){if(I){g.$c=0,0<g.Aa||(g.Ic=hv);e:{I=g.Ic,H=4*(de=g.za);var ye=32*de,_e=de+1,Ue=0<g.L?de*(0<g.Aa?2:1):0,ze=(g.Aa==2?2:1)*de;if((oe=H+832+(J=3*(16*I+Vd[g.L])/2*ye)+(ie=g.Fa!=null&&0<g.Fa.length?g.Kc.c*g.Kc.i:0))!=oe)I=0;else{if(oe>g.Vb){if(g.Vb=0,g.Ec=l(oe),g.Fc=0,g.Ec==null){I=or(g,1,"no memory during frame initialization.");break e}g.Vb=oe}oe=g.Ec,ce=g.Fc,g.Ac=oe,g.Bc=ce,ce+=H,g.Gd=f(ye,Bt),g.Hd=0,g.rb=f(_e+1,so),g.sb=1,g.wa=Ue?f(Ue,$e):null,g.Y=0,g.D.Nb=0,g.D.wa=g.wa,g.D.Y=g.Y,0<g.Aa&&(g.D.Y+=de),t(!0),g.oc=oe,g.pc=ce,ce+=832,g.ya=f(ze,Qi),g.aa=0,g.D.ya=g.ya,g.D.aa=g.aa,g.Aa==2&&(g.D.aa+=de),g.R=16*de,g.B=8*de,de=(ye=Vd[g.L])*g.R,ye=ye/2*g.B,g.sa=oe,g.ta=ce+de,g.qa=g.sa,g.ra=g.ta+16*I*g.R+ye,g.Ha=g.qa,g.Ia=g.ra+8*I*g.B+ye,g.$c=0,ce+=J,g.mb=ie?oe:null,g.nb=ie?ce:null,t(ce+ie<=g.Fc+g.Vb),cl(g),o(g.Ac,g.Bc,0,H),I=1}}if(I){if(y.ka=0,y.y=g.sa,y.O=g.ta,y.f=g.qa,y.N=g.ra,y.ea=g.Ha,y.Vd=g.Ia,y.fa=g.R,y.Rc=g.B,y.F=null,y.J=0,!Md){for(I=-255;255>=I;++I)ii[255+I]=0>I?-I:I;for(I=-1020;1020>=I;++I)ks[1020+I]=-128>I?-128:127<I?127:I;for(I=-112;112>=I;++I)cu[112+I]=-16>I?-16:15<I?15:I;for(I=-255;510>=I;++I)nc[255+I]=0>I?0:255<I?255:I;Md=1}Se=Ei,Ee=Be,Ge=ge,at=Dt,dt=Nr,Le=Rr,ot=ds,on=ji,Yt=rn,_r=Ar,ri=lu,Cr=Ve,An=fs,br=yl,Pr=bl,Hi=Ra,Pa=Ja,$i=ou,$a[0]=Lt,$a[1]=dl,$a[2]=Ls,$a[3]=Oa,$a[4]=ec,$a[5]=gr,$a[6]=$t,$a[7]=hl,$a[8]=tc,$a[9]=ml,xo[0]=uo,xo[1]=Rt,xo[2]=Cn,xo[3]=Ds,xo[4]=kr,xo[5]=fl,xo[6]=$l,Ps[0]=Ki,Ps[1]=Ti,Ps[2]=Qa,Ps[3]=gl,Ps[4]=us,Ps[5]=Os,Ps[6]=Ka,I=1}else I=0}I&&(I=function(Oe,nt){for(Oe.M=0;Oe.M<Oe.Va;++Oe.M){var Ze,Ie=Oe.Jc[Oe.M&Oe.Xb],De=Oe.m,et=Oe;for(Ze=0;Ze<et.za;++Ze){var lt=De,tt=et,Ct=tt.Ac,yt=tt.Bc+4*Ze,zt=tt.zc,vt=tt.ya[tt.aa+Ze];if(tt.Qa.Bb?vt.$b=ve(lt,tt.Pa.jb[0])?2+ve(lt,tt.Pa.jb[2]):ve(lt,tt.Pa.jb[1]):vt.$b=0,tt.kc&&(vt.Ad=ve(lt,tt.Bd)),vt.Za=!ve(lt,145)+0,vt.Za){var In=vt.Ob,Fn=0;for(tt=0;4>tt;++tt){var Tn,bn=zt[0+tt];for(Tn=0;4>Tn;++Tn){bn=Jy[Ct[yt+Tn]][bn];for(var tr=vm[ve(lt,bn[0])];0<tr;)tr=vm[2*tr+ve(lt,bn[tr])];bn=-tr,Ct[yt+Tn]=bn}i(In,Fn,Ct,yt,4),Fn+=4,zt[0+tt]=bn}}else bn=ve(lt,156)?ve(lt,128)?1:3:ve(lt,163)?2:0,vt.Ob[0]=bn,o(Ct,yt,bn,4),o(zt,0,bn,4);vt.Dd=ve(lt,142)?ve(lt,114)?ve(lt,183)?1:3:2:0}if(et.m.Ka)return or(Oe,7,"Premature end-of-partition0 encountered.");for(;Oe.ja<Oe.za;++Oe.ja){if(et=Ie,lt=(De=Oe).rb[De.sb-1],Ct=De.rb[De.sb+De.ja],Ze=De.ya[De.aa+De.ja],yt=De.kc?Ze.Ad:0)lt.la=Ct.la=0,Ze.Za||(lt.Na=Ct.Na=0),Ze.Hc=0,Ze.Gc=0,Ze.ia=0;else{var Yn,sn;if(lt=Ct,Ct=et,yt=De.Pa.Xc,zt=De.ya[De.aa+De.ja],vt=De.pb[zt.$b],tt=zt.ad,In=0,Fn=De.rb[De.sb-1],bn=Tn=0,o(tt,In,0,384),zt.Za)var Wr=0,ta=yt[3];else{tr=l(16);var Yr=lt.Na+Fn.Na;if(Yr=uu(Ct,yt[1],Yr,vt.Eb,0,tr,0),lt.Na=Fn.Na=(0<Yr)+0,1<Yr)Se(tr,0,tt,In);else{var na=tr[0]+3>>3;for(tr=0;256>tr;tr+=16)tt[In+tr]=na}Wr=1,ta=yt[0]}var Bn=15&lt.la,xa=15&Fn.la;for(tr=0;4>tr;++tr){var ba=1&xa;for(na=sn=0;4>na;++na)Bn=Bn>>1|(ba=(Yr=uu(Ct,ta,Yr=ba+(1&Bn),vt.Sc,Wr,tt,In))>Wr)<<7,sn=sn<<2|(3<Yr?3:1<Yr?2:tt[In+0]!=0),In+=16;Bn>>=4,xa=xa>>1|ba<<7,Tn=(Tn<<8|sn)>>>0}for(ta=Bn,Wr=xa>>4,Yn=0;4>Yn;Yn+=2){for(sn=0,Bn=lt.la>>4+Yn,xa=Fn.la>>4+Yn,tr=0;2>tr;++tr){for(ba=1&xa,na=0;2>na;++na)Yr=ba+(1&Bn),Bn=Bn>>1|(ba=0<(Yr=uu(Ct,yt[2],Yr,vt.Qc,0,tt,In)))<<3,sn=sn<<2|(3<Yr?3:1<Yr?2:tt[In+0]!=0),In+=16;Bn>>=2,xa=xa>>1|ba<<5}bn|=sn<<4*Yn,ta|=Bn<<4<<Yn,Wr|=(240&xa)<<Yn}lt.la=ta,Fn.la=Wr,zt.Hc=Tn,zt.Gc=bn,zt.ia=43690&bn?0:vt.ia,yt=!(Tn|bn)}if(0<De.L&&(De.wa[De.Y+De.ja]=De.gd[Ze.$b][Ze.Za],De.wa[De.Y+De.ja].La|=!yt),et.Ka)return or(Oe,7,"Premature end-of-file encountered.")}if(cl(Oe),De=nt,et=1,Ze=(Ie=Oe).D,lt=0<Ie.L&&Ie.M>=Ie.zb&&Ie.M<=Ie.Va,Ie.Aa==0)e:{if(Ze.M=Ie.M,Ze.uc=lt,Ii(Ie,Ze),et=1,Ze=(sn=Ie.D).Nb,lt=(bn=Vd[Ie.L])*Ie.R,Ct=bn/2*Ie.B,tr=16*Ze*Ie.R,na=8*Ze*Ie.B,yt=Ie.sa,zt=Ie.ta-lt+tr,vt=Ie.qa,tt=Ie.ra-Ct+na,In=Ie.Ha,Fn=Ie.Ia-Ct+na,xa=(Bn=sn.M)==0,Tn=Bn>=Ie.Va-1,Ie.Aa==2&&Ii(Ie,sn),sn.uc)for(ba=(Yr=Ie).D.M,t(Yr.D.uc),sn=Yr.yb;sn<Yr.Hb;++sn){Wr=sn,ta=ba;var ui=(yi=(Ir=Yr).D).Nb;Yn=Ir.R;var yi=yi.wa[yi.Y+Wr],Vi=Ir.sa,Ua=Ir.ta+16*ui*Yn+16*Wr,ps=yi.dd,di=yi.tc;if(di!=0)if(t(3<=di),Ir.L==1)0<Wr&&Hi(Vi,Ua,Yn,di+4),yi.La&&$i(Vi,Ua,Yn,di),0<ta&&Pr(Vi,Ua,Yn,di+4),yi.La&&Pa(Vi,Ua,Yn,di);else{var Fs=Ir.B,Al=Ir.qa,rc=Ir.ra+8*ui*Fs+8*Wr,yo=Ir.Ha,Ir=Ir.Ia+8*ui*Fs+8*Wr;ui=yi.ld,0<Wr&&(on(Vi,Ua,Yn,di+4,ps,ui),_r(Al,rc,yo,Ir,Fs,di+4,ps,ui)),yi.La&&(Cr(Vi,Ua,Yn,di,ps,ui),br(Al,rc,yo,Ir,Fs,di,ps,ui)),0<ta&&(ot(Vi,Ua,Yn,di+4,ps,ui),Yt(Al,rc,yo,Ir,Fs,di+4,ps,ui)),yi.La&&(ri(Vi,Ua,Yn,di,ps,ui),An(Al,rc,yo,Ir,Fs,di,ps,ui))}}if(Ie.ia&&alert("todo:DitherRow"),De.put!=null){if(sn=16*Bn,Bn=16*(Bn+1),xa?(De.y=Ie.sa,De.O=Ie.ta+tr,De.f=Ie.qa,De.N=Ie.ra+na,De.ea=Ie.Ha,De.W=Ie.Ia+na):(sn-=bn,De.y=yt,De.O=zt,De.f=vt,De.N=tt,De.ea=In,De.W=Fn),Tn||(Bn-=bn),Bn>De.o&&(Bn=De.o),De.F=null,De.J=null,Ie.Fa!=null&&0<Ie.Fa.length&&sn<Bn&&(De.J=En(Ie,De,sn,Bn-sn),De.F=Ie.mb,De.F==null&&De.F.length==0)){et=or(Ie,3,"Could not decode alpha data.");break e}sn<De.j&&(bn=De.j-sn,sn=De.j,t(!(1&bn)),De.O+=Ie.R*bn,De.N+=Ie.B*(bn>>1),De.W+=Ie.B*(bn>>1),De.F!=null&&(De.J+=De.width*bn)),sn<Bn&&(De.O+=De.v,De.N+=De.v>>1,De.W+=De.v>>1,De.F!=null&&(De.J+=De.v),De.ka=sn-De.j,De.U=De.va-De.v,De.T=Bn-sn,et=De.put(De))}Ze+1!=Ie.Ic||Tn||(i(Ie.sa,Ie.ta-lt,yt,zt+16*Ie.R,lt),i(Ie.qa,Ie.ra-Ct,vt,tt+8*Ie.B,Ct),i(Ie.Ha,Ie.Ia-Ct,In,Fn+8*Ie.B,Ct))}if(!et)return or(Oe,6,"Output aborted.")}return 1}(g,y)),y.bc!=null&&y.bc(y),I&=1}return I?(g.cb=0,I):0}function Gr(g,y,I,H,J){J=g[y+I+32*H]+(J>>3),g[y+I+32*H]=-256&J?0>J?0:255:J}function lo(g,y,I,H,J,ie){Gr(g,y,0,I,H+J),Gr(g,y,1,I,H+ie),Gr(g,y,2,I,H-ie),Gr(g,y,3,I,H-J)}function Mr(g){return(20091*g>>16)+g}function _n(g,y,I,H){var J,ie=0,oe=l(16);for(J=0;4>J;++J){var ce=g[y+0]+g[y+8],de=g[y+0]-g[y+8],ye=(35468*g[y+4]>>16)-Mr(g[y+12]),_e=Mr(g[y+4])+(35468*g[y+12]>>16);oe[ie+0]=ce+_e,oe[ie+1]=de+ye,oe[ie+2]=de-ye,oe[ie+3]=ce-_e,ie+=4,y++}for(J=ie=0;4>J;++J)ce=(g=oe[ie+0]+4)+oe[ie+8],de=g-oe[ie+8],ye=(35468*oe[ie+4]>>16)-Mr(oe[ie+12]),Gr(I,H,0,0,ce+(_e=Mr(oe[ie+4])+(35468*oe[ie+12]>>16))),Gr(I,H,1,0,de+ye),Gr(I,H,2,0,de-ye),Gr(I,H,3,0,ce-_e),ie++,H+=32}function Rr(g,y,I,H){var J=g[y+0]+4,ie=35468*g[y+4]>>16,oe=Mr(g[y+4]),ce=35468*g[y+1]>>16;lo(I,H,0,J+oe,g=Mr(g[y+1]),ce),lo(I,H,1,J+ie,g,ce),lo(I,H,2,J-ie,g,ce),lo(I,H,3,J-oe,g,ce)}function Be(g,y,I,H,J){_n(g,y,I,H),J&&_n(g,y+16,I,H+4)}function ge(g,y,I,H){Ee(g,y+0,I,H,1),Ee(g,y+32,I,H+128,1)}function Dt(g,y,I,H){var J;for(g=g[y+0]+4,J=0;4>J;++J)for(y=0;4>y;++y)Gr(I,H,y,J,g)}function Nr(g,y,I,H){g[y+0]&&at(g,y+0,I,H),g[y+16]&&at(g,y+16,I,H+4),g[y+32]&&at(g,y+32,I,H+128),g[y+48]&&at(g,y+48,I,H+128+4)}function Ei(g,y,I,H){var J,ie=l(16);for(J=0;4>J;++J){var oe=g[y+0+J]+g[y+12+J],ce=g[y+4+J]+g[y+8+J],de=g[y+4+J]-g[y+8+J],ye=g[y+0+J]-g[y+12+J];ie[0+J]=oe+ce,ie[8+J]=oe-ce,ie[4+J]=ye+de,ie[12+J]=ye-de}for(J=0;4>J;++J)oe=(g=ie[0+4*J]+3)+ie[3+4*J],ce=ie[1+4*J]+ie[2+4*J],de=ie[1+4*J]-ie[2+4*J],ye=g-ie[3+4*J],I[H+0]=oe+ce>>3,I[H+16]=ye+de>>3,I[H+32]=oe-ce>>3,I[H+48]=ye-de>>3,H+=64}function ul(g,y,I){var H,J=y-32,ie=pa,oe=255-g[J-1];for(H=0;H<I;++H){var ce,de=ie,ye=oe+g[y-1];for(ce=0;ce<I;++ce)g[y+ce]=de[ye+g[J+ce]];y+=32}}function dl(g,y){ul(g,y,4)}function Ti(g,y){ul(g,y,8)}function Rt(g,y){ul(g,y,16)}function Cn(g,y){var I;for(I=0;16>I;++I)i(g,y+32*I,g,y-32,16)}function Ds(g,y){var I;for(I=16;0<I;--I)o(g,y,g[y-1],16),y+=32}function co(g,y,I){var H;for(H=0;16>H;++H)o(y,I+32*H,g,16)}function uo(g,y){var I,H=16;for(I=0;16>I;++I)H+=g[y-1+32*I]+g[y+I-32];co(H>>5,g,y)}function kr(g,y){var I,H=8;for(I=0;16>I;++I)H+=g[y-1+32*I];co(H>>4,g,y)}function fl(g,y){var I,H=8;for(I=0;16>I;++I)H+=g[y+I-32];co(H>>4,g,y)}function $l(g,y){co(128,g,y)}function _t(g,y,I){return g+2*y+I+2>>2}function Ls(g,y){var I,H=y-32;for(H=new Uint8Array([_t(g[H-1],g[H+0],g[H+1]),_t(g[H+0],g[H+1],g[H+2]),_t(g[H+1],g[H+2],g[H+3]),_t(g[H+2],g[H+3],g[H+4])]),I=0;4>I;++I)i(g,y+32*I,H,0,H.length)}function Oa(g,y){var I=g[y-1],H=g[y-1+32],J=g[y-1+64],ie=g[y-1+96];Pe(g,y+0,16843009*_t(g[y-1-32],I,H)),Pe(g,y+32,16843009*_t(I,H,J)),Pe(g,y+64,16843009*_t(H,J,ie)),Pe(g,y+96,16843009*_t(J,ie,ie))}function Lt(g,y){var I,H=4;for(I=0;4>I;++I)H+=g[y+I-32]+g[y-1+32*I];for(H>>=3,I=0;4>I;++I)o(g,y+32*I,H,4)}function ec(g,y){var I=g[y-1+0],H=g[y-1+32],J=g[y-1+64],ie=g[y-1-32],oe=g[y+0-32],ce=g[y+1-32],de=g[y+2-32],ye=g[y+3-32];g[y+0+96]=_t(H,J,g[y-1+96]),g[y+1+96]=g[y+0+64]=_t(I,H,J),g[y+2+96]=g[y+1+64]=g[y+0+32]=_t(ie,I,H),g[y+3+96]=g[y+2+64]=g[y+1+32]=g[y+0+0]=_t(oe,ie,I),g[y+3+64]=g[y+2+32]=g[y+1+0]=_t(ce,oe,ie),g[y+3+32]=g[y+2+0]=_t(de,ce,oe),g[y+3+0]=_t(ye,de,ce)}function $t(g,y){var I=g[y+1-32],H=g[y+2-32],J=g[y+3-32],ie=g[y+4-32],oe=g[y+5-32],ce=g[y+6-32],de=g[y+7-32];g[y+0+0]=_t(g[y+0-32],I,H),g[y+1+0]=g[y+0+32]=_t(I,H,J),g[y+2+0]=g[y+1+32]=g[y+0+64]=_t(H,J,ie),g[y+3+0]=g[y+2+32]=g[y+1+64]=g[y+0+96]=_t(J,ie,oe),g[y+3+32]=g[y+2+64]=g[y+1+96]=_t(ie,oe,ce),g[y+3+64]=g[y+2+96]=_t(oe,ce,de),g[y+3+96]=_t(ce,de,de)}function gr(g,y){var I=g[y-1+0],H=g[y-1+32],J=g[y-1+64],ie=g[y-1-32],oe=g[y+0-32],ce=g[y+1-32],de=g[y+2-32],ye=g[y+3-32];g[y+0+0]=g[y+1+64]=ie+oe+1>>1,g[y+1+0]=g[y+2+64]=oe+ce+1>>1,g[y+2+0]=g[y+3+64]=ce+de+1>>1,g[y+3+0]=de+ye+1>>1,g[y+0+96]=_t(J,H,I),g[y+0+64]=_t(H,I,ie),g[y+0+32]=g[y+1+96]=_t(I,ie,oe),g[y+1+32]=g[y+2+96]=_t(ie,oe,ce),g[y+2+32]=g[y+3+96]=_t(oe,ce,de),g[y+3+32]=_t(ce,de,ye)}function hl(g,y){var I=g[y+0-32],H=g[y+1-32],J=g[y+2-32],ie=g[y+3-32],oe=g[y+4-32],ce=g[y+5-32],de=g[y+6-32],ye=g[y+7-32];g[y+0+0]=I+H+1>>1,g[y+1+0]=g[y+0+64]=H+J+1>>1,g[y+2+0]=g[y+1+64]=J+ie+1>>1,g[y+3+0]=g[y+2+64]=ie+oe+1>>1,g[y+0+32]=_t(I,H,J),g[y+1+32]=g[y+0+96]=_t(H,J,ie),g[y+2+32]=g[y+1+96]=_t(J,ie,oe),g[y+3+32]=g[y+2+96]=_t(ie,oe,ce),g[y+3+64]=_t(oe,ce,de),g[y+3+96]=_t(ce,de,ye)}function ml(g,y){var I=g[y-1+0],H=g[y-1+32],J=g[y-1+64],ie=g[y-1+96];g[y+0+0]=I+H+1>>1,g[y+2+0]=g[y+0+32]=H+J+1>>1,g[y+2+32]=g[y+0+64]=J+ie+1>>1,g[y+1+0]=_t(I,H,J),g[y+3+0]=g[y+1+32]=_t(H,J,ie),g[y+3+32]=g[y+1+64]=_t(J,ie,ie),g[y+3+64]=g[y+2+64]=g[y+0+96]=g[y+1+96]=g[y+2+96]=g[y+3+96]=ie}function tc(g,y){var I=g[y-1+0],H=g[y-1+32],J=g[y-1+64],ie=g[y-1+96],oe=g[y-1-32],ce=g[y+0-32],de=g[y+1-32],ye=g[y+2-32];g[y+0+0]=g[y+2+32]=I+oe+1>>1,g[y+0+32]=g[y+2+64]=H+I+1>>1,g[y+0+64]=g[y+2+96]=J+H+1>>1,g[y+0+96]=ie+J+1>>1,g[y+3+0]=_t(ce,de,ye),g[y+2+0]=_t(oe,ce,de),g[y+1+0]=g[y+3+32]=_t(I,oe,ce),g[y+1+32]=g[y+3+64]=_t(H,I,oe),g[y+1+64]=g[y+3+96]=_t(J,H,I),g[y+1+96]=_t(ie,J,H)}function Qa(g,y){var I;for(I=0;8>I;++I)i(g,y+32*I,g,y-32,8)}function gl(g,y){var I;for(I=0;8>I;++I)o(g,y,g[y-1],8),y+=32}function ma(g,y,I){var H;for(H=0;8>H;++H)o(y,I+32*H,g,8)}function Ki(g,y){var I,H=8;for(I=0;8>I;++I)H+=g[y+I-32]+g[y-1+32*I];ma(H>>4,g,y)}function Os(g,y){var I,H=4;for(I=0;8>I;++I)H+=g[y+I-32];ma(H>>3,g,y)}function us(g,y){var I,H=4;for(I=0;8>I;++I)H+=g[y-1+32*I];ma(H>>3,g,y)}function Ka(g,y){ma(128,g,y)}function Ma(g,y,I){var H=g[y-I],J=g[y+0],ie=3*(J-H)+zh[1020+g[y-2*I]-g[y+I]],oe=Rd[112+(ie+4>>3)];g[y-I]=pa[255+H+Rd[112+(ie+3>>3)]],g[y+0]=pa[255+J-oe]}function ti(g,y,I,H){var J=g[y+0],ie=g[y+I];return Fa[255+g[y-2*I]-g[y-I]]>H||Fa[255+ie-J]>H}function pl(g,y,I,H){return 4*Fa[255+g[y-I]-g[y+0]]+Fa[255+g[y-2*I]-g[y+I]]<=H}function xl(g,y,I,H,J){var ie=g[y-3*I],oe=g[y-2*I],ce=g[y-I],de=g[y+0],ye=g[y+I],_e=g[y+2*I],Ue=g[y+3*I];return 4*Fa[255+ce-de]+Fa[255+oe-ye]>H?0:Fa[255+g[y-4*I]-ie]<=J&&Fa[255+ie-oe]<=J&&Fa[255+oe-ce]<=J&&Fa[255+Ue-_e]<=J&&Fa[255+_e-ye]<=J&&Fa[255+ye-de]<=J}function bl(g,y,I,H){var J=2*H+1;for(H=0;16>H;++H)pl(g,y+H,I,J)&&Ma(g,y+H,I)}function Ra(g,y,I,H){var J=2*H+1;for(H=0;16>H;++H)pl(g,y+H*I,1,J)&&Ma(g,y+H*I,1)}function Ja(g,y,I,H){var J;for(J=3;0<J;--J)bl(g,y+=4*I,I,H)}function ou(g,y,I,H){var J;for(J=3;0<J;--J)Ra(g,y+=4,I,H)}function hn(g,y,I,H,J,ie,oe,ce){for(ie=2*ie+1;0<J--;){if(xl(g,y,I,ie,oe))if(ti(g,y,I,ce))Ma(g,y,I);else{var de=g,ye=y,_e=I,Ue=de[ye-2*_e],ze=de[ye-_e],Oe=de[ye+0],nt=de[ye+_e],Ze=de[ye+2*_e],Ie=27*(et=zh[1020+3*(Oe-ze)+zh[1020+Ue-nt]])+63>>7,De=18*et+63>>7,et=9*et+63>>7;de[ye-3*_e]=pa[255+de[ye-3*_e]+et],de[ye-2*_e]=pa[255+Ue+De],de[ye-_e]=pa[255+ze+Ie],de[ye+0]=pa[255+Oe-Ie],de[ye+_e]=pa[255+nt-De],de[ye+2*_e]=pa[255+Ze-et]}y+=H}}function Ji(g,y,I,H,J,ie,oe,ce){for(ie=2*ie+1;0<J--;){if(xl(g,y,I,ie,oe))if(ti(g,y,I,ce))Ma(g,y,I);else{var de=g,ye=y,_e=I,Ue=de[ye-_e],ze=de[ye+0],Oe=de[ye+_e],nt=Rd[112+((Ze=3*(ze-Ue))+4>>3)],Ze=Rd[112+(Ze+3>>3)],Ie=nt+1>>1;de[ye-2*_e]=pa[255+de[ye-2*_e]+Ie],de[ye-_e]=pa[255+Ue+Ze],de[ye+0]=pa[255+ze-nt],de[ye+_e]=pa[255+Oe-Ie]}y+=H}}function ds(g,y,I,H,J,ie){hn(g,y,I,1,16,H,J,ie)}function ji(g,y,I,H,J,ie){hn(g,y,1,I,16,H,J,ie)}function lu(g,y,I,H,J,ie){var oe;for(oe=3;0<oe;--oe)Ji(g,y+=4*I,I,1,16,H,J,ie)}function Ve(g,y,I,H,J,ie){var oe;for(oe=3;0<oe;--oe)Ji(g,y+=4,1,I,16,H,J,ie)}function rn(g,y,I,H,J,ie,oe,ce){hn(g,y,J,1,8,ie,oe,ce),hn(I,H,J,1,8,ie,oe,ce)}function Ar(g,y,I,H,J,ie,oe,ce){hn(g,y,1,J,8,ie,oe,ce),hn(I,H,1,J,8,ie,oe,ce)}function fs(g,y,I,H,J,ie,oe,ce){Ji(g,y+4*J,J,1,8,ie,oe,ce),Ji(I,H+4*J,J,1,8,ie,oe,ce)}function yl(g,y,I,H,J,ie,oe,ce){Ji(g,y+4,1,J,8,ie,oe,ce),Ji(I,H+4,1,J,8,ie,oe,ce)}function fo(){this.ba=new Jt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Kn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function vl(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function wl(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function ho(){this.ua=0,this.Wa=new me,this.vb=new me,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ee,this.yc=new R}function Sr(){this.xb=this.a=0,this.l=new an,this.ca=new Jt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new B,this.Pb=0,this.wd=new B,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new ho,this.ab=0,this.gc=f(4,wl),this.Oc=0}function hs(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new an,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function On(g,y,I,H,J,ie,oe){for(g=g==null?0:g[y+0],y=0;y<oe;++y)J[ie+y]=g+I[H+y]&255,g=J[ie+y]}function ms(g,y,I,H,J,ie,oe){var ce;if(g==null)On(null,null,I,H,J,ie,oe);else for(ce=0;ce<oe;++ce)J[ie+ce]=g[y+ce]+I[H+ce]&255}function _i(g,y,I,H,J,ie,oe){if(g==null)On(null,null,I,H,J,ie,oe);else{var ce,de=g[y+0],ye=de,_e=de;for(ce=0;ce<oe;++ce)ye=_e+(de=g[y+ce])-ye,_e=I[H+ce]+(-256&ye?0>ye?0:255:ye)&255,ye=de,J[ie+ce]=_e}}function En(g,y,I,H){var J=y.width,ie=y.o;if(t(g!=null&&y!=null),0>I||0>=H||I+H>ie)return null;if(!g.Cc){if(g.ga==null){var oe;if(g.ga=new hs,(oe=g.ga==null)||(oe=y.width*y.o,t(g.Gb.length==0),g.Gb=l(oe),g.Uc=0,g.Gb==null?oe=0:(g.mb=g.Gb,g.nb=g.Uc,g.rc=null,oe=1),oe=!oe),!oe){oe=g.ga;var ce=g.Fa,de=g.P,ye=g.qc,_e=g.mb,Ue=g.nb,ze=de+1,Oe=ye-1,nt=oe.l;if(t(ce!=null&&_e!=null&&y!=null),bo[0]=null,bo[1]=On,bo[2]=ms,bo[3]=_i,oe.ca=_e,oe.tb=Ue,oe.c=y.width,oe.i=y.height,t(0<oe.c&&0<oe.i),1>=ye)y=0;else if(oe.$a=ce[de+0]>>0&3,oe.Z=ce[de+0]>>2&3,oe.Lc=ce[de+0]>>4&3,de=ce[de+0]>>6&3,0>oe.$a||1<oe.$a||4<=oe.Z||1<oe.Lc||de)y=0;else if(nt.put=Jr,nt.ac=xn,nt.bc=Si,nt.ma=oe,nt.width=y.width,nt.height=y.height,nt.Da=y.Da,nt.v=y.v,nt.va=y.va,nt.j=y.j,nt.o=y.o,oe.$a)e:{t(oe.$a==1),y=Je();t:for(;;){if(y==null){y=0;break e}if(t(oe!=null),oe.mc=y,y.c=oe.c,y.i=oe.i,y.l=oe.l,y.l.ma=oe,y.l.width=oe.c,y.l.height=oe.i,y.a=0,te(y.m,ce,ze,Oe),!bt(oe.c,oe.i,1,y,null)||(y.ab==1&&y.gc[0].hc==3&&pi(y.s)?(oe.ic=1,ce=y.c*y.i,y.Ta=null,y.Ua=0,y.V=l(ce),y.Ba=0,y.V==null?(y.a=1,y=0):y=1):(oe.ic=0,y=fn(y,oe.c)),!y))break t;y=1;break e}oe.mc=null,y=0}else y=Oe>=oe.c*oe.i;oe=!y}if(oe)return null;g.ga.Lc!=1?g.Ga=0:H=ie-I}t(g.ga!=null),t(I+H<=ie);e:{if(y=(ce=g.ga).c,ie=ce.l.o,ce.$a==0){if(ze=g.rc,Oe=g.Vc,nt=g.Fa,de=g.P+1+I*y,ye=g.mb,_e=g.nb+I*y,t(de<=g.P+g.qc),ce.Z!=0)for(t(bo[ce.Z]!=null),oe=0;oe<H;++oe)bo[ce.Z](ze,Oe,nt,de,ye,_e,y),ze=ye,Oe=_e,_e+=y,de+=y;else for(oe=0;oe<H;++oe)i(ye,_e,nt,de,y),ze=ye,Oe=_e,_e+=y,de+=y;g.rc=ze,g.Vc=Oe}else{if(t(ce.mc!=null),y=I+H,t((oe=ce.mc)!=null),t(y<=oe.i),oe.C>=y)y=1;else if(ce.ic||ke(),ce.ic){ce=oe.V,ze=oe.Ba,Oe=oe.c;var Ze=oe.i,Ie=(nt=1,de=oe.$/Oe,ye=oe.$%Oe,_e=oe.m,Ue=oe.s,oe.$),De=Oe*Ze,et=Oe*y,lt=Ue.wc,tt=Ie<et?kn(Ue,ye,de):null;t(Ie<=De),t(y<=Ze),t(pi(Ue));t:for(;;){for(;!_e.h&&Ie<et;){if(ye&lt||(tt=kn(Ue,ye,de)),t(tt!=null),ue(_e),256>(Ze=ei(tt.G[0],tt.H[0],_e)))ce[ze+Ie]=Ze,++Ie,++ye>=Oe&&(ye=0,++de<=y&&!(de%16)&&$n(oe,de));else{if(!(280>Ze)){nt=0;break t}Ze=Zi(Ze-256,_e);var Ct,yt=ei(tt.G[4],tt.H[4],_e);if(ue(_e),!(Ie>=(yt=$r(Oe,yt=Zi(yt,_e)))&&De-Ie>=Ze)){nt=0;break t}for(Ct=0;Ct<Ze;++Ct)ce[ze+Ie+Ct]=ce[ze+Ie+Ct-yt];for(Ie+=Ze,ye+=Ze;ye>=Oe;)ye-=Oe,++de<=y&&!(de%16)&&$n(oe,de);Ie<et&&ye&lt&&(tt=kn(Ue,ye,de))}t(_e.h==Q(_e))}$n(oe,de>y?y:de);break t}!nt||_e.h&&Ie<De?(nt=0,oe.a=_e.h?5:3):oe.$=Ie,y=nt}else y=qr(oe,oe.V,oe.Ba,oe.c,oe.i,y,Bi);if(!y){H=0;break e}}I+H>=ie&&(g.Cc=1),H=1}if(!H)return null;if(g.Cc&&((H=g.ga)!=null&&(H.mc=null),g.ga=null,0<g.Ga))return alert("todo:WebPDequantizeLevels"),null}return g.nb+I*J}function A(g,y,I,H,J,ie){for(;0<J--;){var oe,ce=g,de=y+(I?1:0),ye=g,_e=y+(I?0:3);for(oe=0;oe<H;++oe){var Ue=ye[_e+4*oe];Ue!=255&&(Ue*=32897,ce[de+4*oe+0]=ce[de+4*oe+0]*Ue>>23,ce[de+4*oe+1]=ce[de+4*oe+1]*Ue>>23,ce[de+4*oe+2]=ce[de+4*oe+2]*Ue>>23)}y+=ie}}function $(g,y,I,H,J){for(;0<H--;){var ie;for(ie=0;ie<I;++ie){var oe=g[y+2*ie+0],ce=15&(ye=g[y+2*ie+1]),de=4369*ce,ye=(240&ye|ye>>4)*de>>16;g[y+2*ie+0]=(240&oe|oe>>4)*de>>16&240|(15&oe|oe<<4)*de>>16>>4&15,g[y+2*ie+1]=240&ye|ce}y+=J}}function xe(g,y,I,H,J,ie,oe,ce){var de,ye,_e=255;for(ye=0;ye<J;++ye){for(de=0;de<H;++de){var Ue=g[y+de];ie[oe+4*de]=Ue,_e&=Ue}y+=I,oe+=ce}return _e!=255}function Ce(g,y,I,H,J){var ie;for(ie=0;ie<J;++ie)I[H+ie]=g[y+ie]>>8}function ke(){ea=A,ir=$,ar=xe,Fr=Ce}function Ke(g,y,I){L[g]=function(H,J,ie,oe,ce,de,ye,_e,Ue,ze,Oe,nt,Ze,Ie,De,et,lt){var tt,Ct=lt-1>>1,yt=ce[de+0]|ye[_e+0]<<16,zt=Ue[ze+0]|Oe[nt+0]<<16;t(H!=null);var vt=3*yt+zt+131074>>2;for(y(H[J+0],255&vt,vt>>16,Ze,Ie),ie!=null&&(vt=3*zt+yt+131074>>2,y(ie[oe+0],255&vt,vt>>16,De,et)),tt=1;tt<=Ct;++tt){var In=ce[de+tt]|ye[_e+tt]<<16,Fn=Ue[ze+tt]|Oe[nt+tt]<<16,Tn=yt+In+zt+Fn+524296,bn=Tn+2*(In+zt)>>3;vt=bn+yt>>1,yt=(Tn=Tn+2*(yt+Fn)>>3)+In>>1,y(H[J+2*tt-1],255&vt,vt>>16,Ze,Ie+(2*tt-1)*I),y(H[J+2*tt-0],255&yt,yt>>16,Ze,Ie+(2*tt-0)*I),ie!=null&&(vt=Tn+zt>>1,yt=bn+Fn>>1,y(ie[oe+2*tt-1],255&vt,vt>>16,De,et+(2*tt-1)*I),y(ie[oe+2*tt+0],255&yt,yt>>16,De,et+(2*tt+0)*I)),yt=In,zt=Fn}1&lt||(vt=3*yt+zt+131074>>2,y(H[J+lt-1],255&vt,vt>>16,Ze,Ie+(lt-1)*I),ie!=null&&(vt=3*zt+yt+131074>>2,y(ie[oe+lt-1],255&vt,vt>>16,De,et+(lt-1)*I)))}}function rt(){Ba[kd]=nv,Ba[Pd]=Nm,Ba[xm]=rv,Ba[Fd]=Am,Ba[Bd]=Sm,Ba[Hh]=Cm,Ba[bm]=iv,Ba[Vh]=Nm,Ba[qh]=Am,Ba[Ud]=Sm,Ba[Gh]=Cm}function Nt(g){return g&-16384?0>g?0:255:g>>av}function Mt(g,y){return Nt((19077*g>>8)+(26149*y>>8)-14234)}function Zt(g,y,I){return Nt((19077*g>>8)-(6419*y>>8)-(13320*I>>8)+8708)}function Qt(g,y){return Nt((19077*g>>8)+(33050*y>>8)-17685)}function mn(g,y,I,H,J){H[J+0]=Mt(g,I),H[J+1]=Zt(g,y,I),H[J+2]=Qt(g,y)}function cr(g,y,I,H,J){H[J+0]=Qt(g,y),H[J+1]=Zt(g,y,I),H[J+2]=Mt(g,I)}function Pn(g,y,I,H,J){var ie=Zt(g,y,I);y=ie<<3&224|Qt(g,y)>>3,H[J+0]=248&Mt(g,I)|ie>>5,H[J+1]=y}function pr(g,y,I,H,J){var ie=240&Qt(g,y)|15;H[J+0]=240&Mt(g,I)|Zt(g,y,I)>>4,H[J+1]=ie}function ci(g,y,I,H,J){H[J+0]=255,mn(g,y,I,H,J+1)}function xr(g,y,I,H,J){cr(g,y,I,H,J),H[J+3]=255}function ga(g,y,I,H,J){mn(g,y,I,H,J),H[J+3]=255}function jr(g,y){return 0>g?0:g>y?y:g}function zi(g,y,I){L[g]=function(H,J,ie,oe,ce,de,ye,_e,Ue){for(var ze=_e+(-2&Ue)*I;_e!=ze;)y(H[J+0],ie[oe+0],ce[de+0],ye,_e),y(H[J+1],ie[oe+0],ce[de+0],ye,_e+I),J+=2,++oe,++de,_e+=2*I;1&Ue&&y(H[J+0],ie[oe+0],ce[de+0],ye,_e)}}function bi(g,y,I){return I==0?g==0?y==0?6:5:y==0?4:0:I}function mo(g,y,I,H,J){switch(g>>>30){case 3:Ee(y,I,H,J,0);break;case 2:Le(y,I,H,J);break;case 1:at(y,I,H,J)}}function Ii(g,y){var I,H,J=y.M,ie=y.Nb,oe=g.oc,ce=g.pc+40,de=g.oc,ye=g.pc+584,_e=g.oc,Ue=g.pc+600;for(I=0;16>I;++I)oe[ce+32*I-1]=129;for(I=0;8>I;++I)de[ye+32*I-1]=129,_e[Ue+32*I-1]=129;for(0<J?oe[ce-1-32]=de[ye-1-32]=_e[Ue-1-32]=129:(o(oe,ce-32-1,127,21),o(de,ye-32-1,127,9),o(_e,Ue-32-1,127,9)),H=0;H<g.za;++H){var ze=y.ya[y.aa+H];if(0<H){for(I=-1;16>I;++I)i(oe,ce+32*I-4,oe,ce+32*I+12,4);for(I=-1;8>I;++I)i(de,ye+32*I-4,de,ye+32*I+4,4),i(_e,Ue+32*I-4,_e,Ue+32*I+4,4)}var Oe=g.Gd,nt=g.Hd+H,Ze=ze.ad,Ie=ze.Hc;if(0<J&&(i(oe,ce-32,Oe[nt].y,0,16),i(de,ye-32,Oe[nt].f,0,8),i(_e,Ue-32,Oe[nt].ea,0,8)),ze.Za){var De=oe,et=ce-32+16;for(0<J&&(H>=g.za-1?o(De,et,Oe[nt].y[15],4):i(De,et,Oe[nt+1].y,0,4)),I=0;4>I;I++)De[et+128+I]=De[et+256+I]=De[et+384+I]=De[et+0+I];for(I=0;16>I;++I,Ie<<=2)De=oe,et=ce+Tm[I],$a[ze.Ob[I]](De,et),mo(Ie,Ze,16*+I,De,et)}else if(De=bi(H,J,ze.Ob[0]),xo[De](oe,ce),Ie!=0)for(I=0;16>I;++I,Ie<<=2)mo(Ie,Ze,16*+I,oe,ce+Tm[I]);for(I=ze.Gc,De=bi(H,J,ze.Dd),Ps[De](de,ye),Ps[De](_e,Ue),Ie=Ze,De=de,et=ye,255&(ze=I>>0)&&(170&ze?Ge(Ie,256,De,et):dt(Ie,256,De,et)),ze=_e,Ie=Ue,255&(I>>=8)&&(170&I?Ge(Ze,320,ze,Ie):dt(Ze,320,ze,Ie)),J<g.Ub-1&&(i(Oe[nt].y,0,oe,ce+480,16),i(Oe[nt].f,0,de,ye+224,8),i(Oe[nt].ea,0,_e,Ue+224,8)),I=8*ie*g.B,Oe=g.sa,nt=g.ta+16*H+16*ie*g.R,Ze=g.qa,ze=g.ra+8*H+I,Ie=g.Ha,De=g.Ia+8*H+I,I=0;16>I;++I)i(Oe,nt+I*g.R,oe,ce+32*I,16);for(I=0;8>I;++I)i(Ze,ze+I*g.B,de,ye+32*I,8),i(Ie,De+I*g.B,_e,Ue+32*I,8)}}function go(g,y,I,H,J,ie,oe,ce,de){var ye=[0],_e=[0],Ue=0,ze=de!=null?de.kd:0,Oe=de??new vl;if(g==null||12>I)return 7;Oe.data=g,Oe.w=y,Oe.ha=I,y=[y],I=[I],Oe.gb=[Oe.gb];e:{var nt=y,Ze=I,Ie=Oe.gb;if(t(g!=null),t(Ze!=null),t(Ie!=null),Ie[0]=0,12<=Ze[0]&&!n(g,nt[0],"RIFF")){if(n(g,nt[0]+8,"WEBP")){Ie=3;break e}var De=He(g,nt[0]+4);if(12>De||4294967286<De){Ie=3;break e}if(ze&&De>Ze[0]-8){Ie=7;break e}Ie[0]=De,nt[0]+=12,Ze[0]-=12}Ie=0}if(Ie!=0)return Ie;for(De=0<Oe.gb[0],I=I[0];;){e:{var et=g;Ze=y,Ie=I;var lt=ye,tt=_e,Ct=nt=[0];if((vt=Ue=[Ue])[0]=0,8>Ie[0])Ie=7;else{if(!n(et,Ze[0],"VP8X")){if(He(et,Ze[0]+4)!=10){Ie=3;break e}if(18>Ie[0]){Ie=7;break e}var yt=He(et,Ze[0]+8),zt=1+Ye(et,Ze[0]+12);if(2147483648<=zt*(et=1+Ye(et,Ze[0]+15))){Ie=3;break e}Ct!=null&&(Ct[0]=yt),lt!=null&&(lt[0]=zt),tt!=null&&(tt[0]=et),Ze[0]+=18,Ie[0]-=18,vt[0]=1}Ie=0}}if(Ue=Ue[0],nt=nt[0],Ie!=0)return Ie;if(Ze=!!(2&nt),!De&&Ue)return 3;if(ie!=null&&(ie[0]=!!(16&nt)),oe!=null&&(oe[0]=Ze),ce!=null&&(ce[0]=0),oe=ye[0],nt=_e[0],Ue&&Ze&&de==null){Ie=0;break}if(4>I){Ie=7;break}if(De&&Ue||!De&&!Ue&&!n(g,y[0],"ALPH")){I=[I],Oe.na=[Oe.na],Oe.P=[Oe.P],Oe.Sa=[Oe.Sa];e:{yt=g,Ie=y,De=I;var vt=Oe.gb;lt=Oe.na,tt=Oe.P,Ct=Oe.Sa,zt=22,t(yt!=null),t(De!=null),et=Ie[0];var In=De[0];for(t(lt!=null),t(Ct!=null),lt[0]=null,tt[0]=null,Ct[0]=0;;){if(Ie[0]=et,De[0]=In,8>In){Ie=7;break e}var Fn=He(yt,et+4);if(4294967286<Fn){Ie=3;break e}var Tn=8+Fn+1&-2;if(zt+=Tn,0<vt&&zt>vt){Ie=3;break e}if(!n(yt,et,"VP8 ")||!n(yt,et,"VP8L")){Ie=0;break e}if(In[0]<Tn){Ie=7;break e}n(yt,et,"ALPH")||(lt[0]=yt,tt[0]=et+8,Ct[0]=Fn),et+=Tn,In-=Tn}}if(I=I[0],Oe.na=Oe.na[0],Oe.P=Oe.P[0],Oe.Sa=Oe.Sa[0],Ie!=0)break}I=[I],Oe.Ja=[Oe.Ja],Oe.xa=[Oe.xa];e:if(vt=g,Ie=y,De=I,lt=Oe.gb[0],tt=Oe.Ja,Ct=Oe.xa,yt=Ie[0],et=!n(vt,yt,"VP8 "),zt=!n(vt,yt,"VP8L"),t(vt!=null),t(De!=null),t(tt!=null),t(Ct!=null),8>De[0])Ie=7;else{if(et||zt){if(vt=He(vt,yt+4),12<=lt&&vt>lt-12){Ie=3;break e}if(ze&&vt>De[0]-8){Ie=7;break e}tt[0]=vt,Ie[0]+=8,De[0]-=8,Ct[0]=zt}else Ct[0]=5<=De[0]&&vt[yt+0]==47&&!(vt[yt+4]>>5),tt[0]=De[0];Ie=0}if(I=I[0],Oe.Ja=Oe.Ja[0],Oe.xa=Oe.xa[0],y=y[0],Ie!=0)break;if(4294967286<Oe.Ja)return 3;if(ce==null||Ze||(ce[0]=Oe.xa?2:1),oe=[oe],nt=[nt],Oe.xa){if(5>I){Ie=7;break}ce=oe,ze=nt,Ze=ie,g==null||5>I?g=0:5<=I&&g[y+0]==47&&!(g[y+4]>>5)?(De=[0],vt=[0],lt=[0],te(tt=new B,g,y,I),It(tt,De,vt,lt)?(ce!=null&&(ce[0]=De[0]),ze!=null&&(ze[0]=vt[0]),Ze!=null&&(Ze[0]=lt[0]),g=1):g=0):g=0}else{if(10>I){Ie=7;break}ce=nt,g==null||10>I||!oo(g,y+3,I-3)?g=0:(ze=g[y+0]|g[y+1]<<8|g[y+2]<<16,Ze=16383&(g[y+7]<<8|g[y+6]),g=16383&(g[y+9]<<8|g[y+8]),1&ze||3<(ze>>1&7)||!(ze>>4&1)||ze>>5>=Oe.Ja||!Ze||!g?g=0:(oe&&(oe[0]=Ze),ce&&(ce[0]=g),g=1))}if(!g||(oe=oe[0],nt=nt[0],Ue&&(ye[0]!=oe||_e[0]!=nt)))return 3;de!=null&&(de[0]=Oe,de.offset=y-de.w,t(4294967286>y-de.w),t(de.offset==de.ha-I));break}return Ie==0||Ie==7&&Ue&&de==null?(ie!=null&&(ie[0]|=Oe.na!=null&&0<Oe.na.length),H!=null&&(H[0]=oe),J!=null&&(J[0]=nt),0):Ie}function Ms(g,y,I){var H=y.width,J=y.height,ie=0,oe=0,ce=H,de=J;if(y.Da=g!=null&&0<g.Da,y.Da&&(ce=g.cd,de=g.bd,ie=g.v,oe=g.j,11>I||(ie&=-2,oe&=-2),0>ie||0>oe||0>=ce||0>=de||ie+ce>H||oe+de>J))return 0;if(y.v=ie,y.j=oe,y.va=ie+ce,y.o=oe+de,y.U=ce,y.T=de,y.da=g!=null&&0<g.da,y.da){if(!st(ce,de,I=[g.ib],ie=[g.hb]))return 0;y.ib=I[0],y.hb=ie[0]}return y.ob=g!=null&&g.ob,y.Kb=g==null||!g.Sd,y.da&&(y.ob=y.ib<3*H/4&&y.hb<3*J/4,y.Kb=0),1}function Nl(g){if(g==null)return 2;if(11>g.S){var y=g.f.RGBA;y.fb+=(g.height-1)*y.A,y.A=-y.A}else y=g.f.kb,g=g.height,y.O+=(g-1)*y.fa,y.fa=-y.fa,y.N+=(g-1>>1)*y.Ab,y.Ab=-y.Ab,y.W+=(g-1>>1)*y.Db,y.Db=-y.Db,y.F!=null&&(y.J+=(g-1)*y.lb,y.lb=-y.lb);return 0}function Rs(g,y,I,H){if(H==null||0>=g||0>=y)return 2;if(I!=null){if(I.Da){var J=I.cd,ie=I.bd,oe=-2&I.v,ce=-2&I.j;if(0>oe||0>ce||0>=J||0>=ie||oe+J>g||ce+ie>y)return 2;g=J,y=ie}if(I.da){if(!st(g,y,J=[I.ib],ie=[I.hb]))return 2;g=J[0],y=ie[0]}}H.width=g,H.height=y;e:{var de=H.width,ye=H.height;if(g=H.S,0>=de||0>=ye||!(g>=kd&&13>g))g=2;else{if(0>=H.Rd&&H.sd==null){oe=ie=J=y=0;var _e=(ce=de*jm[g])*ye;if(11>g||(ie=(ye+1)/2*(y=(de+1)/2),g==12&&(oe=(J=de)*ye)),(ye=l(_e+2*ie+oe))==null){g=1;break e}H.sd=ye,11>g?((de=H.f.RGBA).eb=ye,de.fb=0,de.A=ce,de.size=_e):((de=H.f.kb).y=ye,de.O=0,de.fa=ce,de.Fd=_e,de.f=ye,de.N=0+_e,de.Ab=y,de.Cd=ie,de.ea=ye,de.W=0+_e+ie,de.Db=y,de.Ed=ie,g==12&&(de.F=ye,de.J=0+_e+2*ie),de.Tc=oe,de.lb=J)}if(y=1,J=H.S,ie=H.width,oe=H.height,J>=kd&&13>J)if(11>J)g=H.f.RGBA,y&=(ce=Math.abs(g.A))*(oe-1)+ie<=g.size,y&=ce>=ie*jm[J],y&=g.eb!=null;else{g=H.f.kb,ce=(ie+1)/2,_e=(oe+1)/2,de=Math.abs(g.fa),ye=Math.abs(g.Ab);var Ue=Math.abs(g.Db),ze=Math.abs(g.lb),Oe=ze*(oe-1)+ie;y&=de*(oe-1)+ie<=g.Fd,y&=ye*(_e-1)+ce<=g.Cd,y=(y&=Ue*(_e-1)+ce<=g.Ed)&de>=ie&ye>=ce&Ue>=ce,y&=g.y!=null,y&=g.f!=null,y&=g.ea!=null,J==12&&(y&=ze>=ie,y&=Oe<=g.Tc,y&=g.F!=null)}else y=0;g=y?0:2}}return g!=0||I!=null&&I.fd&&(g=Nl(H)),g}var Wn=64,po=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],gs=24,ka=32,cn=8,ni=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Xe("Predictor0","PredictorAdd0"),L.Predictor0=function(){return 4278190080},L.Predictor1=function(g){return g},L.Predictor2=function(g,y,I){return y[I+0]},L.Predictor3=function(g,y,I){return y[I+1]},L.Predictor4=function(g,y,I){return y[I-1]},L.Predictor5=function(g,y,I){return Qe(Qe(g,y[I+1]),y[I+0])},L.Predictor6=function(g,y,I){return Qe(g,y[I-1])},L.Predictor7=function(g,y,I){return Qe(g,y[I+0])},L.Predictor8=function(g,y,I){return Qe(y[I-1],y[I+0])},L.Predictor9=function(g,y,I){return Qe(y[I+0],y[I+1])},L.Predictor10=function(g,y,I){return Qe(Qe(g,y[I-1]),Qe(y[I+0],y[I+1]))},L.Predictor11=function(g,y,I){var H=y[I+0];return 0>=qe(H>>24&255,g>>24&255,(y=y[I-1])>>24&255)+qe(H>>16&255,g>>16&255,y>>16&255)+qe(H>>8&255,g>>8&255,y>>8&255)+qe(255&H,255&g,255&y)?H:g},L.Predictor12=function(g,y,I){var H=y[I+0];return(gt((g>>24&255)+(H>>24&255)-((y=y[I-1])>>24&255))<<24|gt((g>>16&255)+(H>>16&255)-(y>>16&255))<<16|gt((g>>8&255)+(H>>8&255)-(y>>8&255))<<8|gt((255&g)+(255&H)-(255&y)))>>>0},L.Predictor13=function(g,y,I){var H=y[I-1];return(pt((g=Qe(g,y[I+0]))>>24&255,H>>24&255)<<24|pt(g>>16&255,H>>16&255)<<16|pt(g>>8&255,H>>8&255)<<8|pt(g>>0&255,H>>0&255))>>>0};var Z=L.PredictorAdd0;L.PredictorAdd1=ct,Xe("Predictor2","PredictorAdd2"),Xe("Predictor3","PredictorAdd3"),Xe("Predictor4","PredictorAdd4"),Xe("Predictor5","PredictorAdd5"),Xe("Predictor6","PredictorAdd6"),Xe("Predictor7","PredictorAdd7"),Xe("Predictor8","PredictorAdd8"),Xe("Predictor9","PredictorAdd9"),Xe("Predictor10","PredictorAdd10"),Xe("Predictor11","PredictorAdd11"),Xe("Predictor12","PredictorAdd12"),Xe("Predictor13","PredictorAdd13");var r=L.PredictorAdd2;qt("ColorIndexInverseTransform","MapARGB","32b",function(g){return g>>8&255},function(g){return g}),qt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(g){return g},function(g){return g>>8&255});var a,c=L.ColorIndexInverseTransform,u=L.MapARGB,d=L.VP8LColorIndexInverseTransformAlpha,h=L.MapAlpha,b=L.VP8LPredictorsAdd=[];b.length=16,(L.VP8LPredictors=[]).length=16,(L.VP8LPredictorsAdd_C=[]).length=16,(L.VP8LPredictors_C=[]).length=16;var w,T,V,X,se,be,Se,Ee,Le,Ge,at,dt,ot,on,Yt,_r,ri,Cr,An,br,Pr,Hi,Pa,$i,ea,ir,ar,Fr,ii=l(511),ks=l(2041),cu=l(225),nc=l(767),Md=0,zh=ks,Rd=cu,pa=nc,Fa=ii,kd=0,Pd=1,xm=2,Fd=3,Bd=4,Hh=5,bm=6,Vh=7,qh=8,Ud=9,Gh=10,Hy=[2,3,7],Vy=[3,3,11],ym=[280,256,256,256,40],qy=[0,1,1,1,0],Gy=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Wy=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Yy=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Xy=8,Wh=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Yh=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],uu=null,Zy=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Qy=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],vm=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Ky=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Jy=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],$y=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],ev=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],xo=[],$a=[],Ps=[],tv=1,wm=2,bo=[],Ba=[];Ke("UpsampleRgbLinePair",mn,3),Ke("UpsampleBgrLinePair",cr,3),Ke("UpsampleRgbaLinePair",ga,4),Ke("UpsampleBgraLinePair",xr,4),Ke("UpsampleArgbLinePair",ci,4),Ke("UpsampleRgba4444LinePair",pr,2),Ke("UpsampleRgb565LinePair",Pn,2);var nv=L.UpsampleRgbLinePair,rv=L.UpsampleBgrLinePair,Nm=L.UpsampleRgbaLinePair,Am=L.UpsampleBgraLinePair,Sm=L.UpsampleArgbLinePair,Cm=L.UpsampleRgba4444LinePair,iv=L.UpsampleRgb565LinePair,zd=16,Hd=1<<zd-1,du=-227,Xh=482,av=6,Em=0,sv=l(256),ov=l(256),lv=l(256),cv=l(256),uv=l(Xh-du),dv=l(Xh-du);zi("YuvToRgbRow",mn,3),zi("YuvToBgrRow",cr,3),zi("YuvToRgbaRow",ga,4),zi("YuvToBgraRow",xr,4),zi("YuvToArgbRow",ci,4),zi("YuvToRgba4444Row",pr,2),zi("YuvToRgb565Row",Pn,2);var Tm=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Vd=[0,2,8],fv=[8,7,6,4,4,2,2,2,1,1,1,1],hv=1;this.WebPDecodeRGBA=function(g,y,I,H,J){var ie=Pd,oe=new fo,ce=new Jt;oe.ba=ce,ce.S=ie,ce.width=[ce.width],ce.height=[ce.height];var de=ce.width,ye=ce.height,_e=new Kr;if(_e==null||g==null)var Ue=2;else t(_e!=null),Ue=go(g,y,I,_e.width,_e.height,_e.Pd,_e.Qd,_e.format,null);if(Ue!=0?de=0:(de!=null&&(de[0]=_e.width[0]),ye!=null&&(ye[0]=_e.height[0]),de=1),de){ce.width=ce.width[0],ce.height=ce.height[0],H!=null&&(H[0]=ce.width),J!=null&&(J[0]=ce.height);e:{if(H=new an,(J=new vl).data=g,J.w=y,J.ha=I,J.kd=1,y=[0],t(J!=null),((g=go(J.data,J.w,J.ha,null,null,null,y,null,J))==0||g==7)&&y[0]&&(g=4),(y=g)==0){if(t(oe!=null),H.data=J.data,H.w=J.w+J.offset,H.ha=J.ha-J.offset,H.put=Jr,H.ac=xn,H.bc=Si,H.ma=oe,J.xa){if((g=Je())==null){oe=1;break e}if(function(ze,Oe){var nt=[0],Ze=[0],Ie=[0];t:for(;;){if(ze==null)return 0;if(Oe==null)return ze.a=2,0;if(ze.l=Oe,ze.a=0,te(ze.m,Oe.data,Oe.w,Oe.ha),!It(ze.m,nt,Ze,Ie)){ze.a=3;break t}if(ze.xb=wm,Oe.width=nt[0],Oe.height=Ze[0],!bt(nt[0],Ze[0],1,ze,null))break t;return 1}return t(ze.a!=0),0}(g,H)){if(H=(y=Rs(H.width,H.height,oe.Oa,oe.ba))==0){t:{H=g;n:for(;;){if(H==null){H=0;break t}if(t(H.s.yc!=null),t(H.s.Ya!=null),t(0<H.s.Wb),t((I=H.l)!=null),t((J=I.ma)!=null),H.xb!=0){if(H.ca=J.ba,H.tb=J.tb,t(H.ca!=null),!Ms(J.Oa,I,Fd)){H.a=2;break n}if(!fn(H,I.width)||I.da)break n;if((I.da||Ft(H.ca.S))&&ke(),11>H.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),H.ca.f.kb.F!=null&&ke()),H.Pb&&0<H.s.ua&&H.s.vb.X==null&&!ut(H.s.vb,H.s.Wa.Xa)){H.a=1;break n}H.xb=0}if(!qr(H,H.V,H.Ba,H.c,H.i,I.o,wt))break n;J.Dc=H.Ma,H=1;break t}t(H.a!=0),H=0}H=!H}H&&(y=g.a)}else y=g.a}else{if((g=new ll)==null){oe=1;break e}if(g.Fa=J.na,g.P=J.P,g.qc=J.Sa,mr(g,H)){if((y=Rs(H.width,H.height,oe.Oa,oe.ba))==0){if(g.Aa=0,I=oe.Oa,t((J=g)!=null),I!=null){if(0<(de=0>(de=I.Md)?0:100<de?255:255*de/100)){for(ye=_e=0;4>ye;++ye)12>(Ue=J.pb[ye]).lc&&(Ue.ia=de*fv[0>Ue.lc?0:Ue.lc]>>3),_e|=Ue.ia;_e&&(alert("todo:VP8InitRandom"),J.ia=1)}J.Ga=I.Id,100<J.Ga?J.Ga=100:0>J.Ga&&(J.Ga=0)}lr(g,H)||(y=g.a)}}else y=g.a}y==0&&oe.Oa!=null&&oe.Oa.fd&&(y=Nl(oe.ba))}oe=y}ie=oe!=0?null:11>ie?ce.f.RGBA.eb:ce.f.kb.y}else ie=null;return ie};var jm=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function x(L,M){for(var z="",k=0;k<4;k++)z+=String.fromCharCode(L[M++]);return z}function S(L,M){return(L[M+0]<<0|L[M+1]<<8|L[M+2]<<16)>>>0}function N(L,M){return(L[M+0]<<0|L[M+1]<<8|L[M+2]<<16|L[M+3]<<24)>>>0}new p;var j=[0],v=[0],O=[],E=new p,P=e,C=function(L,M){var z={},k=0,R=!1,re=0,ee=0;if(z.frames=[],!function(q,Q,he,ue){for(var je=0;je<ue;je++)if(q[Q+je]!=he.charCodeAt(je))return!0;return!1}(L,M,"RIFF",4)){var ne,K;for(N(L,M+=4),M+=8;M<L.length;){var G=x(L,M),te=N(L,M+=4);M+=4;var W=te+(1&te);switch(G){case"VP8 ":case"VP8L":z.frames[k]===void 0&&(z.frames[k]={}),(B=z.frames[k]).src_off=R?ee:M-8,B.src_size=re+te+8,k++,R&&(R=!1,re=0,ee=0);break;case"VP8X":(B=z.header={}).feature_flags=L[M];var fe=M+4;B.canvas_width=1+S(L,fe),fe+=3,B.canvas_height=1+S(L,fe),fe+=3;break;case"ALPH":R=!0,re=W+8,ee=M-8;break;case"ANIM":(B=z.header).bgcolor=N(L,M),fe=M+4,B.loop_count=(ne=L)[(K=fe)+0]<<0|ne[K+1]<<8,fe+=2;break;case"ANMF":var le,B;(B=z.frames[k]={}).offset_x=2*S(L,M),M+=3,B.offset_y=2*S(L,M),M+=3,B.width=1+S(L,M),M+=3,B.height=1+S(L,M),M+=3,B.duration=S(L,M),M+=3,le=L[M++],B.dispose=1&le,B.blend=le>>1&1}G!="ANMF"&&(M+=W)}return z}}(P,0);C.response=P,C.rgbaoutput=!0,C.dataurl=!1;var _=C.header?C.header:null,D=C.frames?C.frames:null;if(_){_.loop_counter=_.loop_count,j=[_.canvas_height],v=[_.canvas_width];for(var U=0;U<D.length&&D[U].blend!=0;U++);}var Y=D[0],ae=E.WebPDecodeRGBA(P,Y.src_off,Y.src_size,v,j);Y.rgba=ae,Y.imgwidth=v[0],Y.imgheight=j[0];for(var F=0;F<v[0]*j[0]*4;F++)O[F]=ae[F];return this.width=v,this.height=j,this.data=O,this}(function(e){var t=function(){return typeof $1=="function"},n=function(j,v,O,E){var P=4,C=f;switch(E){case e.image_compression.FAST:P=1,C=l;break;case e.image_compression.MEDIUM:P=6,C=m;break;case e.image_compression.SLOW:P=9,C=p}j=i(j,v,O,C);var _=$1(j,{level:P});return e.__addimage__.arrayBufferToBinaryString(_)},i=function(j,v,O,E){for(var P,C,_,D=j.length/v,U=new Uint8Array(j.length+D),Y=S(),ae=0;ae<D;ae+=1){if(_=ae*v,P=j.subarray(_,_+v),E)U.set(E(P,O,C),_+ae);else{for(var F,L=Y.length,M=[];F<L;F+=1)M[F]=Y[F](P,O,C);var z=N(M.concat());U.set(M[z],_+ae)}C=P}return U},o=function(j){var v=Array.apply([],j);return v.unshift(0),v},l=function(j,v){var O,E=[],P=j.length;E[0]=1;for(var C=0;C<P;C+=1)O=j[C-v]||0,E[C+1]=j[C]-O+256&255;return E},f=function(j,v,O){var E,P=[],C=j.length;P[0]=2;for(var _=0;_<C;_+=1)E=O&&O[_]||0,P[_+1]=j[_]-E+256&255;return P},m=function(j,v,O){var E,P,C=[],_=j.length;C[0]=3;for(var D=0;D<_;D+=1)E=j[D-v]||0,P=O&&O[D]||0,C[D+1]=j[D]+256-(E+P>>>1)&255;return C},p=function(j,v,O){var E,P,C,_,D=[],U=j.length;D[0]=4;for(var Y=0;Y<U;Y+=1)E=j[Y-v]||0,P=O&&O[Y]||0,C=O&&O[Y-v]||0,_=x(E,P,C),D[Y+1]=j[Y]-_+256&255;return D},x=function(j,v,O){if(j===v&&v===O)return j;var E=Math.abs(v-O),P=Math.abs(j-O),C=Math.abs(j+v-O-O);return E<=P&&E<=C?j:P<=C?v:O},S=function(){return[o,l,f,m,p]},N=function(j){var v=j.map(function(O){return O.reduce(function(E,P){return E+Math.abs(P)},0)});return v.indexOf(Math.min.apply(null,v))};e.processPNG=function(j,v,O,E){var P,C,_,D,U,Y,ae,F,L,M,z,k,R,re,ee,ne=this.decode.FLATE_DECODE,K="";if(this.__addimage__.isArrayBuffer(j)&&(j=new Uint8Array(j)),this.__addimage__.isArrayBufferView(j)){if(j=(_=new _N(j)).imgData,C=_.bits,P=_.colorSpace,U=_.colors,[4,6].indexOf(_.colorType)!==-1){if(_.bits===8){L=(F=_.pixelBitlength==32?new Uint32Array(_.decodePixels().buffer):_.pixelBitlength==16?new Uint16Array(_.decodePixels().buffer):new Uint8Array(_.decodePixels().buffer)).length,z=new Uint8Array(L*_.colors),M=new Uint8Array(L);var G,te=_.pixelBitlength-_.bits;for(re=0,ee=0;re<L;re++){for(R=F[re],G=0;G<te;)z[ee++]=R>>>G&255,G+=_.bits;M[re]=R>>>G&255}}if(_.bits===16){L=(F=new Uint32Array(_.decodePixels().buffer)).length,z=new Uint8Array(L*(32/_.pixelBitlength)*_.colors),M=new Uint8Array(L*(32/_.pixelBitlength)),k=_.colors>1,re=0,ee=0;for(var W=0;re<L;)R=F[re++],z[ee++]=R>>>0&255,k&&(z[ee++]=R>>>16&255,R=F[re++],z[ee++]=R>>>0&255),M[W++]=R>>>16&255;C=8}E!==e.image_compression.NONE&&t()?(j=n(z,_.width*_.colors,_.colors,E),ae=n(M,_.width,1,E)):(j=z,ae=M,ne=void 0)}if(_.colorType===3&&(P=this.color_spaces.INDEXED,Y=_.palette,_.transparency.indexed)){var fe=_.transparency.indexed,le=0;for(re=0,L=fe.length;re<L;++re)le+=fe[re];if((le/=255)===L-1&&fe.indexOf(0)!==-1)D=[fe.indexOf(0)];else if(le!==L){for(F=_.decodePixels(),M=new Uint8Array(F.length),re=0,L=F.length;re<L;re++)M[re]=fe[F[re]];ae=n(M,_.width,1)}}var B=function(q){var Q;switch(q){case e.image_compression.FAST:Q=11;break;case e.image_compression.MEDIUM:Q=13;break;case e.image_compression.SLOW:Q=14;break;default:Q=12}return Q}(E);return ne===this.decode.FLATE_DECODE&&(K="/Predictor "+B+" "),K+="/Colors "+U+" /BitsPerComponent "+C+" /Columns "+_.width,(this.__addimage__.isArrayBuffer(j)||this.__addimage__.isArrayBufferView(j))&&(j=this.__addimage__.arrayBufferToBinaryString(j)),(ae&&this.__addimage__.isArrayBuffer(ae)||this.__addimage__.isArrayBufferView(ae))&&(ae=this.__addimage__.arrayBufferToBinaryString(ae)),{alias:O,data:j,index:v,filter:ne,decodeParameters:K,transparency:D,palette:Y,sMask:ae,predictor:B,width:_.width,height:_.height,bitsPerComponent:C,colorSpace:P}}}})(Ht.API),function(e){e.processGIF89A=function(t,n,i,o){var l=new IN(t),f=l.width,m=l.height,p=[];l.decodeAndBlitFrameRGBA(0,p);var x={data:p,width:f,height:m},S=new Y0(100).encode(x,100);return e.processJPEG.call(this,S,n,i,o)},e.processGIF87A=e.processGIF89A}(Ht.API),ns.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:o,green:i,blue:n,quad:l}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ns.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(n){nr.log("bit decode error:"+n)}},ns.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var i=this.bottom_up?e:this.height-1-e,o=0;o<t;o++)for(var l=this.datav.getUint8(this.pos++,!0),f=i*this.width*4+8*o*4,m=0;m<8&&8*o+m<this.width;m++){var p=this.palette[l>>7-m&1];this.data[f+4*m]=p.blue,this.data[f+4*m+1]=p.green,this.data[f+4*m+2]=p.red,this.data[f+4*m+3]=255}n!==0&&(this.pos+=4-n)}},ns.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,o=0;o<e;o++){var l=this.datav.getUint8(this.pos++,!0),f=i*this.width*4+2*o*4,m=l>>4,p=15&l,x=this.palette[m];if(this.data[f]=x.blue,this.data[f+1]=x.green,this.data[f+2]=x.red,this.data[f+3]=255,2*o+1>=this.width)break;x=this.palette[p],this.data[f+4]=x.blue,this.data[f+4+1]=x.green,this.data[f+4+2]=x.red,this.data[f+4+3]=255}t!==0&&(this.pos+=4-t)}},ns.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var o=this.datav.getUint8(this.pos++,!0),l=n*this.width*4+4*i;if(o<this.palette.length){var f=this.palette[o];this.data[l]=f.red,this.data[l+1]=f.green,this.data[l+2]=f.blue,this.data[l+3]=255}else this.data[l]=255,this.data[l+1]=255,this.data[l+2]=255,this.data[l+3]=255}e!==0&&(this.pos+=4-e)}},ns.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,o=0;o<this.width;o++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var f=(l&t)/t*255|0,m=(l>>5&t)/t*255|0,p=(l>>10&t)/t*255|0,x=l>>15?255:0,S=i*this.width*4+4*o;this.data[S]=p,this.data[S+1]=m,this.data[S+2]=f,this.data[S+3]=x}this.pos+=e}},ns.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var o=this.bottom_up?i:this.height-1-i,l=0;l<this.width;l++){var f=this.datav.getUint16(this.pos,!0);this.pos+=2;var m=(f&t)/t*255|0,p=(f>>5&n)/n*255|0,x=(f>>11)/t*255|0,S=o*this.width*4+4*l;this.data[S]=x,this.data[S+1]=p,this.data[S+2]=m,this.data[S+3]=255}this.pos+=e}},ns.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),f=t*this.width*4+4*n;this.data[f]=l,this.data[f+1]=o,this.data[f+2]=i,this.data[f+3]=255}this.pos+=this.width%4}},ns.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),f=this.datav.getUint8(this.pos++,!0),m=t*this.width*4+4*n;this.data[m]=l,this.data[m+1]=o,this.data[m+2]=i,this.data[m+3]=f}},ns.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,i,o){var l=new ns(t,!1),f=l.width,m=l.height,p={data:l.getData(),width:f,height:m},x=new Y0(100).encode(p,100);return e.processJPEG.call(this,x,n,i,o)}}(Ht.API),Pp.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,i,o){var l=new Pp(t),f=l.width,m=l.height,p={data:l.getData(),width:f,height:m},x=new Y0(100).encode(p,100);return e.processJPEG.call(this,x,n,i,o)}}(Ht.API),Ht.API.processRGBA=function(e,t,n){for(var i=e.data,o=i.length,l=new Uint8Array(o/4*3),f=new Uint8Array(o/4),m=0,p=0,x=0;x<o;x+=4){var S=i[x],N=i[x+1],j=i[x+2],v=i[x+3];l[m++]=S,l[m++]=N,l[m++]=j,f[p++]=v}var O=this.__addimage__.arrayBufferToBinaryString(l);return{alpha:this.__addimage__.arrayBufferToBinaryString(f),data:O,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Ht.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},uc=Ht.API,yf=uc.getCharWidthsArray=function(e,t){var n,i,o=(t=t||{}).font||this.internal.getFont(),l=t.fontSize||this.internal.getFontSize(),f=t.charSpace||this.internal.getCharSpace(),m=t.widths?t.widths:o.metadata.Unicode.widths,p=m.fof?m.fof:1,x=t.kerning?t.kerning:o.metadata.Unicode.kerning,S=x.fof?x.fof:1,N=t.doKerning!==!1,j=0,v=e.length,O=0,E=m[0]||p,P=[];for(n=0;n<v;n++)i=e.charCodeAt(n),typeof o.metadata.widthOfString=="function"?P.push((o.metadata.widthOfGlyph(o.metadata.characterToGlyph(i))+f*(1e3/l)||0)/1e3):(j=N&&Vn(x[i])==="object"&&!isNaN(parseInt(x[i][O],10))?x[i][O]/S:0,P.push((m[i]||E)/p+j)),O=i;return P},Op=uc.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),i=t.font||this.internal.getFont(),o=t.charSpace||this.internal.getCharSpace();return uc.processArabic&&(e=uc.processArabic(e)),typeof i.metadata.widthOfString=="function"?i.metadata.widthOfString(e,n,o)/n:yf.apply(this,arguments).reduce(function(l,f){return l+f},0)},Mp=function(e,t,n,i){for(var o=[],l=0,f=e.length,m=0;l!==f&&m+t[l]<n;)m+=t[l],l++;o.push(e.slice(0,l));var p=l;for(m=0;l!==f;)m+t[l]>i&&(o.push(e.slice(p,l)),m=0,p=l),m+=t[l],l++;return p!==l&&o.push(e.slice(p,l)),o},Rp=function(e,t,n){n||(n={});var i,o,l,f,m,p,x,S=[],N=[S],j=n.textIndent||0,v=0,O=0,E=e.split(" "),P=yf.apply(this,[" ",n])[0];if(p=n.lineIndent===-1?E[0].length+2:n.lineIndent||0){var C=Array(p).join(" "),_=[];E.map(function(U){(U=U.split(/\s*\n/)).length>1?_=_.concat(U.map(function(Y,ae){return(ae&&Y.length?`
`:"")+Y})):_.push(U[0])}),E=_,p=Op.apply(this,[C,n])}for(l=0,f=E.length;l<f;l++){var D=0;if(i=E[l],p&&i[0]==`
`&&(i=i.substr(1),D=1),j+v+(O=(o=yf.apply(this,[i,n])).reduce(function(U,Y){return U+Y},0))>t||D){if(O>t){for(m=Mp.apply(this,[i,o,t-(j+v),t]),S.push(m.shift()),S=[m.pop()];m.length;)N.push([m.shift()]);O=o.slice(i.length-(S[0]?S[0].length:0)).reduce(function(U,Y){return U+Y},0)}else S=[i];N.push(S),j=O+p,v=P}else S.push(i),j+=v+O,v=P}return x=p?function(U,Y){return(Y?C:"")+U.join(" ")}:function(U){return U.join(" ")},N.map(x)},uc.splitTextToSize=function(e,t,n){var i,o=(n=n||{}).fontSize||this.internal.getFontSize(),l=(function(S){if(S.widths&&S.kerning)return{widths:S.widths,kerning:S.kerning};var N=this.internal.getFont(S.fontName,S.fontStyle);return N.metadata.Unicode?{widths:N.metadata.Unicode.widths||{0:1},kerning:N.metadata.Unicode.kerning||{}}:{font:N.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);i=Array.isArray(e)?e:String(e).split(/\r?\n/);var f=1*this.internal.scaleFactor*t/o;l.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/o:0,l.lineIndent=n.lineIndent;var m,p,x=[];for(m=0,p=i.length;m<p;m++)x=x.concat(Rp.apply(this,[i[m],f,l]));return x},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",n={},i={},o=0;o<t.length;o++)n[t[o]]="0123456789abcdef"[o],i["0123456789abcdef"[o]]=t[o];var l=function(N){return"0x"+parseInt(N,10).toString(16)},f=e.__fontmetrics__.compress=function(N){var j,v,O,E,P=["{"];for(var C in N){if(j=N[C],isNaN(parseInt(C,10))?v="'"+C+"'":(C=parseInt(C,10),v=(v=l(C).slice(2)).slice(0,-1)+i[v.slice(-1)]),typeof j=="number")j<0?(O=l(j).slice(3),E="-"):(O=l(j).slice(2),E=""),O=E+O.slice(0,-1)+i[O.slice(-1)];else{if(Vn(j)!=="object")throw new Error("Don't know what to do with value type "+Vn(j)+".");O=f(j)}P.push(v+O)}return P.push("}"),P.join("")},m=e.__fontmetrics__.uncompress=function(N){if(typeof N!="string")throw new Error("Invalid argument passed to uncompress.");for(var j,v,O,E,P={},C=1,_=P,D=[],U="",Y="",ae=N.length-1,F=1;F<ae;F+=1)(E=N[F])=="'"?j?(O=j.join(""),j=void 0):j=[]:j?j.push(E):E=="{"?(D.push([_,O]),_={},O=void 0):E=="}"?((v=D.pop())[0][v[1]]=_,O=void 0,_=v[0]):E=="-"?C=-1:O===void 0?n.hasOwnProperty(E)?(U+=n[E],O=parseInt(U,16)*C,C=1,U=""):U+=E:n.hasOwnProperty(E)?(Y+=n[E],_[O]=parseInt(Y,16)*C,C=1,O=void 0,Y=""):Y+=E;return P},p={codePages:["WinAnsiEncoding"],WinAnsiEncoding:m("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},x={Unicode:{Courier:p,"Courier-Bold":p,"Courier-BoldOblique":p,"Courier-Oblique":p,Helvetica:p,"Helvetica-Bold":p,"Helvetica-BoldOblique":p,"Helvetica-Oblique":p,"Times-Roman":p,"Times-Bold":p,"Times-BoldItalic":p,"Times-Italic":p}},S={Unicode:{"Courier-Oblique":m("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":m("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":m("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:m("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":m("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":m("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:m("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:m("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":m("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:m("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":m("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":m("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":m("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":m("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(N){var j=N.font,v=S.Unicode[j.postScriptName];v&&(j.metadata.Unicode={},j.metadata.Unicode.widths=v.widths,j.metadata.Unicode.kerning=v.kerning);var O=x.Unicode[j.postScriptName];O&&(j.metadata.Unicode.encoding=O,j.encoding=O.codePages[0])}])}(Ht.API),function(e){var t=function(n){for(var i=n.length,o=new Uint8Array(i),l=0;l<i;l++)o[l]=n.charCodeAt(l);return o};e.API.events.push(["addFont",function(n){var i=void 0,o=n.font,l=n.instance;if(!o.isStandardFont){if(l===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");if(typeof(i=l.existsFileInVFS(o.postScriptName)===!1?l.loadFile(o.postScriptName):l.getFileFromVFS(o.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");(function(f,m){m=/^\x00\x01\x00\x00/.test(m)?t(m):t(Wu(m)),f.metadata=e.API.TTFFont.open(m),f.metadata.Unicode=f.metadata.Unicode||{encoding:{},kerning:{},widths:[]},f.metadata.glyIdsUsed=[0]})(o,i)}}])}(Ht),function(e){function t(){return(Wt.canvg?Promise.resolve(Wt.canvg):X1(()=>import("./index.es-CNaSpe7i.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}Ht.API.addSvgAsImage=function(n,i,o,l,f,m,p,x){if(isNaN(i)||isNaN(o))throw nr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(l)||isNaN(f))throw nr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var S=document.createElement("canvas");S.width=l,S.height=f;var N=S.getContext("2d");N.fillStyle="#fff",N.fillRect(0,0,S.width,S.height);var j={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},v=this;return t().then(function(O){return O.fromString(N,n,j)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(O){return O.render(j)}).then(function(){v.addImage(S.toDataURL("image/jpeg",1),i,o,l,f,p,x)})}}(),Ht.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var o=0;o<this.internal.pages[i].length;o++)this.internal.pages[i][o]=this.internal.pages[i][o].replace(t,n);return this},Ht.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var i,o,l,f={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},m=Object.keys(f),p=[],x=0,S=0,N=0;function j(O,E){var P,C=!1;for(P=0;P<O.length;P+=1)O[P]===E&&(C=!0);return C}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(f)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var v=m.length;for(N=0;N<v;N+=1)n[m[N]].value=n[m[N]].defaultValue,n[m[N]].explicitSet=!1}if(Vn(e)==="object"){for(o in e)if(l=e[o],j(m,o)&&l!==void 0){if(n[o].type==="boolean"&&typeof l=="boolean")n[o].value=l;else if(n[o].type==="name"&&j(n[o].valueSet,l))n[o].value=l;else if(n[o].type==="integer"&&Number.isInteger(l))n[o].value=l;else if(n[o].type==="array"){for(x=0;x<l.length;x+=1)if(i=!0,l[x].length===1&&typeof l[x][0]=="number")p.push(String(l[x]-1));else if(l[x].length>1){for(S=0;S<l[x].length;S+=1)typeof l[x][S]!="number"&&(i=!1);i===!0&&p.push([l[x][0]-1,l[x][1]-1].join(" "))}n[o].value="["+p.join(" ")+"]"}else n[o].value=n[o].defaultValue;n[o].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var O,E=[];for(O in n)n[O].explicitSet===!0&&(n[O].type==="name"?E.push("/"+O+" /"+n[O].value):E.push("/"+O+" "+n[O].value));E.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+E.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var i='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',o=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),l=unescape(encodeURIComponent(i)),f=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),m=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),p=unescape(encodeURIComponent("</x:xmpmeta>")),x=l.length+f.length+m.length+o.length+p.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+x+" >>"),this.internal.write("stream"),this.internal.write(o+l+f+m+p),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(i,o){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:i,namespaceuri:o||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(Ht.API),function(e){var t=e.API,n=t.pdfEscape16=function(l,f){for(var m,p=f.metadata.Unicode.widths,x=["","0","00","000","0000"],S=[""],N=0,j=l.length;N<j;++N){if(m=f.metadata.characterToGlyph(l.charCodeAt(N)),f.metadata.glyIdsUsed.push(m),f.metadata.toUnicode[m]=l.charCodeAt(N),p.indexOf(m)==-1&&(p.push(m),p.push([parseInt(f.metadata.widthOfGlyph(m),10)])),m=="0")return S.join("");m=m.toString(16),S.push(x[4-m.length],m)}return S.join("")},i=function(l){var f,m,p,x,S,N,j;for(S=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,p=[],N=0,j=(m=Object.keys(l).sort(function(v,O){return v-O})).length;N<j;N++)f=m[N],p.length>=100&&(S+=`
`+p.length+` beginbfchar
`+p.join(`
`)+`
endbfchar`,p=[]),l[f]!==void 0&&l[f]!==null&&typeof l[f].toString=="function"&&(x=("0000"+l[f].toString(16)).slice(-4),f=("0000"+(+f).toString(16)).slice(-4),p.push("<"+f+"><"+x+">"));return p.length&&(S+=`
`+p.length+` beginbfchar
`+p.join(`
`)+`
endbfchar
`),S+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(l){(function(f){var m=f.font,p=f.out,x=f.newObject,S=f.putStream;if(m.metadata instanceof e.API.TTFFont&&m.encoding==="Identity-H"){for(var N=m.metadata.Unicode.widths,j=m.metadata.subset.encode(m.metadata.glyIdsUsed,1),v="",O=0;O<j.length;O++)v+=String.fromCharCode(j[O]);var E=x();S({data:v,addLength1:!0,objectId:E}),p("endobj");var P=x();S({data:i(m.metadata.toUnicode),addLength1:!0,objectId:P}),p("endobj");var C=x();p("<<"),p("/Type /FontDescriptor"),p("/FontName /"+xc(m.fontName)),p("/FontFile2 "+E+" 0 R"),p("/FontBBox "+e.API.PDFObject.convert(m.metadata.bbox)),p("/Flags "+m.metadata.flags),p("/StemV "+m.metadata.stemV),p("/ItalicAngle "+m.metadata.italicAngle),p("/Ascent "+m.metadata.ascender),p("/Descent "+m.metadata.decender),p("/CapHeight "+m.metadata.capHeight),p(">>"),p("endobj");var _=x();p("<<"),p("/Type /Font"),p("/BaseFont /"+xc(m.fontName)),p("/FontDescriptor "+C+" 0 R"),p("/W "+e.API.PDFObject.convert(N)),p("/CIDToGIDMap /Identity"),p("/DW 1000"),p("/Subtype /CIDFontType2"),p("/CIDSystemInfo"),p("<<"),p("/Supplement 0"),p("/Registry (Adobe)"),p("/Ordering ("+m.encoding+")"),p(">>"),p(">>"),p("endobj"),m.objectNumber=x(),p("<<"),p("/Type /Font"),p("/Subtype /Type0"),p("/ToUnicode "+P+" 0 R"),p("/BaseFont /"+xc(m.fontName)),p("/Encoding /"+m.encoding),p("/DescendantFonts ["+_+" 0 R]"),p(">>"),p("endobj"),m.isAlreadyPutted=!0}})(l)}]),t.events.push(["putFont",function(l){(function(f){var m=f.font,p=f.out,x=f.newObject,S=f.putStream;if(m.metadata instanceof e.API.TTFFont&&m.encoding==="WinAnsiEncoding"){for(var N=m.metadata.rawData,j="",v=0;v<N.length;v++)j+=String.fromCharCode(N[v]);var O=x();S({data:j,addLength1:!0,objectId:O}),p("endobj");var E=x();S({data:i(m.metadata.toUnicode),addLength1:!0,objectId:E}),p("endobj");var P=x();p("<<"),p("/Descent "+m.metadata.decender),p("/CapHeight "+m.metadata.capHeight),p("/StemV "+m.metadata.stemV),p("/Type /FontDescriptor"),p("/FontFile2 "+O+" 0 R"),p("/Flags 96"),p("/FontBBox "+e.API.PDFObject.convert(m.metadata.bbox)),p("/FontName /"+xc(m.fontName)),p("/ItalicAngle "+m.metadata.italicAngle),p("/Ascent "+m.metadata.ascender),p(">>"),p("endobj"),m.objectNumber=x();for(var C=0;C<m.metadata.hmtx.widths.length;C++)m.metadata.hmtx.widths[C]=parseInt(m.metadata.hmtx.widths[C]*(1e3/m.metadata.head.unitsPerEm));p("<</Subtype/TrueType/Type/Font/ToUnicode "+E+" 0 R/BaseFont/"+xc(m.fontName)+"/FontDescriptor "+P+" 0 R/Encoding/"+m.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(m.metadata.hmtx.widths)+">>"),p("endobj"),m.isAlreadyPutted=!0}})(l)}]);var o=function(l){var f,m=l.text||"",p=l.x,x=l.y,S=l.options||{},N=l.mutex||{},j=N.pdfEscape,v=N.activeFontKey,O=N.fonts,E=v,P="",C=0,_="",D=O[E].encoding;if(O[E].encoding!=="Identity-H")return{text:m,x:p,y:x,options:S,mutex:N};for(_=m,E=v,Array.isArray(m)&&(_=m[0]),C=0;C<_.length;C+=1)O[E].metadata.hasOwnProperty("cmap")&&(f=O[E].metadata.cmap.unicode.codeMap[_[C].charCodeAt(0)]),f||_[C].charCodeAt(0)<256&&O[E].metadata.hasOwnProperty("Unicode")?P+=_[C]:P+="";var U="";return parseInt(E.slice(1))<14||D==="WinAnsiEncoding"?U=j(P,E).split("").map(function(Y){return Y.charCodeAt(0).toString(16)}).join(""):D==="Identity-H"&&(U=n(P,O[E])),N.isHex=!0,{text:U,x:p,y:x,options:S,mutex:N}};t.events.push(["postProcessText",function(l){var f=l.text||"",m=[],p={text:f,x:l.x,y:l.y,options:l.options,mutex:l.mutex};if(Array.isArray(f)){var x=0;for(x=0;x<f.length;x+=1)Array.isArray(f[x])&&f[x].length===3?m.push([o(Object.assign({},p,{text:f[x][0]})).text,f[x][1],f[x][2]]):m.push(o(Object.assign({},p,{text:f[x]})).text);l.text=m}else l.text=o(Object.assign({},p,{text:f})).text}])}(Ht),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0},e.addFileToVFS=function(n,i){return t.call(this),this.internal.vFS[n]=i,this},e.getFileFromVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(Ht.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(i){var o,l,f,m,p,x,S,N=t,j=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],v=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],O={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},E={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},P=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],C=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),_=!1,D=0;this.__bidiEngine__={};var U=function(k){var R=k.charCodeAt(),re=R>>8,ee=E[re];return ee!==void 0?N[256*ee+(255&R)]:re===252||re===253?"AL":C.test(re)?"L":re===8?"R":"N"},Y=function(k){for(var R,re=0;re<k.length;re++){if((R=U(k.charAt(re)))==="L")return!1;if(R==="R")return!0}return!1},ae=function(k,R,re,ee){var ne,K,G,te,W=R[ee];switch(W){case"L":case"R":_=!1;break;case"N":case"AN":break;case"EN":_&&(W="AN");break;case"AL":_=!0,W="R";break;case"WS":W="N";break;case"CS":ee<1||ee+1>=R.length||(ne=re[ee-1])!=="EN"&&ne!=="AN"||(K=R[ee+1])!=="EN"&&K!=="AN"?W="N":_&&(K="AN"),W=K===ne?K:"N";break;case"ES":W=(ne=ee>0?re[ee-1]:"B")==="EN"&&ee+1<R.length&&R[ee+1]==="EN"?"EN":"N";break;case"ET":if(ee>0&&re[ee-1]==="EN"){W="EN";break}if(_){W="N";break}for(G=ee+1,te=R.length;G<te&&R[G]==="ET";)G++;W=G<te&&R[G]==="EN"?"EN":"N";break;case"NSM":if(f&&!m){for(te=R.length,G=ee+1;G<te&&R[G]==="NSM";)G++;if(G<te){var fe=k[ee],le=fe>=1425&&fe<=2303||fe===64286;if(ne=R[G],le&&(ne==="R"||ne==="AL")){W="R";break}}}W=ee<1||(ne=R[ee-1])==="B"?"N":re[ee-1];break;case"B":_=!1,o=!0,W=D;break;case"S":l=!0,W="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":_=!1;break;case"BN":W="N"}return W},F=function(k,R,re){var ee=k.split("");return re&&L(ee,re,{hiLevel:D}),ee.reverse(),R&&R.reverse(),ee.join("")},L=function(k,R,re){var ee,ne,K,G,te,W=-1,fe=k.length,le=0,B=[],q=D?v:j,Q=[];for(_=!1,o=!1,l=!1,ne=0;ne<fe;ne++)Q[ne]=U(k[ne]);for(K=0;K<fe;K++){if(te=le,B[K]=ae(k,Q,B,K),ee=240&(le=q[te][O[B[K]]]),le&=15,R[K]=G=q[le][5],ee>0)if(ee===16){for(ne=W;ne<K;ne++)R[ne]=1;W=-1}else W=-1;if(q[le][6])W===-1&&(W=K);else if(W>-1){for(ne=W;ne<K;ne++)R[ne]=G;W=-1}Q[K]==="B"&&(R[K]=0),re.hiLevel|=G}l&&function(he,ue,je){for(var Ae=0;Ae<je;Ae++)if(he[Ae]==="S"){ue[Ae]=D;for(var ve=Ae-1;ve>=0&&he[ve]==="WS";ve--)ue[ve]=D}}(Q,R,fe)},M=function(k,R,re,ee,ne){if(!(ne.hiLevel<k)){if(k===1&&D===1&&!o)return R.reverse(),void(re&&re.reverse());for(var K,G,te,W,fe=R.length,le=0;le<fe;){if(ee[le]>=k){for(te=le+1;te<fe&&ee[te]>=k;)te++;for(W=le,G=te-1;W<G;W++,G--)K=R[W],R[W]=R[G],R[G]=K,re&&(K=re[W],re[W]=re[G],re[G]=K);le=te}le++}}},z=function(k,R,re){var ee=k.split(""),ne={hiLevel:D};return re||(re=[]),L(ee,re,ne),function(K,G,te){if(te.hiLevel!==0&&S)for(var W,fe=0;fe<K.length;fe++)G[fe]===1&&(W=P.indexOf(K[fe]))>=0&&(K[fe]=P[W+1])}(ee,re,ne),M(2,ee,R,re,ne),M(1,ee,R,re,ne),ee.join("")};return this.__bidiEngine__.doBidiReorder=function(k,R,re){if(function(ne,K){if(K)for(var G=0;G<ne.length;G++)K[G]=G;m===void 0&&(m=Y(ne)),x===void 0&&(x=Y(ne))}(k,R),f||!p||x)if(f&&p&&m^x)D=m?1:0,k=F(k,R,re);else if(!f&&p&&x)D=m?1:0,k=z(k,R,re),k=F(k,R);else if(!f||m||p||x){if(f&&!p&&m^x)k=F(k,R),m?(D=0,k=z(k,R,re)):(D=1,k=z(k,R,re),k=F(k,R));else if(f&&m&&!p&&x)D=1,k=z(k,R,re),k=F(k,R);else if(!f&&!p&&m^x){var ee=S;m?(D=1,k=z(k,R,re),D=0,S=!1,k=z(k,R,re),S=ee):(D=0,k=z(k,R,re),k=F(k,R),D=1,S=!1,k=z(k,R,re),S=ee,k=F(k,R))}}else D=0,k=z(k,R,re);else D=m?1:0,k=z(k,R,re);return k},this.__bidiEngine__.setOptions=function(k){k&&(f=k.isInputVisual,p=k.isOutputVisual,m=k.isInputRtl,x=k.isOutputRtl,S=k.isSymmetricSwapping)},this.__bidiEngine__.setOptions(i),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(i){var o=i.text,l=(i.x,i.y,i.options||{}),f=(i.mutex,l.lang,[]);if(l.isInputVisual=typeof l.isInputVisual!="boolean"||l.isInputVisual,n.setOptions(l),Object.prototype.toString.call(o)==="[object Array]"){var m=0;for(f=[],m=0;m<o.length;m+=1)Object.prototype.toString.call(o[m])==="[object Array]"?f.push([n.doBidiReorder(o[m][0]),o[m][1],o[m][2]]):f.push([n.doBidiReorder(o[m])]);i.text=f}else i.text=n.doBidiReorder(o);n.setOptions({isInputVisual:!0})}])}(Ht),Ht.API.TTFFont=function(){function e(t){var n;if(this.rawData=t,n=this.contents=new rl(t),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new GN(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new DN(this.contents),this.head=new ON(this),this.name=new FN(this),this.cmap=new Ty(this),this.toUnicode={},this.hhea=new MN(this),this.maxp=new BN(this),this.hmtx=new UN(this),this.post=new kN(this),this.os2=new RN(this),this.loca=new qN(this),this.glyf=new zN(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,n,i,o,l;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var f,m,p,x;for(x=[],f=0,m=(p=this.bbox).length;f<m;f++)t=p[f],x.push(Math.round(t*this.scaleFactor));return x}).call(this),this.stemV=0,this.post.exists?(i=255&(o=this.post.italic_angle),32768&(n=o>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(l=this.familyClass)===1||l===2||l===3||l===4||l===5||l===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var n;return((n=this.cmap.unicode)!=null?n.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*n},e.prototype.widthOfString=function(t,n,i){var o,l,f,m;for(f=0,l=0,m=(t=""+t).length;0<=m?l<m:l>m;l=0<=m?++l:--l)o=t.charCodeAt(l),f+=this.widthOfGlyph(this.characterToGlyph(o))+i*(1e3/n)||0;return f*(n/1e3)},e.prototype.lineHeight=function(t,n){var i;return n==null&&(n=!1),i=n?this.lineGap:0,(this.ascender+i-this.decender)/1e3*t},e}();var cs,rl=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var n,i;for(i=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)i[n]=String.fromCharCode(this.readByte());return i.join("")},e.prototype.writeString=function(t){var n,i,o;for(o=[],n=0,i=t.length;0<=i?n<i:n>i;n=0<=i?++n:--n)o.push(this.writeByte(t.charCodeAt(n)));return o},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,n,i,o,l,f,m,p;return t=this.readByte(),n=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),f=this.readByte(),m=this.readByte(),p=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^n)+1099511627776*(255^i)+4294967296*(255^o)+16777216*(255^l)+65536*(255^f)+256*(255^m)+(255^p)+1):72057594037927940*t+281474976710656*n+1099511627776*i+4294967296*o+16777216*l+65536*f+256*m+p},e.prototype.writeLongLong=function(t){var n,i;return n=Math.floor(t/4294967296),i=4294967295&t,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var n,i;for(n=[],i=0;0<=t?i<t:i>t;i=0<=t?++i:--i)n.push(this.readByte());return n},e.prototype.write=function(t){var n,i,o,l;for(l=[],i=0,o=t.length;i<o;i++)n=t[i],l.push(this.writeByte(n));return l},e}(),DN=function(){var e;function t(n){var i,o,l;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},o=0,l=this.tableCount;0<=l?o<l:o>l;o=0<=l?++o:--o)i={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[i.tag]=i}return t.prototype.encode=function(n){var i,o,l,f,m,p,x,S,N,j,v,O,E;for(E in v=Object.keys(n).length,p=Math.log(2),N=16*Math.floor(Math.log(v)/p),f=Math.floor(N/p),S=16*v-N,(o=new rl).writeInt(this.scalarType),o.writeShort(v),o.writeShort(N),o.writeShort(f),o.writeShort(S),l=16*v,x=o.pos+l,m=null,O=[],n)for(j=n[E],o.writeString(E),o.writeInt(e(j)),o.writeInt(x),o.writeInt(j.length),O=O.concat(j),E==="head"&&(m=x),x+=j.length;x%4;)O.push(0),x++;return o.write(O),i=2981146554-e(o.data),o.pos=m+8,o.writeUInt32(i),o.data},e=function(n){var i,o,l,f;for(n=jy.call(n);n.length%4;)n.push(0);for(l=new rl(n),o=0,i=0,f=n.length;i<f;i=i+=4)o+=l.readUInt32();return 4294967295&o},t}(),LN={}.hasOwnProperty,Is=function(e,t){for(var n in t)LN.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};cs=function(){function e(t){var n;this.file=t,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var ON=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Is(t,cs),t.prototype.tag="head",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},t.prototype.encode=function(n){var i;return(i=new rl).writeInt(this.version),i.writeInt(this.revision),i.writeInt(this.checkSumAdjustment),i.writeInt(this.magicNumber),i.writeShort(this.flags),i.writeShort(this.unitsPerEm),i.writeLongLong(this.created),i.writeLongLong(this.modified),i.writeShort(this.xMin),i.writeShort(this.yMin),i.writeShort(this.xMax),i.writeShort(this.yMax),i.writeShort(this.macStyle),i.writeShort(this.lowestRecPPEM),i.writeShort(this.fontDirectionHint),i.writeShort(n),i.writeShort(this.glyphDataFormat),i.data},t}(),Fp=function(){function e(t,n){var i,o,l,f,m,p,x,S,N,j,v,O,E,P,C,_,D;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=n+t.readInt(),N=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(p=0;p<256;++p)this.codeMap[p]=t.readByte();break;case 4:for(v=t.readUInt16(),j=v/2,t.pos+=6,l=function(){var U,Y;for(Y=[],p=U=0;0<=j?U<j:U>j;p=0<=j?++U:--U)Y.push(t.readUInt16());return Y}(),t.pos+=2,E=function(){var U,Y;for(Y=[],p=U=0;0<=j?U<j:U>j;p=0<=j?++U:--U)Y.push(t.readUInt16());return Y}(),x=function(){var U,Y;for(Y=[],p=U=0;0<=j?U<j:U>j;p=0<=j?++U:--U)Y.push(t.readUInt16());return Y}(),S=function(){var U,Y;for(Y=[],p=U=0;0<=j?U<j:U>j;p=0<=j?++U:--U)Y.push(t.readUInt16());return Y}(),o=(this.length-t.pos+this.offset)/2,m=function(){var U,Y;for(Y=[],p=U=0;0<=o?U<o:U>o;p=0<=o?++U:--U)Y.push(t.readUInt16());return Y}(),p=C=0,D=l.length;C<D;p=++C)for(P=l[p],i=_=O=E[p];O<=P?_<=P:_>=P;i=O<=P?++_:--_)S[p]===0?f=i+x[p]:(f=m[S[p]/2+(i-O)-(j-p)]||0)!==0&&(f+=x[p]),this.codeMap[i]=65535&f}t.pos=N}return e.encode=function(t,n){var i,o,l,f,m,p,x,S,N,j,v,O,E,P,C,_,D,U,Y,ae,F,L,M,z,k,R,re,ee,ne,K,G,te,W,fe,le,B,q,Q,he,ue,je,Ae,ve,Pe,Te,Ye;switch(ee=new rl,f=Object.keys(t).sort(function(He,ut){return He-ut}),n){case"macroman":for(E=0,P=function(){var He=[];for(O=0;O<256;++O)He.push(0);return He}(),_={0:0},l={},ne=0,W=f.length;ne<W;ne++)_[ve=t[o=f[ne]]]==null&&(_[ve]=++E),l[o]={old:t[o],new:_[t[o]]},P[o]=_[t[o]];return ee.writeUInt16(1),ee.writeUInt16(0),ee.writeUInt32(12),ee.writeUInt16(0),ee.writeUInt16(262),ee.writeUInt16(0),ee.write(P),{charMap:l,subtable:ee.data,maxGlyphID:E+1};case"unicode":for(R=[],N=[],D=0,_={},i={},C=x=null,K=0,fe=f.length;K<fe;K++)_[Y=t[o=f[K]]]==null&&(_[Y]=++D),i[o]={old:Y,new:_[Y]},m=_[Y]-o,C!=null&&m===x||(C&&N.push(C),R.push(o),x=m),C=o;for(C&&N.push(C),N.push(65535),R.push(65535),z=2*(M=R.length),L=2*Math.pow(Math.log(M)/Math.LN2,2),j=Math.log(L/2)/Math.LN2,F=2*M-L,p=[],ae=[],v=[],O=G=0,le=R.length;G<le;O=++G){if(k=R[O],S=N[O],k===65535){p.push(0),ae.push(0);break}if(k-(re=i[k].new)>=32768)for(p.push(0),ae.push(2*(v.length+M-O)),o=te=k;k<=S?te<=S:te>=S;o=k<=S?++te:--te)v.push(i[o].new);else p.push(re-k),ae.push(0)}for(ee.writeUInt16(3),ee.writeUInt16(1),ee.writeUInt32(12),ee.writeUInt16(4),ee.writeUInt16(16+8*M+2*v.length),ee.writeUInt16(0),ee.writeUInt16(z),ee.writeUInt16(L),ee.writeUInt16(j),ee.writeUInt16(F),je=0,B=N.length;je<B;je++)o=N[je],ee.writeUInt16(o);for(ee.writeUInt16(0),Ae=0,q=R.length;Ae<q;Ae++)o=R[Ae],ee.writeUInt16(o);for(Pe=0,Q=p.length;Pe<Q;Pe++)m=p[Pe],ee.writeUInt16(m);for(Te=0,he=ae.length;Te<he;Te++)U=ae[Te],ee.writeUInt16(U);for(Ye=0,ue=v.length;Ye<ue;Ye++)E=v[Ye],ee.writeUInt16(E);return{charMap:i,subtable:ee.data,maxGlyphID:D+1}}},e}(),Ty=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Is(t,cs),t.prototype.tag="cmap",t.prototype.parse=function(n){var i,o,l;for(n.pos=this.offset,this.version=n.readUInt16(),l=n.readUInt16(),this.tables=[],this.unicode=null,o=0;0<=l?o<l:o>l;o=0<=l?++o:--o)i=new Fp(n,this.offset),this.tables.push(i),i.isUnicode&&this.unicode==null&&(this.unicode=i);return!0},t.encode=function(n,i){var o,l;return i==null&&(i="macroman"),o=Fp.encode(n,i),(l=new rl).writeUInt16(0),l.writeUInt16(1),o.table=l.data.concat(o.subtable),o},t}(),MN=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Is(t,cs),t.prototype.tag="hhea",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},t}(),RN=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Is(t,cs),t.prototype.tag="OS/2",t.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var i,o;for(o=[],i=0;i<10;++i)o.push(n.readByte());return o}(),this.charRange=function(){var i,o;for(o=[],i=0;i<4;++i)o.push(n.readInt());return o}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var i,o;for(o=[],i=0;i<2;i=++i)o.push(n.readInt());return o}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},t}(),kN=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Is(t,cs),t.prototype.tag="post",t.prototype.parse=function(n){var i,o,l;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var f;for(o=n.readUInt16(),this.glyphNameIndex=[],f=0;0<=o?f<o:f>o;f=0<=o?++f:--f)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],l=[];n.pos<this.offset+this.length;)i=n.readByte(),l.push(this.names.push(n.readString(i)));return l;case 151552:return o=n.readUInt16(),this.offsets=n.read(o);case 196608:break;case 262144:return this.map=(function(){var m,p,x;for(x=[],f=m=0,p=this.file.maxp.numGlyphs;0<=p?m<p:m>p;f=0<=p?++m:--m)x.push(n.readUInt32());return x}).call(this)}},t}(),PN=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},FN=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Is(t,cs),t.prototype.tag="name",t.prototype.parse=function(n){var i,o,l,f,m,p,x,S,N,j,v;for(n.pos=this.offset,n.readShort(),i=n.readShort(),p=n.readShort(),o=[],f=0;0<=i?f<i:f>i;f=0<=i?++f:--f)o.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+p+n.readShort()});for(x={},f=N=0,j=o.length;N<j;f=++N)l=o[f],n.pos=l.offset,S=n.readString(l.length),m=new PN(S,l),x[v=l.nameID]==null&&(x[v]=[]),x[l.nameID].push(m);this.strings=x,this.copyright=x[0],this.fontFamily=x[1],this.fontSubfamily=x[2],this.uniqueSubfamily=x[3],this.fontName=x[4],this.version=x[5];try{this.postscriptName=x[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=x[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=x[7],this.manufacturer=x[8],this.designer=x[9],this.description=x[10],this.vendorUrl=x[11],this.designerUrl=x[12],this.license=x[13],this.licenseUrl=x[14],this.preferredFamily=x[15],this.preferredSubfamily=x[17],this.compatibleFull=x[18],this.sampleText=x[19]},t}(),BN=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Is(t,cs),t.prototype.tag="maxp",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},t}(),UN=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Is(t,cs),t.prototype.tag="hmtx",t.prototype.parse=function(n){var i,o,l,f,m,p,x;for(n.pos=this.offset,this.metrics=[],i=0,p=this.file.hhea.numberOfMetrics;0<=p?i<p:i>p;i=0<=p?++i:--i)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(l=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var S,N;for(N=[],i=S=0;0<=l?S<l:S>l;i=0<=l?++S:--S)N.push(n.readInt16());return N}(),this.widths=(function(){var S,N,j,v;for(v=[],S=0,N=(j=this.metrics).length;S<N;S++)f=j[S],v.push(f.advance);return v}).call(this),o=this.widths[this.widths.length-1],x=[],i=m=0;0<=l?m<l:m>l;i=0<=l?++m:--m)x.push(this.widths.push(o));return x},t.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},t}(),jy=[].slice,zN=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Is(t,cs),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(n){var i,o,l,f,m,p,x,S,N,j;return n in this.cache?this.cache[n]:(f=this.file.loca,i=this.file.contents,o=f.indexOf(n),(l=f.lengthOf(n))===0?this.cache[n]=null:(i.pos=this.offset+o,m=(p=new rl(i.read(l))).readShort(),S=p.readShort(),j=p.readShort(),x=p.readShort(),N=p.readShort(),this.cache[n]=m===-1?new VN(p,S,j,x,N):new HN(p,m,S,j,x,N),this.cache[n]))},t.prototype.encode=function(n,i,o){var l,f,m,p,x;for(m=[],f=[],p=0,x=i.length;p<x;p++)l=n[i[p]],f.push(m.length),l&&(m=m.concat(l.encode(o)));return f.push(m.length),{table:m,offsets:f}},t}(),HN=function(){function e(t,n,i,o,l,f){this.raw=t,this.numberOfContours=n,this.xMin=i,this.yMin=o,this.xMax=l,this.yMax=f,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),VN=function(){function e(t,n,i,o,l){var f,m;for(this.raw=t,this.xMin=n,this.yMin=i,this.xMax=o,this.yMax=l,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],f=this.raw;m=f.readShort(),this.glyphOffsets.push(f.pos),this.glyphIDs.push(f.readUInt16()),32&m;)f.pos+=1&m?4:2,128&m?f.pos+=8:64&m?f.pos+=4:8&m&&(f.pos+=2)}return e.prototype.encode=function(){var t,n,i;for(n=new rl(jy.call(this.raw.data)),t=0,i=this.glyphIDs.length;t<i;++t)n.pos=this.glyphOffsets[t];return n.data},e}(),qN=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Is(t,cs),t.prototype.tag="loca",t.prototype.parse=function(n){var i,o;return n.pos=this.offset,i=this.file.head.indexToLocFormat,this.offsets=i===0?(function(){var l,f;for(f=[],o=0,l=this.length;o<l;o+=2)f.push(2*n.readUInt16());return f}).call(this):(function(){var l,f;for(f=[],o=0,l=this.length;o<l;o+=4)f.push(n.readUInt32());return f}).call(this)},t.prototype.indexOf=function(n){return this.offsets[n]},t.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},t.prototype.encode=function(n,i){for(var o=new Uint32Array(this.offsets.length),l=0,f=0,m=0;m<o.length;++m)if(o[m]=l,f<i.length&&i[f]==m){++f,o[m]=l;var p=this.offsets[m],x=this.offsets[m+1]-p;x>0&&(l+=x)}for(var S=new Array(4*o.length),N=0;N<o.length;++N)S[4*N+3]=255&o[N],S[4*N+2]=(65280&o[N])>>8,S[4*N+1]=(16711680&o[N])>>16,S[4*N]=(4278190080&o[N])>>24;return S},t}(),GN=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,n,i,o,l;for(n in o=this.font.cmap.tables[0].codeMap,t={},l=this.subset)i=l[n],t[n]=o[i];return t},e.prototype.glyphsFor=function(t){var n,i,o,l,f,m,p;for(o={},f=0,m=t.length;f<m;f++)o[l=t[f]]=this.font.glyf.glyphFor(l);for(l in n=[],o)(i=o[l])!=null&&i.compound&&n.push.apply(n,i.glyphIDs);if(n.length>0)for(l in p=this.glyphsFor(n))i=p[l],o[l]=i;return o},e.prototype.encode=function(t,n){var i,o,l,f,m,p,x,S,N,j,v,O,E,P,C;for(o in i=Ty.encode(this.generateCmap(),"unicode"),f=this.glyphsFor(t),v={0:0},C=i.charMap)v[(p=C[o]).old]=p.new;for(O in j=i.maxGlyphID,f)O in v||(v[O]=j++);return S=function(_){var D,U;for(D in U={},_)U[_[D]]=D;return U}(v),N=Object.keys(S).sort(function(_,D){return _-D}),E=function(){var _,D,U;for(U=[],_=0,D=N.length;_<D;_++)m=N[_],U.push(S[m]);return U}(),l=this.font.glyf.encode(f,E,v),x=this.font.loca.encode(l.offsets,E),P={cmap:this.font.cmap.raw(),glyf:l.table,loca:x,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(P["OS/2"]=this.font.os2.raw()),this.font.directory.encode(P)},e}();Ht.API.PDFObject=function(){var e;function t(){}return e=function(n,i){return(Array(i+1).join("0")+n).slice(-i)},t.convert=function(n){var i,o,l,f;if(Array.isArray(n))return"["+function(){var m,p,x;for(x=[],m=0,p=n.length;m<p;m++)i=n[m],x.push(t.convert(i));return x}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(o in l=["<<"],n)f=n[o],l.push("/"+o+" "+t.convert(f));return l.push(">>"),l.join(`
`)}return""+n},t}();const WN=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:AN,AcroFormAppearance:jt,AcroFormButton:ai,AcroFormCheckBox:Zu,AcroFormChoiceField:Bl,AcroFormComboBox:zl,AcroFormEditBox:Yu,AcroFormListBox:Ul,AcroFormPasswordField:Qu,AcroFormPushButton:Xu,AcroFormRadioButton:Hl,AcroFormTextField:Ko,GState:hd,ShadingPattern:Po,TilingPattern:Il,default:Ht,jsPDF:Ht},Symbol.toStringTag,{value:"Module"}));var YN={exports:{}};const XN=Ev(WN);/*!
 * 
 *               jsPDF AutoTable plugin v3.8.4
 *
 *               Copyright (c) 2024 Simon Bengtsson, https://github.com/simonbengtsson/jsPDF-AutoTable
 *               Licensed under the MIT License.
 *               http://opensource.org/licenses/mit-license
 *
 */(function(e,t){(function(i,o){e.exports=o(function(){try{return XN}catch{}}())})(typeof globalThis<"u"?globalThis:typeof qs<"u"?qs:typeof window<"u"?window:typeof self<"u"?self:qs,function(n){return function(){var i={172:function(m,p){var x=this&&this.__extends||function(){var j=function(v,O){return j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,P){E.__proto__=P}||function(E,P){for(var C in P)Object.prototype.hasOwnProperty.call(P,C)&&(E[C]=P[C])},j(v,O)};return function(v,O){if(typeof O!="function"&&O!==null)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");j(v,O);function E(){this.constructor=v}v.prototype=O===null?Object.create(O):(E.prototype=O.prototype,new E)}}();Object.defineProperty(p,"__esModule",{value:!0}),p.CellHookData=p.HookData=void 0;var S=function(){function j(v,O,E){this.table=O,this.pageNumber=O.pageNumber,this.pageCount=this.pageNumber,this.settings=O.settings,this.cursor=E,this.doc=v.getDocument()}return j}();p.HookData=S;var N=function(j){x(v,j);function v(O,E,P,C,_,D){var U=j.call(this,O,E,D)||this;return U.cell=P,U.row=C,U.column=_,U.section=C.section,U}return v}(S);p.CellHookData=N},340:function(m,p,x){Object.defineProperty(p,"__esModule",{value:!0});var S=x(4),N=x(136),j=x(744),v=x(776),O=x(664),E=x(972);function P(C){C.API.autoTable=function(){for(var _=[],D=0;D<arguments.length;D++)_[D]=arguments[D];var U;_.length===1?U=_[0]:(console.error("Use of deprecated autoTable initiation"),U=_[2]||{},U.columns=_[0],U.body=_[1]);var Y=(0,v.parseInput)(this,U),ae=(0,E.createTable)(this,Y);return(0,O.drawTable)(this,ae),this},C.API.lastAutoTable=!1,C.API.previousAutoTable=!1,C.API.autoTable.previous=!1,C.API.autoTableText=function(_,D,U,Y){(0,N.default)(_,D,U,Y,this)},C.API.autoTableSetDefaults=function(_){return j.DocHandler.setDefaults(_,this),this},C.autoTableSetDefaults=function(_,D){j.DocHandler.setDefaults(_,D)},C.API.autoTableHtmlToJson=function(_,D){var U;if(D===void 0&&(D=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var Y=new j.DocHandler(this),ae=(0,S.parseHtml)(Y,_,window,D,!1),F=ae.head,L=ae.body,M=((U=F[0])===null||U===void 0?void 0:U.map(function(z){return z.content}))||[];return{columns:M,rows:L,data:L}},C.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var _=this.lastAutoTable;return _&&_.finalY?_.finalY:0},C.API.autoTableAddPageContent=function(_){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),C.API.autoTable.globalDefaults||(C.API.autoTable.globalDefaults={}),C.API.autoTable.globalDefaults.addPageContent=_,this},C.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}p.default=P},136:function(m,p){Object.defineProperty(p,"__esModule",{value:!0});function x(S,N,j,v,O){v=v||{};var E=1.15,P=O.internal.scaleFactor,C=O.internal.getFontSize()/P,_=O.getLineHeightFactor?O.getLineHeightFactor():E,D=C*_,U=/\r\n|\r|\n/g,Y="",ae=1;if((v.valign==="middle"||v.valign==="bottom"||v.halign==="center"||v.halign==="right")&&(Y=typeof S=="string"?S.split(U):S,ae=Y.length||1),j+=C*(2-E),v.valign==="middle"?j-=ae/2*D:v.valign==="bottom"&&(j-=ae*D),v.halign==="center"||v.halign==="right"){var F=C;if(v.halign==="center"&&(F*=.5),Y&&ae>=1){for(var L=0;L<Y.length;L++)O.text(Y[L],N-O.getStringUnitWidth(Y[L])*F,j),j+=D;return O}N-=O.getStringUnitWidth(S)*F}return v.halign==="justify"?O.text(S,N,j,{maxWidth:v.maxWidth||100,align:"justify"}):O.text(S,N,j),O}p.default=x},420:function(m,p){Object.defineProperty(p,"__esModule",{value:!0}),p.getPageAvailableWidth=p.parseSpacing=p.getFillStyle=p.addTableBorder=p.getStringWidth=void 0;function x(O,E,P){P.applyStyles(E,!0);var C=Array.isArray(O)?O:[O],_=C.map(function(D){return P.getTextWidth(D)}).reduce(function(D,U){return Math.max(D,U)},0);return _}p.getStringWidth=x;function S(O,E,P,C){var _=E.settings.tableLineWidth,D=E.settings.tableLineColor;O.applyStyles({lineWidth:_,lineColor:D});var U=N(_,!1);U&&O.rect(P.x,P.y,E.getWidth(O.pageSize().width),C.y-P.y,U)}p.addTableBorder=S;function N(O,E){var P=O>0,C=E||E===0;return P&&C?"DF":P?"S":C?"F":null}p.getFillStyle=N;function j(O,E){var P,C,_,D;if(O=O||E,Array.isArray(O)){if(O.length>=4)return{top:O[0],right:O[1],bottom:O[2],left:O[3]};if(O.length===3)return{top:O[0],right:O[1],bottom:O[2],left:O[1]};if(O.length===2)return{top:O[0],right:O[1],bottom:O[0],left:O[1]};O.length===1?O=O[0]:O=E}return typeof O=="object"?(typeof O.vertical=="number"&&(O.top=O.vertical,O.bottom=O.vertical),typeof O.horizontal=="number"&&(O.right=O.horizontal,O.left=O.horizontal),{left:(P=O.left)!==null&&P!==void 0?P:E,top:(C=O.top)!==null&&C!==void 0?C:E,right:(_=O.right)!==null&&_!==void 0?_:E,bottom:(D=O.bottom)!==null&&D!==void 0?D:E}):(typeof O!="number"&&(O=E),{top:O,right:O,bottom:O,left:O})}p.parseSpacing=j;function v(O,E){var P=j(E.settings.margin,0);return O.pageSize().width-(P.left+P.right)}p.getPageAvailableWidth=v},796:function(m,p){var x=this&&this.__extends||function(){var v=function(O,E){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,C){P.__proto__=C}||function(P,C){for(var _ in C)Object.prototype.hasOwnProperty.call(C,_)&&(P[_]=C[_])},v(O,E)};return function(O,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");v(O,E);function P(){this.constructor=O}O.prototype=E===null?Object.create(E):(P.prototype=E.prototype,new P)}}();Object.defineProperty(p,"__esModule",{value:!0}),p.getTheme=p.defaultStyles=p.HtmlRowInput=void 0;var S=function(v){x(O,v);function O(E){var P=v.call(this)||this;return P._element=E,P}return O}(Array);p.HtmlRowInput=S;function N(v){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/v,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}p.defaultStyles=N;function j(v){var O={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return O[v]}p.getTheme=j},903:function(m,p,x){Object.defineProperty(p,"__esModule",{value:!0}),p.parseCss=void 0;var S=x(420);function N(P,C,_,D,U){var Y={},ae=1.3333333333333333,F=v(C,function(W){return U.getComputedStyle(W).backgroundColor});F!=null&&(Y.fillColor=F);var L=v(C,function(W){return U.getComputedStyle(W).color});L!=null&&(Y.textColor=L);var M=E(D,_);M&&(Y.cellPadding=M);var z="borderTopColor",k=ae*_,R=D.borderTopWidth;if(D.borderBottomWidth===R&&D.borderRightWidth===R&&D.borderLeftWidth===R){var re=(parseFloat(R)||0)/k;re&&(Y.lineWidth=re)}else Y.lineWidth={top:(parseFloat(D.borderTopWidth)||0)/k,right:(parseFloat(D.borderRightWidth)||0)/k,bottom:(parseFloat(D.borderBottomWidth)||0)/k,left:(parseFloat(D.borderLeftWidth)||0)/k},Y.lineWidth.top||(Y.lineWidth.right?z="borderRightColor":Y.lineWidth.bottom?z="borderBottomColor":Y.lineWidth.left&&(z="borderLeftColor"));var ee=v(C,function(W){return U.getComputedStyle(W)[z]});ee!=null&&(Y.lineColor=ee);var ne=["left","right","center","justify"];ne.indexOf(D.textAlign)!==-1&&(Y.halign=D.textAlign),ne=["middle","bottom","top"],ne.indexOf(D.verticalAlign)!==-1&&(Y.valign=D.verticalAlign);var K=parseInt(D.fontSize||"");isNaN(K)||(Y.fontSize=K/ae);var G=j(D);G&&(Y.fontStyle=G);var te=(D.fontFamily||"").toLowerCase();return P.indexOf(te)!==-1&&(Y.font=te),Y}p.parseCss=N;function j(P){var C="";return(P.fontWeight==="bold"||P.fontWeight==="bolder"||parseInt(P.fontWeight)>=700)&&(C="bold"),(P.fontStyle==="italic"||P.fontStyle==="oblique")&&(C+="italic"),C}function v(P,C){var _=O(P,C);if(!_)return null;var D=_.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!D||!Array.isArray(D))return null;var U=[parseInt(D[1]),parseInt(D[2]),parseInt(D[3])],Y=parseInt(D[4]);return Y===0||isNaN(U[0])||isNaN(U[1])||isNaN(U[2])?null:U}function O(P,C){var _=C(P);return _==="rgba(0, 0, 0, 0)"||_==="transparent"||_==="initial"||_==="inherit"?P.parentElement==null?null:O(P.parentElement,C):_}function E(P,C){var _=[P.paddingTop,P.paddingRight,P.paddingBottom,P.paddingLeft],D=96/(72/C),U=(parseInt(P.lineHeight)-parseInt(P.fontSize))/C/2,Y=_.map(function(F){return parseInt(F||"0")/D}),ae=(0,S.parseSpacing)(Y,0);return U>ae.top&&(ae.top=U),U>ae.bottom&&(ae.bottom=U),ae}},744:function(m,p){Object.defineProperty(p,"__esModule",{value:!0}),p.DocHandler=void 0;var x={},S=function(){function N(j){this.jsPDFDocument=j,this.userStyles={textColor:j.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:j.internal.getFontSize(),fontStyle:j.internal.getFont().fontStyle,font:j.internal.getFont().fontName,lineWidth:j.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:j.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return N.setDefaults=function(j,v){v===void 0&&(v=null),v?v.__autoTableDocumentDefaults=j:x=j},N.unifyColor=function(j){return Array.isArray(j)?j:typeof j=="number"?[j,j,j]:typeof j=="string"?[j]:null},N.prototype.applyStyles=function(j,v){var O,E,P;v===void 0&&(v=!1),j.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(j.fontStyle);var C=this.jsPDFDocument.internal.getFont(),_=C.fontStyle,D=C.fontName;if(j.font&&(D=j.font),j.fontStyle){_=j.fontStyle;var U=this.getFontList()[D];U&&U.indexOf(_)===-1&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(U[0]),_=U[0])}if(this.jsPDFDocument.setFont(D,_),j.fontSize&&this.jsPDFDocument.setFontSize(j.fontSize),!v){var Y=N.unifyColor(j.fillColor);Y&&(O=this.jsPDFDocument).setFillColor.apply(O,Y),Y=N.unifyColor(j.textColor),Y&&(E=this.jsPDFDocument).setTextColor.apply(E,Y),Y=N.unifyColor(j.lineColor),Y&&(P=this.jsPDFDocument).setDrawColor.apply(P,Y),typeof j.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(j.lineWidth)}},N.prototype.splitTextToSize=function(j,v,O){return this.jsPDFDocument.splitTextToSize(j,v,O)},N.prototype.rect=function(j,v,O,E,P){return this.jsPDFDocument.rect(j,v,O,E,P)},N.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},N.prototype.getTextWidth=function(j){return this.jsPDFDocument.getTextWidth(j)},N.prototype.getDocument=function(){return this.jsPDFDocument},N.prototype.setPage=function(j){this.jsPDFDocument.setPage(j)},N.prototype.addPage=function(){return this.jsPDFDocument.addPage()},N.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},N.prototype.getGlobalOptions=function(){return x||{}},N.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},N.prototype.pageSize=function(){var j=this.jsPDFDocument.internal.pageSize;return j.width==null&&(j={width:j.getWidth(),height:j.getHeight()}),j},N.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},N.prototype.getLineHeightFactor=function(){var j=this.jsPDFDocument;return j.getLineHeightFactor?j.getLineHeightFactor():1.15},N.prototype.getLineHeight=function(j){return j/this.scaleFactor()*this.getLineHeightFactor()},N.prototype.pageNumber=function(){var j=this.jsPDFDocument.internal.getCurrentPageInfo();return j?j.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},N}();p.DocHandler=S},4:function(m,p,x){Object.defineProperty(p,"__esModule",{value:!0}),p.parseHtml=void 0;var S=x(903),N=x(796);function j(E,P,C,_,D){var U,Y;_===void 0&&(_=!1),D===void 0&&(D=!1);var ae;typeof P=="string"?ae=C.document.querySelector(P):ae=P;var F=Object.keys(E.getFontList()),L=E.scaleFactor(),M=[],z=[],k=[];if(!ae)return console.error("Html table could not be found with input: ",P),{head:M,body:z,foot:k};for(var R=0;R<ae.rows.length;R++){var re=ae.rows[R],ee=(Y=(U=re==null?void 0:re.parentElement)===null||U===void 0?void 0:U.tagName)===null||Y===void 0?void 0:Y.toLowerCase(),ne=v(F,L,C,re,_,D);ne&&(ee==="thead"?M.push(ne):ee==="tfoot"?k.push(ne):z.push(ne))}return{head:M,body:z,foot:k}}p.parseHtml=j;function v(E,P,C,_,D,U){for(var Y=new N.HtmlRowInput(_),ae=0;ae<_.cells.length;ae++){var F=_.cells[ae],L=C.getComputedStyle(F);if(D||L.display!=="none"){var M=void 0;U&&(M=(0,S.parseCss)(E,F,P,L,C)),Y.push({rowSpan:F.rowSpan,colSpan:F.colSpan,styles:M,_element:F,content:O(F)})}}var z=C.getComputedStyle(_);if(Y.length>0&&(D||z.display!=="none"))return Y}function O(E){var P=E.cloneNode(!0);return P.innerHTML=P.innerHTML.replace(/\n/g,"").replace(/ +/g," "),P.innerHTML=P.innerHTML.split(/<br.*?>/).map(function(C){return C.trim()}).join(`
`),P.innerText||P.textContent||""}},776:function(m,p,x){Object.defineProperty(p,"__esModule",{value:!0}),p.parseInput=void 0;var S=x(4),N=x(356),j=x(420),v=x(744),O=x(792);function E(ae,F){var L=new v.DocHandler(ae),M=L.getDocumentOptions(),z=L.getGlobalOptions();(0,O.default)(L,z,M,F);var k=(0,N.assign)({},z,M,F),R;typeof window<"u"&&(R=window);var re=P(z,M,F),ee=C(z,M,F),ne=_(L,k),K=U(L,k,R);return{id:F.tableId,content:K,hooks:ee,styles:re,settings:ne}}p.parseInput=E;function P(ae,F,L){for(var M={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},z=function(ee){if(ee==="columnStyles"){var ne=ae[ee],K=F[ee],G=L[ee];M.columnStyles=(0,N.assign)({},ne,K,G)}else{var te=[ae,F,L],W=te.map(function(fe){return fe[ee]||{}});M[ee]=(0,N.assign)({},W[0],W[1],W[2])}},k=0,R=Object.keys(M);k<R.length;k++){var re=R[k];z(re)}return M}function C(ae,F,L){for(var M=[ae,F,L],z={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},k=0,R=M;k<R.length;k++){var re=R[k];re.didParseCell&&z.didParseCell.push(re.didParseCell),re.willDrawCell&&z.willDrawCell.push(re.willDrawCell),re.didDrawCell&&z.didDrawCell.push(re.didDrawCell),re.willDrawPage&&z.willDrawPage.push(re.willDrawPage),re.didDrawPage&&z.didDrawPage.push(re.didDrawPage)}return z}function _(ae,F){var L,M,z,k,R,re,ee,ne,K,G,te,W,fe=(0,j.parseSpacing)(F.margin,40/ae.scaleFactor()),le=(L=D(ae,F.startY))!==null&&L!==void 0?L:fe.top,B;F.showFoot===!0?B="everyPage":F.showFoot===!1?B="never":B=(M=F.showFoot)!==null&&M!==void 0?M:"everyPage";var q;F.showHead===!0?q="everyPage":F.showHead===!1?q="never":q=(z=F.showHead)!==null&&z!==void 0?z:"everyPage";var Q=(k=F.useCss)!==null&&k!==void 0?k:!1,he=F.theme||(Q?"plain":"striped"),ue=!!F.horizontalPageBreak,je=(R=F.horizontalPageBreakRepeat)!==null&&R!==void 0?R:null;return{includeHiddenHtml:(re=F.includeHiddenHtml)!==null&&re!==void 0?re:!1,useCss:Q,theme:he,startY:le,margin:fe,pageBreak:(ee=F.pageBreak)!==null&&ee!==void 0?ee:"auto",rowPageBreak:(ne=F.rowPageBreak)!==null&&ne!==void 0?ne:"auto",tableWidth:(K=F.tableWidth)!==null&&K!==void 0?K:"auto",showHead:q,showFoot:B,tableLineWidth:(G=F.tableLineWidth)!==null&&G!==void 0?G:0,tableLineColor:(te=F.tableLineColor)!==null&&te!==void 0?te:200,horizontalPageBreak:ue,horizontalPageBreakRepeat:je,horizontalPageBreakBehaviour:(W=F.horizontalPageBreakBehaviour)!==null&&W!==void 0?W:"afterAllRows"}}function D(ae,F){var L=ae.getLastAutoTable(),M=ae.scaleFactor(),z=ae.pageNumber(),k=!1;if(L&&L.startPageNumber){var R=L.startPageNumber+L.pageNumber-1;k=R===z}return typeof F=="number"?F:(F==null||F===!1)&&k&&(L==null?void 0:L.finalY)!=null?L.finalY+20/M:null}function U(ae,F,L){var M=F.head||[],z=F.body||[],k=F.foot||[];if(F.html){var R=F.includeHiddenHtml;if(L){var re=(0,S.parseHtml)(ae,F.html,L,R,F.useCss)||{};M=re.head||M,z=re.body||M,k=re.foot||M}else console.error("Cannot parse html in non browser environment")}var ee=F.columns||Y(M,z,k);return{columns:ee,head:M,body:z,foot:k}}function Y(ae,F,L){var M=ae[0]||F[0]||L[0]||[],z=[];return Object.keys(M).filter(function(k){return k!=="_element"}).forEach(function(k){var R=1,re;Array.isArray(M)?re=M[parseInt(k)]:re=M[k],typeof re=="object"&&!Array.isArray(re)&&(R=(re==null?void 0:re.colSpan)||1);for(var ee=0;ee<R;ee++){var ne=void 0;Array.isArray(M)?ne=z.length:ne=k+(ee>0?"_".concat(ee):"");var K={dataKey:ne};z.push(K)}}),z}},792:function(m,p){Object.defineProperty(p,"__esModule",{value:!0});function x(N,j,v,O){for(var E=function(D){D&&typeof D!="object"&&console.error("The options parameter should be of type object, is: "+typeof D),typeof D.extendWidth<"u"&&(D.tableWidth=D.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),typeof D.margins<"u"&&(typeof D.margin>"u"&&(D.margin=D.margins),console.error("Use of deprecated option: margins, use margin instead.")),D.startY&&typeof D.startY!="number"&&(console.error("Invalid value for startY option",D.startY),delete D.startY),!D.didDrawPage&&(D.afterPageContent||D.beforePageContent||D.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),D.didDrawPage=function(k){N.applyStyles(N.userStyles),D.beforePageContent&&D.beforePageContent(k),N.applyStyles(N.userStyles),D.afterPageContent&&D.afterPageContent(k),N.applyStyles(N.userStyles),D.afterPageAdd&&k.pageNumber>1&&k.afterPageAdd(k),N.applyStyles(N.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(k){D[k]&&console.error('The "'.concat(k,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(k){var R=k[0],re=k[1];D[re]&&(console.error("Use of deprecated option ".concat(re,". Use ").concat(R," instead")),D[R]=D[re])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(k){var R=typeof k=="string"?k:k[0],re=typeof k=="string"?k:k[1];typeof D[R]<"u"&&(typeof D.styles[re]>"u"&&(D.styles[re]=D[R]),console.error("Use of deprecated option: "+R+", use the style "+re+" instead."))});for(var U=0,Y=["styles","bodyStyles","headStyles","footStyles"];U<Y.length;U++){var ae=Y[U];S(D[ae]||{})}for(var F=D.columnStyles||{},L=0,M=Object.keys(F);L<M.length;L++){var z=M[L];S(F[z]||{})}},P=0,C=[j,v,O];P<C.length;P++){var _=C[P];E(_)}}p.default=x;function S(N){N.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),N.minCellHeight||(N.minCellHeight=N.rowHeight)):N.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),N.cellWidth||(N.cellWidth=N.columnWidth))}},260:function(m,p,x){Object.defineProperty(p,"__esModule",{value:!0}),p.Column=p.Cell=p.Row=p.Table=void 0;var S=x(796),N=x(172),j=x(420),v=function(){function C(_,D){this.pageNumber=1,this.pageCount=1,this.id=_.id,this.settings=_.settings,this.styles=_.styles,this.hooks=_.hooks,this.columns=D.columns,this.head=D.head,this.body=D.body,this.foot=D.foot}return C.prototype.getHeadHeight=function(_){return this.head.reduce(function(D,U){return D+U.getMaxCellHeight(_)},0)},C.prototype.getFootHeight=function(_){return this.foot.reduce(function(D,U){return D+U.getMaxCellHeight(_)},0)},C.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},C.prototype.callCellHooks=function(_,D,U,Y,ae,F){for(var L=0,M=D;L<M.length;L++){var z=M[L],k=new N.CellHookData(_,this,U,Y,ae,F),R=z(k)===!1;if(U.text=Array.isArray(U.text)?U.text:[U.text],R)return!1}return!0},C.prototype.callEndPageHooks=function(_,D){_.applyStyles(_.userStyles);for(var U=0,Y=this.hooks.didDrawPage;U<Y.length;U++){var ae=Y[U];ae(new N.HookData(_,this,D))}},C.prototype.callWillDrawPageHooks=function(_,D){for(var U=0,Y=this.hooks.willDrawPage;U<Y.length;U++){var ae=Y[U];ae(new N.HookData(_,this,D))}},C.prototype.getWidth=function(_){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var D=this.columns.reduce(function(Y,ae){return Y+ae.wrappedWidth},0);return D}else{var U=this.settings.margin;return _-U.left-U.right}},C}();p.Table=v;var O=function(){function C(_,D,U,Y,ae){ae===void 0&&(ae=!1),this.height=0,this.raw=_,_ instanceof S.HtmlRowInput&&(this.raw=_._element,this.element=_._element),this.index=D,this.section=U,this.cells=Y,this.spansMultiplePages=ae}return C.prototype.getMaxCellHeight=function(_){var D=this;return _.reduce(function(U,Y){var ae;return Math.max(U,((ae=D.cells[Y.index])===null||ae===void 0?void 0:ae.height)||0)},0)},C.prototype.hasRowSpan=function(_){var D=this;return _.filter(function(U){var Y=D.cells[U.index];return Y?Y.rowSpan>1:!1}).length>0},C.prototype.canEntireRowFit=function(_,D){return this.getMaxCellHeight(D)<=_},C.prototype.getMinimumRowHeight=function(_,D){var U=this;return _.reduce(function(Y,ae){var F=U.cells[ae.index];if(!F)return 0;var L=D.getLineHeight(F.styles.fontSize),M=F.padding("vertical"),z=M+L;return z>Y?z:Y},0)},C}();p.Row=O;var E=function(){function C(_,D,U){var Y,ae;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=D,this.section=U,this.raw=_;var F=_;_!=null&&typeof _=="object"&&!Array.isArray(_)?(this.rowSpan=_.rowSpan||1,this.colSpan=_.colSpan||1,F=(ae=(Y=_.content)!==null&&Y!==void 0?Y:_.title)!==null&&ae!==void 0?ae:_,_._element&&(this.raw=_._element)):(this.rowSpan=1,this.colSpan=1);var L=F!=null?""+F:"",M=/\r\n|\r|\n/g;this.text=L.split(M)}return C.prototype.getTextPos=function(){var _;if(this.styles.valign==="top")_=this.y+this.padding("top");else if(this.styles.valign==="bottom")_=this.y+this.height-this.padding("bottom");else{var D=this.height-this.padding("vertical");_=this.y+D/2+this.padding("top")}var U;if(this.styles.halign==="right")U=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var Y=this.width-this.padding("horizontal");U=this.x+Y/2+this.padding("left")}else U=this.x+this.padding("left");return{x:U,y:_}},C.prototype.getContentHeight=function(_,D){D===void 0&&(D=1.15);var U=Array.isArray(this.text)?this.text.length:1,Y=this.styles.fontSize/_*D,ae=U*Y+this.padding("vertical");return Math.max(ae,this.styles.minCellHeight)},C.prototype.padding=function(_){var D=(0,j.parseSpacing)(this.styles.cellPadding,0);return _==="vertical"?D.top+D.bottom:_==="horizontal"?D.left+D.right:D[_]},C}();p.Cell=E;var P=function(){function C(_,D,U){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=_,this.raw=D,this.index=U}return C.prototype.getMaxCustomCellWidth=function(_){for(var D=0,U=0,Y=_.allRows();U<Y.length;U++){var ae=Y[U],F=ae.cells[this.index];F&&typeof F.styles.cellWidth=="number"&&(D=Math.max(D,F.styles.cellWidth))}return D},C}();p.Column=P},356:function(m,p){Object.defineProperty(p,"__esModule",{value:!0}),p.assign=void 0;function x(S,N,j,v,O){if(S==null)throw new TypeError("Cannot convert undefined or null to object");for(var E=Object(S),P=1;P<arguments.length;P++){var C=arguments[P];if(C!=null)for(var _ in C)Object.prototype.hasOwnProperty.call(C,_)&&(E[_]=C[_])}return E}p.assign=x},972:function(m,p,x){Object.defineProperty(p,"__esModule",{value:!0}),p.createTable=void 0;var S=x(744),N=x(260),j=x(324),v=x(796),O=x(356);function E(ae,F){var L=new S.DocHandler(ae),M=P(F,L.scaleFactor()),z=new N.Table(F,M);return(0,j.calculateWidths)(L,z),L.applyStyles(L.userStyles),z}p.createTable=E;function P(ae,F){var L=ae.content,M=U(L.columns);if(L.head.length===0){var z=_(M,"head");z&&L.head.push(z)}if(L.foot.length===0){var z=_(M,"foot");z&&L.foot.push(z)}var k=ae.settings.theme,R=ae.styles;return{columns:M,head:C("head",L.head,M,R,k,F),body:C("body",L.body,M,R,k,F),foot:C("foot",L.foot,M,R,k,F)}}function C(ae,F,L,M,z,k){var R={},re=F.map(function(ee,ne){for(var K=0,G={},te=0,W=0,fe=0,le=L;fe<le.length;fe++){var B=le[fe];if(R[B.index]==null||R[B.index].left===0)if(W===0){var q=void 0;Array.isArray(ee)?q=ee[B.index-te-K]:q=ee[B.dataKey];var Q={};typeof q=="object"&&!Array.isArray(q)&&(Q=(q==null?void 0:q.styles)||{});var he=Y(ae,B,ne,z,M,k,Q),ue=new N.Cell(q,he,ae);G[B.dataKey]=ue,G[B.index]=ue,W=ue.colSpan-1,R[B.index]={left:ue.rowSpan-1,times:W}}else W--,te++;else R[B.index].left--,W=R[B.index].times,K++}return new N.Row(ee,ne,ae,G)});return re}function _(ae,F){var L={};return ae.forEach(function(M){if(M.raw!=null){var z=D(F,M.raw);z!=null&&(L[M.dataKey]=z)}}),Object.keys(L).length>0?L:null}function D(ae,F){if(ae==="head"){if(typeof F=="object")return F.header||F.title||null;if(typeof F=="string"||typeof F=="number")return F}else if(ae==="foot"&&typeof F=="object")return F.footer;return null}function U(ae){return ae.map(function(F,L){var M,z,k;return typeof F=="object"?k=(z=(M=F.dataKey)!==null&&M!==void 0?M:F.key)!==null&&z!==void 0?z:L:k=L,new N.Column(k,F,L)})}function Y(ae,F,L,M,z,k,R){var re=(0,v.getTheme)(M),ee;ae==="head"?ee=z.headStyles:ae==="body"?ee=z.bodyStyles:ae==="foot"&&(ee=z.footStyles);var ne=(0,O.assign)({},re.table,re[ae],z.styles,ee),K=z.columnStyles[F.dataKey]||z.columnStyles[F.index]||{},G=ae==="body"?K:{},te=ae==="body"&&L%2===0?(0,O.assign)({},re.alternateRow,z.alternateRowStyles):{},W=(0,v.defaultStyles)(k),fe=(0,O.assign)({},W,ne,te,G);return(0,O.assign)(fe,R)}},664:function(m,p,x){Object.defineProperty(p,"__esModule",{value:!0}),p.addPage=p.drawTable=void 0;var S=x(420),N=x(260),j=x(744),v=x(356),O=x(136),E=x(224);function P(K,G){var te=G.settings,W=te.startY,fe=te.margin,le={x:fe.left,y:W},B=G.getHeadHeight(G.columns)+G.getFootHeight(G.columns),q=W+fe.bottom+B;if(te.pageBreak==="avoid"){var Q=G.body,he=Q.reduce(function(Ae,ve){return Ae+ve.height},0);q+=he}var ue=new j.DocHandler(K);(te.pageBreak==="always"||te.startY!=null&&q>ue.pageSize().height)&&(ne(ue),le.y=fe.top),G.callWillDrawPageHooks(ue,le);var je=(0,v.assign)({},le);G.startPageNumber=ue.pageNumber(),te.horizontalPageBreak?C(ue,G,je,le):(ue.applyStyles(ue.userStyles),(te.showHead==="firstPage"||te.showHead==="everyPage")&&G.head.forEach(function(Ae){return z(ue,G,Ae,le,G.columns)}),ue.applyStyles(ue.userStyles),G.body.forEach(function(Ae,ve){var Pe=ve===G.body.length-1;M(ue,G,Ae,Pe,je,le,G.columns)}),ue.applyStyles(ue.userStyles),(te.showFoot==="lastPage"||te.showFoot==="everyPage")&&G.foot.forEach(function(Ae){return z(ue,G,Ae,le,G.columns)})),(0,S.addTableBorder)(ue,G,je,le),G.callEndPageHooks(ue,le),G.finalY=le.y,K.lastAutoTable=G,K.previousAutoTable=G,K.autoTable&&(K.autoTable.previous=G),ue.applyStyles(ue.userStyles)}p.drawTable=P;function C(K,G,te,W){var fe=(0,E.calculateAllColumnsCanFitInPage)(K,G),le=G.settings;if(le.horizontalPageBreakBehaviour==="afterAllRows")fe.forEach(function(he,ue){K.applyStyles(K.userStyles),ue>0?ee(K,G,te,W,he.columns,!0):_(K,G,W,he.columns),D(K,G,te,W,he.columns),Y(K,G,W,he.columns)});else for(var B=-1,q=fe[0],Q=function(){var he=B;if(q){K.applyStyles(K.userStyles);var ue=q.columns;B>=0?ee(K,G,te,W,ue,!0):_(K,G,W,ue),he=U(K,G,B+1,W,ue),Y(K,G,W,ue)}var je=he-B;fe.slice(1).forEach(function(Ae){K.applyStyles(K.userStyles),ee(K,G,te,W,Ae.columns,!0),U(K,G,B+1,W,Ae.columns,je),Y(K,G,W,Ae.columns)}),B=he};B<G.body.length-1;)Q()}function _(K,G,te,W){var fe=G.settings;K.applyStyles(K.userStyles),(fe.showHead==="firstPage"||fe.showHead==="everyPage")&&G.head.forEach(function(le){return z(K,G,le,te,W)})}function D(K,G,te,W,fe){K.applyStyles(K.userStyles),G.body.forEach(function(le,B){var q=B===G.body.length-1;M(K,G,le,q,te,W,fe)})}function U(K,G,te,W,fe,le){K.applyStyles(K.userStyles),le=le??G.body.length;var B=Math.min(te+le,G.body.length),q=-1;return G.body.slice(te,B).forEach(function(Q,he){var ue=te+he===G.body.length-1,je=re(K,G,ue,W);Q.canEntireRowFit(je,fe)&&(z(K,G,Q,W,fe),q=te+he)}),q}function Y(K,G,te,W){var fe=G.settings;K.applyStyles(K.userStyles),(fe.showFoot==="lastPage"||fe.showFoot==="everyPage")&&G.foot.forEach(function(le){return z(K,G,le,te,W)})}function ae(K,G,te){var W=te.getLineHeight(K.styles.fontSize),fe=K.padding("vertical"),le=Math.floor((G-fe)/W);return Math.max(0,le)}function F(K,G,te,W){var fe={};K.spansMultiplePages=!0,K.height=0;for(var le=0,B=0,q=te.columns;B<q.length;B++){var Q=q[B],he=K.cells[Q.index];if(he){Array.isArray(he.text)||(he.text=[he.text]);var ue=new N.Cell(he.raw,he.styles,he.section);ue=(0,v.assign)(ue,he),ue.text=[];var je=ae(he,G,W);he.text.length>je&&(ue.text=he.text.splice(je,he.text.length));var Ae=W.scaleFactor(),ve=W.getLineHeightFactor();he.contentHeight=he.getContentHeight(Ae,ve),he.contentHeight>=G&&(he.contentHeight=G,ue.styles.minCellHeight-=G),he.contentHeight>K.height&&(K.height=he.contentHeight),ue.contentHeight=ue.getContentHeight(Ae,ve),ue.contentHeight>le&&(le=ue.contentHeight),fe[Q.index]=ue}}var Pe=new N.Row(K.raw,-1,K.section,fe,!0);Pe.height=le;for(var Te=0,Ye=te.columns;Te<Ye.length;Te++){var Q=Ye[Te],ue=Pe.cells[Q.index];ue&&(ue.height=Pe.height);var he=K.cells[Q.index];he&&(he.height=K.height)}return Pe}function L(K,G,te,W){var fe=K.pageSize().height,le=W.settings.margin,B=le.top+le.bottom,q=fe-B;G.section==="body"&&(q-=W.getHeadHeight(W.columns)+W.getFootHeight(W.columns));var Q=G.getMinimumRowHeight(W.columns,K),he=Q<te;if(Q>q)return console.error("Will not be able to print row ".concat(G.index," correctly since it's minimum height is larger than page height")),!0;if(!he)return!1;var ue=G.hasRowSpan(W.columns),je=G.getMaxCellHeight(W.columns)>q;return je?(ue&&console.error("The content of row ".concat(G.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(ue||W.settings.rowPageBreak==="avoid")}function M(K,G,te,W,fe,le,B){var q=re(K,G,W,le);if(te.canEntireRowFit(q,B))z(K,G,te,le,B);else if(L(K,te,q,G)){var Q=F(te,q,G,K);z(K,G,te,le,B),ee(K,G,fe,le,B),M(K,G,Q,W,fe,le,B)}else ee(K,G,fe,le,B),M(K,G,te,W,fe,le,B)}function z(K,G,te,W,fe){W.x=G.settings.margin.left;for(var le=0,B=fe;le<B.length;le++){var q=B[le],Q=te.cells[q.index];if(!Q){W.x+=q.width;continue}K.applyStyles(Q.styles),Q.x=W.x,Q.y=W.y;var he=G.callCellHooks(K,G.hooks.willDrawCell,Q,te,q,W);if(he===!1){W.x+=q.width;continue}k(K,Q,W);var ue=Q.getTextPos();(0,O.default)(Q.text,ue.x,ue.y,{halign:Q.styles.halign,valign:Q.styles.valign,maxWidth:Math.ceil(Q.width-Q.padding("left")-Q.padding("right"))},K.getDocument()),G.callCellHooks(K,G.hooks.didDrawCell,Q,te,q,W),W.x+=q.width}W.y+=te.height}function k(K,G,te){var W=G.styles;if(K.getDocument().setFillColor(K.getDocument().getFillColor()),typeof W.lineWidth=="number"){var fe=(0,S.getFillStyle)(W.lineWidth,W.fillColor);fe&&K.rect(G.x,te.y,G.width,G.height,fe)}else typeof W.lineWidth=="object"&&(W.fillColor&&K.rect(G.x,te.y,G.width,G.height,"F"),R(K,G,te,W.lineWidth))}function R(K,G,te,W){var fe,le,B,q;W.top&&(fe=te.x,le=te.y,B=te.x+G.width,q=te.y,W.right&&(B+=.5*W.right),W.left&&(fe-=.5*W.left),Q(W.top,fe,le,B,q)),W.bottom&&(fe=te.x,le=te.y+G.height,B=te.x+G.width,q=te.y+G.height,W.right&&(B+=.5*W.right),W.left&&(fe-=.5*W.left),Q(W.bottom,fe,le,B,q)),W.left&&(fe=te.x,le=te.y,B=te.x,q=te.y+G.height,W.top&&(le-=.5*W.top),W.bottom&&(q+=.5*W.bottom),Q(W.left,fe,le,B,q)),W.right&&(fe=te.x+G.width,le=te.y,B=te.x+G.width,q=te.y+G.height,W.top&&(le-=.5*W.top),W.bottom&&(q+=.5*W.bottom),Q(W.right,fe,le,B,q));function Q(he,ue,je,Ae,ve){K.getDocument().setLineWidth(he),K.getDocument().line(ue,je,Ae,ve,"S")}}function re(K,G,te,W){var fe=G.settings.margin.bottom,le=G.settings.showFoot;return(le==="everyPage"||le==="lastPage"&&te)&&(fe+=G.getFootHeight(G.columns)),K.pageSize().height-W.y-fe}function ee(K,G,te,W,fe,le){fe===void 0&&(fe=[]),le===void 0&&(le=!1),K.applyStyles(K.userStyles),G.settings.showFoot==="everyPage"&&!le&&G.foot.forEach(function(q){return z(K,G,q,W,fe)}),G.callEndPageHooks(K,W);var B=G.settings.margin;(0,S.addTableBorder)(K,G,te,W),ne(K),G.pageNumber++,G.pageCount++,W.x=B.left,W.y=B.top,te.y=B.top,G.callWillDrawPageHooks(K,W),G.settings.showHead==="everyPage"&&(G.head.forEach(function(q){return z(K,G,q,W,fe)}),K.applyStyles(K.userStyles))}p.addPage=ee;function ne(K){var G=K.pageNumber();K.setPage(G+1);var te=K.pageNumber();return te===G?(K.addPage(),!0):!1}},224:function(m,p,x){Object.defineProperty(p,"__esModule",{value:!0}),p.calculateAllColumnsCanFitInPage=void 0;var S=x(420);function N(v,O,E){var P;E===void 0&&(E={});var C=(0,S.getPageAvailableWidth)(v,O),_=new Map,D=[],U=[],Y=[];O.settings.horizontalPageBreakRepeat,Array.isArray(O.settings.horizontalPageBreakRepeat)?Y=O.settings.horizontalPageBreakRepeat:(typeof O.settings.horizontalPageBreakRepeat=="string"||typeof O.settings.horizontalPageBreakRepeat=="number")&&(Y=[O.settings.horizontalPageBreakRepeat]),Y.forEach(function(M){var z=O.columns.find(function(k){return k.dataKey===M||k.index===M});z&&!_.has(z.index)&&(_.set(z.index,!0),D.push(z.index),U.push(O.columns[z.index]),C-=z.wrappedWidth)});for(var ae=!0,F=(P=E==null?void 0:E.start)!==null&&P!==void 0?P:0;F<O.columns.length;){if(_.has(F)){F++;continue}var L=O.columns[F].wrappedWidth;if(ae||C>=L)ae=!1,D.push(F),U.push(O.columns[F]),C-=L;else break;F++}return{colIndexes:D,columns:U,lastIndex:F-1}}function j(v,O){for(var E=[],P=0;P<O.columns.length;P++){var C=N(v,O,{start:P});C.columns.length&&(E.push(C),P=C.lastIndex)}return E}p.calculateAllColumnsCanFitInPage=j},324:function(m,p,x){Object.defineProperty(p,"__esModule",{value:!0}),p.ellipsize=p.resizeColumns=p.calculateWidths=void 0;var S=x(420);function N(D,U){j(D,U);var Y=[],ae=0;U.columns.forEach(function(L){var M=L.getMaxCustomCellWidth(U);M?L.width=M:(L.width=L.wrappedWidth,Y.push(L)),ae+=L.width});var F=U.getWidth(D.pageSize().width)-ae;F&&(F=v(Y,F,function(L){return Math.max(L.minReadableWidth,L.minWidth)})),F&&(F=v(Y,F,function(L){return L.minWidth})),F=Math.abs(F),!U.settings.horizontalPageBreak&&F>.1/D.scaleFactor()&&(F=F<1?F:Math.round(F),console.warn("Of the table content, ".concat(F," units width could not fit page"))),E(U),P(U,D),O(U)}p.calculateWidths=N;function j(D,U){var Y=D.scaleFactor(),ae=U.settings.horizontalPageBreak,F=(0,S.getPageAvailableWidth)(D,U);U.allRows().forEach(function(L){for(var M=0,z=U.columns;M<z.length;M++){var k=z[M],R=L.cells[k.index];if(R){var re=U.hooks.didParseCell;U.callCellHooks(D,re,R,L,k,null);var ee=R.padding("horizontal");R.contentWidth=(0,S.getStringWidth)(R.text,R.styles,D)+ee;var ne=(0,S.getStringWidth)(R.text.join(" ").split(/[^\S\u00A0]+/),R.styles,D);if(R.minReadableWidth=ne+R.padding("horizontal"),typeof R.styles.cellWidth=="number")R.minWidth=R.styles.cellWidth,R.wrappedWidth=R.styles.cellWidth;else if(R.styles.cellWidth==="wrap"||ae===!0)R.contentWidth>F?(R.minWidth=F,R.wrappedWidth=F):(R.minWidth=R.contentWidth,R.wrappedWidth=R.contentWidth);else{var K=10/Y;R.minWidth=R.styles.minCellWidth||K,R.wrappedWidth=R.contentWidth,R.minWidth>R.wrappedWidth&&(R.wrappedWidth=R.minWidth)}}}}),U.allRows().forEach(function(L){for(var M=0,z=U.columns;M<z.length;M++){var k=z[M],R=L.cells[k.index];if(R&&R.colSpan===1)k.wrappedWidth=Math.max(k.wrappedWidth,R.wrappedWidth),k.minWidth=Math.max(k.minWidth,R.minWidth),k.minReadableWidth=Math.max(k.minReadableWidth,R.minReadableWidth);else{var re=U.styles.columnStyles[k.dataKey]||U.styles.columnStyles[k.index]||{},ee=re.cellWidth||re.minCellWidth;ee&&typeof ee=="number"&&(k.minWidth=ee,k.wrappedWidth=ee)}R&&(R.colSpan>1&&!k.minWidth&&(k.minWidth=R.minWidth),R.colSpan>1&&!k.wrappedWidth&&(k.wrappedWidth=R.minWidth))}})}function v(D,U,Y){for(var ae=U,F=D.reduce(function(K,G){return K+G.wrappedWidth},0),L=0;L<D.length;L++){var M=D[L],z=M.wrappedWidth/F,k=ae*z,R=M.width+k,re=Y(M),ee=R<re?re:R;U-=ee-M.width,M.width=ee}if(U=Math.round(U*1e10)/1e10,U){var ne=D.filter(function(K){return U<0?K.width>Y(K):!0});ne.length&&(U=v(ne,U,Y))}return U}p.resizeColumns=v;function O(D){for(var U={},Y=1,ae=D.allRows(),F=0;F<ae.length;F++)for(var L=ae[F],M=0,z=D.columns;M<z.length;M++){var k=z[M],R=U[k.index];if(Y>1)Y--,delete L.cells[k.index];else if(R)R.cell.height+=L.height,Y=R.cell.colSpan,delete L.cells[k.index],R.left--,R.left<=1&&delete U[k.index];else{var re=L.cells[k.index];if(!re)continue;if(re.height=L.height,re.rowSpan>1){var ee=ae.length-F,ne=re.rowSpan>ee?ee:re.rowSpan;U[k.index]={cell:re,left:ne,row:L}}}}}function E(D){for(var U=D.allRows(),Y=0;Y<U.length;Y++)for(var ae=U[Y],F=null,L=0,M=0,z=0;z<D.columns.length;z++){var k=D.columns[z];if(M-=1,M>1&&D.columns[z+1])L+=k.width,delete ae.cells[k.index];else if(F){var R=F;delete ae.cells[k.index],F=null,R.width=k.width+L}else{var R=ae.cells[k.index];if(!R)continue;if(M=R.colSpan,L=0,R.colSpan>1){F=R,L+=k.width;continue}R.width=k.width+L}}}function P(D,U){for(var Y={count:0,height:0},ae=0,F=D.allRows();ae<F.length;ae++){for(var L=F[ae],M=0,z=D.columns;M<z.length;M++){var k=z[M],R=L.cells[k.index];if(R){U.applyStyles(R.styles,!0);var re=R.width-R.padding("horizontal");if(R.styles.overflow==="linebreak")R.text=U.splitTextToSize(R.text,re+1/U.scaleFactor(),{fontSize:R.styles.fontSize});else if(R.styles.overflow==="ellipsize")R.text=C(R.text,re,R.styles,U,"...");else if(R.styles.overflow==="hidden")R.text=C(R.text,re,R.styles,U,"");else if(typeof R.styles.overflow=="function"){var ee=R.styles.overflow(R.text,re);typeof ee=="string"?R.text=[ee]:R.text=ee}R.contentHeight=R.getContentHeight(U.scaleFactor(),U.getLineHeightFactor());var ne=R.contentHeight/R.rowSpan;R.rowSpan>1&&Y.count*Y.height<ne*R.rowSpan?Y={height:ne,count:R.rowSpan}:Y&&Y.count>0&&Y.height>ne&&(ne=Y.height),ne>L.height&&(L.height=ne)}}Y.count--}}function C(D,U,Y,ae,F){return D.map(function(L){return _(L,U,Y,ae,F)})}p.ellipsize=C;function _(D,U,Y,ae,F){var L=1e4*ae.scaleFactor();if(U=Math.ceil(U*L)/L,U>=(0,S.getStringWidth)(D,Y,ae))return D;for(;U<(0,S.getStringWidth)(D+F,Y,ae)&&!(D.length<=1);)D=D.substring(0,D.length-1);return D.trim()+F}},964:function(m){if(typeof n>"u"){var p=new Error("Cannot find module 'undefined'");throw p.code="MODULE_NOT_FOUND",p}m.exports=n}},o={};function l(m){var p=o[m];if(p!==void 0)return p.exports;var x=o[m]={exports:{}};return i[m].call(x.exports,x,x.exports,l),x.exports}var f={};return function(){var m=f;Object.defineProperty(m,"__esModule",{value:!0}),m.Cell=m.Column=m.Row=m.Table=m.CellHookData=m.__drawTable=m.__createTable=m.applyPlugin=void 0;var p=l(340),x=l(776),S=l(664),N=l(972),j=l(260);Object.defineProperty(m,"Table",{enumerable:!0,get:function(){return j.Table}});var v=l(172);Object.defineProperty(m,"CellHookData",{enumerable:!0,get:function(){return v.CellHookData}});var O=l(260);Object.defineProperty(m,"Cell",{enumerable:!0,get:function(){return O.Cell}}),Object.defineProperty(m,"Column",{enumerable:!0,get:function(){return O.Column}}),Object.defineProperty(m,"Row",{enumerable:!0,get:function(){return O.Row}});function E(U){(0,p.default)(U)}m.applyPlugin=E;function P(U,Y){var ae=(0,x.parseInput)(U,Y),F=(0,N.createTable)(U,ae);(0,S.drawTable)(U,F)}function C(U,Y){var ae=(0,x.parseInput)(U,Y);return(0,N.createTable)(U,ae)}m.__createTable=C;function _(U,Y){(0,S.drawTable)(U,Y)}m.__drawTable=_;try{var D=l(964);D.jsPDF&&(D=D.jsPDF),E(D)}catch{}m.default=P}(),f}()})})(YN);const ZN=e=>{const t=String(e??"");return/[",\n]/.test(t)?`"${t.replace(/"/g,'""')}"`:t},Fi=(e,t,n)=>{const o=[e.join(","),...t.map(m=>m.map(ZN).join(","))].join(`
`),l=new Blob([o],{type:"text/csv;charset=utf-8;"}),f=document.createElement("a");if(f.download!==void 0){const m=URL.createObjectURL(l);f.setAttribute("href",m),f.setAttribute("download",`${n}.csv`),f.style.visibility="hidden",document.body.appendChild(f),f.click(),document.body.removeChild(f),URL.revokeObjectURL(m)}},Bh=({status:e})=>{const t={[ht.WAITING_FOR_PACKAGING]:"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300",[ht.PACKAGED_AND_WAITING_FOR_ASSIGNMENT]:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300",[ht.ASSIGNED_TO_COURIER]:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300",[ht.OUT_FOR_DELIVERY]:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900/30 dark:text-cyan-300",[ht.DELIVERED]:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",[ht.DELIVERY_FAILED]:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"};return s.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ${t[e]}`,children:e})},ol=({shipments:e,onSelect:t,priceColumnTitle:n="Price",showPackageValue:i=!1,showClientFee:o=!1,showCourierCommission:l=!1,showNetProfit:f=!1,showEditableFees:m=!1,updateShipmentFees:p})=>{const[x,S]=pe.useState(null),[N,j]=pe.useState(""),[v,O]=pe.useState(new Date),[E,P]=pe.useState({key:null,direction:"ascending"});pe.useEffect(()=>{const z=setInterval(()=>O(new Date),6e4);return()=>clearInterval(z)},[]);const C=z=>![ht.DELIVERED,ht.DELIVERY_FAILED].includes(z),_=(z,k)=>{if(!C(z.status)||!m||!p)return;S({shipmentId:z.id,field:k});const R=k==="clientFee"?z.clientFlatRateFee:z.courierCommission;j(String(R||0))},D=z=>{j(z.target.value)},U=z=>{if(x&&p){const k=parseFloat(N);if(!isNaN(k)){const R=x.field==="clientFee"?{clientFlatRateFee:k}:{courierCommission:k};p(z,R)}}S(null)},Y=(z,k)=>{z.key==="Enter"?U(k):z.key==="Escape"&&S(null)},ae=z=>{var K;if(!z.creationDate)return null;const k=new Date(z.creationDate),R=(K=z.statusHistory)==null?void 0:K.find(G=>G.status===ht.OUT_FOR_DELIVERY),re=R?new Date(R.timestamp):v;return Math.abs(re.getTime()-k.getTime())/(1e3*60*60*24)},F=pe.useMemo(()=>{let z=[...e];return E.key!==null&&z.sort((k,R)=>{const re=ae(k)??-1,ee=ae(R)??-1;return re<ee?E.direction==="ascending"?-1:1:re>ee?E.direction==="ascending"?1:-1:0}),z},[e,E]),L=z=>{let k="ascending";E.key===z&&E.direction==="ascending"&&(k="descending"),P({key:z,direction:k})},M=(z,k,R)=>(x==null?void 0:x.shipmentId)===z.id&&(x==null?void 0:x.field)===k?s.jsx("input",{type:"number",value:N,onChange:D,onBlur:()=>U(z.id),onKeyDown:ee=>Y(ee,z.id),className:"w-20 p-1 border rounded bg-background",autoFocus:!0}):s.jsxs("span",{onClick:()=>_(z,k),className:`flex items-center gap-1 ${C(z.status)&&m?"cursor-pointer hover:text-primary":""}`,children:[(R||0).toFixed(2),C(z.status)&&m&&s.jsx(Ts,{className:"w-3 h-3 text-muted-foreground"})]});return s.jsxs("div",{className:"overflow-x-auto",children:[s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{className:"bg-secondary",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-xs font-medium text-muted-foreground uppercase",children:"Shipment"}),s.jsx("th",{className:"px-4 py-3 text-xs font-medium text-muted-foreground uppercase",children:"Date"}),s.jsx("th",{className:"px-4 py-3 text-xs font-medium text-muted-foreground uppercase",children:"Status"}),s.jsx("th",{className:"px-4 py-3 text-xs font-medium text-muted-foreground uppercase cursor-pointer",onClick:()=>L("daysInPhase"),children:"Duration"}),i&&s.jsx("th",{className:"px-4 py-3 text-xs font-medium text-muted-foreground uppercase",children:n}),o&&s.jsx("th",{className:"px-4 py-3 text-xs font-medium text-muted-foreground uppercase",children:"Client Fee"}),l&&s.jsx("th",{className:"px-4 py-3 text-xs font-medium text-muted-foreground uppercase",children:"Courier Comm."}),f&&s.jsx("th",{className:"px-4 py-3 text-xs font-medium text-muted-foreground uppercase",children:"Net Profit"})]})}),s.jsx("tbody",{className:"divide-y divide-border",children:F.map(z=>{const k=(z.clientFlatRateFee||0)-(z.courierCommission||0),R=ae(z);return s.jsxs("tr",{onClick:()=>t==null?void 0:t(z),className:`hover:bg-accent ${t?"cursor-pointer":""}`,children:[s.jsxs("td",{className:"px-4 py-3",children:[s.jsx("p",{className:"font-mono text-sm font-semibold text-foreground",children:z.id}),s.jsx("p",{className:"text-xs text-muted-foreground",children:z.recipientName})]}),s.jsx("td",{className:"px-4 py-3 text-sm text-muted-foreground",children:new Date(z.creationDate).toLocaleDateString()}),s.jsx("td",{className:"px-4 py-3",children:s.jsx(Bh,{status:z.status})}),s.jsx("td",{className:"px-4 py-3 text-sm",children:R!==null&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Rh,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("span",{className:"font-mono",children:[R.toFixed(1)," days"]})]})}),i&&s.jsx("td",{className:"px-4 py-3 font-mono font-semibold text-primary",children:(z.paymentMethod==="Transfer"?0:z.price).toFixed(2)}),o&&s.jsx("td",{className:"px-4 py-3 font-mono text-green-600 dark:text-green-400",children:M(z,"clientFee",z.clientFlatRateFee)}),l&&s.jsx("td",{className:"px-4 py-3 font-mono text-red-600 dark:text-red-400",children:M(z,"courierCommission",z.courierCommission)}),f&&s.jsx("td",{className:`px-4 py-3 font-mono font-bold ${k>=0?"text-foreground":"text-red-600 dark:text-red-400"}`,children:k.toFixed(2)})]},z.id)})})]}),e.length===0&&s.jsxs("div",{className:"text-center py-16 text-muted-foreground",children:[s.jsx("p",{className:"font-semibold",children:"No Shipments Found"}),s.jsx("p",{className:"text-sm",children:"There are no shipments matching the current criteria."})]})]})},QN=e=>{if([ht.DELIVERED,ht.DELIVERY_FAILED].includes(e.status))return!1;const t=new Date(Date.now()-2.5*24*60*60*1e3);return new Date(e.creationDate)<t},KN=({onSelectShipment:e})=>{const{currentUser:t,shipments:n,users:i,updateShipmentFees:o,getCourierName:l,hasPermission:f}=jn(),[m,p]=pe.useState(""),[x,S]=pe.useState("all"),[N,j]=pe.useState("all"),[v,O]=pe.useState(""),[E,P]=pe.useState(!1),C=i.filter(M=>(M.roles||[]).includes(Vt.CLIENT)),_=f(Ut.VIEW_ALL_SHIPMENTS),D=f(Ut.VIEW_OWN_SHIPMENTS),U=f(Ut.VIEW_ADMIN_FINANCIALS),Y=t==null?void 0:t.roles.includes(Vt.ASSIGNING_USER),ae=t==null?void 0:t.roles.includes(Vt.SUPER_USER);if(!t||!_&&!D)return s.jsx("div",{className:"p-8 text-center",children:"Access Denied."});const F=pe.useMemo(()=>{let M=_?n:n.filter(z=>z.clientId===t.id);if(v&&(M=M.filter(z=>z.creationDate.startsWith(v))),m.trim()){const z=m.trim().toLowerCase();M=M.filter(k=>k.id.toLowerCase().includes(z)||k.recipientName.toLowerCase().includes(z))}return N!=="all"&&(M=M.filter(z=>z.status===N)),E&&(M=M.filter(QN)),_&&x!=="all"&&(M=M.filter(z=>z.clientId===x)),M.sort((z,k)=>new Date(k.creationDate).getTime()-new Date(z.creationDate).getTime())},[t,n,v,m,x,N,_,E]),L=()=>{if(!t)return;const M=F;if(_){const z=["ID","Client","Recipient","Recipient Phone","Date","Status","Courier","Total COD (EGP)","Package Value (EGP)"];ae||z.push("Client Fee (EGP)"),U&&z.push("Courier Commission (EGP)","Net Profit (EGP)");const k=M.map(R=>{const re=l(R.courierId),ee=R.clientFlatRateFee||0,ne=R.courierCommission||0,K=[R.id,R.clientName,R.recipientName,R.recipientPhone,new Date(R.creationDate).toLocaleDateString(),R.status,re,R.price.toFixed(2),R.packageValue.toFixed(2)];if(ae||K.push(ee.toFixed(2)),U){let G=0;R.courierId&&R.clientFlatRateFee&&R.courierCommission&&(G=ee-ne),K.push(ne.toFixed(2),G.toFixed(2))}return K});Fi(z,k,"All_Shipments_Report")}else if(D){const z=["ID","Recipient","Date","Status","Price (EGP)"],k=M.map(R=>[R.id,R.recipientName,new Date(R.creationDate).toLocaleDateString(),R.status,R.price.toFixed(2)]);Fi(z,k,`Client_Shipments_${t.name.replace(/\s/g,"_")}`)}};return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex justify-between items-center mb-4",children:s.jsx("h2",{className:"text-2xl font-bold text-foreground",children:_?"All Shipments":"My Shipments"})}),s.jsxs("div",{className:"mb-6 card flex flex-col lg:flex-row gap-4 items-center flex-wrap",children:[s.jsx("div",{className:"flex-grow w-full lg:w-auto",children:s.jsx("input",{type:"text",placeholder:_?"Search by Shipment ID or Recipient...":"Search by ID or Recipient...",value:m,onChange:M=>p(M.target.value),className:"w-full px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background"})}),_&&s.jsx("div",{className:"flex-grow w-full lg:w-auto",children:s.jsxs("select",{value:x,onChange:M=>S(M.target.value==="all"?"all":Number(M.target.value)),className:"w-full px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background",children:[s.jsx("option",{value:"all",children:"All Clients"}),C.map(M=>s.jsx("option",{value:M.id,children:M.name},M.id))]})}),s.jsx("div",{className:"flex-grow w-full lg:w-auto",children:s.jsxs("select",{value:N,onChange:M=>j(M.target.value),className:"w-full px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background",children:[s.jsx("option",{value:"all",children:"All Statuses"}),Object.values(ht).map(M=>s.jsx("option",{value:M,children:M},M))]})}),s.jsxs("div",{className:"flex items-center gap-2 w-full lg:w-auto",children:[s.jsx("input",{type:"date",value:v,onChange:M=>O(M.target.value),className:"w-full px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background","aria-label":"Filter by creation date"}),v&&s.jsx("button",{onClick:()=>O(""),className:"px-4 py-2 text-sm font-semibold text-muted-foreground rounded-lg hover:bg-accent transition","aria-label":"Clear date filter",children:"Clear"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"overdue-filter",checked:E,onChange:M=>P(M.target.checked),className:"h-4 w-4 rounded border-border text-primary focus:ring-primary"}),s.jsx("label",{htmlFor:"overdue-filter",className:"ml-2 text-sm font-medium text-foreground",children:"Show Overdue Only"})]}),s.jsx("div",{className:"lg:ml-auto w-full lg:w-auto",children:s.jsxs("button",{onClick:L,className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition",children:[s.jsx(ca,{className:"w-5 h-5"}),"Export as CSV"]})})]}),s.jsx("div",{className:"card overflow-hidden",children:s.jsx(ol,{shipments:F,onSelect:e,showPackageValue:Y,priceColumnTitle:Y?"Total COD":"Price",showClientFee:!ae,showCourierCommission:U,showNetProfit:U,showEditableFees:U,updateShipmentFees:U?o:void 0})})]})};var _y={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(e,t){((n,i)=>{e.exports=i()})(qs,function n(){var i=typeof self<"u"?self:typeof window<"u"?window:i!==void 0?i:{},o,l=!i.document&&!!i.postMessage,f=i.IS_PAPA_WORKER||!1,m={},p=0,x={};function S(L){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(M){var z=Y(M);z.chunkSize=parseInt(z.chunkSize),M.step||M.chunk||(z.chunkSize=null),this._handle=new E(z),(this._handle.streamer=this)._config=z}).call(this,L),this.parseChunk=function(M,z){var k=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<k){let re=this._config.newline;re||(R=this._config.quoteChar||'"',re=this._handle.guessLineEndings(M,R)),M=[...M.split(re).slice(k)].join(re)}this.isFirstChunk&&F(this._config.beforeFirstChunk)&&(R=this._config.beforeFirstChunk(M))!==void 0&&(M=R),this.isFirstChunk=!1,this._halted=!1;var k=this._partialLine+M,R=(this._partialLine="",this._handle.parse(k,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(M=R.meta.cursor,k=(this._finished||(this._partialLine=k.substring(M-this._baseIndex),this._baseIndex=M),R&&R.data&&(this._rowCount+=R.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),f)i.postMessage({results:R,workerId:x.WORKER_ID,finished:k});else if(F(this._config.chunk)&&!z){if(this._config.chunk(R,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=R=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(R.data),this._completeResults.errors=this._completeResults.errors.concat(R.errors),this._completeResults.meta=R.meta),this._completed||!k||!F(this._config.complete)||R&&R.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),k||R&&R.meta.paused||this._nextChunk(),R}this._halted=!0},this._sendError=function(M){F(this._config.error)?this._config.error(M):f&&this._config.error&&i.postMessage({workerId:x.WORKER_ID,error:M,finished:!1})}}function N(L){var M;(L=L||{}).chunkSize||(L.chunkSize=x.RemoteChunkSize),S.call(this,L),this._nextChunk=l?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(z){this._input=z,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(M=new XMLHttpRequest,this._config.withCredentials&&(M.withCredentials=this._config.withCredentials),l||(M.onload=ae(this._chunkLoaded,this),M.onerror=ae(this._chunkError,this)),M.open(this._config.downloadRequestBody?"POST":"GET",this._input,!l),this._config.downloadRequestHeaders){var z,k=this._config.downloadRequestHeaders;for(z in k)M.setRequestHeader(z,k[z])}var R;this._config.chunkSize&&(R=this._start+this._config.chunkSize-1,M.setRequestHeader("Range","bytes="+this._start+"-"+R));try{M.send(this._config.downloadRequestBody)}catch(re){this._chunkError(re.message)}l&&M.status===0&&this._chunkError()}},this._chunkLoaded=function(){M.readyState===4&&(M.status<200||400<=M.status?this._chunkError():(this._start+=this._config.chunkSize||M.responseText.length,this._finished=!this._config.chunkSize||this._start>=(z=>(z=z.getResponseHeader("Content-Range"))!==null?parseInt(z.substring(z.lastIndexOf("/")+1)):-1)(M),this.parseChunk(M.responseText)))},this._chunkError=function(z){z=M.statusText||z,this._sendError(new Error(z))}}function j(L){(L=L||{}).chunkSize||(L.chunkSize=x.LocalChunkSize),S.call(this,L);var M,z,k=typeof FileReader<"u";this.stream=function(R){this._input=R,z=R.slice||R.webkitSlice||R.mozSlice,k?((M=new FileReader).onload=ae(this._chunkLoaded,this),M.onerror=ae(this._chunkError,this)):M=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var R=this._input,re=(this._config.chunkSize&&(re=Math.min(this._start+this._config.chunkSize,this._input.size),R=z.call(R,this._start,re)),M.readAsText(R,this._config.encoding));k||this._chunkLoaded({target:{result:re}})},this._chunkLoaded=function(R){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(R.target.result)},this._chunkError=function(){this._sendError(M.error)}}function v(L){var M;S.call(this,L=L||{}),this.stream=function(z){return M=z,this._nextChunk()},this._nextChunk=function(){var z,k;if(!this._finished)return z=this._config.chunkSize,M=z?(k=M.substring(0,z),M.substring(z)):(k=M,""),this._finished=!M,this.parseChunk(k)}}function O(L){S.call(this,L=L||{});var M=[],z=!0,k=!1;this.pause=function(){S.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){S.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(R){this._input=R,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){k&&M.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),M.length?this.parseChunk(M.shift()):z=!0},this._streamData=ae(function(R){try{M.push(typeof R=="string"?R:R.toString(this._config.encoding)),z&&(z=!1,this._checkIsFinished(),this.parseChunk(M.shift()))}catch(re){this._streamError(re)}},this),this._streamError=ae(function(R){this._streamCleanUp(),this._sendError(R)},this),this._streamEnd=ae(function(){this._streamCleanUp(),k=!0,this._streamData("")},this),this._streamCleanUp=ae(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function E(L){var M,z,k,R,re=Math.pow(2,53),ee=-re,ne=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,K=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,G=this,te=0,W=0,fe=!1,le=!1,B=[],q={data:[],errors:[],meta:{}};function Q(Ae){return L.skipEmptyLines==="greedy"?Ae.join("").trim()==="":Ae.length===1&&Ae[0].length===0}function he(){if(q&&k&&(je("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+x.DefaultDelimiter+"'"),k=!1),L.skipEmptyLines&&(q.data=q.data.filter(function(Te){return!Q(Te)})),ue()){let Te=function(Ye,He){F(L.transformHeader)&&(Ye=L.transformHeader(Ye,He)),B.push(Ye)};if(q)if(Array.isArray(q.data[0])){for(var Ae=0;ue()&&Ae<q.data.length;Ae++)q.data[Ae].forEach(Te);q.data.splice(0,1)}else q.data.forEach(Te)}function ve(Te,Ye){for(var He=L.header?{}:[],ut=0;ut<Te.length;ut++){var Me=ut,me=Te[ut],me=((st,Fe)=>(we=>(L.dynamicTypingFunction&&L.dynamicTyping[we]===void 0&&(L.dynamicTyping[we]=L.dynamicTypingFunction(we)),(L.dynamicTyping[we]||L.dynamicTyping)===!0))(st)?Fe==="true"||Fe==="TRUE"||Fe!=="false"&&Fe!=="FALSE"&&((we=>{if(ne.test(we)&&(we=parseFloat(we),ee<we&&we<re))return 1})(Fe)?parseFloat(Fe):K.test(Fe)?new Date(Fe):Fe===""?null:Fe):Fe)(Me=L.header?ut>=B.length?"__parsed_extra":B[ut]:Me,me=L.transform?L.transform(me,Me):me);Me==="__parsed_extra"?(He[Me]=He[Me]||[],He[Me].push(me)):He[Me]=me}return L.header&&(ut>B.length?je("FieldMismatch","TooManyFields","Too many fields: expected "+B.length+" fields but parsed "+ut,W+Ye):ut<B.length&&je("FieldMismatch","TooFewFields","Too few fields: expected "+B.length+" fields but parsed "+ut,W+Ye)),He}var Pe;q&&(L.header||L.dynamicTyping||L.transform)&&(Pe=1,!q.data.length||Array.isArray(q.data[0])?(q.data=q.data.map(ve),Pe=q.data.length):q.data=ve(q.data,0),L.header&&q.meta&&(q.meta.fields=B),W+=Pe)}function ue(){return L.header&&B.length===0}function je(Ae,ve,Pe,Te){Ae={type:Ae,code:ve,message:Pe},Te!==void 0&&(Ae.row=Te),q.errors.push(Ae)}F(L.step)&&(R=L.step,L.step=function(Ae){q=Ae,ue()?he():(he(),q.data.length!==0&&(te+=Ae.data.length,L.preview&&te>L.preview?z.abort():(q.data=q.data[0],R(q,G))))}),this.parse=function(Ae,ve,Pe){var Te=L.quoteChar||'"',Te=(L.newline||(L.newline=this.guessLineEndings(Ae,Te)),k=!1,L.delimiter?F(L.delimiter)&&(L.delimiter=L.delimiter(Ae),q.meta.delimiter=L.delimiter):((Te=((Ye,He,ut,Me,me)=>{var st,Fe,we,Xe;me=me||[",","	","|",";",x.RECORD_SEP,x.UNIT_SEP];for(var Re=0;Re<me.length;Re++){for(var Qe,gt=me[Re],pt=0,qe=0,ct=0,St=(we=void 0,new C({comments:Me,delimiter:gt,newline:He,preview:10}).parse(Ye)),Ot=0;Ot<St.data.length;Ot++)ut&&Q(St.data[Ot])?ct++:(Qe=St.data[Ot].length,qe+=Qe,we===void 0?we=Qe:0<Qe&&(pt+=Math.abs(Qe-we),we=Qe));0<St.data.length&&(qe/=St.data.length-ct),(Fe===void 0||pt<=Fe)&&(Xe===void 0||Xe<qe)&&1.99<qe&&(Fe=pt,st=gt,Xe=qe)}return{successful:!!(L.delimiter=st),bestDelimiter:st}})(Ae,L.newline,L.skipEmptyLines,L.comments,L.delimitersToGuess)).successful?L.delimiter=Te.bestDelimiter:(k=!0,L.delimiter=x.DefaultDelimiter),q.meta.delimiter=L.delimiter),Y(L));return L.preview&&L.header&&Te.preview++,M=Ae,z=new C(Te),q=z.parse(M,ve,Pe),he(),fe?{meta:{paused:!0}}:q||{meta:{paused:!1}}},this.paused=function(){return fe},this.pause=function(){fe=!0,z.abort(),M=F(L.chunk)?"":M.substring(z.getCharIndex())},this.resume=function(){G.streamer._halted?(fe=!1,G.streamer.parseChunk(M,!0)):setTimeout(G.resume,3)},this.aborted=function(){return le},this.abort=function(){le=!0,z.abort(),q.meta.aborted=!0,F(L.complete)&&L.complete(q),M=""},this.guessLineEndings=function(Ye,Te){Ye=Ye.substring(0,1048576);var Te=new RegExp(P(Te)+"([^]*?)"+P(Te),"gm"),Pe=(Ye=Ye.replace(Te,"")).split("\r"),Te=Ye.split(`
`),Ye=1<Te.length&&Te[0].length<Pe[0].length;if(Pe.length===1||Ye)return`
`;for(var He=0,ut=0;ut<Pe.length;ut++)Pe[ut][0]===`
`&&He++;return He>=Pe.length/2?`\r
`:"\r"}}function P(L){return L.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function C(L){var M=(L=L||{}).delimiter,z=L.newline,k=L.comments,R=L.step,re=L.preview,ee=L.fastMode,ne=null,K=!1,G=L.quoteChar==null?'"':L.quoteChar,te=G;if(L.escapeChar!==void 0&&(te=L.escapeChar),(typeof M!="string"||-1<x.BAD_DELIMITERS.indexOf(M))&&(M=","),k===M)throw new Error("Comment character same as delimiter");k===!0?k="#":(typeof k!="string"||-1<x.BAD_DELIMITERS.indexOf(k))&&(k=!1),z!==`
`&&z!=="\r"&&z!==`\r
`&&(z=`
`);var W=0,fe=!1;this.parse=function(le,B,q){if(typeof le!="string")throw new Error("Input must be a string");var Q=le.length,he=M.length,ue=z.length,je=k.length,Ae=F(R),ve=[],Pe=[],Te=[],Ye=W=0;if(!le)return pt();if(ee||ee!==!1&&le.indexOf(G)===-1){for(var He=le.split(z),ut=0;ut<He.length;ut++){if(Te=He[ut],W+=Te.length,ut!==He.length-1)W+=z.length;else if(q)return pt();if(!k||Te.substring(0,je)!==k){if(Ae){if(ve=[],Xe(Te.split(M)),qe(),fe)return pt()}else Xe(Te.split(M));if(re&&re<=ut)return ve=ve.slice(0,re),pt(!0)}}return pt()}for(var Me=le.indexOf(M,W),me=le.indexOf(z,W),st=new RegExp(P(te)+P(G),"g"),Fe=le.indexOf(G,W);;)if(le[W]===G)for(Fe=W,W++;;){if((Fe=le.indexOf(G,Fe+1))===-1)return q||Pe.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:ve.length,index:W}),Qe();if(Fe===Q-1)return Qe(le.substring(W,Fe).replace(st,G));if(G===te&&le[Fe+1]===te)Fe++;else if(G===te||Fe===0||le[Fe-1]!==te){Me!==-1&&Me<Fe+1&&(Me=le.indexOf(M,Fe+1));var we=Re((me=me!==-1&&me<Fe+1?le.indexOf(z,Fe+1):me)===-1?Me:Math.min(Me,me));if(le.substr(Fe+1+we,he)===M){Te.push(le.substring(W,Fe).replace(st,G)),le[W=Fe+1+we+he]!==G&&(Fe=le.indexOf(G,W)),Me=le.indexOf(M,W),me=le.indexOf(z,W);break}if(we=Re(me),le.substring(Fe+1+we,Fe+1+we+ue)===z){if(Te.push(le.substring(W,Fe).replace(st,G)),gt(Fe+1+we+ue),Me=le.indexOf(M,W),Fe=le.indexOf(G,W),Ae&&(qe(),fe))return pt();if(re&&ve.length>=re)return pt(!0);break}Pe.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:ve.length,index:W}),Fe++}}else if(k&&Te.length===0&&le.substring(W,W+je)===k){if(me===-1)return pt();W=me+ue,me=le.indexOf(z,W),Me=le.indexOf(M,W)}else if(Me!==-1&&(Me<me||me===-1))Te.push(le.substring(W,Me)),W=Me+he,Me=le.indexOf(M,W);else{if(me===-1)break;if(Te.push(le.substring(W,me)),gt(me+ue),Ae&&(qe(),fe))return pt();if(re&&ve.length>=re)return pt(!0)}return Qe();function Xe(ct){ve.push(ct),Ye=W}function Re(ct){var St=0;return St=ct!==-1&&(ct=le.substring(Fe+1,ct))&&ct.trim()===""?ct.length:St}function Qe(ct){return q||(ct===void 0&&(ct=le.substring(W)),Te.push(ct),W=Q,Xe(Te),Ae&&qe()),pt()}function gt(ct){W=ct,Xe(Te),Te=[],me=le.indexOf(z,W)}function pt(ct){if(L.header&&!B&&ve.length&&!K){var St=ve[0],Ot=Object.create(null),At=new Set(St);let qt=!1;for(let mt=0;mt<St.length;mt++){let yn=St[mt];if(Ot[yn=F(L.transformHeader)?L.transformHeader(yn,mt):yn]){let Tt,Ne=Ot[yn];for(;Tt=yn+"_"+Ne,Ne++,At.has(Tt););At.add(Tt),St[mt]=Tt,Ot[yn]++,qt=!0,(ne=ne===null?{}:ne)[Tt]=yn}else Ot[yn]=1,St[mt]=yn;At.add(yn)}qt&&console.warn("Duplicate headers found and renamed."),K=!0}return{data:ve,errors:Pe,meta:{delimiter:M,linebreak:z,aborted:fe,truncated:!!ct,cursor:Ye+(B||0),renamedHeaders:ne}}}function qe(){R(pt()),ve=[],Pe=[]}},this.abort=function(){fe=!0},this.getCharIndex=function(){return W}}function _(L){var M=L.data,z=m[M.workerId],k=!1;if(M.error)z.userError(M.error,M.file);else if(M.results&&M.results.data){var R={abort:function(){k=!0,D(M.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:U,resume:U};if(F(z.userStep)){for(var re=0;re<M.results.data.length&&(z.userStep({data:M.results.data[re],errors:M.results.errors,meta:M.results.meta},R),!k);re++);delete M.results}else F(z.userChunk)&&(z.userChunk(M.results,R,M.file),delete M.results)}M.finished&&!k&&D(M.workerId,M.results)}function D(L,M){var z=m[L];F(z.userComplete)&&z.userComplete(M),z.terminate(),delete m[L]}function U(){throw new Error("Not implemented.")}function Y(L){if(typeof L!="object"||L===null)return L;var M,z=Array.isArray(L)?[]:{};for(M in L)z[M]=Y(L[M]);return z}function ae(L,M){return function(){L.apply(M,arguments)}}function F(L){return typeof L=="function"}return x.parse=function(L,M){var z=(M=M||{}).dynamicTyping||!1;if(F(z)&&(M.dynamicTypingFunction=z,z={}),M.dynamicTyping=z,M.transform=!!F(M.transform)&&M.transform,!M.worker||!x.WORKERS_SUPPORTED)return z=null,x.NODE_STREAM_INPUT,typeof L=="string"?(L=(k=>k.charCodeAt(0)!==65279?k:k.slice(1))(L),z=new(M.download?N:v)(M)):L.readable===!0&&F(L.read)&&F(L.on)?z=new O(M):(i.File&&L instanceof File||L instanceof Object)&&(z=new j(M)),z.stream(L);(z=(()=>{var k;return!!x.WORKERS_SUPPORTED&&(k=(()=>{var R=i.URL||i.webkitURL||null,re=n.toString();return x.BLOB_URL||(x.BLOB_URL=R.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",re,")();"],{type:"text/javascript"})))})(),(k=new i.Worker(k)).onmessage=_,k.id=p++,m[k.id]=k)})()).userStep=M.step,z.userChunk=M.chunk,z.userComplete=M.complete,z.userError=M.error,M.step=F(M.step),M.chunk=F(M.chunk),M.complete=F(M.complete),M.error=F(M.error),delete M.worker,z.postMessage({input:L,config:M,workerId:z.id})},x.unparse=function(L,M){var z=!1,k=!0,R=",",re=`\r
`,ee='"',ne=ee+ee,K=!1,G=null,te=!1,W=((()=>{if(typeof M=="object"){if(typeof M.delimiter!="string"||x.BAD_DELIMITERS.filter(function(B){return M.delimiter.indexOf(B)!==-1}).length||(R=M.delimiter),typeof M.quotes!="boolean"&&typeof M.quotes!="function"&&!Array.isArray(M.quotes)||(z=M.quotes),typeof M.skipEmptyLines!="boolean"&&typeof M.skipEmptyLines!="string"||(K=M.skipEmptyLines),typeof M.newline=="string"&&(re=M.newline),typeof M.quoteChar=="string"&&(ee=M.quoteChar),typeof M.header=="boolean"&&(k=M.header),Array.isArray(M.columns)){if(M.columns.length===0)throw new Error("Option columns is empty");G=M.columns}M.escapeChar!==void 0&&(ne=M.escapeChar+ee),M.escapeFormulae instanceof RegExp?te=M.escapeFormulae:typeof M.escapeFormulae=="boolean"&&M.escapeFormulae&&(te=/^[=+\-@\t\r].*$/)}})(),new RegExp(P(ee),"g"));if(typeof L=="string"&&(L=JSON.parse(L)),Array.isArray(L)){if(!L.length||Array.isArray(L[0]))return fe(null,L,K);if(typeof L[0]=="object")return fe(G||Object.keys(L[0]),L,K)}else if(typeof L=="object")return typeof L.data=="string"&&(L.data=JSON.parse(L.data)),Array.isArray(L.data)&&(L.fields||(L.fields=L.meta&&L.meta.fields||G),L.fields||(L.fields=Array.isArray(L.data[0])?L.fields:typeof L.data[0]=="object"?Object.keys(L.data[0]):[]),Array.isArray(L.data[0])||typeof L.data[0]=="object"||(L.data=[L.data])),fe(L.fields||[],L.data||[],K);throw new Error("Unable to serialize unrecognized input");function fe(B,q,Q){var he="",ue=(typeof B=="string"&&(B=JSON.parse(B)),typeof q=="string"&&(q=JSON.parse(q)),Array.isArray(B)&&0<B.length),je=!Array.isArray(q[0]);if(ue&&k){for(var Ae=0;Ae<B.length;Ae++)0<Ae&&(he+=R),he+=le(B[Ae],Ae);0<q.length&&(he+=re)}for(var ve=0;ve<q.length;ve++){var Pe=(ue?B:q[ve]).length,Te=!1,Ye=ue?Object.keys(q[ve]).length===0:q[ve].length===0;if(Q&&!ue&&(Te=Q==="greedy"?q[ve].join("").trim()==="":q[ve].length===1&&q[ve][0].length===0),Q==="greedy"&&ue){for(var He=[],ut=0;ut<Pe;ut++){var Me=je?B[ut]:ut;He.push(q[ve][Me])}Te=He.join("").trim()===""}if(!Te){for(var me=0;me<Pe;me++){0<me&&!Ye&&(he+=R);var st=ue&&je?B[me]:me;he+=le(q[ve][st],me)}ve<q.length-1&&(!Q||0<Pe&&!Ye)&&(he+=re)}}return he}function le(B,q){var Q,he;return B==null?"":B.constructor===Date?JSON.stringify(B).slice(1,25):(he=!1,te&&typeof B=="string"&&te.test(B)&&(B="'"+B,he=!0),Q=B.toString().replace(W,ne),(he=he||z===!0||typeof z=="function"&&z(B,q)||Array.isArray(z)&&z[q]||((ue,je)=>{for(var Ae=0;Ae<je.length;Ae++)if(-1<ue.indexOf(je[Ae]))return!0;return!1})(Q,x.BAD_DELIMITERS)||-1<Q.indexOf(R)||Q.charAt(0)===" "||Q.charAt(Q.length-1)===" ")?ee+Q+ee:Q)}},x.RECORD_SEP="",x.UNIT_SEP="",x.BYTE_ORDER_MARK="\uFEFF",x.BAD_DELIMITERS=["\r",`
`,'"',x.BYTE_ORDER_MARK],x.WORKERS_SUPPORTED=!l&&!!i.Worker,x.NODE_STREAM_INPUT=1,x.LocalChunkSize=10485760,x.RemoteChunkSize=5242880,x.DefaultDelimiter=",",x.Parser=C,x.ParserHandle=E,x.NetworkStreamer=N,x.FileStreamer=j,x.StringStreamer=v,x.ReadableStreamStreamer=O,i.jQuery&&((o=i.jQuery).fn.parse=function(L){var M=L.config||{},z=[];return this.each(function(re){if(!(o(this).prop("tagName").toUpperCase()==="INPUT"&&o(this).attr("type").toLowerCase()==="file"&&i.FileReader)||!this.files||this.files.length===0)return!0;for(var ee=0;ee<this.files.length;ee++)z.push({file:this.files[ee],inputElem:this,instanceConfig:o.extend({},M)})}),k(),this;function k(){if(z.length===0)F(L.complete)&&L.complete();else{var re,ee,ne,K,G=z[0];if(F(L.before)){var te=L.before(G.file,G.inputElem);if(typeof te=="object"){if(te.action==="abort")return re="AbortError",ee=G.file,ne=G.inputElem,K=te.reason,void(F(L.error)&&L.error({name:re},ee,ne,K));if(te.action==="skip")return void R();typeof te.config=="object"&&(G.instanceConfig=o.extend(G.instanceConfig,te.config))}else if(te==="skip")return void R()}var W=G.instanceConfig.complete;G.instanceConfig.complete=function(fe){F(W)&&W(fe,G.file,G.inputElem),R()},x.parse(G.file,G.instanceConfig)}}function R(){z.splice(0,1),k()}}),f&&(i.onmessage=function(L){L=L.data,x.WORKER_ID===void 0&&L&&(x.WORKER_ID=L.workerId),typeof L.input=="string"?i.postMessage({workerId:x.WORKER_ID,results:x.parse(L.input,L.config),finished:!0}):(i.File&&L.input instanceof File||L.input instanceof Object)&&(L=x.parse(L.input,L.config))&&i.postMessage({workerId:x.WORKER_ID,results:L,finished:!0})}),(N.prototype=Object.create(S.prototype)).constructor=N,(j.prototype=Object.create(S.prototype)).constructor=j,(v.prototype=Object.create(v.prototype)).constructor=v,(O.prototype=Object.create(S.prototype)).constructor=O,x})})(_y);var JN=_y.exports;const Bp=ph(JN),$N=()=>{const{currentUser:e,users:t,addShipment:n,addToast:i,calculatePriorityPrice:o,hasPermission:l,tierSettings:f}=jn(),[m,p]=pe.useState("single"),x=l(Ut.CREATE_SHIPMENTS_FOR_OTHERS),S=pe.useMemo(()=>t.filter(we=>we.roles.includes(Vt.CLIENT)),[t]),[N,j]=pe.useState(x?"":String(e==null?void 0:e.id)),[v,O]=pe.useState(""),[E,P]=pe.useState(""),[C,_]=pe.useState({street:"",city:"Cairo",zone:Zr.GreaterCairo.Cairo[0],details:""}),[D,U]=pe.useState(""),[Y,ae]=pe.useState(Mn.COD),[F,L]=pe.useState(nn.STANDARD),[M,z]=pe.useState(""),[k,R]=pe.useState(""),[re,ee]=pe.useState(""),[ne,K]=pe.useState(x?"":String(e==null?void 0:e.id)),[G,te]=pe.useState(null),[W,fe]=pe.useState([]),[le,B]=pe.useState([]);pe.useEffect(()=>{Y===Mn.TRANSFER&&z("0")},[Y]);const q=pe.useMemo(()=>x?S.find(we=>we.id===parseInt(N)):e,[x,N,S,e]),Q=parseFloat(M)||0,{feeBeforeDiscount:he,discountPercentage:ue,discountAmount:je,finalFee:Ae}=pe.useMemo(()=>{if(!q)return{feeBeforeDiscount:0,discountPercentage:0,discountAmount:0,finalFee:0};const we=o(q.flatRateFee||0,F,q),Xe=q.partnerTier?f.find(pt=>pt.tierName===q.partnerTier):null,Re=Xe?Xe.discountPercentage:0,Qe=we*(Re/100),gt=we-Qe;return{feeBeforeDiscount:we,discountPercentage:Re,discountAmount:Qe,finalFee:gt}},[q,F,f,o]),ve=pe.useMemo(()=>Y===Mn.TRANSFER?parseFloat(re)||0:Q+Ae,[Y,Ae,Q,re]),Pe=we=>{if(we.preventDefault(),!q){i(x?"Please select a client.":"User not found.","error");return}if(!q.address||!q.address.street){i(`${q.name} does not have a complete default address in their profile.`,"error");return}const Xe={clientId:q.id,clientName:q.name,recipientName:v,recipientPhone:E,fromAddress:q.address,toAddress:C,packageDescription:D,isLargeOrder:!1,price:ve,paymentMethod:Y,priority:F,packageValue:Q,clientFlatRateFee:Ae,amountReceived:Y===Mn.TRANSFER?parseFloat(k)||0:void 0,amountToCollect:Y===Mn.TRANSFER?parseFloat(re)||0:void 0};n(Xe),i("Shipment created successfully!","success"),x&&j(""),O(""),P(""),_({street:"",city:"Cairo",zone:Zr.GreaterCairo.Cairo[0],details:""}),U(""),ae(Mn.COD),L(nn.STANDARD),z(""),R(""),ee("")},Te=we=>{var Qe,gt;const Xe=we.target.value,Re=(gt=(Qe=we.target.options[we.target.selectedIndex])==null?void 0:Qe.parentElement)==null?void 0:gt.getAttribute("label");_(pt=>({...pt,zone:Xe,city:Re||"Other"}))},Ye=Object.values(Zr.GreaterCairo.Cairo).concat(Object.values(Zr.GreaterCairo.Giza)),He=we=>{we.target.files&&(te(we.target.files[0]),fe([]),B([]))},ut=()=>{if(!G){i("Please select a file to upload.","error");return}Bp.parse(G,{header:!0,skipEmptyLines:!0,complete:we=>{const Re=we.data.map(Qe=>({recipientName:Qe["Recipient Name"],recipientPhone:Qe["Recipient Phone"],toAddress:{street:Qe["Recipient Street"],city:Qe.City||"Cairo",zone:Qe.Zone,details:Qe["Address Details"]||""},packageDescription:Qe["Package Description"],paymentMethod:Qe["Payment Method"],priority:Qe.Priority,packageValue:parseFloat(Qe["Package Value"])}));fe(Re),Me(Re)}})},Me=we=>{const Xe=we.map(Re=>{const Qe=[],gt=[Mn.COD,Mn.TRANSFER];return Re.recipientName||Qe.push("Recipient Name is required."),Re.recipientPhone||Qe.push("Recipient Phone is required."),Re.toAddress.street||Qe.push("Recipient Street is required."),Ye.includes(Re.toAddress.zone)||Qe.push("Invalid Zone."),gt.includes(Re.paymentMethod)||Qe.push("Invalid Payment Method. Must be COD or Transfer."),Object.values(nn).includes(Re.priority)||Qe.push("Invalid Priority."),(isNaN(Re.packageValue)||Re.paymentMethod===Mn.COD&&Re.packageValue<=0)&&Qe.push("Invalid Package Value for COD."),{isValid:Qe.length===0,errors:Qe}});B(Xe)},me=()=>{const we=t.find(Re=>Re.id===parseInt(ne));if(!we){i("Please select a client to upload for.","error");return}if(!we.address){i(`Client ${we.name} does not have a default address.`,"error");return}const Xe=W.filter((Re,Qe)=>{var gt;return(gt=le[Qe])==null?void 0:gt.isValid});if(Xe.length===0){i("No valid shipments to upload.","error");return}Xe.forEach(Re=>{const Qe=we.flatRateFee||0,gt=o(Qe,Re.priority,we);let pt;Re.paymentMethod===Mn.TRANSFER?pt=0:pt=(Re.packageValue||0)+gt,n({...Re,isLargeOrder:!1,price:pt,clientFlatRateFee:gt,clientId:we.id,clientName:we.name,fromAddress:we.address})}),i(`${Xe.length} shipments uploaded successfully for ${we.name}!`,"success"),te(null),fe([]),B([])},st=()=>{const we=["Recipient Name","Recipient Phone","Recipient Street","City","Zone","Address Details","Package Description","Payment Method","Priority","Package Value"],Xe=(e==null?void 0:e.flatRateFee)||75,Re=e?o(Xe,nn.STANDARD,e):Xe,Qe=e?o(Xe,nn.URGENT,e):Xe*1.5,gt=e?o(Xe,nn.EXPRESS,e):Xe*2,pt=Object.values(Mn).filter(At=>At!==Mn.WALLET).join(" or "),qe=[we,["Enter recipient full name","Enter phone with country code","Enter full street address","Cairo or Giza","Select from available zones","Additional address details","Describe package contents",pt,`Standard (${Re.toFixed(2)} EGP), Urgent (${Qe.toFixed(2)} EGP), Express (${gt.toFixed(2)} EGP)`,"Package value in EGP (optional for Transfer)"],["Ahmed Mohamed","01012345678","123 Tahrir St","Cairo","Nasr City","Apartment 5, Floor 3","Electronics - Mobile Phone","COD","Standard","500.00"]],ct=Bp.unparse(qe),St=new Blob([ct],{type:"text/csv;charset=utf-8;"}),Ot=document.createElement("a");Ot.href=URL.createObjectURL(St),Ot.setAttribute("download","bulk_upload_template.csv"),document.body.appendChild(Ot),Ot.click(),document.body.removeChild(Ot)},Fe=le.length>0&&le.every(we=>we.isValid);return s.jsxs("div",{className:"card max-w-6xl mx-auto",children:[s.jsx("h2",{className:"text-2xl font-bold text-foreground mb-6",children:"Create Shipments"}),s.jsx("div",{className:"border-b border-border mb-6",children:s.jsxs("nav",{className:"-mb-px flex space-x-6",children:[s.jsx("button",{onClick:()=>p("single"),className:`py-3 px-1 border-b-2 font-semibold text-sm ${m==="single"?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground hover:border-border"}`,children:"Create Single Shipment"}),s.jsx("button",{onClick:()=>p("bulk"),className:`py-3 px-1 border-b-2 font-semibold text-sm ${m==="bulk"?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground hover:border-border"}`,children:"Bulk Upload Shipments"})]})}),m==="single"&&s.jsxs("form",{onSubmit:Pe,className:"space-y-6",children:[x&&s.jsxs("div",{className:"p-4 bg-secondary rounded-lg",children:[s.jsx("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Create Shipment For Client"}),s.jsxs("select",{value:N,onChange:we=>j(we.target.value),className:"w-full px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary",required:!0,children:[s.jsx("option",{value:"",disabled:!0,children:"Select a client..."}),S.map(we=>s.jsx("option",{value:we.id,children:we.name},we.id))]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Recipient Name"}),s.jsx("input",{type:"text",value:v,onChange:we=>O(we.target.value),className:"w-full px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Recipient Phone"}),s.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:E,onChange:we=>P(we.target.value.replace(/[^0-9]/g,"")),className:"w-full px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary",placeholder:"01xxxxxxxxx",required:!0}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Example for Egyptian number: 01012345678"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Recipient Street Address"}),s.jsx("input",{type:"text",value:C.street,onChange:we=>_(Xe=>({...Xe,street:we.target.value})),className:"w-full px-4 py-2 border border-border rounded-lg",required:!0})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Zone"}),s.jsxs("select",{value:C.zone,onChange:Te,className:"w-full px-4 py-2 border border-border rounded-lg",children:[s.jsx("optgroup",{label:"Cairo",children:Zr.GreaterCairo.Cairo.map(we=>s.jsx("option",{value:we,children:we},we))}),s.jsx("optgroup",{label:"Giza",children:Zr.GreaterCairo.Giza.map(we=>s.jsx("option",{value:we,children:we},we))}),s.jsx("optgroup",{label:"Alexandria",children:Zr.Alexandria.map(we=>s.jsx("option",{value:we,children:we},we))}),s.jsx("optgroup",{label:"Other",children:Zr.Other.map(we=>s.jsx("option",{value:we,children:we},we))})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Address Details (Apt, Floor, etc.)"}),s.jsx("input",{type:"text",value:C.details,onChange:we=>_(Xe=>({...Xe,details:we.target.value})),className:"w-full px-4 py-2 border border-border rounded-lg"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Package Description"}),s.jsx("textarea",{value:D,onChange:we=>U(we.target.value),className:"w-full px-4 py-2 border border-border rounded-lg",rows:2,required:!0})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Payment Method"}),s.jsxs("select",{value:Y,onChange:we=>ae(we.target.value),className:"w-full px-4 py-2 border border-border rounded-lg",children:[s.jsx("option",{value:Mn.COD,children:"Cash on Delivery (COD)"}),s.jsx("option",{value:Mn.TRANSFER,children:"InstaPay (Pre-paid)"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Priority"}),s.jsx("select",{value:F,onChange:we=>L(we.target.value),className:"w-full px-4 py-2 border border-border rounded-lg",children:Object.values(nn).map(we=>s.jsx("option",{value:we,children:we},we))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Package Value (EGP)"}),s.jsx("input",{type:"number",step:"0.01",value:M,onChange:we=>z(we.target.value),disabled:Y===Mn.TRANSFER,className:"w-full px-4 py-2 border border-border rounded-lg",required:!0})]})]}),Y===Mn.TRANSFER&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Amount Received from Client"}),s.jsx("input",{type:"number",step:"0.01",value:k,onChange:we=>R(we.target.value),className:"w-full px-4 py-2 border border-border rounded-lg",placeholder:"e.g., 500",required:!0}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"The amount you already collected."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Amount to Collect from Recipient"}),s.jsx("input",{type:"number",step:"0.01",value:re,onChange:we=>ee(we.target.value),className:"w-full px-4 py-2 border border-border rounded-lg",placeholder:"e.g., 200",required:!0}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Amount courier will collect (0 if none)."})]})]}),s.jsxs("div",{className:"p-4 bg-secondary rounded-lg space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Base Shipping Fee:"}),s.jsxs("span",{className:"font-semibold text-foreground",children:[he.toFixed(2)," EGP"]})]}),je>0&&s.jsxs("div",{className:"flex justify-between text-sm text-green-600 dark:text-green-400",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Partner Discount "}),s.jsxs("span",{className:"font-semibold",children:["(",q==null?void 0:q.partnerTier," - ",ue,"%)"]})]}),s.jsxs("span",{className:"font-semibold",children:["- ",je.toFixed(2)," EGP"]})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground font-bold",children:"Final Shipping Fee:"}),s.jsxs("span",{className:"font-bold text-foreground",children:[Ae.toFixed(2)," EGP"]})]}),s.jsxs("div",{className:"flex justify-between text-sm pt-2 border-t border-border",children:[s.jsx("span",{className:"text-muted-foreground",children:"Package Value:"}),s.jsxs("span",{className:"font-semibold text-foreground",children:[Q.toFixed(2)," EGP"]})]}),s.jsxs("div",{className:"flex justify-between text-lg font-bold border-t border-border pt-2 mt-2",children:[s.jsx("span",{className:"text-foreground",children:"Total to Collect (COD):"}),s.jsxs("span",{className:"text-primary",children:[ve.toFixed(2)," EGP"]})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsxs("button",{type:"submit",className:"flex items-center gap-2 px-6 py-3 bg-primary text-primary-foreground font-bold rounded-lg hover:bg-primary/90 transition shadow-lg",children:[s.jsx(tl,{}),"Create Shipment"]})})]}),m==="bulk"&&s.jsxs("div",{className:"space-y-6",children:[x&&s.jsxs("div",{className:"p-4 bg-secondary rounded-lg",children:[s.jsx("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Upload Shipments For Client"}),s.jsxs("select",{value:ne,onChange:we=>K(we.target.value),className:"w-full px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary",required:!0,children:[s.jsx("option",{value:"",disabled:!0,children:"Select a client..."}),S.map(we=>s.jsx("option",{value:we.id,children:we.name},we.id))]})]}),s.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4 p-4 border-2 border-dashed border-border rounded-lg",children:[s.jsx("input",{type:"file",accept:".csv",onChange:He,className:"text-sm text-foreground file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primary/10 file:text-primary hover:file:bg-primary/20"}),s.jsxs("button",{onClick:st,className:"w-full md:w-auto flex items-center justify-center gap-2 px-4 py-2 bg-secondary text-secondary-foreground font-semibold rounded-lg hover:bg-accent transition text-sm",children:[s.jsx(iy,{className:"w-4 h-4"})," Download Template"]}),s.jsxs("button",{onClick:ut,disabled:!G,className:"w-full md:w-auto flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition text-sm disabled:bg-muted",children:[s.jsx(ay,{className:"w-4 h-4"})," Verify File"]})]}),le.length>0&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"p-4 bg-secondary rounded-lg",children:[s.jsx("h3",{className:"font-bold text-lg",children:"Verification Results"}),s.jsxs("p",{children:[W.length," rows found. ",W.length-le.filter(we=>!we.isValid).length," valid shipments."]})]}),s.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2",children:W.map((we,Xe)=>s.jsx("div",{className:`p-3 rounded-lg border ${le[Xe].isValid?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[le[Xe].isValid?s.jsx(ao,{className:"w-5 h-5 text-green-600 mt-0.5"}):s.jsx(su,{className:"w-5 h-5 text-red-600 mt-0.5"}),s.jsxs("div",{children:[s.jsxs("p",{className:"font-semibold",children:[we.recipientName," - ",we.toAddress.zone]}),!le[Xe].isValid&&s.jsx("ul",{className:"list-disc list-inside text-sm text-red-700 mt-1",children:le[Xe].errors.map((Re,Qe)=>s.jsx("li",{children:Re},Qe))})]})]})},Xe))}),s.jsx("div",{className:"flex justify-end",children:s.jsxs("button",{onClick:me,disabled:!Fe,className:"flex items-center gap-2 px-6 py-3 bg-primary text-primary-foreground font-bold rounded-lg hover:bg-primary/90 transition shadow-lg disabled:bg-muted",children:[s.jsx(tl,{}),"Upload Valid Shipments"]})})]})]})]})},fr=({isOpen:e,onClose:t,title:n,children:i,size:o="2xl",wrapperClassName:l=""})=>e?s.jsx("div",{className:`fixed inset-0 bg-black/60 z-50 flex justify-center items-center p-4 ${l}`,children:s.jsxs("div",{className:`card w-full max-w-${o} max-h-[90vh] flex flex-col p-0`,children:[s.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-border modal-header",children:[s.jsx("h3",{className:"text-xl font-bold text-foreground",children:n}),s.jsx("button",{onClick:t,className:"text-muted-foreground hover:text-foreground transition",children:s.jsx(su,{className:"w-7 h-7"})})]}),s.jsx("div",{className:"p-6 overflow-y-auto",children:i})]})}):null;function e6({setLabelShipment:e}){const{shipments:t,users:n,assignShipmentToCourier:i,canCourierReceiveAssignment:o,addToast:l,inventoryItems:f,updateShipmentPackaging:m,getCourierName:p,autoAssignShipments:x,bulkPackageShipments:S,bulkAssignShipments:N,updateShipmentStatus:j,bulkUpdateShipmentStatus:v,revertShipmentStatus:O}=jn(),[E,P]=pe.useState("packaging"),[C,_]=pe.useState(""),[D,U]=pe.useState("all"),[Y,ae]=pe.useState(""),[F,L]=pe.useState("all"),[M,z]=pe.useState(!1),[k,R]=pe.useState(!1),[re,ee]=pe.useState("single"),[ne,K]=pe.useState(null),[G,te]=pe.useState(""),[W,fe]=pe.useState(null),[le,B]=pe.useState([]),[q,Q]=pe.useState([]),[he,ue]=pe.useState([]),[je,Ae]=pe.useState(""),[ve,Pe]=pe.useState({}),Te=n.filter(Ne=>(Ne.roles||[]).includes(Vt.COURIER)),Ye=f.filter(Ne=>Ne.name.toLowerCase().includes("box")),He=f.find(Ne=>Ne.name.toLowerCase().includes("label")),ut=f.filter(Ne=>!Ne.name.toLowerCase().includes("box")&&!Ne.name.toLowerCase().includes("label")&&!Ne.name.toLowerCase().includes("bubble")),Me=pe.useMemo(()=>{const Ne=new Set;return Object.values(Zr).forEach(ft=>{Array.isArray(ft)?ft.forEach(xt=>Ne.add(xt)):Object.values(ft).forEach(xt=>xt.forEach(Pt=>Ne.add(Pt)))}),Array.from(Ne).sort()},[]),me=t.filter(Ne=>Ne.status===ht.WAITING_FOR_PACKAGING).filter(Ne=>!C||Ne.creationDate.startsWith(C)).filter(Ne=>!Y.trim()||Ne.id.toLowerCase().includes(Y.trim().toLowerCase())),st=t.filter(Ne=>Ne.status===ht.PACKAGED_AND_WAITING_FOR_ASSIGNMENT).filter(Ne=>!C||Ne.creationDate.startsWith(C)).filter(Ne=>D==="all"||Ne.toAddress.zone===D).filter(Ne=>!Y.trim()||Ne.id.toLowerCase().includes(Y.trim().toLowerCase())),Fe=t.filter(Ne=>Ne.status===ht.ASSIGNED_TO_COURIER).filter(Ne=>!C||Ne.creationDate.startsWith(C)).filter(Ne=>!Y.trim()||Ne.id.toLowerCase().includes(Y.trim().toLowerCase())).filter(Ne=>F==="all"||Ne.courierId===parseInt(F)),we=(Ne,ft)=>{if(ee(Ne),K(ft||null),te(""),Ne==="bulk"){const xt={};f.forEach(Pt=>{Pt.id.startsWith("inv_")&&(xt[Pt.id]=0)}),Pe(xt)}else fe(null);R(!0)},Xe=()=>{const Ne=Object.entries(ve).filter(([xt])=>xt.startsWith("inv_box_")).reduce((xt,[,Pt])=>xt+Number(Pt),0);if(Ne!==le.length){l(`Box count (${Ne}) must match selected shipments (${le.length}).`,"error");return}const ft={...ve};if(He)ft[He.id]=(ft[He.id]||0)+le.length;else{l("Shipping Label item not found in inventory.","error");return}S(le,ft,G),B([]),R(!1)},Re=()=>{if(re==="bulk"){Xe();return}const Ne=[];if(He)Ne.push({inventoryItemId:He.id,itemName:He.name,quantityUsed:1});else{l("Shipping Label is out of stock.","error");return}if(W){const ft=Ye.find(xt=>xt.id===W);ft&&Ne.push({inventoryItemId:ft.id,itemName:ft.name,quantityUsed:1})}else{l("Please select a box size.","error");return}ne&&m(ne.id,Ne,G),R(!1)},Qe=async(Ne,ft)=>{if(!ft){l("Please select a courier","error");return}await i(Ne,parseInt(ft))},gt=async()=>{z(!0),await x(),z(!1)},pt=()=>{if(q.length===0||!je){l("Please select shipments and a courier.","error");return}const Ne=parseInt(je);if(!o(Ne)){l("Selected courier is restricted.","error");return}N(q,Ne),Q([]),Ae("")},qe=(Ne,ft)=>{v(Ne,ft),ft===ht.OUT_FOR_DELIVERY&&ue([])},ct=(Ne,ft)=>{({package:B,assign:Q,delivery:ue})[ft](Pt=>Pt.includes(Ne)?Pt.filter(Ft=>Ft!==Ne):[...Pt,Ne])},St=Ne=>{const ft={package:me,assign:st,delivery:Fe},xt={package:le,assign:q,delivery:he},Pt={package:B,assign:Q,delivery:ue}[Ne];Pt(xt[Ne].length===ft[Ne].length?[]:ft[Ne].map(Ft=>Ft.id))},Ot=(Ne,ft)=>{Pe(xt=>({...xt,[Ne]:Math.max(0,ft)}))},At=()=>{let Ne=[],ft="Shipment_Report",xt=["ID","Client","Recipient","Phone","Zone","Status","Creation Date"];switch(E){case"packaging":Ne=me,ft="Waiting_for_Packaging";break;case"assignment":Ne=st,ft="Waiting_for_Assignment";break;case"delivery":Ne=Fe,ft="Waiting_for_Out_for_Delivery",xt.push("Courier");break}if(Ne.length===0){l("No data to export for the current view.","info");return}const Pt=Ne.map(Ft=>{const Ai=[Ft.id,Ft.clientName,Ft.recipientName,Ft.recipientPhone,Ft.toAddress.zone,Ft.status,new Date(Ft.creationDate).toLocaleString()];return E!=="packaging"&&Ai.push(p(Ft.courierId)),Ai});Fi(xt,Pt,ft)},qt=pe.useMemo(()=>Object.entries(ve).filter(([Ne])=>Ne.startsWith("inv_box_")).reduce((Ne,[,ft])=>Ne+Number(ft),0),[ve]),mt=({label:Ne,count:ft,isActive:xt,onClick:Pt})=>s.jsxs("button",{onClick:Pt,className:`flex items-center gap-2 py-3 px-4 font-semibold text-sm border-b-2 transition-colors ${xt?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground hover:border-border"}`,children:[Ne,s.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-bold ${xt?"bg-primary text-white":"bg-secondary text-secondary-foreground"}`,children:ft})]}),yn=({shipment:Ne,children:ft,onSelect:xt,isSelected:Pt,showCheckbox:Ft=!0})=>s.jsxs("div",{className:"bg-secondary border border-border rounded-lg p-4 flex flex-col justify-between",children:[s.jsxs("div",{className:"flex gap-3",children:[Ft&&s.jsx("input",{type:"checkbox",checked:Pt,onChange:xt,className:"mt-1 h-4 w-4 rounded"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-mono text-sm text-muted-foreground",children:Ne.id}),s.jsx("p",{className:"font-semibold text-foreground",children:Ne.recipientName}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[Ne.toAddress.street,", ",Ne.toAddress.zone]}),Ne.courierId&&s.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Courier: ",s.jsx("span",{className:"font-semibold",children:p(Ne.courierId)})]})]})]}),s.jsx("div",{className:"mt-4",children:ft})]}),Tt=({count:Ne,children:ft})=>s.jsxs("div",{className:"sticky top-[81px] z-10 bg-primary/10 border border-primary/20 p-3 rounded-lg shadow flex flex-col sm:flex-row items-center justify-between gap-3",children:[s.jsxs("div",{className:"font-semibold text-primary",children:[Ne," shipments selected"]}),ft]});return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Packaging & Assignment"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Prepare shipments for delivery and assign them to couriers."})]}),s.jsxs("div",{className:"card",children:[s.jsxs("div",{className:"p-4 border-b border-border flex flex-col md:flex-row justify-between items-center gap-4 flex-wrap",children:[s.jsxs("div",{className:"flex border-b border-border -m-4 mb-0 overflow-x-auto",children:[s.jsx(mt,{label:"Waiting for Packaging",count:me.length,isActive:E==="packaging",onClick:()=>P("packaging")}),s.jsx(mt,{label:"Waiting for Assignment",count:st.length,isActive:E==="assignment",onClick:()=>P("assignment")}),s.jsx(mt,{label:"Waiting for Out for Delivery",count:Fe.length,isActive:E==="delivery",onClick:()=>P("delivery")})]}),s.jsxs("div",{className:"flex items-center gap-2 w-full md:w-auto flex-wrap justify-end",children:[s.jsx("input",{type:"text",placeholder:"Search by Shipment ID...",value:Y,onChange:Ne=>ae(Ne.target.value),className:"w-full sm:w-auto px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background"}),E==="assignment"&&s.jsxs("select",{value:D,onChange:Ne=>U(Ne.target.value),className:"w-full sm:w-auto px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background",children:[s.jsx("option",{value:"all",children:"All Zones"}),Me.map(Ne=>s.jsx("option",{value:Ne,children:Ne},Ne))]}),E==="delivery"&&s.jsxs("select",{value:F,onChange:Ne=>L(Ne.target.value),className:"w-full sm:w-auto px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background",children:[s.jsx("option",{value:"all",children:"All Couriers"}),Te.map(Ne=>s.jsx("option",{value:Ne.id,children:Ne.name},Ne.id))]}),s.jsx("input",{type:"date",value:C,onChange:Ne=>_(Ne.target.value),className:"w-full sm:w-auto px-4 py-2 border border-border rounded-lg","aria-label":"Filter by creation date"}),C&&s.jsx("button",{onClick:()=>_(""),className:"px-4 py-2 text-sm font-semibold text-muted-foreground rounded-lg hover:bg-accent","aria-label":"Clear date filter",children:"Clear"}),s.jsxs("button",{onClick:At,className:"w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition",children:[s.jsx(ca,{className:"w-5 h-5"}),"Export CSV"]})]})]}),E==="packaging"&&s.jsxs("div",{className:"p-4 space-y-4",children:[le.length>0&&s.jsx(Tt,{count:le.length,children:s.jsxs("button",{onClick:()=>we("bulk"),className:"w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-2 bg-primary text-primary-foreground font-semibold rounded-lg hover:bg-primary/90 transition",children:[s.jsx(Yl,{className:"w-5 h-5"})," Package Selected"]})}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"checkbox",onChange:()=>St("package"),checked:le.length===me.length&&me.length>0,className:"h-4 w-4 rounded"}),s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Select all"})]}),me.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:me.map(Ne=>s.jsx(yn,{shipment:Ne,onSelect:()=>ct(Ne.id,"package"),isSelected:le.includes(Ne.id),children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{type:"button",onClick:()=>e(Ne),className:"p-3 bg-secondary text-secondary-foreground font-semibold rounded-lg hover:bg-accent transition",title:"Print Label",children:s.jsx(Gu,{className:"w-5 h-5"})}),s.jsxs("button",{onClick:()=>we("single",Ne),className:"flex-grow w-full flex items-center justify-center gap-2 px-4 py-2 bg-primary text-primary-foreground font-semibold rounded-lg hover:bg-primary/90 transition",children:[s.jsx(Yl,{className:"w-5 h-5"})," Package Shipment"]})]})},Ne.id))}):s.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"No shipments are waiting for packaging."})]}),E==="assignment"&&s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 p-4 rounded-lg flex flex-col sm:flex-row justify-between items-center gap-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-blue-800 dark:text-blue-200",children:"Auto-Assignment"}),s.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[st.length," shipments are packaged and ready to be assigned."]})]}),s.jsxs("button",{onClick:gt,disabled:M||st.length===0,className:"w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 disabled:bg-muted",children:[s.jsx(qi,{className:"w-5 h-5"})," ",M?"Assigning...":"Auto-Assign All"]})]}),q.length>0&&s.jsx(Tt,{count:q.length,children:s.jsxs("div",{className:"flex w-full sm:w-auto gap-2",children:[s.jsxs("select",{value:je,onChange:Ne=>Ae(Ne.target.value),className:"flex-grow w-full px-3 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background",children:[s.jsx("option",{value:"",disabled:!0,children:"Select courier..."}),Te.filter(Ne=>o(Ne.id)).map(Ne=>s.jsx("option",{value:Ne.id,children:Ne.name},Ne.id))]}),s.jsx("button",{onClick:pt,className:"flex-shrink-0 flex items-center justify-center gap-2 px-4 py-2 bg-primary text-primary-foreground font-semibold rounded-lg hover:bg-primary/90",children:"Assign"})]})}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"checkbox",onChange:()=>St("assign"),checked:q.length===st.length&&st.length>0,className:"h-4 w-4 rounded"}),s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Select all"})]}),st.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:st.map(Ne=>s.jsx(yn,{shipment:Ne,onSelect:()=>ct(Ne.id,"assign"),isSelected:q.includes(Ne.id),children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{type:"button",onClick:()=>e(Ne),className:"p-3 bg-secondary text-secondary-foreground font-semibold rounded-lg hover:bg-accent transition",title:"Print Label",children:s.jsx(Gu,{className:"w-5 h-5"})}),s.jsxs("select",{defaultValue:"",onChange:ft=>Qe(Ne.id,ft.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background",children:[s.jsx("option",{value:"",disabled:!0,children:"Assign to courier..."}),Te.filter(ft=>(ft.zones||[]).includes(Ne.toAddress.zone)&&o(ft.id)).map(ft=>s.jsx("option",{value:ft.id,children:ft.name},ft.id))]}),s.jsx("button",{onClick:()=>O(Ne.id),className:"p-3 bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300 font-semibold rounded-lg hover:bg-yellow-200 dark:hover:bg-yellow-900/50 transition",title:"Revert to Waiting for Packaging",children:s.jsx(dh,{className:"w-5 h-5 transform -scale-x-100"})})]})},Ne.id))}):s.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"No shipments are waiting for assignment."})]}),E==="delivery"&&s.jsxs("div",{className:"p-4 space-y-4",children:[he.length>0&&s.jsx(Tt,{count:he.length,children:s.jsx("button",{onClick:()=>qe(he,ht.OUT_FOR_DELIVERY),className:"w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-2 bg-cyan-600 text-white font-semibold rounded-lg hover:bg-cyan-700 transition",children:"Mark Selected as Out for Delivery"})}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"checkbox",onChange:()=>St("delivery"),checked:he.length===Fe.length&&Fe.length>0,className:"h-4 w-4 rounded"}),s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Select all"})]}),Fe.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Fe.map(Ne=>s.jsx(yn,{shipment:Ne,onSelect:()=>ct(Ne.id,"delivery"),isSelected:he.includes(Ne.id),children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{type:"button",onClick:()=>e(Ne),className:"p-3 bg-secondary text-secondary-foreground font-semibold rounded-lg hover:bg-accent transition",title:"Print Label",children:s.jsx(Gu,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>j(Ne.id,ht.OUT_FOR_DELIVERY),className:"flex-grow w-full flex items-center justify-center gap-2 px-4 py-2 bg-cyan-600 text-white font-semibold rounded-lg hover:bg-cyan-700 transition",children:"Mark Out for Delivery"}),s.jsx("button",{onClick:()=>O(Ne.id),className:"p-3 bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300 font-semibold rounded-lg hover:bg-yellow-200 dark:hover:bg-yellow-900/50 transition",title:"Revert to Waiting for Assignment",children:s.jsx(dh,{className:"w-5 h-5 transform -scale-x-100"})})]})},Ne.id))}):s.jsx("div",{className:"text-center py-12 text-muted-foreground",children:'No shipments are waiting to be marked as "Out for Delivery".'})]})]}),s.jsxs(fr,{isOpen:k,onClose:()=>R(!1),title:re==="bulk"?"Package Selected Shipments (Mixed Batch)":"Package Shipment",children:[re==="single"?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Shipping Label"}),s.jsx("input",{type:"text",value:"1 x Shipping Label (Required)",disabled:!0,className:"w-full p-2 bg-secondary border border-border rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Box Size"}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:Ye.map(Ne=>s.jsxs("button",{type:"button",onClick:()=>fe(Ne.id),className:`p-3 border-2 rounded-lg text-center ${W===Ne.id?"border-primary bg-primary/10":"border-border hover:border-primary/50"}`,children:[s.jsx("span",{className:"font-semibold text-foreground",children:Ne.name.replace(" Cardboard Box","")}),s.jsxs("span",{className:"text-xs block text-muted-foreground",children:[Ne.quantity," in stock"]})]},Ne.id))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Packaging Notes (Optional)"}),s.jsx("textarea",{value:G,onChange:Ne=>te(Ne.target.value),className:"w-full p-2 border border-border rounded-lg bg-background",rows:3})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Enter the total quantity of each material used for the ",s.jsx("strong",{children:le.length})," selected shipments. Labels will be added automatically."]}),s.jsx("div",{className:"max-h-64 overflow-y-auto space-y-3 p-3 bg-secondary border rounded-lg",children:[...Ye,...ut].map(Ne=>s.jsxs("div",{className:"grid grid-cols-3 items-center gap-4",children:[s.jsx("label",{htmlFor:Ne.id,className:"font-medium text-foreground text-sm",children:Ne.name}),s.jsx("input",{id:Ne.id,type:"number",value:ve[Ne.id]||0,onChange:ft=>Ot(Ne.id,parseInt(ft.target.value)),className:"w-full p-2 border border-border rounded-md bg-background",min:"0"}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:["In Stock: ",Ne.quantity]})]},Ne.id))}),s.jsxs("div",{className:`p-3 rounded-lg text-sm font-semibold text-center ${qt===le.length?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"}`,children:["Total Boxes Entered: ",qt," / ",le.length," Shipments Selected"]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Packaging Notes (Optional)"}),s.jsx("textarea",{value:G,onChange:Ne=>te(Ne.target.value),className:"w-full p-2 border border-border rounded-lg bg-background",rows:3,placeholder:"These notes will be applied to all selected shipments."})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t mt-4",children:[s.jsx("button",{onClick:()=>R(!1),className:"px-4 py-2 bg-secondary text-secondary-foreground rounded-lg hover:bg-accent font-semibold",children:"Cancel"}),s.jsx("button",{onClick:Re,disabled:re==="bulk"&&qt!==le.length,className:"px-4 py-2 bg-primary text-primary-foreground font-semibold rounded-lg hover:bg-primary/90 disabled:bg-muted",children:"Confirm Packaging"})]})]})]})}var Et;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Et||(Et={}));var Up=new Map([[Et.QR_CODE,"QR_CODE"],[Et.AZTEC,"AZTEC"],[Et.CODABAR,"CODABAR"],[Et.CODE_39,"CODE_39"],[Et.CODE_93,"CODE_93"],[Et.CODE_128,"CODE_128"],[Et.DATA_MATRIX,"DATA_MATRIX"],[Et.MAXICODE,"MAXICODE"],[Et.ITF,"ITF"],[Et.EAN_13,"EAN_13"],[Et.EAN_8,"EAN_8"],[Et.PDF_417,"PDF_417"],[Et.RSS_14,"RSS_14"],[Et.RSS_EXPANDED,"RSS_EXPANDED"],[Et.UPC_A,"UPC_A"],[Et.UPC_E,"UPC_E"],[Et.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),zp;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(zp||(zp={}));function t6(e){return Object.values(Et).includes(e)}var il;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(il||(il={}));var as=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[il.SCAN_TYPE_CAMERA,il.SCAN_TYPE_FILE],e}(),Iy=function(){function e(t,n){this.format=t,this.formatName=n}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!Up.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,Up.get(t))},e}(),Hp=function(){function e(){}return e.createFromText=function(t){var n={text:t};return{decodedText:t,result:n}},e.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},e}(),s2;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(s2||(s2={}));var Dy=function(){function e(){}return e.createFrom=function(t){return{errorMessage:t,type:s2.UNKWOWN_ERROR}},e}(),Ly=function(){function e(t){this.verbose=t}return e.prototype.log=function(t){this.verbose&&console.log(t)},e.prototype.warn=function(t){this.verbose&&console.warn(t)},e.prototype.logError=function(t,n){(this.verbose||n===!0)&&console.error(t)},e.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},e}();function ys(e){return typeof e>"u"||e===null}function n6(e,t,n){return e>n?n:e<t?t:e}var Dc=function(){function e(){}return e.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},e.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),zn=function(){function e(){}return e.scanningStatus=function(){return"Scanning"},e.idleStatus=function(){return"Idle"},e.errorStatus=function(){return"Error"},e.permissionStatus=function(){return"Permission"},e.noCameraFoundErrorStatus=function(){return"No Cameras"},e.lastMatch=function(t){return"Last Match: ".concat(t)},e.codeScannerTitle=function(){return"Code Scanner"},e.cameraPermissionTitle=function(){return"Request Camera Permissions"},e.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},e.noCameraFound=function(){return"No camera found"},e.scanButtonStopScanningText=function(){return"Stop Scanning"},e.scanButtonStartScanningText=function(){return"Start Scanning"},e.torchOnButton=function(){return"Switch On Torch"},e.torchOffButton=function(){return"Switch Off Torch"},e.torchOnFailedMessage=function(){return"Failed to turn on torch"},e.torchOffFailedMessage=function(){return"Failed to turn off torch"},e.scanButtonScanningStarting=function(){return"Launching Camera..."},e.textIfCameraScanSelected=function(){return"Scan an Image File"},e.textIfFileScanSelected=function(){return"Scan using camera directly"},e.selectCamera=function(){return"Select Camera"},e.fileSelectionChooseImage=function(){return"Choose Image"},e.fileSelectionChooseAnother=function(){return"Choose Another"},e.fileSelectionNoImageSelected=function(){return"No image choosen"},e.anonymousCameraPrefix=function(){return"Anonymous Camera"},e.dragAndDropMessage=function(){return"Or drop an image to scan"},e.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},e.zoom=function(){return"zoom"},e.loadingImage=function(){return"Loading image..."},e.cameraScanAltText=function(){return"Camera based scan"},e.fileScanAltText=function(){return"Fule based scan"},e}(),Vp=function(){function e(){}return e.poweredBy=function(){return"Powered by "},e.reportIssues=function(){return"Report issues"},e}(),Oy=function(){function e(){}return e.isMediaStreamConstraintsValid=function(t,n){if(typeof t!="object"){var i=typeof t;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(i,"."),!0),!1}for(var o=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],l=new Set(o),f=Object.keys(t),m=0,p=f;m<p.length;m++){var x=p[m];if(l.has(x))return n.logError("".concat(x," is not supported videoConstaints."),!0),!1}return!0},e}(),o2={exports:{}};(function(e,t){(function(n,i){i(t)})(qs,function(n){function i(Z){return Z==null}var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Z,r){Z.__proto__=r}||function(Z,r){for(var a in r)r.hasOwnProperty(a)&&(Z[a]=r[a])};function l(Z,r){o(Z,r);function a(){this.constructor=Z}Z.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}function f(Z,r){var a=Object.setPrototypeOf;a?a(Z,r):Z.__proto__=r}function m(Z,r){r===void 0&&(r=Z.constructor);var a=Error.captureStackTrace;a&&a(Z,r)}var p=function(Z){l(r,Z);function r(a){var c=this.constructor,u=Z.call(this,a)||this;return Object.defineProperty(u,"name",{value:c.name,enumerable:!1}),f(u,c.prototype),m(u),u}return r}(Error);class x extends p{constructor(r=void 0){super(r),this.message=r}getKind(){return this.constructor.kind}}x.kind="Exception";class S extends x{}S.kind="ArgumentException";class N extends x{}N.kind="IllegalArgumentException";class j{constructor(r){if(this.binarizer=r,r===null)throw new N("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(r,a){return this.binarizer.getBlackRow(r,a)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(r,a,c,u){const d=this.binarizer.getLuminanceSource().crop(r,a,c,u);return new j(this.binarizer.createBinarizer(d))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new j(this.binarizer.createBinarizer(r))}rotateCounterClockwise45(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new j(this.binarizer.createBinarizer(r))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class v extends x{static getChecksumInstance(){return new v}}v.kind="ChecksumException";class O{constructor(r){this.source=r}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class E{static arraycopy(r,a,c,u,d){for(;d--;)c[u++]=r[a++]}static currentTimeMillis(){return Date.now()}}class P extends x{}P.kind="IndexOutOfBoundsException";class C extends P{constructor(r=void 0,a=void 0){super(a),this.index=r,this.message=a}}C.kind="ArrayIndexOutOfBoundsException";class _{static fill(r,a){for(let c=0,u=r.length;c<u;c++)r[c]=a}static fillWithin(r,a,c,u){_.rangeCheck(r.length,a,c);for(let d=a;d<c;d++)r[d]=u}static rangeCheck(r,a,c){if(a>c)throw new N("fromIndex("+a+") > toIndex("+c+")");if(a<0)throw new C(a);if(c>r)throw new C(c)}static asList(...r){return r}static create(r,a,c){return Array.from({length:r}).map(d=>Array.from({length:a}).fill(c))}static createInt32Array(r,a,c){return Array.from({length:r}).map(d=>Int32Array.from({length:a}).fill(c))}static equals(r,a){if(!r||!a||!r.length||!a.length||r.length!==a.length)return!1;for(let c=0,u=r.length;c<u;c++)if(r[c]!==a[c])return!1;return!0}static hashCode(r){if(r===null)return 0;let a=1;for(const c of r)a=31*a+c;return a}static fillUint8Array(r,a){for(let c=0;c!==r.length;c++)r[c]=a}static copyOf(r,a){return r.slice(0,a)}static copyOfUint8Array(r,a){if(r.length<=a){const c=new Uint8Array(a);return c.set(r),c}return r.slice(0,a)}static copyOfRange(r,a,c){const u=c-a,d=new Int32Array(u);return E.arraycopy(r,a,d,0,u),d}static binarySearch(r,a,c){c===void 0&&(c=_.numberComparator);let u=0,d=r.length-1;for(;u<=d;){const h=d+u>>1,b=c(a,r[h]);if(b>0)u=h+1;else if(b<0)d=h-1;else return h}return-u-1}static numberComparator(r,a){return r-a}}class D{static numberOfTrailingZeros(r){let a;if(r===0)return 32;let c=31;return a=r<<16,a!==0&&(c-=16,r=a),a=r<<8,a!==0&&(c-=8,r=a),a=r<<4,a!==0&&(c-=4,r=a),a=r<<2,a!==0&&(c-=2,r=a),c-(r<<1>>>31)}static numberOfLeadingZeros(r){if(r===0)return 32;let a=1;return r>>>16||(a+=16,r<<=16),r>>>24||(a+=8,r<<=8),r>>>28||(a+=4,r<<=4),r>>>30||(a+=2,r<<=2),a-=r>>>31,a}static toHexString(r){return r.toString(16)}static toBinaryString(r){return String(parseInt(String(r),2))}static bitCount(r){return r=r-(r>>>1&1431655765),r=(r&858993459)+(r>>>2&858993459),r=r+(r>>>4)&252645135,r=r+(r>>>8),r=r+(r>>>16),r&63}static truncDivision(r,a){return Math.trunc(r/a)}static parseInt(r,a=void 0){return parseInt(r,a)}}D.MIN_VALUE_32_BITS=-2147483648,D.MAX_VALUE=Number.MAX_SAFE_INTEGER;class U{constructor(r,a){r===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=r,a==null?this.bits=U.makeArray(r):this.bits=a)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(r){if(r>this.bits.length*32){const a=U.makeArray(r);E.arraycopy(this.bits,0,a,0,this.bits.length),this.bits=a}}get(r){return(this.bits[Math.floor(r/32)]&1<<(r&31))!==0}set(r){this.bits[Math.floor(r/32)]|=1<<(r&31)}flip(r){this.bits[Math.floor(r/32)]^=1<<(r&31)}getNextSet(r){const a=this.size;if(r>=a)return a;const c=this.bits;let u=Math.floor(r/32),d=c[u];d&=~((1<<(r&31))-1);const h=c.length;for(;d===0;){if(++u===h)return a;d=c[u]}const b=u*32+D.numberOfTrailingZeros(d);return b>a?a:b}getNextUnset(r){const a=this.size;if(r>=a)return a;const c=this.bits;let u=Math.floor(r/32),d=~c[u];d&=~((1<<(r&31))-1);const h=c.length;for(;d===0;){if(++u===h)return a;d=~c[u]}const b=u*32+D.numberOfTrailingZeros(d);return b>a?a:b}setBulk(r,a){this.bits[Math.floor(r/32)]=a}setRange(r,a){if(a<r||r<0||a>this.size)throw new N;if(a===r)return;a--;const c=Math.floor(r/32),u=Math.floor(a/32),d=this.bits;for(let h=c;h<=u;h++){const b=h>c?0:r&31,T=(2<<(h<u?31:a&31))-(1<<b);d[h]|=T}}clear(){const r=this.bits.length,a=this.bits;for(let c=0;c<r;c++)a[c]=0}isRange(r,a,c){if(a<r||r<0||a>this.size)throw new N;if(a===r)return!0;a--;const u=Math.floor(r/32),d=Math.floor(a/32),h=this.bits;for(let b=u;b<=d;b++){const w=b>u?0:r&31,V=(2<<(b<d?31:a&31))-(1<<w)&4294967295;if((h[b]&V)!==(c?V:0))return!1}return!0}appendBit(r){this.ensureCapacity(this.size+1),r&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(r,a){if(a<0||a>32)throw new N("Num bits must be between 0 and 32");this.ensureCapacity(this.size+a);for(let c=a;c>0;c--)this.appendBit((r>>c-1&1)===1)}appendBitArray(r){const a=r.size;this.ensureCapacity(this.size+a);for(let c=0;c<a;c++)this.appendBit(r.get(c))}xor(r){if(this.size!==r.size)throw new N("Sizes don't match");const a=this.bits;for(let c=0,u=a.length;c<u;c++)a[c]^=r.bits[c]}toBytes(r,a,c,u){for(let d=0;d<u;d++){let h=0;for(let b=0;b<8;b++)this.get(r)&&(h|=1<<7-b),r++;a[c+d]=h}}getBitArray(){return this.bits}reverse(){const r=new Int32Array(this.bits.length),a=Math.floor((this.size-1)/32),c=a+1,u=this.bits;for(let d=0;d<c;d++){let h=u[d];h=h>>1&1431655765|(h&1431655765)<<1,h=h>>2&858993459|(h&858993459)<<2,h=h>>4&252645135|(h&252645135)<<4,h=h>>8&16711935|(h&16711935)<<8,h=h>>16&65535|(h&65535)<<16,r[a-d]=h}if(this.size!==c*32){const d=c*32-this.size;let h=r[0]>>>d;for(let b=1;b<c;b++){const w=r[b];h|=w<<32-d,r[b-1]=h,h=w>>>d}r[c-1]=h}this.bits=r}static makeArray(r){return new Int32Array(Math.floor((r+31)/32))}equals(r){if(!(r instanceof U))return!1;const a=r;return this.size===a.size&&_.equals(this.bits,a.bits)}hashCode(){return 31*this.size+_.hashCode(this.bits)}toString(){let r="";for(let a=0,c=this.size;a<c;a++)a&7||(r+=" "),r+=this.get(a)?"X":".";return r}clone(){return new U(this.size,this.bits.slice())}}var Y;(function(Z){Z[Z.OTHER=0]="OTHER",Z[Z.PURE_BARCODE=1]="PURE_BARCODE",Z[Z.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",Z[Z.TRY_HARDER=3]="TRY_HARDER",Z[Z.CHARACTER_SET=4]="CHARACTER_SET",Z[Z.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",Z[Z.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",Z[Z.ASSUME_GS1=7]="ASSUME_GS1",Z[Z.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",Z[Z.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",Z[Z.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Y||(Y={}));var ae=Y;class F extends x{static getFormatInstance(){return new F}}F.kind="FormatException";var L;(function(Z){Z[Z.Cp437=0]="Cp437",Z[Z.ISO8859_1=1]="ISO8859_1",Z[Z.ISO8859_2=2]="ISO8859_2",Z[Z.ISO8859_3=3]="ISO8859_3",Z[Z.ISO8859_4=4]="ISO8859_4",Z[Z.ISO8859_5=5]="ISO8859_5",Z[Z.ISO8859_6=6]="ISO8859_6",Z[Z.ISO8859_7=7]="ISO8859_7",Z[Z.ISO8859_8=8]="ISO8859_8",Z[Z.ISO8859_9=9]="ISO8859_9",Z[Z.ISO8859_10=10]="ISO8859_10",Z[Z.ISO8859_11=11]="ISO8859_11",Z[Z.ISO8859_13=12]="ISO8859_13",Z[Z.ISO8859_14=13]="ISO8859_14",Z[Z.ISO8859_15=14]="ISO8859_15",Z[Z.ISO8859_16=15]="ISO8859_16",Z[Z.SJIS=16]="SJIS",Z[Z.Cp1250=17]="Cp1250",Z[Z.Cp1251=18]="Cp1251",Z[Z.Cp1252=19]="Cp1252",Z[Z.Cp1256=20]="Cp1256",Z[Z.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",Z[Z.UTF8=22]="UTF8",Z[Z.ASCII=23]="ASCII",Z[Z.Big5=24]="Big5",Z[Z.GB18030=25]="GB18030",Z[Z.EUC_KR=26]="EUC_KR"})(L||(L={}));class M{constructor(r,a,c,...u){this.valueIdentifier=r,this.name=c,typeof a=="number"?this.values=Int32Array.from([a]):this.values=a,this.otherEncodingNames=u,M.VALUE_IDENTIFIER_TO_ECI.set(r,this),M.NAME_TO_ECI.set(c,this);const d=this.values;for(let h=0,b=d.length;h!==b;h++){const w=d[h];M.VALUES_TO_ECI.set(w,this)}for(const h of u)M.NAME_TO_ECI.set(h,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(r){if(r<0||r>=900)throw new F("incorect value");const a=M.VALUES_TO_ECI.get(r);if(a===void 0)throw new F("incorect value");return a}static getCharacterSetECIByName(r){const a=M.NAME_TO_ECI.get(r);if(a===void 0)throw new F("incorect value");return a}equals(r){if(!(r instanceof M))return!1;const a=r;return this.getName()===a.getName()}}M.VALUE_IDENTIFIER_TO_ECI=new Map,M.VALUES_TO_ECI=new Map,M.NAME_TO_ECI=new Map,M.Cp437=new M(L.Cp437,Int32Array.from([0,2]),"Cp437"),M.ISO8859_1=new M(L.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),M.ISO8859_2=new M(L.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),M.ISO8859_3=new M(L.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),M.ISO8859_4=new M(L.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),M.ISO8859_5=new M(L.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),M.ISO8859_6=new M(L.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),M.ISO8859_7=new M(L.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),M.ISO8859_8=new M(L.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),M.ISO8859_9=new M(L.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),M.ISO8859_10=new M(L.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),M.ISO8859_11=new M(L.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),M.ISO8859_13=new M(L.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),M.ISO8859_14=new M(L.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),M.ISO8859_15=new M(L.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),M.ISO8859_16=new M(L.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),M.SJIS=new M(L.SJIS,20,"SJIS","Shift_JIS"),M.Cp1250=new M(L.Cp1250,21,"Cp1250","windows-1250"),M.Cp1251=new M(L.Cp1251,22,"Cp1251","windows-1251"),M.Cp1252=new M(L.Cp1252,23,"Cp1252","windows-1252"),M.Cp1256=new M(L.Cp1256,24,"Cp1256","windows-1256"),M.UnicodeBigUnmarked=new M(L.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),M.UTF8=new M(L.UTF8,26,"UTF8","UTF-8"),M.ASCII=new M(L.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),M.Big5=new M(L.Big5,28,"Big5"),M.GB18030=new M(L.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),M.EUC_KR=new M(L.EUC_KR,30,"EUC_KR","EUC-KR");class z extends x{}z.kind="UnsupportedOperationException";class k{static decode(r,a){const c=this.encodingName(a);return this.customDecoder?this.customDecoder(r,c):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(c)?this.decodeFallback(r,c):new TextDecoder(c).decode(r)}static shouldDecodeOnFallback(r){return!k.isBrowser()&&r==="ISO-8859-1"}static encode(r,a){const c=this.encodingName(a);return this.customEncoder?this.customEncoder(r,c):typeof TextEncoder>"u"?this.encodeFallback(r):new TextEncoder().encode(r)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(r){return typeof r=="string"?r:r.getName()}static encodingCharacterSet(r){return r instanceof M?r:M.getCharacterSetECIByName(r)}static decodeFallback(r,a){const c=this.encodingCharacterSet(a);if(k.isDecodeFallbackSupported(c)){let u="";for(let d=0,h=r.length;d<h;d++){let b=r[d].toString(16);b.length<2&&(b="0"+b),u+="%"+b}return decodeURIComponent(u)}if(c.equals(M.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(r.buffer));throw new z(`Encoding ${this.encodingName(a)} not supported by fallback.`)}static isDecodeFallbackSupported(r){return r.equals(M.UTF8)||r.equals(M.ISO8859_1)||r.equals(M.ASCII)}static encodeFallback(r){const c=btoa(unescape(encodeURIComponent(r))).split(""),u=[];for(let d=0;d<c.length;d++)u.push(c[d].charCodeAt(0));return new Uint8Array(u)}}class R{static castAsNonUtf8Char(r,a=null){const c=a?a.getName():this.ISO88591;return k.decode(new Uint8Array([r]),c)}static guessEncoding(r,a){if(a!=null&&a.get(ae.CHARACTER_SET)!==void 0)return a.get(ae.CHARACTER_SET).toString();const c=r.length;let u=!0,d=!0,h=!0,b=0,w=0,T=0,V=0,X=0,se=0,be=0,Se=0,Ee=0,Le=0,Ge=0;const at=r.length>3&&r[0]===239&&r[1]===187&&r[2]===191;for(let dt=0;dt<c&&(u||d||h);dt++){const ot=r[dt]&255;h&&(b>0?ot&128?b--:h=!1:ot&128&&(ot&64?(b++,ot&32?(b++,ot&16?(b++,ot&8?h=!1:V++):T++):w++):h=!1)),u&&(ot>127&&ot<160?u=!1:ot>159&&(ot<192||ot===215||ot===247)&&Ge++),d&&(X>0?ot<64||ot===127||ot>252?d=!1:X--:ot===128||ot===160||ot>239?d=!1:ot>160&&ot<224?(se++,Se=0,be++,be>Ee&&(Ee=be)):ot>127?(X++,be=0,Se++,Se>Le&&(Le=Se)):(be=0,Se=0))}return h&&b>0&&(h=!1),d&&X>0&&(d=!1),h&&(at||w+T+V>0)?R.UTF8:d&&(R.ASSUME_SHIFT_JIS||Ee>=3||Le>=3)?R.SHIFT_JIS:u&&d?Ee===2&&se===2||Ge*10>=c?R.SHIFT_JIS:R.ISO88591:u?R.ISO88591:d?R.SHIFT_JIS:h?R.UTF8:R.PLATFORM_DEFAULT_ENCODING}static format(r,...a){let c=-1;function u(h,b,w,T,V,X){if(h==="%%")return"%";if(a[++c]===void 0)return;h=T?parseInt(T.substr(1)):void 0;let se=V?parseInt(V.substr(1)):void 0,be;switch(X){case"s":be=a[c];break;case"c":be=a[c][0];break;case"f":be=parseFloat(a[c]).toFixed(h);break;case"p":be=parseFloat(a[c]).toPrecision(h);break;case"e":be=parseFloat(a[c]).toExponential(h);break;case"x":be=parseInt(a[c]).toString(se||16);break;case"d":be=parseFloat(parseInt(a[c],se||10).toPrecision(h)).toFixed(0);break}be=typeof be=="object"?JSON.stringify(be):(+be).toString(se);let Se=parseInt(w),Ee=w&&w[0]+""=="0"?"0":" ";for(;be.length<Se;)be=b!==void 0?be+Ee:Ee+be;return be}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(d,u)}static getBytes(r,a){return k.encode(r,a)}static getCharCode(r,a=0){return r.charCodeAt(a)}static getCharAt(r){return String.fromCharCode(r)}}R.SHIFT_JIS=M.SJIS.getName(),R.GB2312="GB2312",R.ISO88591=M.ISO8859_1.getName(),R.EUC_JP="EUC_JP",R.UTF8=M.UTF8.getName(),R.PLATFORM_DEFAULT_ENCODING=R.UTF8,R.ASSUME_SHIFT_JIS=!1;class re{constructor(r=""){this.value=r}enableDecoding(r){return this.encoding=r,this}append(r){return typeof r=="string"?this.value+=r.toString():this.encoding?this.value+=R.castAsNonUtf8Char(r,this.encoding):this.value+=String.fromCharCode(r),this}appendChars(r,a,c){for(let u=a;a<a+c;u++)this.append(r[u]);return this}length(){return this.value.length}charAt(r){return this.value.charAt(r)}deleteCharAt(r){this.value=this.value.substr(0,r)+this.value.substring(r+1)}setCharAt(r,a){this.value=this.value.substr(0,r)+a+this.value.substr(r+1)}substring(r,a){return this.value.substring(r,a)}setLengthToZero(){this.value=""}toString(){return this.value}insert(r,a){this.value=this.value.substr(0,r)+a+this.value.substr(r+a.length)}}class ee{constructor(r,a,c,u){if(this.width=r,this.height=a,this.rowSize=c,this.bits=u,a==null&&(a=r),this.height=a,r<1||a<1)throw new N("Both dimensions must be greater than 0");c==null&&(c=Math.floor((r+31)/32)),this.rowSize=c,u==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(r){const a=r.length,c=r[0].length,u=new ee(c,a);for(let d=0;d<a;d++){const h=r[d];for(let b=0;b<c;b++)h[b]&&u.set(b,d)}return u}static parseFromString(r,a,c){if(r===null)throw new N("stringRepresentation cannot be null");const u=new Array(r.length);let d=0,h=0,b=-1,w=0,T=0;for(;T<r.length;)if(r.charAt(T)===`
`||r.charAt(T)==="\r"){if(d>h){if(b===-1)b=d-h;else if(d-h!==b)throw new N("row lengths do not match");h=d,w++}T++}else if(r.substring(T,T+a.length)===a)T+=a.length,u[d]=!0,d++;else if(r.substring(T,T+c.length)===c)T+=c.length,u[d]=!1,d++;else throw new N("illegal character encountered: "+r.substring(T));if(d>h){if(b===-1)b=d-h;else if(d-h!==b)throw new N("row lengths do not match");w++}const V=new ee(b,w);for(let X=0;X<d;X++)u[X]&&V.set(Math.floor(X%b),Math.floor(X/b));return V}get(r,a){const c=a*this.rowSize+Math.floor(r/32);return(this.bits[c]>>>(r&31)&1)!==0}set(r,a){const c=a*this.rowSize+Math.floor(r/32);this.bits[c]|=1<<(r&31)&4294967295}unset(r,a){const c=a*this.rowSize+Math.floor(r/32);this.bits[c]&=~(1<<(r&31)&4294967295)}flip(r,a){const c=a*this.rowSize+Math.floor(r/32);this.bits[c]^=1<<(r&31)&4294967295}xor(r){if(this.width!==r.getWidth()||this.height!==r.getHeight()||this.rowSize!==r.getRowSize())throw new N("input matrix dimensions do not match");const a=new U(Math.floor(this.width/32)+1),c=this.rowSize,u=this.bits;for(let d=0,h=this.height;d<h;d++){const b=d*c,w=r.getRow(d,a).getBitArray();for(let T=0;T<c;T++)u[b+T]^=w[T]}}clear(){const r=this.bits,a=r.length;for(let c=0;c<a;c++)r[c]=0}setRegion(r,a,c,u){if(a<0||r<0)throw new N("Left and top must be nonnegative");if(u<1||c<1)throw new N("Height and width must be at least 1");const d=r+c,h=a+u;if(h>this.height||d>this.width)throw new N("The region must fit inside the matrix");const b=this.rowSize,w=this.bits;for(let T=a;T<h;T++){const V=T*b;for(let X=r;X<d;X++)w[V+Math.floor(X/32)]|=1<<(X&31)&4294967295}}getRow(r,a){a==null||a.getSize()<this.width?a=new U(this.width):a.clear();const c=this.rowSize,u=this.bits,d=r*c;for(let h=0;h<c;h++)a.setBulk(h*32,u[d+h]);return a}setRow(r,a){E.arraycopy(a.getBitArray(),0,this.bits,r*this.rowSize,this.rowSize)}rotate180(){const r=this.getWidth(),a=this.getHeight();let c=new U(r),u=new U(r);for(let d=0,h=Math.floor((a+1)/2);d<h;d++)c=this.getRow(d,c),u=this.getRow(a-1-d,u),c.reverse(),u.reverse(),this.setRow(d,u),this.setRow(a-1-d,c)}getEnclosingRectangle(){const r=this.width,a=this.height,c=this.rowSize,u=this.bits;let d=r,h=a,b=-1,w=-1;for(let T=0;T<a;T++)for(let V=0;V<c;V++){const X=u[T*c+V];if(X!==0){if(T<h&&(h=T),T>w&&(w=T),V*32<d){let se=0;for(;!(X<<31-se&4294967295);)se++;V*32+se<d&&(d=V*32+se)}if(V*32+31>b){let se=31;for(;!(X>>>se);)se--;V*32+se>b&&(b=V*32+se)}}}return b<d||w<h?null:Int32Array.from([d,h,b-d+1,w-h+1])}getTopLeftOnBit(){const r=this.rowSize,a=this.bits;let c=0;for(;c<a.length&&a[c]===0;)c++;if(c===a.length)return null;const u=c/r;let d=c%r*32;const h=a[c];let b=0;for(;!(h<<31-b&4294967295);)b++;return d+=b,Int32Array.from([d,u])}getBottomRightOnBit(){const r=this.rowSize,a=this.bits;let c=a.length-1;for(;c>=0&&a[c]===0;)c--;if(c<0)return null;const u=Math.floor(c/r);let d=Math.floor(c%r)*32;const h=a[c];let b=31;for(;!(h>>>b);)b--;return d+=b,Int32Array.from([d,u])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(r){if(!(r instanceof ee))return!1;const a=r;return this.width===a.width&&this.height===a.height&&this.rowSize===a.rowSize&&_.equals(this.bits,a.bits)}hashCode(){let r=this.width;return r=31*r+this.width,r=31*r+this.height,r=31*r+this.rowSize,r=31*r+_.hashCode(this.bits),r}toString(r="X ",a="  ",c=`
`){return this.buildToString(r,a,c)}buildToString(r,a,c){let u=new re;for(let d=0,h=this.height;d<h;d++){for(let b=0,w=this.width;b<w;b++)u.append(this.get(b,d)?r:a);u.append(c)}return u.toString()}clone(){return new ee(this.width,this.height,this.rowSize,this.bits.slice())}}class ne extends x{static getNotFoundInstance(){return new ne}}ne.kind="NotFoundException";class K extends O{constructor(r){super(r),this.luminances=K.EMPTY,this.buckets=new Int32Array(K.LUMINANCE_BUCKETS)}getBlackRow(r,a){const c=this.getLuminanceSource(),u=c.getWidth();a==null||a.getSize()<u?a=new U(u):a.clear(),this.initArrays(u);const d=c.getRow(r,this.luminances),h=this.buckets;for(let w=0;w<u;w++)h[(d[w]&255)>>K.LUMINANCE_SHIFT]++;const b=K.estimateBlackPoint(h);if(u<3)for(let w=0;w<u;w++)(d[w]&255)<b&&a.set(w);else{let w=d[0]&255,T=d[1]&255;for(let V=1;V<u-1;V++){const X=d[V+1]&255;(T*4-w-X)/2<b&&a.set(V),w=T,T=X}}return a}getBlackMatrix(){const r=this.getLuminanceSource(),a=r.getWidth(),c=r.getHeight(),u=new ee(a,c);this.initArrays(a);const d=this.buckets;for(let w=1;w<5;w++){const T=Math.floor(c*w/5),V=r.getRow(T,this.luminances),X=Math.floor(a*4/5);for(let se=Math.floor(a/5);se<X;se++){const be=V[se]&255;d[be>>K.LUMINANCE_SHIFT]++}}const h=K.estimateBlackPoint(d),b=r.getMatrix();for(let w=0;w<c;w++){const T=w*a;for(let V=0;V<a;V++)(b[T+V]&255)<h&&u.set(V,w)}return u}createBinarizer(r){return new K(r)}initArrays(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));const a=this.buckets;for(let c=0;c<K.LUMINANCE_BUCKETS;c++)a[c]=0}static estimateBlackPoint(r){const a=r.length;let c=0,u=0,d=0;for(let V=0;V<a;V++)r[V]>d&&(u=V,d=r[V]),r[V]>c&&(c=r[V]);let h=0,b=0;for(let V=0;V<a;V++){const X=V-u,se=r[V]*X*X;se>b&&(h=V,b=se)}if(u>h){const V=u;u=h,h=V}if(h-u<=a/16)throw new ne;let w=h-1,T=-1;for(let V=h-1;V>u;V--){const X=V-u,se=X*X*(h-V)*(c-r[V]);se>T&&(w=V,T=se)}return w<<K.LUMINANCE_SHIFT}}K.LUMINANCE_BITS=5,K.LUMINANCE_SHIFT=8-K.LUMINANCE_BITS,K.LUMINANCE_BUCKETS=1<<K.LUMINANCE_BITS,K.EMPTY=Uint8ClampedArray.from([0]);class G extends K{constructor(r){super(r),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const r=this.getLuminanceSource(),a=r.getWidth(),c=r.getHeight();if(a>=G.MINIMUM_DIMENSION&&c>=G.MINIMUM_DIMENSION){const u=r.getMatrix();let d=a>>G.BLOCK_SIZE_POWER;a&G.BLOCK_SIZE_MASK&&d++;let h=c>>G.BLOCK_SIZE_POWER;c&G.BLOCK_SIZE_MASK&&h++;const b=G.calculateBlackPoints(u,d,h,a,c),w=new ee(a,c);G.calculateThresholdForBlock(u,d,h,a,c,b,w),this.matrix=w}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(r){return new G(r)}static calculateThresholdForBlock(r,a,c,u,d,h,b){const w=d-G.BLOCK_SIZE,T=u-G.BLOCK_SIZE;for(let V=0;V<c;V++){let X=V<<G.BLOCK_SIZE_POWER;X>w&&(X=w);const se=G.cap(V,2,c-3);for(let be=0;be<a;be++){let Se=be<<G.BLOCK_SIZE_POWER;Se>T&&(Se=T);const Ee=G.cap(be,2,a-3);let Le=0;for(let at=-2;at<=2;at++){const dt=h[se+at];Le+=dt[Ee-2]+dt[Ee-1]+dt[Ee]+dt[Ee+1]+dt[Ee+2]}const Ge=Le/25;G.thresholdBlock(r,Se,X,Ge,u,b)}}}static cap(r,a,c){return r<a?a:r>c?c:r}static thresholdBlock(r,a,c,u,d,h){for(let b=0,w=c*d+a;b<G.BLOCK_SIZE;b++,w+=d)for(let T=0;T<G.BLOCK_SIZE;T++)(r[w+T]&255)<=u&&h.set(a+T,c+b)}static calculateBlackPoints(r,a,c,u,d){const h=d-G.BLOCK_SIZE,b=u-G.BLOCK_SIZE,w=new Array(c);for(let T=0;T<c;T++){w[T]=new Int32Array(a);let V=T<<G.BLOCK_SIZE_POWER;V>h&&(V=h);for(let X=0;X<a;X++){let se=X<<G.BLOCK_SIZE_POWER;se>b&&(se=b);let be=0,Se=255,Ee=0;for(let Ge=0,at=V*u+se;Ge<G.BLOCK_SIZE;Ge++,at+=u){for(let dt=0;dt<G.BLOCK_SIZE;dt++){const ot=r[at+dt]&255;be+=ot,ot<Se&&(Se=ot),ot>Ee&&(Ee=ot)}if(Ee-Se>G.MIN_DYNAMIC_RANGE)for(Ge++,at+=u;Ge<G.BLOCK_SIZE;Ge++,at+=u)for(let dt=0;dt<G.BLOCK_SIZE;dt++)be+=r[at+dt]&255}let Le=be>>G.BLOCK_SIZE_POWER*2;if(Ee-Se<=G.MIN_DYNAMIC_RANGE&&(Le=Se/2,T>0&&X>0)){const Ge=(w[T-1][X]+2*w[T][X-1]+w[T-1][X-1])/4;Se<Ge&&(Le=Ge)}w[T][X]=Le}}return w}}G.BLOCK_SIZE_POWER=3,G.BLOCK_SIZE=1<<G.BLOCK_SIZE_POWER,G.BLOCK_SIZE_MASK=G.BLOCK_SIZE-1,G.MINIMUM_DIMENSION=G.BLOCK_SIZE*5,G.MIN_DYNAMIC_RANGE=24;class te{constructor(r,a){this.width=r,this.height=a}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(r,a,c,u){throw new z("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new z("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new z("This luminance source does not support rotation by 45 degrees.")}toString(){const r=new Uint8ClampedArray(this.width);let a=new re;for(let c=0;c<this.height;c++){const u=this.getRow(c,r);for(let d=0;d<this.width;d++){const h=u[d]&255;let b;h<64?b="#":h<128?b="+":h<192?b=".":b=" ",a.append(b)}a.append(`
`)}return a.toString()}}class W extends te{constructor(r){super(r.getWidth(),r.getHeight()),this.delegate=r}getRow(r,a){const c=this.delegate.getRow(r,a),u=this.getWidth();for(let d=0;d<u;d++)c[d]=255-(c[d]&255);return c}getMatrix(){const r=this.delegate.getMatrix(),a=this.getWidth()*this.getHeight(),c=new Uint8ClampedArray(a);for(let u=0;u<a;u++)c[u]=255-(r[u]&255);return c}isCropSupported(){return this.delegate.isCropSupported()}crop(r,a,c,u){return new W(this.delegate.crop(r,a,c,u))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new W(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new W(this.delegate.rotateCounterClockwise45())}}class fe extends te{constructor(r){super(r.width,r.height),this.canvas=r,this.tempCanvasElement=null,this.buffer=fe.makeBufferFromCanvasImageData(r)}static makeBufferFromCanvasImageData(r){const a=r.getContext("2d").getImageData(0,0,r.width,r.height);return fe.toGrayscaleBuffer(a.data,r.width,r.height)}static toGrayscaleBuffer(r,a,c){const u=new Uint8ClampedArray(a*c);for(let d=0,h=0,b=r.length;d<b;d+=4,h++){let w;if(r[d+3]===0)w=255;else{const V=r[d],X=r[d+1],se=r[d+2];w=306*V+601*X+117*se+512>>10}u[h]=w}return u}getRow(r,a){if(r<0||r>=this.getHeight())throw new N("Requested row is outside the image: "+r);const c=this.getWidth(),u=r*c;return a===null?a=this.buffer.slice(u,u+c):(a.length<c&&(a=new Uint8ClampedArray(c)),a.set(this.buffer.slice(u,u+c))),a}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(r,a,c,u){return super.crop(r,a,c,u),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement}rotate(r){const a=this.getTempCanvasElement(),c=a.getContext("2d"),u=r*fe.DEGREE_TO_RADIANS,d=this.canvas.width,h=this.canvas.height,b=Math.ceil(Math.abs(Math.cos(u))*d+Math.abs(Math.sin(u))*h),w=Math.ceil(Math.abs(Math.sin(u))*d+Math.abs(Math.cos(u))*h);return a.width=b,a.height=w,c.translate(b/2,w/2),c.rotate(u),c.drawImage(this.canvas,d/-2,h/-2),this.buffer=fe.makeBufferFromCanvasImageData(a),this}invert(){return new W(this)}}fe.DEGREE_TO_RADIANS=Math.PI/180;class le{constructor(r,a,c){this.deviceId=r,this.label=a,this.kind="videoinput",this.groupId=c||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var B=(globalThis||qs||self||window||void 0)&&(globalThis||qs||self||window||void 0).__awaiter||function(Z,r,a,c){function u(d){return d instanceof a?d:new a(function(h){h(d)})}return new(a||(a=Promise))(function(d,h){function b(V){try{T(c.next(V))}catch(X){h(X)}}function w(V){try{T(c.throw(V))}catch(X){h(X)}}function T(V){V.done?d(V.value):u(V.value).then(b,w)}T((c=c.apply(Z,r||[])).next())})};class q{constructor(r,a=500,c){this.reader=r,this.timeBetweenScansMillis=a,this._hints=c,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(r){this._timeBetweenDecodingAttempts=r<0?0:r}set hints(r){this._hints=r||null}get hints(){return this._hints}listVideoInputDevices(){return B(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const r=yield navigator.mediaDevices.enumerateDevices(),a=[];for(const c of r){const u=c.kind==="video"?"videoinput":c.kind;if(u!=="videoinput")continue;const d=c.deviceId||c.id,h=c.label||`Video device ${a.length+1}`,b=c.groupId,w={deviceId:d,label:h,kind:u,groupId:b};a.push(w)}return a})}getVideoInputDevices(){return B(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(a=>new le(a.deviceId,a.label))})}findDeviceById(r){return B(this,void 0,void 0,function*(){const a=yield this.listVideoInputDevices();return a?a.find(c=>c.deviceId===r):null})}decodeFromInputVideoDevice(r,a){return B(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(r,a)})}decodeOnceFromVideoDevice(r,a){return B(this,void 0,void 0,function*(){this.reset();let c;r?c={deviceId:{exact:r}}:c={facingMode:"environment"};const u={video:c};return yield this.decodeOnceFromConstraints(u,a)})}decodeOnceFromConstraints(r,a){return B(this,void 0,void 0,function*(){const c=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeOnceFromStream(c,a)})}decodeOnceFromStream(r,a){return B(this,void 0,void 0,function*(){this.reset();const c=yield this.attachStreamToVideo(r,a);return yield this.decodeOnce(c)})}decodeFromInputVideoDeviceContinuously(r,a,c){return B(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(r,a,c)})}decodeFromVideoDevice(r,a,c){return B(this,void 0,void 0,function*(){let u;r?u={deviceId:{exact:r}}:u={facingMode:"environment"};const d={video:u};return yield this.decodeFromConstraints(d,a,c)})}decodeFromConstraints(r,a,c){return B(this,void 0,void 0,function*(){const u=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeFromStream(u,a,c)})}decodeFromStream(r,a,c){return B(this,void 0,void 0,function*(){this.reset();const u=yield this.attachStreamToVideo(r,a);return yield this.decodeContinuously(u,c)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(r,a){return B(this,void 0,void 0,function*(){const c=this.prepareVideoElement(a);return this.addVideoSource(c,r),this.videoElement=c,this.stream=r,yield this.playVideoOnLoadAsync(c),c})}playVideoOnLoadAsync(r){return new Promise((a,c)=>this.playVideoOnLoad(r,()=>a()))}playVideoOnLoad(r,a){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(r),r.addEventListener("ended",this.videoEndedListener),r.addEventListener("canplay",this.videoCanPlayListener),r.addEventListener("playing",a),this.tryPlayVideo(r)}isVideoPlaying(r){return r.currentTime>0&&!r.paused&&!r.ended&&r.readyState>2}tryPlayVideo(r){return B(this,void 0,void 0,function*(){if(this.isVideoPlaying(r)){console.warn("Trying to play video that is already playing.");return}try{yield r.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(r,a){const c=document.getElementById(r);if(!c)throw new S(`element with id '${r}' not found`);if(c.nodeName.toLowerCase()!==a.toLowerCase())throw new S(`element with id '${r}' must be an ${a} element`);return c}decodeFromImage(r,a){if(!r&&!a)throw new S("either imageElement with a src set or an url must be provided");return a&&!r?this.decodeFromImageUrl(a):this.decodeFromImageElement(r)}decodeFromVideo(r,a){if(!r&&!a)throw new S("Either an element with a src set or an URL must be provided");return a&&!r?this.decodeFromVideoUrl(a):this.decodeFromVideoElement(r)}decodeFromVideoContinuously(r,a,c){if(r===void 0&&a===void 0)throw new S("Either an element with a src set or an URL must be provided");return a&&!r?this.decodeFromVideoUrlContinuously(a,c):this.decodeFromVideoElementContinuously(r,c)}decodeFromImageElement(r){if(!r)throw new S("An image element must be provided.");this.reset();const a=this.prepareImageElement(r);this.imageElement=a;let c;return this.isImageLoaded(a)?c=this.decodeOnce(a,!1,!0):c=this._decodeOnLoadImage(a),c}decodeFromVideoElement(r){const a=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideo(a)}decodeFromVideoElementContinuously(r,a){const c=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideoContinuously(c,a)}_decodeFromVideoElementSetup(r){if(!r)throw new S("A video element must be provided.");this.reset();const a=this.prepareVideoElement(r);return this.videoElement=a,a}decodeFromImageUrl(r){if(!r)throw new S("An URL must be provided.");this.reset();const a=this.prepareImageElement();this.imageElement=a;const c=this._decodeOnLoadImage(a);return a.src=r,c}decodeFromVideoUrl(r){if(!r)throw new S("An URL must be provided.");this.reset();const a=this.prepareVideoElement(),c=this.decodeFromVideoElement(a);return a.src=r,c}decodeFromVideoUrlContinuously(r,a){if(!r)throw new S("An URL must be provided.");this.reset();const c=this.prepareVideoElement(),u=this.decodeFromVideoElementContinuously(c,a);return c.src=r,u}_decodeOnLoadImage(r){return new Promise((a,c)=>{this.imageLoadedListener=()=>this.decodeOnce(r,!1,!0).then(a,c),r.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(r){return B(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(r),yield this.decodeOnce(r)})}_decodeOnLoadVideoContinuously(r,a){return B(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(r),this.decodeContinuously(r,a)})}isImageLoaded(r){return!(!r.complete||r.naturalWidth===0)}prepareImageElement(r){let a;return typeof r>"u"&&(a=document.createElement("img"),a.width=200,a.height=200),typeof r=="string"&&(a=this.getMediaElement(r,"img")),r instanceof HTMLImageElement&&(a=r),a}prepareVideoElement(r){let a;return!r&&typeof document<"u"&&(a=document.createElement("video"),a.width=200,a.height=200),typeof r=="string"&&(a=this.getMediaElement(r,"video")),r instanceof HTMLVideoElement&&(a=r),a.setAttribute("autoplay","true"),a.setAttribute("muted","true"),a.setAttribute("playsinline","true"),a}decodeOnce(r,a=!0,c=!0){this._stopAsyncDecode=!1;const u=(d,h)=>{if(this._stopAsyncDecode){h(new ne("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const b=this.decode(r);d(b)}catch(b){const w=a&&b instanceof ne,V=(b instanceof v||b instanceof F)&&c;if(w||V)return setTimeout(u,this._timeBetweenDecodingAttempts,d,h);h(b)}};return new Promise((d,h)=>u(d,h))}decodeContinuously(r,a){this._stopContinuousDecode=!1;const c=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const u=this.decode(r);a(u,null),setTimeout(c,this.timeBetweenScansMillis)}catch(u){a(null,u);const d=u instanceof v||u instanceof F,h=u instanceof ne;(d||h)&&setTimeout(c,this._timeBetweenDecodingAttempts)}};c()}decode(r){const a=this.createBinaryBitmap(r);return this.decodeBitmap(a)}_isHTMLVideoElement(r){return r.videoWidth!==0}drawFrameOnCanvas(r,a,c){a||(a={sx:0,sy:0,sWidth:r.videoWidth,sHeight:r.videoHeight,dx:0,dy:0,dWidth:r.videoWidth,dHeight:r.videoHeight}),c||(c=this.captureCanvasContext),c.drawImage(r,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}drawImageOnCanvas(r,a,c=this.captureCanvasContext){a||(a={sx:0,sy:0,sWidth:r.naturalWidth,sHeight:r.naturalHeight,dx:0,dy:0,dWidth:r.naturalWidth,dHeight:r.naturalHeight}),c||(c=this.captureCanvasContext),c.drawImage(r,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}createBinaryBitmap(r){this.getCaptureCanvasContext(r),this._isHTMLVideoElement(r)?this.drawFrameOnCanvas(r):this.drawImageOnCanvas(r);const a=this.getCaptureCanvas(r),c=new fe(a),u=new G(c);return new j(u)}getCaptureCanvasContext(r){if(!this.captureCanvasContext){const c=this.getCaptureCanvas(r).getContext("2d");this.captureCanvasContext=c}return this.captureCanvasContext}getCaptureCanvas(r){if(!this.captureCanvas){const a=this.createCaptureCanvas(r);this.captureCanvas=a}return this.captureCanvas}decodeBitmap(r){return this.reader.decode(r,this._hints)}createCaptureCanvas(r){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const a=document.createElement("canvas");let c,u;return typeof r<"u"&&(r instanceof HTMLVideoElement?(c=r.videoWidth,u=r.videoHeight):r instanceof HTMLImageElement&&(c=r.naturalWidth||r.width,u=r.naturalHeight||r.height)),a.style.width=c+"px",a.style.height=u+"px",a.width=c,a.height=u,a}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(r=>r.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(r,a){try{r.srcObject=a}catch{r.src=URL.createObjectURL(a)}}cleanVideoSource(r){try{r.srcObject=null}catch{r.src=""}this.videoElement.removeAttribute("src")}}class Q{constructor(r,a,c=a==null?0:8*a.length,u,d,h=E.currentTimeMillis()){this.text=r,this.rawBytes=a,this.numBits=c,this.resultPoints=u,this.format=d,this.timestamp=h,this.text=r,this.rawBytes=a,c==null?this.numBits=a==null?0:8*a.length:this.numBits=c,this.resultPoints=u,this.format=d,this.resultMetadata=null,h==null?this.timestamp=E.currentTimeMillis():this.timestamp=h}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(r,a){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(r,a)}putAllMetadata(r){r!==null&&(this.resultMetadata===null?this.resultMetadata=r:this.resultMetadata=new Map(r))}addResultPoints(r){const a=this.resultPoints;if(a===null)this.resultPoints=r;else if(r!==null&&r.length>0){const c=new Array(a.length+r.length);E.arraycopy(a,0,c,0,a.length),E.arraycopy(r,0,c,a.length,r.length),this.resultPoints=c}}getTimestamp(){return this.timestamp}toString(){return this.text}}var he;(function(Z){Z[Z.AZTEC=0]="AZTEC",Z[Z.CODABAR=1]="CODABAR",Z[Z.CODE_39=2]="CODE_39",Z[Z.CODE_93=3]="CODE_93",Z[Z.CODE_128=4]="CODE_128",Z[Z.DATA_MATRIX=5]="DATA_MATRIX",Z[Z.EAN_8=6]="EAN_8",Z[Z.EAN_13=7]="EAN_13",Z[Z.ITF=8]="ITF",Z[Z.MAXICODE=9]="MAXICODE",Z[Z.PDF_417=10]="PDF_417",Z[Z.QR_CODE=11]="QR_CODE",Z[Z.RSS_14=12]="RSS_14",Z[Z.RSS_EXPANDED=13]="RSS_EXPANDED",Z[Z.UPC_A=14]="UPC_A",Z[Z.UPC_E=15]="UPC_E",Z[Z.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(he||(he={}));var ue=he,je;(function(Z){Z[Z.OTHER=0]="OTHER",Z[Z.ORIENTATION=1]="ORIENTATION",Z[Z.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",Z[Z.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",Z[Z.ISSUE_NUMBER=4]="ISSUE_NUMBER",Z[Z.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",Z[Z.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",Z[Z.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",Z[Z.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",Z[Z.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",Z[Z.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(je||(je={}));var Ae=je;class ve{constructor(r,a,c,u,d=-1,h=-1){this.rawBytes=r,this.text=a,this.byteSegments=c,this.ecLevel=u,this.structuredAppendSequenceNumber=d,this.structuredAppendParity=h,this.numBits=r==null?0:8*r.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(r){this.numBits=r}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(r){this.errorsCorrected=r}getErasures(){return this.erasures}setErasures(r){this.erasures=r}getOther(){return this.other}setOther(r){this.other=r}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Pe{exp(r){return this.expTable[r]}log(r){if(r===0)throw new N;return this.logTable[r]}static addOrSubtract(r,a){return r^a}}class Te{constructor(r,a){if(a.length===0)throw new N;this.field=r;const c=a.length;if(c>1&&a[0]===0){let u=1;for(;u<c&&a[u]===0;)u++;u===c?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(c-u),E.arraycopy(a,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);const a=this.coefficients;let c;if(r===1){c=0;for(let h=0,b=a.length;h!==b;h++){const w=a[h];c=Pe.addOrSubtract(c,w)}return c}c=a[0];const u=a.length,d=this.field;for(let h=1;h<u;h++)c=Pe.addOrSubtract(d.multiply(r,c),a[h]);return c}addOrSubtract(r){if(!this.field.equals(r.field))throw new N("GenericGFPolys do not have same GenericGF field");if(this.isZero())return r;if(r.isZero())return this;let a=this.coefficients,c=r.coefficients;if(a.length>c.length){const h=a;a=c,c=h}let u=new Int32Array(c.length);const d=c.length-a.length;E.arraycopy(c,0,u,0,d);for(let h=d;h<c.length;h++)u[h]=Pe.addOrSubtract(a[h-d],c[h]);return new Te(this.field,u)}multiply(r){if(!this.field.equals(r.field))throw new N("GenericGFPolys do not have same GenericGF field");if(this.isZero()||r.isZero())return this.field.getZero();const a=this.coefficients,c=a.length,u=r.coefficients,d=u.length,h=new Int32Array(c+d-1),b=this.field;for(let w=0;w<c;w++){const T=a[w];for(let V=0;V<d;V++)h[w+V]=Pe.addOrSubtract(h[w+V],b.multiply(T,u[V]))}return new Te(b,h)}multiplyScalar(r){if(r===0)return this.field.getZero();if(r===1)return this;const a=this.coefficients.length,c=this.field,u=new Int32Array(a),d=this.coefficients;for(let h=0;h<a;h++)u[h]=c.multiply(d[h],r);return new Te(c,u)}multiplyByMonomial(r,a){if(r<0)throw new N;if(a===0)return this.field.getZero();const c=this.coefficients,u=c.length,d=new Int32Array(u+r),h=this.field;for(let b=0;b<u;b++)d[b]=h.multiply(c[b],a);return new Te(h,d)}divide(r){if(!this.field.equals(r.field))throw new N("GenericGFPolys do not have same GenericGF field");if(r.isZero())throw new N("Divide by 0");const a=this.field;let c=a.getZero(),u=this;const d=r.getCoefficient(r.getDegree()),h=a.inverse(d);for(;u.getDegree()>=r.getDegree()&&!u.isZero();){const b=u.getDegree()-r.getDegree(),w=a.multiply(u.getCoefficient(u.getDegree()),h),T=r.multiplyByMonomial(b,w),V=a.buildMonomial(b,w);c=c.addOrSubtract(V),u=u.addOrSubtract(T)}return[c,u]}toString(){let r="";for(let a=this.getDegree();a>=0;a--){let c=this.getCoefficient(a);if(c!==0){if(c<0?(r+=" - ",c=-c):r.length>0&&(r+=" + "),a===0||c!==1){const u=this.field.log(c);u===0?r+="1":u===1?r+="a":(r+="a^",r+=u)}a!==0&&(a===1?r+="x":(r+="x^",r+=a))}}return r}}class Ye extends x{}Ye.kind="ArithmeticException";class He extends Pe{constructor(r,a,c){super(),this.primitive=r,this.size=a,this.generatorBase=c;const u=new Int32Array(a);let d=1;for(let b=0;b<a;b++)u[b]=d,d*=2,d>=a&&(d^=r,d&=a-1);this.expTable=u;const h=new Int32Array(a);for(let b=0;b<a-1;b++)h[u[b]]=b;this.logTable=h,this.zero=new Te(this,Int32Array.from([0])),this.one=new Te(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,a){if(r<0)throw new N;if(a===0)return this.zero;const c=new Int32Array(r+1);return c[0]=a,new Te(this,c)}inverse(r){if(r===0)throw new Ye;return this.expTable[this.size-this.logTable[r]-1]}multiply(r,a){return r===0||a===0?0:this.expTable[(this.logTable[r]+this.logTable[a])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+D.toHexString(this.primitive)+","+this.size+")"}equals(r){return r===this}}He.AZTEC_DATA_12=new He(4201,4096,1),He.AZTEC_DATA_10=new He(1033,1024,1),He.AZTEC_DATA_6=new He(67,64,1),He.AZTEC_PARAM=new He(19,16,1),He.QR_CODE_FIELD_256=new He(285,256,0),He.DATA_MATRIX_FIELD_256=new He(301,256,1),He.AZTEC_DATA_8=He.DATA_MATRIX_FIELD_256,He.MAXICODE_FIELD_64=He.AZTEC_DATA_6;class ut extends x{}ut.kind="ReedSolomonException";class Me extends x{}Me.kind="IllegalStateException";class me{constructor(r){this.field=r}decode(r,a){const c=this.field,u=new Te(c,r),d=new Int32Array(a);let h=!0;for(let be=0;be<a;be++){const Se=u.evaluateAt(c.exp(be+c.getGeneratorBase()));d[d.length-1-be]=Se,Se!==0&&(h=!1)}if(h)return;const b=new Te(c,d),w=this.runEuclideanAlgorithm(c.buildMonomial(a,1),b,a),T=w[0],V=w[1],X=this.findErrorLocations(T),se=this.findErrorMagnitudes(V,X);for(let be=0;be<X.length;be++){const Se=r.length-1-c.log(X[be]);if(Se<0)throw new ut("Bad error location");r[Se]=He.addOrSubtract(r[Se],se[be])}}runEuclideanAlgorithm(r,a,c){if(r.getDegree()<a.getDegree()){const be=r;r=a,a=be}const u=this.field;let d=r,h=a,b=u.getZero(),w=u.getOne();for(;h.getDegree()>=(c/2|0);){let be=d,Se=b;if(d=h,b=w,d.isZero())throw new ut("r_{i-1} was zero");h=be;let Ee=u.getZero();const Le=d.getCoefficient(d.getDegree()),Ge=u.inverse(Le);for(;h.getDegree()>=d.getDegree()&&!h.isZero();){const at=h.getDegree()-d.getDegree(),dt=u.multiply(h.getCoefficient(h.getDegree()),Ge);Ee=Ee.addOrSubtract(u.buildMonomial(at,dt)),h=h.addOrSubtract(d.multiplyByMonomial(at,dt))}if(w=Ee.multiply(b).addOrSubtract(Se),h.getDegree()>=d.getDegree())throw new Me("Division algorithm failed to reduce polynomial?")}const T=w.getCoefficient(0);if(T===0)throw new ut("sigmaTilde(0) was zero");const V=u.inverse(T),X=w.multiplyScalar(V),se=h.multiplyScalar(V);return[X,se]}findErrorLocations(r){const a=r.getDegree();if(a===1)return Int32Array.from([r.getCoefficient(1)]);const c=new Int32Array(a);let u=0;const d=this.field;for(let h=1;h<d.getSize()&&u<a;h++)r.evaluateAt(h)===0&&(c[u]=d.inverse(h),u++);if(u!==a)throw new ut("Error locator degree does not match number of roots");return c}findErrorMagnitudes(r,a){const c=a.length,u=new Int32Array(c),d=this.field;for(let h=0;h<c;h++){const b=d.inverse(a[h]);let w=1;for(let T=0;T<c;T++)if(h!==T){const V=d.multiply(a[T],b),X=V&1?V&-2:V|1;w=d.multiply(w,X)}u[h]=d.multiply(r.evaluateAt(b),d.inverse(w)),d.getGeneratorBase()!==0&&(u[h]=d.multiply(u[h],b))}return u}}var st;(function(Z){Z[Z.UPPER=0]="UPPER",Z[Z.LOWER=1]="LOWER",Z[Z.MIXED=2]="MIXED",Z[Z.DIGIT=3]="DIGIT",Z[Z.PUNCT=4]="PUNCT",Z[Z.BINARY=5]="BINARY"})(st||(st={}));class Fe{decode(r){this.ddata=r;let a=r.getBits(),c=this.extractBits(a),u=this.correctBits(c),d=Fe.convertBoolArrayToByteArray(u),h=Fe.getEncodedData(u),b=new ve(d,h,null,null);return b.setNumBits(u.length),b}static highLevelDecode(r){return this.getEncodedData(r)}static getEncodedData(r){let a=r.length,c=st.UPPER,u=st.UPPER,d="",h=0;for(;h<a;)if(u===st.BINARY){if(a-h<5)break;let b=Fe.readCode(r,h,5);if(h+=5,b===0){if(a-h<11)break;b=Fe.readCode(r,h,11)+31,h+=11}for(let w=0;w<b;w++){if(a-h<8){h=a;break}const T=Fe.readCode(r,h,8);d+=R.castAsNonUtf8Char(T),h+=8}u=c}else{let b=u===st.DIGIT?4:5;if(a-h<b)break;let w=Fe.readCode(r,h,b);h+=b;let T=Fe.getCharacter(u,w);T.startsWith("CTRL_")?(c=u,u=Fe.getTable(T.charAt(5)),T.charAt(6)==="L"&&(c=u)):(d+=T,u=c)}return d}static getTable(r){switch(r){case"L":return st.LOWER;case"P":return st.PUNCT;case"M":return st.MIXED;case"D":return st.DIGIT;case"B":return st.BINARY;case"U":default:return st.UPPER}}static getCharacter(r,a){switch(r){case st.UPPER:return Fe.UPPER_TABLE[a];case st.LOWER:return Fe.LOWER_TABLE[a];case st.MIXED:return Fe.MIXED_TABLE[a];case st.PUNCT:return Fe.PUNCT_TABLE[a];case st.DIGIT:return Fe.DIGIT_TABLE[a];default:throw new Me("Bad table")}}correctBits(r){let a,c;this.ddata.getNbLayers()<=2?(c=6,a=He.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(c=8,a=He.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(c=10,a=He.AZTEC_DATA_10):(c=12,a=He.AZTEC_DATA_12);let u=this.ddata.getNbDatablocks(),d=r.length/c;if(d<u)throw new F;let h=r.length%c,b=new Int32Array(d);for(let se=0;se<d;se++,h+=c)b[se]=Fe.readCode(r,h,c);try{new me(a).decode(b,d-u)}catch(se){throw new F(se)}let w=(1<<c)-1,T=0;for(let se=0;se<u;se++){let be=b[se];if(be===0||be===w)throw new F;(be===1||be===w-1)&&T++}let V=new Array(u*c-T),X=0;for(let se=0;se<u;se++){let be=b[se];if(be===1||be===w-1)V.fill(be>1,X,X+c-1),X+=c-1;else for(let Se=c-1;Se>=0;--Se)V[X++]=(be&1<<Se)!==0}return V}extractBits(r){let a=this.ddata.isCompact(),c=this.ddata.getNbLayers(),u=(a?11:14)+c*4,d=new Int32Array(u),h=new Array(this.totalBitsInLayer(c,a));if(a)for(let b=0;b<d.length;b++)d[b]=b;else{let b=u+1+2*D.truncDivision(D.truncDivision(u,2)-1,15),w=u/2,T=D.truncDivision(b,2);for(let V=0;V<w;V++){let X=V+D.truncDivision(V,15);d[w-V-1]=T-X-1,d[w+V]=T+X+1}}for(let b=0,w=0;b<c;b++){let T=(c-b)*4+(a?9:12),V=b*2,X=u-1-V;for(let se=0;se<T;se++){let be=se*2;for(let Se=0;Se<2;Se++)h[w+be+Se]=r.get(d[V+Se],d[V+se]),h[w+2*T+be+Se]=r.get(d[V+se],d[X-Se]),h[w+4*T+be+Se]=r.get(d[X-Se],d[X-se]),h[w+6*T+be+Se]=r.get(d[X-se],d[V+Se])}w+=T*8}return h}static readCode(r,a,c){let u=0;for(let d=a;d<a+c;d++)u<<=1,r[d]&&(u|=1);return u}static readByte(r,a){let c=r.length-a;return c>=8?Fe.readCode(r,a,8):Fe.readCode(r,a,c)<<8-c}static convertBoolArrayToByteArray(r){let a=new Uint8Array((r.length+7)/8);for(let c=0;c<a.length;c++)a[c]=Fe.readByte(r,8*c);return a}totalBitsInLayer(r,a){return((a?88:112)+16*r)*r}}Fe.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Fe.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Fe.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Fe.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Fe.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class we{constructor(){}static round(r){return r===NaN?0:r<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:r>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:r+(r<0?-.5:.5)|0}static distance(r,a,c,u){const d=r-c,h=a-u;return Math.sqrt(d*d+h*h)}static sum(r){let a=0;for(let c=0,u=r.length;c!==u;c++){const d=r[c];a+=d}return a}}class Xe{static floatToIntBits(r){return r}}Xe.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Re{constructor(r,a){this.x=r,this.y=a}getX(){return this.x}getY(){return this.y}equals(r){if(r instanceof Re){const a=r;return this.x===a.x&&this.y===a.y}return!1}hashCode(){return 31*Xe.floatToIntBits(this.x)+Xe.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(r){const a=this.distance(r[0],r[1]),c=this.distance(r[1],r[2]),u=this.distance(r[0],r[2]);let d,h,b;if(c>=a&&c>=u?(h=r[0],d=r[1],b=r[2]):u>=c&&u>=a?(h=r[1],d=r[0],b=r[2]):(h=r[2],d=r[0],b=r[1]),this.crossProductZ(d,h,b)<0){const w=d;d=b,b=w}r[0]=d,r[1]=h,r[2]=b}static distance(r,a){return we.distance(r.x,r.y,a.x,a.y)}static crossProductZ(r,a,c){const u=a.x,d=a.y;return(c.x-u)*(r.y-d)-(c.y-d)*(r.x-u)}}class Qe{constructor(r,a){this.bits=r,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class gt extends Qe{constructor(r,a,c,u,d){super(r,a),this.compact=c,this.nbDatablocks=u,this.nbLayers=d}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class pt{constructor(r,a,c,u){this.image=r,this.height=r.getHeight(),this.width=r.getWidth(),a==null&&(a=pt.INIT_SIZE),c==null&&(c=r.getWidth()/2|0),u==null&&(u=r.getHeight()/2|0);const d=a/2|0;if(this.leftInit=c-d,this.rightInit=c+d,this.upInit=u-d,this.downInit=u+d,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ne}detect(){let r=this.leftInit,a=this.rightInit,c=this.upInit,u=this.downInit,d=!1,h=!0,b=!1,w=!1,T=!1,V=!1,X=!1;const se=this.width,be=this.height;for(;h;){h=!1;let Se=!0;for(;(Se||!w)&&a<se;)Se=this.containsBlackPoint(c,u,a,!1),Se?(a++,h=!0,w=!0):w||a++;if(a>=se){d=!0;break}let Ee=!0;for(;(Ee||!T)&&u<be;)Ee=this.containsBlackPoint(r,a,u,!0),Ee?(u++,h=!0,T=!0):T||u++;if(u>=be){d=!0;break}let Le=!0;for(;(Le||!V)&&r>=0;)Le=this.containsBlackPoint(c,u,r,!1),Le?(r--,h=!0,V=!0):V||r--;if(r<0){d=!0;break}let Ge=!0;for(;(Ge||!X)&&c>=0;)Ge=this.containsBlackPoint(r,a,c,!0),Ge?(c--,h=!0,X=!0):X||c--;if(c<0){d=!0;break}h&&(b=!0)}if(!d&&b){const Se=a-r;let Ee=null;for(let dt=1;Ee===null&&dt<Se;dt++)Ee=this.getBlackPointOnSegment(r,u-dt,r+dt,u);if(Ee==null)throw new ne;let Le=null;for(let dt=1;Le===null&&dt<Se;dt++)Le=this.getBlackPointOnSegment(r,c+dt,r+dt,c);if(Le==null)throw new ne;let Ge=null;for(let dt=1;Ge===null&&dt<Se;dt++)Ge=this.getBlackPointOnSegment(a,c+dt,a-dt,c);if(Ge==null)throw new ne;let at=null;for(let dt=1;at===null&&dt<Se;dt++)at=this.getBlackPointOnSegment(a,u-dt,a-dt,u);if(at==null)throw new ne;return this.centerEdges(at,Ee,Ge,Le)}else throw new ne}getBlackPointOnSegment(r,a,c,u){const d=we.round(we.distance(r,a,c,u)),h=(c-r)/d,b=(u-a)/d,w=this.image;for(let T=0;T<d;T++){const V=we.round(r+T*h),X=we.round(a+T*b);if(w.get(V,X))return new Re(V,X)}return null}centerEdges(r,a,c,u){const d=r.getX(),h=r.getY(),b=a.getX(),w=a.getY(),T=c.getX(),V=c.getY(),X=u.getX(),se=u.getY(),be=pt.CORR;return d<this.width/2?[new Re(X-be,se+be),new Re(b+be,w+be),new Re(T-be,V-be),new Re(d+be,h-be)]:[new Re(X+be,se+be),new Re(b+be,w-be),new Re(T-be,V+be),new Re(d-be,h-be)]}containsBlackPoint(r,a,c,u){const d=this.image;if(u){for(let h=r;h<=a;h++)if(d.get(h,c))return!0}else for(let h=r;h<=a;h++)if(d.get(c,h))return!0;return!1}}pt.INIT_SIZE=10,pt.CORR=1;class qe{static checkAndNudgePoints(r,a){const c=r.getWidth(),u=r.getHeight();let d=!0;for(let h=0;h<a.length&&d;h+=2){const b=Math.floor(a[h]),w=Math.floor(a[h+1]);if(b<-1||b>c||w<-1||w>u)throw new ne;d=!1,b===-1?(a[h]=0,d=!0):b===c&&(a[h]=c-1,d=!0),w===-1?(a[h+1]=0,d=!0):w===u&&(a[h+1]=u-1,d=!0)}d=!0;for(let h=a.length-2;h>=0&&d;h-=2){const b=Math.floor(a[h]),w=Math.floor(a[h+1]);if(b<-1||b>c||w<-1||w>u)throw new ne;d=!1,b===-1?(a[h]=0,d=!0):b===c&&(a[h]=c-1,d=!0),w===-1?(a[h+1]=0,d=!0):w===u&&(a[h+1]=u-1,d=!0)}}}class ct{constructor(r,a,c,u,d,h,b,w,T){this.a11=r,this.a21=a,this.a31=c,this.a12=u,this.a22=d,this.a32=h,this.a13=b,this.a23=w,this.a33=T}static quadrilateralToQuadrilateral(r,a,c,u,d,h,b,w,T,V,X,se,be,Se,Ee,Le){const Ge=ct.quadrilateralToSquare(r,a,c,u,d,h,b,w);return ct.squareToQuadrilateral(T,V,X,se,be,Se,Ee,Le).times(Ge)}transformPoints(r){const a=r.length,c=this.a11,u=this.a12,d=this.a13,h=this.a21,b=this.a22,w=this.a23,T=this.a31,V=this.a32,X=this.a33;for(let se=0;se<a;se+=2){const be=r[se],Se=r[se+1],Ee=d*be+w*Se+X;r[se]=(c*be+h*Se+T)/Ee,r[se+1]=(u*be+b*Se+V)/Ee}}transformPointsWithValues(r,a){const c=this.a11,u=this.a12,d=this.a13,h=this.a21,b=this.a22,w=this.a23,T=this.a31,V=this.a32,X=this.a33,se=r.length;for(let be=0;be<se;be++){const Se=r[be],Ee=a[be],Le=d*Se+w*Ee+X;r[be]=(c*Se+h*Ee+T)/Le,a[be]=(u*Se+b*Ee+V)/Le}}static squareToQuadrilateral(r,a,c,u,d,h,b,w){const T=r-c+d-b,V=a-u+h-w;if(T===0&&V===0)return new ct(c-r,d-c,r,u-a,h-u,a,0,0,1);{const X=c-d,se=b-d,be=u-h,Se=w-h,Ee=X*Se-se*be,Le=(T*Se-se*V)/Ee,Ge=(X*V-T*be)/Ee;return new ct(c-r+Le*c,b-r+Ge*b,r,u-a+Le*u,w-a+Ge*w,a,Le,Ge,1)}}static quadrilateralToSquare(r,a,c,u,d,h,b,w){return ct.squareToQuadrilateral(r,a,c,u,d,h,b,w).buildAdjoint()}buildAdjoint(){return new ct(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(r){return new ct(this.a11*r.a11+this.a21*r.a12+this.a31*r.a13,this.a11*r.a21+this.a21*r.a22+this.a31*r.a23,this.a11*r.a31+this.a21*r.a32+this.a31*r.a33,this.a12*r.a11+this.a22*r.a12+this.a32*r.a13,this.a12*r.a21+this.a22*r.a22+this.a32*r.a23,this.a12*r.a31+this.a22*r.a32+this.a32*r.a33,this.a13*r.a11+this.a23*r.a12+this.a33*r.a13,this.a13*r.a21+this.a23*r.a22+this.a33*r.a23,this.a13*r.a31+this.a23*r.a32+this.a33*r.a33)}}class St extends qe{sampleGrid(r,a,c,u,d,h,b,w,T,V,X,se,be,Se,Ee,Le,Ge,at,dt){const ot=ct.quadrilateralToQuadrilateral(u,d,h,b,w,T,V,X,se,be,Se,Ee,Le,Ge,at,dt);return this.sampleGridWithTransform(r,a,c,ot)}sampleGridWithTransform(r,a,c,u){if(a<=0||c<=0)throw new ne;const d=new ee(a,c),h=new Float32Array(2*a);for(let b=0;b<c;b++){const w=h.length,T=b+.5;for(let V=0;V<w;V+=2)h[V]=V/2+.5,h[V+1]=T;u.transformPoints(h),qe.checkAndNudgePoints(r,h);try{for(let V=0;V<w;V+=2)r.get(Math.floor(h[V]),Math.floor(h[V+1]))&&d.set(V/2,b)}catch{throw new ne}}return d}}class Ot{static setGridSampler(r){Ot.gridSampler=r}static getInstance(){return Ot.gridSampler}}Ot.gridSampler=new St;class At{constructor(r,a){this.x=r,this.y=a}toResultPoint(){return new Re(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class qt{constructor(r){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=r}detect(){return this.detectMirror(!1)}detectMirror(r){let a=this.getMatrixCenter(),c=this.getBullsEyeCorners(a);if(r){let h=c[0];c[0]=c[2],c[2]=h}this.extractParameters(c);let u=this.sampleGrid(this.image,c[this.shift%4],c[(this.shift+1)%4],c[(this.shift+2)%4],c[(this.shift+3)%4]),d=this.getMatrixCornerPoints(c);return new gt(u,d,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(r){if(!this.isValidPoint(r[0])||!this.isValidPoint(r[1])||!this.isValidPoint(r[2])||!this.isValidPoint(r[3]))throw new ne;let a=2*this.nbCenterLayers,c=new Int32Array([this.sampleLine(r[0],r[1],a),this.sampleLine(r[1],r[2],a),this.sampleLine(r[2],r[3],a),this.sampleLine(r[3],r[0],a)]);this.shift=this.getRotation(c,a);let u=0;for(let h=0;h<4;h++){let b=c[(this.shift+h)%4];this.compact?(u<<=7,u+=b>>1&127):(u<<=10,u+=(b>>2&992)+(b>>1&31))}let d=this.getCorrectedParameterData(u,this.compact);this.compact?(this.nbLayers=(d>>6)+1,this.nbDataBlocks=(d&63)+1):(this.nbLayers=(d>>11)+1,this.nbDataBlocks=(d&2047)+1)}getRotation(r,a){let c=0;r.forEach((u,d,h)=>{let b=(u>>a-2<<1)+(u&1);c=(c<<3)+b}),c=((c&1)<<11)+(c>>1);for(let u=0;u<4;u++)if(D.bitCount(c^this.EXPECTED_CORNER_BITS[u])<=2)return u;throw new ne}getCorrectedParameterData(r,a){let c,u;a?(c=7,u=2):(c=10,u=4);let d=c-u,h=new Int32Array(c);for(let w=c-1;w>=0;--w)h[w]=r&15,r>>=4;try{new me(He.AZTEC_PARAM).decode(h,d)}catch{throw new ne}let b=0;for(let w=0;w<u;w++)b=(b<<4)+h[w];return b}getBullsEyeCorners(r){let a=r,c=r,u=r,d=r,h=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let X=this.getFirstDifferent(a,h,1,-1),se=this.getFirstDifferent(c,h,1,1),be=this.getFirstDifferent(u,h,-1,1),Se=this.getFirstDifferent(d,h,-1,-1);if(this.nbCenterLayers>2){let Ee=this.distancePoint(Se,X)*this.nbCenterLayers/(this.distancePoint(d,a)*(this.nbCenterLayers+2));if(Ee<.75||Ee>1.25||!this.isWhiteOrBlackRectangle(X,se,be,Se))break}a=X,c=se,u=be,d=Se,h=!h}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ne;this.compact=this.nbCenterLayers===5;let b=new Re(a.getX()+.5,a.getY()-.5),w=new Re(c.getX()+.5,c.getY()+.5),T=new Re(u.getX()-.5,u.getY()+.5),V=new Re(d.getX()-.5,d.getY()-.5);return this.expandSquare([b,w,T,V],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let r,a,c,u;try{let b=new pt(this.image).detect();r=b[0],a=b[1],c=b[2],u=b[3]}catch{let w=this.image.getWidth()/2,T=this.image.getHeight()/2;r=this.getFirstDifferent(new At(w+7,T-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new At(w+7,T+7),!1,1,1).toResultPoint(),c=this.getFirstDifferent(new At(w-7,T+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new At(w-7,T-7),!1,-1,-1).toResultPoint()}let d=we.round((r.getX()+u.getX()+a.getX()+c.getX())/4),h=we.round((r.getY()+u.getY()+a.getY()+c.getY())/4);try{let b=new pt(this.image,15,d,h).detect();r=b[0],a=b[1],c=b[2],u=b[3]}catch{r=this.getFirstDifferent(new At(d+7,h-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new At(d+7,h+7),!1,1,1).toResultPoint(),c=this.getFirstDifferent(new At(d-7,h+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new At(d-7,h-7),!1,-1,-1).toResultPoint()}return d=we.round((r.getX()+u.getX()+a.getX()+c.getX())/4),h=we.round((r.getY()+u.getY()+a.getY()+c.getY())/4),new At(d,h)}getMatrixCornerPoints(r){return this.expandSquare(r,2*this.nbCenterLayers,this.getDimension())}sampleGrid(r,a,c,u,d){let h=Ot.getInstance(),b=this.getDimension(),w=b/2-this.nbCenterLayers,T=b/2+this.nbCenterLayers;return h.sampleGrid(r,b,b,w,w,T,w,T,T,w,T,a.getX(),a.getY(),c.getX(),c.getY(),u.getX(),u.getY(),d.getX(),d.getY())}sampleLine(r,a,c){let u=0,d=this.distanceResultPoint(r,a),h=d/c,b=r.getX(),w=r.getY(),T=h*(a.getX()-r.getX())/d,V=h*(a.getY()-r.getY())/d;for(let X=0;X<c;X++)this.image.get(we.round(b+X*T),we.round(w+X*V))&&(u|=1<<c-X-1);return u}isWhiteOrBlackRectangle(r,a,c,u){let d=3;r=new At(r.getX()-d,r.getY()+d),a=new At(a.getX()-d,a.getY()-d),c=new At(c.getX()+d,c.getY()-d),u=new At(u.getX()+d,u.getY()+d);let h=this.getColor(u,r);if(h===0)return!1;let b=this.getColor(r,a);return b!==h||(b=this.getColor(a,c),b!==h)?!1:(b=this.getColor(c,u),b===h)}getColor(r,a){let c=this.distancePoint(r,a),u=(a.getX()-r.getX())/c,d=(a.getY()-r.getY())/c,h=0,b=r.getX(),w=r.getY(),T=this.image.get(r.getX(),r.getY()),V=Math.ceil(c);for(let se=0;se<V;se++)b+=u,w+=d,this.image.get(we.round(b),we.round(w))!==T&&h++;let X=h/c;return X>.1&&X<.9?0:X<=.1===T?1:-1}getFirstDifferent(r,a,c,u){let d=r.getX()+c,h=r.getY()+u;for(;this.isValid(d,h)&&this.image.get(d,h)===a;)d+=c,h+=u;for(d-=c,h-=u;this.isValid(d,h)&&this.image.get(d,h)===a;)d+=c;for(d-=c;this.isValid(d,h)&&this.image.get(d,h)===a;)h+=u;return h-=u,new At(d,h)}expandSquare(r,a,c){let u=c/(2*a),d=r[0].getX()-r[2].getX(),h=r[0].getY()-r[2].getY(),b=(r[0].getX()+r[2].getX())/2,w=(r[0].getY()+r[2].getY())/2,T=new Re(b+u*d,w+u*h),V=new Re(b-u*d,w-u*h);d=r[1].getX()-r[3].getX(),h=r[1].getY()-r[3].getY(),b=(r[1].getX()+r[3].getX())/2,w=(r[1].getY()+r[3].getY())/2;let X=new Re(b+u*d,w+u*h),se=new Re(b-u*d,w-u*h);return[T,X,V,se]}isValid(r,a){return r>=0&&r<this.image.getWidth()&&a>0&&a<this.image.getHeight()}isValidPoint(r){let a=we.round(r.getX()),c=we.round(r.getY());return this.isValid(a,c)}distancePoint(r,a){return we.distance(r.getX(),r.getY(),a.getX(),a.getY())}distanceResultPoint(r,a){return we.distance(r.getX(),r.getY(),a.getX(),a.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(D.truncDivision(this.nbLayers-4,8)+1)+15}}class mt{decode(r,a=null){let c=null,u=new qt(r.getBlackMatrix()),d=null,h=null;try{let V=u.detectMirror(!1);d=V.getPoints(),this.reportFoundResultPoints(a,d),h=new Fe().decode(V)}catch(V){c=V}if(h==null)try{let V=u.detectMirror(!0);d=V.getPoints(),this.reportFoundResultPoints(a,d),h=new Fe().decode(V)}catch(V){throw c??V}let b=new Q(h.getText(),h.getRawBytes(),h.getNumBits(),d,ue.AZTEC,E.currentTimeMillis()),w=h.getByteSegments();w!=null&&b.putMetadata(Ae.BYTE_SEGMENTS,w);let T=h.getECLevel();return T!=null&&b.putMetadata(Ae.ERROR_CORRECTION_LEVEL,T),b}reportFoundResultPoints(r,a){if(r!=null){let c=r.get(ae.NEED_RESULT_POINT_CALLBACK);c!=null&&a.forEach((u,d,h)=>{c.foundPossibleResultPoint(u)})}}reset(){}}class yn extends q{constructor(r=500){super(new mt,r)}}class Tt{decode(r,a){try{return this.doDecode(r,a)}catch{if(a&&a.get(ae.TRY_HARDER)===!0&&r.isRotateSupported()){const d=r.rotateCounterClockwise(),h=this.doDecode(d,a),b=h.getResultMetadata();let w=270;b!==null&&b.get(Ae.ORIENTATION)===!0&&(w=w+b.get(Ae.ORIENTATION)%360),h.putMetadata(Ae.ORIENTATION,w);const T=h.getResultPoints();if(T!==null){const V=d.getHeight();for(let X=0;X<T.length;X++)T[X]=new Re(V-T[X].getY()-1,T[X].getX())}return h}else throw new ne}}reset(){}doDecode(r,a){const c=r.getWidth(),u=r.getHeight();let d=new U(c);const h=a&&a.get(ae.TRY_HARDER)===!0,b=Math.max(1,u>>(h?8:5));let w;h?w=u:w=15;const T=Math.trunc(u/2);for(let V=0;V<w;V++){const X=Math.trunc((V+1)/2),se=(V&1)===0,be=T+b*(se?X:-X);if(be<0||be>=u)break;try{d=r.getBlackRow(be,d)}catch{continue}for(let Se=0;Se<2;Se++){if(Se===1&&(d.reverse(),a&&a.get(ae.NEED_RESULT_POINT_CALLBACK)===!0)){const Ee=new Map;a.forEach((Le,Ge)=>Ee.set(Ge,Le)),Ee.delete(ae.NEED_RESULT_POINT_CALLBACK),a=Ee}try{const Ee=this.decodeRow(be,d,a);if(Se===1){Ee.putMetadata(Ae.ORIENTATION,180);const Le=Ee.getResultPoints();Le!==null&&(Le[0]=new Re(c-Le[0].getX()-1,Le[0].getY()),Le[1]=new Re(c-Le[1].getX()-1,Le[1].getY()))}return Ee}catch{}}}throw new ne}static recordPattern(r,a,c){const u=c.length;for(let T=0;T<u;T++)c[T]=0;const d=r.getSize();if(a>=d)throw new ne;let h=!r.get(a),b=0,w=a;for(;w<d;){if(r.get(w)!==h)c[b]++;else{if(++b===u)break;c[b]=1,h=!h}w++}if(!(b===u||b===u-1&&w===d))throw new ne}static recordPatternInReverse(r,a,c){let u=c.length,d=r.get(a);for(;a>0&&u>=0;)r.get(--a)!==d&&(u--,d=!d);if(u>=0)throw new ne;Tt.recordPattern(r,a+1,c)}static patternMatchVariance(r,a,c){const u=r.length;let d=0,h=0;for(let T=0;T<u;T++)d+=r[T],h+=a[T];if(d<h)return Number.POSITIVE_INFINITY;const b=d/h;c*=b;let w=0;for(let T=0;T<u;T++){const V=r[T],X=a[T]*b,se=V>X?V-X:X-V;if(se>c)return Number.POSITIVE_INFINITY;w+=se}return w/d}}class Ne extends Tt{static findStartPattern(r){const a=r.getSize(),c=r.getNextSet(0);let u=0,d=Int32Array.from([0,0,0,0,0,0]),h=c,b=!1;const w=6;for(let T=c;T<a;T++)if(r.get(T)!==b)d[u]++;else{if(u===w-1){let V=Ne.MAX_AVG_VARIANCE,X=-1;for(let se=Ne.CODE_START_A;se<=Ne.CODE_START_C;se++){const be=Tt.patternMatchVariance(d,Ne.CODE_PATTERNS[se],Ne.MAX_INDIVIDUAL_VARIANCE);be<V&&(V=be,X=se)}if(X>=0&&r.isRange(Math.max(0,h-(T-h)/2),h,!1))return Int32Array.from([h,T,X]);h+=d[0]+d[1],d=d.slice(2,d.length-1),d[u-1]=0,d[u]=0,u--}else u++;d[u]=1,b=!b}throw new ne}static decodeCode(r,a,c){Tt.recordPattern(r,c,a);let u=Ne.MAX_AVG_VARIANCE,d=-1;for(let h=0;h<Ne.CODE_PATTERNS.length;h++){const b=Ne.CODE_PATTERNS[h],w=this.patternMatchVariance(a,b,Ne.MAX_INDIVIDUAL_VARIANCE);w<u&&(u=w,d=h)}if(d>=0)return d;throw new ne}decodeRow(r,a,c){const u=c&&c.get(ae.ASSUME_GS1)===!0,d=Ne.findStartPattern(a),h=d[2];let b=0;const w=new Uint8Array(20);w[b++]=h;let T;switch(h){case Ne.CODE_START_A:T=Ne.CODE_CODE_A;break;case Ne.CODE_START_B:T=Ne.CODE_CODE_B;break;case Ne.CODE_START_C:T=Ne.CODE_CODE_C;break;default:throw new F}let V=!1,X=!1,se="",be=d[0],Se=d[1];const Ee=Int32Array.from([0,0,0,0,0,0]);let Le=0,Ge=0,at=h,dt=0,ot=!0,on=!1,Yt=!1;for(;!V;){const Pa=X;switch(X=!1,Le=Ge,Ge=Ne.decodeCode(a,Ee,Se),w[b++]=Ge,Ge!==Ne.CODE_STOP&&(ot=!0),Ge!==Ne.CODE_STOP&&(dt++,at+=dt*Ge),be=Se,Se+=Ee.reduce(($i,ea)=>$i+ea,0),Ge){case Ne.CODE_START_A:case Ne.CODE_START_B:case Ne.CODE_START_C:throw new F}switch(T){case Ne.CODE_CODE_A:if(Ge<64)Yt===on?se+=String.fromCharCode(32+Ge):se+=String.fromCharCode(32+Ge+128),Yt=!1;else if(Ge<96)Yt===on?se+=String.fromCharCode(Ge-64):se+=String.fromCharCode(Ge+64),Yt=!1;else switch(Ge!==Ne.CODE_STOP&&(ot=!1),Ge){case Ne.CODE_FNC_1:u&&(se.length===0?se+="]C1":se+="");break;case Ne.CODE_FNC_2:case Ne.CODE_FNC_3:break;case Ne.CODE_FNC_4_A:!on&&Yt?(on=!0,Yt=!1):on&&Yt?(on=!1,Yt=!1):Yt=!0;break;case Ne.CODE_SHIFT:X=!0,T=Ne.CODE_CODE_B;break;case Ne.CODE_CODE_B:T=Ne.CODE_CODE_B;break;case Ne.CODE_CODE_C:T=Ne.CODE_CODE_C;break;case Ne.CODE_STOP:V=!0;break}break;case Ne.CODE_CODE_B:if(Ge<96)Yt===on?se+=String.fromCharCode(32+Ge):se+=String.fromCharCode(32+Ge+128),Yt=!1;else switch(Ge!==Ne.CODE_STOP&&(ot=!1),Ge){case Ne.CODE_FNC_1:u&&(se.length===0?se+="]C1":se+="");break;case Ne.CODE_FNC_2:case Ne.CODE_FNC_3:break;case Ne.CODE_FNC_4_B:!on&&Yt?(on=!0,Yt=!1):on&&Yt?(on=!1,Yt=!1):Yt=!0;break;case Ne.CODE_SHIFT:X=!0,T=Ne.CODE_CODE_A;break;case Ne.CODE_CODE_A:T=Ne.CODE_CODE_A;break;case Ne.CODE_CODE_C:T=Ne.CODE_CODE_C;break;case Ne.CODE_STOP:V=!0;break}break;case Ne.CODE_CODE_C:if(Ge<100)Ge<10&&(se+="0"),se+=Ge;else switch(Ge!==Ne.CODE_STOP&&(ot=!1),Ge){case Ne.CODE_FNC_1:u&&(se.length===0?se+="]C1":se+="");break;case Ne.CODE_CODE_A:T=Ne.CODE_CODE_A;break;case Ne.CODE_CODE_B:T=Ne.CODE_CODE_B;break;case Ne.CODE_STOP:V=!0;break}break}Pa&&(T=T===Ne.CODE_CODE_A?Ne.CODE_CODE_B:Ne.CODE_CODE_A)}const _r=Se-be;if(Se=a.getNextUnset(Se),!a.isRange(Se,Math.min(a.getSize(),Se+(Se-be)/2),!1))throw new ne;if(at-=dt*Le,at%103!==Le)throw new v;const ri=se.length;if(ri===0)throw new ne;ri>0&&ot&&(T===Ne.CODE_CODE_C?se=se.substring(0,ri-2):se=se.substring(0,ri-1));const Cr=(d[1]+d[0])/2,An=be+_r/2,br=w.length,Pr=new Uint8Array(br);for(let Pa=0;Pa<br;Pa++)Pr[Pa]=w[Pa];const Hi=[new Re(Cr,r),new Re(An,r)];return new Q(se,Pr,0,Hi,ue.CODE_128,new Date().getTime())}}Ne.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Ne.MAX_AVG_VARIANCE=.25,Ne.MAX_INDIVIDUAL_VARIANCE=.7,Ne.CODE_SHIFT=98,Ne.CODE_CODE_C=99,Ne.CODE_CODE_B=100,Ne.CODE_CODE_A=101,Ne.CODE_FNC_1=102,Ne.CODE_FNC_2=97,Ne.CODE_FNC_3=96,Ne.CODE_FNC_4_A=101,Ne.CODE_FNC_4_B=100,Ne.CODE_START_A=103,Ne.CODE_START_B=104,Ne.CODE_START_C=105,Ne.CODE_STOP=106;class ft extends Tt{constructor(r=!1,a=!1){super(),this.usingCheckDigit=r,this.extendedMode=a,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(r,a,c){let u=this.counters;u.fill(0),this.decodeRowResult="";let d=ft.findAsteriskPattern(a,u),h=a.getNextSet(d[1]),b=a.getSize(),w,T;do{ft.recordPattern(a,h,u);let Ee=ft.toNarrowWidePattern(u);if(Ee<0)throw new ne;w=ft.patternToChar(Ee),this.decodeRowResult+=w,T=h;for(let Le of u)h+=Le;h=a.getNextSet(h)}while(w!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let V=0;for(let Ee of u)V+=Ee;let X=h-T-V;if(h!==b&&X*2<V)throw new ne;if(this.usingCheckDigit){let Ee=this.decodeRowResult.length-1,Le=0;for(let Ge=0;Ge<Ee;Ge++)Le+=ft.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Ge));if(this.decodeRowResult.charAt(Ee)!==ft.ALPHABET_STRING.charAt(Le%43))throw new v;this.decodeRowResult=this.decodeRowResult.substring(0,Ee)}if(this.decodeRowResult.length===0)throw new ne;let se;this.extendedMode?se=ft.decodeExtended(this.decodeRowResult):se=this.decodeRowResult;let be=(d[1]+d[0])/2,Se=T+V/2;return new Q(se,null,0,[new Re(be,r),new Re(Se,r)],ue.CODE_39,new Date().getTime())}static findAsteriskPattern(r,a){let c=r.getSize(),u=r.getNextSet(0),d=0,h=u,b=!1,w=a.length;for(let T=u;T<c;T++)if(r.get(T)!==b)a[d]++;else{if(d===w-1){if(this.toNarrowWidePattern(a)===ft.ASTERISK_ENCODING&&r.isRange(Math.max(0,h-Math.floor((T-h)/2)),h,!1))return[h,T];h+=a[0]+a[1],a.copyWithin(0,2,2+d-1),a[d-1]=0,a[d]=0,d--}else d++;a[d]=1,b=!b}throw new ne}static toNarrowWidePattern(r){let a=r.length,c=0,u;do{let d=2147483647;for(let w of r)w<d&&w>c&&(d=w);c=d,u=0;let h=0,b=0;for(let w=0;w<a;w++){let T=r[w];T>c&&(b|=1<<a-1-w,u++,h+=T)}if(u===3){for(let w=0;w<a&&u>0;w++){let T=r[w];if(T>c&&(u--,T*2>=h))return-1}return b}}while(u>3);return-1}static patternToChar(r){for(let a=0;a<ft.CHARACTER_ENCODINGS.length;a++)if(ft.CHARACTER_ENCODINGS[a]===r)return ft.ALPHABET_STRING.charAt(a);if(r===ft.ASTERISK_ENCODING)return"*";throw new ne}static decodeExtended(r){let a=r.length,c="";for(let u=0;u<a;u++){let d=r.charAt(u);if(d==="+"||d==="$"||d==="%"||d==="/"){let h=r.charAt(u+1),b="\0";switch(d){case"+":if(h>="A"&&h<="Z")b=String.fromCharCode(h.charCodeAt(0)+32);else throw new F;break;case"$":if(h>="A"&&h<="Z")b=String.fromCharCode(h.charCodeAt(0)-64);else throw new F;break;case"%":if(h>="A"&&h<="E")b=String.fromCharCode(h.charCodeAt(0)-38);else if(h>="F"&&h<="J")b=String.fromCharCode(h.charCodeAt(0)-11);else if(h>="K"&&h<="O")b=String.fromCharCode(h.charCodeAt(0)+16);else if(h>="P"&&h<="T")b=String.fromCharCode(h.charCodeAt(0)+43);else if(h==="U")b="\0";else if(h==="V")b="@";else if(h==="W")b="`";else if(h==="X"||h==="Y"||h==="Z")b="";else throw new F;break;case"/":if(h>="A"&&h<="O")b=String.fromCharCode(h.charCodeAt(0)-32);else if(h==="Z")b=":";else throw new F;break}c+=b,u++}else c+=d}return c}}ft.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",ft.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],ft.ASTERISK_ENCODING=148;class xt extends Tt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(r,a,c){let u=this.decodeStart(a),d=this.decodeEnd(a),h=new re;xt.decodeMiddle(a,u[1],d[0],h);let b=h.toString(),w=null;c!=null&&(w=c.get(ae.ALLOWED_LENGTHS)),w==null&&(w=xt.DEFAULT_ALLOWED_LENGTHS);let T=b.length,V=!1,X=0;for(let Se of w){if(T===Se){V=!0;break}Se>X&&(X=Se)}if(!V&&T>X&&(V=!0),!V)throw new F;const se=[new Re(u[1],r),new Re(d[0],r)];return new Q(b,null,0,se,ue.ITF,new Date().getTime())}static decodeMiddle(r,a,c,u){let d=new Int32Array(10),h=new Int32Array(5),b=new Int32Array(5);for(d.fill(0),h.fill(0),b.fill(0);a<c;){Tt.recordPattern(r,a,d);for(let T=0;T<5;T++){let V=2*T;h[T]=d[V],b[T]=d[V+1]}let w=xt.decodeDigit(h);u.append(w.toString()),w=this.decodeDigit(b),u.append(w.toString()),d.forEach(function(T){a+=T})}}decodeStart(r){let a=xt.skipWhiteSpace(r),c=xt.findGuardPattern(r,a,xt.START_PATTERN);return this.narrowLineWidth=(c[1]-c[0])/4,this.validateQuietZone(r,c[0]),c}validateQuietZone(r,a){let c=this.narrowLineWidth*10;c=c<a?c:a;for(let u=a-1;c>0&&u>=0&&!r.get(u);u--)c--;if(c!==0)throw new ne}static skipWhiteSpace(r){const a=r.getSize(),c=r.getNextSet(0);if(c===a)throw new ne;return c}decodeEnd(r){r.reverse();try{let a=xt.skipWhiteSpace(r),c;try{c=xt.findGuardPattern(r,a,xt.END_PATTERN_REVERSED[0])}catch(d){d instanceof ne&&(c=xt.findGuardPattern(r,a,xt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,c[0]);let u=c[0];return c[0]=r.getSize()-c[1],c[1]=r.getSize()-u,c}finally{r.reverse()}}static findGuardPattern(r,a,c){let u=c.length,d=new Int32Array(u),h=r.getSize(),b=!1,w=0,T=a;d.fill(0);for(let V=a;V<h;V++)if(r.get(V)!==b)d[w]++;else{if(w===u-1){if(Tt.patternMatchVariance(d,c,xt.MAX_INDIVIDUAL_VARIANCE)<xt.MAX_AVG_VARIANCE)return[T,V];T+=d[0]+d[1],E.arraycopy(d,2,d,0,w-1),d[w-1]=0,d[w]=0,w--}else w++;d[w]=1,b=!b}throw new ne}static decodeDigit(r){let a=xt.MAX_AVG_VARIANCE,c=-1,u=xt.PATTERNS.length;for(let d=0;d<u;d++){let h=xt.PATTERNS[d],b=Tt.patternMatchVariance(r,h,xt.MAX_INDIVIDUAL_VARIANCE);b<a?(a=b,c=d):b===a&&(c=-1)}if(c>=0)return c%10;throw new ne}}xt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],xt.MAX_AVG_VARIANCE=.38,xt.MAX_INDIVIDUAL_VARIANCE=.5,xt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],xt.START_PATTERN=Int32Array.from([1,1,1,1]),xt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Pt extends Tt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(r){let a=!1,c,u=0,d=Int32Array.from([0,0,0]);for(;!a;){d=Int32Array.from([0,0,0]),c=Pt.findGuardPattern(r,u,!1,this.START_END_PATTERN,d);let h=c[0];u=c[1];let b=h-(u-h);b>=0&&(a=r.isRange(b,h,!1))}return c}static checkChecksum(r){return Pt.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let a=r.length;if(a===0)return!1;let c=parseInt(r.charAt(a-1),10);return Pt.getStandardUPCEANChecksum(r.substring(0,a-1))===c}static getStandardUPCEANChecksum(r){let a=r.length,c=0;for(let u=a-1;u>=0;u-=2){let d=r.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new F;c+=d}c*=3;for(let u=a-2;u>=0;u-=2){let d=r.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new F;c+=d}return(1e3-c)%10}static decodeEnd(r,a){return Pt.findGuardPattern(r,a,!1,Pt.START_END_PATTERN,new Int32Array(Pt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(r,a,c,u){return this.findGuardPattern(r,a,c,u,new Int32Array(u.length))}static findGuardPattern(r,a,c,u,d){let h=r.getSize();a=c?r.getNextUnset(a):r.getNextSet(a);let b=0,w=a,T=u.length,V=c;for(let X=a;X<h;X++)if(r.get(X)!==V)d[b]++;else{if(b===T-1){if(Tt.patternMatchVariance(d,u,Pt.MAX_INDIVIDUAL_VARIANCE)<Pt.MAX_AVG_VARIANCE)return Int32Array.from([w,X]);w+=d[0]+d[1];let se=d.slice(2,d.length-1);for(let be=0;be<b-1;be++)d[be]=se[be];d[b-1]=0,d[b]=0,b--}else b++;d[b]=1,V=!V}throw new ne}static decodeDigit(r,a,c,u){this.recordPattern(r,c,a);let d=this.MAX_AVG_VARIANCE,h=-1,b=u.length;for(let w=0;w<b;w++){let T=u[w],V=Tt.patternMatchVariance(a,T,Pt.MAX_INDIVIDUAL_VARIANCE);V<d&&(d=V,h=w)}if(h>=0)return h;throw new ne}}Pt.MAX_AVG_VARIANCE=.48,Pt.MAX_INDIVIDUAL_VARIANCE=.7,Pt.START_END_PATTERN=Int32Array.from([1,1,1]),Pt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Pt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Pt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Ft{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,a,c){let u=this.decodeRowStringBuffer,d=this.decodeMiddle(a,c,u),h=u.toString(),b=Ft.parseExtensionString(h),w=[new Re((c[0]+c[1])/2,r),new Re(d,r)],T=new Q(h,null,0,w,ue.UPC_EAN_EXTENSION,new Date().getTime());return b!=null&&T.putAllMetadata(b),T}decodeMiddle(r,a,c){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=r.getSize(),h=a[1],b=0;for(let T=0;T<5&&h<d;T++){let V=Pt.decodeDigit(r,u,h,Pt.L_AND_G_PATTERNS);c+=String.fromCharCode(48+V%10);for(let X of u)h+=X;V>=10&&(b|=1<<4-T),T!==4&&(h=r.getNextSet(h),h=r.getNextUnset(h))}if(c.length!==5)throw new ne;let w=this.determineCheckDigit(b);if(Ft.extensionChecksum(c.toString())!==w)throw new ne;return h}static extensionChecksum(r){let a=r.length,c=0;for(let u=a-2;u>=0;u-=2)c+=r.charAt(u).charCodeAt(0)-48;c*=3;for(let u=a-1;u>=0;u-=2)c+=r.charAt(u).charCodeAt(0)-48;return c*=3,c%10}determineCheckDigit(r){for(let a=0;a<10;a++)if(r===this.CHECK_DIGIT_ENCODINGS[a])return a;throw new ne}static parseExtensionString(r){if(r.length!==5)return null;let a=Ft.parseExtension5String(r);return a==null?null:new Map([[Ae.SUGGESTED_PRICE,a]])}static parseExtension5String(r){let a;switch(r.charAt(0)){case"0":a="";break;case"5":a="$";break;case"9":switch(r){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}a="";break;default:a="";break}let c=parseInt(r.substring(1)),u=(c/100).toString(),d=c%100,h=d<10?"0"+d:d.toString();return a+u+"."+h}}class Ai{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,a,c){let u=this.decodeRowStringBuffer,d=this.decodeMiddle(a,c,u),h=u.toString(),b=Ai.parseExtensionString(h),w=[new Re((c[0]+c[1])/2,r),new Re(d,r)],T=new Q(h,null,0,w,ue.UPC_EAN_EXTENSION,new Date().getTime());return b!=null&&T.putAllMetadata(b),T}decodeMiddle(r,a,c){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=r.getSize(),h=a[1],b=0;for(let w=0;w<2&&h<d;w++){let T=Pt.decodeDigit(r,u,h,Pt.L_AND_G_PATTERNS);c+=String.fromCharCode(48+T%10);for(let V of u)h+=V;T>=10&&(b|=1<<1-w),w!==1&&(h=r.getNextSet(h),h=r.getNextUnset(h))}if(c.length!==2)throw new ne;if(parseInt(c.toString())%4!==b)throw new ne;return h}static parseExtensionString(r){return r.length!==2?null:new Map([[Ae.ISSUE_NUMBER,parseInt(r)]])}}class Qn{static decodeRow(r,a,c){let u=Pt.findGuardPattern(a,c,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Ft().decodeRow(r,a,u)}catch{return new Ai().decodeRow(r,a,u)}}}Qn.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Jt extends Pt{constructor(){super(),this.decodeRowStringBuffer="",Jt.L_AND_G_PATTERNS=Jt.L_PATTERNS.map(r=>Int32Array.from(r));for(let r=10;r<20;r++){let a=Jt.L_PATTERNS[r-10],c=new Int32Array(a.length);for(let u=0;u<a.length;u++)c[u]=a[a.length-u-1];Jt.L_AND_G_PATTERNS[r]=c}}decodeRow(r,a,c){let u=Jt.findStartGuardPattern(a),d=c==null?null:c.get(ae.NEED_RESULT_POINT_CALLBACK);if(d!=null){const ot=new Re((u[0]+u[1])/2,r);d.foundPossibleResultPoint(ot)}let h=this.decodeMiddle(a,u,this.decodeRowStringBuffer),b=h.rowOffset,w=h.resultString;if(d!=null){const ot=new Re(b,r);d.foundPossibleResultPoint(ot)}let T=this.decodeEnd(a,b);if(d!=null){const ot=new Re((T[0]+T[1])/2,r);d.foundPossibleResultPoint(ot)}let V=T[1],X=V+(V-T[0]);if(X>=a.getSize()||!a.isRange(V,X,!1))throw new ne;let se=w.toString();if(se.length<8)throw new F;if(!Jt.checkChecksum(se))throw new v;let be=(u[1]+u[0])/2,Se=(T[1]+T[0])/2,Ee=this.getBarcodeFormat(),Le=[new Re(be,r),new Re(Se,r)],Ge=new Q(se,null,0,Le,Ee,new Date().getTime()),at=0;try{let ot=Qn.decodeRow(r,a,T[1]);Ge.putMetadata(Ae.UPC_EAN_EXTENSION,ot.getText()),Ge.putAllMetadata(ot.getResultMetadata()),Ge.addResultPoints(ot.getResultPoints()),at=ot.getText().length}catch{}let dt=c==null?null:c.get(ae.ALLOWED_EAN_EXTENSIONS);if(dt!=null){let ot=!1;for(let on in dt)if(at.toString()===on){ot=!0;break}if(!ot)throw new ne}return Ge}decodeEnd(r,a){return Jt.findGuardPattern(r,a,!1,Jt.START_END_PATTERN,new Int32Array(Jt.START_END_PATTERN.length).fill(0))}static checkChecksum(r){return Jt.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let a=r.length;if(a===0)return!1;let c=parseInt(r.charAt(a-1),10);return Jt.getStandardUPCEANChecksum(r.substring(0,a-1))===c}static getStandardUPCEANChecksum(r){let a=r.length,c=0;for(let u=a-1;u>=0;u-=2){let d=r.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new F;c+=d}c*=3;for(let u=a-2;u>=0;u-=2){let d=r.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new F;c+=d}return(1e3-c)%10}}class Kr extends Jt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,a,c){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=r.getSize(),h=a[1],b=0;for(let T=0;T<6&&h<d;T++){let V=Jt.decodeDigit(r,u,h,Jt.L_AND_G_PATTERNS);c+=String.fromCharCode(48+V%10);for(let X of u)h+=X;V>=10&&(b|=1<<5-T)}c=Kr.determineFirstDigit(c,b),h=Jt.findGuardPattern(r,h,!0,Jt.MIDDLE_PATTERN,new Int32Array(Jt.MIDDLE_PATTERN.length).fill(0))[1];for(let T=0;T<6&&h<d;T++){let V=Jt.decodeDigit(r,u,h,Jt.L_PATTERNS);c+=String.fromCharCode(48+V);for(let X of u)h+=X}return{rowOffset:h,resultString:c}}getBarcodeFormat(){return ue.EAN_13}static determineFirstDigit(r,a){for(let c=0;c<10;c++)if(a===this.FIRST_DIGIT_ENCODINGS[c])return r=String.fromCharCode(48+c)+r,r;throw new ne}}Kr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Kn extends Jt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,a,c){const u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=r.getSize(),h=a[1];for(let w=0;w<4&&h<d;w++){let T=Jt.decodeDigit(r,u,h,Jt.L_PATTERNS);c+=String.fromCharCode(48+T);for(let V of u)h+=V}h=Jt.findGuardPattern(r,h,!0,Jt.MIDDLE_PATTERN,new Int32Array(Jt.MIDDLE_PATTERN.length).fill(0))[1];for(let w=0;w<4&&h<d;w++){let T=Jt.decodeDigit(r,u,h,Jt.L_PATTERNS);c+=String.fromCharCode(48+T);for(let V of u)h+=V}return{rowOffset:h,resultString:c}}getBarcodeFormat(){return ue.EAN_8}}class Gt extends Jt{constructor(){super(...arguments),this.ean13Reader=new Kr}getBarcodeFormat(){return ue.UPC_A}decode(r,a){return this.maybeReturnResult(this.ean13Reader.decode(r))}decodeRow(r,a,c){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,a,c))}decodeMiddle(r,a,c){return this.ean13Reader.decodeMiddle(r,a,c)}maybeReturnResult(r){let a=r.getText();if(a.charAt(0)==="0"){let c=new Q(a.substring(1),null,null,r.getResultPoints(),ue.UPC_A);return r.getResultMetadata()!=null&&c.putAllMetadata(r.getResultMetadata()),c}else throw new ne}reset(){this.ean13Reader.reset()}}class en extends Jt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(r,a,c){const u=this.decodeMiddleCounters.map(T=>T);u[0]=0,u[1]=0,u[2]=0,u[3]=0;const d=r.getSize();let h=a[1],b=0;for(let T=0;T<6&&h<d;T++){const V=en.decodeDigit(r,u,h,en.L_AND_G_PATTERNS);c+=String.fromCharCode(48+V%10);for(let X of u)h+=X;V>=10&&(b|=1<<5-T)}let w=en.determineNumSysAndCheckDigit(c,b);return{rowOffset:h,resultString:w}}decodeEnd(r,a){return en.findGuardPatternWithoutCounters(r,a,!0,en.MIDDLE_END_PATTERN)}checkChecksum(r){return Jt.checkChecksum(en.convertUPCEtoUPCA(r))}static determineNumSysAndCheckDigit(r,a){for(let c=0;c<=1;c++)for(let u=0;u<10;u++)if(a===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[c][u]){let d=String.fromCharCode(48+c),h=String.fromCharCode(48+u);return d+r+h}throw ne.getNotFoundInstance()}getBarcodeFormat(){return ue.UPC_E}static convertUPCEtoUPCA(r){const a=r.slice(1,7).split("").map(d=>d.charCodeAt(0)),c=new re;c.append(r.charAt(0));let u=a[5];switch(u){case 0:case 1:case 2:c.appendChars(a,0,2),c.append(u),c.append("0000"),c.appendChars(a,2,3);break;case 3:c.appendChars(a,0,3),c.append("00000"),c.appendChars(a,3,2);break;case 4:c.appendChars(a,0,4),c.append("00000"),c.append(a[4]);break;default:c.appendChars(a,0,5),c.append("0000"),c.append(u);break}return r.length>=8&&c.append(r.charAt(7)),c.toString()}}en.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),en.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class fa extends Tt{constructor(r){super();let a=r==null?null:r.get(ae.POSSIBLE_FORMATS),c=[];i(a)?(c.push(new Kr),c.push(new Gt),c.push(new Kn),c.push(new en)):(a.indexOf(ue.EAN_13)>-1&&c.push(new Kr),a.indexOf(ue.UPC_A)>-1&&c.push(new Gt),a.indexOf(ue.EAN_8)>-1&&c.push(new Kn),a.indexOf(ue.UPC_E)>-1&&c.push(new en)),this.readers=c}decodeRow(r,a,c){for(let u of this.readers)try{const d=u.decodeRow(r,a,c),h=d.getBarcodeFormat()===ue.EAN_13&&d.getText().charAt(0)==="0",b=c==null?null:c.get(ae.POSSIBLE_FORMATS),w=b==null||b.includes(ue.UPC_A);if(h&&w){const T=d.getRawBytes(),V=new Q(d.getText().substring(1),T,T?T.length:null,d.getResultPoints(),ue.UPC_A);return V.putAllMetadata(d.getResultMetadata()),V}return d}catch{}throw new ne}reset(){for(let r of this.readers)r.reset()}}class xn extends Tt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(r,a){for(let c=0;c<a.length;c++)if(Tt.patternMatchVariance(r,a[c],xn.MAX_INDIVIDUAL_VARIANCE)<xn.MAX_AVG_VARIANCE)return c;throw new ne}static count(r){return we.sum(new Int32Array(r))}static increment(r,a){let c=0,u=a[0];for(let d=1;d<r.length;d++)a[d]>u&&(u=a[d],c=d);r[c]++}static decrement(r,a){let c=0,u=a[0];for(let d=1;d<r.length;d++)a[d]<u&&(u=a[d],c=d);r[c]--}static isFinderPattern(r){let a=r[0]+r[1],c=a+r[2]+r[3],u=a/c;if(u>=xn.MIN_FINDER_PATTERN_RATIO&&u<=xn.MAX_FINDER_PATTERN_RATIO){let d=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;for(let b of r)b>h&&(h=b),b<d&&(d=b);return h<10*d}return!1}}xn.MAX_AVG_VARIANCE=.2,xn.MAX_INDIVIDUAL_VARIANCE=.45,xn.MIN_FINDER_PATTERN_RATIO=9.5/12,xn.MAX_FINDER_PATTERN_RATIO=12.5/14;class Jr{constructor(r,a){this.value=r,this.checksumPortion=a}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(r){if(!(r instanceof Jr))return!1;const a=r;return this.value===a.value&&this.checksumPortion===a.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Si{constructor(r,a,c,u,d){this.value=r,this.startEnd=a,this.value=r,this.startEnd=a,this.resultPoints=new Array,this.resultPoints.push(new Re(c,d)),this.resultPoints.push(new Re(u,d))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(r){if(!(r instanceof Si))return!1;const a=r;return this.value===a.value}hashCode(){return this.value}}class It{constructor(){}static getRSSvalue(r,a,c){let u=0;for(let w of r)u+=w;let d=0,h=0,b=r.length;for(let w=0;w<b-1;w++){let T;for(T=1,h|=1<<w;T<r[w];T++,h&=~(1<<w)){let V=It.combins(u-T-1,b-w-2);if(c&&h===0&&u-T-(b-w-1)>=b-w-1&&(V-=It.combins(u-T-(b-w),b-w-2)),b-w-1>1){let X=0;for(let se=u-T-(b-w-2);se>a;se--)X+=It.combins(u-T-se-1,b-w-3);V-=X*(b-1-w)}else u-T>a&&V--;d+=V}u-=T}return d}static combins(r,a){let c,u;r-a>a?(u=a,c=r-a):(u=r-a,c=a);let d=1,h=1;for(let b=r;b>c;b--)d*=b,h<=u&&(d/=h,h++);for(;h<=u;)d/=h,h++;return d}}class Zi{static buildBitArray(r){let a=r.length*2-1;r[r.length-1].getRightChar()==null&&(a-=1);let c=12*a,u=new U(c),d=0,b=r[0].getRightChar().getValue();for(let w=11;w>=0;--w)b&1<<w&&u.set(d),d++;for(let w=1;w<r.length;++w){let T=r[w],V=T.getLeftChar().getValue();for(let X=11;X>=0;--X)V&1<<X&&u.set(d),d++;if(T.getRightChar()!=null){let X=T.getRightChar().getValue();for(let se=11;se>=0;--se)X&1<<se&&u.set(d),d++}}return u}}class $r{constructor(r,a){a?this.decodedInformation=null:(this.finished=r,this.decodedInformation=a)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class ei{constructor(r){this.newPosition=r}getNewPosition(){return this.newPosition}}class vn extends ei{constructor(r,a){super(r),this.value=a}getValue(){return this.value}isFNC1(){return this.value===vn.FNC1}}vn.FNC1="$";class kn extends ei{constructor(r,a,c){super(r),c?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=a}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Jn extends ei{constructor(r,a,c){if(super(r),a<0||a>10||c<0||c>10)throw new F;this.firstDigit=a,this.secondDigit=c}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Jn.FNC1}isSecondDigitFNC1(){return this.secondDigit===Jn.FNC1}isAnyFNC1(){return this.firstDigit===Jn.FNC1||this.secondDigit===Jn.FNC1}}Jn.FNC1=10;class wt{constructor(){}static parseFieldsInGeneralPurpose(r){if(!r)return null;if(r.length<2)throw new ne;let a=r.substring(0,2);for(let d of wt.TWO_DIGIT_DATA_LENGTH)if(d[0]===a)return d[1]===wt.VARIABLE_LENGTH?wt.processVariableAI(2,d[2],r):wt.processFixedAI(2,d[1],r);if(r.length<3)throw new ne;let c=r.substring(0,3);for(let d of wt.THREE_DIGIT_DATA_LENGTH)if(d[0]===c)return d[1]===wt.VARIABLE_LENGTH?wt.processVariableAI(3,d[2],r):wt.processFixedAI(3,d[1],r);for(let d of wt.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(d[0]===c)return d[1]===wt.VARIABLE_LENGTH?wt.processVariableAI(4,d[2],r):wt.processFixedAI(4,d[1],r);if(r.length<4)throw new ne;let u=r.substring(0,4);for(let d of wt.FOUR_DIGIT_DATA_LENGTH)if(d[0]===u)return d[1]===wt.VARIABLE_LENGTH?wt.processVariableAI(4,d[2],r):wt.processFixedAI(4,d[1],r);throw new ne}static processFixedAI(r,a,c){if(c.length<r)throw new ne;let u=c.substring(0,r);if(c.length<r+a)throw new ne;let d=c.substring(r,r+a),h=c.substring(r+a),b="("+u+")"+d,w=wt.parseFieldsInGeneralPurpose(h);return w==null?b:b+w}static processVariableAI(r,a,c){let u=c.substring(0,r),d;c.length<r+a?d=c.length:d=r+a;let h=c.substring(r,d),b=c.substring(d),w="("+u+")"+h,T=wt.parseFieldsInGeneralPurpose(b);return T==null?w:w+T}}wt.VARIABLE_LENGTH=[],wt.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",wt.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",wt.VARIABLE_LENGTH,20],["22",wt.VARIABLE_LENGTH,29],["30",wt.VARIABLE_LENGTH,8],["37",wt.VARIABLE_LENGTH,8],["90",wt.VARIABLE_LENGTH,30],["91",wt.VARIABLE_LENGTH,30],["92",wt.VARIABLE_LENGTH,30],["93",wt.VARIABLE_LENGTH,30],["94",wt.VARIABLE_LENGTH,30],["95",wt.VARIABLE_LENGTH,30],["96",wt.VARIABLE_LENGTH,30],["97",wt.VARIABLE_LENGTH,3],["98",wt.VARIABLE_LENGTH,30],["99",wt.VARIABLE_LENGTH,30]],wt.THREE_DIGIT_DATA_LENGTH=[["240",wt.VARIABLE_LENGTH,30],["241",wt.VARIABLE_LENGTH,30],["242",wt.VARIABLE_LENGTH,6],["250",wt.VARIABLE_LENGTH,30],["251",wt.VARIABLE_LENGTH,30],["253",wt.VARIABLE_LENGTH,17],["254",wt.VARIABLE_LENGTH,20],["400",wt.VARIABLE_LENGTH,30],["401",wt.VARIABLE_LENGTH,30],["402",17],["403",wt.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",wt.VARIABLE_LENGTH,20],["421",wt.VARIABLE_LENGTH,15],["422",3],["423",wt.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],wt.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",wt.VARIABLE_LENGTH,15],["391",wt.VARIABLE_LENGTH,18],["392",wt.VARIABLE_LENGTH,15],["393",wt.VARIABLE_LENGTH,18],["703",wt.VARIABLE_LENGTH,30]],wt.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",wt.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",wt.VARIABLE_LENGTH,20],["8003",wt.VARIABLE_LENGTH,30],["8004",wt.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",wt.VARIABLE_LENGTH,30],["8008",wt.VARIABLE_LENGTH,12],["8018",18],["8020",wt.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",wt.VARIABLE_LENGTH,70],["8200",wt.VARIABLE_LENGTH,70]];class pi{constructor(r){this.buffer=new re,this.information=r}decodeAllCodes(r,a){let c=a,u=null;do{let d=this.decodeGeneralPurposeField(c,u),h=wt.parseFieldsInGeneralPurpose(d.getNewString());if(h!=null&&r.append(h),d.isRemaining()?u=""+d.getRemainingValue():u=null,c===d.getNewPosition())break;c=d.getNewPosition()}while(!0);return r.toString()}isStillNumeric(r){if(r+7>this.information.getSize())return r+4<=this.information.getSize();for(let a=r;a<r+3;++a)if(this.information.get(a))return!0;return this.information.get(r+3)}decodeNumeric(r){if(r+7>this.information.getSize()){let d=this.extractNumericValueFromBitArray(r,4);return d===0?new Jn(this.information.getSize(),Jn.FNC1,Jn.FNC1):new Jn(this.information.getSize(),d-1,Jn.FNC1)}let a=this.extractNumericValueFromBitArray(r,7),c=(a-8)/11,u=(a-8)%11;return new Jn(r+7,c,u)}extractNumericValueFromBitArray(r,a){return pi.extractNumericValueFromBitArray(this.information,r,a)}static extractNumericValueFromBitArray(r,a,c){let u=0;for(let d=0;d<c;++d)r.get(a+d)&&(u|=1<<c-d-1);return u}decodeGeneralPurposeField(r,a){this.buffer.setLengthToZero(),a!=null&&this.buffer.append(a),this.current.setPosition(r);let c=this.parseBlocks();return c!=null&&c.isRemaining()?new kn(this.current.getPosition(),this.buffer.toString(),c.getRemainingValue()):new kn(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let r,a;do{let c=this.current.getPosition();if(this.current.isAlpha()?(a=this.parseAlphaBlock(),r=a.isFinished()):this.current.isIsoIec646()?(a=this.parseIsoIec646Block(),r=a.isFinished()):(a=this.parseNumericBlock(),r=a.isFinished()),!(c!==this.current.getPosition())&&!r)break}while(!r);return a.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let r=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFirstDigitFNC1()){let a;return r.isSecondDigitFNC1()?a=new kn(this.current.getPosition(),this.buffer.toString()):a=new kn(this.current.getPosition(),this.buffer.toString(),r.getSecondDigit()),new $r(!0,a)}if(this.buffer.append(r.getFirstDigit()),r.isSecondDigitFNC1()){let a=new kn(this.current.getPosition(),this.buffer.toString());return new $r(!0,a)}this.buffer.append(r.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new $r(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let r=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let a=new kn(this.current.getPosition(),this.buffer.toString());return new $r(!0,a)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new $r(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let r=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let a=new kn(this.current.getPosition(),this.buffer.toString());return new $r(!0,a)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new $r(!1)}isStillIsoIec646(r){if(r+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(r,5);if(a>=5&&a<16)return!0;if(r+7>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(r,7);if(c>=64&&c<116)return!0;if(r+8>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(r,8);return u>=232&&u<253}decodeIsoIec646(r){let a=this.extractNumericValueFromBitArray(r,5);if(a===15)return new vn(r+5,vn.FNC1);if(a>=5&&a<15)return new vn(r+5,"0"+(a-5));let c=this.extractNumericValueFromBitArray(r,7);if(c>=64&&c<90)return new vn(r+7,""+(c+1));if(c>=90&&c<116)return new vn(r+7,""+(c+7));let u=this.extractNumericValueFromBitArray(r,8),d;switch(u){case 232:d="!";break;case 233:d='"';break;case 234:d="%";break;case 235:d="&";break;case 236:d="'";break;case 237:d="(";break;case 238:d=")";break;case 239:d="*";break;case 240:d="+";break;case 241:d=",";break;case 242:d="-";break;case 243:d=".";break;case 244:d="/";break;case 245:d=":";break;case 246:d=";";break;case 247:d="<";break;case 248:d="=";break;case 249:d=">";break;case 250:d="?";break;case 251:d="_";break;case 252:d=" ";break;default:throw new F}return new vn(r+8,d)}isStillAlpha(r){if(r+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(r,5);if(a>=5&&a<16)return!0;if(r+6>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(r,6);return c>=16&&c<63}decodeAlphanumeric(r){let a=this.extractNumericValueFromBitArray(r,5);if(a===15)return new vn(r+5,vn.FNC1);if(a>=5&&a<15)return new vn(r+5,"0"+(a-5));let c=this.extractNumericValueFromBitArray(r,6);if(c>=32&&c<58)return new vn(r+6,""+(c+33));let u;switch(c){case 58:u="*";break;case 59:u=",";break;case 60:u="-";break;case 61:u=".";break;case 62:u="/";break;default:throw new Me("Decoding invalid alphanumeric value: "+c)}return new vn(r+6,u)}isAlphaTo646ToAlphaLatch(r){if(r+1>this.information.getSize())return!1;for(let a=0;a<5&&a+r<this.information.getSize();++a)if(a===2){if(!this.information.get(r+2))return!1}else if(this.information.get(r+a))return!1;return!0}isAlphaOr646ToNumericLatch(r){if(r+3>this.information.getSize())return!1;for(let a=r;a<r+3;++a)if(this.information.get(a))return!1;return!0}isNumericToAlphaNumericLatch(r){if(r+1>this.information.getSize())return!1;for(let a=0;a<4&&a+r<this.information.getSize();++a)if(this.information.get(r+a))return!1;return!0}}class Ci{constructor(r){this.information=r,this.generalDecoder=new pi(r)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class $n extends Ci{constructor(r){super(r)}encodeCompressedGtin(r,a){r.append("(01)");let c=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,a,c)}encodeCompressedGtinWithoutAI(r,a,c){for(let u=0;u<4;++u){let d=this.getGeneralDecoder().extractNumericValueFromBitArray(a+10*u,10);d/100===0&&r.append("0"),d/10===0&&r.append("0"),r.append(d)}$n.appendCheckDigit(r,c)}static appendCheckDigit(r,a){let c=0;for(let u=0;u<13;u++){let d=r.charAt(u+a).charCodeAt(0)-48;c+=u&1?d:3*d}c=10-c%10,c===10&&(c=0),r.append(c)}}$n.GTIN_SIZE=40;class qr extends $n{constructor(r){super(r)}parseInformation(){let r=new re;r.append("(01)");let a=r.length(),c=this.getGeneralDecoder().extractNumericValueFromBitArray(qr.HEADER_SIZE,4);return r.append(c),this.encodeCompressedGtinWithoutAI(r,qr.HEADER_SIZE+4,a),this.getGeneralDecoder().decodeAllCodes(r,qr.HEADER_SIZE+44)}}qr.HEADER_SIZE=4;class We extends Ci{constructor(r){super(r)}parseInformation(){let r=new re;return this.getGeneralDecoder().decodeAllCodes(r,We.HEADER_SIZE)}}We.HEADER_SIZE=5;class Je extends $n{constructor(r){super(r)}encodeCompressedWeight(r,a,c){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(a,c);this.addWeightCode(r,u);let d=this.checkWeight(u),h=1e5;for(let b=0;b<5;++b)d/h===0&&r.append("0"),h/=10;r.append(d)}}class bt extends Je{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()!=bt.HEADER_SIZE+Je.GTIN_SIZE+bt.WEIGHT_SIZE)throw new ne;let r=new re;return this.encodeCompressedGtin(r,bt.HEADER_SIZE),this.encodeCompressedWeight(r,bt.HEADER_SIZE+Je.GTIN_SIZE,bt.WEIGHT_SIZE),r.toString()}}bt.HEADER_SIZE=5,bt.WEIGHT_SIZE=15;class fn extends bt{constructor(r){super(r)}addWeightCode(r,a){r.append("(3103)")}checkWeight(r){return r}}class Bi extends bt{constructor(r){super(r)}addWeightCode(r,a){a<1e4?r.append("(3202)"):r.append("(3203)")}checkWeight(r){return r<1e4?r:r-1e4}}class er extends $n{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<er.HEADER_SIZE+$n.GTIN_SIZE)throw new ne;let r=new re;this.encodeCompressedGtin(r,er.HEADER_SIZE);let a=this.getGeneralDecoder().extractNumericValueFromBitArray(er.HEADER_SIZE+$n.GTIN_SIZE,er.LAST_DIGIT_SIZE);r.append("(392"),r.append(a),r.append(")");let c=this.getGeneralDecoder().decodeGeneralPurposeField(er.HEADER_SIZE+$n.GTIN_SIZE+er.LAST_DIGIT_SIZE,null);return r.append(c.getNewString()),r.toString()}}er.HEADER_SIZE=8,er.LAST_DIGIT_SIZE=2;class qn extends $n{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<qn.HEADER_SIZE+$n.GTIN_SIZE)throw new ne;let r=new re;this.encodeCompressedGtin(r,qn.HEADER_SIZE);let a=this.getGeneralDecoder().extractNumericValueFromBitArray(qn.HEADER_SIZE+$n.GTIN_SIZE,qn.LAST_DIGIT_SIZE);r.append("(393"),r.append(a),r.append(")");let c=this.getGeneralDecoder().extractNumericValueFromBitArray(qn.HEADER_SIZE+$n.GTIN_SIZE+qn.LAST_DIGIT_SIZE,qn.FIRST_THREE_DIGITS_SIZE);c/100==0&&r.append("0"),c/10==0&&r.append("0"),r.append(c);let u=this.getGeneralDecoder().decodeGeneralPurposeField(qn.HEADER_SIZE+$n.GTIN_SIZE+qn.LAST_DIGIT_SIZE+qn.FIRST_THREE_DIGITS_SIZE,null);return r.append(u.getNewString()),r.toString()}}qn.HEADER_SIZE=8,qn.LAST_DIGIT_SIZE=2,qn.FIRST_THREE_DIGITS_SIZE=10;class wn extends Je{constructor(r,a,c){super(r),this.dateCode=c,this.firstAIdigits=a}parseInformation(){if(this.getInformation().getSize()!=wn.HEADER_SIZE+wn.GTIN_SIZE+wn.WEIGHT_SIZE+wn.DATE_SIZE)throw new ne;let r=new re;return this.encodeCompressedGtin(r,wn.HEADER_SIZE),this.encodeCompressedWeight(r,wn.HEADER_SIZE+wn.GTIN_SIZE,wn.WEIGHT_SIZE),this.encodeCompressedDate(r,wn.HEADER_SIZE+wn.GTIN_SIZE+wn.WEIGHT_SIZE),r.toString()}encodeCompressedDate(r,a){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(a,wn.DATE_SIZE);if(c==38400)return;r.append("("),r.append(this.dateCode),r.append(")");let u=c%32;c/=32;let d=c%12+1;c/=12;let h=c;h/10==0&&r.append("0"),r.append(h),d/10==0&&r.append("0"),r.append(d),u/10==0&&r.append("0"),r.append(u)}addWeightCode(r,a){r.append("("),r.append(this.firstAIdigits),r.append(a/1e5),r.append(")")}checkWeight(r){return r%1e5}}wn.HEADER_SIZE=8,wn.WEIGHT_SIZE=20,wn.DATE_SIZE=16;function La(Z){try{if(Z.get(1))return new qr(Z);if(!Z.get(2))return new We(Z);switch(pi.extractNumericValueFromBitArray(Z,1,4)){case 4:return new fn(Z);case 5:return new Bi(Z)}switch(pi.extractNumericValueFromBitArray(Z,1,5)){case 12:return new er(Z);case 13:return new qn(Z)}switch(pi.extractNumericValueFromBitArray(Z,1,7)){case 56:return new wn(Z,"310","11");case 57:return new wn(Z,"320","11");case 58:return new wn(Z,"310","13");case 59:return new wn(Z,"320","13");case 60:return new wn(Z,"310","15");case 61:return new wn(Z,"320","15");case 62:return new wn(Z,"310","17");case 63:return new wn(Z,"320","17")}}catch(r){throw console.log(r),new Me("unknown decoder: "+Z)}}class xi{constructor(r,a,c,u){this.leftchar=r,this.rightchar=a,this.finderpattern=c,this.maybeLast=u}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(r,a){return r instanceof xi?xi.equalsOrNull(r.leftchar,a.leftchar)&&xi.equalsOrNull(r.rightchar,a.rightchar)&&xi.equalsOrNull(r.finderpattern,a.finderpattern):!1}static equalsOrNull(r,a){return r===null?a===null:xi.equals(r,a)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Ui{constructor(r,a,c){this.pairs=r,this.rowNumber=a,this.wasReversed=c}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(r){return this.checkEqualitity(this,r)}toString(){return"{ "+this.pairs+" }"}equals(r,a){return r instanceof Ui?this.checkEqualitity(r,a)&&r.wasReversed===a.wasReversed:!1}checkEqualitity(r,a){if(!r||!a)return;let c;return r.forEach((u,d)=>{a.forEach(h=>{u.getLeftChar().getValue()===h.getLeftChar().getValue()&&u.getRightChar().getValue()===h.getRightChar().getValue()&&u.getFinderPatter().getValue()===h.getFinderPatter().getValue()&&(c=!0)})}),c}}class $e extends xn{constructor(r){super(...arguments),this.pairs=new Array($e.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=r===!0}decodeRow(r,a,c){this.pairs.length=0,this.startFromEven=!1;try{return $e.constructResult(this.decodeRow2pairs(r,a))}catch(u){this.verbose&&console.log(u)}return this.pairs.length=0,this.startFromEven=!0,$e.constructResult(this.decodeRow2pairs(r,a))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(r,a){let c=!1;for(;!c;)try{this.pairs.push(this.retrieveNextPair(a,this.pairs,r))}catch(d){if(d instanceof ne){if(!this.pairs.length)throw new ne;c=!0}}if(this.checkChecksum())return this.pairs;let u;if(this.rows.length?u=!0:u=!1,this.storeRow(r,!1),u){let d=this.checkRowsBoolean(!1);if(d!=null||(d=this.checkRowsBoolean(!0),d!=null))return d}throw new ne}checkRowsBoolean(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());let a=null;try{a=this.checkRows(new Array,0)}catch(c){this.verbose&&console.log(c)}return r&&(this.rows=this.rows.reverse()),a}checkRows(r,a){for(let c=a;c<this.rows.length;c++){let u=this.rows[c];this.pairs.length=0;for(let h of r)this.pairs.push(h.getPairs());if(this.pairs.push(u.getPairs()),!$e.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let d=new Array(r);d.push(u);try{return this.checkRows(d,c+1)}catch(h){this.verbose&&console.log(h)}}throw new ne}static isValidSequence(r){for(let a of $e.FINDER_PATTERN_SEQUENCES){if(r.length>a.length)continue;let c=!0;for(let u=0;u<r.length;u++)if(r[u].getFinderPattern().getValue()!=a[u]){c=!1;break}if(c)return!0}return!1}storeRow(r,a){let c=0,u=!1,d=!1;for(;c<this.rows.length;){let h=this.rows[c];if(h.getRowNumber()>r){d=h.isEquivalent(this.pairs);break}u=h.isEquivalent(this.pairs),c++}d||u||$e.isPartialRow(this.pairs,this.rows)||(this.rows.push(c,new Ui(this.pairs,r,a)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(r,a){for(let c of a)if(c.getPairs().length!==r.length){for(let u of c.getPairs())for(let d of r)if(xi.equals(u,d))break}}static isPartialRow(r,a){for(let c of a){let u=!0;for(let d of r){let h=!1;for(let b of c.getPairs())if(d.equals(b)){h=!0;break}if(!h){u=!1;break}}if(u)return!0}return!1}getRows(){return this.rows}static constructResult(r){let a=Zi.buildBitArray(r),u=La(a).parseInformation(),d=r[0].getFinderPattern().getResultPoints(),h=r[r.length-1].getFinderPattern().getResultPoints(),b=[d[0],d[1],h[0],h[1]];return new Q(u,null,null,b,ue.RSS_EXPANDED,null)}checkChecksum(){let r=this.pairs.get(0),a=r.getLeftChar(),c=r.getRightChar();if(c==null)return!1;let u=c.getChecksumPortion(),d=2;for(let b=1;b<this.pairs.size();++b){let w=this.pairs.get(b);u+=w.getLeftChar().getChecksumPortion(),d++;let T=w.getRightChar();T!=null&&(u+=T.getChecksumPortion(),d++)}return u%=211,211*(d-4)+u==a.getValue()}static getNextSecondBar(r,a){let c;return r.get(a)?(c=r.getNextUnset(a),c=r.getNextSet(c)):(c=r.getNextSet(a),c=r.getNextUnset(c)),c}retrieveNextPair(r,a,c){let u=a.length%2==0;this.startFromEven&&(u=!u);let d,h=!0,b=-1;do this.findNextPair(r,a,b),d=this.parseFoundFinderPattern(r,c,u),d==null?b=$e.getNextSecondBar(r,this.startEnd[0]):h=!1;while(h);let w=this.decodeDataCharacter(r,d,u,!0);if(!this.isEmptyPair(a)&&a[a.length-1].mustBeLast())throw new ne;let T;try{T=this.decodeDataCharacter(r,d,u,!1)}catch(V){T=null,this.verbose&&console.log(V)}return new xi(w,T,d,!0)}isEmptyPair(r){return r.length===0}findNextPair(r,a,c){let u=this.getDecodeFinderCounters();u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=r.getSize(),h;c>=0?h=c:this.isEmptyPair(a)?h=0:h=a[a.length-1].getFinderPattern().getStartEnd()[1];let b=a.length%2!=0;this.startFromEven&&(b=!b);let w=!1;for(;h<d&&(w=!r.get(h),!!w);)h++;let T=0,V=h;for(let X=h;X<d;X++)if(r.get(X)!=w)u[T]++;else{if(T==3){if(b&&$e.reverseCounters(u),$e.isFinderPattern(u)){this.startEnd[0]=V,this.startEnd[1]=X;return}b&&$e.reverseCounters(u),V+=u[0]+u[1],u[0]=u[2],u[1]=u[3],u[2]=0,u[3]=0,T--}else T++;u[T]=1,w=!w}throw new ne}static reverseCounters(r){let a=r.length;for(let c=0;c<a/2;++c){let u=r[c];r[c]=r[a-c-1],r[a-c-1]=u}}parseFoundFinderPattern(r,a,c){let u,d,h;if(c){let T=this.startEnd[0]-1;for(;T>=0&&!r.get(T);)T--;T++,u=this.startEnd[0]-T,d=T,h=this.startEnd[1]}else d=this.startEnd[0],h=r.getNextUnset(this.startEnd[1]+1),u=h-this.startEnd[1];let b=this.getDecodeFinderCounters();E.arraycopy(b,0,b,1,b.length-1),b[0]=u;let w;try{w=this.parseFinderValue(b,$e.FINDER_PATTERNS)}catch{return null}return new Si(w,[d,h],d,h,a)}decodeDataCharacter(r,a,c,u){let d=this.getDataCharacterCounters();for(let An=0;An<d.length;An++)d[An]=0;if(u)$e.recordPatternInReverse(r,a.getStartEnd()[0],d);else{$e.recordPattern(r,a.getStartEnd()[1],d);for(let An=0,br=d.length-1;An<br;An++,br--){let Pr=d[An];d[An]=d[br],d[br]=Pr}}let h=17,b=we.sum(new Int32Array(d))/h,w=(a.getStartEnd()[1]-a.getStartEnd()[0])/15;if(Math.abs(b-w)/w>.3)throw new ne;let T=this.getOddCounts(),V=this.getEvenCounts(),X=this.getOddRoundingErrors(),se=this.getEvenRoundingErrors();for(let An=0;An<d.length;An++){let br=1*d[An]/b,Pr=br+.5;if(Pr<1){if(br<.3)throw new ne;Pr=1}else if(Pr>8){if(br>8.7)throw new ne;Pr=8}let Hi=An/2;An&1?(V[Hi]=Pr,se[Hi]=br-Pr):(T[Hi]=Pr,X[Hi]=br-Pr)}this.adjustOddEvenCounts(h);let be=4*a.getValue()+(c?0:2)+(u?0:1)-1,Se=0,Ee=0;for(let An=T.length-1;An>=0;An--){if($e.isNotA1left(a,c,u)){let br=$e.WEIGHTS[be][2*An];Ee+=T[An]*br}Se+=T[An]}let Le=0;for(let An=V.length-1;An>=0;An--)if($e.isNotA1left(a,c,u)){let br=$e.WEIGHTS[be][2*An+1];Le+=V[An]*br}let Ge=Ee+Le;if(Se&1||Se>13||Se<4)throw new ne;let at=(13-Se)/2,dt=$e.SYMBOL_WIDEST[at],ot=9-dt,on=It.getRSSvalue(T,dt,!0),Yt=It.getRSSvalue(V,ot,!1),_r=$e.EVEN_TOTAL_SUBSET[at],ri=$e.GSUM[at],Cr=on*_r+Yt+ri;return new Jr(Cr,Ge)}static isNotA1left(r,a,c){return!(r.getValue()==0&&a&&c)}adjustOddEvenCounts(r){let a=we.sum(new Int32Array(this.getOddCounts())),c=we.sum(new Int32Array(this.getEvenCounts())),u=!1,d=!1;a>13?d=!0:a<4&&(u=!0);let h=!1,b=!1;c>13?b=!0:c<4&&(h=!0);let w=a+c-r,T=(a&1)==1,V=(c&1)==0;if(w==1)if(T){if(V)throw new ne;d=!0}else{if(!V)throw new ne;b=!0}else if(w==-1)if(T){if(V)throw new ne;u=!0}else{if(!V)throw new ne;h=!0}else if(w==0){if(T){if(!V)throw new ne;a<c?(u=!0,b=!0):(d=!0,h=!0)}else if(V)throw new ne}else throw new ne;if(u){if(d)throw new ne;$e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&$e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),h){if(b)throw new ne;$e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}b&&$e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}$e.SYMBOL_WIDEST=[7,5,4,3,1],$e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],$e.GSUM=[0,348,1388,2948,3988],$e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],$e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],$e.FINDER_PAT_A=0,$e.FINDER_PAT_B=1,$e.FINDER_PAT_C=2,$e.FINDER_PAT_D=3,$e.FINDER_PAT_E=4,$e.FINDER_PAT_F=5,$e.FINDER_PATTERN_SEQUENCES=[[$e.FINDER_PAT_A,$e.FINDER_PAT_A],[$e.FINDER_PAT_A,$e.FINDER_PAT_B,$e.FINDER_PAT_B],[$e.FINDER_PAT_A,$e.FINDER_PAT_C,$e.FINDER_PAT_B,$e.FINDER_PAT_D],[$e.FINDER_PAT_A,$e.FINDER_PAT_E,$e.FINDER_PAT_B,$e.FINDER_PAT_D,$e.FINDER_PAT_C],[$e.FINDER_PAT_A,$e.FINDER_PAT_E,$e.FINDER_PAT_B,$e.FINDER_PAT_D,$e.FINDER_PAT_D,$e.FINDER_PAT_F],[$e.FINDER_PAT_A,$e.FINDER_PAT_E,$e.FINDER_PAT_B,$e.FINDER_PAT_D,$e.FINDER_PAT_E,$e.FINDER_PAT_F,$e.FINDER_PAT_F],[$e.FINDER_PAT_A,$e.FINDER_PAT_A,$e.FINDER_PAT_B,$e.FINDER_PAT_B,$e.FINDER_PAT_C,$e.FINDER_PAT_C,$e.FINDER_PAT_D,$e.FINDER_PAT_D],[$e.FINDER_PAT_A,$e.FINDER_PAT_A,$e.FINDER_PAT_B,$e.FINDER_PAT_B,$e.FINDER_PAT_C,$e.FINDER_PAT_C,$e.FINDER_PAT_D,$e.FINDER_PAT_E,$e.FINDER_PAT_E],[$e.FINDER_PAT_A,$e.FINDER_PAT_A,$e.FINDER_PAT_B,$e.FINDER_PAT_B,$e.FINDER_PAT_C,$e.FINDER_PAT_C,$e.FINDER_PAT_D,$e.FINDER_PAT_E,$e.FINDER_PAT_F,$e.FINDER_PAT_F],[$e.FINDER_PAT_A,$e.FINDER_PAT_A,$e.FINDER_PAT_B,$e.FINDER_PAT_B,$e.FINDER_PAT_C,$e.FINDER_PAT_D,$e.FINDER_PAT_D,$e.FINDER_PAT_E,$e.FINDER_PAT_E,$e.FINDER_PAT_F,$e.FINDER_PAT_F]],$e.MAX_PAIRS=11;class so extends Jr{constructor(r,a,c){super(r,a),this.count=0,this.finderPattern=c}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Gn extends xn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(r,a,c){const u=this.decodePair(a,!1,r,c);Gn.addOrTally(this.possibleLeftPairs,u),a.reverse();let d=this.decodePair(a,!0,r,c);Gn.addOrTally(this.possibleRightPairs,d),a.reverse();for(let h of this.possibleLeftPairs)if(h.getCount()>1){for(let b of this.possibleRightPairs)if(b.getCount()>1&&Gn.checkChecksum(h,b))return Gn.constructResult(h,b)}throw new ne}static addOrTally(r,a){if(a==null)return;let c=!1;for(let u of r)if(u.getValue()===a.getValue()){u.incrementCount(),c=!0;break}c||r.push(a)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(r,a){let c=4537077*r.getValue()+a.getValue(),u=new String(c).toString(),d=new re;for(let T=13-u.length;T>0;T--)d.append("0");d.append(u);let h=0;for(let T=0;T<13;T++){let V=d.charAt(T).charCodeAt(0)-48;h+=T&1?V:3*V}h=10-h%10,h===10&&(h=0),d.append(h.toString());let b=r.getFinderPattern().getResultPoints(),w=a.getFinderPattern().getResultPoints();return new Q(d.toString(),null,0,[b[0],b[1],w[0],w[1]],ue.RSS_14,new Date().getTime())}static checkChecksum(r,a){let c=(r.getChecksumPortion()+16*a.getChecksumPortion())%79,u=9*r.getFinderPattern().getValue()+a.getFinderPattern().getValue();return u>72&&u--,u>8&&u--,c===u}decodePair(r,a,c,u){try{let d=this.findFinderPattern(r,a),h=this.parseFoundFinderPattern(r,c,a,d),b=u==null?null:u.get(ae.NEED_RESULT_POINT_CALLBACK);if(b!=null){let V=(d[0]+d[1])/2;a&&(V=r.getSize()-1-V),b.foundPossibleResultPoint(new Re(V,c))}let w=this.decodeDataCharacter(r,h,!0),T=this.decodeDataCharacter(r,h,!1);return new so(1597*w.getValue()+T.getValue(),w.getChecksumPortion()+4*T.getChecksumPortion(),h)}catch{return null}}decodeDataCharacter(r,a,c){let u=this.getDataCharacterCounters();for(let Le=0;Le<u.length;Le++)u[Le]=0;if(c)Tt.recordPatternInReverse(r,a.getStartEnd()[0],u);else{Tt.recordPattern(r,a.getStartEnd()[1]+1,u);for(let Le=0,Ge=u.length-1;Le<Ge;Le++,Ge--){let at=u[Le];u[Le]=u[Ge],u[Ge]=at}}let d=c?16:15,h=we.sum(new Int32Array(u))/d,b=this.getOddCounts(),w=this.getEvenCounts(),T=this.getOddRoundingErrors(),V=this.getEvenRoundingErrors();for(let Le=0;Le<u.length;Le++){let Ge=u[Le]/h,at=Math.floor(Ge+.5);at<1?at=1:at>8&&(at=8);let dt=Math.floor(Le/2);Le&1?(w[dt]=at,V[dt]=Ge-at):(b[dt]=at,T[dt]=Ge-at)}this.adjustOddEvenCounts(c,d);let X=0,se=0;for(let Le=b.length-1;Le>=0;Le--)se*=9,se+=b[Le],X+=b[Le];let be=0,Se=0;for(let Le=w.length-1;Le>=0;Le--)be*=9,be+=w[Le],Se+=w[Le];let Ee=se+3*be;if(c){if(X&1||X>12||X<4)throw new ne;let Le=(12-X)/2,Ge=Gn.OUTSIDE_ODD_WIDEST[Le],at=9-Ge,dt=It.getRSSvalue(b,Ge,!1),ot=It.getRSSvalue(w,at,!0),on=Gn.OUTSIDE_EVEN_TOTAL_SUBSET[Le],Yt=Gn.OUTSIDE_GSUM[Le];return new Jr(dt*on+ot+Yt,Ee)}else{if(Se&1||Se>10||Se<4)throw new ne;let Le=(10-Se)/2,Ge=Gn.INSIDE_ODD_WIDEST[Le],at=9-Ge,dt=It.getRSSvalue(b,Ge,!0),ot=It.getRSSvalue(w,at,!1),on=Gn.INSIDE_ODD_TOTAL_SUBSET[Le],Yt=Gn.INSIDE_GSUM[Le];return new Jr(ot*on+dt+Yt,Ee)}}findFinderPattern(r,a){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),d=!1,h=0;for(;h<u&&(d=!r.get(h),a!==d);)h++;let b=0,w=h;for(let T=h;T<u;T++)if(r.get(T)!==d)c[b]++;else{if(b===3){if(xn.isFinderPattern(c))return[w,T];w+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,b--}else b++;c[b]=1,d=!d}throw new ne}parseFoundFinderPattern(r,a,c,u){let d=r.get(u[0]),h=u[0]-1;for(;h>=0&&d!==r.get(h);)h--;h++;const b=u[0]-h,w=this.getDecodeFinderCounters(),T=new Int32Array(w.length);E.arraycopy(w,0,T,1,w.length-1),T[0]=b;const V=this.parseFinderValue(T,Gn.FINDER_PATTERNS);let X=h,se=u[1];return c&&(X=r.getSize()-1-X,se=r.getSize()-1-se),new Si(V,[h,u[1]],X,se,a)}adjustOddEvenCounts(r,a){let c=we.sum(new Int32Array(this.getOddCounts())),u=we.sum(new Int32Array(this.getEvenCounts())),d=!1,h=!1,b=!1,w=!1;r?(c>12?h=!0:c<4&&(d=!0),u>12?w=!0:u<4&&(b=!0)):(c>11?h=!0:c<5&&(d=!0),u>10?w=!0:u<4&&(b=!0));let T=c+u-a,V=(c&1)===(r?1:0),X=(u&1)===1;if(T===1)if(V){if(X)throw new ne;h=!0}else{if(!X)throw new ne;w=!0}else if(T===-1)if(V){if(X)throw new ne;d=!0}else{if(!X)throw new ne;b=!0}else if(T===0){if(V){if(!X)throw new ne;c<u?(d=!0,w=!0):(h=!0,b=!0)}else if(X)throw new ne}else throw new ne;if(d){if(h)throw new ne;xn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(h&&xn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),b){if(w)throw new ne;xn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}w&&xn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Gn.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Gn.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Gn.OUTSIDE_GSUM=[0,161,961,2015,2715],Gn.INSIDE_GSUM=[0,336,1036,1516],Gn.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Gn.INSIDE_ODD_WIDEST=[2,4,6,8],Gn.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Qi extends Tt{constructor(r,a){super(),this.readers=[],this.verbose=a===!0;const c=r?r.get(ae.POSSIBLE_FORMATS):null,u=r&&r.get(ae.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;c?((c.includes(ue.EAN_13)||c.includes(ue.UPC_A)||c.includes(ue.EAN_8)||c.includes(ue.UPC_E))&&this.readers.push(new fa(r)),c.includes(ue.CODE_39)&&this.readers.push(new ft(u)),c.includes(ue.CODE_128)&&this.readers.push(new Ne),c.includes(ue.ITF)&&this.readers.push(new xt),c.includes(ue.RSS_14)&&this.readers.push(new Gn),c.includes(ue.RSS_EXPANDED)&&this.readers.push(new $e(this.verbose))):(this.readers.push(new fa(r)),this.readers.push(new ft),this.readers.push(new fa(r)),this.readers.push(new Ne),this.readers.push(new xt),this.readers.push(new Gn),this.readers.push(new $e(this.verbose)))}decodeRow(r,a,c){for(let u=0;u<this.readers.length;u++)try{return this.readers[u].decodeRow(r,a,c)}catch{}throw new ne}reset(){this.readers.forEach(r=>r.reset())}}class dn extends q{constructor(r=500,a){super(new Qi(a),r,a)}}class Bt{constructor(r,a,c){this.ecCodewords=r,this.ecBlocks=[a],c&&this.ecBlocks.push(c)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Nn{constructor(r,a){this.count=r,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class an{constructor(r,a,c,u,d,h){this.versionNumber=r,this.symbolSizeRows=a,this.symbolSizeColumns=c,this.dataRegionSizeRows=u,this.dataRegionSizeColumns=d,this.ecBlocks=h;let b=0;const w=h.getECCodewords(),T=h.getECBlocks();for(let V of T)b+=V.getCount()*(V.getDataCodewords()+w);this.totalCodewords=b}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(r,a){if(r&1||a&1)throw new F;for(let c of an.VERSIONS)if(c.symbolSizeRows===r&&c.symbolSizeColumns===a)return c;throw new F}toString(){return""+this.versionNumber}static buildVersions(){return[new an(1,10,10,8,8,new Bt(5,new Nn(1,3))),new an(2,12,12,10,10,new Bt(7,new Nn(1,5))),new an(3,14,14,12,12,new Bt(10,new Nn(1,8))),new an(4,16,16,14,14,new Bt(12,new Nn(1,12))),new an(5,18,18,16,16,new Bt(14,new Nn(1,18))),new an(6,20,20,18,18,new Bt(18,new Nn(1,22))),new an(7,22,22,20,20,new Bt(20,new Nn(1,30))),new an(8,24,24,22,22,new Bt(24,new Nn(1,36))),new an(9,26,26,24,24,new Bt(28,new Nn(1,44))),new an(10,32,32,14,14,new Bt(36,new Nn(1,62))),new an(11,36,36,16,16,new Bt(42,new Nn(1,86))),new an(12,40,40,18,18,new Bt(48,new Nn(1,114))),new an(13,44,44,20,20,new Bt(56,new Nn(1,144))),new an(14,48,48,22,22,new Bt(68,new Nn(1,174))),new an(15,52,52,24,24,new Bt(42,new Nn(2,102))),new an(16,64,64,14,14,new Bt(56,new Nn(2,140))),new an(17,72,72,16,16,new Bt(36,new Nn(4,92))),new an(18,80,80,18,18,new Bt(48,new Nn(4,114))),new an(19,88,88,20,20,new Bt(56,new Nn(4,144))),new an(20,96,96,22,22,new Bt(68,new Nn(4,174))),new an(21,104,104,24,24,new Bt(56,new Nn(6,136))),new an(22,120,120,18,18,new Bt(68,new Nn(6,175))),new an(23,132,132,20,20,new Bt(62,new Nn(8,163))),new an(24,144,144,22,22,new Bt(62,new Nn(8,156),new Nn(2,155))),new an(25,8,18,6,16,new Bt(7,new Nn(1,5))),new an(26,8,32,6,14,new Bt(11,new Nn(1,10))),new an(27,12,26,10,24,new Bt(14,new Nn(1,16))),new an(28,12,36,10,16,new Bt(18,new Nn(1,22))),new an(29,16,36,14,16,new Bt(24,new Nn(1,32))),new an(30,16,48,14,22,new Bt(28,new Nn(1,49)))]}}an.VERSIONS=an.buildVersions();class ll{constructor(r){const a=r.getHeight();if(a<8||a>144||a&1)throw new F;this.version=ll.readVersion(r),this.mappingBitMatrix=this.extractDataRegion(r),this.readMappingMatrix=new ee(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(r){const a=r.getHeight(),c=r.getWidth();return an.getVersionForDimensions(a,c)}readCodewords(){const r=new Int8Array(this.version.getTotalCodewords());let a=0,c=4,u=0;const d=this.mappingBitMatrix.getHeight(),h=this.mappingBitMatrix.getWidth();let b=!1,w=!1,T=!1,V=!1;do if(c===d&&u===0&&!b)r[a++]=this.readCorner1(d,h)&255,c-=2,u+=2,b=!0;else if(c===d-2&&u===0&&h&3&&!w)r[a++]=this.readCorner2(d,h)&255,c-=2,u+=2,w=!0;else if(c===d+4&&u===2&&!(h&7)&&!T)r[a++]=this.readCorner3(d,h)&255,c-=2,u+=2,T=!0;else if(c===d-2&&u===0&&(h&7)===4&&!V)r[a++]=this.readCorner4(d,h)&255,c-=2,u+=2,V=!0;else{do c<d&&u>=0&&!this.readMappingMatrix.get(u,c)&&(r[a++]=this.readUtah(c,u,d,h)&255),c-=2,u+=2;while(c>=0&&u<h);c+=1,u+=3;do c>=0&&u<h&&!this.readMappingMatrix.get(u,c)&&(r[a++]=this.readUtah(c,u,d,h)&255),c+=2,u-=2;while(c<d&&u>=0);c+=3,u+=1}while(c<d||u<h);if(a!==this.version.getTotalCodewords())throw new F;return r}readModule(r,a,c,u){return r<0&&(r+=c,a+=4-(c+4&7)),a<0&&(a+=u,r+=4-(u+4&7)),this.readMappingMatrix.set(a,r),this.mappingBitMatrix.get(a,r)}readUtah(r,a,c,u){let d=0;return this.readModule(r-2,a-2,c,u)&&(d|=1),d<<=1,this.readModule(r-2,a-1,c,u)&&(d|=1),d<<=1,this.readModule(r-1,a-2,c,u)&&(d|=1),d<<=1,this.readModule(r-1,a-1,c,u)&&(d|=1),d<<=1,this.readModule(r-1,a,c,u)&&(d|=1),d<<=1,this.readModule(r,a-2,c,u)&&(d|=1),d<<=1,this.readModule(r,a-1,c,u)&&(d|=1),d<<=1,this.readModule(r,a,c,u)&&(d|=1),d}readCorner1(r,a){let c=0;return this.readModule(r-1,0,r,a)&&(c|=1),c<<=1,this.readModule(r-1,1,r,a)&&(c|=1),c<<=1,this.readModule(r-1,2,r,a)&&(c|=1),c<<=1,this.readModule(0,a-2,r,a)&&(c|=1),c<<=1,this.readModule(0,a-1,r,a)&&(c|=1),c<<=1,this.readModule(1,a-1,r,a)&&(c|=1),c<<=1,this.readModule(2,a-1,r,a)&&(c|=1),c<<=1,this.readModule(3,a-1,r,a)&&(c|=1),c}readCorner2(r,a){let c=0;return this.readModule(r-3,0,r,a)&&(c|=1),c<<=1,this.readModule(r-2,0,r,a)&&(c|=1),c<<=1,this.readModule(r-1,0,r,a)&&(c|=1),c<<=1,this.readModule(0,a-4,r,a)&&(c|=1),c<<=1,this.readModule(0,a-3,r,a)&&(c|=1),c<<=1,this.readModule(0,a-2,r,a)&&(c|=1),c<<=1,this.readModule(0,a-1,r,a)&&(c|=1),c<<=1,this.readModule(1,a-1,r,a)&&(c|=1),c}readCorner3(r,a){let c=0;return this.readModule(r-1,0,r,a)&&(c|=1),c<<=1,this.readModule(r-1,a-1,r,a)&&(c|=1),c<<=1,this.readModule(0,a-3,r,a)&&(c|=1),c<<=1,this.readModule(0,a-2,r,a)&&(c|=1),c<<=1,this.readModule(0,a-1,r,a)&&(c|=1),c<<=1,this.readModule(1,a-3,r,a)&&(c|=1),c<<=1,this.readModule(1,a-2,r,a)&&(c|=1),c<<=1,this.readModule(1,a-1,r,a)&&(c|=1),c}readCorner4(r,a){let c=0;return this.readModule(r-3,0,r,a)&&(c|=1),c<<=1,this.readModule(r-2,0,r,a)&&(c|=1),c<<=1,this.readModule(r-1,0,r,a)&&(c|=1),c<<=1,this.readModule(0,a-2,r,a)&&(c|=1),c<<=1,this.readModule(0,a-1,r,a)&&(c|=1),c<<=1,this.readModule(1,a-1,r,a)&&(c|=1),c<<=1,this.readModule(2,a-1,r,a)&&(c|=1),c<<=1,this.readModule(3,a-1,r,a)&&(c|=1),c}extractDataRegion(r){const a=this.version.getSymbolSizeRows(),c=this.version.getSymbolSizeColumns();if(r.getHeight()!==a)throw new N("Dimension of bitMatrix must match the version size");const u=this.version.getDataRegionSizeRows(),d=this.version.getDataRegionSizeColumns(),h=a/u|0,b=c/d|0,w=h*u,T=b*d,V=new ee(T,w);for(let X=0;X<h;++X){const se=X*u;for(let be=0;be<b;++be){const Se=be*d;for(let Ee=0;Ee<u;++Ee){const Le=X*(u+2)+1+Ee,Ge=se+Ee;for(let at=0;at<d;++at){const dt=be*(d+2)+1+at;if(r.get(dt,Le)){const ot=Se+at;V.set(ot,Ge)}}}}}return V}}class or{constructor(r,a){this.numDataCodewords=r,this.codewords=a}static getDataBlocks(r,a){const c=a.getECBlocks();let u=0;const d=c.getECBlocks();for(let Ee of d)u+=Ee.getCount();const h=new Array(u);let b=0;for(let Ee of d)for(let Le=0;Le<Ee.getCount();Le++){const Ge=Ee.getDataCodewords(),at=c.getECCodewords()+Ge;h[b++]=new or(Ge,new Uint8Array(at))}const T=h[0].codewords.length-c.getECCodewords(),V=T-1;let X=0;for(let Ee=0;Ee<V;Ee++)for(let Le=0;Le<b;Le++)h[Le].codewords[Ee]=r[X++];const se=a.getVersionNumber()===24,be=se?8:b;for(let Ee=0;Ee<be;Ee++)h[Ee].codewords[T-1]=r[X++];const Se=h[0].codewords.length;for(let Ee=T;Ee<Se;Ee++)for(let Le=0;Le<b;Le++){const Ge=se?(Le+8)%b:Le,at=se&&Ge>7?Ee-1:Ee;h[Ge].codewords[at]=r[X++]}if(X!==r.length)throw new N;return h}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class oo{constructor(r){this.bytes=r,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(r){if(r<1||r>32||r>this.available())throw new N(""+r);let a=0,c=this.bitOffset,u=this.byteOffset;const d=this.bytes;if(c>0){const h=8-c,b=r<h?r:h,w=h-b,T=255>>8-b<<w;a=(d[u]&T)>>w,r-=b,c+=b,c===8&&(c=0,u++)}if(r>0){for(;r>=8;)a=a<<8|d[u]&255,u++,r-=8;if(r>0){const h=8-r,b=255>>h<<h;a=a<<r|(d[u]&b)>>h,c+=r}}return this.bitOffset=c,this.byteOffset=u,a}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var mr;(function(Z){Z[Z.PAD_ENCODE=0]="PAD_ENCODE",Z[Z.ASCII_ENCODE=1]="ASCII_ENCODE",Z[Z.C40_ENCODE=2]="C40_ENCODE",Z[Z.TEXT_ENCODE=3]="TEXT_ENCODE",Z[Z.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",Z[Z.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",Z[Z.BASE256_ENCODE=6]="BASE256_ENCODE"})(mr||(mr={}));class ha{static decode(r){const a=new oo(r),c=new re,u=new re,d=new Array;let h=mr.ASCII_ENCODE;do if(h===mr.ASCII_ENCODE)h=this.decodeAsciiSegment(a,c,u);else{switch(h){case mr.C40_ENCODE:this.decodeC40Segment(a,c);break;case mr.TEXT_ENCODE:this.decodeTextSegment(a,c);break;case mr.ANSIX12_ENCODE:this.decodeAnsiX12Segment(a,c);break;case mr.EDIFACT_ENCODE:this.decodeEdifactSegment(a,c);break;case mr.BASE256_ENCODE:this.decodeBase256Segment(a,c,d);break;default:throw new F}h=mr.ASCII_ENCODE}while(h!==mr.PAD_ENCODE&&a.available()>0);return u.length()>0&&c.append(u.toString()),new ve(r,c.toString(),d.length===0?null:d,null)}static decodeAsciiSegment(r,a,c){let u=!1;do{let d=r.readBits(8);if(d===0)throw new F;if(d<=128)return u&&(d+=128),a.append(String.fromCharCode(d-1)),mr.ASCII_ENCODE;if(d===129)return mr.PAD_ENCODE;if(d<=229){const h=d-130;h<10&&a.append("0"),a.append(""+h)}else switch(d){case 230:return mr.C40_ENCODE;case 231:return mr.BASE256_ENCODE;case 232:a.append("");break;case 233:case 234:break;case 235:u=!0;break;case 236:a.append("[)>05"),c.insert(0,"");break;case 237:a.append("[)>06"),c.insert(0,"");break;case 238:return mr.ANSIX12_ENCODE;case 239:return mr.TEXT_ENCODE;case 240:return mr.EDIFACT_ENCODE;case 241:break;default:if(d!==254||r.available()!==0)throw new F;break}}while(r.available()>0);return mr.ASCII_ENCODE}static decodeC40Segment(r,a){let c=!1;const u=[];let d=0;do{if(r.available()===8)return;const h=r.readBits(8);if(h===254)return;this.parseTwoBytes(h,r.readBits(8),u);for(let b=0;b<3;b++){const w=u[b];switch(d){case 0:if(w<3)d=w+1;else if(w<this.C40_BASIC_SET_CHARS.length){const T=this.C40_BASIC_SET_CHARS[w];c?(a.append(String.fromCharCode(T.charCodeAt(0)+128)),c=!1):a.append(T)}else throw new F;break;case 1:c?(a.append(String.fromCharCode(w+128)),c=!1):a.append(String.fromCharCode(w)),d=0;break;case 2:if(w<this.C40_SHIFT2_SET_CHARS.length){const T=this.C40_SHIFT2_SET_CHARS[w];c?(a.append(String.fromCharCode(T.charCodeAt(0)+128)),c=!1):a.append(T)}else switch(w){case 27:a.append("");break;case 30:c=!0;break;default:throw new F}d=0;break;case 3:c?(a.append(String.fromCharCode(w+224)),c=!1):a.append(String.fromCharCode(w+96)),d=0;break;default:throw new F}}}while(r.available()>0)}static decodeTextSegment(r,a){let c=!1,u=[],d=0;do{if(r.available()===8)return;const h=r.readBits(8);if(h===254)return;this.parseTwoBytes(h,r.readBits(8),u);for(let b=0;b<3;b++){const w=u[b];switch(d){case 0:if(w<3)d=w+1;else if(w<this.TEXT_BASIC_SET_CHARS.length){const T=this.TEXT_BASIC_SET_CHARS[w];c?(a.append(String.fromCharCode(T.charCodeAt(0)+128)),c=!1):a.append(T)}else throw new F;break;case 1:c?(a.append(String.fromCharCode(w+128)),c=!1):a.append(String.fromCharCode(w)),d=0;break;case 2:if(w<this.TEXT_SHIFT2_SET_CHARS.length){const T=this.TEXT_SHIFT2_SET_CHARS[w];c?(a.append(String.fromCharCode(T.charCodeAt(0)+128)),c=!1):a.append(T)}else switch(w){case 27:a.append("");break;case 30:c=!0;break;default:throw new F}d=0;break;case 3:if(w<this.TEXT_SHIFT3_SET_CHARS.length){const T=this.TEXT_SHIFT3_SET_CHARS[w];c?(a.append(String.fromCharCode(T.charCodeAt(0)+128)),c=!1):a.append(T),d=0}else throw new F;break;default:throw new F}}}while(r.available()>0)}static decodeAnsiX12Segment(r,a){const c=[];do{if(r.available()===8)return;const u=r.readBits(8);if(u===254)return;this.parseTwoBytes(u,r.readBits(8),c);for(let d=0;d<3;d++){const h=c[d];switch(h){case 0:a.append("\r");break;case 1:a.append("*");break;case 2:a.append(">");break;case 3:a.append(" ");break;default:if(h<14)a.append(String.fromCharCode(h+44));else if(h<40)a.append(String.fromCharCode(h+51));else throw new F;break}}}while(r.available()>0)}static parseTwoBytes(r,a,c){let u=(r<<8)+a-1,d=Math.floor(u/1600);c[0]=d,u-=d*1600,d=Math.floor(u/40),c[1]=d,c[2]=u-d*40}static decodeEdifactSegment(r,a){do{if(r.available()<=16)return;for(let c=0;c<4;c++){let u=r.readBits(6);if(u===31){const d=8-r.getBitOffset();d!==8&&r.readBits(d);return}u&32||(u|=64),a.append(String.fromCharCode(u))}}while(r.available()>0)}static decodeBase256Segment(r,a,c){let u=1+r.getByteOffset();const d=this.unrandomize255State(r.readBits(8),u++);let h;if(d===0?h=r.available()/8|0:d<250?h=d:h=250*(d-249)+this.unrandomize255State(r.readBits(8),u++),h<0)throw new F;const b=new Uint8Array(h);for(let w=0;w<h;w++){if(r.available()<8)throw new F;b[w]=this.unrandomize255State(r.readBits(8),u++)}c.push(b);try{a.append(k.decode(b,R.ISO88591))}catch(w){throw new Me("Platform does not support required encoding: "+w.message)}}static unrandomize255State(r,a){const c=149*a%255+1,u=r-c;return u>=0?u:u+256}}ha.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],ha.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],ha.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],ha.TEXT_SHIFT2_SET_CHARS=ha.C40_SHIFT2_SET_CHARS,ha.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class cl{constructor(){this.rsDecoder=new me(He.DATA_MATRIX_FIELD_256)}decode(r){const a=new ll(r),c=a.getVersion(),u=a.readCodewords(),d=or.getDataBlocks(u,c);let h=0;for(let T of d)h+=T.getNumDataCodewords();const b=new Uint8Array(h),w=d.length;for(let T=0;T<w;T++){const V=d[T],X=V.getCodewords(),se=V.getNumDataCodewords();this.correctErrors(X,se);for(let be=0;be<se;be++)b[be*w+T]=X[be]}return ha.decode(b)}correctErrors(r,a){const c=new Int32Array(r);try{this.rsDecoder.decode(c,r.length-a)}catch{throw new v}for(let u=0;u<a;u++)r[u]=c[u]}}class lr{constructor(r){this.image=r,this.rectangleDetector=new pt(this.image)}detect(){const r=this.rectangleDetector.detect();let a=this.detectSolid1(r);if(a=this.detectSolid2(a),a[3]=this.correctTopRight(a),!a[3])throw new ne;a=this.shiftToModuleCenter(a);const c=a[0],u=a[1],d=a[2],h=a[3];let b=this.transitionsBetween(c,h)+1,w=this.transitionsBetween(d,h)+1;(b&1)===1&&(b+=1),(w&1)===1&&(w+=1),4*b<7*w&&4*w<7*b&&(b=w=Math.max(b,w));let T=lr.sampleGrid(this.image,c,u,d,h,b,w);return new Qe(T,[c,u,d,h])}static shiftPoint(r,a,c){let u=(a.getX()-r.getX())/(c+1),d=(a.getY()-r.getY())/(c+1);return new Re(r.getX()+u,r.getY()+d)}static moveAway(r,a,c){let u=r.getX(),d=r.getY();return u<a?u-=1:u+=1,d<c?d-=1:d+=1,new Re(u,d)}detectSolid1(r){let a=r[0],c=r[1],u=r[3],d=r[2],h=this.transitionsBetween(a,c),b=this.transitionsBetween(c,u),w=this.transitionsBetween(u,d),T=this.transitionsBetween(d,a),V=h,X=[d,a,c,u];return V>b&&(V=b,X[0]=a,X[1]=c,X[2]=u,X[3]=d),V>w&&(V=w,X[0]=c,X[1]=u,X[2]=d,X[3]=a),V>T&&(X[0]=u,X[1]=d,X[2]=a,X[3]=c),X}detectSolid2(r){let a=r[0],c=r[1],u=r[2],d=r[3],h=this.transitionsBetween(a,d),b=lr.shiftPoint(c,u,(h+1)*4),w=lr.shiftPoint(u,c,(h+1)*4),T=this.transitionsBetween(b,a),V=this.transitionsBetween(w,d);return T<V?(r[0]=a,r[1]=c,r[2]=u,r[3]=d):(r[0]=c,r[1]=u,r[2]=d,r[3]=a),r}correctTopRight(r){let a=r[0],c=r[1],u=r[2],d=r[3],h=this.transitionsBetween(a,d),b=this.transitionsBetween(c,d),w=lr.shiftPoint(a,c,(b+1)*4),T=lr.shiftPoint(u,c,(h+1)*4);h=this.transitionsBetween(w,d),b=this.transitionsBetween(T,d);let V=new Re(d.getX()+(u.getX()-c.getX())/(h+1),d.getY()+(u.getY()-c.getY())/(h+1)),X=new Re(d.getX()+(a.getX()-c.getX())/(b+1),d.getY()+(a.getY()-c.getY())/(b+1));if(!this.isValid(V))return this.isValid(X)?X:null;if(!this.isValid(X))return V;let se=this.transitionsBetween(w,V)+this.transitionsBetween(T,V),be=this.transitionsBetween(w,X)+this.transitionsBetween(T,X);return se>be?V:X}shiftToModuleCenter(r){let a=r[0],c=r[1],u=r[2],d=r[3],h=this.transitionsBetween(a,d)+1,b=this.transitionsBetween(u,d)+1,w=lr.shiftPoint(a,c,b*4),T=lr.shiftPoint(u,c,h*4);h=this.transitionsBetween(w,d)+1,b=this.transitionsBetween(T,d)+1,(h&1)===1&&(h+=1),(b&1)===1&&(b+=1);let V=(a.getX()+c.getX()+u.getX()+d.getX())/4,X=(a.getY()+c.getY()+u.getY()+d.getY())/4;a=lr.moveAway(a,V,X),c=lr.moveAway(c,V,X),u=lr.moveAway(u,V,X),d=lr.moveAway(d,V,X);let se,be;return w=lr.shiftPoint(a,c,b*4),w=lr.shiftPoint(w,d,h*4),se=lr.shiftPoint(c,a,b*4),se=lr.shiftPoint(se,u,h*4),T=lr.shiftPoint(u,d,b*4),T=lr.shiftPoint(T,c,h*4),be=lr.shiftPoint(d,u,b*4),be=lr.shiftPoint(be,a,h*4),[w,se,T,be]}isValid(r){return r.getX()>=0&&r.getX()<this.image.getWidth()&&r.getY()>0&&r.getY()<this.image.getHeight()}static sampleGrid(r,a,c,u,d,h,b){return Ot.getInstance().sampleGrid(r,h,b,.5,.5,h-.5,.5,h-.5,b-.5,.5,b-.5,a.getX(),a.getY(),d.getX(),d.getY(),u.getX(),u.getY(),c.getX(),c.getY())}transitionsBetween(r,a){let c=Math.trunc(r.getX()),u=Math.trunc(r.getY()),d=Math.trunc(a.getX()),h=Math.trunc(a.getY()),b=Math.abs(h-u)>Math.abs(d-c);if(b){let Ee=c;c=u,u=Ee,Ee=d,d=h,h=Ee}let w=Math.abs(d-c),T=Math.abs(h-u),V=-w/2,X=u<h?1:-1,se=c<d?1:-1,be=0,Se=this.image.get(b?u:c,b?c:u);for(let Ee=c,Le=u;Ee!==d;Ee+=se){let Ge=this.image.get(b?Le:Ee,b?Ee:Le);if(Ge!==Se&&(be++,Se=Ge),V+=T,V>0){if(Le===h)break;Le+=X,V-=w}}return be}}class Gr{constructor(){this.decoder=new cl}decode(r,a=null){let c,u;if(a!=null&&a.has(ae.PURE_BARCODE)){const T=Gr.extractPureBits(r.getBlackMatrix());c=this.decoder.decode(T),u=Gr.NO_POINTS}else{const T=new lr(r.getBlackMatrix()).detect();c=this.decoder.decode(T.getBits()),u=T.getPoints()}const d=c.getRawBytes(),h=new Q(c.getText(),d,8*d.length,u,ue.DATA_MATRIX,E.currentTimeMillis()),b=c.getByteSegments();b!=null&&h.putMetadata(Ae.BYTE_SEGMENTS,b);const w=c.getECLevel();return w!=null&&h.putMetadata(Ae.ERROR_CORRECTION_LEVEL,w),h}reset(){}static extractPureBits(r){const a=r.getTopLeftOnBit(),c=r.getBottomRightOnBit();if(a==null||c==null)throw new ne;const u=this.moduleSize(a,r);let d=a[1];const h=c[1];let b=a[0];const T=(c[0]-b+1)/u,V=(h-d+1)/u;if(T<=0||V<=0)throw new ne;const X=u/2;d+=X,b+=X;const se=new ee(T,V);for(let be=0;be<V;be++){const Se=d+be*u;for(let Ee=0;Ee<T;Ee++)r.get(b+Ee*u,Se)&&se.set(Ee,be)}return se}static moduleSize(r,a){const c=a.getWidth();let u=r[0];const d=r[1];for(;u<c&&a.get(u,d);)u++;if(u===c)throw new ne;const h=u-r[0];if(h===0)throw new ne;return h}}Gr.NO_POINTS=[];class lo extends q{constructor(r=500){super(new Gr,r)}}var Mr;(function(Z){Z[Z.L=0]="L",Z[Z.M=1]="M",Z[Z.Q=2]="Q",Z[Z.H=3]="H"})(Mr||(Mr={}));class _n{constructor(r,a,c){this.value=r,this.stringValue=a,this.bits=c,_n.FOR_BITS.set(c,this),_n.FOR_VALUE.set(r,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(r){switch(r){case"L":return _n.L;case"M":return _n.M;case"Q":return _n.Q;case"H":return _n.H;default:throw new S(r+"not available")}}toString(){return this.stringValue}equals(r){if(!(r instanceof _n))return!1;const a=r;return this.value===a.value}static forBits(r){if(r<0||r>=_n.FOR_BITS.size)throw new N;return _n.FOR_BITS.get(r)}}_n.FOR_BITS=new Map,_n.FOR_VALUE=new Map,_n.L=new _n(Mr.L,"L",1),_n.M=new _n(Mr.M,"M",0),_n.Q=new _n(Mr.Q,"Q",3),_n.H=new _n(Mr.H,"H",2);class Rr{constructor(r){this.errorCorrectionLevel=_n.forBits(r>>3&3),this.dataMask=r&7}static numBitsDiffering(r,a){return D.bitCount(r^a)}static decodeFormatInformation(r,a){const c=Rr.doDecodeFormatInformation(r,a);return c!==null?c:Rr.doDecodeFormatInformation(r^Rr.FORMAT_INFO_MASK_QR,a^Rr.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(r,a){let c=Number.MAX_SAFE_INTEGER,u=0;for(const d of Rr.FORMAT_INFO_DECODE_LOOKUP){const h=d[0];if(h===r||h===a)return new Rr(d[1]);let b=Rr.numBitsDiffering(r,h);b<c&&(u=d[1],c=b),r!==a&&(b=Rr.numBitsDiffering(a,h),b<c&&(u=d[1],c=b))}return c<=3?new Rr(u):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(r){if(!(r instanceof Rr))return!1;const a=r;return this.errorCorrectionLevel===a.errorCorrectionLevel&&this.dataMask===a.dataMask}}Rr.FORMAT_INFO_MASK_QR=21522,Rr.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class Be{constructor(r,...a){this.ecCodewordsPerBlock=r,this.ecBlocks=a}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let r=0;const a=this.ecBlocks;for(const c of a)r+=c.getCount();return r}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class ge{constructor(r,a){this.count=r,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Dt{constructor(r,a,...c){this.versionNumber=r,this.alignmentPatternCenters=a,this.ecBlocks=c;let u=0;const d=c[0].getECCodewordsPerBlock(),h=c[0].getECBlocks();for(const b of h)u+=b.getCount()*(b.getDataCodewords()+d);this.totalCodewords=u}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(r){return this.ecBlocks[r.getValue()]}static getProvisionalVersionForDimension(r){if(r%4!==1)throw new F;try{return this.getVersionForNumber((r-17)/4)}catch{throw new F}}static getVersionForNumber(r){if(r<1||r>40)throw new N;return Dt.VERSIONS[r-1]}static decodeVersionInformation(r){let a=Number.MAX_SAFE_INTEGER,c=0;for(let u=0;u<Dt.VERSION_DECODE_INFO.length;u++){const d=Dt.VERSION_DECODE_INFO[u];if(d===r)return Dt.getVersionForNumber(u+7);const h=Rr.numBitsDiffering(r,d);h<a&&(c=u+7,a=h)}return a<=3?Dt.getVersionForNumber(c):null}buildFunctionPattern(){const r=this.getDimensionForVersion(),a=new ee(r);a.setRegion(0,0,9,9),a.setRegion(r-8,0,8,9),a.setRegion(0,r-8,9,8);const c=this.alignmentPatternCenters.length;for(let u=0;u<c;u++){const d=this.alignmentPatternCenters[u]-2;for(let h=0;h<c;h++)u===0&&(h===0||h===c-1)||u===c-1&&h===0||a.setRegion(this.alignmentPatternCenters[h]-2,d,5,5)}return a.setRegion(6,9,1,r-17),a.setRegion(9,6,r-17,1),this.versionNumber>6&&(a.setRegion(r-11,0,3,6),a.setRegion(0,r-11,6,3)),a}toString(){return""+this.versionNumber}}Dt.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Dt.VERSIONS=[new Dt(1,new Int32Array(0),new Be(7,new ge(1,19)),new Be(10,new ge(1,16)),new Be(13,new ge(1,13)),new Be(17,new ge(1,9))),new Dt(2,Int32Array.from([6,18]),new Be(10,new ge(1,34)),new Be(16,new ge(1,28)),new Be(22,new ge(1,22)),new Be(28,new ge(1,16))),new Dt(3,Int32Array.from([6,22]),new Be(15,new ge(1,55)),new Be(26,new ge(1,44)),new Be(18,new ge(2,17)),new Be(22,new ge(2,13))),new Dt(4,Int32Array.from([6,26]),new Be(20,new ge(1,80)),new Be(18,new ge(2,32)),new Be(26,new ge(2,24)),new Be(16,new ge(4,9))),new Dt(5,Int32Array.from([6,30]),new Be(26,new ge(1,108)),new Be(24,new ge(2,43)),new Be(18,new ge(2,15),new ge(2,16)),new Be(22,new ge(2,11),new ge(2,12))),new Dt(6,Int32Array.from([6,34]),new Be(18,new ge(2,68)),new Be(16,new ge(4,27)),new Be(24,new ge(4,19)),new Be(28,new ge(4,15))),new Dt(7,Int32Array.from([6,22,38]),new Be(20,new ge(2,78)),new Be(18,new ge(4,31)),new Be(18,new ge(2,14),new ge(4,15)),new Be(26,new ge(4,13),new ge(1,14))),new Dt(8,Int32Array.from([6,24,42]),new Be(24,new ge(2,97)),new Be(22,new ge(2,38),new ge(2,39)),new Be(22,new ge(4,18),new ge(2,19)),new Be(26,new ge(4,14),new ge(2,15))),new Dt(9,Int32Array.from([6,26,46]),new Be(30,new ge(2,116)),new Be(22,new ge(3,36),new ge(2,37)),new Be(20,new ge(4,16),new ge(4,17)),new Be(24,new ge(4,12),new ge(4,13))),new Dt(10,Int32Array.from([6,28,50]),new Be(18,new ge(2,68),new ge(2,69)),new Be(26,new ge(4,43),new ge(1,44)),new Be(24,new ge(6,19),new ge(2,20)),new Be(28,new ge(6,15),new ge(2,16))),new Dt(11,Int32Array.from([6,30,54]),new Be(20,new ge(4,81)),new Be(30,new ge(1,50),new ge(4,51)),new Be(28,new ge(4,22),new ge(4,23)),new Be(24,new ge(3,12),new ge(8,13))),new Dt(12,Int32Array.from([6,32,58]),new Be(24,new ge(2,92),new ge(2,93)),new Be(22,new ge(6,36),new ge(2,37)),new Be(26,new ge(4,20),new ge(6,21)),new Be(28,new ge(7,14),new ge(4,15))),new Dt(13,Int32Array.from([6,34,62]),new Be(26,new ge(4,107)),new Be(22,new ge(8,37),new ge(1,38)),new Be(24,new ge(8,20),new ge(4,21)),new Be(22,new ge(12,11),new ge(4,12))),new Dt(14,Int32Array.from([6,26,46,66]),new Be(30,new ge(3,115),new ge(1,116)),new Be(24,new ge(4,40),new ge(5,41)),new Be(20,new ge(11,16),new ge(5,17)),new Be(24,new ge(11,12),new ge(5,13))),new Dt(15,Int32Array.from([6,26,48,70]),new Be(22,new ge(5,87),new ge(1,88)),new Be(24,new ge(5,41),new ge(5,42)),new Be(30,new ge(5,24),new ge(7,25)),new Be(24,new ge(11,12),new ge(7,13))),new Dt(16,Int32Array.from([6,26,50,74]),new Be(24,new ge(5,98),new ge(1,99)),new Be(28,new ge(7,45),new ge(3,46)),new Be(24,new ge(15,19),new ge(2,20)),new Be(30,new ge(3,15),new ge(13,16))),new Dt(17,Int32Array.from([6,30,54,78]),new Be(28,new ge(1,107),new ge(5,108)),new Be(28,new ge(10,46),new ge(1,47)),new Be(28,new ge(1,22),new ge(15,23)),new Be(28,new ge(2,14),new ge(17,15))),new Dt(18,Int32Array.from([6,30,56,82]),new Be(30,new ge(5,120),new ge(1,121)),new Be(26,new ge(9,43),new ge(4,44)),new Be(28,new ge(17,22),new ge(1,23)),new Be(28,new ge(2,14),new ge(19,15))),new Dt(19,Int32Array.from([6,30,58,86]),new Be(28,new ge(3,113),new ge(4,114)),new Be(26,new ge(3,44),new ge(11,45)),new Be(26,new ge(17,21),new ge(4,22)),new Be(26,new ge(9,13),new ge(16,14))),new Dt(20,Int32Array.from([6,34,62,90]),new Be(28,new ge(3,107),new ge(5,108)),new Be(26,new ge(3,41),new ge(13,42)),new Be(30,new ge(15,24),new ge(5,25)),new Be(28,new ge(15,15),new ge(10,16))),new Dt(21,Int32Array.from([6,28,50,72,94]),new Be(28,new ge(4,116),new ge(4,117)),new Be(26,new ge(17,42)),new Be(28,new ge(17,22),new ge(6,23)),new Be(30,new ge(19,16),new ge(6,17))),new Dt(22,Int32Array.from([6,26,50,74,98]),new Be(28,new ge(2,111),new ge(7,112)),new Be(28,new ge(17,46)),new Be(30,new ge(7,24),new ge(16,25)),new Be(24,new ge(34,13))),new Dt(23,Int32Array.from([6,30,54,78,102]),new Be(30,new ge(4,121),new ge(5,122)),new Be(28,new ge(4,47),new ge(14,48)),new Be(30,new ge(11,24),new ge(14,25)),new Be(30,new ge(16,15),new ge(14,16))),new Dt(24,Int32Array.from([6,28,54,80,106]),new Be(30,new ge(6,117),new ge(4,118)),new Be(28,new ge(6,45),new ge(14,46)),new Be(30,new ge(11,24),new ge(16,25)),new Be(30,new ge(30,16),new ge(2,17))),new Dt(25,Int32Array.from([6,32,58,84,110]),new Be(26,new ge(8,106),new ge(4,107)),new Be(28,new ge(8,47),new ge(13,48)),new Be(30,new ge(7,24),new ge(22,25)),new Be(30,new ge(22,15),new ge(13,16))),new Dt(26,Int32Array.from([6,30,58,86,114]),new Be(28,new ge(10,114),new ge(2,115)),new Be(28,new ge(19,46),new ge(4,47)),new Be(28,new ge(28,22),new ge(6,23)),new Be(30,new ge(33,16),new ge(4,17))),new Dt(27,Int32Array.from([6,34,62,90,118]),new Be(30,new ge(8,122),new ge(4,123)),new Be(28,new ge(22,45),new ge(3,46)),new Be(30,new ge(8,23),new ge(26,24)),new Be(30,new ge(12,15),new ge(28,16))),new Dt(28,Int32Array.from([6,26,50,74,98,122]),new Be(30,new ge(3,117),new ge(10,118)),new Be(28,new ge(3,45),new ge(23,46)),new Be(30,new ge(4,24),new ge(31,25)),new Be(30,new ge(11,15),new ge(31,16))),new Dt(29,Int32Array.from([6,30,54,78,102,126]),new Be(30,new ge(7,116),new ge(7,117)),new Be(28,new ge(21,45),new ge(7,46)),new Be(30,new ge(1,23),new ge(37,24)),new Be(30,new ge(19,15),new ge(26,16))),new Dt(30,Int32Array.from([6,26,52,78,104,130]),new Be(30,new ge(5,115),new ge(10,116)),new Be(28,new ge(19,47),new ge(10,48)),new Be(30,new ge(15,24),new ge(25,25)),new Be(30,new ge(23,15),new ge(25,16))),new Dt(31,Int32Array.from([6,30,56,82,108,134]),new Be(30,new ge(13,115),new ge(3,116)),new Be(28,new ge(2,46),new ge(29,47)),new Be(30,new ge(42,24),new ge(1,25)),new Be(30,new ge(23,15),new ge(28,16))),new Dt(32,Int32Array.from([6,34,60,86,112,138]),new Be(30,new ge(17,115)),new Be(28,new ge(10,46),new ge(23,47)),new Be(30,new ge(10,24),new ge(35,25)),new Be(30,new ge(19,15),new ge(35,16))),new Dt(33,Int32Array.from([6,30,58,86,114,142]),new Be(30,new ge(17,115),new ge(1,116)),new Be(28,new ge(14,46),new ge(21,47)),new Be(30,new ge(29,24),new ge(19,25)),new Be(30,new ge(11,15),new ge(46,16))),new Dt(34,Int32Array.from([6,34,62,90,118,146]),new Be(30,new ge(13,115),new ge(6,116)),new Be(28,new ge(14,46),new ge(23,47)),new Be(30,new ge(44,24),new ge(7,25)),new Be(30,new ge(59,16),new ge(1,17))),new Dt(35,Int32Array.from([6,30,54,78,102,126,150]),new Be(30,new ge(12,121),new ge(7,122)),new Be(28,new ge(12,47),new ge(26,48)),new Be(30,new ge(39,24),new ge(14,25)),new Be(30,new ge(22,15),new ge(41,16))),new Dt(36,Int32Array.from([6,24,50,76,102,128,154]),new Be(30,new ge(6,121),new ge(14,122)),new Be(28,new ge(6,47),new ge(34,48)),new Be(30,new ge(46,24),new ge(10,25)),new Be(30,new ge(2,15),new ge(64,16))),new Dt(37,Int32Array.from([6,28,54,80,106,132,158]),new Be(30,new ge(17,122),new ge(4,123)),new Be(28,new ge(29,46),new ge(14,47)),new Be(30,new ge(49,24),new ge(10,25)),new Be(30,new ge(24,15),new ge(46,16))),new Dt(38,Int32Array.from([6,32,58,84,110,136,162]),new Be(30,new ge(4,122),new ge(18,123)),new Be(28,new ge(13,46),new ge(32,47)),new Be(30,new ge(48,24),new ge(14,25)),new Be(30,new ge(42,15),new ge(32,16))),new Dt(39,Int32Array.from([6,26,54,82,110,138,166]),new Be(30,new ge(20,117),new ge(4,118)),new Be(28,new ge(40,47),new ge(7,48)),new Be(30,new ge(43,24),new ge(22,25)),new Be(30,new ge(10,15),new ge(67,16))),new Dt(40,Int32Array.from([6,30,58,86,114,142,170]),new Be(30,new ge(19,118),new ge(6,119)),new Be(28,new ge(18,47),new ge(31,48)),new Be(30,new ge(34,24),new ge(34,25)),new Be(30,new ge(20,15),new ge(61,16)))];var Nr;(function(Z){Z[Z.DATA_MASK_000=0]="DATA_MASK_000",Z[Z.DATA_MASK_001=1]="DATA_MASK_001",Z[Z.DATA_MASK_010=2]="DATA_MASK_010",Z[Z.DATA_MASK_011=3]="DATA_MASK_011",Z[Z.DATA_MASK_100=4]="DATA_MASK_100",Z[Z.DATA_MASK_101=5]="DATA_MASK_101",Z[Z.DATA_MASK_110=6]="DATA_MASK_110",Z[Z.DATA_MASK_111=7]="DATA_MASK_111"})(Nr||(Nr={}));class Ei{constructor(r,a){this.value=r,this.isMasked=a}unmaskBitMatrix(r,a){for(let c=0;c<a;c++)for(let u=0;u<a;u++)this.isMasked(c,u)&&r.flip(u,c)}}Ei.values=new Map([[Nr.DATA_MASK_000,new Ei(Nr.DATA_MASK_000,(Z,r)=>(Z+r&1)===0)],[Nr.DATA_MASK_001,new Ei(Nr.DATA_MASK_001,(Z,r)=>(Z&1)===0)],[Nr.DATA_MASK_010,new Ei(Nr.DATA_MASK_010,(Z,r)=>r%3===0)],[Nr.DATA_MASK_011,new Ei(Nr.DATA_MASK_011,(Z,r)=>(Z+r)%3===0)],[Nr.DATA_MASK_100,new Ei(Nr.DATA_MASK_100,(Z,r)=>(Math.floor(Z/2)+Math.floor(r/3)&1)===0)],[Nr.DATA_MASK_101,new Ei(Nr.DATA_MASK_101,(Z,r)=>Z*r%6===0)],[Nr.DATA_MASK_110,new Ei(Nr.DATA_MASK_110,(Z,r)=>Z*r%6<3)],[Nr.DATA_MASK_111,new Ei(Nr.DATA_MASK_111,(Z,r)=>(Z+r+Z*r%3&1)===0)]]);class ul{constructor(r){const a=r.getHeight();if(a<21||(a&3)!==1)throw new F;this.bitMatrix=r}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let r=0;for(let d=0;d<6;d++)r=this.copyBit(d,8,r);r=this.copyBit(7,8,r),r=this.copyBit(8,8,r),r=this.copyBit(8,7,r);for(let d=5;d>=0;d--)r=this.copyBit(8,d,r);const a=this.bitMatrix.getHeight();let c=0;const u=a-7;for(let d=a-1;d>=u;d--)c=this.copyBit(8,d,c);for(let d=a-8;d<a;d++)c=this.copyBit(d,8,c);if(this.parsedFormatInfo=Rr.decodeFormatInformation(r,c),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new F}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const r=this.bitMatrix.getHeight(),a=Math.floor((r-17)/4);if(a<=6)return Dt.getVersionForNumber(a);let c=0;const u=r-11;for(let h=5;h>=0;h--)for(let b=r-9;b>=u;b--)c=this.copyBit(b,h,c);let d=Dt.decodeVersionInformation(c);if(d!==null&&d.getDimensionForVersion()===r)return this.parsedVersion=d,d;c=0;for(let h=5;h>=0;h--)for(let b=r-9;b>=u;b--)c=this.copyBit(h,b,c);if(d=Dt.decodeVersionInformation(c),d!==null&&d.getDimensionForVersion()===r)return this.parsedVersion=d,d;throw new F}copyBit(r,a,c){return(this.isMirror?this.bitMatrix.get(a,r):this.bitMatrix.get(r,a))?c<<1|1:c<<1}readCodewords(){const r=this.readFormatInformation(),a=this.readVersion(),c=Ei.values.get(r.getDataMask()),u=this.bitMatrix.getHeight();c.unmaskBitMatrix(this.bitMatrix,u);const d=a.buildFunctionPattern();let h=!0;const b=new Uint8Array(a.getTotalCodewords());let w=0,T=0,V=0;for(let X=u-1;X>0;X-=2){X===6&&X--;for(let se=0;se<u;se++){const be=h?u-1-se:se;for(let Se=0;Se<2;Se++)d.get(X-Se,be)||(V++,T<<=1,this.bitMatrix.get(X-Se,be)&&(T|=1),V===8&&(b[w++]=T,V=0,T=0))}h=!h}if(w!==a.getTotalCodewords())throw new F;return b}remask(){if(this.parsedFormatInfo===null)return;const r=Ei.values[this.parsedFormatInfo.getDataMask()],a=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,a)}setMirror(r){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=r}mirror(){const r=this.bitMatrix;for(let a=0,c=r.getWidth();a<c;a++)for(let u=a+1,d=r.getHeight();u<d;u++)r.get(a,u)!==r.get(u,a)&&(r.flip(u,a),r.flip(a,u))}}class dl{constructor(r,a){this.numDataCodewords=r,this.codewords=a}static getDataBlocks(r,a,c){if(r.length!==a.getTotalCodewords())throw new N;const u=a.getECBlocksForLevel(c);let d=0;const h=u.getECBlocks();for(const Se of h)d+=Se.getCount();const b=new Array(d);let w=0;for(const Se of h)for(let Ee=0;Ee<Se.getCount();Ee++){const Le=Se.getDataCodewords(),Ge=u.getECCodewordsPerBlock()+Le;b[w++]=new dl(Le,new Uint8Array(Ge))}const T=b[0].codewords.length;let V=b.length-1;for(;V>=0&&b[V].codewords.length!==T;)V--;V++;const X=T-u.getECCodewordsPerBlock();let se=0;for(let Se=0;Se<X;Se++)for(let Ee=0;Ee<w;Ee++)b[Ee].codewords[Se]=r[se++];for(let Se=V;Se<w;Se++)b[Se].codewords[X]=r[se++];const be=b[0].codewords.length;for(let Se=X;Se<be;Se++)for(let Ee=0;Ee<w;Ee++){const Le=Ee<V?Se:Se+1;b[Ee].codewords[Le]=r[se++]}return b}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Ti;(function(Z){Z[Z.TERMINATOR=0]="TERMINATOR",Z[Z.NUMERIC=1]="NUMERIC",Z[Z.ALPHANUMERIC=2]="ALPHANUMERIC",Z[Z.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",Z[Z.BYTE=4]="BYTE",Z[Z.ECI=5]="ECI",Z[Z.KANJI=6]="KANJI",Z[Z.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",Z[Z.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",Z[Z.HANZI=9]="HANZI"})(Ti||(Ti={}));class Rt{constructor(r,a,c,u){this.value=r,this.stringValue=a,this.characterCountBitsForVersions=c,this.bits=u,Rt.FOR_BITS.set(u,this),Rt.FOR_VALUE.set(r,this)}static forBits(r){const a=Rt.FOR_BITS.get(r);if(a===void 0)throw new N;return a}getCharacterCountBits(r){const a=r.getVersionNumber();let c;return a<=9?c=0:a<=26?c=1:c=2,this.characterCountBitsForVersions[c]}getValue(){return this.value}getBits(){return this.bits}equals(r){if(!(r instanceof Rt))return!1;const a=r;return this.value===a.value}toString(){return this.stringValue}}Rt.FOR_BITS=new Map,Rt.FOR_VALUE=new Map,Rt.TERMINATOR=new Rt(Ti.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Rt.NUMERIC=new Rt(Ti.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Rt.ALPHANUMERIC=new Rt(Ti.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Rt.STRUCTURED_APPEND=new Rt(Ti.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Rt.BYTE=new Rt(Ti.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Rt.ECI=new Rt(Ti.ECI,"ECI",Int32Array.from([0,0,0]),7),Rt.KANJI=new Rt(Ti.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Rt.FNC1_FIRST_POSITION=new Rt(Ti.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Rt.FNC1_SECOND_POSITION=new Rt(Ti.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Rt.HANZI=new Rt(Ti.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Cn{static decode(r,a,c,u){const d=new oo(r);let h=new re;const b=new Array;let w=-1,T=-1;try{let V=null,X=!1,se;do{if(d.available()<4)se=Rt.TERMINATOR;else{const be=d.readBits(4);se=Rt.forBits(be)}switch(se){case Rt.TERMINATOR:break;case Rt.FNC1_FIRST_POSITION:case Rt.FNC1_SECOND_POSITION:X=!0;break;case Rt.STRUCTURED_APPEND:if(d.available()<16)throw new F;w=d.readBits(8),T=d.readBits(8);break;case Rt.ECI:const be=Cn.parseECIValue(d);if(V=M.getCharacterSetECIByValue(be),V===null)throw new F;break;case Rt.HANZI:const Se=d.readBits(4),Ee=d.readBits(se.getCharacterCountBits(a));Se===Cn.GB2312_SUBSET&&Cn.decodeHanziSegment(d,h,Ee);break;default:const Le=d.readBits(se.getCharacterCountBits(a));switch(se){case Rt.NUMERIC:Cn.decodeNumericSegment(d,h,Le);break;case Rt.ALPHANUMERIC:Cn.decodeAlphanumericSegment(d,h,Le,X);break;case Rt.BYTE:Cn.decodeByteSegment(d,h,Le,V,b,u);break;case Rt.KANJI:Cn.decodeKanjiSegment(d,h,Le);break;default:throw new F}break}}while(se!==Rt.TERMINATOR)}catch{throw new F}return new ve(r,h.toString(),b.length===0?null:b,c===null?null:c.toString(),w,T)}static decodeHanziSegment(r,a,c){if(c*13>r.available())throw new F;const u=new Uint8Array(2*c);let d=0;for(;c>0;){const h=r.readBits(13);let b=h/96<<8&4294967295|h%96;b<959?b+=41377:b+=42657,u[d]=b>>8&255,u[d+1]=b&255,d+=2,c--}try{a.append(k.decode(u,R.GB2312))}catch(h){throw new F(h)}}static decodeKanjiSegment(r,a,c){if(c*13>r.available())throw new F;const u=new Uint8Array(2*c);let d=0;for(;c>0;){const h=r.readBits(13);let b=h/192<<8&4294967295|h%192;b<7936?b+=33088:b+=49472,u[d]=b>>8,u[d+1]=b,d+=2,c--}try{a.append(k.decode(u,R.SHIFT_JIS))}catch(h){throw new F(h)}}static decodeByteSegment(r,a,c,u,d,h){if(8*c>r.available())throw new F;const b=new Uint8Array(c);for(let T=0;T<c;T++)b[T]=r.readBits(8);let w;u===null?w=R.guessEncoding(b,h):w=u.getName();try{a.append(k.decode(b,w))}catch(T){throw new F(T)}d.push(b)}static toAlphaNumericChar(r){if(r>=Cn.ALPHANUMERIC_CHARS.length)throw new F;return Cn.ALPHANUMERIC_CHARS[r]}static decodeAlphanumericSegment(r,a,c,u){const d=a.length();for(;c>1;){if(r.available()<11)throw new F;const h=r.readBits(11);a.append(Cn.toAlphaNumericChar(Math.floor(h/45))),a.append(Cn.toAlphaNumericChar(h%45)),c-=2}if(c===1){if(r.available()<6)throw new F;a.append(Cn.toAlphaNumericChar(r.readBits(6)))}if(u)for(let h=d;h<a.length();h++)a.charAt(h)==="%"&&(h<a.length()-1&&a.charAt(h+1)==="%"?a.deleteCharAt(h+1):a.setCharAt(h,""))}static decodeNumericSegment(r,a,c){for(;c>=3;){if(r.available()<10)throw new F;const u=r.readBits(10);if(u>=1e3)throw new F;a.append(Cn.toAlphaNumericChar(Math.floor(u/100))),a.append(Cn.toAlphaNumericChar(Math.floor(u/10)%10)),a.append(Cn.toAlphaNumericChar(u%10)),c-=3}if(c===2){if(r.available()<7)throw new F;const u=r.readBits(7);if(u>=100)throw new F;a.append(Cn.toAlphaNumericChar(Math.floor(u/10))),a.append(Cn.toAlphaNumericChar(u%10))}else if(c===1){if(r.available()<4)throw new F;const u=r.readBits(4);if(u>=10)throw new F;a.append(Cn.toAlphaNumericChar(u))}}static parseECIValue(r){const a=r.readBits(8);if(!(a&128))return a&127;if((a&192)===128){const c=r.readBits(8);return(a&63)<<8&4294967295|c}if((a&224)===192){const c=r.readBits(16);return(a&31)<<16&4294967295|c}throw new F}}Cn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Cn.GB2312_SUBSET=1;class Ds{constructor(r){this.mirrored=r}isMirrored(){return this.mirrored}applyMirroredCorrection(r){if(!this.mirrored||r===null||r.length<3)return;const a=r[0];r[0]=r[2],r[2]=a}}class co{constructor(){this.rsDecoder=new me(He.QR_CODE_FIELD_256)}decodeBooleanArray(r,a){return this.decodeBitMatrix(ee.parseFromBooleanArray(r),a)}decodeBitMatrix(r,a){const c=new ul(r);let u=null;try{return this.decodeBitMatrixParser(c,a)}catch(d){u=d}try{c.remask(),c.setMirror(!0),c.readVersion(),c.readFormatInformation(),c.mirror();const d=this.decodeBitMatrixParser(c,a);return d.setOther(new Ds(!0)),d}catch(d){throw u!==null?u:d}}decodeBitMatrixParser(r,a){const c=r.readVersion(),u=r.readFormatInformation().getErrorCorrectionLevel(),d=r.readCodewords(),h=dl.getDataBlocks(d,c,u);let b=0;for(const V of h)b+=V.getNumDataCodewords();const w=new Uint8Array(b);let T=0;for(const V of h){const X=V.getCodewords(),se=V.getNumDataCodewords();this.correctErrors(X,se);for(let be=0;be<se;be++)w[T++]=X[be]}return Cn.decode(w,c,u,a)}correctErrors(r,a){const c=new Int32Array(r);try{this.rsDecoder.decode(c,r.length-a)}catch{throw new v}for(let u=0;u<a;u++)r[u]=c[u]}}class uo extends Re{constructor(r,a,c){super(r,a),this.estimatedModuleSize=c}aboutEquals(r,a,c){if(Math.abs(a-this.getY())<=r&&Math.abs(c-this.getX())<=r){const u=Math.abs(r-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(r,a,c){const u=(this.getX()+a)/2,d=(this.getY()+r)/2,h=(this.estimatedModuleSize+c)/2;return new uo(u,d,h)}}class kr{constructor(r,a,c,u,d,h,b){this.image=r,this.startX=a,this.startY=c,this.width=u,this.height=d,this.moduleSize=h,this.resultPointCallback=b,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const r=this.startX,a=this.height,c=this.width,u=r+c,d=this.startY+a/2,h=new Int32Array(3),b=this.image;for(let w=0;w<a;w++){const T=d+(w&1?-Math.floor((w+1)/2):Math.floor((w+1)/2));h[0]=0,h[1]=0,h[2]=0;let V=r;for(;V<u&&!b.get(V,T);)V++;let X=0;for(;V<u;){if(b.get(V,T))if(X===1)h[1]++;else if(X===2){if(this.foundPatternCross(h)){const se=this.handlePossibleCenter(h,T,V);if(se!==null)return se}h[0]=h[2],h[1]=1,h[2]=0,X=1}else h[++X]++;else X===1&&X++,h[X]++;V++}if(this.foundPatternCross(h)){const se=this.handlePossibleCenter(h,T,u);if(se!==null)return se}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ne}static centerFromEnd(r,a){return a-r[2]-r[1]/2}foundPatternCross(r){const a=this.moduleSize,c=a/2;for(let u=0;u<3;u++)if(Math.abs(a-r[u])>=c)return!1;return!0}crossCheckVertical(r,a,c,u){const d=this.image,h=d.getHeight(),b=this.crossCheckStateCount;b[0]=0,b[1]=0,b[2]=0;let w=r;for(;w>=0&&d.get(a,w)&&b[1]<=c;)b[1]++,w--;if(w<0||b[1]>c)return NaN;for(;w>=0&&!d.get(a,w)&&b[0]<=c;)b[0]++,w--;if(b[0]>c)return NaN;for(w=r+1;w<h&&d.get(a,w)&&b[1]<=c;)b[1]++,w++;if(w===h||b[1]>c)return NaN;for(;w<h&&!d.get(a,w)&&b[2]<=c;)b[2]++,w++;if(b[2]>c)return NaN;const T=b[0]+b[1]+b[2];return 5*Math.abs(T-u)>=2*u?NaN:this.foundPatternCross(b)?kr.centerFromEnd(b,w):NaN}handlePossibleCenter(r,a,c){const u=r[0]+r[1]+r[2],d=kr.centerFromEnd(r,c),h=this.crossCheckVertical(a,d,2*r[1],u);if(!isNaN(h)){const b=(r[0]+r[1]+r[2])/3;for(const T of this.possibleCenters)if(T.aboutEquals(b,h,d))return T.combineEstimate(h,d,b);const w=new uo(d,h,b);this.possibleCenters.push(w),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(w)}return null}}class fl extends Re{constructor(r,a,c,u){super(r,a),this.estimatedModuleSize=c,this.count=u,u===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(r,a,c){if(Math.abs(a-this.getY())<=r&&Math.abs(c-this.getX())<=r){const u=Math.abs(r-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(r,a,c){const u=this.count+1,d=(this.count*this.getX()+a)/u,h=(this.count*this.getY()+r)/u,b=(this.count*this.estimatedModuleSize+c)/u;return new fl(d,h,b,u)}}class $l{constructor(r){this.bottomLeft=r[0],this.topLeft=r[1],this.topRight=r[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class _t{constructor(r,a){this.image=r,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=a}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(r){const a=r!=null&&r.get(ae.TRY_HARDER)!==void 0,c=r!=null&&r.get(ae.PURE_BARCODE)!==void 0,u=this.image,d=u.getHeight(),h=u.getWidth();let b=Math.floor(3*d/(4*_t.MAX_MODULES));(b<_t.MIN_SKIP||a)&&(b=_t.MIN_SKIP);let w=!1;const T=new Int32Array(5);for(let X=b-1;X<d&&!w;X+=b){T[0]=0,T[1]=0,T[2]=0,T[3]=0,T[4]=0;let se=0;for(let be=0;be<h;be++)if(u.get(be,X))(se&1)===1&&se++,T[se]++;else if(se&1)T[se]++;else if(se===4)if(_t.foundPatternCross(T)){if(this.handlePossibleCenter(T,X,be,c)===!0)if(b=2,this.hasSkipped===!0)w=this.haveMultiplyConfirmedCenters();else{const Ee=this.findRowSkip();Ee>T[2]&&(X+=Ee-T[2]-b,be=h-1)}else{T[0]=T[2],T[1]=T[3],T[2]=T[4],T[3]=1,T[4]=0,se=3;continue}se=0,T[0]=0,T[1]=0,T[2]=0,T[3]=0,T[4]=0}else T[0]=T[2],T[1]=T[3],T[2]=T[4],T[3]=1,T[4]=0,se=3;else T[++se]++;_t.foundPatternCross(T)&&this.handlePossibleCenter(T,X,h,c)===!0&&(b=T[0],this.hasSkipped&&(w=this.haveMultiplyConfirmedCenters()))}const V=this.selectBestPatterns();return Re.orderBestPatterns(V),new $l(V)}static centerFromEnd(r,a){return a-r[4]-r[3]-r[2]/2}static foundPatternCross(r){let a=0;for(let d=0;d<5;d++){const h=r[d];if(h===0)return!1;a+=h}if(a<7)return!1;const c=a/7,u=c/2;return Math.abs(c-r[0])<u&&Math.abs(c-r[1])<u&&Math.abs(3*c-r[2])<3*u&&Math.abs(c-r[3])<u&&Math.abs(c-r[4])<u}getCrossCheckStateCount(){const r=this.crossCheckStateCount;return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r}crossCheckDiagonal(r,a,c,u){const d=this.getCrossCheckStateCount();let h=0;const b=this.image;for(;r>=h&&a>=h&&b.get(a-h,r-h);)d[2]++,h++;if(r<h||a<h)return!1;for(;r>=h&&a>=h&&!b.get(a-h,r-h)&&d[1]<=c;)d[1]++,h++;if(r<h||a<h||d[1]>c)return!1;for(;r>=h&&a>=h&&b.get(a-h,r-h)&&d[0]<=c;)d[0]++,h++;if(d[0]>c)return!1;const w=b.getHeight(),T=b.getWidth();for(h=1;r+h<w&&a+h<T&&b.get(a+h,r+h);)d[2]++,h++;if(r+h>=w||a+h>=T)return!1;for(;r+h<w&&a+h<T&&!b.get(a+h,r+h)&&d[3]<c;)d[3]++,h++;if(r+h>=w||a+h>=T||d[3]>=c)return!1;for(;r+h<w&&a+h<T&&b.get(a+h,r+h)&&d[4]<c;)d[4]++,h++;if(d[4]>=c)return!1;const V=d[0]+d[1]+d[2]+d[3]+d[4];return Math.abs(V-u)<2*u&&_t.foundPatternCross(d)}crossCheckVertical(r,a,c,u){const d=this.image,h=d.getHeight(),b=this.getCrossCheckStateCount();let w=r;for(;w>=0&&d.get(a,w);)b[2]++,w--;if(w<0)return NaN;for(;w>=0&&!d.get(a,w)&&b[1]<=c;)b[1]++,w--;if(w<0||b[1]>c)return NaN;for(;w>=0&&d.get(a,w)&&b[0]<=c;)b[0]++,w--;if(b[0]>c)return NaN;for(w=r+1;w<h&&d.get(a,w);)b[2]++,w++;if(w===h)return NaN;for(;w<h&&!d.get(a,w)&&b[3]<c;)b[3]++,w++;if(w===h||b[3]>=c)return NaN;for(;w<h&&d.get(a,w)&&b[4]<c;)b[4]++,w++;if(b[4]>=c)return NaN;const T=b[0]+b[1]+b[2]+b[3]+b[4];return 5*Math.abs(T-u)>=2*u?NaN:_t.foundPatternCross(b)?_t.centerFromEnd(b,w):NaN}crossCheckHorizontal(r,a,c,u){const d=this.image,h=d.getWidth(),b=this.getCrossCheckStateCount();let w=r;for(;w>=0&&d.get(w,a);)b[2]++,w--;if(w<0)return NaN;for(;w>=0&&!d.get(w,a)&&b[1]<=c;)b[1]++,w--;if(w<0||b[1]>c)return NaN;for(;w>=0&&d.get(w,a)&&b[0]<=c;)b[0]++,w--;if(b[0]>c)return NaN;for(w=r+1;w<h&&d.get(w,a);)b[2]++,w++;if(w===h)return NaN;for(;w<h&&!d.get(w,a)&&b[3]<c;)b[3]++,w++;if(w===h||b[3]>=c)return NaN;for(;w<h&&d.get(w,a)&&b[4]<c;)b[4]++,w++;if(b[4]>=c)return NaN;const T=b[0]+b[1]+b[2]+b[3]+b[4];return 5*Math.abs(T-u)>=u?NaN:_t.foundPatternCross(b)?_t.centerFromEnd(b,w):NaN}handlePossibleCenter(r,a,c,u){const d=r[0]+r[1]+r[2]+r[3]+r[4];let h=_t.centerFromEnd(r,c),b=this.crossCheckVertical(a,Math.floor(h),r[2],d);if(!isNaN(b)&&(h=this.crossCheckHorizontal(Math.floor(h),Math.floor(b),r[2],d),!isNaN(h)&&(!u||this.crossCheckDiagonal(Math.floor(b),Math.floor(h),r[2],d)))){const w=d/7;let T=!1;const V=this.possibleCenters;for(let X=0,se=V.length;X<se;X++){const be=V[X];if(be.aboutEquals(w,b,h)){V[X]=be.combineEstimate(b,h,w),T=!0;break}}if(!T){const X=new fl(h,b,w);V.push(X),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(X)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let a=null;for(const c of this.possibleCenters)if(c.getCount()>=_t.CENTER_QUORUM)if(a==null)a=c;else return this.hasSkipped=!0,Math.floor((Math.abs(a.getX()-c.getX())-Math.abs(a.getY()-c.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let r=0,a=0;const c=this.possibleCenters.length;for(const h of this.possibleCenters)h.getCount()>=_t.CENTER_QUORUM&&(r++,a+=h.getEstimatedModuleSize());if(r<3)return!1;const u=a/c;let d=0;for(const h of this.possibleCenters)d+=Math.abs(h.getEstimatedModuleSize()-u);return d<=.05*a}selectBestPatterns(){const r=this.possibleCenters.length;if(r<3)throw new ne;const a=this.possibleCenters;let c;if(r>3){let u=0,d=0;for(const w of this.possibleCenters){const T=w.getEstimatedModuleSize();u+=T,d+=T*T}c=u/r;let h=Math.sqrt(d/r-c*c);a.sort((w,T)=>{const V=Math.abs(T.getEstimatedModuleSize()-c),X=Math.abs(w.getEstimatedModuleSize()-c);return V<X?-1:V>X?1:0});const b=Math.max(.2*c,h);for(let w=0;w<a.length&&a.length>3;w++){const T=a[w];Math.abs(T.getEstimatedModuleSize()-c)>b&&(a.splice(w,1),w--)}}if(a.length>3){let u=0;for(const d of a)u+=d.getEstimatedModuleSize();c=u/a.length,a.sort((d,h)=>{if(h.getCount()===d.getCount()){const b=Math.abs(h.getEstimatedModuleSize()-c),w=Math.abs(d.getEstimatedModuleSize()-c);return b<w?1:b>w?-1:0}else return h.getCount()-d.getCount()}),a.splice(3)}return[a[0],a[1],a[2]]}}_t.CENTER_QUORUM=2,_t.MIN_SKIP=3,_t.MAX_MODULES=57;class Ls{constructor(r){this.image=r}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(r){this.resultPointCallback=r==null?null:r.get(ae.NEED_RESULT_POINT_CALLBACK);const c=new _t(this.image,this.resultPointCallback).find(r);return this.processFinderPatternInfo(c)}processFinderPatternInfo(r){const a=r.getTopLeft(),c=r.getTopRight(),u=r.getBottomLeft(),d=this.calculateModuleSize(a,c,u);if(d<1)throw new ne("No pattern found in proccess finder.");const h=Ls.computeDimension(a,c,u,d),b=Dt.getProvisionalVersionForDimension(h),w=b.getDimensionForVersion()-7;let T=null;if(b.getAlignmentPatternCenters().length>0){const be=c.getX()-a.getX()+u.getX(),Se=c.getY()-a.getY()+u.getY(),Ee=1-3/w,Le=Math.floor(a.getX()+Ee*(be-a.getX())),Ge=Math.floor(a.getY()+Ee*(Se-a.getY()));for(let at=4;at<=16;at<<=1)try{T=this.findAlignmentInRegion(d,Le,Ge,at);break}catch(dt){if(!(dt instanceof ne))throw dt}}const V=Ls.createTransform(a,c,u,T,h),X=Ls.sampleGrid(this.image,V,h);let se;return T===null?se=[u,a,c]:se=[u,a,c,T],new Qe(X,se)}static createTransform(r,a,c,u,d){const h=d-3.5;let b,w,T,V;return u!==null?(b=u.getX(),w=u.getY(),T=h-3,V=T):(b=a.getX()-r.getX()+c.getX(),w=a.getY()-r.getY()+c.getY(),T=h,V=h),ct.quadrilateralToQuadrilateral(3.5,3.5,h,3.5,T,V,3.5,h,r.getX(),r.getY(),a.getX(),a.getY(),b,w,c.getX(),c.getY())}static sampleGrid(r,a,c){return Ot.getInstance().sampleGridWithTransform(r,c,c,a)}static computeDimension(r,a,c,u){const d=we.round(Re.distance(r,a)/u),h=we.round(Re.distance(r,c)/u);let b=Math.floor((d+h)/2)+7;switch(b&3){case 0:b++;break;case 2:b--;break;case 3:throw new ne("Dimensions could be not found.")}return b}calculateModuleSize(r,a,c){return(this.calculateModuleSizeOneWay(r,a)+this.calculateModuleSizeOneWay(r,c))/2}calculateModuleSizeOneWay(r,a){const c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(a.getX()),Math.floor(a.getY())),u=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(a.getX()),Math.floor(a.getY()),Math.floor(r.getX()),Math.floor(r.getY()));return isNaN(c)?u/7:isNaN(u)?c/7:(c+u)/14}sizeOfBlackWhiteBlackRunBothWays(r,a,c,u){let d=this.sizeOfBlackWhiteBlackRun(r,a,c,u),h=1,b=r-(c-r);b<0?(h=r/(r-b),b=0):b>=this.image.getWidth()&&(h=(this.image.getWidth()-1-r)/(b-r),b=this.image.getWidth()-1);let w=Math.floor(a-(u-a)*h);return h=1,w<0?(h=a/(a-w),w=0):w>=this.image.getHeight()&&(h=(this.image.getHeight()-1-a)/(w-a),w=this.image.getHeight()-1),b=Math.floor(r+(b-r)*h),d+=this.sizeOfBlackWhiteBlackRun(r,a,b,w),d-1}sizeOfBlackWhiteBlackRun(r,a,c,u){const d=Math.abs(u-a)>Math.abs(c-r);if(d){let be=r;r=a,a=be,be=c,c=u,u=be}const h=Math.abs(c-r),b=Math.abs(u-a);let w=-h/2;const T=r<c?1:-1,V=a<u?1:-1;let X=0;const se=c+T;for(let be=r,Se=a;be!==se;be+=T){const Ee=d?Se:be,Le=d?be:Se;if(X===1===this.image.get(Ee,Le)){if(X===2)return we.distance(be,Se,r,a);X++}if(w+=b,w>0){if(Se===u)break;Se+=V,w-=h}}return X===2?we.distance(c+T,u,r,a):NaN}findAlignmentInRegion(r,a,c,u){const d=Math.floor(u*r),h=Math.max(0,a-d),b=Math.min(this.image.getWidth()-1,a+d);if(b-h<r*3)throw new ne("Alignment top exceeds estimated module size.");const w=Math.max(0,c-d),T=Math.min(this.image.getHeight()-1,c+d);if(T-w<r*3)throw new ne("Alignment bottom exceeds estimated module size.");return new kr(this.image,h,w,b-h,T-w,r,this.resultPointCallback).find()}}class Oa{constructor(){this.decoder=new co}getDecoder(){return this.decoder}decode(r,a){let c,u;if(a!=null&&a.get(ae.PURE_BARCODE)!==void 0){const w=Oa.extractPureBits(r.getBlackMatrix());c=this.decoder.decodeBitMatrix(w,a),u=Oa.NO_POINTS}else{const w=new Ls(r.getBlackMatrix()).detect(a);c=this.decoder.decodeBitMatrix(w.getBits(),a),u=w.getPoints()}c.getOther()instanceof Ds&&c.getOther().applyMirroredCorrection(u);const d=new Q(c.getText(),c.getRawBytes(),void 0,u,ue.QR_CODE,void 0),h=c.getByteSegments();h!==null&&d.putMetadata(Ae.BYTE_SEGMENTS,h);const b=c.getECLevel();return b!==null&&d.putMetadata(Ae.ERROR_CORRECTION_LEVEL,b),c.hasStructuredAppend()&&(d.putMetadata(Ae.STRUCTURED_APPEND_SEQUENCE,c.getStructuredAppendSequenceNumber()),d.putMetadata(Ae.STRUCTURED_APPEND_PARITY,c.getStructuredAppendParity())),d}reset(){}static extractPureBits(r){const a=r.getTopLeftOnBit(),c=r.getBottomRightOnBit();if(a===null||c===null)throw new ne;const u=this.moduleSize(a,r);let d=a[1],h=c[1],b=a[0],w=c[0];if(b>=w||d>=h)throw new ne;if(h-d!==w-b&&(w=b+(h-d),w>=r.getWidth()))throw new ne;const T=Math.round((w-b+1)/u),V=Math.round((h-d+1)/u);if(T<=0||V<=0)throw new ne;if(V!==T)throw new ne;const X=Math.floor(u/2);d+=X,b+=X;const se=b+Math.floor((T-1)*u)-w;if(se>0){if(se>X)throw new ne;b-=se}const be=d+Math.floor((V-1)*u)-h;if(be>0){if(be>X)throw new ne;d-=be}const Se=new ee(T,V);for(let Ee=0;Ee<V;Ee++){const Le=d+Math.floor(Ee*u);for(let Ge=0;Ge<T;Ge++)r.get(b+Math.floor(Ge*u),Le)&&Se.set(Ge,Ee)}return Se}static moduleSize(r,a){const c=a.getHeight(),u=a.getWidth();let d=r[0],h=r[1],b=!0,w=0;for(;d<u&&h<c;){if(b!==a.get(d,h)){if(++w===5)break;b=!b}d++,h++}if(d===u||h===c)throw new ne;return(d-r[0])/7}}Oa.NO_POINTS=new Array;class Lt{PDF417Common(){}static getBitCountSum(r){return we.sum(r)}static toIntArray(r){if(r==null||!r.length)return Lt.EMPTY_INT_ARRAY;const a=new Int32Array(r.length);let c=0;for(const u of r)a[c++]=u;return a}static getCodeword(r){const a=_.binarySearch(Lt.SYMBOL_TABLE,r&262143);return a<0?-1:(Lt.CODEWORD_TABLE[a]-1)%Lt.NUMBER_OF_CODEWORDS}}Lt.NUMBER_OF_CODEWORDS=929,Lt.MAX_CODEWORDS_IN_BARCODE=Lt.NUMBER_OF_CODEWORDS-1,Lt.MIN_ROWS_IN_BARCODE=3,Lt.MAX_ROWS_IN_BARCODE=90,Lt.MODULES_IN_CODEWORD=17,Lt.MODULES_IN_STOP_PATTERN=18,Lt.BARS_IN_MODULE=8,Lt.EMPTY_INT_ARRAY=new Int32Array([]),Lt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Lt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class ec{constructor(r,a){this.bits=r,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class $t{static detectMultiple(r,a,c){let u=r.getBlackMatrix(),d=$t.detect(c,u);return d.length||(u=u.clone(),u.rotate180(),d=$t.detect(c,u)),new ec(u,d)}static detect(r,a){const c=new Array;let u=0,d=0,h=!1;for(;u<a.getHeight();){const b=$t.findVertices(a,u,d);if(b[0]==null&&b[3]==null){if(!h)break;h=!1,d=0;for(const w of c)w[1]!=null&&(u=Math.trunc(Math.max(u,w[1].getY()))),w[3]!=null&&(u=Math.max(u,Math.trunc(w[3].getY())));u+=$t.ROW_STEP;continue}if(h=!0,c.push(b),!r)break;b[2]!=null?(d=Math.trunc(b[2].getX()),u=Math.trunc(b[2].getY())):(d=Math.trunc(b[4].getX()),u=Math.trunc(b[4].getY()))}return c}static findVertices(r,a,c){const u=r.getHeight(),d=r.getWidth(),h=new Array(8);return $t.copyToResult(h,$t.findRowsWithPattern(r,u,d,a,c,$t.START_PATTERN),$t.INDEXES_START_PATTERN),h[4]!=null&&(c=Math.trunc(h[4].getX()),a=Math.trunc(h[4].getY())),$t.copyToResult(h,$t.findRowsWithPattern(r,u,d,a,c,$t.STOP_PATTERN),$t.INDEXES_STOP_PATTERN),h}static copyToResult(r,a,c){for(let u=0;u<c.length;u++)r[c[u]]=a[u]}static findRowsWithPattern(r,a,c,u,d,h){const b=new Array(4);let w=!1;const T=new Int32Array(h.length);for(;u<a;u+=$t.ROW_STEP){let X=$t.findGuardPattern(r,d,u,c,!1,h,T);if(X!=null){for(;u>0;){const se=$t.findGuardPattern(r,d,--u,c,!1,h,T);if(se!=null)X=se;else{u++;break}}b[0]=new Re(X[0],u),b[1]=new Re(X[1],u),w=!0;break}}let V=u+1;if(w){let X=0,se=Int32Array.from([Math.trunc(b[0].getX()),Math.trunc(b[1].getX())]);for(;V<a;V++){const be=$t.findGuardPattern(r,se[0],V,c,!1,h,T);if(be!=null&&Math.abs(se[0]-be[0])<$t.MAX_PATTERN_DRIFT&&Math.abs(se[1]-be[1])<$t.MAX_PATTERN_DRIFT)se=be,X=0;else{if(X>$t.SKIPPED_ROW_COUNT_MAX)break;X++}}V-=X+1,b[2]=new Re(se[0],V),b[3]=new Re(se[1],V)}return V-u<$t.BARCODE_MIN_HEIGHT&&_.fill(b,null),b}static findGuardPattern(r,a,c,u,d,h,b){_.fillWithin(b,0,b.length,0);let w=a,T=0;for(;r.get(w,c)&&w>0&&T++<$t.MAX_PIXEL_DRIFT;)w--;let V=w,X=0,se=h.length;for(let be=d;V<u;V++)if(r.get(V,c)!==be)b[X]++;else{if(X===se-1){if($t.patternMatchVariance(b,h,$t.MAX_INDIVIDUAL_VARIANCE)<$t.MAX_AVG_VARIANCE)return new Int32Array([w,V]);w+=b[0]+b[1],E.arraycopy(b,2,b,0,X-1),b[X-1]=0,b[X]=0,X--}else X++;b[X]=1,be=!be}return X===se-1&&$t.patternMatchVariance(b,h,$t.MAX_INDIVIDUAL_VARIANCE)<$t.MAX_AVG_VARIANCE?new Int32Array([w,V-1]):null}static patternMatchVariance(r,a,c){let u=r.length,d=0,h=0;for(let T=0;T<u;T++)d+=r[T],h+=a[T];if(d<h)return 1/0;let b=d/h;c*=b;let w=0;for(let T=0;T<u;T++){let V=r[T],X=a[T]*b,se=V>X?V-X:X-V;if(se>c)return 1/0;w+=se}return w/d}}$t.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),$t.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),$t.MAX_AVG_VARIANCE=.42,$t.MAX_INDIVIDUAL_VARIANCE=.8,$t.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),$t.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),$t.MAX_PIXEL_DRIFT=3,$t.MAX_PATTERN_DRIFT=5,$t.SKIPPED_ROW_COUNT_MAX=25,$t.ROW_STEP=5,$t.BARCODE_MIN_HEIGHT=10;class gr{constructor(r,a){if(a.length===0)throw new N;this.field=r;let c=a.length;if(c>1&&a[0]===0){let u=1;for(;u<c&&a[u]===0;)u++;u===c?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(c-u),E.arraycopy(a,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);if(r===1){let u=0;for(let d of this.coefficients)u=this.field.add(u,d);return u}let a=this.coefficients[0],c=this.coefficients.length;for(let u=1;u<c;u++)a=this.field.add(this.field.multiply(r,a),this.coefficients[u]);return a}add(r){if(!this.field.equals(r.field))throw new N("ModulusPolys do not have same ModulusGF field");if(this.isZero())return r;if(r.isZero())return this;let a=this.coefficients,c=r.coefficients;if(a.length>c.length){let h=a;a=c,c=h}let u=new Int32Array(c.length),d=c.length-a.length;E.arraycopy(c,0,u,0,d);for(let h=d;h<c.length;h++)u[h]=this.field.add(a[h-d],c[h]);return new gr(this.field,u)}subtract(r){if(!this.field.equals(r.field))throw new N("ModulusPolys do not have same ModulusGF field");return r.isZero()?this:this.add(r.negative())}multiply(r){return r instanceof gr?this.multiplyOther(r):this.multiplyScalar(r)}multiplyOther(r){if(!this.field.equals(r.field))throw new N("ModulusPolys do not have same ModulusGF field");if(this.isZero()||r.isZero())return new gr(this.field,new Int32Array([0]));let a=this.coefficients,c=a.length,u=r.coefficients,d=u.length,h=new Int32Array(c+d-1);for(let b=0;b<c;b++){let w=a[b];for(let T=0;T<d;T++)h[b+T]=this.field.add(h[b+T],this.field.multiply(w,u[T]))}return new gr(this.field,h)}negative(){let r=this.coefficients.length,a=new Int32Array(r);for(let c=0;c<r;c++)a[c]=this.field.subtract(0,this.coefficients[c]);return new gr(this.field,a)}multiplyScalar(r){if(r===0)return new gr(this.field,new Int32Array([0]));if(r===1)return this;let a=this.coefficients.length,c=new Int32Array(a);for(let u=0;u<a;u++)c[u]=this.field.multiply(this.coefficients[u],r);return new gr(this.field,c)}multiplyByMonomial(r,a){if(r<0)throw new N;if(a===0)return new gr(this.field,new Int32Array([0]));let c=this.coefficients.length,u=new Int32Array(c+r);for(let d=0;d<c;d++)u[d]=this.field.multiply(this.coefficients[d],a);return new gr(this.field,u)}toString(){let r=new re;for(let a=this.getDegree();a>=0;a--){let c=this.getCoefficient(a);c!==0&&(c<0?(r.append(" - "),c=-c):r.length()>0&&r.append(" + "),(a===0||c!==1)&&r.append(c),a!==0&&(a===1?r.append("x"):(r.append("x^"),r.append(a))))}return r.toString()}}class hl{add(r,a){return(r+a)%this.modulus}subtract(r,a){return(this.modulus+r-a)%this.modulus}exp(r){return this.expTable[r]}log(r){if(r===0)throw new N;return this.logTable[r]}inverse(r){if(r===0)throw new Ye;return this.expTable[this.modulus-this.logTable[r]-1]}multiply(r,a){return r===0||a===0?0:this.expTable[(this.logTable[r]+this.logTable[a])%(this.modulus-1)]}getSize(){return this.modulus}equals(r){return r===this}}class ml extends hl{constructor(r,a){super(),this.modulus=r,this.expTable=new Int32Array(r),this.logTable=new Int32Array(r);let c=1;for(let u=0;u<r;u++)this.expTable[u]=c,c=c*a%r;for(let u=0;u<r-1;u++)this.logTable[this.expTable[u]]=u;this.zero=new gr(this,new Int32Array([0])),this.one=new gr(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,a){if(r<0)throw new N;if(a===0)return this.zero;let c=new Int32Array(r+1);return c[0]=a,new gr(this,c)}}ml.PDF417_GF=new ml(Lt.NUMBER_OF_CODEWORDS,3);class tc{constructor(){this.field=ml.PDF417_GF}decode(r,a,c){let u=new gr(this.field,r),d=new Int32Array(a),h=!1;for(let Se=a;Se>0;Se--){let Ee=u.evaluateAt(this.field.exp(Se));d[a-Se]=Ee,Ee!==0&&(h=!0)}if(!h)return 0;let b=this.field.getOne();if(c!=null)for(const Se of c){let Ee=this.field.exp(r.length-1-Se),Le=new gr(this.field,new Int32Array([this.field.subtract(0,Ee),1]));b=b.multiply(Le)}let w=new gr(this.field,d),T=this.runEuclideanAlgorithm(this.field.buildMonomial(a,1),w,a),V=T[0],X=T[1],se=this.findErrorLocations(V),be=this.findErrorMagnitudes(X,V,se);for(let Se=0;Se<se.length;Se++){let Ee=r.length-1-this.field.log(se[Se]);if(Ee<0)throw v.getChecksumInstance();r[Ee]=this.field.subtract(r[Ee],be[Se])}return se.length}runEuclideanAlgorithm(r,a,c){if(r.getDegree()<a.getDegree()){let se=r;r=a,a=se}let u=r,d=a,h=this.field.getZero(),b=this.field.getOne();for(;d.getDegree()>=Math.round(c/2);){let se=u,be=h;if(u=d,h=b,u.isZero())throw v.getChecksumInstance();d=se;let Se=this.field.getZero(),Ee=u.getCoefficient(u.getDegree()),Le=this.field.inverse(Ee);for(;d.getDegree()>=u.getDegree()&&!d.isZero();){let Ge=d.getDegree()-u.getDegree(),at=this.field.multiply(d.getCoefficient(d.getDegree()),Le);Se=Se.add(this.field.buildMonomial(Ge,at)),d=d.subtract(u.multiplyByMonomial(Ge,at))}b=Se.multiply(h).subtract(be).negative()}let w=b.getCoefficient(0);if(w===0)throw v.getChecksumInstance();let T=this.field.inverse(w),V=b.multiply(T),X=d.multiply(T);return[V,X]}findErrorLocations(r){let a=r.getDegree(),c=new Int32Array(a),u=0;for(let d=1;d<this.field.getSize()&&u<a;d++)r.evaluateAt(d)===0&&(c[u]=this.field.inverse(d),u++);if(u!==a)throw v.getChecksumInstance();return c}findErrorMagnitudes(r,a,c){let u=a.getDegree(),d=new Int32Array(u);for(let T=1;T<=u;T++)d[u-T]=this.field.multiply(T,a.getCoefficient(T));let h=new gr(this.field,d),b=c.length,w=new Int32Array(b);for(let T=0;T<b;T++){let V=this.field.inverse(c[T]),X=this.field.subtract(0,r.evaluateAt(V)),se=this.field.inverse(h.evaluateAt(V));w[T]=this.field.multiply(X,se)}return w}}class Qa{constructor(r,a,c,u,d){r instanceof Qa?this.constructor_2(r):this.constructor_1(r,a,c,u,d)}constructor_1(r,a,c,u,d){const h=a==null||c==null,b=u==null||d==null;if(h&&b)throw new ne;h?(a=new Re(0,u.getY()),c=new Re(0,d.getY())):b&&(u=new Re(r.getWidth()-1,a.getY()),d=new Re(r.getWidth()-1,c.getY())),this.image=r,this.topLeft=a,this.bottomLeft=c,this.topRight=u,this.bottomRight=d,this.minX=Math.trunc(Math.min(a.getX(),c.getX())),this.maxX=Math.trunc(Math.max(u.getX(),d.getX())),this.minY=Math.trunc(Math.min(a.getY(),u.getY())),this.maxY=Math.trunc(Math.max(c.getY(),d.getY()))}constructor_2(r){this.image=r.image,this.topLeft=r.getTopLeft(),this.bottomLeft=r.getBottomLeft(),this.topRight=r.getTopRight(),this.bottomRight=r.getBottomRight(),this.minX=r.getMinX(),this.maxX=r.getMaxX(),this.minY=r.getMinY(),this.maxY=r.getMaxY()}static merge(r,a){return r==null?a:a==null?r:new Qa(r.image,r.topLeft,r.bottomLeft,a.topRight,a.bottomRight)}addMissingRows(r,a,c){let u=this.topLeft,d=this.bottomLeft,h=this.topRight,b=this.bottomRight;if(r>0){let w=c?this.topLeft:this.topRight,T=Math.trunc(w.getY()-r);T<0&&(T=0);let V=new Re(w.getX(),T);c?u=V:h=V}if(a>0){let w=c?this.bottomLeft:this.bottomRight,T=Math.trunc(w.getY()+a);T>=this.image.getHeight()&&(T=this.image.getHeight()-1);let V=new Re(w.getX(),T);c?d=V:b=V}return new Qa(this.image,u,d,h,b)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class gl{constructor(r,a,c,u){this.columnCount=r,this.errorCorrectionLevel=u,this.rowCountUpperPart=a,this.rowCountLowerPart=c,this.rowCount=a+c}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class ma{constructor(){this.buffer=""}static form(r,a){let c=-1;function u(h,b,w,T,V,X){if(h==="%%")return"%";if(a[++c]===void 0)return;h=T?parseInt(T.substr(1)):void 0;let se=V?parseInt(V.substr(1)):void 0,be;switch(X){case"s":be=a[c];break;case"c":be=a[c][0];break;case"f":be=parseFloat(a[c]).toFixed(h);break;case"p":be=parseFloat(a[c]).toPrecision(h);break;case"e":be=parseFloat(a[c]).toExponential(h);break;case"x":be=parseInt(a[c]).toString(se||16);break;case"d":be=parseFloat(parseInt(a[c],se||10).toPrecision(h)).toFixed(0);break}be=typeof be=="object"?JSON.stringify(be):(+be).toString(se);let Se=parseInt(w),Ee=w&&w[0]+""=="0"?"0":" ";for(;be.length<Se;)be=b!==void 0?be+Ee:Ee+be;return be}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(d,u)}format(r,...a){this.buffer+=ma.form(r,a)}toString(){return this.buffer}}class Ki{constructor(r){this.boundingBox=new Qa(r),this.codewords=new Array(r.getMaxY()-r.getMinY()+1)}getCodewordNearby(r){let a=this.getCodeword(r);if(a!=null)return a;for(let c=1;c<Ki.MAX_NEARBY_DISTANCE;c++){let u=this.imageRowToCodewordIndex(r)-c;if(u>=0&&(a=this.codewords[u],a!=null)||(u=this.imageRowToCodewordIndex(r)+c,u<this.codewords.length&&(a=this.codewords[u],a!=null)))return a}return null}imageRowToCodewordIndex(r){return r-this.boundingBox.getMinY()}setCodeword(r,a){this.codewords[this.imageRowToCodewordIndex(r)]=a}getCodeword(r){return this.codewords[this.imageRowToCodewordIndex(r)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const r=new ma;let a=0;for(const c of this.codewords){if(c==null){r.format("%3d:    |   %n",a++);continue}r.format("%3d: %3d|%3d%n",a++,c.getRowNumber(),c.getValue())}return r.toString()}}Ki.MAX_NEARBY_DISTANCE=5;class Os{constructor(){this.values=new Map}setValue(r){r=Math.trunc(r);let a=this.values.get(r);a==null&&(a=0),a++,this.values.set(r,a)}getValue(){let r=-1,a=new Array;for(const[c,u]of this.values.entries()){const d={getKey:()=>c,getValue:()=>u};d.getValue()>r?(r=d.getValue(),a=[],a.push(d.getKey())):d.getValue()===r&&a.push(d.getKey())}return Lt.toIntArray(a)}getConfidence(r){return this.values.get(r)}}class us extends Ki{constructor(r,a){super(r),this._isLeft=a}setRowNumbers(){for(let r of this.getCodewords())r!=null&&r.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(r){let a=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(a,r);let c=this.getBoundingBox(),u=this._isLeft?c.getTopLeft():c.getTopRight(),d=this._isLeft?c.getBottomLeft():c.getBottomRight(),h=this.imageRowToCodewordIndex(Math.trunc(u.getY())),b=this.imageRowToCodewordIndex(Math.trunc(d.getY())),w=-1,T=1,V=0;for(let X=h;X<b;X++){if(a[X]==null)continue;let se=a[X],be=se.getRowNumber()-w;if(be===0)V++;else if(be===1)T=Math.max(T,V),V=1,w=se.getRowNumber();else if(be<0||se.getRowNumber()>=r.getRowCount()||be>X)a[X]=null;else{let Se;T>2?Se=(T-2)*be:Se=be;let Ee=Se>=X;for(let Le=1;Le<=Se&&!Ee;Le++)Ee=a[X-Le]!=null;Ee?a[X]=null:(w=se.getRowNumber(),V=1)}}}getRowHeights(){let r=this.getBarcodeMetadata();if(r==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(r);let a=new Int32Array(r.getRowCount());for(let c of this.getCodewords())if(c!=null){let u=c.getRowNumber();if(u>=a.length)continue;a[u]++}return a}adjustIncompleteIndicatorColumnRowNumbers(r){let a=this.getBoundingBox(),c=this._isLeft?a.getTopLeft():a.getTopRight(),u=this._isLeft?a.getBottomLeft():a.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(c.getY())),h=this.imageRowToCodewordIndex(Math.trunc(u.getY())),b=this.getCodewords(),w=-1;for(let T=d;T<h;T++){if(b[T]==null)continue;let V=b[T];V.setRowNumberAsRowIndicatorColumn();let X=V.getRowNumber()-w;X===0||(X===1?w=V.getRowNumber():V.getRowNumber()>=r.getRowCount()?b[T]=null:w=V.getRowNumber())}}getBarcodeMetadata(){let r=this.getCodewords(),a=new Os,c=new Os,u=new Os,d=new Os;for(let b of r){if(b==null)continue;b.setRowNumberAsRowIndicatorColumn();let w=b.getValue()%30,T=b.getRowNumber();switch(this._isLeft||(T+=2),T%3){case 0:c.setValue(w*3+1);break;case 1:d.setValue(w/3),u.setValue(w%3);break;case 2:a.setValue(w+1);break}}if(a.getValue().length===0||c.getValue().length===0||u.getValue().length===0||d.getValue().length===0||a.getValue()[0]<1||c.getValue()[0]+u.getValue()[0]<Lt.MIN_ROWS_IN_BARCODE||c.getValue()[0]+u.getValue()[0]>Lt.MAX_ROWS_IN_BARCODE)return null;let h=new gl(a.getValue()[0],c.getValue()[0],u.getValue()[0],d.getValue()[0]);return this.removeIncorrectCodewords(r,h),h}removeIncorrectCodewords(r,a){for(let c=0;c<r.length;c++){let u=r[c];if(r[c]==null)continue;let d=u.getValue()%30,h=u.getRowNumber();if(h>a.getRowCount()){r[c]=null;continue}switch(this._isLeft||(h+=2),h%3){case 0:d*3+1!==a.getRowCountUpperPart()&&(r[c]=null);break;case 1:(Math.trunc(d/3)!==a.getErrorCorrectionLevel()||d%3!==a.getRowCountLowerPart())&&(r[c]=null);break;case 2:d+1!==a.getColumnCount()&&(r[c]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Ka{constructor(r,a){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=r,this.barcodeColumnCount=r.getColumnCount(),this.boundingBox=a,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let r=Lt.MAX_CODEWORDS_IN_BARCODE,a;do a=r,r=this.adjustRowNumbersAndGetCount();while(r>0&&r<a);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(r){r!=null&&r.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let r=this.adjustRowNumbersByRow();if(r===0)return 0;for(let a=1;a<this.barcodeColumnCount+1;a++){let c=this.detectionResultColumns[a].getCodewords();for(let u=0;u<c.length;u++)c[u]!=null&&(c[u].hasValidRowNumber()||this.adjustRowNumbers(a,u,c))}return r}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let r=this.detectionResultColumns[0].getCodewords(),a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let c=0;c<r.length;c++)if(r[c]!=null&&a[c]!=null&&r[c].getRowNumber()===a[c].getRowNumber())for(let u=1;u<=this.barcodeColumnCount;u++){let d=this.detectionResultColumns[u].getCodewords()[c];d!=null&&(d.setRowNumber(r[c].getRowNumber()),d.hasValidRowNumber()||(this.detectionResultColumns[u].getCodewords()[c]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let r=0,a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let c=0;c<a.length;c++){if(a[c]==null)continue;let u=a[c].getRowNumber(),d=0;for(let h=this.barcodeColumnCount+1;h>0&&d<this.ADJUST_ROW_NUMBER_SKIP;h--){let b=this.detectionResultColumns[h].getCodewords()[c];b!=null&&(d=Ka.adjustRowNumberIfValid(u,d,b),b.hasValidRowNumber()||r++)}}return r}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let r=0,a=this.detectionResultColumns[0].getCodewords();for(let c=0;c<a.length;c++){if(a[c]==null)continue;let u=a[c].getRowNumber(),d=0;for(let h=1;h<this.barcodeColumnCount+1&&d<this.ADJUST_ROW_NUMBER_SKIP;h++){let b=this.detectionResultColumns[h].getCodewords()[c];b!=null&&(d=Ka.adjustRowNumberIfValid(u,d,b),b.hasValidRowNumber()||r++)}}return r}static adjustRowNumberIfValid(r,a,c){return c==null||c.hasValidRowNumber()||(c.isValidRowNumber(r)?(c.setRowNumber(r),a=0):++a),a}adjustRowNumbers(r,a,c){if(!this.detectionResultColumns[r-1])return;let u=c[a],d=this.detectionResultColumns[r-1].getCodewords(),h=d;this.detectionResultColumns[r+1]!=null&&(h=this.detectionResultColumns[r+1].getCodewords());let b=new Array(14);b[2]=d[a],b[3]=h[a],a>0&&(b[0]=c[a-1],b[4]=d[a-1],b[5]=h[a-1]),a>1&&(b[8]=c[a-2],b[10]=d[a-2],b[11]=h[a-2]),a<c.length-1&&(b[1]=c[a+1],b[6]=d[a+1],b[7]=h[a+1]),a<c.length-2&&(b[9]=c[a+2],b[12]=d[a+2],b[13]=h[a+2]);for(let w of b)if(Ka.adjustRowNumber(u,w))return}static adjustRowNumber(r,a){return a==null?!1:a.hasValidRowNumber()&&a.getBucket()===r.getBucket()?(r.setRowNumber(a.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(r){this.boundingBox=r}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(r,a){this.detectionResultColumns[r]=a}getDetectionResultColumn(r){return this.detectionResultColumns[r]}toString(){let r=this.detectionResultColumns[0];r==null&&(r=this.detectionResultColumns[this.barcodeColumnCount+1]);let a=new ma;for(let c=0;c<r.getCodewords().length;c++){a.format("CW %3d:",c);for(let u=0;u<this.barcodeColumnCount+2;u++){if(this.detectionResultColumns[u]==null){a.format("    |   ");continue}let d=this.detectionResultColumns[u].getCodewords()[c];if(d==null){a.format("    |   ");continue}a.format(" %3d|%3d",d.getRowNumber(),d.getValue())}a.format("%n")}return a.toString()}}class Ma{constructor(r,a,c,u){this.rowNumber=Ma.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(r),this.endX=Math.trunc(a),this.bucket=Math.trunc(c),this.value=Math.trunc(u)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(r){return r!==Ma.BARCODE_ROW_UNKNOWN&&this.bucket===r%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(r){this.rowNumber=r}toString(){return this.rowNumber+"|"+this.value}}Ma.BARCODE_ROW_UNKNOWN=-1;class ti{static initialize(){for(let r=0;r<Lt.SYMBOL_TABLE.length;r++){let a=Lt.SYMBOL_TABLE[r],c=a&1;for(let u=0;u<Lt.BARS_IN_MODULE;u++){let d=0;for(;(a&1)===c;)d+=1,a>>=1;c=a&1,ti.RATIOS_TABLE[r]||(ti.RATIOS_TABLE[r]=new Array(Lt.BARS_IN_MODULE)),ti.RATIOS_TABLE[r][Lt.BARS_IN_MODULE-u-1]=Math.fround(d/Lt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(r){let a=ti.getDecodedCodewordValue(ti.sampleBitCounts(r));return a!==-1?a:ti.getClosestDecodedValue(r)}static sampleBitCounts(r){let a=we.sum(r),c=new Int32Array(Lt.BARS_IN_MODULE),u=0,d=0;for(let h=0;h<Lt.MODULES_IN_CODEWORD;h++){let b=a/(2*Lt.MODULES_IN_CODEWORD)+h*a/Lt.MODULES_IN_CODEWORD;d+r[u]<=b&&(d+=r[u],u++),c[u]++}return c}static getDecodedCodewordValue(r){let a=ti.getBitValue(r);return Lt.getCodeword(a)===-1?-1:a}static getBitValue(r){let a=0;for(let c=0;c<r.length;c++)for(let u=0;u<r[c];u++)a=a<<1|(c%2===0?1:0);return Math.trunc(a)}static getClosestDecodedValue(r){let a=we.sum(r),c=new Array(Lt.BARS_IN_MODULE);if(a>1)for(let h=0;h<c.length;h++)c[h]=Math.fround(r[h]/a);let u=Xe.MAX_VALUE,d=-1;this.bSymbolTableReady||ti.initialize();for(let h=0;h<ti.RATIOS_TABLE.length;h++){let b=0,w=ti.RATIOS_TABLE[h];for(let T=0;T<Lt.BARS_IN_MODULE;T++){let V=Math.fround(w[T]-c[T]);if(b+=Math.fround(V*V),b>=u)break}b<u&&(u=b,d=Lt.SYMBOL_TABLE[h])}return d}}ti.bSymbolTableReady=!1,ti.RATIOS_TABLE=new Array(Lt.SYMBOL_TABLE.length).map(Z=>new Array(Lt.BARS_IN_MODULE));class pl{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(r){this.segmentIndex=r}getFileId(){return this.fileId}setFileId(r){this.fileId=r}getOptionalData(){return this.optionalData}setOptionalData(r){this.optionalData=r}isLastSegment(){return this.lastSegment}setLastSegment(r){this.lastSegment=r}getSegmentCount(){return this.segmentCount}setSegmentCount(r){this.segmentCount=r}getSender(){return this.sender||null}setSender(r){this.sender=r}getAddressee(){return this.addressee||null}setAddressee(r){this.addressee=r}getFileName(){return this.fileName}setFileName(r){this.fileName=r}getFileSize(){return this.fileSize}setFileSize(r){this.fileSize=r}getChecksum(){return this.checksum}setChecksum(r){this.checksum=r}getTimestamp(){return this.timestamp}setTimestamp(r){this.timestamp=r}}class xl{static parseLong(r,a=void 0){return parseInt(r,a)}}class bl extends x{}bl.kind="NullPointerException";class Ra{writeBytes(r){this.writeBytesOffset(r,0,r.length)}writeBytesOffset(r,a,c){if(r==null)throw new bl;if(a<0||a>r.length||c<0||a+c>r.length||a+c<0)throw new P;if(c===0)return;for(let u=0;u<c;u++)this.write(r[a+u])}flush(){}close(){}}class Ja extends x{}class ou extends Ra{constructor(r=32){if(super(),this.count=0,r<0)throw new N("Negative initial size: "+r);this.buf=new Uint8Array(r)}ensureCapacity(r){r-this.buf.length>0&&this.grow(r)}grow(r){let c=this.buf.length<<1;if(c-r<0&&(c=r),c<0){if(r<0)throw new Ja;c=D.MAX_VALUE}this.buf=_.copyOfUint8Array(this.buf,c)}write(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1}writeBytesOffset(r,a,c){if(a<0||a>r.length||c<0||a+c-r.length>0)throw new P;this.ensureCapacity(this.count+c),E.arraycopy(r,a,this.buf,this.count,c),this.count+=c}writeTo(r){r.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return _.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(r){return new String(this.buf).toString()}toString_number(r){return new String(this.buf).toString()}close(){}}var hn;(function(Z){Z[Z.ALPHA=0]="ALPHA",Z[Z.LOWER=1]="LOWER",Z[Z.MIXED=2]="MIXED",Z[Z.PUNCT=3]="PUNCT",Z[Z.ALPHA_SHIFT=4]="ALPHA_SHIFT",Z[Z.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(hn||(hn={}));function Ji(){if(typeof window<"u")return window.BigInt||null;if(typeof qs<"u")return qs.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let ds;function ji(Z){if(typeof ds>"u"&&(ds=Ji()),ds===null)throw new Error("BigInt is not supported!");return ds(Z)}function lu(){let Z=[];Z[0]=ji(1);let r=ji(900);Z[1]=r;for(let a=2;a<16;a++)Z[a]=Z[a-1]*r;return Z}class Ve{static decode(r,a){let c=new re(""),u=M.ISO8859_1;c.enableDecoding(u);let d=1,h=r[d++],b=new pl;for(;d<r[0];){switch(h){case Ve.TEXT_COMPACTION_MODE_LATCH:d=Ve.textCompaction(r,d,c);break;case Ve.BYTE_COMPACTION_MODE_LATCH:case Ve.BYTE_COMPACTION_MODE_LATCH_6:d=Ve.byteCompaction(h,r,u,d,c);break;case Ve.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(r[d++]);break;case Ve.NUMERIC_COMPACTION_MODE_LATCH:d=Ve.numericCompaction(r,d,c);break;case Ve.ECI_CHARSET:M.getCharacterSetECIByValue(r[d++]);break;case Ve.ECI_GENERAL_PURPOSE:d+=2;break;case Ve.ECI_USER_DEFINED:d++;break;case Ve.BEGIN_MACRO_PDF417_CONTROL_BLOCK:d=Ve.decodeMacroBlock(r,d,b);break;case Ve.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Ve.MACRO_PDF417_TERMINATOR:throw new F;default:d--,d=Ve.textCompaction(r,d,c);break}if(d<r.length)h=r[d++];else throw F.getFormatInstance()}if(c.length()===0)throw F.getFormatInstance();let w=new ve(null,c.toString(),null,a);return w.setOther(b),w}static decodeMacroBlock(r,a,c){if(a+Ve.NUMBER_OF_SEQUENCE_CODEWORDS>r[0])throw F.getFormatInstance();let u=new Int32Array(Ve.NUMBER_OF_SEQUENCE_CODEWORDS);for(let b=0;b<Ve.NUMBER_OF_SEQUENCE_CODEWORDS;b++,a++)u[b]=r[a];c.setSegmentIndex(D.parseInt(Ve.decodeBase900toBase10(u,Ve.NUMBER_OF_SEQUENCE_CODEWORDS)));let d=new re;a=Ve.textCompaction(r,a,d),c.setFileId(d.toString());let h=-1;for(r[a]===Ve.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(h=a+1);a<r[0];)switch(r[a]){case Ve.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(a++,r[a]){case Ve.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let b=new re;a=Ve.textCompaction(r,a+1,b),c.setFileName(b.toString());break;case Ve.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let w=new re;a=Ve.textCompaction(r,a+1,w),c.setSender(w.toString());break;case Ve.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let T=new re;a=Ve.textCompaction(r,a+1,T),c.setAddressee(T.toString());break;case Ve.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let V=new re;a=Ve.numericCompaction(r,a+1,V),c.setSegmentCount(D.parseInt(V.toString()));break;case Ve.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let X=new re;a=Ve.numericCompaction(r,a+1,X),c.setTimestamp(xl.parseLong(X.toString()));break;case Ve.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let se=new re;a=Ve.numericCompaction(r,a+1,se),c.setChecksum(D.parseInt(se.toString()));break;case Ve.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let be=new re;a=Ve.numericCompaction(r,a+1,be),c.setFileSize(xl.parseLong(be.toString()));break;default:throw F.getFormatInstance()}break;case Ve.MACRO_PDF417_TERMINATOR:a++,c.setLastSegment(!0);break;default:throw F.getFormatInstance()}if(h!==-1){let b=a-h;c.isLastSegment()&&b--,c.setOptionalData(_.copyOfRange(r,h,h+b))}return a}static textCompaction(r,a,c){let u=new Int32Array((r[0]-a)*2),d=new Int32Array((r[0]-a)*2),h=0,b=!1;for(;a<r[0]&&!b;){let w=r[a++];if(w<Ve.TEXT_COMPACTION_MODE_LATCH)u[h]=w/30,u[h+1]=w%30,h+=2;else switch(w){case Ve.TEXT_COMPACTION_MODE_LATCH:u[h++]=Ve.TEXT_COMPACTION_MODE_LATCH;break;case Ve.BYTE_COMPACTION_MODE_LATCH:case Ve.BYTE_COMPACTION_MODE_LATCH_6:case Ve.NUMERIC_COMPACTION_MODE_LATCH:case Ve.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Ve.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Ve.MACRO_PDF417_TERMINATOR:a--,b=!0;break;case Ve.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u[h]=Ve.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,w=r[a++],d[h]=w,h++;break}}return Ve.decodeTextCompaction(u,d,h,c),a}static decodeTextCompaction(r,a,c,u){let d=hn.ALPHA,h=hn.ALPHA,b=0;for(;b<c;){let w=r[b],T="";switch(d){case hn.ALPHA:if(w<26)T=String.fromCharCode(65+w);else switch(w){case 26:T=" ";break;case Ve.LL:d=hn.LOWER;break;case Ve.ML:d=hn.MIXED;break;case Ve.PS:h=d,d=hn.PUNCT_SHIFT;break;case Ve.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[b]);break;case Ve.TEXT_COMPACTION_MODE_LATCH:d=hn.ALPHA;break}break;case hn.LOWER:if(w<26)T=String.fromCharCode(97+w);else switch(w){case 26:T=" ";break;case Ve.AS:h=d,d=hn.ALPHA_SHIFT;break;case Ve.ML:d=hn.MIXED;break;case Ve.PS:h=d,d=hn.PUNCT_SHIFT;break;case Ve.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[b]);break;case Ve.TEXT_COMPACTION_MODE_LATCH:d=hn.ALPHA;break}break;case hn.MIXED:if(w<Ve.PL)T=Ve.MIXED_CHARS[w];else switch(w){case Ve.PL:d=hn.PUNCT;break;case 26:T=" ";break;case Ve.LL:d=hn.LOWER;break;case Ve.AL:d=hn.ALPHA;break;case Ve.PS:h=d,d=hn.PUNCT_SHIFT;break;case Ve.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[b]);break;case Ve.TEXT_COMPACTION_MODE_LATCH:d=hn.ALPHA;break}break;case hn.PUNCT:if(w<Ve.PAL)T=Ve.PUNCT_CHARS[w];else switch(w){case Ve.PAL:d=hn.ALPHA;break;case Ve.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[b]);break;case Ve.TEXT_COMPACTION_MODE_LATCH:d=hn.ALPHA;break}break;case hn.ALPHA_SHIFT:if(d=h,w<26)T=String.fromCharCode(65+w);else switch(w){case 26:T=" ";break;case Ve.TEXT_COMPACTION_MODE_LATCH:d=hn.ALPHA;break}break;case hn.PUNCT_SHIFT:if(d=h,w<Ve.PAL)T=Ve.PUNCT_CHARS[w];else switch(w){case Ve.PAL:d=hn.ALPHA;break;case Ve.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[b]);break;case Ve.TEXT_COMPACTION_MODE_LATCH:d=hn.ALPHA;break}break}T!==""&&u.append(T),b++}}static byteCompaction(r,a,c,u,d){let h=new ou,b=0,w=0,T=!1;switch(r){case Ve.BYTE_COMPACTION_MODE_LATCH:let V=new Int32Array(6),X=a[u++];for(;u<a[0]&&!T;)switch(V[b++]=X,w=900*w+X,X=a[u++],X){case Ve.TEXT_COMPACTION_MODE_LATCH:case Ve.BYTE_COMPACTION_MODE_LATCH:case Ve.NUMERIC_COMPACTION_MODE_LATCH:case Ve.BYTE_COMPACTION_MODE_LATCH_6:case Ve.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Ve.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Ve.MACRO_PDF417_TERMINATOR:u--,T=!0;break;default:if(b%5===0&&b>0){for(let se=0;se<6;++se)h.write(Number(ji(w)>>ji(8*(5-se))));w=0,b=0}break}u===a[0]&&X<Ve.TEXT_COMPACTION_MODE_LATCH&&(V[b++]=X);for(let se=0;se<b;se++)h.write(V[se]);break;case Ve.BYTE_COMPACTION_MODE_LATCH_6:for(;u<a[0]&&!T;){let se=a[u++];if(se<Ve.TEXT_COMPACTION_MODE_LATCH)b++,w=900*w+se;else switch(se){case Ve.TEXT_COMPACTION_MODE_LATCH:case Ve.BYTE_COMPACTION_MODE_LATCH:case Ve.NUMERIC_COMPACTION_MODE_LATCH:case Ve.BYTE_COMPACTION_MODE_LATCH_6:case Ve.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Ve.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Ve.MACRO_PDF417_TERMINATOR:u--,T=!0;break}if(b%5===0&&b>0){for(let be=0;be<6;++be)h.write(Number(ji(w)>>ji(8*(5-be))));w=0,b=0}}break}return d.append(k.decode(h.toByteArray(),c)),u}static numericCompaction(r,a,c){let u=0,d=!1,h=new Int32Array(Ve.MAX_NUMERIC_CODEWORDS);for(;a<r[0]&&!d;){let b=r[a++];if(a===r[0]&&(d=!0),b<Ve.TEXT_COMPACTION_MODE_LATCH)h[u]=b,u++;else switch(b){case Ve.TEXT_COMPACTION_MODE_LATCH:case Ve.BYTE_COMPACTION_MODE_LATCH:case Ve.BYTE_COMPACTION_MODE_LATCH_6:case Ve.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Ve.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Ve.MACRO_PDF417_TERMINATOR:a--,d=!0;break}(u%Ve.MAX_NUMERIC_CODEWORDS===0||b===Ve.NUMERIC_COMPACTION_MODE_LATCH||d)&&u>0&&(c.append(Ve.decodeBase900toBase10(h,u)),u=0)}return a}static decodeBase900toBase10(r,a){let c=ji(0);for(let d=0;d<a;d++)c+=Ve.EXP900[a-d-1]*ji(r[d]);let u=c.toString();if(u.charAt(0)!=="1")throw new F;return u.substring(1)}}Ve.TEXT_COMPACTION_MODE_LATCH=900,Ve.BYTE_COMPACTION_MODE_LATCH=901,Ve.NUMERIC_COMPACTION_MODE_LATCH=902,Ve.BYTE_COMPACTION_MODE_LATCH_6=924,Ve.ECI_USER_DEFINED=925,Ve.ECI_GENERAL_PURPOSE=926,Ve.ECI_CHARSET=927,Ve.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,Ve.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,Ve.MACRO_PDF417_TERMINATOR=922,Ve.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,Ve.MAX_NUMERIC_CODEWORDS=15,Ve.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,Ve.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,Ve.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,Ve.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,Ve.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,Ve.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,Ve.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,Ve.PL=25,Ve.LL=27,Ve.AS=27,Ve.ML=28,Ve.AL=28,Ve.PS=29,Ve.PAL=29,Ve.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,Ve.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",Ve.EXP900=Ji()?lu():[],Ve.NUMBER_OF_SEQUENCE_CODEWORDS=2;class rn{constructor(){}static decode(r,a,c,u,d,h,b){let w=new Qa(r,a,c,u,d),T=null,V=null,X;for(let Se=!0;;Se=!1){if(a!=null&&(T=rn.getRowIndicatorColumn(r,w,a,!0,h,b)),u!=null&&(V=rn.getRowIndicatorColumn(r,w,u,!1,h,b)),X=rn.merge(T,V),X==null)throw ne.getNotFoundInstance();let Ee=X.getBoundingBox();if(Se&&Ee!=null&&(Ee.getMinY()<w.getMinY()||Ee.getMaxY()>w.getMaxY()))w=Ee;else break}X.setBoundingBox(w);let se=X.getBarcodeColumnCount()+1;X.setDetectionResultColumn(0,T),X.setDetectionResultColumn(se,V);let be=T!=null;for(let Se=1;Se<=se;Se++){let Ee=be?Se:se-Se;if(X.getDetectionResultColumn(Ee)!==void 0)continue;let Le;Ee===0||Ee===se?Le=new us(w,Ee===0):Le=new Ki(w),X.setDetectionResultColumn(Ee,Le);let Ge=-1,at=Ge;for(let dt=w.getMinY();dt<=w.getMaxY();dt++){if(Ge=rn.getStartColumn(X,Ee,dt,be),Ge<0||Ge>w.getMaxX()){if(at===-1)continue;Ge=at}let ot=rn.detectCodeword(r,w.getMinX(),w.getMaxX(),be,Ge,dt,h,b);ot!=null&&(Le.setCodeword(dt,ot),at=Ge,h=Math.min(h,ot.getWidth()),b=Math.max(b,ot.getWidth()))}}return rn.createDecoderResult(X)}static merge(r,a){if(r==null&&a==null)return null;let c=rn.getBarcodeMetadata(r,a);if(c==null)return null;let u=Qa.merge(rn.adjustBoundingBox(r),rn.adjustBoundingBox(a));return new Ka(c,u)}static adjustBoundingBox(r){if(r==null)return null;let a=r.getRowHeights();if(a==null)return null;let c=rn.getMax(a),u=0;for(let b of a)if(u+=c-b,b>0)break;let d=r.getCodewords();for(let b=0;u>0&&d[b]==null;b++)u--;let h=0;for(let b=a.length-1;b>=0&&(h+=c-a[b],!(a[b]>0));b--);for(let b=d.length-1;h>0&&d[b]==null;b--)h--;return r.getBoundingBox().addMissingRows(u,h,r.isLeft())}static getMax(r){let a=-1;for(let c of r)a=Math.max(a,c);return a}static getBarcodeMetadata(r,a){let c;if(r==null||(c=r.getBarcodeMetadata())==null)return a==null?null:a.getBarcodeMetadata();let u;return a==null||(u=a.getBarcodeMetadata())==null?c:c.getColumnCount()!==u.getColumnCount()&&c.getErrorCorrectionLevel()!==u.getErrorCorrectionLevel()&&c.getRowCount()!==u.getRowCount()?null:c}static getRowIndicatorColumn(r,a,c,u,d,h){let b=new us(a,u);for(let w=0;w<2;w++){let T=w===0?1:-1,V=Math.trunc(Math.trunc(c.getX()));for(let X=Math.trunc(Math.trunc(c.getY()));X<=a.getMaxY()&&X>=a.getMinY();X+=T){let se=rn.detectCodeword(r,0,r.getWidth(),u,V,X,d,h);se!=null&&(b.setCodeword(X,se),u?V=se.getStartX():V=se.getEndX())}}return b}static adjustCodewordCount(r,a){let c=a[0][1],u=c.getValue(),d=r.getBarcodeColumnCount()*r.getBarcodeRowCount()-rn.getNumberOfECCodeWords(r.getBarcodeECLevel());if(u.length===0){if(d<1||d>Lt.MAX_CODEWORDS_IN_BARCODE)throw ne.getNotFoundInstance();c.setValue(d)}else u[0]!==d&&c.setValue(d)}static createDecoderResult(r){let a=rn.createBarcodeMatrix(r);rn.adjustCodewordCount(r,a);let c=new Array,u=new Int32Array(r.getBarcodeRowCount()*r.getBarcodeColumnCount()),d=[],h=new Array;for(let w=0;w<r.getBarcodeRowCount();w++)for(let T=0;T<r.getBarcodeColumnCount();T++){let V=a[w][T+1].getValue(),X=w*r.getBarcodeColumnCount()+T;V.length===0?c.push(X):V.length===1?u[X]=V[0]:(h.push(X),d.push(V))}let b=new Array(d.length);for(let w=0;w<b.length;w++)b[w]=d[w];return rn.createDecoderResultFromAmbiguousValues(r.getBarcodeECLevel(),u,Lt.toIntArray(c),Lt.toIntArray(h),b)}static createDecoderResultFromAmbiguousValues(r,a,c,u,d){let h=new Int32Array(u.length),b=100;for(;b-- >0;){for(let w=0;w<h.length;w++)a[u[w]]=d[w][h[w]];try{return rn.decodeCodewords(a,r,c)}catch(w){if(!(w instanceof v))throw w}if(h.length===0)throw v.getChecksumInstance();for(let w=0;w<h.length;w++)if(h[w]<d[w].length-1){h[w]++;break}else if(h[w]=0,w===h.length-1)throw v.getChecksumInstance()}throw v.getChecksumInstance()}static createBarcodeMatrix(r){let a=Array.from({length:r.getBarcodeRowCount()},()=>new Array(r.getBarcodeColumnCount()+2));for(let u=0;u<a.length;u++)for(let d=0;d<a[u].length;d++)a[u][d]=new Os;let c=0;for(let u of r.getDetectionResultColumns()){if(u!=null){for(let d of u.getCodewords())if(d!=null){let h=d.getRowNumber();if(h>=0){if(h>=a.length)continue;a[h][c].setValue(d.getValue())}}}c++}return a}static isValidBarcodeColumn(r,a){return a>=0&&a<=r.getBarcodeColumnCount()+1}static getStartColumn(r,a,c,u){let d=u?1:-1,h=null;if(rn.isValidBarcodeColumn(r,a-d)&&(h=r.getDetectionResultColumn(a-d).getCodeword(c)),h!=null)return u?h.getEndX():h.getStartX();if(h=r.getDetectionResultColumn(a).getCodewordNearby(c),h!=null)return u?h.getStartX():h.getEndX();if(rn.isValidBarcodeColumn(r,a-d)&&(h=r.getDetectionResultColumn(a-d).getCodewordNearby(c)),h!=null)return u?h.getEndX():h.getStartX();let b=0;for(;rn.isValidBarcodeColumn(r,a-d);){a-=d;for(let w of r.getDetectionResultColumn(a).getCodewords())if(w!=null)return(u?w.getEndX():w.getStartX())+d*b*(w.getEndX()-w.getStartX());b++}return u?r.getBoundingBox().getMinX():r.getBoundingBox().getMaxX()}static detectCodeword(r,a,c,u,d,h,b,w){d=rn.adjustCodewordStartColumn(r,a,c,u,d,h);let T=rn.getModuleBitCount(r,a,c,u,d,h);if(T==null)return null;let V,X=we.sum(T);if(u)V=d+X;else{for(let Se=0;Se<T.length/2;Se++){let Ee=T[Se];T[Se]=T[T.length-1-Se],T[T.length-1-Se]=Ee}V=d,d=V-X}if(!rn.checkCodewordSkew(X,b,w))return null;let se=ti.getDecodedValue(T),be=Lt.getCodeword(se);return be===-1?null:new Ma(d,V,rn.getCodewordBucketNumber(se),be)}static getModuleBitCount(r,a,c,u,d,h){let b=d,w=new Int32Array(8),T=0,V=u?1:-1,X=u;for(;(u?b<c:b>=a)&&T<w.length;)r.get(b,h)===X?(w[T]++,b+=V):(T++,X=!X);return T===w.length||b===(u?c:a)&&T===w.length-1?w:null}static getNumberOfECCodeWords(r){return 2<<r}static adjustCodewordStartColumn(r,a,c,u,d,h){let b=d,w=u?-1:1;for(let T=0;T<2;T++){for(;(u?b>=a:b<c)&&u===r.get(b,h);){if(Math.abs(d-b)>rn.CODEWORD_SKEW_SIZE)return d;b+=w}w=-w,u=!u}return b}static checkCodewordSkew(r,a,c){return a-rn.CODEWORD_SKEW_SIZE<=r&&r<=c+rn.CODEWORD_SKEW_SIZE}static decodeCodewords(r,a,c){if(r.length===0)throw F.getFormatInstance();let u=1<<a+1,d=rn.correctErrors(r,c,u);rn.verifyCodewordCount(r,u);let h=Ve.decode(r,""+a);return h.setErrorsCorrected(d),h.setErasures(c.length),h}static correctErrors(r,a,c){if(a!=null&&a.length>c/2+rn.MAX_ERRORS||c<0||c>rn.MAX_EC_CODEWORDS)throw v.getChecksumInstance();return rn.errorCorrection.decode(r,c,a)}static verifyCodewordCount(r,a){if(r.length<4)throw F.getFormatInstance();let c=r[0];if(c>r.length)throw F.getFormatInstance();if(c===0)if(a<r.length)r[0]=r.length-a;else throw F.getFormatInstance()}static getBitCountForCodeword(r){let a=new Int32Array(8),c=0,u=a.length-1;for(;!((r&1)!==c&&(c=r&1,u--,u<0));)a[u]++,r>>=1;return a}static getCodewordBucketNumber(r){return r instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(r):this.getCodewordBucketNumber_number(r)}static getCodewordBucketNumber_number(r){return rn.getCodewordBucketNumber(rn.getBitCountForCodeword(r))}static getCodewordBucketNumber_Int32Array(r){return(r[0]-r[2]+r[4]-r[6]+9)%9}static toString(r){let a=new ma;for(let c=0;c<r.length;c++){a.format("Row %2d: ",c);for(let u=0;u<r[c].length;u++){let d=r[c][u];d.getValue().length===0?a.format("        ",null):a.format("%4d(%2d)",d.getValue()[0],d.getConfidence(d.getValue()[0]))}a.format("%n")}return a.toString()}}rn.CODEWORD_SKEW_SIZE=2,rn.MAX_ERRORS=3,rn.MAX_EC_CODEWORDS=512,rn.errorCorrection=new tc;class Ar{decode(r,a=null){let c=Ar.decode(r,a,!1);if(c==null||c.length===0||c[0]==null)throw ne.getNotFoundInstance();return c[0]}decodeMultiple(r,a=null){try{return Ar.decode(r,a,!0)}catch(c){throw c instanceof F||c instanceof v?ne.getNotFoundInstance():c}}static decode(r,a,c){const u=new Array,d=$t.detectMultiple(r,a,c);for(const h of d.getPoints()){const b=rn.decode(d.getBits(),h[4],h[5],h[6],h[7],Ar.getMinCodewordWidth(h),Ar.getMaxCodewordWidth(h)),w=new Q(b.getText(),b.getRawBytes(),void 0,h,ue.PDF_417);w.putMetadata(Ae.ERROR_CORRECTION_LEVEL,b.getECLevel());const T=b.getOther();T!=null&&w.putMetadata(Ae.PDF417_EXTRA_METADATA,T),u.push(w)}return u.map(h=>h)}static getMaxWidth(r,a){return r==null||a==null?0:Math.trunc(Math.abs(r.getX()-a.getX()))}static getMinWidth(r,a){return r==null||a==null?D.MAX_VALUE:Math.trunc(Math.abs(r.getX()-a.getX()))}static getMaxCodewordWidth(r){return Math.floor(Math.max(Math.max(Ar.getMaxWidth(r[0],r[4]),Ar.getMaxWidth(r[6],r[2])*Lt.MODULES_IN_CODEWORD/Lt.MODULES_IN_STOP_PATTERN),Math.max(Ar.getMaxWidth(r[1],r[5]),Ar.getMaxWidth(r[7],r[3])*Lt.MODULES_IN_CODEWORD/Lt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(r){return Math.floor(Math.min(Math.min(Ar.getMinWidth(r[0],r[4]),Ar.getMinWidth(r[6],r[2])*Lt.MODULES_IN_CODEWORD/Lt.MODULES_IN_STOP_PATTERN),Math.min(Ar.getMinWidth(r[1],r[5]),Ar.getMinWidth(r[7],r[3])*Lt.MODULES_IN_CODEWORD/Lt.MODULES_IN_STOP_PATTERN)))}reset(){}}class fs extends x{}fs.kind="ReaderException";class yl{constructor(r,a){this.verbose=r===!0,a&&this.setHints(a)}decode(r,a){return a&&this.setHints(a),this.decodeInternal(r)}decodeWithState(r){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(r)}setHints(r){this.hints=r;const a=!i(r)&&r.get(ae.TRY_HARDER)===!0,c=i(r)?null:r.get(ae.POSSIBLE_FORMATS),u=new Array;if(!i(c)){const d=c.some(h=>h===ue.UPC_A||h===ue.UPC_E||h===ue.EAN_13||h===ue.EAN_8||h===ue.CODABAR||h===ue.CODE_39||h===ue.CODE_93||h===ue.CODE_128||h===ue.ITF||h===ue.RSS_14||h===ue.RSS_EXPANDED);d&&!a&&u.push(new Qi(r,this.verbose)),c.includes(ue.QR_CODE)&&u.push(new Oa),c.includes(ue.DATA_MATRIX)&&u.push(new Gr),c.includes(ue.AZTEC)&&u.push(new mt),c.includes(ue.PDF_417)&&u.push(new Ar),d&&a&&u.push(new Qi(r,this.verbose))}u.length===0&&(a||u.push(new Qi(r,this.verbose)),u.push(new Oa),u.push(new Gr),u.push(new mt),u.push(new Ar),a&&u.push(new Qi(r,this.verbose))),this.readers=u}reset(){if(this.readers!==null)for(const r of this.readers)r.reset()}decodeInternal(r){if(this.readers===null)throw new fs("No readers where selected, nothing can be read.");for(const a of this.readers)try{return a.decode(r,this.hints)}catch(c){if(c instanceof fs)continue}throw new ne("No MultiFormat Readers were able to detect the code.")}}class fo extends q{constructor(r=null,a=500){const c=new yl;c.setHints(r),super(c,a)}decodeBitmap(r){return this.reader.decodeWithState(r)}}class vl extends q{constructor(r=500){super(new Ar,r)}}class wl extends q{constructor(r=500){super(new Oa,r)}}var ho;(function(Z){Z[Z.ERROR_CORRECTION=0]="ERROR_CORRECTION",Z[Z.CHARACTER_SET=1]="CHARACTER_SET",Z[Z.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",Z[Z.MIN_SIZE=3]="MIN_SIZE",Z[Z.MAX_SIZE=4]="MAX_SIZE",Z[Z.MARGIN=5]="MARGIN",Z[Z.PDF417_COMPACT=6]="PDF417_COMPACT",Z[Z.PDF417_COMPACTION=7]="PDF417_COMPACTION",Z[Z.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",Z[Z.AZTEC_LAYERS=9]="AZTEC_LAYERS",Z[Z.QR_VERSION=10]="QR_VERSION"})(ho||(ho={}));var Sr=ho;class hs{constructor(r){this.field=r,this.cachedGenerators=[],this.cachedGenerators.push(new Te(r,Int32Array.from([1])))}buildGenerator(r){const a=this.cachedGenerators;if(r>=a.length){let c=a[a.length-1];const u=this.field;for(let d=a.length;d<=r;d++){const h=c.multiply(new Te(u,Int32Array.from([1,u.exp(d-1+u.getGeneratorBase())])));a.push(h),c=h}}return a[r]}encode(r,a){if(a===0)throw new N("No error correction bytes");const c=r.length-a;if(c<=0)throw new N("No data bytes provided");const u=this.buildGenerator(a),d=new Int32Array(c);E.arraycopy(r,0,d,0,c);let h=new Te(this.field,d);h=h.multiplyByMonomial(a,1);const w=h.divide(u)[1].getCoefficients(),T=a-w.length;for(let V=0;V<T;V++)r[c+V]=0;E.arraycopy(w,0,r,c+T,w.length)}}class On{constructor(){}static applyMaskPenaltyRule1(r){return On.applyMaskPenaltyRule1Internal(r,!0)+On.applyMaskPenaltyRule1Internal(r,!1)}static applyMaskPenaltyRule2(r){let a=0;const c=r.getArray(),u=r.getWidth(),d=r.getHeight();for(let h=0;h<d-1;h++){const b=c[h];for(let w=0;w<u-1;w++){const T=b[w];T===b[w+1]&&T===c[h+1][w]&&T===c[h+1][w+1]&&a++}}return On.N2*a}static applyMaskPenaltyRule3(r){let a=0;const c=r.getArray(),u=r.getWidth(),d=r.getHeight();for(let h=0;h<d;h++)for(let b=0;b<u;b++){const w=c[h];b+6<u&&w[b]===1&&w[b+1]===0&&w[b+2]===1&&w[b+3]===1&&w[b+4]===1&&w[b+5]===0&&w[b+6]===1&&(On.isWhiteHorizontal(w,b-4,b)||On.isWhiteHorizontal(w,b+7,b+11))&&a++,h+6<d&&c[h][b]===1&&c[h+1][b]===0&&c[h+2][b]===1&&c[h+3][b]===1&&c[h+4][b]===1&&c[h+5][b]===0&&c[h+6][b]===1&&(On.isWhiteVertical(c,b,h-4,h)||On.isWhiteVertical(c,b,h+7,h+11))&&a++}return a*On.N3}static isWhiteHorizontal(r,a,c){a=Math.max(a,0),c=Math.min(c,r.length);for(let u=a;u<c;u++)if(r[u]===1)return!1;return!0}static isWhiteVertical(r,a,c,u){c=Math.max(c,0),u=Math.min(u,r.length);for(let d=c;d<u;d++)if(r[d][a]===1)return!1;return!0}static applyMaskPenaltyRule4(r){let a=0;const c=r.getArray(),u=r.getWidth(),d=r.getHeight();for(let w=0;w<d;w++){const T=c[w];for(let V=0;V<u;V++)T[V]===1&&a++}const h=r.getHeight()*r.getWidth();return Math.floor(Math.abs(a*2-h)*10/h)*On.N4}static getDataMaskBit(r,a,c){let u,d;switch(r){case 0:u=c+a&1;break;case 1:u=c&1;break;case 2:u=a%3;break;case 3:u=(c+a)%3;break;case 4:u=Math.floor(c/2)+Math.floor(a/3)&1;break;case 5:d=c*a,u=(d&1)+d%3;break;case 6:d=c*a,u=(d&1)+d%3&1;break;case 7:d=c*a,u=d%3+(c+a&1)&1;break;default:throw new N("Invalid mask pattern: "+r)}return u===0}static applyMaskPenaltyRule1Internal(r,a){let c=0;const u=a?r.getHeight():r.getWidth(),d=a?r.getWidth():r.getHeight(),h=r.getArray();for(let b=0;b<u;b++){let w=0,T=-1;for(let V=0;V<d;V++){const X=a?h[b][V]:h[V][b];X===T?w++:(w>=5&&(c+=On.N1+(w-5)),w=1,T=X)}w>=5&&(c+=On.N1+(w-5))}return c}}On.N1=3,On.N2=3,On.N3=40,On.N4=10;class ms{constructor(r,a){this.width=r,this.height=a;const c=new Array(a);for(let u=0;u!==a;u++)c[u]=new Uint8Array(r);this.bytes=c}getHeight(){return this.height}getWidth(){return this.width}get(r,a){return this.bytes[a][r]}getArray(){return this.bytes}setNumber(r,a,c){this.bytes[a][r]=c}setBoolean(r,a,c){this.bytes[a][r]=c?1:0}clear(r){for(const a of this.bytes)_.fill(a,r)}equals(r){if(!(r instanceof ms))return!1;const a=r;if(this.width!==a.width||this.height!==a.height)return!1;for(let c=0,u=this.height;c<u;++c){const d=this.bytes[c],h=a.bytes[c];for(let b=0,w=this.width;b<w;++b)if(d[b]!==h[b])return!1}return!0}toString(){const r=new re;for(let a=0,c=this.height;a<c;++a){const u=this.bytes[a];for(let d=0,h=this.width;d<h;++d)switch(u[d]){case 0:r.append(" 0");break;case 1:r.append(" 1");break;default:r.append("  ");break}r.append(`
`)}return r.toString()}}class _i{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const r=new re;return r.append(`<<
`),r.append(" mode: "),r.append(this.mode?this.mode.toString():"null"),r.append(`
 ecLevel: `),r.append(this.ecLevel?this.ecLevel.toString():"null"),r.append(`
 version: `),r.append(this.version?this.version.toString():"null"),r.append(`
 maskPattern: `),r.append(this.maskPattern.toString()),this.matrix?(r.append(`
 matrix:
`),r.append(this.matrix.toString())):r.append(`
 matrix: null
`),r.append(`>>
`),r.toString()}setMode(r){this.mode=r}setECLevel(r){this.ecLevel=r}setVersion(r){this.version=r}setMaskPattern(r){this.maskPattern=r}setMatrix(r){this.matrix=r}static isValidMaskPattern(r){return r>=0&&r<_i.NUM_MASK_PATTERNS}}_i.NUM_MASK_PATTERNS=8;class En extends x{}En.kind="WriterException";class A{constructor(){}static clearMatrix(r){r.clear(255)}static buildMatrix(r,a,c,u,d){A.clearMatrix(d),A.embedBasicPatterns(c,d),A.embedTypeInfo(a,u,d),A.maybeEmbedVersionInfo(c,d),A.embedDataBits(r,u,d)}static embedBasicPatterns(r,a){A.embedPositionDetectionPatternsAndSeparators(a),A.embedDarkDotAtLeftBottomCorner(a),A.maybeEmbedPositionAdjustmentPatterns(r,a),A.embedTimingPatterns(a)}static embedTypeInfo(r,a,c){const u=new U;A.makeTypeInfoBits(r,a,u);for(let d=0,h=u.getSize();d<h;++d){const b=u.get(u.getSize()-1-d),w=A.TYPE_INFO_COORDINATES[d],T=w[0],V=w[1];if(c.setBoolean(T,V,b),d<8){const X=c.getWidth()-d-1;c.setBoolean(X,8,b)}else{const se=c.getHeight()-7+(d-8);c.setBoolean(8,se,b)}}}static maybeEmbedVersionInfo(r,a){if(r.getVersionNumber()<7)return;const c=new U;A.makeVersionInfoBits(r,c);let u=6*3-1;for(let d=0;d<6;++d)for(let h=0;h<3;++h){const b=c.get(u);u--,a.setBoolean(d,a.getHeight()-11+h,b),a.setBoolean(a.getHeight()-11+h,d,b)}}static embedDataBits(r,a,c){let u=0,d=-1,h=c.getWidth()-1,b=c.getHeight()-1;for(;h>0;){for(h===6&&(h-=1);b>=0&&b<c.getHeight();){for(let w=0;w<2;++w){const T=h-w;if(!A.isEmpty(c.get(T,b)))continue;let V;u<r.getSize()?(V=r.get(u),++u):V=!1,a!==255&&On.getDataMaskBit(a,T,b)&&(V=!V),c.setBoolean(T,b,V)}b+=d}d=-d,b+=d,h-=2}if(u!==r.getSize())throw new En("Not all bits consumed: "+u+"/"+r.getSize())}static findMSBSet(r){return 32-D.numberOfLeadingZeros(r)}static calculateBCHCode(r,a){if(a===0)throw new N("0 polynomial");const c=A.findMSBSet(a);for(r<<=c-1;A.findMSBSet(r)>=c;)r^=a<<A.findMSBSet(r)-c;return r}static makeTypeInfoBits(r,a,c){if(!_i.isValidMaskPattern(a))throw new En("Invalid mask pattern");const u=r.getBits()<<3|a;c.appendBits(u,5);const d=A.calculateBCHCode(u,A.TYPE_INFO_POLY);c.appendBits(d,10);const h=new U;if(h.appendBits(A.TYPE_INFO_MASK_PATTERN,15),c.xor(h),c.getSize()!==15)throw new En("should not happen but we got: "+c.getSize())}static makeVersionInfoBits(r,a){a.appendBits(r.getVersionNumber(),6);const c=A.calculateBCHCode(r.getVersionNumber(),A.VERSION_INFO_POLY);if(a.appendBits(c,12),a.getSize()!==18)throw new En("should not happen but we got: "+a.getSize())}static isEmpty(r){return r===255}static embedTimingPatterns(r){for(let a=8;a<r.getWidth()-8;++a){const c=(a+1)%2;A.isEmpty(r.get(a,6))&&r.setNumber(a,6,c),A.isEmpty(r.get(6,a))&&r.setNumber(6,a,c)}}static embedDarkDotAtLeftBottomCorner(r){if(r.get(8,r.getHeight()-8)===0)throw new En;r.setNumber(8,r.getHeight()-8,1)}static embedHorizontalSeparationPattern(r,a,c){for(let u=0;u<8;++u){if(!A.isEmpty(c.get(r+u,a)))throw new En;c.setNumber(r+u,a,0)}}static embedVerticalSeparationPattern(r,a,c){for(let u=0;u<7;++u){if(!A.isEmpty(c.get(r,a+u)))throw new En;c.setNumber(r,a+u,0)}}static embedPositionAdjustmentPattern(r,a,c){for(let u=0;u<5;++u){const d=A.POSITION_ADJUSTMENT_PATTERN[u];for(let h=0;h<5;++h)c.setNumber(r+h,a+u,d[h])}}static embedPositionDetectionPattern(r,a,c){for(let u=0;u<7;++u){const d=A.POSITION_DETECTION_PATTERN[u];for(let h=0;h<7;++h)c.setNumber(r+h,a+u,d[h])}}static embedPositionDetectionPatternsAndSeparators(r){const a=A.POSITION_DETECTION_PATTERN[0].length;A.embedPositionDetectionPattern(0,0,r),A.embedPositionDetectionPattern(r.getWidth()-a,0,r),A.embedPositionDetectionPattern(0,r.getWidth()-a,r);const c=8;A.embedHorizontalSeparationPattern(0,c-1,r),A.embedHorizontalSeparationPattern(r.getWidth()-c,c-1,r),A.embedHorizontalSeparationPattern(0,r.getWidth()-c,r);const u=7;A.embedVerticalSeparationPattern(u,0,r),A.embedVerticalSeparationPattern(r.getHeight()-u-1,0,r),A.embedVerticalSeparationPattern(u,r.getHeight()-u,r)}static maybeEmbedPositionAdjustmentPatterns(r,a){if(r.getVersionNumber()<2)return;const c=r.getVersionNumber()-1,u=A.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[c];for(let d=0,h=u.length;d!==h;d++){const b=u[d];if(b>=0)for(let w=0;w!==h;w++){const T=u[w];T>=0&&A.isEmpty(a.get(T,b))&&A.embedPositionAdjustmentPattern(T-2,b-2,a)}}}}A.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),A.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),A.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),A.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),A.VERSION_INFO_POLY=7973,A.TYPE_INFO_POLY=1335,A.TYPE_INFO_MASK_PATTERN=21522;class ${constructor(r,a){this.dataBytes=r,this.errorCorrectionBytes=a}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class xe{constructor(){}static calculateMaskPenalty(r){return On.applyMaskPenaltyRule1(r)+On.applyMaskPenaltyRule2(r)+On.applyMaskPenaltyRule3(r)+On.applyMaskPenaltyRule4(r)}static encode(r,a,c=null){let u=xe.DEFAULT_BYTE_MODE_ENCODING;const d=c!==null&&c.get(Sr.CHARACTER_SET)!==void 0;d&&(u=c.get(Sr.CHARACTER_SET).toString());const h=this.chooseMode(r,u),b=new U;if(h===Rt.BYTE&&(d||xe.DEFAULT_BYTE_MODE_ENCODING!==u)){const dt=M.getCharacterSetECIByName(u);dt!==void 0&&this.appendECI(dt,b)}this.appendModeInfo(h,b);const w=new U;this.appendBytes(r,h,w,u);let T;if(c!==null&&c.get(Sr.QR_VERSION)!==void 0){const dt=Number.parseInt(c.get(Sr.QR_VERSION).toString(),10);T=Dt.getVersionForNumber(dt);const ot=this.calculateBitsNeeded(h,b,w,T);if(!this.willFit(ot,T,a))throw new En("Data too big for requested version")}else T=this.recommendVersion(a,h,b,w);const V=new U;V.appendBitArray(b);const X=h===Rt.BYTE?w.getSizeInBytes():r.length;this.appendLengthInfo(X,T,h,V),V.appendBitArray(w);const se=T.getECBlocksForLevel(a),be=T.getTotalCodewords()-se.getTotalECCodewords();this.terminateBits(be,V);const Se=this.interleaveWithECBytes(V,T.getTotalCodewords(),be,se.getNumBlocks()),Ee=new _i;Ee.setECLevel(a),Ee.setMode(h),Ee.setVersion(T);const Le=T.getDimensionForVersion(),Ge=new ms(Le,Le),at=this.chooseMaskPattern(Se,a,T,Ge);return Ee.setMaskPattern(at),A.buildMatrix(Se,a,T,at,Ge),Ee.setMatrix(Ge),Ee}static recommendVersion(r,a,c,u){const d=this.calculateBitsNeeded(a,c,u,Dt.getVersionForNumber(1)),h=this.chooseVersion(d,r),b=this.calculateBitsNeeded(a,c,u,h);return this.chooseVersion(b,r)}static calculateBitsNeeded(r,a,c,u){return a.getSize()+r.getCharacterCountBits(u)+c.getSize()}static getAlphanumericCode(r){return r<xe.ALPHANUMERIC_TABLE.length?xe.ALPHANUMERIC_TABLE[r]:-1}static chooseMode(r,a=null){if(M.SJIS.getName()===a&&this.isOnlyDoubleByteKanji(r))return Rt.KANJI;let c=!1,u=!1;for(let d=0,h=r.length;d<h;++d){const b=r.charAt(d);if(xe.isDigit(b))c=!0;else if(this.getAlphanumericCode(b.charCodeAt(0))!==-1)u=!0;else return Rt.BYTE}return u?Rt.ALPHANUMERIC:c?Rt.NUMERIC:Rt.BYTE}static isOnlyDoubleByteKanji(r){let a;try{a=k.encode(r,M.SJIS)}catch{return!1}const c=a.length;if(c%2!==0)return!1;for(let u=0;u<c;u+=2){const d=a[u]&255;if((d<129||d>159)&&(d<224||d>235))return!1}return!0}static chooseMaskPattern(r,a,c,u){let d=Number.MAX_SAFE_INTEGER,h=-1;for(let b=0;b<_i.NUM_MASK_PATTERNS;b++){A.buildMatrix(r,a,c,b,u);let w=this.calculateMaskPenalty(u);w<d&&(d=w,h=b)}return h}static chooseVersion(r,a){for(let c=1;c<=40;c++){const u=Dt.getVersionForNumber(c);if(xe.willFit(r,u,a))return u}throw new En("Data too big")}static willFit(r,a,c){const u=a.getTotalCodewords(),h=a.getECBlocksForLevel(c).getTotalECCodewords(),b=u-h,w=(r+7)/8;return b>=w}static terminateBits(r,a){const c=r*8;if(a.getSize()>c)throw new En("data bits cannot fit in the QR Code"+a.getSize()+" > "+c);for(let h=0;h<4&&a.getSize()<c;++h)a.appendBit(!1);const u=a.getSize()&7;if(u>0)for(let h=u;h<8;h++)a.appendBit(!1);const d=r-a.getSizeInBytes();for(let h=0;h<d;++h)a.appendBits(h&1?17:236,8);if(a.getSize()!==c)throw new En("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(r,a,c,u,d,h){if(u>=c)throw new En("Block ID too large");const b=r%c,w=c-b,T=Math.floor(r/c),V=T+1,X=Math.floor(a/c),se=X+1,be=T-X,Se=V-se;if(be!==Se)throw new En("EC bytes mismatch");if(c!==w+b)throw new En("RS blocks mismatch");if(r!==(X+be)*w+(se+Se)*b)throw new En("Total bytes mismatch");u<w?(d[0]=X,h[0]=be):(d[0]=se,h[0]=Se)}static interleaveWithECBytes(r,a,c,u){if(r.getSizeInBytes()!==c)throw new En("Number of bits and data bytes does not match");let d=0,h=0,b=0;const w=new Array;for(let V=0;V<u;++V){const X=new Int32Array(1),se=new Int32Array(1);xe.getNumDataBytesAndNumECBytesForBlockID(a,c,u,V,X,se);const be=X[0],Se=new Uint8Array(be);r.toBytes(8*d,Se,0,be);const Ee=xe.generateECBytes(Se,se[0]);w.push(new $(Se,Ee)),h=Math.max(h,be),b=Math.max(b,Ee.length),d+=X[0]}if(c!==d)throw new En("Data bytes does not match offset");const T=new U;for(let V=0;V<h;++V)for(const X of w){const se=X.getDataBytes();V<se.length&&T.appendBits(se[V],8)}for(let V=0;V<b;++V)for(const X of w){const se=X.getErrorCorrectionBytes();V<se.length&&T.appendBits(se[V],8)}if(a!==T.getSizeInBytes())throw new En("Interleaving error: "+a+" and "+T.getSizeInBytes()+" differ.");return T}static generateECBytes(r,a){const c=r.length,u=new Int32Array(c+a);for(let h=0;h<c;h++)u[h]=r[h]&255;new hs(He.QR_CODE_FIELD_256).encode(u,a);const d=new Uint8Array(a);for(let h=0;h<a;h++)d[h]=u[c+h];return d}static appendModeInfo(r,a){a.appendBits(r.getBits(),4)}static appendLengthInfo(r,a,c,u){const d=c.getCharacterCountBits(a);if(r>=1<<d)throw new En(r+" is bigger than "+((1<<d)-1));u.appendBits(r,d)}static appendBytes(r,a,c,u){switch(a){case Rt.NUMERIC:xe.appendNumericBytes(r,c);break;case Rt.ALPHANUMERIC:xe.appendAlphanumericBytes(r,c);break;case Rt.BYTE:xe.append8BitBytes(r,c,u);break;case Rt.KANJI:xe.appendKanjiBytes(r,c);break;default:throw new En("Invalid mode: "+a)}}static getDigit(r){return r.charCodeAt(0)-48}static isDigit(r){const a=xe.getDigit(r);return a>=0&&a<=9}static appendNumericBytes(r,a){const c=r.length;let u=0;for(;u<c;){const d=xe.getDigit(r.charAt(u));if(u+2<c){const h=xe.getDigit(r.charAt(u+1)),b=xe.getDigit(r.charAt(u+2));a.appendBits(d*100+h*10+b,10),u+=3}else if(u+1<c){const h=xe.getDigit(r.charAt(u+1));a.appendBits(d*10+h,7),u+=2}else a.appendBits(d,4),u++}}static appendAlphanumericBytes(r,a){const c=r.length;let u=0;for(;u<c;){const d=xe.getAlphanumericCode(r.charCodeAt(u));if(d===-1)throw new En;if(u+1<c){const h=xe.getAlphanumericCode(r.charCodeAt(u+1));if(h===-1)throw new En;a.appendBits(d*45+h,11),u+=2}else a.appendBits(d,6),u++}}static append8BitBytes(r,a,c){let u;try{u=k.encode(r,c)}catch(d){throw new En(d)}for(let d=0,h=u.length;d!==h;d++){const b=u[d];a.appendBits(b,8)}}static appendKanjiBytes(r,a){let c;try{c=k.encode(r,M.SJIS)}catch(d){throw new En(d)}const u=c.length;for(let d=0;d<u;d+=2){const h=c[d]&255,b=c[d+1]&255,w=h<<8&4294967295|b;let T=-1;if(w>=33088&&w<=40956?T=w-33088:w>=57408&&w<=60351&&(T=w-49472),T===-1)throw new En("Invalid byte sequence");const V=(T>>8)*192+(T&255);a.appendBits(V,13)}}static appendECI(r,a){a.appendBits(Rt.ECI.getBits(),4),a.appendBits(r.getValue(),8)}}xe.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),xe.DEFAULT_BYTE_MODE_ENCODING=M.UTF8.getName();class Ce{write(r,a,c,u=null){if(r.length===0)throw new N("Found empty contents");if(a<0||c<0)throw new N("Requested dimensions are too small: "+a+"x"+c);let d=_n.L,h=Ce.QUIET_ZONE_SIZE;u!==null&&(u.get(Sr.ERROR_CORRECTION)!==void 0&&(d=_n.fromString(u.get(Sr.ERROR_CORRECTION).toString())),u.get(Sr.MARGIN)!==void 0&&(h=Number.parseInt(u.get(Sr.MARGIN).toString(),10)));const b=xe.encode(r,d,u);return this.renderResult(b,a,c,h)}writeToDom(r,a,c,u,d=null){typeof r=="string"&&(r=document.querySelector(r));const h=this.write(a,c,u,d);r&&r.appendChild(h)}renderResult(r,a,c,u){const d=r.getMatrix();if(d===null)throw new Me;const h=d.getWidth(),b=d.getHeight(),w=h+u*2,T=b+u*2,V=Math.max(a,w),X=Math.max(c,T),se=Math.min(Math.floor(V/w),Math.floor(X/T)),be=Math.floor((V-h*se)/2),Se=Math.floor((X-b*se)/2),Ee=this.createSVGElement(V,X);for(let Le=0,Ge=Se;Le<b;Le++,Ge+=se)for(let at=0,dt=be;at<h;at++,dt+=se)if(d.get(at,Le)===1){const ot=this.createSvgRectElement(dt,Ge,se,se);Ee.appendChild(ot)}return Ee}createSVGElement(r,a){const c=document.createElementNS(Ce.SVG_NS,"svg");return c.setAttributeNS(null,"height",r.toString()),c.setAttributeNS(null,"width",a.toString()),c}createSvgRectElement(r,a,c,u){const d=document.createElementNS(Ce.SVG_NS,"rect");return d.setAttributeNS(null,"x",r.toString()),d.setAttributeNS(null,"y",a.toString()),d.setAttributeNS(null,"height",c.toString()),d.setAttributeNS(null,"width",u.toString()),d.setAttributeNS(null,"fill","#000000"),d}}Ce.QUIET_ZONE_SIZE=4,Ce.SVG_NS="http://www.w3.org/2000/svg";class ke{encode(r,a,c,u,d){if(r.length===0)throw new N("Found empty contents");if(a!==ue.QR_CODE)throw new N("Can only encode QR_CODE, but got "+a);if(c<0||u<0)throw new N(`Requested dimensions are too small: ${c}x${u}`);let h=_n.L,b=ke.QUIET_ZONE_SIZE;d!==null&&(d.get(Sr.ERROR_CORRECTION)!==void 0&&(h=_n.fromString(d.get(Sr.ERROR_CORRECTION).toString())),d.get(Sr.MARGIN)!==void 0&&(b=Number.parseInt(d.get(Sr.MARGIN).toString(),10)));const w=xe.encode(r,h,d);return ke.renderResult(w,c,u,b)}static renderResult(r,a,c,u){const d=r.getMatrix();if(d===null)throw new Me;const h=d.getWidth(),b=d.getHeight(),w=h+u*2,T=b+u*2,V=Math.max(a,w),X=Math.max(c,T),se=Math.min(Math.floor(V/w),Math.floor(X/T)),be=Math.floor((V-h*se)/2),Se=Math.floor((X-b*se)/2),Ee=new ee(V,X);for(let Le=0,Ge=Se;Le<b;Le++,Ge+=se)for(let at=0,dt=be;at<h;at++,dt+=se)d.get(at,Le)===1&&Ee.setRegion(dt,Ge,se,se);return Ee}}ke.QUIET_ZONE_SIZE=4;class Ke{encode(r,a,c,u,d){let h;switch(a){case ue.QR_CODE:h=new ke;break;default:throw new N("No encoder available for format "+a)}return h.encode(r,a,c,u,d)}}class rt extends te{constructor(r,a,c,u,d,h,b,w){if(super(h,b),this.yuvData=r,this.dataWidth=a,this.dataHeight=c,this.left=u,this.top=d,u+h>a||d+b>c)throw new N("Crop rectangle does not fit within image data.");w&&this.reverseHorizontal(h,b)}getRow(r,a){if(r<0||r>=this.getHeight())throw new N("Requested row is outside the image: "+r);const c=this.getWidth();(a==null||a.length<c)&&(a=new Uint8ClampedArray(c));const u=(r+this.top)*this.dataWidth+this.left;return E.arraycopy(this.yuvData,u,a,0,c),a}getMatrix(){const r=this.getWidth(),a=this.getHeight();if(r===this.dataWidth&&a===this.dataHeight)return this.yuvData;const c=r*a,u=new Uint8ClampedArray(c);let d=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return E.arraycopy(this.yuvData,d,u,0,c),u;for(let h=0;h<a;h++){const b=h*r;E.arraycopy(this.yuvData,d,u,b,r),d+=this.dataWidth}return u}isCropSupported(){return!0}crop(r,a,c,u){return new rt(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+a,c,u,!1)}renderThumbnail(){const r=this.getWidth()/rt.THUMBNAIL_SCALE_FACTOR,a=this.getHeight()/rt.THUMBNAIL_SCALE_FACTOR,c=new Int32Array(r*a),u=this.yuvData;let d=this.top*this.dataWidth+this.left;for(let h=0;h<a;h++){const b=h*r;for(let w=0;w<r;w++){const T=u[d+w*rt.THUMBNAIL_SCALE_FACTOR]&255;c[b+w]=4278190080|T*65793}d+=this.dataWidth*rt.THUMBNAIL_SCALE_FACTOR}return c}getThumbnailWidth(){return this.getWidth()/rt.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/rt.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(r,a){const c=this.yuvData;for(let u=0,d=this.top*this.dataWidth+this.left;u<a;u++,d+=this.dataWidth){const h=d+r/2;for(let b=d,w=d+r-1;b<h;b++,w--){const T=c[b];c[b]=c[w],c[w]=T}}}invert(){return new W(this)}}rt.THUMBNAIL_SCALE_FACTOR=2;class Nt extends te{constructor(r,a,c,u,d,h,b){if(super(a,c),this.dataWidth=u,this.dataHeight=d,this.left=h,this.top=b,r.BYTES_PER_ELEMENT===4){const w=a*c,T=new Uint8ClampedArray(w);for(let V=0;V<w;V++){const X=r[V],se=X>>16&255,be=X>>7&510,Se=X&255;T[V]=(se+be+Se)/4&255}this.luminances=T}else this.luminances=r;if(u===void 0&&(this.dataWidth=a),d===void 0&&(this.dataHeight=c),h===void 0&&(this.left=0),b===void 0&&(this.top=0),this.left+a>this.dataWidth||this.top+c>this.dataHeight)throw new N("Crop rectangle does not fit within image data.")}getRow(r,a){if(r<0||r>=this.getHeight())throw new N("Requested row is outside the image: "+r);const c=this.getWidth();(a==null||a.length<c)&&(a=new Uint8ClampedArray(c));const u=(r+this.top)*this.dataWidth+this.left;return E.arraycopy(this.luminances,u,a,0,c),a}getMatrix(){const r=this.getWidth(),a=this.getHeight();if(r===this.dataWidth&&a===this.dataHeight)return this.luminances;const c=r*a,u=new Uint8ClampedArray(c);let d=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return E.arraycopy(this.luminances,d,u,0,c),u;for(let h=0;h<a;h++){const b=h*r;E.arraycopy(this.luminances,d,u,b,r),d+=this.dataWidth}return u}isCropSupported(){return!0}crop(r,a,c,u){return new Nt(this.luminances,c,u,this.dataWidth,this.dataHeight,this.left+r,this.top+a)}invert(){return new W(this)}}class Mt extends M{static forName(r){return this.getCharacterSetECIByName(r)}}class Zt{}Zt.ISO_8859_1=M.ISO8859_1;class Qt{isCompact(){return this.compact}setCompact(r){this.compact=r}getSize(){return this.size}setSize(r){this.size=r}getLayers(){return this.layers}setLayers(r){this.layers=r}getCodeWords(){return this.codeWords}setCodeWords(r){this.codeWords=r}getMatrix(){return this.matrix}setMatrix(r){this.matrix=r}}class mn{static singletonList(r){return[r]}static min(r,a){return r.sort(a)[0]}}class cr{constructor(r){this.previous=r}getPrevious(){return this.previous}}class Pn extends cr{constructor(r,a,c){super(r),this.value=a,this.bitCount=c}appendTo(r,a){r.appendBits(this.value,this.bitCount)}add(r,a){return new Pn(this,r,a)}addBinaryShift(r,a){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Pn(this,r,a)}toString(){let r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+D.toBinaryString(r|1<<this.bitCount).substring(1)+">"}}class pr extends Pn{constructor(r,a,c){super(r,0,0),this.binaryShiftStart=a,this.binaryShiftByteCount=c}appendTo(r,a){for(let c=0;c<this.binaryShiftByteCount;c++)(c===0||c===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):c===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(a[this.binaryShiftStart+c],8)}addBinaryShift(r,a){return new pr(this,r,a)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function ci(Z,r,a){return new pr(Z,r,a)}function xr(Z,r,a){return new Pn(Z,r,a)}const ga=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],jr=0,zi=1,bi=2,mo=3,Ii=4,go=new Pn(null,0,0),Ms=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Nl(Z){for(let r of Z)_.fill(r,-1);return Z[jr][Ii]=0,Z[zi][Ii]=0,Z[zi][jr]=28,Z[mo][Ii]=0,Z[bi][Ii]=0,Z[bi][jr]=15,Z}const Rs=Nl(_.createInt32Array(6,6));class Wn{constructor(r,a,c,u){this.token=r,this.mode=a,this.binaryShiftByteCount=c,this.bitCount=u}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(r,a){let c=this.bitCount,u=this.token;if(r!==this.mode){let h=Ms[this.mode][r];u=xr(u,h&65535,h>>16),c+=h>>16}let d=r===bi?4:5;return u=xr(u,a,d),new Wn(u,r,0,c+d)}shiftAndAppend(r,a){let c=this.token,u=this.mode===bi?4:5;return c=xr(c,Rs[this.mode][r],u),c=xr(c,a,5),new Wn(c,this.mode,0,this.bitCount+u+5)}addBinaryShiftChar(r){let a=this.token,c=this.mode,u=this.bitCount;if(this.mode===Ii||this.mode===bi){let b=Ms[c][jr];a=xr(a,b&65535,b>>16),u+=b>>16,c=jr}let d=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,h=new Wn(a,c,this.binaryShiftByteCount+1,u+d);return h.binaryShiftByteCount===2078&&(h=h.endBinaryShift(r+1)),h}endBinaryShift(r){if(this.binaryShiftByteCount===0)return this;let a=this.token;return a=ci(a,r-this.binaryShiftByteCount,this.binaryShiftByteCount),new Wn(a,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(r){let a=this.bitCount+(Ms[this.mode][r.mode]>>16);return this.binaryShiftByteCount<r.binaryShiftByteCount?a+=Wn.calculateBinaryShiftCost(r)-Wn.calculateBinaryShiftCost(this):this.binaryShiftByteCount>r.binaryShiftByteCount&&r.binaryShiftByteCount>0&&(a+=10),a<=r.bitCount}toBitArray(r){let a=[];for(let u=this.endBinaryShift(r.length).token;u!==null;u=u.getPrevious())a.unshift(u);let c=new U;for(const u of a)u.appendTo(c,r);return c}toString(){return R.format("%s bits=%d bytes=%d",ga[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(r){return r.binaryShiftByteCount>62?21:r.binaryShiftByteCount>31?20:r.binaryShiftByteCount>0?10:0}}Wn.INITIAL_STATE=new Wn(go,jr,0,0);function po(Z){const r=R.getCharCode(" "),a=R.getCharCode("."),c=R.getCharCode(",");Z[jr][r]=1;const u=R.getCharCode("Z"),d=R.getCharCode("A");for(let se=d;se<=u;se++)Z[jr][se]=se-d+2;Z[zi][r]=1;const h=R.getCharCode("z"),b=R.getCharCode("a");for(let se=b;se<=h;se++)Z[zi][se]=se-b+2;Z[bi][r]=1;const w=R.getCharCode("9"),T=R.getCharCode("0");for(let se=T;se<=w;se++)Z[bi][se]=se-T+2;Z[bi][c]=12,Z[bi][a]=13;const V=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let se=0;se<V.length;se++)Z[mo][R.getCharCode(V[se])]=se;const X=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let se=0;se<X.length;se++)R.getCharCode(X[se])>0&&(Z[Ii][R.getCharCode(X[se])]=se);return Z}const gs=po(_.createInt32Array(5,256));class ka{constructor(r){this.text=r}encode(){const r=R.getCharCode(" "),a=R.getCharCode(`
`);let c=mn.singletonList(Wn.INITIAL_STATE);for(let d=0;d<this.text.length;d++){let h,b=d+1<this.text.length?this.text[d+1]:0;switch(this.text[d]){case R.getCharCode("\r"):h=b===a?2:0;break;case R.getCharCode("."):h=b===r?3:0;break;case R.getCharCode(","):h=b===r?4:0;break;case R.getCharCode(":"):h=b===r?5:0;break;default:h=0}h>0?(c=ka.updateStateListForPair(c,d,h),d++):c=this.updateStateListForChar(c,d)}return mn.min(c,(d,h)=>d.getBitCount()-h.getBitCount()).toBitArray(this.text)}updateStateListForChar(r,a){const c=[];for(let u of r)this.updateStateForChar(u,a,c);return ka.simplifyStates(c)}updateStateForChar(r,a,c){let u=this.text[a]&255,d=gs[r.getMode()][u]>0,h=null;for(let b=0;b<=Ii;b++){let w=gs[b][u];if(w>0){if(h==null&&(h=r.endBinaryShift(a)),!d||b===r.getMode()||b===bi){const T=h.latchAndAppend(b,w);c.push(T)}if(!d&&Rs[r.getMode()][b]>=0){const T=h.shiftAndAppend(b,w);c.push(T)}}}if(r.getBinaryShiftByteCount()>0||gs[r.getMode()][u]===0){let b=r.addBinaryShiftChar(a);c.push(b)}}static updateStateListForPair(r,a,c){const u=[];for(let d of r)this.updateStateForPair(d,a,c,u);return this.simplifyStates(u)}static updateStateForPair(r,a,c,u){let d=r.endBinaryShift(a);if(u.push(d.latchAndAppend(Ii,c)),r.getMode()!==Ii&&u.push(d.shiftAndAppend(Ii,c)),c===3||c===4){let h=d.latchAndAppend(bi,16-c).latchAndAppend(bi,1);u.push(h)}if(r.getBinaryShiftByteCount()>0){let h=r.addBinaryShiftChar(a).addBinaryShiftChar(a+1);u.push(h)}}static simplifyStates(r){let a=[];for(const c of r){let u=!0;for(const d of a){if(d.isBetterThanOrEqualTo(c)){u=!1;break}c.isBetterThanOrEqualTo(d)&&(a=a.filter(h=>h!==d))}u&&a.push(c)}return a}}class cn{constructor(){}static encodeBytes(r){return cn.encode(r,cn.DEFAULT_EC_PERCENT,cn.DEFAULT_AZTEC_LAYERS)}static encode(r,a,c){let u=new ka(r).encode(),d=D.truncDivision(u.getSize()*a,100)+11,h=u.getSize()+d,b,w,T,V,X;if(c!==cn.DEFAULT_AZTEC_LAYERS){if(b=c<0,w=Math.abs(c),w>(b?cn.MAX_NB_BITS_COMPACT:cn.MAX_NB_BITS))throw new N(R.format("Illegal value %s for layers",c));T=cn.totalBitsInLayer(w,b),V=cn.WORD_SIZE[w];let ot=T-T%V;if(X=cn.stuffBits(u,V),X.getSize()+d>ot)throw new N("Data to large for user specified layer");if(b&&X.getSize()>V*64)throw new N("Data to large for user specified layer")}else{V=0,X=null;for(let ot=0;;ot++){if(ot>cn.MAX_NB_BITS)throw new N("Data too large for an Aztec code");if(b=ot<=3,w=b?ot+1:ot,T=cn.totalBitsInLayer(w,b),h>T)continue;(X==null||V!==cn.WORD_SIZE[w])&&(V=cn.WORD_SIZE[w],X=cn.stuffBits(u,V));let on=T-T%V;if(!(b&&X.getSize()>V*64)&&X.getSize()+d<=on)break}}let se=cn.generateCheckWords(X,T,V),be=X.getSize()/V,Se=cn.generateModeMessage(b,w,be),Ee=(b?11:14)+w*4,Le=new Int32Array(Ee),Ge;if(b){Ge=Ee;for(let ot=0;ot<Le.length;ot++)Le[ot]=ot}else{Ge=Ee+1+2*D.truncDivision(D.truncDivision(Ee,2)-1,15);let ot=D.truncDivision(Ee,2),on=D.truncDivision(Ge,2);for(let Yt=0;Yt<ot;Yt++){let _r=Yt+D.truncDivision(Yt,15);Le[ot-Yt-1]=on-_r-1,Le[ot+Yt]=on+_r+1}}let at=new ee(Ge);for(let ot=0,on=0;ot<w;ot++){let Yt=(w-ot)*4+(b?9:12);for(let _r=0;_r<Yt;_r++){let ri=_r*2;for(let Cr=0;Cr<2;Cr++)se.get(on+ri+Cr)&&at.set(Le[ot*2+Cr],Le[ot*2+_r]),se.get(on+Yt*2+ri+Cr)&&at.set(Le[ot*2+_r],Le[Ee-1-ot*2-Cr]),se.get(on+Yt*4+ri+Cr)&&at.set(Le[Ee-1-ot*2-Cr],Le[Ee-1-ot*2-_r]),se.get(on+Yt*6+ri+Cr)&&at.set(Le[Ee-1-ot*2-_r],Le[ot*2+Cr])}on+=Yt*8}if(cn.drawModeMessage(at,b,Ge,Se),b)cn.drawBullsEye(at,D.truncDivision(Ge,2),5);else{cn.drawBullsEye(at,D.truncDivision(Ge,2),7);for(let ot=0,on=0;ot<D.truncDivision(Ee,2)-1;ot+=15,on+=16)for(let Yt=D.truncDivision(Ge,2)&1;Yt<Ge;Yt+=2)at.set(D.truncDivision(Ge,2)-on,Yt),at.set(D.truncDivision(Ge,2)+on,Yt),at.set(Yt,D.truncDivision(Ge,2)-on),at.set(Yt,D.truncDivision(Ge,2)+on)}let dt=new Qt;return dt.setCompact(b),dt.setSize(Ge),dt.setLayers(w),dt.setCodeWords(be),dt.setMatrix(at),dt}static drawBullsEye(r,a,c){for(let u=0;u<c;u+=2)for(let d=a-u;d<=a+u;d++)r.set(d,a-u),r.set(d,a+u),r.set(a-u,d),r.set(a+u,d);r.set(a-c,a-c),r.set(a-c+1,a-c),r.set(a-c,a-c+1),r.set(a+c,a-c),r.set(a+c,a-c+1),r.set(a+c,a+c-1)}static generateModeMessage(r,a,c){let u=new U;return r?(u.appendBits(a-1,2),u.appendBits(c-1,6),u=cn.generateCheckWords(u,28,4)):(u.appendBits(a-1,5),u.appendBits(c-1,11),u=cn.generateCheckWords(u,40,4)),u}static drawModeMessage(r,a,c,u){let d=D.truncDivision(c,2);if(a)for(let h=0;h<7;h++){let b=d-3+h;u.get(h)&&r.set(b,d-5),u.get(h+7)&&r.set(d+5,b),u.get(20-h)&&r.set(b,d+5),u.get(27-h)&&r.set(d-5,b)}else for(let h=0;h<10;h++){let b=d-5+h+D.truncDivision(h,5);u.get(h)&&r.set(b,d-7),u.get(h+10)&&r.set(d+7,b),u.get(29-h)&&r.set(b,d+7),u.get(39-h)&&r.set(d-7,b)}}static generateCheckWords(r,a,c){let u=r.getSize()/c,d=new hs(cn.getGF(c)),h=D.truncDivision(a,c),b=cn.bitsToWords(r,c,h);d.encode(b,h-u);let w=a%c,T=new U;T.appendBits(0,w);for(const V of Array.from(b))T.appendBits(V,c);return T}static bitsToWords(r,a,c){let u=new Int32Array(c),d,h;for(d=0,h=r.getSize()/a;d<h;d++){let b=0;for(let w=0;w<a;w++)b|=r.get(d*a+w)?1<<a-w-1:0;u[d]=b}return u}static getGF(r){switch(r){case 4:return He.AZTEC_PARAM;case 6:return He.AZTEC_DATA_6;case 8:return He.AZTEC_DATA_8;case 10:return He.AZTEC_DATA_10;case 12:return He.AZTEC_DATA_12;default:throw new N("Unsupported word size "+r)}}static stuffBits(r,a){let c=new U,u=r.getSize(),d=(1<<a)-2;for(let h=0;h<u;h+=a){let b=0;for(let w=0;w<a;w++)(h+w>=u||r.get(h+w))&&(b|=1<<a-1-w);(b&d)===d?(c.appendBits(b&d,a),h--):b&d?c.appendBits(b,a):(c.appendBits(b|1,a),h--)}return c}static totalBitsInLayer(r,a){return((a?88:112)+16*r)*r}}cn.DEFAULT_EC_PERCENT=33,cn.DEFAULT_AZTEC_LAYERS=0,cn.MAX_NB_BITS=32,cn.MAX_NB_BITS_COMPACT=4,cn.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class ni{encode(r,a,c,u){return this.encodeWithHints(r,a,c,u,null)}encodeWithHints(r,a,c,u,d){let h=Zt.ISO_8859_1,b=cn.DEFAULT_EC_PERCENT,w=cn.DEFAULT_AZTEC_LAYERS;return d!=null&&(d.has(Sr.CHARACTER_SET)&&(h=Mt.forName(d.get(Sr.CHARACTER_SET).toString())),d.has(Sr.ERROR_CORRECTION)&&(b=D.parseInt(d.get(Sr.ERROR_CORRECTION).toString())),d.has(Sr.AZTEC_LAYERS)&&(w=D.parseInt(d.get(Sr.AZTEC_LAYERS).toString()))),ni.encodeLayers(r,a,c,u,h,b,w)}static encodeLayers(r,a,c,u,d,h,b){if(a!==ue.AZTEC)throw new N("Can only encode AZTEC, but got "+a);let w=cn.encode(R.getBytes(r,d),h,b);return ni.renderResult(w,c,u)}static renderResult(r,a,c){let u=r.getMatrix();if(u==null)throw new Me;let d=u.getWidth(),h=u.getHeight(),b=Math.max(a,d),w=Math.max(c,h),T=Math.min(b/d,w/h),V=(b-d*T)/2,X=(w-h*T)/2,se=new ee(b,w);for(let be=0,Se=X;be<h;be++,Se+=T)for(let Ee=0,Le=V;Ee<d;Ee++,Le+=T)u.get(Ee,be)&&se.setRegion(Le,Se,T,T);return se}}n.AbstractExpandedDecoder=Ci,n.ArgumentException=S,n.ArithmeticException=Ye,n.AztecCode=Qt,n.AztecCodeReader=mt,n.AztecCodeWriter=ni,n.AztecDecoder=Fe,n.AztecDetector=qt,n.AztecDetectorResult=gt,n.AztecEncoder=cn,n.AztecHighLevelEncoder=ka,n.AztecPoint=At,n.BarcodeFormat=ue,n.Binarizer=O,n.BinaryBitmap=j,n.BitArray=U,n.BitMatrix=ee,n.BitSource=oo,n.BrowserAztecCodeReader=yn,n.BrowserBarcodeReader=dn,n.BrowserCodeReader=q,n.BrowserDatamatrixCodeReader=lo,n.BrowserMultiFormatReader=fo,n.BrowserPDF417Reader=vl,n.BrowserQRCodeReader=wl,n.BrowserQRCodeSvgWriter=Ce,n.CharacterSetECI=M,n.ChecksumException=v,n.Code128Reader=Ne,n.Code39Reader=ft,n.DataMatrixDecodedBitStreamParser=ha,n.DataMatrixReader=Gr,n.DecodeHintType=ae,n.DecoderResult=ve,n.DefaultGridSampler=St,n.DetectorResult=Qe,n.EAN13Reader=Kr,n.EncodeHintType=Sr,n.Exception=x,n.FormatException=F,n.GenericGF=He,n.GenericGFPoly=Te,n.GlobalHistogramBinarizer=K,n.GridSampler=qe,n.GridSamplerInstance=Ot,n.HTMLCanvasElementLuminanceSource=fe,n.HybridBinarizer=G,n.ITFReader=xt,n.IllegalArgumentException=N,n.IllegalStateException=Me,n.InvertedLuminanceSource=W,n.LuminanceSource=te,n.MathUtils=we,n.MultiFormatOneDReader=Qi,n.MultiFormatReader=yl,n.MultiFormatWriter=Ke,n.NotFoundException=ne,n.OneDReader=Tt,n.PDF417DecodedBitStreamParser=Ve,n.PDF417DecoderErrorCorrection=tc,n.PDF417Reader=Ar,n.PDF417ResultMetadata=pl,n.PerspectiveTransform=ct,n.PlanarYUVLuminanceSource=rt,n.QRCodeByteMatrix=ms,n.QRCodeDataMask=Ei,n.QRCodeDecodedBitStreamParser=Cn,n.QRCodeDecoderErrorCorrectionLevel=_n,n.QRCodeDecoderFormatInformation=Rr,n.QRCodeEncoder=xe,n.QRCodeEncoderQRCode=_i,n.QRCodeMaskUtil=On,n.QRCodeMatrixUtil=A,n.QRCodeMode=Rt,n.QRCodeReader=Oa,n.QRCodeVersion=Dt,n.QRCodeWriter=ke,n.RGBLuminanceSource=Nt,n.RSS14Reader=Gn,n.RSSExpandedReader=$e,n.ReaderException=fs,n.ReedSolomonDecoder=me,n.ReedSolomonEncoder=hs,n.ReedSolomonException=ut,n.Result=Q,n.ResultMetadataType=Ae,n.ResultPoint=Re,n.StringUtils=R,n.UnsupportedOperationException=z,n.VideoInputDevice=le,n.WhiteRectangleDetector=pt,n.WriterException=En,n.ZXingArrays=_,n.ZXingCharset=Mt,n.ZXingInteger=D,n.ZXingStandardCharsets=Zt,n.ZXingStringBuilder=re,n.ZXingStringEncoding=k,n.ZXingSystem=E,n.createAbstractExpandedDecoder=La,Object.defineProperty(n,"__esModule",{value:!0})})})(o2,o2.exports);var ur=o2.exports;const r6=ph(ur),i6=Cv({__proto__:null,default:r6},[ur]);var qp=function(){function e(t,n,i){if(this.formatMap=new Map([[Et.QR_CODE,ur.BarcodeFormat.QR_CODE],[Et.AZTEC,ur.BarcodeFormat.AZTEC],[Et.CODABAR,ur.BarcodeFormat.CODABAR],[Et.CODE_39,ur.BarcodeFormat.CODE_39],[Et.CODE_93,ur.BarcodeFormat.CODE_93],[Et.CODE_128,ur.BarcodeFormat.CODE_128],[Et.DATA_MATRIX,ur.BarcodeFormat.DATA_MATRIX],[Et.MAXICODE,ur.BarcodeFormat.MAXICODE],[Et.ITF,ur.BarcodeFormat.ITF],[Et.EAN_13,ur.BarcodeFormat.EAN_13],[Et.EAN_8,ur.BarcodeFormat.EAN_8],[Et.PDF_417,ur.BarcodeFormat.PDF_417],[Et.RSS_14,ur.BarcodeFormat.RSS_14],[Et.RSS_EXPANDED,ur.BarcodeFormat.RSS_EXPANDED],[Et.UPC_A,ur.BarcodeFormat.UPC_A],[Et.UPC_E,ur.BarcodeFormat.UPC_E],[Et.UPC_EAN_EXTENSION,ur.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!i6)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=i;var o=this.createZXingFormats(t),l=new Map;l.set(ur.DecodeHintType.POSSIBLE_FORMATS,o),l.set(ur.DecodeHintType.TRY_HARDER,!1),this.hints=l}return e.prototype.decodeAsync=function(t){var n=this;return new Promise(function(i,o){try{i(n.decode(t))}catch(l){o(l)}})},e.prototype.decode=function(t){var n=new ur.MultiFormatReader(this.verbose,this.hints),i=new ur.HTMLCanvasElementLuminanceSource(t),o=new ur.BinaryBitmap(new ur.HybridBinarizer(i)),l=n.decode(o);return{text:l.text,format:Iy.create(this.toHtml5QrcodeSupportedFormats(l.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,i,o){t.set(n,i)}),t},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createZXingFormats=function(t){for(var n=[],i=0,o=t;i<o.length;i++){var l=o[i];this.formatMap.has(l)?n.push(this.formatMap.get(l)):this.logger.logError("".concat(l," is not supported by")+"ZXingHtml5QrcodeShim")}return n},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),a6=function(e,t,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function m(S){try{x(i.next(S))}catch(N){f(N)}}function p(S){try{x(i.throw(S))}catch(N){f(N)}}function x(S){S.done?l(S.value):o(S.value).then(m,p)}x((i=i.apply(e,t||[])).next())})},s6=function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,f;return f={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function m(x){return function(S){return p([x,S])}}function p(x){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,x[0]&&(n=0)),n;)try{if(i=1,o&&(l=x[0]&2?o.return:x[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,x[1])).done)return l;switch(o=0,l&&(x=[x[0]&2,l.value]),x[0]){case 0:case 1:l=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,o=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!l||x[1]>l[0]&&x[1]<l[3])){n.label=x[1];break}if(x[0]===6&&n.label<l[1]){n.label=l[1],l=x;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(x);break}l[2]&&n.ops.pop(),n.trys.pop();continue}x=t.call(e,n)}catch(S){x=[6,S],o=0}finally{i=l=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},Gp=function(){function e(t,n,i){if(this.formatMap=new Map([[Et.QR_CODE,"qr_code"],[Et.AZTEC,"aztec"],[Et.CODABAR,"codabar"],[Et.CODE_39,"code_39"],[Et.CODE_93,"code_93"],[Et.CODE_128,"code_128"],[Et.DATA_MATRIX,"data_matrix"],[Et.ITF,"itf"],[Et.EAN_13,"ean_13"],[Et.EAN_8,"ean_8"],[Et.PDF_417,"pdf417"],[Et.UPC_A,"upc_a"],[Et.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=i;var o=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(o),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},e.prototype.decodeAsync=function(t){return a6(this,void 0,void 0,function(){var n,i;return s6(this,function(o){switch(o.label){case 0:return[4,this.detector.detect(t)];case 1:if(n=o.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return i=this.selectLargestBarcode(n),[2,{text:i.rawValue,format:Iy.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(t){for(var n=null,i=0,o=0,l=t;o<l.length;o++){var f=l[o],m=f.boundingBox.width*f.boundingBox.height;m>i&&(i=m,n=f)}if(!n)throw"No largest barcode found";return n},e.prototype.createBarcodeDetectorFormats=function(t){for(var n=[],i=0,o=t;i<o.length;i++){var l=o[i];this.formatMap.has(l)?n.push(this.formatMap.get(l)):this.logger.warn("".concat(l," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,i,o){t.set(n,i)}),t},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),Wp=function(e,t,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function m(S){try{x(i.next(S))}catch(N){f(N)}}function p(S){try{x(i.throw(S))}catch(N){f(N)}}function x(S){S.done?l(S.value):o(S.value).then(m,p)}x((i=i.apply(e,t||[])).next())})},Yp=function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,f;return f={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function m(x){return function(S){return p([x,S])}}function p(x){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,x[0]&&(n=0)),n;)try{if(i=1,o&&(l=x[0]&2?o.return:x[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,x[1])).done)return l;switch(o=0,l&&(x=[x[0]&2,l.value]),x[0]){case 0:case 1:l=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,o=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!l||x[1]>l[0]&&x[1]<l[3])){n.label=x[1];break}if(x[0]===6&&n.label<l[1]){n.label=l[1],l=x;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(x);break}l[2]&&n.ops.pop(),n.trys.pop();continue}x=t.call(e,n)}catch(S){x=[6,S],o=0}finally{i=l=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},o6=function(){function e(t,n,i,o){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=i,n&&Gp.isSupported()?(this.primaryDecoder=new Gp(t,i,o),this.secondaryDecoder=new qp(t,i,o)):this.primaryDecoder=new qp(t,i,o)}return e.prototype.decodeAsync=function(t){return Wp(this,void 0,void 0,function(){var n;return Yp(this,function(i){switch(i.label){case 0:n=performance.now(),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,i.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(t){return Wp(this,void 0,void 0,function(){var n,i;return Yp(this,function(o){switch(o.label){case 0:n=performance.now(),o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,o.sent()];case 3:if(i=o.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw i;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(t){if(this.verbose){var n=performance.now()-t;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,n=0,i=this.executionResults;n<i.length;n++){var o=i[n];t+=o}var l=t/this.executionResults.length;console.log("".concat(l," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}(),hm=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(i[l]=o[l])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),mh=function(e,t,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function m(S){try{x(i.next(S))}catch(N){f(N)}}function p(S){try{x(i.throw(S))}catch(N){f(N)}}function x(S){S.done?l(S.value):o(S.value).then(m,p)}x((i=i.apply(e,t||[])).next())})},gh=function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,f;return f={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function m(x){return function(S){return p([x,S])}}function p(x){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,x[0]&&(n=0)),n;)try{if(i=1,o&&(l=x[0]&2?o.return:x[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,x[1])).done)return l;switch(o=0,l&&(x=[x[0]&2,l.value]),x[0]){case 0:case 1:l=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,o=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!l||x[1]>l[0]&&x[1]<l[3])){n.label=x[1];break}if(x[0]===6&&n.label<l[1]){n.label=l[1],l=x;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(x);break}l[2]&&n.ops.pop(),n.trys.pop();continue}x=t.call(e,n)}catch(S){x=[6,S],o=0}finally{i=l=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},My=function(){function e(t,n){this.name=t,this.track=n}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(t){var n={};n[this.name]=t;var i={advanced:[n]};return this.track.applyConstraints(i)},e.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var n=t[this.name];return n}return null},e}(),l6=function(e){hm(t,e);function t(n,i){return e.call(this,n,i)||this}return t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(n){var i={};i[this.name]=n;var o={advanced:[i]};return this.track.applyConstraints(o)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),i=n[this.name];return{min:i.min,max:i.max,step:i.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t}(My),c6=function(e){hm(t,e);function t(n){return e.call(this,"zoom",n)||this}return t}(l6),u6=function(e){hm(t,e);function t(n){return e.call(this,"torch",n)||this}return t}(My),d6=function(){function e(t){this.track=t}return e.prototype.zoomFeature=function(){return new c6(this.track)},e.prototype.torchFeature=function(){return new u6(this.track)},e}(),f6=function(){function e(t,n,i){this.isClosed=!1,this.parentElement=t,this.mediaStream=n,this.callbacks=i,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return e.prototype.createVideoElement=function(t){var n=document.createElement("video");return n.style.width="".concat(t,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},e.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var i=t.surface.clientWidth,o=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(i,o),t.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,n,i,o){return mh(this,void 0,void 0,function(){var l,f;return gh(this,function(m){switch(m.label){case 0:return l=new e(t,n,o),i.aspectRatio?(f={aspectRatio:i.aspectRatio},[4,l.getFirstTrackOrFail().applyConstraints(f)]):[3,2];case 1:m.sent(),m.label=2;case 2:return l.setupSurface(),[2,l]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(t){this.failIfClosed();var n=this,i=function(){setTimeout(t,200),n.surface.removeEventListener("playing",i)};this.surface.addEventListener("playing",i),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(t){return mh(this,void 0,void 0,function(){return gh(this,function(n){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(n,i){var o=t.mediaStream.getVideoTracks(),l=o.length,f=0;t.mediaStream.getVideoTracks().forEach(function(m){t.mediaStream.removeTrack(m),m.stop(),++f,f>=l&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),n())})})},e.prototype.getCapabilities=function(){return new d6(this.getFirstTrackOrFail())},e}(),h6=function(){function e(t){this.mediaStream=t}return e.prototype.render=function(t,n,i){return mh(this,void 0,void 0,function(){return gh(this,function(o){return[2,f6.create(t,this.mediaStream,n,i)]})})},e.create=function(t){return mh(this,void 0,void 0,function(){var n,i;return gh(this,function(o){switch(o.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return i=o.sent(),[2,new e(i)]}})})},e}(),Xp=function(e,t,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function m(S){try{x(i.next(S))}catch(N){f(N)}}function p(S){try{x(i.throw(S))}catch(N){f(N)}}function x(S){S.done?l(S.value):o(S.value).then(m,p)}x((i=i.apply(e,t||[])).next())})},Zp=function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,f;return f={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function m(x){return function(S){return p([x,S])}}function p(x){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,x[0]&&(n=0)),n;)try{if(i=1,o&&(l=x[0]&2?o.return:x[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,x[1])).done)return l;switch(o=0,l&&(x=[x[0]&2,l.value]),x[0]){case 0:case 1:l=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,o=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!l||x[1]>l[0]&&x[1]<l[3])){n.label=x[1];break}if(x[0]===6&&n.label<l[1]){n.label=l[1],l=x;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(x);break}l[2]&&n.ops.pop(),n.trys.pop();continue}x=t.call(e,n)}catch(S){x=[6,S],o=0}finally{i=l=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},m6=function(){function e(){}return e.failIfNotSupported=function(){return Xp(this,void 0,void 0,function(){return Zp(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(t){return Xp(this,void 0,void 0,function(){return Zp(this,function(n){return[2,h6.create(t)]})})},e}(),g6=function(e,t,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function m(S){try{x(i.next(S))}catch(N){f(N)}}function p(S){try{x(i.throw(S))}catch(N){f(N)}}function x(S){S.done?l(S.value):o(S.value).then(m,p)}x((i=i.apply(e,t||[])).next())})},p6=function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,f;return f={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function m(x){return function(S){return p([x,S])}}function p(x){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,x[0]&&(n=0)),n;)try{if(i=1,o&&(l=x[0]&2?o.return:x[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,x[1])).done)return l;switch(o=0,l&&(x=[x[0]&2,l.value]),x[0]){case 0:case 1:l=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,o=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!l||x[1]>l[0]&&x[1]<l[3])){n.label=x[1];break}if(x[0]===6&&n.label<l[1]){n.label=l[1],l=x;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(x);break}l[2]&&n.ops.pop(),n.trys.pop();continue}x=t.call(e,n)}catch(S){x=[6,S],o=0}finally{i=l=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},x6=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=Dc.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=Dc.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var t=location.host.split(":")[0];return t==="127.0.0.1"||t==="localhost"},e.getCamerasFromMediaDevices=function(){return g6(this,void 0,void 0,function(){var t,n,i,o,l,f,m;return p6(this,function(p){switch(p.label){case 0:return t=function(x){for(var S=x.getVideoTracks(),N=0,j=S;N<j.length;N++){var v=j[N];v.enabled=!1,v.stop(),x.removeTrack(v)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=p.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(i=p.sent(),o=[],l=0,f=i;l<f.length;l++)m=f[l],m.kind==="videoinput"&&o.push({id:m.deviceId,label:m.label});return t(n),[2,o]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,n){var i=function(l){for(var f=[],m=0,p=l;m<p.length;m++){var x=p[m];x.kind==="video"&&f.push({id:x.id,label:x.label})}t(f)},o=MediaStreamTrack;o.getSources(i)})},e}(),Tr;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(Tr||(Tr={}));var b6=function(){function e(){this.state=Tr.NOT_STARTED,this.onGoingTransactionNewState=Tr.UNKNOWN}return e.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},e.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===Tr.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Tr.UNKNOWN,this.directTransition(t)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===Tr.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Tr.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Tr.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(t){switch(this.state){case Tr.UNKNOWN:throw"Transition from unknown is not allowed";case Tr.NOT_STARTED:this.failIfNewStateIs(t,[Tr.PAUSED]);break;case Tr.SCANNING:break;case Tr.PAUSED:break}},e.prototype.failIfNewStateIs=function(t,n){for(var i=0,o=n;i<o.length;i++){var l=o[i];if(t===l)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},e}(),y6=function(){function e(t){this.stateManager=t}return e.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},e.prototype.directTransition=function(t){this.stateManager.directTransition(t)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===Tr.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==Tr.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Tr.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===Tr.PAUSED},e}(),v6=function(){function e(){}return e.create=function(){return new y6(new b6)},e}(),w6=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(i[l]=o[l])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),wa=function(e){w6(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(as),N6=function(){function e(t,n){this.logger=n,this.fps=wa.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=wa.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Oy.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!ys(this.qrbox)},e.create=function(t,n){return new e(t,n)},e}(),Qp=function(){function e(t,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1;var i;typeof n=="boolean"?this.verbose=n===!0:n&&(i=n,this.verbose=i.verbose===!0,i.experimentalFeatures),this.logger=new Ly(this.verbose),this.qrcode=new o6(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(i),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=v6.create()}return e.prototype.start=function(t,n,i,o){var l=this;if(!t)throw"cameraIdOrConfig is required";if(!i||typeof i!="function")throw"qrCodeSuccessCallback is required and should be a function.";var f;o?f=o:f=this.verbose?this.logger.log:function(){};var m=N6.create(n,this.logger);this.clearElement();var p=!1;m.videoConstraints&&(m.isMediaStreamConstraintsValid()?p=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var x=p,S=document.getElementById(this.elementId);S.clientWidth?S.clientWidth:wa.DEFAULT_WIDTH,S.style.position="relative",this.shouldScan=!0,this.element=S;var N=this,j=this.stateManagerProxy.startTransition(Tr.SCANNING);return new Promise(function(v,O){var E=x?m.videoConstraints:N.createVideoConstraints(t);if(!E){j.cancel(),O("videoConstraints should be defined");return}var P={};(!x||m.aspectRatio)&&(P.aspectRatio=m.aspectRatio);var C={onRenderSurfaceReady:function(_,D){N.setupUi(_,D,m),N.isScanning=!0,N.foreverScan(m,i,f)}};m6.failIfNotSupported().then(function(_){_.create(E).then(function(D){return D.render(l.element,P,C).then(function(U){N.renderedCamera=U,j.execute(),v(null)}).catch(function(U){j.cancel(),O(U)})}).catch(function(D){j.cancel(),O(Dc.errorGettingUserMedia(D))})}).catch(function(_){j.cancel(),O(Dc.cameraStreamingNotSupported())})})},e.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Tr.PAUSED),this.showPausedState(),(ys(t)||t!==!0)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,n=function(){t.stateManagerProxy.directTransition(Tr.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(Tr.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var i=function(){if(t.element){var l=document.getElementById(wa.SHADED_REGION_ELEMENT_ID);l&&t.element.removeChild(l)}},o=this;return this.renderedCamera.close().then(function(){return o.renderedCamera=null,o.element&&(o.element.removeChild(o.canvasElement),o.canvasElement=null),i(),o.qrRegion&&(o.qrRegion=null),o.context&&(o.context=null),n.execute(),o.hidePausedState(),o.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(t,n){return this.scanFileV2(t,n).then(function(i){return i.decodedText})},e.prototype.scanFileV2=function(t,n){var i=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(ys(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(o,l){i.possiblyCloseLastScanImageFile(),i.clearElement(),i.lastScanImageFile=URL.createObjectURL(t);var f=new Image;f.onload=function(){var m=f.width,p=f.height,x=document.getElementById(i.elementId),S=x.clientWidth?x.clientWidth:wa.DEFAULT_WIDTH,N=Math.max(x.clientHeight?x.clientHeight:p,wa.FILE_SCAN_MIN_HEIGHT),j=i.computeCanvasDrawConfig(m,p,S,N);if(n){var v=i.createCanvasElement(S,N,"qr-canvas-visible");v.style.display="inline-block",x.appendChild(v);var O=v.getContext("2d");if(!O)throw"Unable to get 2d context from canvas";O.canvas.width=S,O.canvas.height=N,O.drawImage(f,0,0,m,p,j.x,j.y,j.width,j.height)}var E=wa.FILE_SCAN_HIDDEN_CANVAS_PADDING,P=Math.max(f.width,j.width),C=Math.max(f.height,j.height),_=P+2*E,D=C+2*E,U=i.createCanvasElement(_,D);x.appendChild(U);var Y=U.getContext("2d");if(!Y)throw"Unable to get 2d context from canvas";Y.canvas.width=_,Y.canvas.height=D,Y.drawImage(f,0,0,m,p,E,E,P,C);try{i.qrcode.decodeRobustlyAsync(U).then(function(ae){o(Hp.createFromQrcodeResult(ae))}).catch(l)}catch(ae){l("QR code parse error, error = ".concat(ae))}},f.onerror=l,f.onabort=l,f.onstalled=l,f.onsuspend=l,f.src=URL.createObjectURL(t)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return x6.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(t){if(t){if(!Oy.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(t){var n=[Et.QR_CODE,Et.AZTEC,Et.CODABAR,Et.CODE_39,Et.CODE_93,Et.CODE_128,Et.DATA_MATRIX,Et.MAXICODE,Et.ITF,Et.EAN_13,Et.EAN_8,Et.PDF_417,Et.RSS_14,Et.RSS_EXPANDED,Et.UPC_A,Et.UPC_E,Et.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return n;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var i=[],o=0,l=t.formatsToSupport;o<l.length;o++){var f=l[o];t6(f)?i.push(f):this.logger.warn("Invalid format: ".concat(f," passed in config, ignoring."))}if(i.length===0)throw"None of formatsToSupport match supported values.";return i},e.prototype.getUseBarCodeDetectorIfSupported=function(t){if(ys(t))return!0;if(!ys(t.useBarCodeDetectorIfSupported))return t.useBarCodeDetectorIfSupported!==!1;if(ys(t.experimentalFeatures))return!0;var n=t.experimentalFeatures;return ys(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(t,n,i){var o=this,l=i.qrbox;this.validateQrboxConfig(l);var f=this.toQrdimensions(t,n,l),m=function(x){if(x<wa.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(wa.MIN_QR_BOX_SIZE,"px.")},p=function(x){return x>t&&(o.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),x=t),x};m(f.width),m(f.height),f.width=p(f.width)},e.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(t,n,i){if(typeof i=="number")return{width:i,height:i};if(typeof i=="function")try{return i(t,n)}catch(o){throw new Error("qrbox config was passed as a function but it failed with unknown error"+o)}return i},e.prototype.setupUi=function(t,n,i){i.isShadedBoxEnabled()&&this.validateQrboxSize(t,n,i);var o=ys(i.qrbox)?{width:t,height:n}:i.qrbox;this.validateQrboxConfig(o);var l=this.toQrdimensions(t,n,o);l.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var f=i.isShadedBoxEnabled()&&l.height<=n,m={x:0,y:0,width:t,height:n},p=f?this.getShadedRegionBounds(t,n,l):m,x=this.createCanvasElement(p.width,p.height),S={willReadFrequently:!0},N=x.getContext("2d",S);N.canvas.width=p.width,N.canvas.height=p.height,this.element.append(x),f&&this.possiblyInsertShadingElement(this.element,t,n,l),this.createScannerPausedUiElement(this.element),this.qrRegion=p,this.context=N,this.canvasElement=x},e.prototype.createScannerPausedUiElement=function(t){var n=document.createElement("div");n.innerText=Dc.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",t.appendChild(n),this.scannerPausedUiElement=n},e.prototype.scanContext=function(t,n){var i=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(o){return t(o.text,Hp.createFromQrcodeResult(o)),i.possiblyUpdateShaders(!0),!0}).catch(function(o){i.possiblyUpdateShaders(!1);var l=Dc.codeParseError(o);return n(l,Dy.createFrom(l)),!1})},e.prototype.foreverScan=function(t,n,i){var o=this;if(this.shouldScan&&this.renderedCamera){var l=this.renderedCamera.getSurface(),f=l.videoWidth/l.clientWidth,m=l.videoHeight/l.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var p=this.qrRegion.width*f,x=this.qrRegion.height*m,S=this.qrRegion.x*f,N=this.qrRegion.y*m;this.context.drawImage(l,S,N,p,x,0,0,this.qrRegion.width,this.qrRegion.height);var j=function(){o.foreverScanTimeout=setTimeout(function(){o.foreverScan(t,n,i)},o.getTimeoutFps(t.fps))};this.scanContext(n,i).then(function(v){!v&&t.disableFlip!==!0?(o.context.translate(o.context.canvas.width,0),o.context.scale(-1,1),o.scanContext(n,i).finally(function(){j()})):j()}).catch(function(v){o.logger.logError("Error happend while scanning context",v),j()})}},e.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var n="facingMode",i="deviceId",o={user:!0,environment:!0},l="exact",f=function(O){if(O in o)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(O,"'")},m=Object.keys(t);if(m.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(m.length," keys");var p=Object.keys(t)[0];if(p!==n&&p!==i)throw"Only '".concat(n,"' and '").concat(i,"' ")+" are supported for 'cameraIdOrConfig'";if(p===n){var x=t.facingMode;if(typeof x=="string"){if(f(x))return{facingMode:x}}else if(typeof x=="object")if(l in x){if(f(x["".concat(l)]))return{facingMode:{exact:x["".concat(l)]}}}else throw"'facingMode' should be string or object with"+" ".concat(l," as key.");else{var S=typeof x;throw"Invalid type of 'facingMode' = ".concat(S)}}else{var N=t.deviceId;if(typeof N=="string")return{deviceId:N};if(typeof N=="object"){if(l in N)return{deviceId:{exact:N["".concat(l)]}};throw"'deviceId' should be string or object with"+" ".concat(l," as key.")}else{var j=typeof N;throw"Invalid type of 'deviceId' = ".concat(j)}}}var v=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(v)},e.prototype.computeCanvasDrawConfig=function(t,n,i,o){if(t<=i&&n<=o){var l=(i-t)/2,f=(o-n)/2;return{x:l,y:f,width:t,height:n}}else{var m=t,p=n;return t>i&&(n=i/t*n,t=i),n>o&&(t=o/n*t,n=o),this.logger.log("Image downsampled from "+"".concat(m,"X").concat(p)+" to ".concat(t,"X").concat(n,".")),this.computeCanvasDrawConfig(t,n,i,o)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},e.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=t?wa.BORDER_SHADER_MATCH_COLOR:wa.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(t,n,i){var o=t,l=n,f=document.createElement("canvas");return f.style.width="".concat(o,"px"),f.style.height="".concat(l,"px"),f.style.display="none",f.id=ys(i)?"qr-canvas":i,f},e.prototype.getShadedRegionBounds=function(t,n,i){if(i.width>t||i.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-i.width)/2,y:(n-i.height)/2,width:i.width,height:i.height}},e.prototype.possiblyInsertShadingElement=function(t,n,i,o){if(!(n-o.width<1||i-o.height<1)){var l=document.createElement("div");l.style.position="absolute";var f=(n-o.width)/2,m=(i-o.height)/2;if(l.style.borderLeft="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderRight="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderTop="".concat(m,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderBottom="".concat(m,"px solid rgba(0, 0, 0, 0.48)"),l.style.boxSizing="border-box",l.style.top="0px",l.style.bottom="0px",l.style.left="0px",l.style.right="0px",l.id="".concat(wa.SHADED_REGION_ELEMENT_ID),n-o.width<11||i-o.height<11)this.hasBorderShaders=!1;else{var p=5,x=40;this.insertShaderBorders(l,x,p,-p,null,0,!0),this.insertShaderBorders(l,x,p,-p,null,0,!1),this.insertShaderBorders(l,x,p,null,-p,0,!0),this.insertShaderBorders(l,x,p,null,-p,0,!1),this.insertShaderBorders(l,p,x+p,-p,null,-p,!0),this.insertShaderBorders(l,p,x+p,null,-p,-p,!0),this.insertShaderBorders(l,p,x+p,-p,null,-p,!1),this.insertShaderBorders(l,p,x+p,null,-p,-p,!1),this.hasBorderShaders=!0}t.append(l)}},e.prototype.insertShaderBorders=function(t,n,i,o,l,f,m){var p=document.createElement("div");p.style.position="absolute",p.style.backgroundColor=wa.BORDER_SHADER_DEFAULT_COLOR,p.style.width="".concat(n,"px"),p.style.height="".concat(i,"px"),o!==null&&(p.style.top="".concat(o,"px")),l!==null&&(p.style.bottom="".concat(l,"px")),m?p.style.left="".concat(f,"px"):p.style.right="".concat(f,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(p),t.appendChild(p)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(t){return 1e3/t},e}(),mm="data:image/svg+xml;base64,",A6=mm+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",S6=mm+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",Kp=mm+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",C6="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",Jp=function(){function e(){}return e.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},e}(),E6=function(){function e(){this.data=Jp.createDefault();var t=localStorage.getItem(e.LOCAL_STORAGE_KEY);t?this.data=JSON.parse(t):this.reset()}return e.prototype.hasCameraPermissions=function(){return this.data.hasPermission},e.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},e.prototype.setHasPermission=function(t){this.data.hasPermission=t,this.flush()},e.prototype.setLastUsedCameraId=function(t){this.data.lastUsedCameraId=t,this.flush()},e.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},e.prototype.reset=function(){this.data=Jp.createDefault(),this.flush()},e.prototype.flush=function(){localStorage.setItem(e.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},e.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",e}(),T6=function(){function e(){this.infoDiv=document.createElement("div")}return e.prototype.renderInto=function(t){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=Vp.poweredBy();var n=document.createElement("a");n.innerText="ScanApp",n.href="https://scanapp.org",n.target="new",n.style.color="white",this.infoDiv.appendChild(n);var i=document.createElement("br"),o=document.createElement("br");this.infoDiv.appendChild(i),this.infoDiv.appendChild(o);var l=document.createElement("a");l.innerText=Vp.reportIssues(),l.href="https://github.com/mebjas/html5-qrcode/issues",l.target="new",l.style.color="white",this.infoDiv.appendChild(l),t.appendChild(this.infoDiv)},e.prototype.show=function(){this.infoDiv.style.display="block"},e.prototype.hide=function(){this.infoDiv.style.display="none"},e}(),j6=function(){function e(t,n){this.isShowingInfoIcon=!0,this.onTapIn=t,this.onTapOut=n,this.infoIcon=document.createElement("img")}return e.prototype.renderInto=function(t){var n=this;this.infoIcon.alt="Info icon",this.infoIcon.src=Kp,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(i){return n.onHoverIn()},this.infoIcon.onmouseout=function(i){return n.onHoverOut()},this.infoIcon.onclick=function(i){return n.onClick()},t.appendChild(this.infoIcon)},e.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},e.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},e.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=C6,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=Kp,this.infoIcon.style.opacity="0.6")},e}(),_6=function(){function e(){var t=this;this.infoDiv=new T6,this.infoIcon=new j6(function(){t.infoDiv.show()},function(){t.infoDiv.hide()})}return e.prototype.renderInto=function(t){this.infoDiv.renderInto(t),this.infoIcon.renderInto(t)},e}(),I6=function(e,t,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function m(S){try{x(i.next(S))}catch(N){f(N)}}function p(S){try{x(i.throw(S))}catch(N){f(N)}}function x(S){S.done?l(S.value):o(S.value).then(m,p)}x((i=i.apply(e,t||[])).next())})},D6=function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,f;return f={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function m(x){return function(S){return p([x,S])}}function p(x){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,x[0]&&(n=0)),n;)try{if(i=1,o&&(l=x[0]&2?o.return:x[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,x[1])).done)return l;switch(o=0,l&&(x=[x[0]&2,l.value]),x[0]){case 0:case 1:l=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,o=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!l||x[1]>l[0]&&x[1]<l[3])){n.label=x[1];break}if(x[0]===6&&n.label<l[1]){n.label=l[1],l=x;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(x);break}l[2]&&n.ops.pop(),n.trys.pop();continue}x=t.call(e,n)}catch(S){x=[6,S],o=0}finally{i=l=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},$p=function(){function e(){}return e.hasPermissions=function(){return I6(this,void 0,void 0,function(){var t,n,i,o;return D6(this,function(l){switch(l.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(t=l.sent(),n=0,i=t;n<i.length;n++)if(o=i[n],o.kind==="videoinput"&&o.label)return[2,!0];return[2,!1]}})})},e}(),jo=function(){function e(t){this.supportedScanTypes=this.validateAndReturnScanTypes(t)}return e.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},e.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},e.prototype.isCameraScanRequired=function(){for(var t=0,n=this.supportedScanTypes;t<n.length;t++){var i=n[t];if(e.isCameraScanType(i))return!0}return!1},e.isCameraScanType=function(t){return t===il.SCAN_TYPE_CAMERA},e.isFileScanType=function(t){return t===il.SCAN_TYPE_FILE},e.prototype.validateAndReturnScanTypes=function(t){if(!t||t.length===0)return as.DEFAULT_SUPPORTED_SCAN_TYPE;var n=as.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(t.length>n)throw"Max ".concat(n," values expected for ")+"supportedScanTypes";for(var i=0,o=t;i<o.length;i++){var l=o[i];if(!as.DEFAULT_SUPPORTED_SCAN_TYPE.includes(l))throw"Unsupported scan type ".concat(l)}return t},e}(),Ca=function(){function e(){}return e.ALL_ELEMENT_CLASS="html5-qrcode-element",e.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",e.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",e.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",e.TORCH_BUTTON_ID="html5-qrcode-button-torch",e.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",e.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",e.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",e.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",e.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",e.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",e}(),Ks=function(){function e(){}return e.createElement=function(t,n){var i=document.createElement(t);return i.id=n,i.classList.add(Ca.ALL_ELEMENT_CLASS),t==="button"&&i.setAttribute("type","button"),i},e}(),Ry=function(e,t,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function m(S){try{x(i.next(S))}catch(N){f(N)}}function p(S){try{x(i.throw(S))}catch(N){f(N)}}function x(S){S.done?l(S.value):o(S.value).then(m,p)}x((i=i.apply(e,t||[])).next())})},ky=function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,f;return f={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function m(x){return function(S){return p([x,S])}}function p(x){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,x[0]&&(n=0)),n;)try{if(i=1,o&&(l=x[0]&2?o.return:x[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,x[1])).done)return l;switch(o=0,l&&(x=[x[0]&2,l.value]),x[0]){case 0:case 1:l=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,o=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!l||x[1]>l[0]&&x[1]<l[3])){n.label=x[1];break}if(x[0]===6&&n.label<l[1]){n.label=l[1],l=x;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(x);break}l[2]&&n.ops.pop(),n.trys.pop();continue}x=t.call(e,n)}catch(S){x=[6,S],o=0}finally{i=l=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},ex=function(){function e(t,n,i){this.isTorchOn=!1,this.torchCapability=t,this.buttonController=n,this.onTorchActionFailureCallback=i}return e.prototype.isTorchEnabled=function(){return this.isTorchOn},e.prototype.flipState=function(){return Ry(this,void 0,void 0,function(){var t,n;return ky(this,function(i){switch(i.label){case 0:this.buttonController.disable(),t=!this.isTorchOn,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.torchCapability.apply(t)];case 2:return i.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),t),[3,4];case 3:return n=i.sent(),this.propagateFailure(t,n),this.buttonController.enable(),[3,4];case 4:return[2]}})})},e.prototype.updateUiBasedOnLatestSettings=function(t,n){t===n?(this.buttonController.setText(n?zn.torchOffButton():zn.torchOnButton()),this.isTorchOn=n):this.propagateFailure(n),this.buttonController.enable()},e.prototype.propagateFailure=function(t,n){var i=t?zn.torchOnFailedMessage():zn.torchOffFailedMessage();n&&(i+="; Error = "+n),this.onTorchActionFailureCallback(i)},e.prototype.reset=function(){this.isTorchOn=!1},e}(),L6=function(){function e(t,n){this.onTorchActionFailureCallback=n,this.torchButton=Ks.createElement("button",Ca.TORCH_BUTTON_ID),this.torchController=new ex(t,this,n)}return e.prototype.render=function(t,n){var i=this;this.torchButton.innerText=zn.torchOnButton(),this.torchButton.style.display=n.display,this.torchButton.style.marginLeft=n.marginLeft;var o=this;this.torchButton.addEventListener("click",function(l){return Ry(i,void 0,void 0,function(){return ky(this,function(f){switch(f.label){case 0:return[4,o.torchController.flipState()];case 1:return f.sent(),o.torchController.isTorchEnabled()?(o.torchButton.classList.remove(Ca.TORCH_BUTTON_CLASS_TORCH_OFF),o.torchButton.classList.add(Ca.TORCH_BUTTON_CLASS_TORCH_ON)):(o.torchButton.classList.remove(Ca.TORCH_BUTTON_CLASS_TORCH_ON),o.torchButton.classList.add(Ca.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),t.appendChild(this.torchButton)},e.prototype.updateTorchCapability=function(t){this.torchController=new ex(t,this,this.onTorchActionFailureCallback)},e.prototype.getTorchButton=function(){return this.torchButton},e.prototype.hide=function(){this.torchButton.style.display="none"},e.prototype.show=function(){this.torchButton.style.display="inline-block"},e.prototype.disable=function(){this.torchButton.disabled=!0},e.prototype.enable=function(){this.torchButton.disabled=!1},e.prototype.setText=function(t){this.torchButton.innerText=t},e.prototype.reset=function(){this.torchButton.innerText=zn.torchOnButton(),this.torchController.reset()},e.create=function(t,n,i,o){var l=new e(n,o);return l.render(t,i),l},e}(),O6=function(){function e(t,n,i){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=n?"block":"none",t.appendChild(this.fileBasedScanRegion);var o=document.createElement("label");o.setAttribute("for",this.getFileScanInputId()),o.style.display="inline-block",this.fileBasedScanRegion.appendChild(o),this.fileSelectionButton=Ks.createElement("button",Ca.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(m){o.click()}),o.append(this.fileSelectionButton),this.fileScanInput=Ks.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",o.appendChild(this.fileScanInput);var l=this;this.fileScanInput.addEventListener("change",function(m){if(!(m==null||m.target==null)){var p=m.target;if(!(p.files&&p.files.length===0)){var x=p.files,S=x[0],N=S.name;l.setImageNameToButton(N),i(S)}}});var f=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(f),this.fileBasedScanRegion.addEventListener("dragenter",function(m){l.fileBasedScanRegion.style.border=l.fileBasedScanRegionActiveBorder(),m.stopPropagation(),m.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(m){l.fileBasedScanRegion.style.border=l.fileBasedScanRegionDefaultBorder(),m.stopPropagation(),m.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(m){l.fileBasedScanRegion.style.border=l.fileBasedScanRegionActiveBorder(),m.stopPropagation(),m.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(m){m.stopPropagation(),m.preventDefault(),l.fileBasedScanRegion.style.border=l.fileBasedScanRegionDefaultBorder();var p=m.dataTransfer;if(p){var x=p.files;if(!x||x.length===0)return;for(var S=!1,N=0;N<x.length;++N){var j=x.item(N);if(j){var v=/image.*/;if(j.type.match(v)){S=!0;var O=j.name;l.setImageNameToButton(O),i(j),f.innerText=zn.dragAndDropMessage();break}}}S||(f.innerText=zn.dragAndDropMessageOnlyImages())}})}return e.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},e.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},e.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},e.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},e.prototype.createFileBasedScanRegion=function(){var t=document.createElement("div");return t.style.textAlign="center",t.style.margin="auto",t.style.width="80%",t.style.maxWidth="600px",t.style.border=this.fileBasedScanRegionDefaultBorder(),t.style.padding="10px",t.style.marginBottom="10px",t},e.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},e.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},e.prototype.createDragAndDropMessage=function(){var t=document.createElement("div");return t.innerText=zn.dragAndDropMessage(),t.style.fontWeight="400",t},e.prototype.setImageNameToButton=function(t){var n=20;if(t.length>n){var i=t.substring(0,8),o=t.length,l=t.substring(o-8,o);t="".concat(i,"....").concat(l)}var f=zn.fileSelectionChooseAnother()+" - "+t;this.fileSelectionButton.innerText=f},e.prototype.setInitialValueToButton=function(){var t=zn.fileSelectionChooseImage()+" - "+zn.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=t},e.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},e.create=function(t,n,i){var o=new e(t,n,i);return o},e}(),M6=function(){function e(t){this.selectElement=Ks.createElement("select",Ca.CAMERA_SELECTION_SELECT_ID),this.cameras=t,this.options=[]}return e.prototype.render=function(t){var n=document.createElement("span");n.style.marginRight="10px";var i=this.cameras.length;if(i===0)throw new Error("No cameras found");if(i===1)n.style.display="none";else{var o=zn.selectCamera();n.innerText="".concat(o," (").concat(this.cameras.length,")  ")}for(var l=1,f=0,m=this.cameras;f<m.length;f++){var p=m[f],x=p.id,S=p.label==null?x:p.label;(!S||S==="")&&(S=[zn.anonymousCameraPrefix(),l++].join(" "));var N=document.createElement("option");N.value=x,N.innerText=S,this.options.push(N),this.selectElement.appendChild(N)}n.appendChild(this.selectElement),t.appendChild(n)},e.prototype.disable=function(){this.selectElement.disabled=!0},e.prototype.isDisabled=function(){return this.selectElement.disabled===!0},e.prototype.enable=function(){this.selectElement.disabled=!1},e.prototype.getValue=function(){return this.selectElement.value},e.prototype.hasValue=function(t){for(var n=0,i=this.options;n<i.length;n++){var o=i[n];if(o.value===t)return!0}return!1},e.prototype.setValue=function(t){if(!this.hasValue(t))throw new Error("".concat(t," is not present in the camera list."));this.selectElement.value=t},e.prototype.hasSingleItem=function(){return this.cameras.length===1},e.prototype.numCameras=function(){return this.cameras.length},e.create=function(t,n){var i=new e(n);return i.render(t),i},e}(),R6=function(){function e(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=Ks.createElement("input",Ca.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return e.prototype.render=function(t,n){this.zoomElementContainer.style.display=n?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",t.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var i=zn.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(i),this.rangeText.style.marginRight="10px";var o=this;this.rangeInput.addEventListener("input",function(){return o.onValueChange()}),this.rangeInput.addEventListener("change",function(){return o.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},e.prototype.onValueChange=function(){var t=zn.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(t),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},e.prototype.setValues=function(t,n,i,o){this.rangeInput.min=t.toString(),this.rangeInput.max=n.toString(),this.rangeInput.step=o.toString(),this.rangeInput.value=i.toString(),this.onValueChange()},e.prototype.show=function(){this.zoomElementContainer.style.display="block"},e.prototype.hide=function(){this.zoomElementContainer.style.display="none"},e.prototype.setOnCameraZoomValueChangeCallback=function(t){this.onChangeCallback=t},e.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},e.create=function(t,n){var i=new e;return i.render(t,n),i},e}(),Na;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Na||(Na={}));function k6(e){return{fps:e.fps,qrbox:e.qrbox,aspectRatio:e.aspectRatio,disableFlip:e.disableFlip,videoConstraints:e.videoConstraints}}function P6(e,t){return{formatsToSupport:e.formatsToSupport,useBarCodeDetectorIfSupported:e.useBarCodeDetectorIfSupported,experimentalFeatures:e.experimentalFeatures,verbose:t}}var F6=function(){function e(t,n,i){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=t,this.config=this.createConfig(n),this.verbose=i===!0,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.scanTypeSelector=new jo(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new Ly(this.verbose),this.persistedDataManager=new E6,n.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return e.prototype.render=function(t,n){var i=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(l,f){if(t)t(l,f);else{if(i.lastMatchFound===l)return;i.lastMatchFound=l,i.setHeaderMessage(zn.lastMatch(l),Na.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(l,f){n&&n(l,f)};var o=document.getElementById(this.elementId);if(!o)throw"HTML Element with id=".concat(this.elementId," not found");o.innerHTML="",this.createBasicLayout(o),this.html5Qrcode=new Qp(this.getScanRegionId(),P6(this.config,this.verbose))},e.prototype.pause=function(t){(ys(t)||t!==!0)&&(t=!1),this.getHtml5QrcodeOrFail().pause(t)},e.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},e.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},e.prototype.clear=function(){var t=this,n=function(){var i=document.getElementById(t.elementId);i&&(i.innerHTML="",t.resetBasicLayout(i))};return this.html5Qrcode?new Promise(function(i,o){if(!t.html5Qrcode){i();return}t.html5Qrcode.isScanning?t.html5Qrcode.stop().then(function(l){if(!t.html5Qrcode){i();return}t.html5Qrcode.clear(),n(),i()}).catch(function(l){t.verbose&&t.logger.logError("Unable to stop qrcode scanner",l),o(l)}):(t.html5Qrcode.clear(),n(),i())}):Promise.resolve()},e.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},e.prototype.applyVideoConstraints=function(t){return this.getHtml5QrcodeOrFail().applyVideoConstraints(t)},e.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},e.prototype.createConfig=function(t){return t?(t.fps||(t.fps=as.SCAN_DEFAULT_FPS),t.rememberLastUsedCamera!==!as.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(t.rememberLastUsedCamera=as.DEFAULT_REMEMBER_LAST_CAMERA_USED),t.supportedScanTypes||(t.supportedScanTypes=as.DEFAULT_SUPPORTED_SCAN_TYPE),t):{fps:as.SCAN_DEFAULT_FPS,rememberLastUsedCamera:as.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:as.DEFAULT_SUPPORTED_SCAN_TYPE}},e.prototype.createBasicLayout=function(t){t.style.position="relative",t.style.padding="0px",t.style.border="1px solid silver",this.createHeader(t);var n=document.createElement("div"),i=this.getScanRegionId();n.id=i,n.style.width="100%",n.style.minHeight="100px",n.style.textAlign="center",t.appendChild(n),jo.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var o=document.createElement("div"),l=this.getDashboardId();o.id=l,o.style.width="100%",t.appendChild(o),this.setupInitialDashboard(o)},e.prototype.resetBasicLayout=function(t){t.style.border="none"},e.prototype.setupInitialDashboard=function(t){this.createSection(t),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},e.prototype.createHeader=function(t){var n=document.createElement("div");n.style.textAlign="left",n.style.margin="0px",t.appendChild(n);var i=new _6;i.renderInto(n);var o=document.createElement("div");o.id=this.getHeaderMessageContainerId(),o.style.display="none",o.style.textAlign="center",o.style.fontSize="14px",o.style.padding="2px 10px",o.style.margin="4px",o.style.borderTop="1px solid #f6f6f6",n.appendChild(o)},e.prototype.createSection=function(t){var n=document.createElement("div");n.id=this.getDashboardSectionId(),n.style.width="100%",n.style.padding="10px 0px 10px 0px",n.style.textAlign="left",t.appendChild(n)},e.prototype.createCameraListUi=function(t,n,i){var o=this;o.showHideScanTypeSwapLink(!1),o.setHeaderMessage(zn.cameraPermissionRequesting());var l=function(){i||o.createPermissionButton(t,n)};Qp.getCameras().then(function(f){o.persistedDataManager.setHasPermission(!0),o.showHideScanTypeSwapLink(!0),o.resetHeaderMessage(),f&&f.length>0?(t.removeChild(n),o.renderCameraSelection(f)):(o.setHeaderMessage(zn.noCameraFound(),Na.STATUS_WARNING),l())}).catch(function(f){o.persistedDataManager.setHasPermission(!1),i?i.disabled=!1:l(),o.setHeaderMessage(f,Na.STATUS_WARNING),o.showHideScanTypeSwapLink(!0)})},e.prototype.createPermissionButton=function(t,n){var i=this,o=Ks.createElement("button",this.getCameraPermissionButtonId());o.innerText=zn.cameraPermissionTitle(),o.addEventListener("click",function(){o.disabled=!0,i.createCameraListUi(t,n,o)}),n.appendChild(o)},e.prototype.createPermissionsUi=function(t,n){var i=this;if(jo.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){$p.hasPermissions().then(function(o){o?i.createCameraListUi(t,n):(i.persistedDataManager.setHasPermission(!1),i.createPermissionButton(t,n))}).catch(function(o){i.persistedDataManager.setHasPermission(!1),i.createPermissionButton(t,n)});return}this.createPermissionButton(t,n)},e.prototype.createSectionControlPanel=function(){var t=document.getElementById(this.getDashboardSectionId()),n=document.createElement("div");t.appendChild(n);var i=document.createElement("div");i.id=this.getDashboardSectionCameraScanRegionId(),i.style.display=jo.isCameraScanType(this.currentScanType)?"block":"none",n.appendChild(i);var o=document.createElement("div");o.style.textAlign="center",i.appendChild(o),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(i,o),this.renderFileScanUi(n)},e.prototype.renderFileScanUi=function(t){var n=jo.isFileScanType(this.currentScanType),i=this,o=function(l){if(!i.html5Qrcode)throw"html5Qrcode not defined";jo.isFileScanType(i.currentScanType)&&(i.setHeaderMessage(zn.loadingImage()),i.html5Qrcode.scanFileV2(l,!0).then(function(f){i.resetHeaderMessage(),i.qrCodeSuccessCallback(f.decodedText,f)}).catch(function(f){i.setHeaderMessage(f,Na.STATUS_WARNING),i.qrCodeErrorCallback(f,Dy.createFrom(f))}))};this.fileSelectionUi=O6.create(t,n,o)},e.prototype.renderCameraSelection=function(t){var n=this,i=this,o=document.getElementById(this.getDashboardSectionCameraScanRegionId());o.style.textAlign="center";var l=R6.create(o,!1),f=function(E){var P=E.zoomFeature();if(P.isSupported()){l.setOnCameraZoomValueChangeCallback(function(_){P.apply(_)});var C=1;n.config.defaultZoomValueIfSupported&&(C=n.config.defaultZoomValueIfSupported),C=n6(C,P.min(),P.max()),l.setValues(P.min(),P.max(),C,P.step()),l.show()}},m=M6.create(o,t),p=document.createElement("span"),x=Ks.createElement("button",Ca.CAMERA_START_BUTTON_ID);x.innerText=zn.scanButtonStartScanningText(),p.appendChild(x);var S=Ks.createElement("button",Ca.CAMERA_STOP_BUTTON_ID);S.innerText=zn.scanButtonStopScanningText(),S.style.display="none",S.disabled=!0,p.appendChild(S);var N,j=function(E){if(!E.torchFeature().isSupported()){N&&N.hide();return}N?N.updateTorchCapability(E.torchFeature()):N=L6.create(p,E.torchFeature(),{display:"none",marginLeft:"5px"},function(P){i.setHeaderMessage(P,Na.STATUS_WARNING)}),N.show()};o.appendChild(p);var v=function(E){E||(x.style.display="none"),x.innerText=zn.scanButtonStartScanningText(),x.style.opacity="1",x.disabled=!1,E&&(x.style.display="inline-block")};if(x.addEventListener("click",function(E){x.innerText=zn.scanButtonScanningStarting(),m.disable(),x.disabled=!0,x.style.opacity="0.5",n.scanTypeSelector.hasMoreThanOneScanType()&&i.showHideScanTypeSwapLink(!1),i.resetHeaderMessage();var P=m.getValue();i.persistedDataManager.setLastUsedCameraId(P),i.html5Qrcode.start(P,k6(i.config),i.qrCodeSuccessCallback,i.qrCodeErrorCallback).then(function(C){S.disabled=!1,S.style.display="inline-block",v(!1);var _=i.html5Qrcode.getRunningTrackCameraCapabilities();n.config.showTorchButtonIfSupported===!0&&j(_),n.config.showZoomSliderIfSupported===!0&&f(_)}).catch(function(C){i.showHideScanTypeSwapLink(!0),m.enable(),v(!0),i.setHeaderMessage(C,Na.STATUS_WARNING)})}),m.hasSingleItem()&&x.click(),S.addEventListener("click",function(E){if(!i.html5Qrcode)throw"html5Qrcode not defined";S.disabled=!0,i.html5Qrcode.stop().then(function(P){n.scanTypeSelector.hasMoreThanOneScanType()&&i.showHideScanTypeSwapLink(!0),m.enable(),x.disabled=!1,S.style.display="none",x.style.display="inline-block",N&&(N.reset(),N.hide()),l.removeOnCameraZoomValueChangeCallback(),l.hide(),i.insertCameraScanImageToScanRegion()}).catch(function(P){S.disabled=!1,i.setHeaderMessage(P,Na.STATUS_WARNING)})}),i.persistedDataManager.getLastUsedCameraId()){var O=i.persistedDataManager.getLastUsedCameraId();m.hasValue(O)?(m.setValue(O),x.click()):i.persistedDataManager.resetLastUsedCameraId()}},e.prototype.createSectionSwap=function(){var t=this,n=zn.textIfCameraScanSelected(),i=zn.textIfFileScanSelected(),o=document.getElementById(this.getDashboardSectionId()),l=document.createElement("div");l.style.textAlign="center";var f=Ks.createElement("span",this.getDashboardSectionSwapLinkId());f.style.textDecoration="underline",f.style.cursor="pointer",f.innerText=jo.isCameraScanType(this.currentScanType)?n:i,f.addEventListener("click",function(){if(!t.sectionSwapAllowed){t.verbose&&t.logger.logError("Section swap called when not allowed");return}t.resetHeaderMessage(),t.fileSelectionUi.resetValue(),t.sectionSwapAllowed=!1,jo.isCameraScanType(t.currentScanType)?(t.clearScanRegion(),t.getCameraScanRegion().style.display="none",t.fileSelectionUi.show(),f.innerText=i,t.currentScanType=il.SCAN_TYPE_FILE,t.insertFileScanImageToScanRegion()):(t.clearScanRegion(),t.getCameraScanRegion().style.display="block",t.fileSelectionUi.hide(),f.innerText=n,t.currentScanType=il.SCAN_TYPE_CAMERA,t.insertCameraScanImageToScanRegion(),t.startCameraScanIfPermissionExistsOnSwap()),t.sectionSwapAllowed=!0}),l.appendChild(f),o.appendChild(l)},e.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var t=this,n=this;if(this.persistedDataManager.hasCameraPermissions()){$p.hasPermissions().then(function(i){if(i){var o=document.getElementById(n.getCameraPermissionButtonId());if(!o)throw t.logger.logError("Permission button not found, fail;"),"Permission button not found";o.click()}else n.persistedDataManager.setHasPermission(!1)}).catch(function(i){n.persistedDataManager.setHasPermission(!1)});return}},e.prototype.resetHeaderMessage=function(){var t=document.getElementById(this.getHeaderMessageContainerId());t.style.display="none"},e.prototype.setHeaderMessage=function(t,n){n||(n=Na.STATUS_DEFAULT);var i=this.getHeaderMessageDiv();switch(i.innerText=t,i.style.display="block",n){case Na.STATUS_SUCCESS:i.style.background="rgba(106, 175, 80, 0.26)",i.style.color="#477735";break;case Na.STATUS_WARNING:i.style.background="rgba(203, 36, 49, 0.14)",i.style.color="#cb2431";break;case Na.STATUS_DEFAULT:default:i.style.background="rgba(0, 0, 0, 0)",i.style.color="rgb(17, 17, 17)";break}},e.prototype.showHideScanTypeSwapLink=function(t){this.scanTypeSelector.hasMoreThanOneScanType()&&(t!==!0&&(t=!1),this.sectionSwapAllowed=t,this.getDashboardSectionSwapLink().style.display=t?"inline-block":"none")},e.prototype.insertCameraScanImageToScanRegion=function(){var t=this,n=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){n.innerHTML="<br>",n.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(i){n.innerHTML="<br>",n.appendChild(t.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=A6,this.cameraScanImage.alt=zn.cameraScanAltText()},e.prototype.insertFileScanImageToScanRegion=function(){var t=this,n=document.getElementById(this.getScanRegionId());if(this.fileScanImage){n.innerHTML="<br>",n.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(i){n.innerHTML="<br>",n.appendChild(t.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=S6,this.fileScanImage.alt=zn.fileScanAltText()},e.prototype.clearScanRegion=function(){var t=document.getElementById(this.getScanRegionId());t.innerHTML=""},e.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},e.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},e.prototype.getDashboardSectionSwapLinkId=function(){return Ca.SCAN_TYPE_CHANGE_ANCHOR_ID},e.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},e.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},e.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},e.prototype.getCameraPermissionButtonId=function(){return Ca.CAMERA_PERMISSION_BUTTON_ID},e.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},e.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},e.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},e}();const B6=({onScanSuccess:e})=>(pe.useEffect(()=>{const t=new F6("reader",{fps:10,qrbox:{width:250,height:250}},!1),n=o=>{t.clear(),e(o)},i=o=>{};return t.render(n,i),()=>{t&&t.getState()!==Tr.NOT_STARTED&&t.clear().catch(o=>{console.error("Failed to clear html5-qrcode-scanner.",o)})}},[e]),s.jsx("div",{id:"reader",className:"w-full"})),U6=({setActiveView:e})=>{const{currentUser:t,shipments:n,users:i,updateShipmentStatus:o,addToast:l,sendDeliveryVerificationCode:f,verifyDelivery:m}=jn(),[p,x]=pe.useState(!1),[S,N]=pe.useState(null),[j,v]=pe.useState(!1),[O,E]=pe.useState(null),[P,C]=pe.useState("Recipient Unreachable"),[_,D]=pe.useState(null),U=pe.useRef({}),[Y,ae]=pe.useState(null),[F,L]=pe.useState("send"),[M,z]=pe.useState(""),[k,R]=pe.useState(!1),[re,ee]=pe.useState(""),[ne,K]=pe.useState("all"),[G,te]=pe.useState(""),W=pe.useMemo(()=>i.filter(qe=>(qe.roles||[]).includes(Vt.CLIENT)),[i]),[fe,le]=pe.useState(!1),[B,q]=pe.useState(null),Q=pe.useRef(null),he=pe.useRef(null);if(!t)return null;const ue=pe.useMemo(()=>{let qe=n.filter(ct=>ct.courierId===t.id&&![ht.DELIVERED,ht.DELIVERY_FAILED].includes(ct.status));if(re){const ct=re.toLowerCase();qe=qe.filter(St=>St.id.toLowerCase().includes(ct)||St.recipientName.toLowerCase().includes(ct)||St.toAddress.street.toLowerCase().includes(ct)||St.toAddress.zone.toLowerCase().includes(ct))}return ne!=="all"&&(qe=qe.filter(ct=>ct.clientId===ne)),G&&(qe=qe.filter(ct=>ct.creationDate.startsWith(G))),qe},[n,t.id,re,ne,G]),je=ue.filter(qe=>qe.paymentMethod===Mn.COD).reduce((qe,ct)=>qe+ct.price,0),Ae=n.filter(qe=>qe.courierId===t.id&&qe.status===ht.DELIVERED),ve=Ae.filter(qe=>qe.paymentMethod===Mn.COD).reduce((qe,ct)=>qe+ct.price,0),Pe=ue.length,Te=(qe,ct)=>{o(qe,ct)},Ye=pe.useCallback(()=>{B&&B.getTracks().forEach(qe=>qe.stop()),q(null),le(!1)},[B]),He=async()=>{Ye();try{const qe=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});Q.current&&(Q.current.srcObject=qe),q(qe),le(!0)}catch(qe){console.error("Error accessing camera:",qe),l("Could not access camera. Please check permissions.","error")}},ut=()=>{if(Q.current&&he.current){const qe=Q.current,ct=he.current;ct.width=qe.videoWidth,ct.height=qe.videoHeight;const St=ct.getContext("2d");if(St){St.drawImage(qe,0,0,ct.width,ct.height);const Ot=ct.toDataURL("image/jpeg",.9);D(Ot),Ye()}}},Me=()=>{D(null),He()};pe.useEffect(()=>{j||Ye()},[j,Ye]);const me=qe=>{E(qe),C("Recipient Unreachable"),D(null),v(!0)},st=()=>{O&&P&&(o(O.id,ht.DELIVERY_FAILED,{failureReason:P,failurePhoto:_}),v(!1),E(null))},Fe=qe=>{ae(qe),L("send"),z(""),R(!1)},we=()=>{ae(null)},Xe=async()=>{if(!Y)return;R(!0),await f(Y.id)&&L("verify"),R(!1)},Re=async()=>{if(!Y||M.length!==6)return;R(!0),await m(Y.id,M)&&we(),R(!1)},Qe=pe.useCallback(qe=>{if(x(!1),ue.find(St=>St.id===qe)){l(`Scanned: ${qe}. Task is ready.`,"success");const St=U.current[qe];St&&(St.scrollIntoView({behavior:"smooth",block:"center"}),N(qe),setTimeout(()=>N(null),3e3))}else l(`Scanned code ${qe} not found in your current tasks.`,"error")},[ue,l]),gt={[ht.ASSIGNED_TO_COURIER]:{label:"Start Delivery",nextStatus:ht.OUT_FOR_DELIVERY},[ht.OUT_FOR_DELIVERY]:null},pt=({task:qe})=>s.jsxs("div",{className:"card p-5 flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-mono text-sm text-muted-foreground",children:qe.id}),s.jsxs("p",{className:"text-lg font-bold text-foreground",children:["Deliver to: ",qe.recipientName]}),s.jsxs("p",{className:"text-muted-foreground",children:[qe.toAddress.street,", ",qe.toAddress.zone]}),s.jsxs("p",{className:"text-sm font-semibold text-foreground mt-1",children:["Payment: ",qe.paymentMethod," (",qe.price>0?`${qe.price.toFixed(2)} EGP`:"Pre-Paid",")"]})]}),s.jsxs("div",{className:"flex flex-col md:flex-row items-stretch md:items-center gap-3 w-full md:w-auto",children:[s.jsx("div",{className:"flex-grow",children:s.jsx(Bh,{status:qe.status})}),s.jsxs(s.Fragment,{children:[gt[qe.status]&&s.jsx("button",{onClick:()=>Te(qe.id,gt[qe.status].nextStatus),className:"px-4 py-2 bg-primary text-primary-foreground font-semibold rounded-lg hover:bg-primary/90 transition w-full md:w-auto",children:gt[qe.status].label}),qe.status===ht.OUT_FOR_DELIVERY&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>Fe(qe),className:"px-4 py-2 bg-green-500 text-white font-semibold rounded-lg hover:bg-green-600 transition w-full md:w-auto",children:"Verify & Deliver"}),s.jsx("button",{onClick:()=>me(qe),className:"px-4 py-2 bg-red-500 text-white font-semibold rounded-lg hover:bg-red-600 transition w-full md:w-auto",children:"Delivery Failed"})]})]})]})]});return s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"My Delivery Tasks"}),s.jsxs("button",{onClick:()=>x(!0),className:"flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground font-semibold rounded-lg hover:bg-primary/90 transition",children:[s.jsx(Mw,{className:"w-5 h-5"}),"Scan Package"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(kt,{title:"Cash to Collect",value:`${je.toFixed(2)} EGP`,icon:s.jsx(oa,{className:"w-7 h-7"}),color:"#f97316",subtitle:`${ue.filter(qe=>qe.paymentMethod===Mn.COD).length} COD packages`}),s.jsx(kt,{title:"Total COD Collected",value:`${ve.toFixed(2)} EGP`,icon:s.jsx(fh,{className:"w-7 h-7"}),color:"#16a34a",subtitle:`From ${Ae.filter(qe=>qe.paymentMethod===Mn.COD).length} completed deliveries`,onClick:()=>e("completed-orders")}),s.jsx(kt,{title:"Pending Deliveries",value:Pe,icon:s.jsx(sa,{className:"w-7 h-7"}),color:"#3b82f6",subtitle:"Currently assigned"}),s.jsx(kt,{title:"Total Deliveries",value:Ae.length,icon:s.jsx(ao,{className:"w-7 h-7"}),color:"#8b5cf6",subtitle:"All time completed",onClick:()=>e("completed-orders")})]}),s.jsxs("div",{className:"card p-4 flex flex-col md:flex-row gap-4 flex-wrap",children:[s.jsx("input",{type:"text",placeholder:"Search by ID, recipient, address...",value:re,onChange:qe=>ee(qe.target.value),className:"flex-grow px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background"}),s.jsxs("select",{value:ne,onChange:qe=>K(qe.target.value==="all"?"all":Number(qe.target.value)),className:"w-full md:w-auto px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background",children:[s.jsx("option",{value:"all",children:"Filter by Client"}),W.map(qe=>s.jsx("option",{value:qe.id,children:qe.name},qe.id))]}),s.jsx("input",{type:"date",value:G,onChange:qe=>te(qe.target.value),className:"w-full md:w-auto px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary","aria-label":"Filter by creation date"})]}),s.jsxs("div",{className:"space-y-4",children:[ue.length===0&&s.jsx("p",{className:"text-muted-foreground card p-4",children:"You have no active tasks matching the current filters."}),ue.map(qe=>s.jsx("div",{ref:ct=>{U.current[qe.id]=ct},className:`rounded-xl transition-all duration-500 ${S===qe.id?"ring-4 ring-primary ring-offset-2":""}`,children:s.jsx(pt,{task:qe})},qe.id))]}),s.jsx(fr,{isOpen:p,onClose:()=>x(!1),title:"Scan Package Barcode",children:s.jsx("div",{className:"w-full h-96 flex justify-center items-center",children:p&&s.jsx(B6,{onScanSuccess:Qe})})}),s.jsx(fr,{isOpen:j,onClose:()=>v(!1),title:"Delivery Failed - Please Provide Reason",children:O&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-secondary p-4 rounded-lg",children:[s.jsxs("p",{className:"font-semibold text-foreground",children:["Shipment: ",O.id]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["To: ",O.recipientName]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[O.toAddress.street,", ",O.toAddress.zone]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Reason for delivery failure *"}),s.jsxs("select",{value:P,onChange:qe=>C(qe.target.value),className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background",children:[s.jsx("option",{value:"Recipient Unreachable",children:"Recipient Unreachable"}),s.jsx("option",{value:"Cancelled by Client",children:"Cancelled by Client"}),s.jsx("option",{value:"Order Lost",children:"Order Lost"}),s.jsx("option",{value:"Damaged Package",children:"Damaged Package"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Evidence Photo (Optional)"}),s.jsxs("div",{className:"w-full p-4 bg-secondary rounded-lg",children:[!fe&&!_&&s.jsxs("button",{type:"button",onClick:He,className:"w-full flex flex-col items-center justify-center p-6 border-2 border-dashed border-border rounded-lg text-muted-foreground hover:bg-accent hover:border-primary transition",children:[s.jsx(kw,{className:"w-10 h-10 mb-2"}),s.jsx("span",{className:"font-semibold",children:"Take Photo"})]}),fe&&s.jsxs("div",{className:"space-y-3",children:[s.jsx("video",{ref:Q,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full rounded-lg bg-slate-900 aspect-video object-cover"}),s.jsx("canvas",{ref:he,className:"hidden"}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{type:"button",onClick:ut,className:"flex-1 px-4 py-2 bg-primary text-primary-foreground font-semibold rounded-lg hover:bg-primary/90",children:"Capture"}),s.jsx("button",{type:"button",onClick:Ye,className:"px-4 py-2 bg-secondary text-secondary-foreground font-semibold rounded-lg hover:bg-accent",children:"Cancel"})]})]}),!fe&&_&&s.jsxs("div",{className:"space-y-3 text-center",children:[s.jsx("img",{src:_,alt:"Failure preview",className:"rounded-lg max-h-64 mx-auto"}),s.jsx("button",{type:"button",onClick:Me,className:"px-4 py-2 bg-foreground text-background font-semibold rounded-lg hover:bg-foreground/90",children:"Retake Photo"})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx("button",{onClick:()=>v(!1),className:"px-4 py-2 bg-secondary text-secondary-foreground rounded-lg hover:bg-accent",children:"Cancel"}),s.jsx("button",{onClick:st,disabled:!P,className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 disabled:bg-muted disabled:cursor-not-allowed",children:"Mark as Failed"})]})]})}),s.jsx(fr,{isOpen:!!Y,onClose:we,title:"Confirm Delivery with Recipient",children:Y&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-secondary p-4 rounded-lg",children:[s.jsxs("p",{className:"font-semibold text-foreground",children:["Shipment: ",Y.id]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Recipient: ",Y.recipientName]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Phone: ",Y.recipientPhone]})]}),F==="send"?s.jsxs("div",{children:[s.jsx("p",{className:"mb-4",children:"Click below to send a 6-digit verification code to the recipient's phone number."}),s.jsx("button",{onClick:Xe,disabled:k,className:"w-full px-4 py-2 bg-primary text-primary-foreground font-semibold rounded-lg hover:bg-primary/90 disabled:bg-muted",children:k?"Sending...":"Send Code to Recipient"})]}):s.jsxs("div",{children:[s.jsx("p",{className:"mb-2",children:"Enter the 6-digit code received by the recipient."}),s.jsx("input",{type:"text",value:M,onChange:qe=>z(qe.target.value),maxLength:6,placeholder:"123456",className:"w-full text-center tracking-[1em] font-mono text-2xl px-4 py-2 border border-border rounded-lg bg-background"}),s.jsx("button",{onClick:Re,disabled:k||M.length!==6,className:"w-full mt-4 px-4 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 disabled:bg-muted",children:k?"Verifying...":"Confirm Delivery"})]})]})})]})},z6=()=>{const{users:e,addUser:t,updateUser:n,removeUser:i,resetPassword:o,currentUser:l,hasPermission:f,updateClientTaxCard:m,getTaxCardNumber:p,addToast:x,customRoles:S,updateClientTier:N}=jn(),[j,v]=pe.useState(null),[O,E]=pe.useState(null),[P,C]=pe.useState({}),[_,D]=pe.useState(""),[U,Y]=pe.useState({[nn.STANDARD]:100,[nn.URGENT]:150,[nn.EXPRESS]:200}),[ae,F]=pe.useState(null),[L,M]=pe.useState(""),[z,k]=pe.useState("all"),R=pe.useMemo(()=>e.filter(ve=>{const Pe=L.trim()===""||ve.name.toLowerCase().includes(L.toLowerCase())||ve.email.toLowerCase().includes(L.toLowerCase())||ve.publicId.toLowerCase().includes(L.toLowerCase()),Te=z==="all"||(ve.roles||[]).some(Ye=>Ye===z);return Pe&&Te}),[e,L,z]);if(!l||!f(Ut.MANAGE_USERS))return s.jsx("div",{className:"flex items-center justify-center h-96",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:"Access Denied"}),s.jsx("p",{className:"text-muted-foreground",children:"You do not have permission to manage users."})]})});const re=()=>{var ve,Pe;return(ve=l==null?void 0:l.roles)!=null&&ve.includes(Vt.ADMIN)?S:(Pe=l==null?void 0:l.roles)!=null&&Pe.includes(Vt.SUPER_USER)?S.filter(Te=>Te.name!==Vt.ADMIN):[]},ee=ve=>ve==="Cairo"?Zr.GreaterCairo.Cairo:ve==="Giza"?Zr.GreaterCairo.Giza:ve==="Alexandria"?Zr.Alexandria:ve==="Other"?Zr.Other:[],ne=re(),K=(ve,Pe)=>{var Me,me,st,Fe;if((ve==="taxCard"||ve==="priorityPricing"||ve==="tier"||ve==="address")&&!((Me=l==null?void 0:l.roles)!=null&&Me.includes(Vt.ADMIN))&&!((me=l==null?void 0:l.roles)!=null&&me.includes(Vt.SUPER_USER))){x("Only administrators and super users can manage client settings","error");return}const Te=(st=Pe==null?void 0:Pe.roles)==null?void 0:st.includes(Vt.ADMIN),Ye=(Fe=l==null?void 0:l.roles)==null?void 0:Fe.includes(Vt.SUPER_USER);if((ve==="edit"||ve==="delete"||ve==="reset")&&Te&&Ye){x("Super users cannot modify administrator accounts","error");return}v(ve),E(Pe||null);const He=S.find(we=>we.name===Vt.CLIENT),ut={street:"",city:"Cairo",zone:Zr.GreaterCairo.Cairo[0],details:""};if(C(Pe?{...Pe,address:Pe.address||ut}:{roles:He?[He.name]:[],zones:[],flatRateFee:75,address:ut,priorityMultipliers:{[nn.STANDARD]:1,[nn.URGENT]:1.5,[nn.EXPRESS]:2}}),ve==="taxCard"&&Pe&&D(p(Pe.id)||""),ve==="priorityPricing"&&Pe){const we=Pe.priorityMultipliers||{[nn.STANDARD]:1,[nn.URGENT]:1.5,[nn.EXPRESS]:2};Y({[nn.STANDARD]:we[nn.STANDARD]*100,[nn.URGENT]:we[nn.URGENT]*100,[nn.EXPRESS]:we[nn.EXPRESS]*100})}ve==="tier"&&Pe&&F(Pe.partnerTier||null)},G=()=>{v(null),E(null),C({})},te=ve=>{const{name:Pe,value:Te}=ve.target;C(Ye=>({...Ye,[Pe]:Te}))},W=ve=>{const{name:Pe,value:Te}=ve.target;C(Ye=>{const ut={...Ye.address||{street:"",city:"Cairo",zone:"",details:""},[Pe]:Te};if(Pe==="city"){const Me=ee(Te);ut.zone=Me[0]||""}return{...Ye,address:ut}})},fe=(ve,Pe)=>{C(Te=>{const Ye=Te.roles||[];return Pe?{...Te,roles:[...Ye,ve]}:{...Te,roles:Ye.filter(He=>He!==ve)}})},le=(ve,Pe)=>{C(Te=>{const Ye=Te.zones||[];return Pe?{...Te,zones:[...Ye,ve]}:{...Te,zones:Ye.filter(He=>He!==ve)}})},B=ve=>{if(ve.preventDefault(),j==="add")t(P);else if(j==="edit"&&O)n(O.id,P);else if(j==="address"&&O)n(O.id,{address:P.address});else if(j==="reset"&&O&&P.password)o(O.id,P.password);else if(j==="taxCard"&&O){Q();return}else if(j==="priorityPricing"&&O){he();return}else if(j==="tier"&&O){q();return}G()},q=()=>{O&&(N(O.id,ae),x(`Tier updated for ${O.name}`,"success"),G())},Q=()=>{var Pe,Te;if(!O)return;if(!((Pe=l==null?void 0:l.roles)!=null&&Pe.includes(Vt.ADMIN))&&!((Te=l==null?void 0:l.roles)!=null&&Te.includes(Vt.SUPER_USER))){x("Only administrators and super users can manage tax card numbers","error"),G();return}if(_&&!/^\d{3}-\d{3}-\d{3}$/.test(_)){x("Tax card number must be in format XXX-XXX-XXX","error");return}m(O.id,_),x(`Tax card number updated for ${O.name}`,"success"),G()},he=()=>{var Pe,Te;if(!O)return;if(!((Pe=l==null?void 0:l.roles)!=null&&Pe.includes(Vt.ADMIN))&&!((Te=l==null?void 0:l.roles)!=null&&Te.includes(Vt.SUPER_USER))){x("Only administrators and super users can manage priority pricing","error"),G();return}const ve={[nn.STANDARD]:U[nn.STANDARD]/100,[nn.URGENT]:U[nn.URGENT]/100,[nn.EXPRESS]:U[nn.EXPRESS]/100};if(ve[nn.STANDARD]<=0||ve[nn.URGENT]<=0||ve[nn.EXPRESS]<=0){x("All priority percentages must be positive numbers","error");return}n(O.id,{priorityMultipliers:ve}),x(`Priority pricing updated for ${O.name}`,"success"),G()},ue=()=>{O&&i(O.id),G()},je=()=>{const ve=["Public ID","Name","Email","Roles","Zones","Wallet Balance (EGP)"],Pe=R.map(Te=>{var Ye;return[Te.publicId,Te.name,Te.email,(Te.roles||[]).join(", "),((Ye=Te.zones)==null?void 0:Ye.join(", "))||"N/A",Te.walletBalance!=null?Te.walletBalance.toFixed(2):"N/A"]});Fi(ve,Pe,"User_List_Export")},Ae=()=>{var ve,Pe,Te,Ye,He,ut,Me;if(j==="delete"&&O)return s.jsxs("div",{children:[s.jsxs("p",{children:["Are you sure you want to delete the user ",s.jsx("strong",{children:O.name}),"? This action cannot be undone."]}),s.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[s.jsx("button",{onClick:G,className:"px-4 py-2 bg-secondary rounded-lg font-semibold",children:"Cancel"}),s.jsx("button",{onClick:ue,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-semibold",children:"Delete User"})]})]});if(j==="reset"&&O)return s.jsxs("form",{onSubmit:B,className:"space-y-4",children:[s.jsxs("p",{children:["Resetting password for ",s.jsx("strong",{children:O.name}),"."]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"New Password"}),s.jsx("input",{type:"password",name:"password",onChange:te,className:"w-full px-4 py-2 border border-border rounded-lg bg-background",required:!0})]}),s.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[s.jsx("button",{type:"button",onClick:G,className:"px-4 py-2 bg-secondary rounded-lg font-semibold",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg font-semibold",children:"Reset Password"})]})]});if(j==="address"&&O){const me=ee(((ve=P.address)==null?void 0:ve.city)||"Cairo");return s.jsxs("form",{onSubmit:B,className:"space-y-4",children:[s.jsxs("p",{children:["Editing default pickup address for ",s.jsx("strong",{children:O.name}),"."]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Street Address"}),s.jsx("input",{type:"text",name:"street",value:((Pe=P.address)==null?void 0:Pe.street)||"",onChange:W,className:"w-full p-2 border border-border rounded bg-background"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"City"}),s.jsxs("select",{name:"city",value:((Te=P.address)==null?void 0:Te.city)||"Cairo",onChange:W,className:"w-full p-2 border border-border rounded bg-background",children:[s.jsx("option",{value:"Cairo",children:"Cairo"}),s.jsx("option",{value:"Giza",children:"Giza"}),s.jsx("option",{value:"Alexandria",children:"Alexandria"}),s.jsx("option",{value:"Other",children:"Other"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Zone"}),s.jsx("select",{name:"zone",value:((Ye=P.address)==null?void 0:Ye.zone)||"",onChange:W,className:"w-full p-2 border border-border rounded bg-background",children:me.map(st=>s.jsx("option",{value:st,children:st},st))})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Address Details (Apt, Floor)"}),s.jsx("input",{type:"text",name:"details",value:((He=P.address)==null?void 0:He.details)||"",onChange:W,className:"w-full p-2 border border-border rounded bg-background"})]}),s.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[s.jsx("button",{type:"button",onClick:G,className:"px-4 py-2 bg-secondary rounded-lg font-semibold",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg font-semibold",children:"Save Address"})]})]})}if(j==="tier"&&O)return s.jsxs("form",{onSubmit:B,className:"space-y-4",children:[s.jsxs("p",{children:["Manually assign a partner tier for ",s.jsx("strong",{children:O.name}),"."]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Partner Tier"}),s.jsxs("select",{value:ae||"auto",onChange:me=>F(me.target.value==="auto"?null:me.target.value),className:"w-full px-4 py-2 border border-border rounded-lg bg-background",children:[s.jsx("option",{value:"auto",children:"Automatic (Based on shipments)"}),Object.values(Gi).map(me=>s.jsx("option",{value:me,children:me},me))]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Manual assignment overrides the automatic tier calculation."})]}),s.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[s.jsx("button",{type:"button",onClick:G,className:"px-4 py-2 bg-secondary rounded-lg font-semibold",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg font-semibold",children:"Save Tier"})]})]});if(j==="priorityPricing"&&O){const me=(st,Fe)=>{Y(we=>({...we,[st]:parseFloat(Fe)||0}))};return s.jsxs("form",{onSubmit:B,className:"space-y-4",children:[s.jsxs("p",{children:["Set custom priority fee percentages for ",s.jsx("strong",{children:O.name})," (e.g., 100 for standard rate, 150 for a 1.5x fee)."]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[nn.STANDARD," (%)"]}),s.jsx("input",{type:"number",min:"0",value:U[nn.STANDARD],onChange:st=>me(nn.STANDARD,st.target.value),className:"w-full p-2 border border-border rounded bg-background"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[nn.URGENT," (%)"]}),s.jsx("input",{type:"number",min:"0",value:U[nn.URGENT],onChange:st=>me(nn.URGENT,st.target.value),className:"w-full p-2 border border-border rounded bg-background"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[nn.EXPRESS," (%)"]}),s.jsx("input",{type:"number",min:"0",value:U[nn.EXPRESS],onChange:st=>me(nn.EXPRESS,st.target.value),className:"w-full p-2 border border-border rounded bg-background"})]}),s.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[s.jsx("button",{type:"button",onClick:G,className:"px-4 py-2 bg-secondary rounded-lg font-semibold",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg font-semibold",children:"Save Pricing"})]})]})}if(j==="add"||j==="edit"){const me=(P.roles||[]).includes(Vt.COURIER),st=(P.roles||[]).includes(Vt.CLIENT);return s.jsxs("form",{onSubmit:B,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Full Name"}),s.jsx("input",{type:"text",name:"name",value:P.name||"",onChange:te,className:"w-full px-4 py-2 border border-border rounded-lg bg-background",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Email"}),s.jsx("input",{type:"email",name:"email",value:P.email||"",onChange:te,className:"w-full px-4 py-2 border border-border rounded-lg bg-background",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Phone Number"}),s.jsx("input",{type:"tel",name:"phone",value:P.phone||"",onChange:te,className:"w-full px-4 py-2 border border-border rounded-lg bg-background",placeholder:"01xxxxxxxxx"})]}),j==="add"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Password"}),s.jsx("input",{type:"password",name:"password",onChange:te,className:"w-full px-4 py-2 border border-border rounded-lg bg-background",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-2",children:"Roles"}),s.jsx("div",{className:"grid grid-cols-2 gap-3 p-3 bg-secondary rounded-lg",children:ne.map(Fe=>s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:(P.roles||[]).includes(Fe.name),onChange:we=>fe(Fe.name,we.target.checked),className:"h-4 w-4 rounded border-border text-primary focus:ring-primary"}),s.jsx("span",{children:Fe.name})]},Fe.id))})]}),me&&s.jsxs("div",{className:"p-4 border border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-900/10 rounded-lg space-y-4",children:[s.jsx("h4",{className:"font-semibold text-blue-800 dark:text-blue-300",children:"Courier Settings"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-2",children:"Assigned Zones"}),s.jsx("div",{className:"max-h-48 overflow-y-auto space-y-2 p-2 bg-background rounded",children:Object.entries(Zr.GreaterCairo).map(([Fe,we])=>s.jsxs("div",{children:[s.jsx("h5",{className:"font-semibold text-muted-foreground mt-2 px-1",children:Fe}),s.jsx("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 p-1",children:we.map(Xe=>s.jsxs("label",{className:"flex items-center gap-2 text-sm text-foreground cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:(P.zones||[]).includes(Xe),onChange:Re=>le(Xe,Re.target.checked),className:"h-4 w-4 rounded border-border text-primary focus:ring-primary"}),s.jsx("span",{children:Xe})]},Xe))})]},Fe))})]}),j==="add"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Referred By (Optional)"}),s.jsxs("select",{name:"referrerId",value:P.referrerId||"",onChange:te,className:"w-full px-4 py-2 border border-border rounded-lg bg-background",children:[s.jsx("option",{value:"",children:"No Referrer"}),e.filter(Fe=>(Fe.roles||[]).includes(Vt.COURIER)).map(Fe=>s.jsx("option",{value:Fe.id,children:Fe.name},Fe.id))]})]})]}),st&&s.jsxs("div",{className:"p-4 border border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/10 rounded-lg space-y-4",children:[s.jsx("h4",{className:"font-semibold text-green-800 dark:text-green-300",children:"Client Settings"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Flat Rate Fee (EGP)"}),s.jsx("input",{type:"number",step:"0.01",min:"0",name:"flatRateFee",value:P.flatRateFee??"",onChange:Fe=>C(we=>({...we,flatRateFee:parseFloat(Fe.target.value)||0})),className:"w-full px-4 py-2 border border-border rounded-lg bg-background"})]})]}),(((ut=P.roles)==null?void 0:ut.includes(Vt.ADMIN))||((Me=l.roles)==null?void 0:Me.includes(Vt.ADMIN)))&&P.referrerId&&s.jsxs("div",{className:"p-4 border border-purple-200 dark:border-purple-800 bg-purple-50 dark:bg-purple-900/10 rounded-lg space-y-4",children:[s.jsx("h4",{className:"font-semibold text-purple-800 dark:text-purple-300",children:"Referral Settings (for Referrer)"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Referral Commission (EGP per delivery)"}),s.jsx("input",{type:"number",step:"0.01",min:"0",name:"referralCommission",value:P.referralCommission??"",onChange:Fe=>C(we=>({...we,referralCommission:parseFloat(Fe.target.value)||0})),className:"w-full px-4 py-2 border border-border rounded-lg bg-background"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"This commission is paid to the referring courier for each successful delivery made by this new courier."})]})]}),s.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[s.jsx("button",{type:"button",onClick:G,className:"px-4 py-2 bg-secondary text-secondary-foreground rounded-lg font-semibold",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg font-semibold",children:j==="add"?"Create User":"Save Changes"})]})]})}return null};return s.jsxs("div",{className:"card",children:[s.jsxs("div",{className:"p-5 border-b border-border flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-foreground",children:"User Management"}),s.jsx("p",{className:"text-muted-foreground mt-1 text-sm",children:"Create, edit, and manage all users in the system."})]}),s.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[s.jsxs("button",{onClick:je,className:"w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition",children:[s.jsx(ca,{className:"w-5 h-5"}),s.jsx("span",{className:"hidden sm:inline",children:"Export"})]}),s.jsxs("button",{onClick:()=>K("add"),className:"w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-2 bg-primary text-primary-foreground font-semibold rounded-lg hover:bg-primary/90 transition",children:[s.jsx(tl,{className:"w-5 h-5"}),"New User"]})]})]}),s.jsxs("div",{className:"p-4 bg-secondary border-b border-border flex flex-col md:flex-row gap-4",children:[s.jsx("input",{type:"text",placeholder:"Search by name, email, or ID...",value:L,onChange:ve=>M(ve.target.value),className:"w-full md:w-1/3 px-4 py-2 border border-border rounded-lg bg-background"}),s.jsxs("select",{value:z,onChange:ve=>k(ve.target.value),className:"w-full md:w-1/3 px-4 py-2 border border-border rounded-lg bg-background",children:[s.jsx("option",{value:"all",children:"Filter by Role"}),S.map(ve=>s.jsx("option",{value:ve.name,children:ve.name},ve.id))]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"User"}),s.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Roles"}),s.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider hidden md:table-cell",children:"Details"}),s.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-border",children:R.map(ve=>{var Pe,Te;return s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-secondary flex items-center justify-center",children:s.jsx(lm,{className:"w-6 h-6 text-muted-foreground"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-foreground",children:ve.name}),s.jsx("p",{className:"text-sm text-muted-foreground",children:ve.email}),s.jsx("p",{className:"font-mono text-xs text-muted-foreground/70 mt-1",children:ve.publicId})]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"flex flex-wrap gap-1",children:(ve.roles||[]).map(Ye=>s.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300",children:Ye},Ye))})}),s.jsxs("td",{className:"px-6 py-4 text-sm text-muted-foreground hidden md:table-cell",children:[(ve.roles||[]).includes(Vt.COURIER)&&`Zones: ${((Pe=ve.zones)==null?void 0:Pe.join(", "))||"N/A"}`,(ve.roles||[]).includes(Vt.CLIENT)&&`Fee: ${(Te=ve.flatRateFee)==null?void 0:Te.toFixed(2)} EGP`]}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[f(Ut.EDIT_USER_PROFILE)&&s.jsx("button",{onClick:()=>K("edit",ve),title:"Edit User",className:"p-2 text-muted-foreground hover:text-primary hover:bg-secondary rounded-md",children:s.jsx(Ts,{})}),s.jsx("button",{onClick:()=>K("reset",ve),title:"Reset Password",className:"p-2 text-muted-foreground hover:text-orange-500 hover:bg-secondary rounded-md",children:s.jsx(ty,{})}),s.jsx("button",{onClick:()=>K("delete",ve),title:"Delete User",className:"p-2 text-muted-foreground hover:text-red-500 hover:bg-secondary rounded-md",children:s.jsx(Od,{})}),(ve.roles||[]).includes(Vt.CLIENT)&&f(Ut.EDIT_CLIENT_ADDRESS)&&s.jsx("button",{onClick:()=>K("address",ve),title:"Edit Default Address",className:"p-2 text-muted-foreground hover:text-blue-500 hover:bg-secondary rounded-md",children:s.jsx(ny,{className:"w-5 h-5"})}),(ve.roles||[]).includes(Vt.CLIENT)&&s.jsx("button",{onClick:()=>K("priorityPricing",ve),title:"Set Priority Pricing",className:"p-2 text-muted-foreground hover:text-green-500 hover:bg-secondary rounded-md",children:s.jsx(oa,{className:"w-5 h-5"})}),(ve.roles||[]).includes(Vt.CLIENT)&&s.jsx("button",{onClick:()=>K("tier",ve),title:"Manage Tier",className:"p-2 text-muted-foreground hover:text-yellow-500 hover:bg-secondary rounded-md",children:s.jsx(cm,{className:"w-5 h-5"})})]})})]},ve.id)})})]})}),s.jsx(fr,{isOpen:!!j,onClose:G,title:j==="add"?"Create New User":j==="address"?`Edit Address for ${O==null?void 0:O.name}`:`Manage ${O==null?void 0:O.name}`,size:"2xl",children:Ae()})]})},H6=()=>{const{currentUser:e,clientTransactions:t,requestClientPayout:n,addToast:i}=jn(),[o,l]=pe.useState(!1),[f,m]=pe.useState("");if(!e)return null;const p=t.filter(E=>E.userId===e.id),S=p.filter(E=>E.type===ko.WITHDRAWAL_REQUEST&&E.status==="Pending").reduce((E,P)=>E+P.amount,0),N=e.walletBalance||0,j=()=>{const E=parseFloat(f);if(isNaN(E)||E<=0){i("Please enter a valid positive amount.","error");return}if(E>N){i("Payout amount cannot exceed your available balance.","error");return}n(e.id,E),i("Payout requested successfully!","success"),l(!1),m("")},v=E=>{switch(E){case"Pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case"Processed":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";case"Failed":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";default:return"bg-secondary text-secondary-foreground"}},O=E=>{switch(E){case ko.DEPOSIT:return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";case ko.PAYMENT:return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";case ko.WITHDRAWAL_REQUEST:return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300";case ko.WITHDRAWAL_PROCESSED:return"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300";default:return"bg-secondary text-secondary-foreground"}};return s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"My Wallet"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Your wallet is credited with the value of your delivered packages. You can use this balance to pay for future shipping fees."})]}),s.jsx("button",{onClick:()=>l(!0),disabled:N<=0,className:"w-full sm:w-auto px-6 py-3 bg-green-600 text-white font-semibold rounded-lg shadow-sm hover:bg-green-700 transition disabled:bg-muted disabled:cursor-not-allowed",children:"Request Payout"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsx(kt,{title:"Available Balance",value:`${N.toFixed(2)} EGP`,icon:s.jsx(oa,{className:"w-7 h-7"}),color:"#22c55e"}),s.jsx(kt,{title:"Pending Payouts",value:`${(-S).toFixed(2)} EGP`,icon:s.jsx(Rh,{className:"w-7 h-7"}),color:"#3b82f6"})]}),s.jsxs("div",{className:"card overflow-hidden",children:[s.jsx("div",{className:"p-5 border-b border-border",children:s.jsx("h2",{className:"text-xl font-bold text-foreground",children:"Transaction History"})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{className:"bg-secondary",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Date"}),s.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Description"}),s.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Type"}),s.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider text-right",children:"Amount"})]})}),s.jsxs("tbody",{className:"divide-y divide-border",children:[p.sort((E,P)=>new Date(P.date).getTime()-new Date(E.date).getTime()).map(E=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 text-muted-foreground whitespace-nowrap",children:new Date(E.date).toLocaleString()}),s.jsx("td",{className:"px-6 py-4 text-foreground",children:E.description}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${O(E.type)}`,children:E.type}),E.status&&s.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${v(E.status)}`,children:E.status})]})}),s.jsxs("td",{className:`px-6 py-4 font-semibold text-right ${E.amount>=0?"text-green-600":"text-red-600"}`,children:[E.amount.toFixed(2)," EGP"]})]},E.id)),p.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:4,className:"text-center py-8 text-muted-foreground",children:"No transactions yet."})})]})]})})]}),s.jsx(fr,{isOpen:o,onClose:()=>l(!1),title:"Request a Payout",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("p",{className:"text-foreground",children:["Your current available balance is ",s.jsxs("strong",{className:"text-green-600",children:[N.toFixed(2)," EGP"]}),"."]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"payout-amount",className:"block text-sm font-medium text-foreground mb-1",children:"Amount to withdraw (EGP)"}),s.jsx("input",{id:"payout-amount",type:"number",value:f,onChange:E=>m(E.target.value),placeholder:`Max ${N.toFixed(2)}`,className:"w-full px-4 py-2 border border-border rounded-lg",min:"0.01",step:"0.01",max:N})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"An administrator will review and process your request. Once processed, the funds will be transferred to you."}),s.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[s.jsx("button",{onClick:()=>l(!1),className:"px-4 py-2 bg-secondary text-secondary-foreground rounded-lg font-semibold",children:"Cancel"}),s.jsx("button",{onClick:j,className:"px-4 py-2 bg-green-600 text-white rounded-lg font-semibold",children:"Confirm Request"})]})]})})]})},V6=()=>{const{currentUser:e,shipments:t,getTaxCardNumber:n}=jn();if(!e)return null;const i=t.filter(E=>E.status===ht.DELIVERED&&E.deliveryDate),o=(e.roles||[]).includes(Vt.CLIENT),l=o?i.filter(E=>E.clientId===e.id):i,f=l.reduce((E,P)=>E+(P.clientFlatRateFee||0),0),m=l.length,p=l.filter(E=>E.paymentMethod===Mn.COD).reduce((E,P)=>E+P.price,0),x=o&&e.id?n(e.id):"",S={},N=new Date;for(let E=29;E>=0;E--){const P=new Date(N);P.setDate(N.getDate()-E);const C=P.toISOString().split("T")[0];S[C]=0}l.forEach(E=>{if(E.deliveryDate){const P=E.deliveryDate.split("T")[0];S.hasOwnProperty(P)&&(S[P]+=E.clientFlatRateFee||0)}});const j=Object.entries(S).map(([E,P])=>({date:new Date(E).getDate().toString(),revenue:P})),v=Math.max(...j.map(E=>E.revenue),1),O=()=>{const E=["Shipment ID","Delivery Date","Client","Payment Method","Revenue (EGP)"],P=l.sort((C,_)=>new Date(_.deliveryDate).getTime()-new Date(C.deliveryDate).getTime()).map(C=>[C.id,new Date(C.deliveryDate).toLocaleDateString(),C.clientName,C.paymentMethod,(C.clientFlatRateFee||0).toFixed(2)]);Fi(E,P,"Financial_Report")};return s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"My Financials"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:o?"Your order history and financial summary.":"An overview of the company's financial performance."})]}),s.jsxs("button",{onClick:O,className:"w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition",children:[s.jsx(ca,{className:"w-5 h-5"}),"Export as CSV"]})]}),o&&x&&s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 p-4 rounded-xl",children:[s.jsx("h3",{className:"text-lg font-semibold text-blue-900 dark:text-blue-200 mb-2",children:"Tax Information"}),s.jsxs("p",{className:"text-blue-800 dark:text-blue-300",children:["Tax Card Number: ",s.jsx("span",{className:"font-mono font-bold",children:x})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsx(kt,{title:"Total Revenue",value:`${f.toFixed(2)} EGP`,icon:s.jsx(Uc,{className:"w-7 h-7"}),color:"#16a34a"}),s.jsx(kt,{title:"Shipments Delivered",value:m,icon:s.jsx(ao,{className:"w-7 h-7"}),color:"#3b82f6"}),s.jsx(kt,{title:"COD Collected",value:`${p.toFixed(2)} EGP`,icon:s.jsx(oa,{className:"w-7 h-7"}),color:"#f97316"})]}),s.jsxs("div",{className:"card",children:[s.jsx("h2",{className:"text-xl font-bold text-foreground mb-4",children:"Daily Revenue (Last 30 Days)"}),s.jsx("div",{className:"h-64 flex items-end gap-2 border-l border-b border-border pl-4 pb-4",children:j.map(({date:E,revenue:P})=>s.jsxs("div",{className:"flex-1 h-full flex flex-col justify-end items-center group",children:[s.jsx("div",{className:"w-full bg-primary/60 hover:bg-primary/80 transition-colors rounded-t-md",style:{height:`${P/v*100}%`},title:`Day ${E}: ${P.toFixed(2)} EGP`}),s.jsx("span",{className:"text-xs text-muted-foreground mt-1",children:E})]},E))})]}),s.jsxs("div",{className:"card overflow-hidden",children:[s.jsx("div",{className:"p-5",children:s.jsx("h2",{className:"text-xl font-bold text-foreground",children:"All Transactions"})}),s.jsx("div",{className:"overflow-x-auto hidden lg:block",children:s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{className:"bg-secondary",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Shipment ID"}),s.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Delivery Date"}),s.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Client"}),s.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Payment Method"}),s.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider text-right",children:"Revenue"})]})}),s.jsx("tbody",{className:"divide-y divide-border",children:l.sort((E,P)=>new Date(P.deliveryDate).getTime()-new Date(E.deliveryDate).getTime()).map(E=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 font-mono text-sm text-muted-foreground",children:E.id}),s.jsx("td",{className:"px-6 py-4 text-foreground",children:new Date(E.deliveryDate).toLocaleDateString()}),s.jsx("td",{className:"px-6 py-4 text-muted-foreground",children:E.clientName}),s.jsx("td",{className:"px-6 py-4 text-muted-foreground",children:E.paymentMethod}),s.jsxs("td",{className:"px-6 py-4 font-semibold text-foreground text-right",children:[(E.clientFlatRateFee||0).toFixed(2)," EGP"]})]},E.id))})]})}),s.jsx("div",{className:"lg:hidden p-4 space-y-4 bg-secondary",children:l.sort((E,P)=>new Date(P.deliveryDate).getTime()-new Date(E.deliveryDate).getTime()).map(E=>s.jsxs("div",{className:"responsive-card !bg-card",children:[s.jsxs("div",{className:"responsive-card-header",children:[s.jsx("span",{className:"font-mono text-sm text-muted-foreground",children:E.id}),s.jsxs("span",{className:"font-semibold text-foreground",children:[(E.clientFlatRateFee||0).toFixed(2)," EGP"]})]}),s.jsxs("div",{className:"responsive-card-item",children:[s.jsx("span",{className:"responsive-card-label",children:"Client"}),s.jsx("span",{className:"responsive-card-value",children:E.clientName})]}),s.jsxs("div",{className:"responsive-card-item",children:[s.jsx("span",{className:"responsive-card-label",children:"Date"}),s.jsx("span",{className:"responsive-card-value",children:new Date(E.deliveryDate).toLocaleDateString()})]}),s.jsxs("div",{className:"responsive-card-item",children:[s.jsx("span",{className:"responsive-card-label",children:"Payment"}),s.jsx("span",{className:"responsive-card-value",children:E.paymentMethod})]})]},E.id))}),l.length===0&&s.jsxs("div",{className:"text-center py-16 text-muted-foreground",children:[s.jsx("p",{className:"font-semibold",children:"No Delivered Shipments"}),s.jsx("p",{className:"text-sm",children:"There are no financial transactions to display yet."})]})]})]})},q6=({setActiveView:e})=>{const{currentUser:t,getAdminFinancials:n,getClientFinancials:i,hasPermission:o,updateClientFlatRate:l,setShipmentFilter:f,shipments:m}=jn(),[p,x]=pe.useState(!1),[S,N]=pe.useState(null),[j,v]=pe.useState(!1),[O,E]=pe.useState(0),P=pe.useMemo(()=>S?m.filter(z=>z.clientId===S.clientId):[],[m,S]);if(!t||!o(Ut.VIEW_ADMIN_FINANCIALS))return s.jsx("div",{className:"flex items-center justify-center h-96",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Access Denied"}),s.jsx("p",{className:"text-slate-600",children:"Only users with appropriate permissions can access financial data."})]})});const C=n(),_=i(),D=z=>{N(z),E(z.flatRateFee),x(!0)},U=z=>{N(z),v(!0)},Y=z=>{z.preventDefault(),S&&O>=0&&(l(S.clientId,O),x(!1))},ae=z=>{f(()=>z),e("total-shipments")},F=()=>{const z=["Metric","Value"],k=[["Cash to Collect (In Transit COD)",`${C.cashToCollect.toFixed(2)} EGP`],["Total COD Collected (Delivered)",`${C.totalCODCollected.toFixed(2)} EGP`],["Undelivered Packages Value",`${C.undeliveredPackagesValue.toFixed(2)} EGP`],["Potential Fees from Pending Orders",`${C.totalFees.toFixed(2)} EGP`],["Total Revenue (Shipping Fees)",`${C.totalRevenue.toFixed(2)} EGP`],["Total Commission (Paid to Couriers)",`${C.totalCommission.toFixed(2)} EGP`],["Net Profit (Revenue - Commission)",`${C.netRevenue.toFixed(2)} EGP`],["Total Delivered Orders",C.totalOrders.toString()]];Fi(z,k,"Admin_Financial_Report")},L=()=>{const z=["Client Name","Total Orders","Order Sum (EGP)","Flat Rate Fee (EGP)"],k=_.map(R=>[R.clientName,R.totalOrders.toString(),R.orderSum.toFixed(2),R.flatRateFee.toFixed(2)]);Fi(z,k,"Client_Financial_Summary")},M=z=>{switch(z){case Gi.GOLD:return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case Gi.SILVER:return"bg-gray-100 text-gray-800 dark:bg-gray-700/30 dark:text-gray-300";case Gi.BRONZE:return"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300";default:return"bg-secondary text-secondary-foreground"}};return s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Admin Financial Dashboard"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Enhanced financial overview with detailed tracking metrics."})]}),s.jsx("div",{className:"flex gap-2 w-full sm:w-auto",children:s.jsxs("button",{onClick:F,className:"flex-1 sm:flex-none flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition",children:[s.jsx(ca,{className:"w-5 h-5"}),s.jsx("span",{className:"hidden sm:inline",children:"Export Report"})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(kt,{title:"Cash to Collect",value:`${C.cashToCollect.toFixed(2)} EGP`,icon:s.jsx(oa,{className:"w-7 h-7"}),color:"#f59e0b",subtitle:"COD for packages out for delivery",onClick:()=>ae(z=>z.paymentMethod===Mn.COD&&[ht.OUT_FOR_DELIVERY].includes(z.status))}),s.jsx(kt,{title:"Total COD Collected",value:`${C.totalCODCollected.toFixed(2)} EGP`,icon:s.jsx(oa,{className:"w-7 h-7"}),color:"#16a34a",subtitle:"From delivered packages",onClick:()=>ae(z=>z.paymentMethod===Mn.COD&&z.status===ht.DELIVERED)}),s.jsx(kt,{title:"Undelivered Packages",value:`${C.undeliveredPackagesValue.toFixed(2)} EGP`,icon:s.jsx(sa,{className:"w-7 h-7"}),color:"#f59e0b",subtitle:"Value of pending deliveries",onClick:()=>ae(z=>![ht.DELIVERED,ht.DELIVERY_FAILED].includes(z.status))}),s.jsx(kt,{title:"Uncollected Transfer Fees",value:`${C.uncollectedTransferFees.toFixed(2)} EGP`,icon:s.jsx(su,{className:"w-7 h-7"}),color:"#ef4444",subtitle:"Shipping fees for pending transfers",onClick:()=>ae(z=>z.paymentMethod===Mn.TRANSFER&&![ht.DELIVERED,ht.DELIVERY_FAILED].includes(z.status))})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(kt,{title:"Total Revenue",value:`${C.totalRevenue.toFixed(2)} EGP`,icon:s.jsx(oa,{className:"w-7 h-7"}),color:"#16a34a",subtitle:"Shipping fees earned",onClick:()=>ae(z=>z.status===ht.DELIVERED||z.status===ht.DELIVERY_FAILED)}),s.jsx(kt,{title:"Total Commission",value:`${C.totalCommission.toFixed(2)} EGP`,icon:s.jsx(qi,{className:"w-7 h-7"}),color:"#f97316",subtitle:"Paid to couriers",onClick:()=>ae(z=>z.status===ht.DELIVERED)}),s.jsx(kt,{title:"Net Profit",value:`${C.netRevenue.toFixed(2)} EGP`,icon:s.jsx(ao,{className:"w-7 h-7"}),color:"#3b82f6",subtitle:"Revenue - Commission",onClick:()=>ae(z=>z.status===ht.DELIVERED||z.status===ht.DELIVERY_FAILED)}),s.jsx(kt,{title:"Total Owed to Couriers",value:`${C.totalOwedToCouriers.toFixed(2)} EGP`,icon:s.jsx(qi,{className:"w-7 h-7"}),color:"#8b5cf6",subtitle:"Current balance across all couriers",onClick:()=>e("courier-performance")})]}),s.jsxs("div",{className:"card overflow-hidden",children:[s.jsxs("div",{className:"p-5 border-b border-border flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-foreground",children:"Client Financial Summary"}),s.jsx("p",{className:"text-muted-foreground mt-1 text-sm",children:"Revenue breakdown by client with adjustable flat rates."})]}),s.jsxs("button",{onClick:L,className:"w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition",children:[s.jsx(ca,{className:"w-5 h-5"}),s.jsx("span",{className:"hidden sm:inline",children:"Export CSV"})]})]}),s.jsx("div",{className:"overflow-x-auto hidden lg:block",children:s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{className:"bg-secondary border-b border-border",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Client"}),s.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Total Orders"}),s.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Order Sum"}),s.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Flat Rate Fee"}),s.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Partner Tier"}),s.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-border",children:_.map(z=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 font-semibold text-foreground",children:z.clientName}),s.jsx("td",{className:"px-6 py-4 text-muted-foreground",children:s.jsx("button",{onClick:()=>U(z),className:"text-primary hover:underline",children:z.totalOrders})}),s.jsxs("td",{className:"px-6 py-4 text-muted-foreground",children:[z.orderSum.toFixed(2)," EGP"]}),s.jsxs("td",{className:"px-6 py-4 font-semibold text-primary",children:[z.flatRateFee.toFixed(2)," EGP"]}),s.jsx("td",{className:"px-6 py-4",children:z.partnerTier?s.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${M(z.partnerTier)}`,children:z.partnerTier}):s.jsx("span",{className:"text-muted-foreground text-xs",children:"Not Assigned"})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("button",{onClick:()=>D(z),className:"p-2 text-muted-foreground hover:text-primary hover:bg-accent rounded-md",title:"Edit Flat Rate",children:s.jsx(Ts,{className:"w-4 h-4"})})})]},z.clientId))})]})}),s.jsx("div",{className:"lg:hidden p-4 space-y-4 bg-secondary",children:_.map(z=>s.jsxs("div",{className:"responsive-card !bg-card",children:[s.jsxs("div",{className:"responsive-card-header",children:[s.jsx("span",{className:"font-semibold text-foreground",children:z.clientName}),s.jsx("button",{onClick:()=>D(z),className:"p-2 text-muted-foreground hover:text-primary hover:bg-accent rounded-md -mr-2 -mt-2",title:"Edit Flat Rate",children:s.jsx(Ts,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"responsive-card-item",children:[s.jsx("span",{className:"responsive-card-label",children:"Flat Rate"}),s.jsxs("span",{className:"responsive-card-value font-semibold text-primary",children:[z.flatRateFee.toFixed(2)," EGP"]})]}),s.jsxs("div",{className:"responsive-card-item",children:[s.jsx("span",{className:"responsive-card-label",children:"Partner Tier"}),s.jsx("span",{className:"responsive-card-value",children:z.partnerTier?s.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${M(z.partnerTier)}`,children:z.partnerTier}):"N/A"})]}),s.jsxs("div",{className:"responsive-card-item",children:[s.jsx("span",{className:"responsive-card-label",children:"Total Orders"}),s.jsx("button",{onClick:()=>U(z),className:"responsive-card-value text-primary hover:underline",children:z.totalOrders})]}),s.jsxs("div",{className:"responsive-card-item",children:[s.jsx("span",{className:"responsive-card-label",children:"Order Sum"}),s.jsxs("span",{className:"responsive-card-value",children:[z.orderSum.toFixed(2)," EGP"]})]})]},z.clientId))}),_.length===0&&s.jsxs("div",{className:"text-center py-16 text-muted-foreground",children:[s.jsx("p",{className:"font-semibold",children:"No Client Data"}),s.jsx("p",{className:"text-sm",children:"No client financial information is available yet."})]})]}),s.jsx(fr,{isOpen:p,onClose:()=>x(!1),title:`Update Flat Rate for ${S==null?void 0:S.clientName}`,children:s.jsxs("form",{onSubmit:Y,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Flat Rate Fee (EGP)"}),s.jsx("input",{type:"number",step:"0.01",min:"0",value:O,onChange:z=>E(parseFloat(z.target.value)||0),className:"w-full px-4 py-2 border border-border rounded-lg bg-background",required:!0}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"This fee is charged per package but not visible to the client."})]}),s.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[s.jsx("button",{type:"button",onClick:()=>x(!1),className:"px-4 py-2 bg-secondary text-secondary-foreground rounded-lg font-semibold",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg font-semibold",children:"Update Rate"})]})]})}),s.jsx(fr,{isOpen:j,onClose:()=>v(!1),title:`Shipments for ${S==null?void 0:S.clientName}`,size:"4xl",children:s.jsx("div",{className:"max-h-[70vh] overflow-y-auto",children:s.jsx(ol,{shipments:P})})})]})},G6=()=>{const{notifications:e,notificationStatus:t,resendNotification:n}=jn(),i={sending:{text:"Sending...",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300"},sent:{text:"Sent",color:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300"},failed:{text:"Not Sent",color:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"}},o=e.sort((l,f)=>new Date(f.date).getTime()-new Date(l.date).getTime());return s.jsxs("div",{className:"card overflow-hidden",children:[s.jsxs("div",{className:"p-5 border-b border-border",children:[s.jsx("h2",{className:"text-xl font-bold text-foreground",children:"Notifications Log"}),s.jsx("p",{className:"text-muted-foreground mt-1 text-sm",children:"A log of all system-generated notifications. Emails can be sent manually from this screen."})]}),s.jsx("div",{className:"overflow-x-auto hidden lg:block",children:s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{className:"bg-secondary",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Date"}),s.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Channel"}),s.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Recipient"}),s.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Subject"}),s.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Shipment ID"}),s.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Action"})]})}),s.jsx("tbody",{className:"divide-y divide-border",children:o.map(l=>{const f=t[l.id]||(l.sent?"sent":"failed");return s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 text-sm whitespace-nowrap text-muted-foreground",children:new Date(l.date).toLocaleString()}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[l.channel===jl.SMS?s.jsx(q1,{className:"w-5 h-5 text-blue-500"}):s.jsx(W1,{className:"w-5 h-5 text-muted-foreground"}),s.jsx("span",{className:"text-sm",children:l.channel})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${i[f].color}`,children:i[f].text})}),s.jsx("td",{className:"px-6 py-4 text-sm text-foreground",children:l.recipient}),s.jsx("td",{className:"px-6 py-4 text-sm text-foreground",children:l.channel===jl.EMAIL?l.message.split(`

`)[0]:l.message}),s.jsx("td",{className:"px-6 py-4 font-mono text-sm text-muted-foreground",children:l.shipmentId}),s.jsx("td",{className:"px-6 py-4",children:l.channel===jl.EMAIL&&s.jsxs("button",{onClick:()=>n(l.id),disabled:f==="sending",className:"flex items-center gap-2 px-3 py-1 bg-primary text-primary-foreground text-xs font-semibold rounded-lg hover:bg-primary/90 transition disabled:bg-muted",children:[s.jsx(dh,{className:"w-4 h-4 transform -scale-x-100"}),f==="sent"?"Resend":"Send"]})})]},l.id)})})]})}),s.jsx("div",{className:"lg:hidden p-4 space-y-4 bg-secondary",children:o.map(l=>{const f=t[l.id]||(l.sent?"sent":"failed");return s.jsxs("div",{className:"responsive-card",children:[s.jsxs("div",{className:"responsive-card-header",children:[s.jsx("span",{className:"font-mono text-sm text-foreground",children:l.shipmentId}),s.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${i[f].color}`,children:i[f].text})]}),s.jsxs("div",{className:"text-sm",children:[s.jsx("p",{className:"font-semibold",children:l.channel===jl.EMAIL?l.message.split(`

`)[0]:l.message}),s.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[l.channel===jl.SMS?s.jsx(q1,{className:"w-4 h-4 text-blue-500"}):s.jsx(W1,{className:"w-4 h-4"}),"To: ",l.recipient]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(l.date).toLocaleString()})]}),l.channel===jl.EMAIL&&s.jsxs("button",{onClick:()=>n(l.id),disabled:f==="sending",className:"mt-2 w-full flex items-center justify-center gap-2 px-3 py-2 bg-primary text-primary-foreground text-sm font-semibold rounded-lg hover:bg-primary/90 transition disabled:bg-muted",children:[s.jsx(dh,{className:"w-4 h-4 transform -scale-x-100"}),f==="sent"?"Resend":"Send"]})]},l.id)})}),e.length===0&&s.jsxs("div",{className:"text-center py-16 text-muted-foreground",children:[s.jsx("p",{className:"font-semibold",children:"No Notifications Found"}),s.jsx("p",{className:"text-sm",children:"No notifications have been generated yet."})]})]})},W6=()=>{var S,N,j,v,O;const{currentUser:e,updateUser:t}=jn(),[n,i]=pe.useState(!1),[o,l]=pe.useState({}),f=E=>E==="Cairo"?Zr.GreaterCairo.Cairo:E==="Giza"?Zr.GreaterCairo.Giza:E==="Alexandria"?Zr.Alexandria:E==="Other"?Zr.Other:[];if(pe.useEffect(()=>{e&&l({name:e.name,phone:e.phone||"",address:e.address||{street:"",city:"Cairo",zone:Zr.GreaterCairo.Cairo[0],details:""}})},[e]),!e)return null;const m=E=>{const{name:P,value:C}=E.target;if(P.startsWith("address.")){const _=P.split(".")[1];let D={...o.address,[_]:C};if(_==="city"){const Y=f(C),ae=Y.length>0?Y[0]:"";D.zone=ae}l(U=>({...U,address:D}))}else l(_=>({..._,[P]:C}))},p=()=>{t(e.id,o),i(!1)},x=f(((S=o.address)==null?void 0:S.city)||"Cairo");return s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:"flex justify-between items-start mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"My Profile"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"View and edit your personal information and default address."})]}),n?s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>i(!1),className:"px-4 py-2 bg-secondary text-secondary-foreground rounded-lg hover:bg-accent font-semibold",children:"Cancel"}),s.jsx("button",{onClick:p,className:"px-4 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700",children:"Save Changes"})]}):s.jsxs("button",{onClick:()=>i(!0),className:"flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground font-semibold rounded-lg hover:bg-primary/90 transition",children:[s.jsx(Ts,{className:"w-5 h-5"}),"Edit Profile"]})]}),s.jsxs("div",{className:"card p-8 space-y-8",children:[s.jsxs("div",{className:"border-b border-border pb-8",children:[s.jsx("h2",{className:"text-lg font-bold text-foreground mb-4",children:"Personal Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Full Name"}),n?s.jsx("input",{type:"text",name:"name",value:o.name||"",onChange:m,className:"w-full px-4 py-2 border border-border rounded-lg"}):s.jsx("p",{className:"text-lg text-foreground p-2",children:e.name})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Email Address"}),s.jsx("p",{className:"text-lg text-muted-foreground p-2 bg-secondary rounded-lg",children:e.email})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Phone Number"}),n?s.jsxs(s.Fragment,{children:[s.jsx("input",{type:"tel",name:"phone",value:o.phone||"",onChange:m,className:"w-full px-4 py-2 border border-border rounded-lg",placeholder:"01xxxxxxxxx"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Example for Egyptian number: 01012345678"})]}):s.jsx("p",{className:"text-lg text-foreground p-2",children:e.phone||"Not set"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Role"}),s.jsx("p",{className:"text-lg text-muted-foreground p-2 bg-secondary rounded-lg",children:(e.roles||[]).join(" & ")})]})]})]}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-bold text-foreground mb-4",children:"Default Pickup Address"}),n?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Street Address"}),s.jsx("input",{type:"text",name:"address.street",value:((N=o.address)==null?void 0:N.street)||"",onChange:m,className:"w-full px-4 py-2 border border-border rounded-lg"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"City"}),s.jsxs("select",{name:"address.city",value:((j=o.address)==null?void 0:j.city)||"Cairo",onChange:m,className:"w-full px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary",children:[s.jsx("option",{value:"Cairo",children:"Cairo"}),s.jsx("option",{value:"Giza",children:"Giza"}),s.jsx("option",{value:"Alexandria",children:"Alexandria"}),s.jsx("option",{value:"Other",children:"Other Governorates"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Zone"}),s.jsx("select",{name:"address.zone",value:((v=o.address)==null?void 0:v.zone)||"",onChange:m,className:"w-full px-4 py-2 border border-border rounded-lg",children:x.map(E=>s.jsx("option",{value:E,children:E},E))})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Apartment, Suite, etc."}),s.jsx("input",{type:"text",name:"address.details",value:((O=o.address)==null?void 0:O.details)||"",onChange:m,className:"w-full px-4 py-2 border border-border rounded-lg"})]})]}):e.address?s.jsxs("div",{className:"text-lg text-foreground p-4 bg-secondary rounded-lg",children:[s.jsx("p",{className:"font-semibold",children:e.address.street}),s.jsx("p",{children:e.address.details}),s.jsxs("p",{children:[e.address.city,", ",e.address.zone]})]}):s.jsx("p",{className:"text-muted-foreground",children:"Please set your default address."})]})]})]})},Y6=({onSelectShipment:e,setActiveView:t})=>{const{users:n,shipments:i,clientTransactions:o,processClientPayout:l,addToast:f}=jn(),[m,p]=pe.useState("summary"),[x,S]=pe.useState({key:"shipmentCount",direction:"desc"}),[N,j]=pe.useState(null),[v,O]=pe.useState("all"),[E,P]=pe.useState("all"),[C,_]=pe.useState(""),[D,U]=pe.useState(""),[Y,ae]=pe.useState(""),[F,L]=pe.useState("all"),M=pe.useMemo(()=>{let fe=n.filter(le=>(le.roles||[]).includes(Vt.CLIENT)).map(le=>{const B=i.filter(Q=>Q.clientId===le.id),q=o.filter(Q=>Q.userId===le.id&&Q.type===ko.WITHDRAWAL_REQUEST&&Q.status==="Pending");return{id:le.id,publicId:le.publicId,name:le.name,partnerTier:le.partnerTier,manualTierAssignment:le.manualTierAssignment,shipmentCount:B.length,flatRateFee:le.flatRateFee||0,payoutRequestCount:q.length}});return v!=="all"&&(fe=fe.filter(le=>le.id===parseInt(v))),E!=="all"&&(fe=fe.filter(le=>le.partnerTier===E)),fe.sort((le,B)=>{const q=le[x.key],Q=B[x.key];if(q==null)return 1;if(Q==null)return-1;if(x.key==="partnerTier"){const he={[Gi.GOLD]:3,[Gi.SILVER]:2,[Gi.BRONZE]:1},ue=he[le.partnerTier]||0,je=he[B.partnerTier]||0;return ue<je?x.direction==="asc"?-1:1:ue>je?x.direction==="asc"?1:-1:0}return q<Q?x.direction==="asc"?-1:1:q>Q?x.direction==="asc"?1:-1:0})},[n,i,o,x,v,E]),z=pe.useMemo(()=>o.filter(W=>W.type===ko.WITHDRAWAL_REQUEST&&W.status==="Pending").map(W=>{const fe=n.find(le=>le.id===W.userId);return{...W,clientName:(fe==null?void 0:fe.name)||"Unknown Client",clientEmail:(fe==null?void 0:fe.email)||"N/A"}}).filter(W=>C.trim()?W.clientName.toLowerCase().includes(C.toLowerCase().trim()):!0).sort((W,fe)=>new Date(fe.date).getTime()-new Date(W.date).getTime()),[o,n,C]),k=pe.useMemo(()=>{if(!N)return[];let W=i.filter(fe=>fe.clientId===N.id);if(D&&(W=W.filter(fe=>fe.creationDate.startsWith(D))),Y.trim()){const fe=Y.trim().toLowerCase();W=W.filter(le=>le.id.toLowerCase().includes(fe)||le.recipientName.toLowerCase().includes(fe))}return F!=="all"&&(W=W.filter(fe=>fe.status===F)),W.sort((fe,le)=>new Date(le.creationDate).getTime()-new Date(fe.creationDate).getTime())},[i,N,D,Y,F]),R=W=>{const fe=x.key===W&&x.direction==="asc"?"desc":"asc";S({key:W,direction:fe})},re=W=>{const fe=n.find(le=>le.id===W);fe&&j(fe)},ee=W=>{l(W),f("Payout processed successfully","success")},ne=()=>{const W=["Client Name","Client ID","Total Shipments","Flat Rate (EGP)","Partner Tier","Pending Payouts"],fe=M.map(le=>[le.name,le.publicId,le.shipmentCount,le.flatRateFee.toFixed(2),le.partnerTier||"N/A",le.payoutRequestCount]);Fi(W,fe,"Client_Analytics_Summary")},K=()=>{const W=["Date","Client Name","Client Email","Amount (EGP)","Description"],fe=z.map(le=>[new Date(le.date).toLocaleString(),le.clientName,le.clientEmail,Math.abs(le.amount).toFixed(2),le.description]);Fi(W,fe,"Pending_Client_Payouts")},G=W=>{switch(W){case Gi.GOLD:return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case Gi.SILVER:return"bg-gray-100 text-gray-800 dark:bg-gray-700/30 dark:text-gray-300";case Gi.BRONZE:return"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300";default:return"bg-secondary text-secondary-foreground"}},te=({title:W,sortKey:fe})=>s.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase cursor-pointer",onClick:()=>R(fe),children:s.jsxs("div",{className:"flex items-center gap-1",children:[W,x.key===fe&&s.jsx(Lw,{className:`w-4 h-4 transition-transform ${x.direction==="desc"?"rotate-180":""}`})]})});return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Client Analytics"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Overview of client shipment volumes and pending payouts."})]}),s.jsxs("button",{onClick:m==="summary"?ne:K,className:"w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition",children:[s.jsx(ca,{className:"w-5 h-5"}),"Export CSV"]})]}),s.jsx("div",{className:"border-b border-border",children:s.jsxs("nav",{className:"-mb-px flex space-x-6",children:[s.jsx("button",{onClick:()=>p("summary"),className:`py-3 px-1 border-b-2 font-semibold text-sm ${m==="summary"?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground hover:border-border"}`,children:"Client Summary"}),s.jsxs("button",{onClick:()=>p("payouts"),className:`py-3 px-1 border-b-2 font-semibold text-sm ${m==="payouts"?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground hover:border-border"}`,children:["Pending Payouts",z.length>0&&s.jsx("span",{className:"ml-2 bg-yellow-400 text-yellow-900 text-xs font-bold px-2 py-0.5 rounded-full",children:z.length})]})]})}),m==="summary"&&s.jsxs("div",{className:"card overflow-hidden",children:[s.jsxs("div",{className:"p-4 border-b border-border flex flex-col sm:flex-row gap-4",children:[s.jsxs("select",{value:v,onChange:W=>O(W.target.value),className:"w-full md:w-1/3 px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background",children:[s.jsx("option",{value:"all",children:"Filter by Client"}),n.filter(W=>W.roles.includes(Vt.CLIENT)).map(W=>s.jsxs("option",{value:W.id,children:[W.name," (",W.publicId,")"]},W.id))]}),s.jsxs("select",{value:E,onChange:W=>P(W.target.value),className:"w-full md:w-1/3 px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background",children:[s.jsx("option",{value:"all",children:"Filter by Tier"}),Object.values(Gi).map(W=>s.jsx("option",{value:W,children:W},W)),s.jsx("option",{value:"",children:"Not Assigned"})]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{className:"bg-secondary",children:s.jsxs("tr",{children:[s.jsx(te,{title:"Client",sortKey:"name"}),s.jsx(te,{title:"ID",sortKey:"publicId"}),s.jsx(te,{title:"Total Shipments",sortKey:"shipmentCount"}),s.jsx(te,{title:"Partner Tier",sortKey:"partnerTier"}),s.jsx(te,{title:"Flat Rate",sortKey:"flatRateFee"}),s.jsx(te,{title:"Pending Payouts",sortKey:"payoutRequestCount"}),s.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-border",children:M.map(W=>s.jsxs("tr",{children:[s.jsx("td",{className:"p-4 font-semibold",children:s.jsx("button",{onClick:()=>t("users"),className:"text-primary hover:underline",children:W.name})}),s.jsx("td",{className:"p-4 font-mono text-xs text-muted-foreground",children:W.publicId}),s.jsx("td",{className:"p-4 text-muted-foreground font-mono",children:W.shipmentCount}),s.jsx("td",{className:"p-4",children:s.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${G(W.partnerTier)}`,children:W.partnerTier||"N/A"})}),s.jsxs("td",{className:"p-4 text-primary font-semibold",children:[W.flatRateFee.toFixed(2)," EGP"]}),s.jsx("td",{className:"p-4 text-blue-600 font-semibold",children:W.payoutRequestCount}),s.jsx("td",{className:"p-4",children:s.jsx("button",{onClick:()=>re(W.id),className:"px-3 py-1.5 bg-primary text-primary-foreground font-semibold rounded-lg hover:bg-primary/90 text-sm",children:"View Shipments"})})]},W.id))})]})})]}),m==="payouts"&&s.jsxs("div",{className:"card overflow-hidden",children:[s.jsx("div",{className:"p-4 border-b border-border",children:s.jsx("input",{type:"text",placeholder:"Filter by client name...",value:C,onChange:W=>_(W.target.value),className:"w-full md:w-1/3 px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background"})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{className:"bg-secondary",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Date"}),s.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Client"}),s.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Amount"}),s.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Actions"})]})}),s.jsxs("tbody",{className:"divide-y divide-border",children:[z.map(W=>s.jsxs("tr",{children:[s.jsx("td",{className:"p-4 text-sm text-muted-foreground",children:new Date(W.date).toLocaleString()}),s.jsxs("td",{className:"p-4",children:[s.jsx("p",{className:"font-semibold",children:W.clientName}),s.jsx("p",{className:"text-xs text-muted-foreground",children:W.clientEmail})]}),s.jsxs("td",{className:"p-4 font-bold text-red-600",children:["-",Math.abs(W.amount).toFixed(2)," EGP"]}),s.jsx("td",{className:"p-4",children:s.jsx("button",{onClick:()=>ee(W.id),className:"px-3 py-1.5 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 text-sm",children:"Process Payout"})})]},W.id)),z.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:4,className:"text-center py-12 text-muted-foreground",children:"No pending payouts."})})]})]})})]}),s.jsx(fr,{isOpen:!!N,onClose:()=>j(null),title:`Shipments for ${N==null?void 0:N.name}`,size:"4xl",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"mb-4 bg-secondary p-3 rounded-lg flex flex-col sm:flex-row gap-4 items-center flex-wrap",children:[s.jsx("input",{type:"text",placeholder:"Search ID or Recipient...",value:Y,onChange:W=>ae(W.target.value),className:"flex-grow w-full sm:w-auto px-3 py-2 border border-border rounded-lg bg-background"}),s.jsxs("select",{value:F,onChange:W=>L(W.target.value),className:"w-full sm:w-auto px-3 py-2 border border-border rounded-lg bg-background",children:[s.jsx("option",{value:"all",children:"All Statuses"}),Object.values(ht).map(W=>s.jsx("option",{value:W,children:W},W))]}),s.jsx("input",{type:"date",value:D,onChange:W=>U(W.target.value),className:"w-full sm:w-auto px-3 py-2 border border-border rounded-lg bg-background"})]}),s.jsx("div",{className:"max-h-[60vh] overflow-y-auto",children:s.jsx(ol,{shipments:k,onSelect:W=>{e(W),j(null)}})})]})})]})},X6=({courierStats:e})=>{const t=e.deliveriesCompleted+e.deliveriesFailed>0?e.deliveriesCompleted/(e.deliveriesCompleted+e.deliveriesFailed)*100:100,n=e.deliveriesCompleted>0?e.totalEarnings/e.deliveriesCompleted:0;return s.jsxs("div",{className:"card p-6",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Earnings"}),s.jsxs("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[e.totalEarnings.toFixed(2)," EGP"]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Current Balance"}),s.jsxs("div",{className:"text-2xl font-bold text-foreground",children:[e.currentBalance.toFixed(2)," EGP"]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Pending Payouts"}),s.jsxs("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[e.pendingEarnings.toFixed(2)," EGP"]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg. Per Delivery"}),s.jsxs("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:[n.toFixed(2)," EGP"]})]})]}),s.jsxs("div",{className:"mt-4 pt-4 border-t border-border flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Performance:"}),s.jsxs("div",{className:"flex items-center",title:`Rating: ${e.performanceRating}`,children:[[...Array(5)].map((i,o)=>s.jsx("span",{className:`text-xl ${o<Math.floor(e.performanceRating)?"text-yellow-400":"text-gray-300 dark:text-gray-600"}`,children:""},o)),s.jsxs("span",{className:"ml-1 text-sm font-medium",children:["(",e.performanceRating,"/5.0)"]})]})]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Success Rate: ",s.jsxs("span",{className:"font-bold text-foreground",children:[t.toFixed(1),"%"]})]}),e.isRestricted&&s.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300 rounded-full text-xs font-medium",children:" Restricted"})]})]})},Z6=({transactions:e})=>{const t={[Fl.PENDING]:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300",[Fl.PROCESSED]:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",[Fl.FAILED]:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"};return s.jsxs("div",{className:"card overflow-hidden",children:[s.jsx("div",{className:"p-5 border-b border-border",children:s.jsx("h2",{className:"text-xl font-bold text-foreground",children:"Transaction History"})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{className:"bg-secondary",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase",children:"Date"}),s.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase",children:"Description"}),s.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase",children:"Type"}),s.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase text-right",children:"Amount (EGP)"})]})}),s.jsxs("tbody",{className:"divide-y divide-border",children:[e.map(n=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 text-sm text-muted-foreground whitespace-nowrap",children:new Date(n.timestamp).toLocaleDateString()}),s.jsxs("td",{className:"px-6 py-4 text-sm text-foreground",children:[n.description,n.transferEvidencePath&&s.jsxs("a",{href:`/${n.transferEvidencePath}`,target:"_blank",rel:"noopener noreferrer",className:"ml-2 inline-flex items-center gap-1 text-xs text-primary hover:underline",children:[s.jsx(iy,{className:"w-4 h-4"})," View Proof"]})]}),s.jsxs("td",{className:"px-6 py-4 text-sm",children:[s.jsx("span",{className:`px-2 py-1 font-semibold text-xs rounded-full ${n.amount>=0?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300":"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300"}`,children:n.type}),(n.type===Jc.WITHDRAWAL_REQUEST||n.type===Jc.WITHDRAWAL_PROCESSED)&&s.jsx("span",{className:`ml-2 px-2 py-1 font-semibold text-xs rounded-full ${t[n.status]}`,children:n.status})]}),s.jsx("td",{className:`px-6 py-4 text-right font-bold ${n.amount>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:n.amount.toFixed(2)})]},n.id)),e.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:4,className:"text-center py-8 text-muted-foreground",children:"No transactions recorded."})})]})]})})]})},Q6=()=>{const{currentUser:e,courierStats:t,courierTransactions:n,requestCourierPayout:i,addToast:o}=jn(),[l,f]=pe.useState(!1),[m,p]=pe.useState(""),[x,S]=pe.useState("Cash");if(!e)return null;const N=t.find(E=>E.courierId===e.id),j=n.filter(E=>E.courierId===e.id).sort((E,P)=>new Date(P.timestamp).getTime()-new Date(E.timestamp).getTime()),v=j.some(E=>E.type===Jc.WITHDRAWAL_REQUEST&&E.status===Fl.PENDING),O=()=>{if(!N)return;const E=parseFloat(m);if(isNaN(E)||E<=0){o("Please enter a valid positive amount.","error");return}if(E>N.currentBalance){o("Payout amount cannot exceed your current balance.","error");return}i(e.id,E,x),o("Payout requested successfully!","success"),f(!1),p("")};return N?s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"My Earnings"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Your performance and financial summary."})]}),s.jsx("button",{onClick:()=>f(!0),disabled:N.currentBalance<=0||v,className:"px-6 py-3 bg-green-600 text-white font-semibold rounded-lg shadow-sm hover:bg-green-700 transition disabled:bg-muted disabled:cursor-not-allowed",title:v?"You already have a pending payout request":"",children:"Request Payout"})]}),s.jsx(X6,{courierStats:N}),s.jsx(Z6,{transactions:j}),s.jsx(fr,{isOpen:l,onClose:()=>f(!1),title:"Request a Payout",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("p",{children:["Your current balance is ",s.jsxs("strong",{className:"text-green-600 dark:text-green-400",children:[N.currentBalance.toFixed(2)," EGP"]}),"."]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Payment Method"}),s.jsxs("select",{value:x,onChange:E=>S(E.target.value),className:"w-full px-4 py-2 border border-border rounded-lg bg-background",children:[s.jsx("option",{value:"Cash",children:"Cash"}),s.jsx("option",{value:"Bank Transfer",children:"Bank Transfer"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"payout-amount",className:"block text-sm font-medium text-muted-foreground mb-1",children:"Amount to withdraw (EGP)"}),s.jsx("input",{id:"payout-amount",type:"number",value:m,onChange:E=>p(E.target.value),placeholder:`Max ${N.currentBalance.toFixed(2)}`,className:"w-full px-4 py-2 border border-border rounded-lg bg-background",min:"0.01",step:"0.01",max:N.currentBalance})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Once confirmed, an administrator will process your request. The funds will then be deducted from your balance and transferred to you."}),s.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[s.jsx("button",{onClick:()=>f(!1),className:"px-4 py-2 bg-secondary rounded-lg font-semibold",children:"Cancel"}),s.jsx("button",{onClick:O,className:"px-4 py-2 bg-green-600 text-white rounded-lg font-semibold",children:"Confirm Request"})]})]})})]}):s.jsx("div",{className:"text-center p-8 card",children:"Could not load your financial data."})},K6=({onSelectShipment:e})=>{const{users:t,shipments:n,courierStats:i,courierTransactions:o,updateCourierSettings:l,applyManualPenalty:f,processCourierPayout:m,declineCourierPayout:p,getAdminFinancials:x}=jn(),[S,N]=pe.useState(null),[j,v]=pe.useState(!1),[O,E]=pe.useState(""),[P,C]=pe.useState({key:"name",direction:"asc"}),[_,D]=pe.useState(null),[U,Y]=pe.useState(""),ae=x(),F=pe.useMemo(()=>{let ee=t.filter(ne=>(ne.roles||[]).includes(Vt.COURIER)).map(ne=>{const K=i.find(B=>B.courierId===ne.id),G=o.filter(B=>B.courierId===ne.id&&B.type===Jc.WITHDRAWAL_REQUEST&&B.status===Fl.PENDING),te=n.filter(B=>B.courierId===ne.id&&[ht.OUT_FOR_DELIVERY,ht.ASSIGNED_TO_COURIER].includes(B.status)).length,W=n.filter(B=>B.courierId===ne.id).length,fe=(K==null?void 0:K.deliveriesCompleted)||0,le=(K==null?void 0:K.deliveriesFailed)||0;return{user:ne,stats:K,pendingPayouts:G,pendingCount:te,totalAssigned:W,totalCompleted:fe,totalFailed:le}});return O.trim()&&(ee=ee.filter(({user:ne})=>ne.name.toLowerCase().includes(O.trim().toLowerCase()))),ee.sort((ne,K)=>{var fe,le;const G=P.key,te=G in ne.user?ne.user[G]:(fe=ne.stats)==null?void 0:fe[G],W=G in K.user?K.user[G]:(le=K.stats)==null?void 0:le[G];return te==null?1:W==null?-1:te<W?P.direction==="asc"?-1:1:te>W?P.direction==="asc"?1:-1:0})},[t,i,o,n,O,P]),L=ee=>{const ne=P.key===ee&&P.direction==="asc"?"desc":"asc";C({key:ee,direction:ne})},M=()=>{const ee=["Courier Name","Email","Phone","Status","Total Assigned","Completed","Failed","Pending","Total Earnings (EGP)","Current Balance (EGP)","Commission Type","Commission Value"],ne=F.map(({user:K,stats:G,totalAssigned:te,totalCompleted:W,totalFailed:fe,pendingCount:le})=>{var B,q;return[K.name,K.email,K.phone||"N/A",G!=null&&G.isRestricted?"Restricted":"Active",te,W,fe,le,((B=G==null?void 0:G.totalEarnings)==null?void 0:B.toFixed(2))||"0.00",((q=G==null?void 0:G.currentBalance)==null?void 0:q.toFixed(2))||"0.00",(G==null?void 0:G.commissionType)||"N/A",(G==null?void 0:G.commissionValue)||"N/A"]});Fi(ee,ne,"Courier_Performance_Report")},z=ee=>{const ne=i.find(K=>K.courierId===ee);ne&&(N(ne),v(!0))},k=()=>{v(!1),N(null)},R=(ee,ne,K)=>{let G=[];K==="delivered"?(G=n.filter(te=>te.courierId===ee&&te.status===ht.DELIVERED),Y(`Delivered Shipments for ${ne}`)):K==="pending"?(G=n.filter(te=>te.courierId===ee&&[ht.OUT_FOR_DELIVERY,ht.ASSIGNED_TO_COURIER].includes(te.status)),Y(`Pending Shipments for ${ne}`)):K==="assigned"&&(G=n.filter(te=>te.courierId===ee),Y(`All Assigned Shipments for ${ne}`)),D(G)},re=ee=>{e(ee),D(null)};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Courier Performance"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage courier financials, restrictions, and view performance metrics."})]}),s.jsxs("button",{onClick:M,className:"w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition",children:[s.jsx(ca,{className:"w-5 h-5"}),"Export CSV"]})]}),s.jsx(kt,{title:"Total Owed to Couriers",value:`${ae.totalOwedToCouriers.toFixed(2)} EGP`,icon:s.jsx(qi,{className:"w-7 h-7"}),color:"#8b5cf6",subtitle:"Sum of all courier current balances"}),s.jsxs("div",{className:"card overflow-hidden",children:[s.jsx("div",{className:"p-4 border-b border-border",children:s.jsx("input",{type:"text",placeholder:"Filter couriers by name...",value:O,onChange:ee=>E(ee.target.value),className:"w-full md:w-1/3 px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background"})}),s.jsx("div",{className:"overflow-x-auto hidden lg:block",children:s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{className:"bg-secondary",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase cursor-pointer",onClick:()=>L("name"),children:"Courier"}),s.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase text-center cursor-pointer",onClick:()=>L("totalAssigned"),children:"Assigned"}),s.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase text-center cursor-pointer",onClick:()=>L("totalCompleted"),children:"Completed"}),s.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase text-center cursor-pointer",onClick:()=>L("totalFailed"),children:"Failed"}),s.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase text-center cursor-pointer",onClick:()=>L("pendingCount"),children:"Pending"}),s.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase cursor-pointer",onClick:()=>L("currentBalance"),children:"Earnings (Balance)"}),s.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Commission"}),s.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Status"}),s.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-border",children:F.map(({user:ee,stats:ne,pendingPayouts:K,pendingCount:G,totalAssigned:te,totalCompleted:W,totalFailed:fe})=>s.jsxs("tr",{children:[s.jsxs("td",{className:"p-4 font-semibold",children:[ee.name,s.jsx("p",{className:"font-mono text-xs text-muted-foreground mt-1",children:ee.publicId})]}),s.jsx("td",{className:"p-4 font-mono text-center",children:s.jsx("button",{onClick:()=>R(ee.id,ee.name,"assigned"),className:"font-mono text-muted-foreground hover:underline disabled:text-muted-foreground/50 disabled:no-underline",disabled:te===0,children:te})}),s.jsx("td",{className:"p-4 font-mono text-center",children:s.jsx("button",{onClick:()=>R(ee.id,ee.name,"delivered"),className:"font-mono text-green-600 hover:underline disabled:text-muted-foreground/50 disabled:no-underline",disabled:W===0,children:W})}),s.jsx("td",{className:"p-4 font-mono text-center text-red-600",children:fe}),s.jsx("td",{className:"p-4 font-mono text-center",children:s.jsx("button",{onClick:()=>R(ee.id,ee.name,"pending"),className:"font-mono text-blue-600 hover:underline disabled:text-muted-foreground/50 disabled:no-underline",disabled:G===0,children:G})}),s.jsx("td",{className:"p-4 font-mono text-sm",children:ne?`${ne.totalEarnings.toFixed(2)} / ${ne.currentBalance.toFixed(2)}`:"N/A"}),s.jsx("td",{className:"p-4 text-sm",children:(ne==null?void 0:ne.commissionType)==="flat"?`${ne.commissionValue} EGP`:`${ne==null?void 0:ne.commissionValue}%`}),s.jsxs("td",{className:"p-4",children:[ne!=null&&ne.isRestricted?s.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300",children:"Restricted"}):s.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",children:"Active"}),K.length>0&&s.jsx("span",{className:"ml-2 px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300",children:"Payout Pending"})]}),s.jsx("td",{className:"p-4",children:s.jsx("button",{onClick:()=>z(ee.id),className:"px-3 py-1.5 bg-primary text-primary-foreground font-semibold rounded-lg hover:bg-primary/90 text-sm",children:"Manage"})})]},ee.id))})]})}),s.jsx("div",{className:"lg:hidden p-4 space-y-4 bg-secondary",children:F.map(({user:ee,stats:ne,pendingPayouts:K,pendingCount:G,totalAssigned:te,totalCompleted:W,totalFailed:fe})=>s.jsxs("div",{className:"responsive-card",children:[s.jsxs("div",{className:"responsive-card-header",children:[s.jsx("span",{className:"font-semibold text-foreground",children:ee.name}),s.jsxs("div",{className:"flex items-center gap-2",children:[ne!=null&&ne.isRestricted?s.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300",children:"Restricted"}):s.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",children:"Active"}),K.length>0&&s.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300",children:"Payout"})]})]}),s.jsx("p",{className:"font-mono text-xs text-muted-foreground",children:ee.publicId}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-2",children:[s.jsx("div",{className:"text-center",children:s.jsxs("button",{onClick:()=>R(ee.id,ee.name,"assigned"),disabled:te===0,className:"disabled:opacity-50",children:[s.jsx("div",{className:"font-bold text-lg text-foreground",children:te}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Assigned"})]})}),s.jsx("div",{className:"text-center",children:s.jsxs("button",{onClick:()=>R(ee.id,ee.name,"delivered"),disabled:W===0,className:"disabled:opacity-50",children:[s.jsx("div",{className:"font-bold text-lg text-green-600",children:W}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Completed"})]})}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"font-bold text-lg text-red-600",children:fe}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Failed"})]}),s.jsx("div",{className:"text-center",children:s.jsxs("button",{onClick:()=>R(ee.id,ee.name,"pending"),disabled:G===0,className:"disabled:opacity-50",children:[s.jsx("div",{className:"font-bold text-lg text-blue-600",children:G}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Pending"})]})})]}),s.jsxs("div",{className:"responsive-card-item",children:[s.jsx("span",{className:"responsive-card-label",children:"Earnings (Balance)"}),s.jsx("span",{className:"responsive-card-value font-mono",children:ne?`${ne.currentBalance.toFixed(2)} EGP`:"N/A"})]}),s.jsxs("div",{className:"responsive-card-item",children:[s.jsx("span",{className:"responsive-card-label",children:"Commission"}),s.jsx("span",{className:"responsive-card-value",children:(ne==null?void 0:ne.commissionType)==="flat"?`${ne.commissionValue} EGP`:`${ne==null?void 0:ne.commissionValue}%`})]}),s.jsx("button",{onClick:()=>z(ee.id),className:"mt-3 w-full px-3 py-2 bg-primary text-primary-foreground font-semibold rounded-lg hover:bg-primary/90 text-sm",children:"Manage Courier"})]},ee.id))})]}),S&&j&&s.jsx(J6,{isOpen:j,onClose:k,courierStats:S,courierUser:t.find(ee=>ee.id===S.courierId),payoutRequests:o.filter(ee=>ee.courierId===S.courierId&&ee.type===Jc.WITHDRAWAL_REQUEST&&ee.status===Fl.PENDING),onUpdateSettings:l,onApplyPenalty:f,onProcessPayout:m,onDeclinePayout:p}),s.jsx(fr,{isOpen:!!_,onClose:()=>D(null),title:U,size:"4xl",children:_&&s.jsx("div",{className:"max-h-[70vh] overflow-y-auto",children:s.jsx(ol,{shipments:_,onSelect:re})})})]})},J6=({isOpen:e,onClose:t,courierStats:n,courierUser:i,payoutRequests:o,onUpdateSettings:l,onApplyPenalty:f,onProcessPayout:m,onDeclinePayout:p})=>{const{shipments:x,addToast:S}=jn(),[N,j]=pe.useState({commissionType:n.commissionType,commissionValue:n.commissionValue}),[v,O]=pe.useState(0),[E,P]=pe.useState(""),[C,_]=pe.useState({}),D=(F,L)=>{var z;const M=(z=F.target.files)==null?void 0:z[0];if(M){const k=new FileReader;k.onloadend=()=>{_(R=>({...R,[L]:k.result}))},k.readAsDataURL(M)}};pe.useEffect(()=>{j({commissionType:n.commissionType,commissionValue:n.commissionValue})},[n]);const U=()=>{l(i.id,N),t()},Y=()=>{v>0&&E&&(f(i.id,v,E),O(0),P(""),t())},ae=F=>{if(F.paymentMethod==="Bank Transfer"&&!C[F.id]){S("Please upload proof of transfer for this payout.","error");return}m(F.id,Math.abs(F.amount),C[F.id])};return s.jsx(fr,{isOpen:e,onClose:t,title:`Manage ${i.name}`,size:"2xl",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"p-4 bg-secondary rounded-lg",children:[s.jsx("h3",{className:"font-bold text-foreground mb-3",children:"Commission Settings"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Type"}),s.jsxs("select",{value:N.commissionType,onChange:F=>j(L=>({...L,commissionType:F.target.value})),className:"w-full p-2 border border-border rounded-md bg-background",children:[s.jsx("option",{value:"flat",children:"Flat Rate"}),s.jsx("option",{value:"percentage",children:"Percentage"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Value"}),s.jsx("input",{type:"number",value:N.commissionValue,onChange:F=>j(L=>({...L,commissionValue:parseFloat(F.target.value)})),className:"w-full p-2 border border-border rounded-md bg-background"})]})]}),s.jsx("button",{onClick:U,className:"mt-4 w-full bg-primary text-primary-foreground py-2 rounded-lg font-semibold",children:"Save Settings"})]}),s.jsxs("div",{className:"p-4 bg-secondary rounded-lg",children:[s.jsx("h3",{className:"font-bold text-foreground mb-3",children:"Apply Manual Penalty"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Amount (EGP)"}),s.jsx("input",{type:"number",value:v,onChange:F=>O(parseFloat(F.target.value)),className:"w-full p-2 border border-border rounded-md bg-background"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Reason"}),s.jsx("input",{type:"text",value:E,onChange:F=>P(F.target.value),className:"w-full p-2 border border-border rounded-md bg-background"})]})]}),s.jsx("button",{onClick:Y,className:"mt-4 w-full bg-red-500 text-white py-2 rounded-lg font-semibold",children:"Apply Penalty"})]}),o.length>0&&s.jsxs("div",{className:"p-4 bg-secondary rounded-lg",children:[s.jsx("h3",{className:"font-bold text-foreground mb-3",children:"Pending Payout Requests"}),s.jsx("div",{className:"space-y-3",children:o.map(F=>s.jsxs("div",{className:"bg-background p-3 rounded-lg border border-border",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"font-semibold text-foreground",children:[(-F.amount).toFixed(2)," EGP"]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(F.timestamp).toLocaleString()}),s.jsx("p",{className:"text-xs text-muted-foreground",children:F.paymentMethod})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>p(F.id),className:"px-3 py-1 bg-red-100 text-red-800 text-xs font-semibold rounded",children:"Decline"}),s.jsx("button",{onClick:()=>ae(F),className:"px-3 py-1 bg-green-100 text-green-800 text-xs font-semibold rounded",children:"Process"})]})]}),F.paymentMethod==="Bank Transfer"&&s.jsxs("div",{className:"mt-2 pt-2 border-t border-border",children:[s.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Proof of Transfer"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"file",accept:"image/*",onChange:L=>D(L,F.id),className:"w-full text-xs"}),C[F.id]&&s.jsx(ay,{className:"w-4 h-4 text-green-500"})]})]})]},F.id))})]})]})})},$6=()=>{const{shipments:e,hasPermission:t,getCourierName:n,updateShipmentFees:i}=jn(),[o,l]=pe.useState(""),[f,m]=pe.useState("all"),[p,x]=pe.useState(""),S=t(Ut.VIEW_ADMIN_FINANCIALS),N=E=>{if([ht.DELIVERED,ht.DELIVERY_FAILED].includes(E.status))return!1;const P=new Date(Date.now()-2.5*24*60*60*1e3);return new Date(E.creationDate)<P},j=pe.useMemo(()=>{const E=e.length,P=e.filter(U=>U.status===ht.DELIVERED).length,C=e.filter(U=>U.status===ht.DELIVERY_FAILED).length,_=e.filter(U=>U.status===ht.OUT_FOR_DELIVERY).length,D=e.filter(N).length;return{total:E,delivered:P,failed:C,outForDelivery:_,overdue:D}},[e]),v=pe.useMemo(()=>{let E=[...e];if(p&&(E=E.filter(P=>P.creationDate.startsWith(p))),o.trim()){const P=o.trim().toLowerCase();E=E.filter(C=>C.id.toLowerCase().includes(P)||C.recipientName.toLowerCase().includes(P)||C.clientName.toLowerCase().includes(P))}return f!=="all"&&(f==="Overdue"?E=E.filter(N):E=E.filter(P=>P.status===f)),E.sort((P,C)=>new Date(C.creationDate).getTime()-new Date(P.creationDate).getTime())},[e,p,o,f]),O=()=>{const E=["ID","Client","Recipient","Date","Status","Courier","Total COD (EGP)","Package Value (EGP)"];S&&E.push("Client Fee (EGP)","Courier Commission (EGP)","Net Profit (EGP)");const P=v.map(C=>{const _=[C.id,C.clientName,C.recipientName,new Date(C.creationDate).toLocaleDateString(),C.status,n(C.courierId),C.price.toFixed(2),C.packageValue.toFixed(2)];if(S){const D=C.clientFlatRateFee||0,U=C.courierCommission||0;let Y=0;C.courierId&&C.clientFlatRateFee&&C.courierCommission&&(Y=D-U),_.push(D.toFixed(2),U.toFixed(2),Y.toFixed(2))}return _});Fi(E,P,"Total_Shipments_Report")};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Shipments Overview"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[s.jsx(kt,{title:"Total Shipments",value:j.total,icon:s.jsx(sa,{}),color:"#3b82f6"}),s.jsx(kt,{title:"Delivered",value:j.delivered,icon:s.jsx(ao,{}),color:"#16a34a"}),s.jsx(kt,{title:"Out for Delivery",value:j.outForDelivery,icon:s.jsx(qi,{}),color:"#06b6d4"}),s.jsx(kt,{title:"Failed",value:j.failed,icon:s.jsx(su,{}),color:"#ef4444"}),s.jsx(kt,{title:"Overdue",value:j.overdue,icon:s.jsx(Rh,{}),color:"#f97316"})]}),s.jsxs("div",{className:"card",children:[s.jsxs("div",{className:"p-4 border-b border-border flex flex-col lg:flex-row gap-4 items-center flex-wrap",children:[s.jsx("input",{type:"text",placeholder:"Search ID, Recipient, Client...",value:o,onChange:E=>l(E.target.value),className:"flex-grow w-full lg:w-auto px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background"}),s.jsxs("select",{value:f,onChange:E=>m(E.target.value),className:"w-full lg:w-auto px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background",children:[s.jsx("option",{value:"all",children:"All Statuses"}),s.jsx("option",{value:"Overdue",children:"Overdue"}),Object.values(ht).map(E=>s.jsx("option",{value:E,children:E},E))]}),s.jsx("input",{type:"date",value:p,onChange:E=>x(E.target.value),className:"w-full lg:w-auto px-4 py-2 border border-border rounded-lg","aria-label":"Filter by creation date"}),s.jsxs("button",{onClick:O,className:"w-full lg:w-auto flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition",children:[s.jsx(ca,{className:"w-5 h-5"}),"Export CSV"]})]}),s.jsx(ol,{shipments:v,showPackageValue:!0,priceColumnTitle:"Total COD",showClientFee:S,showCourierCommission:S,showNetProfit:S,showEditableFees:S,updateShipmentFees:S?i:void 0})]})]})},eA={0:"bwbwwwbbw",1:"bbwbwwwbw",2:"bwbbwwwbw",3:"bbbbwwwbw",4:"bwbwbbwbw",5:"bbwbwbbwbw",6:"bwbbwbbwbw",7:"bwbwwwbbwbw",8:"bbwbwwbbw",9:"bwbbwwbbw",A:"bbwbwwwbbw",B:"bwbbwwwbbw",C:"bbbbwwwbbw",D:"bwbwbbwbbw",E:"bbwbwbbwbbw",F:"bwbbwbbwbbw",G:"bwbwwwbbbwbw",H:"bbwbwwwbbbwbw",I:"bwbbwwwbbbwbw",J:"bwbwbbwbbbwbw",K:"bbwbwwwbwbw",L:"bwbbwwwbwbw",M:"bbbbwwwbwbw",N:"bwbwbbwbwbw",O:"bbwbwbbwbwbw",P:"bwbbwbbwbwbw",Q:"bwbwwwbbwbwbw",R:"bbwbwwbbwbw",S:"bwbbwwbbwbw",T:"bwbwbbwbbwbw",U:"bbwbbwbwwwbw",V:"bwwbbwbwwwbw",W:"bbwbbwbbwwwbw",X:"bwwbwbwbbwbw",Y:"bbwbwbwbbwbw",Z:"bwwbwbwbbwbw","-":"bwwbwbwwwbw",".":"bbwbwbwwwbw"," ":"bwwbbwbwwwbw",$:"bwwbwwbwwbwbw","/":"bwwbwwbwbwwbw","+":"bwwbwbwwbwwbw","%":"bwbwwbwwbwwbw","*":"bwwbwbbwbwwwbw"},tA=e=>{const t=`*${e.toUpperCase().replace(/[^A-Z0-9-]/g,"")}*`;let n="",i=0;const o=1.5,l=o*2.5;for(const f of t){const m=eA[f];if(m){for(let p=0;p<m.length;p++){const x=p%2===0,N=m[p]==="B"||m[p]==="w"?l:o;x&&(n+=`M${i},0 V60 `),i+=N}i+=o}}return s.jsx("svg",{x:"0px",y:"0px",viewBox:`0 0 ${i} 60`,className:"w-full h-12",children:s.jsx("path",{d:n,stroke:"#000000",strokeWidth:o})})},nA=({shipment:e})=>{const t=e.clientFlatRateFee||e.price-e.packageValue,n=e.id.split("-").slice(2).join("-");return s.jsx("div",{className:"bg-white p-8 border-4 border-dashed border-slate-300 w-full printable-label-container",children:s.jsxs("div",{className:"printable-label",style:{fontFamily:"sans-serif",color:"black"},children:[s.jsxs("header",{className:"flex justify-between items-center pb-4 border-b-2 border-black",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(ey,{className:"w-12 h-12"}),s.jsx("div",{children:s.jsx("h1",{className:"text-2xl font-extrabold text-black",children:"Flash Express"})})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-sm",children:["Date: ",new Date(e.creationDate).toLocaleDateString()]}),s.jsx("p",{className:"text-sm",children:"Shipment ID:"}),s.jsx("p",{className:"font-bold font-mono text-lg",children:e.id})]})]}),s.jsxs("main",{className:"grid grid-cols-2 gap-8 my-8",children:[s.jsxs("div",{className:"pr-8 border-r-2 border-dashed border-slate-400",children:[s.jsx("h2",{className:"text-xs font-bold uppercase text-slate-600 mb-2",children:"FROM"}),s.jsx("p",{className:"font-bold text-lg",children:e.clientName}),s.jsxs("p",{children:[e.fromAddress.street,", ",e.fromAddress.details]}),s.jsxs("p",{children:[e.fromAddress.city,", ",e.fromAddress.zone]})]}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xs font-bold uppercase text-slate-600 mb-2",children:"TO"}),s.jsx("p",{className:"font-bold text-xl",children:e.recipientName}),s.jsxs("p",{className:"text-lg",children:[e.toAddress.street,", ",e.toAddress.details]}),s.jsxs("p",{className:"text-lg",children:[e.toAddress.city,", ",e.toAddress.zone]}),s.jsxs("p",{className:"font-bold text-lg mt-2",children:["Phone: ",e.recipientPhone]})]})]}),s.jsx("footer",{className:"border-t-2 border-black pt-4",children:s.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase font-bold text-slate-600",children:"Payment Details"}),s.jsx("p",{className:"text-2xl font-bold",children:e.paymentMethod}),e.paymentMethod===Mn.COD&&s.jsxs("div",{className:"mt-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:"Package Value:"})," ",s.jsxs("span",{children:[e.packageValue.toFixed(2)," EGP"]})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:"Shipping Fee:"})," ",s.jsxs("span",{children:[t.toFixed(2)," EGP"]})]}),s.jsxs("div",{className:"flex justify-between text-xl font-extrabold mt-1 border-t border-black pt-1",children:[s.jsx("span",{children:"COD Amount:"})," ",s.jsxs("span",{className:"text-green-600",children:[e.price.toFixed(2)," EGP"]})]})]}),s.jsx("p",{className:"text-xs uppercase font-bold text-slate-600 mt-4",children:"Package"}),s.jsxs("p",{children:[e.packageDescription,e.isLargeOrder&&" (Large Order)"]})]}),s.jsxs("div",{className:"text-center",children:[tA(n),s.jsx("p",{className:"font-mono tracking-widest text-sm mt-1",children:e.id})]})]})})]})})},rA=e=>e.replace(/_/g," ").replace(/\b\w/g,t=>t.toUpperCase()),iA=()=>{const{customRoles:e,users:t,hasPermission:n,addRole:i,updateRole:o,deleteRole:l,addToast:f}=jn(),[m,p]=pe.useState(!1),[x,S]=pe.useState("add"),[N,j]=pe.useState(null),[v,O]=pe.useState(null);if(!n(Ut.MANAGE_ROLES))return s.jsxs("div",{className:"text-center p-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Access Denied"}),s.jsx("p",{className:"text-muted-foreground",children:"You do not have permission to manage roles."})]});const E=(Y,ae)=>{S(Y),j(ae||null),p(!0)},P=()=>{p(!1),j(null)},C=Y=>{if(Y.isSystemRole){f("System roles cannot be deleted.","error");return}O(Y)},_=()=>{v&&(l(v.id),O(null))},D=pe.useMemo(()=>e.filter(Y=>Y.isSystemRole).length,[e]),U=e.length-D;return s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl font-bold text-foreground",children:"Role Management"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Define roles and manage their permissions across the application."})]}),s.jsxs("button",{onClick:()=>E("add"),className:"w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-3 bg-primary text-primary-foreground font-semibold rounded-lg hover:bg-primary/90 transition shadow-sm",children:[s.jsx(tl,{className:"w-5 h-5"}),"Create New Role"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx(kt,{title:"Total Roles",value:e.length,icon:s.jsx(Ic,{}),color:"#3b82f6"}),s.jsx(kt,{title:"Custom Roles",value:U,icon:s.jsx(Ts,{}),color:"#16a34a"}),s.jsx(kt,{title:"System Roles",value:D,icon:s.jsx(gp,{}),color:"#f97316"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(Y=>{const ae=t.filter(F=>(F.roles||[]).includes(Y.name)).length;return s.jsxs("div",{className:"card flex flex-col hover:shadow-lg hover:-translate-y-1 transition-all duration-300",children:[s.jsxs("div",{className:"p-5",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx("h3",{className:"text-lg font-bold text-foreground",children:Y.name}),Y.isSystemRole&&s.jsx("span",{title:"System Role",children:s.jsx(gp,{className:"w-5 h-5 text-muted-foreground"})})]}),s.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"A system-defined role with a set of permissions for core functionalities."})]}),s.jsxs("div",{className:"p-5 border-y border-border bg-secondary flex-grow grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-primary",children:ae}),s.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase",children:"Users"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-primary",children:Y.permissions.length}),s.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase",children:"Permissions"})]})]}),s.jsxs("div",{className:"p-3 flex items-center justify-end gap-2",children:[s.jsxs("button",{onClick:()=>E("edit",Y),className:"flex items-center gap-2 px-4 py-2 bg-secondary text-secondary-foreground font-semibold rounded-lg hover:bg-accent transition text-sm",children:[s.jsx(Ts,{className:"w-4 h-4"}),"Edit"]}),s.jsxs("button",{onClick:()=>C(Y),disabled:Y.isSystemRole,className:"flex items-center gap-2 px-4 py-2 bg-red-500/10 text-red-700 dark:text-red-400 font-semibold rounded-lg hover:bg-red-500/20 transition text-sm disabled:bg-muted disabled:text-muted-foreground disabled:cursor-not-allowed",children:[s.jsx(Od,{className:"w-4 h-4"}),"Delete"]})]})]},Y.id)})}),m&&s.jsx(aA,{isOpen:m,onClose:P,mode:x,role:N,addRole:i,updateRole:o}),s.jsx(fr,{isOpen:!!v,onClose:()=>O(null),title:"Confirm Deletion",children:v&&s.jsxs("div",{children:[s.jsxs("p",{children:["Are you sure you want to delete the role ",s.jsx("strong",{children:v.name}),"?"]}),s.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Users with this role will lose their permissions. This action cannot be undone."}),s.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[s.jsx("button",{onClick:()=>O(null),className:"px-4 py-2 bg-secondary rounded-lg font-semibold",children:"Cancel"}),s.jsx("button",{onClick:_,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-semibold",children:"Delete Role"})]})]})})]})},aA=({isOpen:e,onClose:t,mode:n,role:i,addRole:o,updateRole:l})=>{const[f,m]=pe.useState((i==null?void 0:i.name)||""),[p,x]=pe.useState((i==null?void 0:i.permissions)||[]),[S,N]=pe.useState({}),j=pe.useMemo(()=>Object.values(Ut).reduce((C,_)=>{const D=_.split("_")[0];return C[D]||(C[D]=[]),C[D].push(_),C},{}),[]),v=C=>{N(_=>({..._,[C]:!_[C]}))},O=(C,_)=>{const D=j[C];x(_?U=>[...new Set([...U,...D])]:U=>U.filter(Y=>!D.includes(Y)))},E=C=>{if(C.preventDefault(),n==="add")o({name:f,permissions:p,isSystemRole:!1}).then(t);else if(i){const _={name:f,permissions:p};l(i.id,_).then(t)}},P=({checked:C,onChange:_})=>s.jsx("button",{type:"button",onClick:()=>_(!C),className:`relative inline-flex items-center h-6 rounded-full w-11 transition-colors ${C?"bg-primary":"bg-muted"}`,children:s.jsx("span",{className:`inline-block w-4 h-4 transform bg-white rounded-full transition-transform ${C?"translate-x-6":"translate-x-1"}`})});return s.jsx(fr,{isOpen:e,onClose:t,title:n==="add"?"Create New Role":`Edit Role: ${i==null?void 0:i.name}`,size:"4xl",children:s.jsxs("form",{onSubmit:E,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Role Name"}),s.jsx("input",{type:"text",value:f,onChange:C=>m(C.target.value),className:"w-full px-4 py-2 border border-border rounded-lg bg-background",required:!0,disabled:i==null?void 0:i.isSystemRole}),(i==null?void 0:i.isSystemRole)&&s.jsx("p",{className:"text-xs text-muted-foreground mt-2 p-2 bg-secondary rounded",children:"Permissions for system roles can be modified, but the role name is fixed."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-2",children:"Permissions"}),s.jsx("div",{className:"space-y-2 max-h-[60vh] overflow-y-auto p-4 bg-secondary rounded-lg border border-border",children:Object.entries(j).map(([C,_])=>{const D=_.every(U=>p.includes(U));return s.jsxs("div",{className:"bg-background border border-border rounded-lg overflow-hidden",children:[s.jsxs("button",{type:"button",onClick:()=>v(C),className:"w-full flex justify-between items-center p-4",children:[s.jsx("h4",{className:"font-semibold text-foreground capitalize",children:C}),s.jsx(Iw,{className:`w-5 h-5 text-muted-foreground transition-transform ${S[C]?"rotate-180":""}`})]}),S[C]&&s.jsxs("div",{className:"p-4 border-t border-border",children:[s.jsx("div",{className:"pb-3 mb-3 border-b border-border",children:s.jsxs("label",{className:"flex items-center gap-3 w-full cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:D,onChange:U=>O(C,U.target.checked),className:"h-4 w-4 rounded border-border text-primary focus:ring-primary"}),s.jsx("span",{className:"text-sm font-semibold text-muted-foreground",children:"Select All"})]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4",children:_.map(U=>s.jsxs("label",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-foreground",children:rA(U)}),s.jsx(P,{checked:p.includes(U),onChange:Y=>{x(Y?ae=>[...new Set([...ae,U])]:ae=>ae.filter(F=>F!==U))}})]},U))})]})]},C)})})]}),s.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[s.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 bg-secondary text-secondary-foreground rounded-lg font-semibold hover:bg-accent transition",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-6 py-2 bg-primary text-primary-foreground rounded-lg font-semibold hover:bg-primary/90 transition",children:n==="add"?"Create Role":"Save Changes"})]})]})})},sA=({onSelectShipment:e})=>{const{currentUser:t,shipments:n,users:i}=jn(),[o,l]=pe.useState(""),[f,m]=pe.useState("all"),[p,x]=pe.useState(""),S=pe.useMemo(()=>i.filter(v=>v.roles.includes(Vt.CLIENT)),[i]),N=pe.useMemo(()=>{if(!t)return[];let v=n.filter(O=>O.courierId===t.id&&O.status===ht.DELIVERED);if(p){const O=new Date(p);v=v.filter(E=>E.deliveryDate?new Date(E.deliveryDate).toDateString()===O.toDateString():!1)}if(f!=="all"&&(v=v.filter(O=>O.clientId===f)),o.trim()!==""){const O=o.trim().toLowerCase();v=v.filter(E=>E.id.toLowerCase().includes(O)||E.recipientName.toLowerCase().includes(O))}return v.sort((O,E)=>new Date(E.deliveryDate||0).getTime()-new Date(O.deliveryDate||0).getTime())},[t,n,p,o,f]),j=()=>{const v=["ID","Client","Recipient","Delivery Date","Status","Price (EGP)","Commission (EGP)"],O=N.map(E=>[E.id,E.clientName,E.recipientName,E.deliveryDate?new Date(E.deliveryDate).toLocaleDateString():"N/A",E.status,E.price.toFixed(2),(E.courierCommission||0).toFixed(2)]);Fi(v,O,"My_Completed_Shipments")};return t?s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"My Completed Orders"}),s.jsxs("div",{className:"mb-6 card p-4 flex flex-col lg:flex-row gap-4 items-center flex-wrap",children:[s.jsx("div",{className:"flex-grow w-full lg:w-auto",children:s.jsx("input",{type:"text",placeholder:"Search by ID or Recipient...",value:o,onChange:v=>l(v.target.value),className:"w-full px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background"})}),s.jsx("div",{className:"flex-grow w-full lg:w-auto",children:s.jsxs("select",{value:f,onChange:v=>m(v.target.value==="all"?"all":Number(v.target.value)),className:"w-full px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background",children:[s.jsx("option",{value:"all",children:"All Clients"}),S.map(v=>s.jsx("option",{value:v.id,children:v.name},v.id))]})}),s.jsxs("div",{className:"flex items-center gap-2 w-full lg:w-auto",children:[s.jsx("input",{type:"date",value:p,onChange:v=>x(v.target.value),className:"w-full px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background","aria-label":"Filter by delivery date"}),p&&s.jsx("button",{onClick:()=>x(""),className:"px-4 py-2 text-sm font-semibold text-muted-foreground rounded-lg hover:bg-accent transition","aria-label":"Clear date filter",children:"Clear"})]}),s.jsx("div",{className:"lg:ml-auto w-full lg:w-auto",children:s.jsxs("button",{onClick:j,className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition",children:[s.jsx(ca,{className:"w-5 h-5"}),"Export as CSV"]})})]}),s.jsx("div",{className:"card overflow-hidden",children:s.jsx(ol,{shipments:N,onSelect:e})})]}):null},oA=()=>{const{inventoryItems:e,updateInventoryItem:t,addInventoryItem:n,deleteInventoryItem:i,hasPermission:o}=jn(),[l,f]=pe.useState(!1),[m,p]=pe.useState("add"),[x,S]=pe.useState(null),[N,j]=pe.useState(null),[v,O]=pe.useState({name:"",quantity:0,unit:"units",minStock:10,unitPrice:0}),[E,P]=pe.useState(""),[C,_]=pe.useState(!1),D=o(Ut.MANAGE_INVENTORY),U=o(Ut.DELETE_INVENTORY_ITEM),Y=o(Ut.VIEW_ADMIN_FINANCIALS),{totalInventoryValue:ae,totalItems:F,lowStockCount:L}=pe.useMemo(()=>{const te=Y?e.reduce((fe,le)=>fe+le.quantity*(le.unitPrice||0),0):0,W=e.filter(fe=>fe.minStock&&fe.quantity<=fe.minStock).length;return{totalInventoryValue:te,totalItems:e.length,lowStockCount:W}},[e,Y]),M=pe.useMemo(()=>e.filter(te=>{const W=te.name.toLowerCase().includes(E.toLowerCase());return C?W&&te.minStock&&te.quantity<=te.minStock:W}),[e,E,C]);if(!D)return s.jsxs("div",{className:"text-center p-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Access Denied"}),s.jsx("p",{className:"text-muted-foreground",children:"You do not have permission to manage inventory."})]});const z=(te,W)=>{p(te),j(W||null),O(W?{name:W.name,quantity:W.quantity,unit:W.unit,minStock:W.minStock||10,unitPrice:W.unitPrice||0}:{name:"",quantity:0,unit:"units",minStock:10,unitPrice:0}),f(!0)},k=()=>{f(!1),j(null)},R=te=>{S(te)},re=()=>{x&&(i(x.id),S(null))},ee=te=>{const{name:W,value:fe}=te.target;O(le=>({...le,[W]:["quantity","minStock","unitPrice"].includes(W)?parseFloat(fe)||0:fe}))},ne=te=>{te.preventDefault();const W={name:v.name,quantity:v.quantity,unit:v.unit,minStock:v.minStock,unitPrice:v.unitPrice};m==="add"?n(W):N&&t(N.id,W),k()},K=()=>{const te=["ID","Item Name","Quantity","Unit","Last Updated"];Y&&te.push("Min Stock","Unit Price (EGP)","Total Value (EGP)");const W=M.map(fe=>{const le=[fe.id,fe.name,fe.quantity,fe.unit,new Date(fe.lastUpdated).toLocaleString()];return Y&&le.push(fe.minStock||0,(fe.unitPrice||0).toFixed(2),((fe.quantity||0)*(fe.unitPrice||0)).toFixed(2)),le});Fi(te,W,"Inventory_Report")},G=({item:te})=>{if(!te.minStock)return s.jsxs("div",{className:"font-mono text-foreground",children:[te.quantity," ",s.jsx("span",{className:"text-muted-foreground",children:te.unit})]});const W=te.minStock||1,fe=Math.min(te.quantity/(W*2)*100,100);let le="bg-green-500";return te.quantity<=W?le="bg-red-500":te.quantity<=W*1.5&&(le="bg-yellow-500"),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-baseline mb-1",children:[s.jsx("span",{className:"font-mono text-foreground font-semibold",children:te.quantity}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:["min: ",te.minStock]})]}),s.jsx("div",{className:"w-full bg-secondary rounded-full h-1.5",children:s.jsx("div",{className:`${le} h-1.5 rounded-full`,style:{width:`${fe}%`}})})]})};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Inventory Dashboard"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"At-a-glance overview of your stock levels and value."})]}),s.jsxs("button",{onClick:()=>z("add"),className:"w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-3 bg-primary text-primary-foreground font-semibold rounded-lg hover:bg-primary/90 transition shadow-sm",children:[s.jsx(tl,{}),"Add New Item"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[Y&&s.jsx(kt,{title:"Total Inventory Value",value:`${ae.toFixed(2)} EGP`,icon:s.jsx(oa,{}),color:"#3b82f6"}),s.jsx(kt,{title:"Items in Stock",value:F,icon:s.jsx(Yl,{}),color:"#10b981"}),s.jsx("div",{onClick:()=>_(te=>!te),className:`rounded-xl transition-all duration-300 ${C?"ring-2 ring-red-500 ring-offset-2":""}`,children:s.jsx(kt,{title:"Low Stock Items",value:L,icon:s.jsx(su,{}),color:"#ef4444",onClick:()=>{},subtitle:"Click to filter"})})]}),s.jsxs("div",{className:"card overflow-hidden",children:[s.jsxs("div",{className:"p-4 border-b border-border flex flex-col sm:flex-row justify-between items-center gap-4",children:[s.jsx("input",{type:"text",placeholder:"Search inventory items...",value:E,onChange:te=>P(te.target.value),className:"w-full md:w-1/3 px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background"}),s.jsxs("button",{onClick:K,className:"w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-2 bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300 font-semibold rounded-lg hover:bg-green-200 dark:hover:bg-green-900/50 transition",children:[s.jsx(ca,{className:"w-5 h-5"}),s.jsx("span",{children:"Export CSV"})]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{className:"bg-secondary",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Item Name"}),s.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase w-48",children:"Stock Level"}),Y&&s.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Unit Price"}),Y&&s.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Total Value"}),s.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Last Updated"}),s.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-border",children:M.map(te=>s.jsxs("tr",{children:[s.jsx("td",{className:"p-4 font-semibold text-foreground",children:te.name}),s.jsx("td",{className:"p-4",children:s.jsx(G,{item:te})}),Y&&s.jsx("td",{className:"p-4 font-mono text-green-600 dark:text-green-400",children:(te.unitPrice||0).toFixed(2)}),Y&&s.jsx("td",{className:"p-4 font-mono font-semibold text-foreground",children:(te.quantity*(te.unitPrice||0)).toFixed(2)}),s.jsx("td",{className:"p-4 text-sm text-muted-foreground",children:new Date(te.lastUpdated).toLocaleString()}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>z("edit",te),className:"p-2 text-muted-foreground hover:text-primary hover:bg-accent rounded-md",children:s.jsx(Ts,{})}),U&&s.jsx("button",{onClick:()=>R(te),className:"p-2 text-muted-foreground hover:text-red-500 hover:bg-accent rounded-md",children:s.jsx(Od,{})})]})})]},te.id))})]})}),M.length===0&&s.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"No inventory items match your search."})]}),s.jsx(fr,{isOpen:l,onClose:k,title:m==="add"?"Add New Inventory Item":"Edit Inventory Item",children:s.jsxs("form",{onSubmit:ne,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Item Name"}),s.jsx("input",{type:"text",name:"name",value:v.name,onChange:ee,className:"w-full px-4 py-2 border border-border rounded-lg bg-background",required:!0})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Quantity"}),s.jsx("input",{type:"number",name:"quantity",value:v.quantity,onChange:ee,className:"w-full px-4 py-2 border border-border rounded-lg bg-background",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Unit"}),s.jsx("input",{type:"text",name:"unit",placeholder:"e.g., sheets, boxes",value:v.unit,onChange:ee,className:"w-full px-4 py-2 border border-border rounded-lg bg-background",required:!0})]})]}),s.jsx("div",{className:"p-4 border-t border-border mt-4 space-y-4",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Minimum Stock"}),s.jsx("input",{type:"number",name:"minStock",value:v.minStock,onChange:ee,className:"w-full px-4 py-2 border border-border rounded-lg bg-background",required:!0})]}),Y&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Unit Price (EGP)"}),s.jsx("input",{type:"number",step:"0.01",name:"unitPrice",value:v.unitPrice,onChange:ee,className:"w-full px-4 py-2 border border-border rounded-lg bg-background",required:!0})]})]})}),s.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[s.jsx("button",{type:"button",onClick:k,className:"px-4 py-2 bg-secondary text-secondary-foreground rounded-lg font-semibold",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg font-semibold",children:"Save Item"})]})]})}),s.jsx(fr,{isOpen:!!x,onClose:()=>S(null),title:"Confirm Deletion",children:x&&s.jsxs("div",{children:[s.jsxs("p",{children:["Are you sure you want to delete ",s.jsx("strong",{children:x.name}),"?"]}),s.jsx("p",{className:"text-sm text-red-600 mt-2",children:"This cannot be undone."}),s.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[s.jsx("button",{onClick:()=>S(null),className:"px-4 py-2 bg-secondary rounded-lg font-semibold",children:"Cancel"}),s.jsx("button",{onClick:re,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-semibold",children:"Delete Item"})]})]})})]})},lA=()=>{var fe;const{assets:e,users:t,hasPermission:n,addAsset:i,updateAsset:o,assignAsset:l,deleteAsset:f}=jn(),[m,p]=pe.useState(!1),[x,S]=pe.useState("add"),[N,j]=pe.useState(null),[v,O]=pe.useState(null),[E,P]=pe.useState({type:Of.DEVICE,name:"",identifier:""}),[C,_]=pe.useState(null),[D,U]=pe.useState(""),[Y,ae]=pe.useState("all"),[F,L]=pe.useState("all");if(!n(Ut.MANAGE_ASSETS))return s.jsxs("div",{className:"text-center p-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Access Denied"}),s.jsx("p",{className:"text-muted-foreground",children:"You do not have permission to manage assets."})]});const M=t.filter(le=>le.roles.includes(Vt.COURIER)||le.roles.includes(Vt.ADMIN)||le.roles.includes(Vt.SUPER_USER)),z=le=>{var B;return le?((B=t.find(q=>q.id===le))==null?void 0:B.name)||"Unknown User":"Unassigned"},k=le=>{if(!le.purchasePrice||!le.purchaseDate||!le.usefulLifeMonths||le.usefulLifeMonths<=0)return null;const B=new Date(le.purchaseDate),q=new Date,Q=(q.getFullYear()-B.getFullYear())*12+(q.getMonth()-B.getMonth());if(Q>=le.usefulLifeMonths)return 0;const ue=le.purchasePrice/le.usefulLifeMonths*Q;return le.purchasePrice-ue},R=pe.useMemo(()=>e.filter(le=>{var he;const B=D.trim()===""||le.name.toLowerCase().includes(D.toLowerCase())||((he=le.identifier)==null?void 0:he.toLowerCase().includes(D.toLowerCase())),q=Y==="all"||le.status===Y,Q=F==="all"||F==="unassigned"&&!le.assignedToUserId||le.assignedToUserId===Number(F);return B&&q&&Q}),[e,D,Y,F]),re=(le,B)=>{S(le),j(B||null),B?(P({...B}),_(B.assignedToUserId?String(B.assignedToUserId):null)):P({type:Of.DEVICE,name:"",identifier:""}),p(!0)},ee=()=>{p(!1),j(null)},ne=le=>{O(le)},K=()=>{v&&(f(v.id),O(null))},G=le=>{const{name:B,value:q}=le.target,Q=["purchasePrice","usefulLifeMonths"].includes(B);P(he=>({...he,[B]:Q?parseFloat(q)||0:q}))},te=le=>{le.preventDefault(),x==="add"?i(E):x==="edit"&&N?o(N.id,E):x==="assign"&&N&&l(N.id,C?parseInt(C):null),ee()},W=()=>{const le=["ID","Name","Type","Identifier","Status","Assigned To","Assignment Date","Current Value (EGP)"],B=R.map(q=>{const Q=k(q);return[q.id,q.name,q.type,q.identifier||"N/A",q.status,z(q.assignedToUserId),q.assignmentDate?new Date(q.assignmentDate).toLocaleDateString():"N/A",Q!==null?Q.toFixed(2):"N/A"]});Fi(le,B,"Asset_Report")};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Asset Management"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage and assign company assets like vehicles and devices."})]}),s.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[s.jsxs("button",{onClick:W,className:"flex-1 sm:flex-none flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition",children:[s.jsx(ca,{className:"w-5 h-5"}),s.jsx("span",{className:"hidden sm:inline",children:"Export"})]}),s.jsxs("button",{onClick:()=>re("add"),className:"flex-1 sm:flex-none flex items-center justify-center gap-2 px-4 py-2 bg-primary text-primary-foreground font-semibold rounded-lg hover:bg-primary/90 transition",children:[s.jsx(tl,{}),"Add Asset"]})]})]}),s.jsxs("div",{className:"card p-4 flex flex-col md:flex-row gap-4 flex-wrap",children:[s.jsx("input",{type:"text",placeholder:"Search by name or identifier...",value:D,onChange:le=>U(le.target.value),className:"flex-grow px-4 py-2 border border-border rounded-lg bg-background"}),s.jsxs("select",{value:Y,onChange:le=>ae(le.target.value),className:"w-full md:w-auto px-4 py-2 border border-border rounded-lg bg-background",children:[s.jsx("option",{value:"all",children:"All Statuses"}),Object.values(dd).map(le=>s.jsx("option",{value:le,children:le},le))]}),s.jsxs("select",{value:F,onChange:le=>L(le.target.value),className:"w-full md:w-auto px-4 py-2 border border-border rounded-lg bg-background",children:[s.jsx("option",{value:"all",children:"All Users"}),s.jsx("option",{value:"unassigned",children:"Unassigned"}),M.map(le=>s.jsx("option",{value:le.id,children:le.name},le.id))]})]}),s.jsx("div",{className:"card overflow-hidden",children:s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{className:"bg-secondary",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Asset"}),s.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Type"}),s.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Current Value"}),s.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Status"}),s.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Assigned To"}),s.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-border",children:R.map(le=>{const B=k(le);return s.jsxs("tr",{children:[s.jsxs("td",{className:"p-4",children:[s.jsx("p",{className:"font-semibold text-foreground",children:le.name}),s.jsx("p",{className:"text-sm text-muted-foreground font-mono",children:le.identifier})]}),s.jsx("td",{className:"p-4 text-sm text-muted-foreground",children:le.type}),s.jsx("td",{className:"p-4 font-mono text-sm font-semibold text-foreground",children:B!==null?`${B.toFixed(2)} EGP`:"N/A"}),s.jsx("td",{className:"p-4",children:s.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${le.status===dd.AVAILABLE?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"}`,children:le.status})}),s.jsx("td",{className:"p-4 text-sm text-muted-foreground",children:z(le.assignedToUserId)}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>re("edit",le),className:"p-2 text-muted-foreground hover:text-primary hover:bg-accent rounded-md",children:s.jsx(Ts,{})}),s.jsx("button",{onClick:()=>re("assign",le),className:"p-2 text-muted-foreground hover:text-green-500 hover:bg-accent rounded-md",children:s.jsx(lm,{})}),n(Ut.DELETE_ASSET)&&s.jsx("button",{onClick:()=>ne(le),className:"p-2 text-muted-foreground hover:text-red-500 hover:bg-accent rounded-md",children:s.jsx(Od,{})})]})})]},le.id)})})]})}),s.jsx(fr,{isOpen:m,onClose:ee,title:x==="add"?"Add New Asset":x==="edit"?"Edit Asset":"Assign Asset",children:s.jsxs("form",{onSubmit:te,className:"space-y-4",children:[x!=="assign"?s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Asset Name"}),s.jsx("input",{type:"text",name:"name",value:E.name||"",onChange:G,className:"w-full p-2 border border-border rounded-md bg-background",required:!0})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Asset Type"}),s.jsx("select",{name:"type",value:E.type,onChange:G,className:"w-full p-2 border border-border rounded-md bg-background",children:Object.values(Of).map(le=>s.jsx("option",{value:le,children:le},le))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Identifier"}),s.jsx("input",{type:"text",name:"identifier",value:E.identifier||"",onChange:G,className:"w-full p-2 border border-border rounded-md bg-background",placeholder:"e.g., License Plate, S/N"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-border",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Purchase Price (EGP)"}),s.jsx("input",{type:"number",step:"0.01",name:"purchasePrice",value:E.purchasePrice||"",onChange:G,className:"w-full p-2 border border-border rounded-md bg-background"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Purchase Date"}),s.jsx("input",{type:"date",name:"purchaseDate",value:((fe=E.purchaseDate)==null?void 0:fe.split("T")[0])||"",onChange:G,className:"w-full p-2 border border-border rounded-md bg-background"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Useful Life (in months)"}),s.jsx("input",{type:"number",name:"usefulLifeMonths",value:E.usefulLifeMonths||"",onChange:G,className:"w-full p-2 border border-border rounded-md bg-background"})]})]}):s.jsxs("div",{children:[s.jsxs("p",{className:"mb-2",children:["Assign ",s.jsx("strong",{children:N==null?void 0:N.name})," to:"]}),s.jsxs("select",{value:C||"",onChange:le=>_(le.target.value),className:"w-full p-2 border border-border rounded-md bg-background",children:[s.jsx("option",{value:"",children:"Unassigned"}),M.map(le=>s.jsx("option",{value:le.id,children:le.name},le.id))]})]}),s.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[s.jsx("button",{type:"button",onClick:ee,className:"px-4 py-2 bg-secondary text-secondary-foreground rounded-lg font-semibold",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg font-semibold",children:"Save"})]})]})}),s.jsx(fr,{isOpen:!!v,onClose:()=>O(null),title:"Confirm Deletion",children:v&&s.jsxs("div",{children:[s.jsxs("p",{children:["Are you sure you want to delete the asset ",s.jsx("strong",{children:v.name})," (",v.identifier,")?"]}),s.jsx("p",{className:"text-sm text-red-600 mt-2",children:"This action cannot be undone."}),s.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[s.jsx("button",{onClick:()=>O(null),className:"px-4 py-2 bg-secondary rounded-lg font-semibold",children:"Cancel"}),s.jsx("button",{onClick:K,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-semibold",children:"Delete Asset"})]})]})})]})},cA=()=>{const{currentUser:e,assets:t,hasPermission:n}=jn();if(!n(Ut.VIEW_OWN_ASSETS))return s.jsxs("div",{className:"text-center p-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"No Assets to Display"}),s.jsx("p",{className:"text-muted-foreground",children:"You do not have permission to view assets."})]});const i=t.filter(o=>o.assignedToUserId===(e==null?void 0:e.id));return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"My Assigned Assets"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"A list of all company assets currently assigned to you."})]}),i.length===0?s.jsxs("div",{className:"card text-center p-12",children:[s.jsx(Y1,{className:"w-16 h-16 mx-auto text-muted-foreground/30"}),s.jsx("h3",{className:"mt-4 text-xl font-semibold text-foreground",children:"No Assets Assigned"}),s.jsx("p",{className:"mt-1 text-muted-foreground",children:"You do not currently have any company assets assigned to your account."})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(o=>s.jsxs("div",{className:"card p-6 border-l-4 border-primary",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx("h3",{className:"text-lg font-bold text-foreground",children:o.name}),s.jsx("span",{className:"text-xs font-semibold px-2 py-1 rounded-full bg-secondary text-secondary-foreground",children:o.type})]}),s.jsx("p",{className:"font-mono text-sm text-muted-foreground mt-1",children:o.identifier}),s.jsxs("div",{className:"mt-4 pt-4 border-t border-border flex justify-between items-center",children:[o.status===dd.ASSIGNED&&s.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[s.jsx(ao,{className:"w-5 h-5"}),s.jsx("span",{className:"text-sm font-semibold",children:"Assigned to you"})]}),o.status===dd.IN_REPAIR&&s.jsxs("div",{className:"flex items-center gap-2 text-yellow-600",children:[s.jsx(oy,{className:"w-5 h-5 animate-spin"}),s.jsx("span",{className:"text-sm font-semibold",children:"In Repair"})]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Assigned: ",o.assignmentDate?new Date(o.assignmentDate).toLocaleDateString():"N/A"]})]})]},o.id))})]})},uA=()=>{const{suppliers:e,supplierTransactions:t,addSupplier:n,updateSupplier:i,deleteSupplier:o,addSupplierTransaction:l,hasPermission:f}=jn(),[m,p]=pe.useState(!1),[x,S]=pe.useState("add"),[N,j]=pe.useState(null),[v,O]=pe.useState({}),[E,P]=pe.useState(!1),[C,_]=pe.useState({type:"Payment",amount:0,description:""});if(!f(Ut.MANAGE_SUPPLIERS))return s.jsx("div",{className:"text-center p-8",children:"Access Denied."});const D=pe.useMemo(()=>e.map(M=>{const z=t.filter(ee=>ee.supplier_id===M.id),k=z.filter(ee=>ee.type==="Payment").reduce((ee,ne)=>ee+ne.amount,0),R=z.filter(ee=>ee.type==="Credit").reduce((ee,ne)=>ee+ne.amount,0),re=R-k;return{...M,totalPaid:k,totalOwed:R,outstandingBalance:re}}),[e,t]),U=pe.useMemo(()=>{const M=D.reduce((R,re)=>R+re.totalPaid,0),z=D.reduce((R,re)=>R+re.totalOwed,0),k=D.reduce((R,re)=>R+re.outstandingBalance,0);return{totalPaid:M,totalOwed:z,outstandingBalance:k}},[D]),Y=(M,z)=>{S(M),j(z||null),O(z||{}),p(!0)},ae=M=>{j(M),P(!0)},F=M=>{M.preventDefault(),x==="add"?n(v):N&&i(N.id,v),p(!1)},L=M=>{M.preventDefault(),N&&C.amount>0&&(l({supplier_id:N.id,date:new Date().toISOString(),...C}),P(!1),_({type:"Payment",amount:0,description:""}))};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Supplier Management"}),s.jsxs("button",{onClick:()=>Y("add"),className:"flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground font-semibold rounded-lg",children:[s.jsx(tl,{})," Add Supplier"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx(kt,{title:"Total Owed to Suppliers",value:`${U.totalOwed.toFixed(2)} EGP`,icon:s.jsx(oa,{}),color:"#f59e0b"}),s.jsx(kt,{title:"Total Paid to Suppliers",value:`${U.totalPaid.toFixed(2)} EGP`,icon:s.jsx(oa,{}),color:"#10b981"}),s.jsx(kt,{title:"Total Outstanding Balance",value:`${U.outstandingBalance.toFixed(2)} EGP`,icon:s.jsx(oa,{}),color:"#ef4444"})]}),s.jsx("div",{className:"card overflow-hidden",children:s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{className:"bg-secondary",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Name"}),s.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Contact"}),s.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Total Owed"}),s.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Total Paid"}),s.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Balance"}),s.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-border",children:D.map(M=>s.jsxs("tr",{children:[s.jsx("td",{className:"p-4 font-semibold text-foreground",children:M.name}),s.jsxs("td",{className:"p-4 text-sm text-muted-foreground",children:[M.contact_person," (",M.phone,")"]}),s.jsx("td",{className:"p-4 font-mono text-muted-foreground",children:M.totalOwed.toFixed(2)}),s.jsx("td",{className:"p-4 font-mono text-green-600 dark:text-green-400",children:M.totalPaid.toFixed(2)}),s.jsxs("td",{className:`p-4 font-mono font-bold ${M.outstandingBalance>0?"text-red-600 dark:text-red-400":"text-foreground"}`,children:[M.outstandingBalance.toFixed(2)," EGP"]}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>ae(M),className:"px-3 py-1 bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300 text-sm font-semibold rounded",children:"Log Payment"}),s.jsx("button",{onClick:()=>Y("edit",M),className:"p-2 text-muted-foreground hover:text-primary",children:s.jsx(Ts,{})}),s.jsx("button",{onClick:()=>o(M.id),className:"p-2 text-muted-foreground hover:text-red-500",children:s.jsx(Od,{})})]})})]},M.id))})]})}),s.jsx(fr,{isOpen:m,onClose:()=>p(!1),title:x==="add"?"Add Supplier":"Edit Supplier",children:s.jsxs("form",{onSubmit:F,className:"space-y-4",children:[s.jsx("input",{name:"name",value:v.name||"",onChange:M=>O({...v,name:M.target.value}),placeholder:"Supplier Name",className:"w-full p-2 border border-border rounded bg-background",required:!0}),s.jsx("input",{name:"contact_person",value:v.contact_person||"",onChange:M=>O({...v,contact_person:M.target.value}),placeholder:"Contact Person",className:"w-full p-2 border border-border rounded bg-background"}),s.jsx("input",{name:"phone",value:v.phone||"",onChange:M=>O({...v,phone:M.target.value}),placeholder:"Phone",className:"w-full p-2 border border-border rounded bg-background"}),s.jsx("input",{name:"email",value:v.email||"",onChange:M=>O({...v,email:M.target.value}),placeholder:"Email",className:"w-full p-2 border border-border rounded bg-background"}),s.jsx("textarea",{name:"address",value:v.address||"",onChange:M=>O({...v,address:M.target.value}),placeholder:"Address",className:"w-full p-2 border border-border rounded bg-background"}),s.jsx("button",{type:"submit",className:"w-full bg-primary text-primary-foreground py-2 rounded",children:"Save"})]})}),s.jsx(fr,{isOpen:E,onClose:()=>P(!1),title:`Log Transaction for ${N==null?void 0:N.name}`,children:s.jsxs("form",{onSubmit:L,className:"space-y-4",children:[s.jsxs("select",{value:C.type,onChange:M=>_({...C,type:M.target.value}),className:"w-full p-2 border border-border rounded bg-background",children:[s.jsx("option",{value:"Payment",children:"Payment"}),s.jsx("option",{value:"Credit",children:"Credit"})]}),s.jsx("input",{type:"number",value:C.amount,onChange:M=>_({...C,amount:parseFloat(M.target.value)}),placeholder:"Amount",className:"w-full p-2 border border-border rounded bg-background",required:!0}),s.jsx("input",{value:C.description,onChange:M=>_({...C,description:M.target.value}),placeholder:"Description (optional)",className:"w-full p-2 border border-border rounded bg-background"}),s.jsx("button",{type:"submit",className:"w-full bg-primary text-primary-foreground py-2 rounded",children:"Log Transaction"})]})})]})},dA=({onSelectShipment:e})=>{const{shipments:t,hasPermission:n}=jn(),[i,o]=pe.useState(""),[l,f]=pe.useState("");if(!n(Ut.VIEW_DELIVERED_SHIPMENTS))return s.jsx("div",{className:"p-8 text-center",children:"Access Denied."});const m=pe.useMemo(()=>{let x=t.filter(S=>S.status===ht.DELIVERED);if(l&&(x=x.filter(S=>S.deliveryDate&&S.deliveryDate.startsWith(l))),i.trim()){const S=i.trim().toLowerCase();x=x.filter(N=>N.id.toLowerCase().includes(S)||N.recipientName.toLowerCase().includes(S))}return x.sort((S,N)=>new Date(N.deliveryDate).getTime()-new Date(S.deliveryDate).getTime())},[t,l,i]),p=()=>{const x=["ID","Client","Recipient","Delivery Date","Courier"],S=m.map(N=>[N.id,N.clientName,N.recipientName,N.deliveryDate?new Date(N.deliveryDate).toLocaleDateString():"N/A",N.courierId?`Courier ${N.courierId}`:"N/A"]);Fi(x,S,"Delivered_Shipments_Report")};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Delivered Shipments"}),s.jsxs("button",{onClick:p,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition",children:[s.jsx(ca,{className:"w-5 h-5"}),"Export CSV"]})]}),s.jsxs("div",{className:"mb-6 card p-4 flex flex-col lg:flex-row gap-4 items-center",children:[s.jsx("input",{type:"text",placeholder:"Search by Shipment ID or Recipient...",value:i,onChange:x=>o(x.target.value),className:"w-full lg:w-1/3 px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background"}),s.jsx("input",{type:"date",value:l,onChange:x=>f(x.target.value),className:"w-full lg:w-auto px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background","aria-label":"Filter by delivery date"})]}),s.jsx("div",{className:"card overflow-hidden",children:s.jsx(ol,{shipments:m,onSelect:e,showClientFee:!1,showCourierCommission:!1,showNetProfit:!1})})]})},fA=()=>{const{users:e,shipments:t,hasPermission:n}=jn(),[i,o]=pe.useState(null),[l,f]=pe.useState(null),[m,p]=pe.useState("");if(!n(Ut.VIEW_COURIERS_BY_ZONE))return s.jsx("div",{className:"p-8 text-center",children:"Access Denied."});const x=pe.useMemo(()=>e.filter(O=>O.roles.includes(Vt.COURIER)),[e]),S=pe.useMemo(()=>{const O=new Set;return x.forEach(E=>(E.zones||[]).forEach(P=>O.add(P))),Array.from(O).sort()},[x]),N=pe.useMemo(()=>i?x.filter(O=>(O.zones||[]).includes(i)).map(O=>{const E=t.filter(C=>C.courierId===O.id&&[ht.ASSIGNED_TO_COURIER,ht.OUT_FOR_DELIVERY].includes(C.status)).length;return{...O,pendingTasks:E,isRestricted:{isRestricted:!1}.isRestricted}}):[],[i,x,t]),j=(O,E)=>{const P=t.filter(C=>C.courierId===O&&[ht.ASSIGNED_TO_COURIER,ht.OUT_FOR_DELIVERY].includes(C.status));f(P),p(`Pending Tasks for ${E}`)},v=()=>{if(!i)return;const O=["Courier Name","Phone","Status","Pending Tasks"],E=N.map(P=>[P.name,P.phone||"N/A",P.isRestricted?"Restricted":"Active",P.pendingTasks]);Fi(O,E,`Couriers_in_${i.replace(/\s/g,"_")}`)};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Couriers by Zone"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"View available couriers and their workload in a specific zone."})]}),s.jsxs("button",{onClick:v,disabled:!i,className:"w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition disabled:bg-muted",children:[s.jsx(ca,{className:"w-5 h-5"}),"Export CSV"]})]}),s.jsxs("div",{className:"card p-4",children:[s.jsx("label",{htmlFor:"zone-select",className:"block text-sm font-medium text-foreground mb-2",children:"Select a Zone to View Couriers"}),s.jsxs("select",{id:"zone-select",value:i||"",onChange:O=>o(O.target.value),className:"w-full md:w-1/2 px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background",children:[s.jsx("option",{value:"",disabled:!0,children:"-- Select a Zone --"}),S.map(O=>s.jsx("option",{value:O,children:O},O))]})]}),i?s.jsxs("div",{className:"card overflow-hidden",children:[s.jsx("div",{className:"p-4 border-b border-border",children:s.jsxs("h3",{className:"text-lg font-bold text-foreground",children:["Available Couriers in ",i]})}),s.jsxs("div",{className:"overflow-x-auto",children:[s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{className:"bg-secondary",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Courier"}),s.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Phone"}),s.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Status"}),s.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Pending Tasks"})]})}),s.jsx("tbody",{className:"divide-y divide-border",children:N.map(O=>s.jsxs("tr",{children:[s.jsx("td",{className:"p-4 font-semibold text-foreground",children:O.name}),s.jsx("td",{className:"p-4 text-sm text-muted-foreground",children:s.jsxs("a",{href:`tel:${O.phone}`,className:"flex items-center gap-2 hover:text-primary",children:[s.jsx(q1,{className:"w-4 h-4"}),O.phone||"N/A"]})}),s.jsx("td",{className:"p-4",children:O.isRestricted?s.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300",children:"Restricted"}):s.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",children:"Active"})}),s.jsx("td",{className:"p-4 font-mono font-semibold text-center",children:s.jsx("button",{onClick:()=>j(O.id,O.name),className:"font-mono font-semibold text-primary hover:underline disabled:text-muted-foreground disabled:no-underline",disabled:O.pendingTasks===0,children:O.pendingTasks})})]},O.id))})]}),N.length===0&&s.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"No couriers are assigned to this zone."})]})]}):s.jsxs("div",{className:"text-center py-16 text-muted-foreground card",children:[s.jsx(qi,{className:"w-16 h-16 mx-auto text-muted-foreground/30"}),s.jsx("p",{className:"mt-4 font-semibold",children:"Please select a zone"}),s.jsx("p",{className:"text-sm",children:"Choose a zone from the dropdown to see assigned couriers."})]}),s.jsx(fr,{isOpen:!!l,onClose:()=>f(null),title:m,size:"4xl",children:s.jsx("div",{className:"max-h-[70vh] overflow-y-auto",children:s.jsx(ol,{shipments:l||[]})})})]})},hA=()=>{const{tierSettings:e,updateTierSettings:t,addToast:n}=jn(),[i,o]=pe.useState([]);pe.useEffect(()=>{const p=[...e].sort((x,S)=>x.shipmentThreshold-S.shipmentThreshold);o(p)},[e]);const l=(p,x,S)=>{const N=parseFloat(S);isNaN(N)||o(j=>j.map(v=>v.tierName===p?{...v,[x]:N}:v))},f=()=>{for(const p of i)if(p.shipmentThreshold<0||p.discountPercentage<0){n("Thresholds and discounts cannot be negative.","error");return}t(i),n("Partner tier settings saved successfully!","success")},m={[Gi.BRONZE]:s.jsx(Pw,{className:"w-10 h-10 text-yellow-700"}),[Gi.SILVER]:s.jsx(Fw,{className:"w-10 h-10 text-gray-500"}),[Gi.GOLD]:s.jsx(cm,{className:"w-10 h-10 text-yellow-500"})};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Partner Tier Management"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Configure the shipment thresholds and discount percentages for each loyalty tier."})]}),s.jsx("button",{onClick:f,className:"w-full sm:w-auto flex items-center justify-center gap-2 px-6 py-3 bg-primary text-primary-foreground font-semibold rounded-lg hover:bg-primary/90 transition shadow-sm",children:"Save Changes"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(p=>s.jsxs("div",{className:"card p-6 border-t-4",style:{borderTopColor:p.tierName==="Bronze"?"#B45309":p.tierName==="Silver"?"#6B7280":"#FBBF24"},children:[s.jsxs("div",{className:"flex items-center gap-4",children:[m[p.tierName],s.jsxs("h2",{className:"text-2xl font-bold text-foreground",children:[p.tierName," Tier"]})]}),s.jsxs("div",{className:"mt-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Shipments per Month"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"number",value:p.shipmentThreshold,onChange:x=>l(p.tierName,"shipmentThreshold",x.target.value),className:"w-full px-4 py-2 border border-border rounded-lg"}),s.jsx("span",{className:"absolute inset-y-0 right-0 flex items-center pr-3 text-sm text-muted-foreground",children:"or more"})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Required shipments in the last 30 days."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Discount Percentage"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"number",step:"0.1",value:p.discountPercentage,onChange:x=>l(p.tierName,"discountPercentage",x.target.value),className:"w-full px-4 py-2 border border-border rounded-lg"}),s.jsx("span",{className:"absolute inset-y-0 right-0 flex items-center pr-3 text-sm text-muted-foreground",children:"%"})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Discount applied to the shipping fee."})]})]})]},p.tierName))})]})},mA=()=>{const{currentUser:e,shipments:t,users:n,updateShipmentStatus:i,addToast:o,sendDeliveryVerificationCode:l,verifyDelivery:f,getCourierName:m,hasPermission:p}=jn(),[x,S]=pe.useState(!1),[N,j]=pe.useState(null),[v,O]=pe.useState("Recipient Unreachable"),[E,P]=pe.useState(null),[C,_]=pe.useState("send"),[D,U]=pe.useState(""),[Y,ae]=pe.useState(!1),[F,L]=pe.useState(""),[M,z]=pe.useState("all"),[k,R]=pe.useState(""),re=pe.useMemo(()=>n.filter(q=>q.roles.includes(Vt.COURIER)),[n]);if(!e||!p(Ut.VIEW_ADMIN_DELIVERY_MANAGEMENT))return s.jsx("div",{className:"p-8 text-center",children:"Access Denied. You do not have permission to view this page."});const ee=pe.useMemo(()=>{let q=t.filter(Q=>[ht.ASSIGNED_TO_COURIER,ht.OUT_FOR_DELIVERY].includes(Q.status));if(F){const Q=F.toLowerCase();q=q.filter(he=>he.id.toLowerCase().includes(Q)||he.recipientName.toLowerCase().includes(Q)||he.toAddress.zone.toLowerCase().includes(Q)||m(he.courierId).toLowerCase().includes(Q))}return M!=="all"&&(q=q.filter(Q=>Q.courierId===M)),k&&(q=q.filter(Q=>Q.creationDate.startsWith(k))),q.sort((Q,he)=>new Date(Q.creationDate).getTime()-new Date(he.creationDate).getTime())},[t,F,M,k,m]),ne=(q,Q)=>{i(q,Q)},K=q=>{j(q),O("Recipient Unreachable"),S(!0)},G=()=>{N&&v&&(i(N.id,ht.DELIVERY_FAILED,{failureReason:v}),S(!1),j(null))},te=q=>{P(q),_("send"),U(""),ae(!1)},W=()=>P(null),fe=async()=>{if(!E)return;ae(!0),await l(E.id)&&_("verify"),ae(!1)},le=async()=>{if(!E||D.length!==6)return;ae(!0),await f(E.id,D)&&W(),ae(!1)},B=({task:q})=>s.jsxs("div",{className:"card p-5 flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-mono text-sm text-muted-foreground",children:q.id}),s.jsxs("p",{className:"text-lg font-bold text-foreground",children:["To: ",q.recipientName]}),s.jsxs("p",{className:"text-muted-foreground",children:[q.toAddress.street,", ",q.toAddress.zone]}),s.jsxs("p",{className:"text-sm font-semibold text-foreground mt-1",children:["Courier: ",m(q.courierId)]}),s.jsxs("p",{className:"text-sm font-semibold text-foreground mt-1",children:["Payment: ",q.paymentMethod," (",q.price>0?`${q.price.toFixed(2)} EGP`:"Pre-Paid",")"]})]}),s.jsxs("div",{className:"flex flex-col md:flex-row items-stretch md:items-center gap-3 w-full md:w-auto",children:[s.jsx("div",{className:"flex-grow",children:s.jsx(Bh,{status:q.status})}),s.jsxs(s.Fragment,{children:[q.status===ht.ASSIGNED_TO_COURIER&&s.jsx("button",{onClick:()=>ne(q.id,ht.OUT_FOR_DELIVERY),className:"px-4 py-2 bg-primary text-primary-foreground font-semibold rounded-lg hover:bg-primary/90 transition w-full md:w-auto",children:"Start Delivery"}),q.status===ht.OUT_FOR_DELIVERY&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>te(q),className:"px-4 py-2 bg-green-500 text-white font-semibold rounded-lg hover:bg-green-600 transition w-full md:w-auto",children:"Verify & Deliver"}),s.jsx("button",{onClick:()=>K(q),className:"px-4 py-2 bg-red-500 text-white font-semibold rounded-lg hover:bg-red-600 transition w-full md:w-auto",children:"Delivery Failed"})]})]})]})]});return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Admin Delivery Management"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Oversee and manage all ongoing courier delivery tasks."})]}),s.jsxs("div",{className:"card p-4 flex flex-col md:flex-row gap-4 flex-wrap",children:[s.jsx("input",{type:"text",placeholder:"Search by ID, recipient, courier...",value:F,onChange:q=>L(q.target.value),className:"flex-grow px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background"}),s.jsxs("select",{value:M,onChange:q=>z(q.target.value==="all"?"all":Number(q.target.value)),className:"w-full md:w-auto px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background",children:[s.jsx("option",{value:"all",children:"Filter by Courier"}),re.map(q=>s.jsx("option",{value:q.id,children:q.name},q.id))]}),s.jsx("input",{type:"date",value:k,onChange:q=>R(q.target.value),className:"w-full md:w-auto px-4 py-2 border border-border rounded-lg","aria-label":"Filter by creation date"})]}),s.jsx("div",{className:"space-y-4",children:ee.length===0?s.jsx("div",{className:"card text-center py-12 text-muted-foreground",children:"No active delivery tasks match the current filters."}):ee.map(q=>s.jsx(B,{task:q},q.id))}),s.jsx(fr,{isOpen:x,onClose:()=>S(!1),title:"Log Delivery Failure",children:N&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("p",{children:["Marking shipment ",s.jsx("strong",{children:N.id})," as failed."]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Reason for failure *"}),s.jsxs("select",{value:v,onChange:q=>O(q.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background",children:[s.jsx("option",{value:"Recipient Unreachable",children:"Recipient Unreachable"}),s.jsx("option",{value:"Cancelled by Client",children:"Cancelled by Client"}),s.jsx("option",{value:"Order Lost",children:"Order Lost"}),s.jsx("option",{value:"Damaged Package",children:"Damaged Package"})]})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx("button",{onClick:()=>S(!1),className:"px-4 py-2 bg-secondary text-secondary-foreground rounded-lg",children:"Cancel"}),s.jsx("button",{onClick:G,disabled:!v,className:"px-4 py-2 bg-red-500 text-white rounded-lg",children:"Mark as Failed"})]})]})}),s.jsx(fr,{isOpen:!!E,onClose:W,title:"Confirm Delivery",children:E&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-secondary p-4 rounded-lg",children:[s.jsxs("p",{className:"font-semibold text-foreground",children:["Shipment: ",E.id]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Recipient: ",E.recipientName]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Phone: ",E.recipientPhone]})]}),C==="send"?s.jsxs("div",{children:[s.jsx("p",{className:"mb-4",children:"Send a 6-digit verification code to the recipient's phone."}),s.jsx("button",{onClick:fe,disabled:Y,className:"w-full px-4 py-2 bg-primary text-primary-foreground font-semibold rounded-lg",children:Y?"Sending...":"Send Code"})]}):s.jsxs("div",{children:[s.jsx("p",{className:"mb-2",children:"Enter the 6-digit code received by the recipient."}),s.jsx("input",{type:"text",value:D,onChange:q=>U(q.target.value),maxLength:6,placeholder:"123456",className:"w-full text-center tracking-[1em] font-mono text-2xl px-4 py-2 border border-border rounded-lg"}),s.jsx("button",{onClick:le,disabled:Y||D.length!==6,className:"w-full mt-4 px-4 py-2 bg-green-600 text-white font-semibold rounded-lg",children:Y?"Verifying...":"Confirm Delivery"})]})]})})]})},gA=()=>{const{currentUser:e,logout:t,users:n,reassignCourier:i,getCourierName:o,hasPermission:l,setShipmentFilter:f}=jn(),[m,p]=pe.useState("dashboard"),[x,S]=pe.useState(null),[N,j]=pe.useState(null),[v,O]=pe.useState(!1),[E,P]=pe.useState(null),[C,_]=pe.useState(!1),D=L=>{const M=["shipments","total-shipments"];M.includes(m)&&!M.includes(L)&&f(null),p(L)},U=()=>{S(null),O(!1),P(null)},Y=()=>{x&&E&&(i(x.id,E),U())};if(pe.useEffect(()=>(N?document.body.classList.add("printing-label"):document.body.classList.remove("printing-label"),()=>document.body.classList.remove("printing-label")),[N]),!e)return null;const ae=()=>{window.print()},F=()=>{switch(m){case"dashboard":return s.jsx(xp,{setActiveView:D});case"shipments":return s.jsx(KN,{onSelectShipment:S});case"create":return s.jsx($N,{});case"packaging-and-assignment":return s.jsx(e6,{setLabelShipment:j});case"tasks":return s.jsx(U6,{setActiveView:D});case"completed-orders":return s.jsx(sA,{onSelectShipment:S});case"users":return s.jsx(z6,{});case"roles":return s.jsx(iA,{});case"wallet":return s.jsx(H6,{});case"financials":return s.jsx(V6,{});case"admin-financials":return s.jsx(q6,{setActiveView:D});case"client-analytics":return s.jsx(Y6,{onSelectShipment:S,setActiveView:D});case"notifications":return s.jsx(G6,{});case"profile":return s.jsx(W6,{});case"courier-financials":return s.jsx(Q6,{});case"courier-performance":return s.jsx(K6,{onSelectShipment:S});case"total-shipments":return s.jsx($6,{});case"inventory":return s.jsx(oA,{});case"asset-management":return s.jsx(lA,{});case"my-assets":return s.jsx(cA,{});case"supplier-management":return s.jsx(uA,{});case"delivered-shipments":return s.jsx(dA,{onSelectShipment:S});case"couriers-by-zone":return s.jsx(fA,{});case"partner-tier-management":return s.jsx(hA,{});case"admin-delivery-management":return s.jsx(mA,{});default:return s.jsx(xp,{setActiveView:D})}};return s.jsxs("div",{className:"flex h-screen bg-background text-foreground",children:[s.jsx(qw,{activeView:m,setActiveView:D,isOpen:C,setIsOpen:_}),s.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s.jsx(Gw,{onLogout:t,user:e,onNavigate:D,onMenuClick:()=>_(!0)}),s.jsx("main",{className:"flex-1 overflow-y-auto p-6 md:p-8",children:F()})]}),s.jsx(fr,{isOpen:!!x,onClose:U,title:`Shipment Details: ${x==null?void 0:x.id}`,children:x&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-start gap-4",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"mb-1",children:[s.jsx("strong",{children:"Status:"})," ",s.jsx(Bh,{status:x.status})]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.jsx("strong",{children:"From:"})," ",x.fromAddress.street,", ",x.fromAddress.city]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.jsx("strong",{children:"To:"})," ",x.toAddress.street,", ",x.toAddress.city]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.jsx("strong",{children:"Courier:"})," ",o(x.courierId)]})]}),s.jsx("div",{className:"flex flex-col gap-2 items-end flex-shrink-0",children:l(Ut.PRINT_LABELS)&&s.jsxs("button",{onClick:()=>j(x),className:"flex items-center gap-2 px-3 py-2 bg-secondary text-secondary-foreground font-semibold rounded-lg hover:bg-accent transition w-full justify-center text-sm",children:[s.jsx(Gu,{className:"w-5 h-5"}),"Print Label"]})})]}),x.packagingLog&&x.packagingLog.length>0&&s.jsxs("div",{className:"pt-4 border-t border-border",children:[s.jsx("h4",{className:"font-semibold text-foreground",children:"Packaging Info"}),s.jsx("ul",{className:"list-disc list-inside text-sm text-muted-foreground",children:x.packagingLog.map(L=>s.jsxs("li",{children:[L.quantityUsed,"x ",L.itemName]},L.inventoryItemId))}),x.packagingNotes&&s.jsxs("p",{className:"text-sm text-muted-foreground mt-2 bg-muted p-2 rounded-md",children:[s.jsx("strong",{children:"Notes:"})," ",x.packagingNotes]})]}),x.failureReason&&s.jsxs("div",{children:[s.jsx("strong",{children:"Failure Reason:"}),s.jsx("p",{className:"text-sm text-red-600 bg-red-50 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-lg mt-2",children:x.failureReason})]}),l(Ut.ASSIGN_SHIPMENTS)&&x.courierId&&![ht.DELIVERED,ht.DELIVERY_FAILED].includes(x.status)&&s.jsx("div",{className:"mt-4 pt-4 border-t border-border",children:v?s.jsxs("div",{className:"space-y-3 p-4 bg-secondary rounded-lg",children:[s.jsx("h4",{className:"font-semibold text-foreground",children:"Select new courier:"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("select",{onChange:L=>P(parseInt(L.target.value)),defaultValue:"",className:"flex-grow px-3 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background",children:[s.jsx("option",{value:"",disabled:!0,children:"Available Couriers..."}),n.filter(L=>L.roles.includes(Vt.COURIER)).map(L=>{var M;return s.jsxs("option",{value:L.id,children:[L.name," (",(M=L.zones)==null?void 0:M.join(", "),")"]},L.id)})]}),s.jsx("button",{onClick:Y,disabled:!E,className:"px-4 py-2 bg-primary text-primary-foreground font-semibold rounded-lg hover:bg-primary/90 transition disabled:bg-muted",children:"Save"}),s.jsx("button",{onClick:()=>O(!1),className:"px-4 py-2 bg-secondary text-secondary-foreground rounded-lg hover:bg-accent",children:"Cancel"})]})]}):s.jsxs("button",{onClick:()=>O(!0),className:"flex items-center gap-2 px-3 py-2 bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300 font-semibold rounded-lg hover:bg-yellow-200 dark:hover:bg-yellow-900/60 transition text-sm",children:[s.jsx(G1,{className:"w-5 h-5"}),"Re-assign Courier"]})})]})}),s.jsx(fr,{isOpen:!!N,onClose:()=>j(null),title:"Print Shipment Label",size:"4xl",wrapperClassName:"label-print-modal",children:N&&s.jsxs("div",{className:"flex flex-col gap-6",children:[s.jsx(nA,{shipment:N}),s.jsxs("div",{className:"flex justify-end gap-4 p-4 -mb-6 -mx-6 bg-secondary rounded-b-xl modal-footer",children:[s.jsx("button",{onClick:()=>j(null),className:"px-6 py-2 bg-muted text-muted-foreground rounded-lg hover:bg-accent font-semibold",children:"Close"}),s.jsxs("button",{onClick:ae,className:"flex items-center gap-2 px-6 py-2 bg-primary text-primary-foreground font-semibold rounded-lg hover:bg-primary/90 transition",children:[s.jsx(Gu,{className:"w-5 h-5"}),"Print"]})]})]})})]})},pA=()=>{const{currentUser:e,isLoading:t}=jn();return pd.useEffect(()=>{document.body.className="",document.documentElement.removeAttribute("dir"),document.documentElement.removeAttribute("lang"),document.body.style.cursor="auto"},[]),t&&!e?s.jsx("div",{className:"flex items-center justify-center h-screen bg-background text-foreground",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 border-4 border-dashed rounded-full animate-spin border-primary mx-auto"}),s.jsx("h2",{className:"text-2xl font-bold mt-4",children:"Loading Data..."}),s.jsx("p",{className:"text-muted-foreground",children:"Please wait while we fetch your information."})]})}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"transition-opacity duration-500 opacity-100",children:e?s.jsx(gA,{}):s.jsx(Vw,{})}),s.jsx(Hw,{})]})},xA={en:{navHome:"Home",navServices:"Services",navAbout:"About Us",navPricing:"Pricing",navSubscriptions:"Subscriptions",navTestimonials:"Testimonials",navContact:"Contact",navTrackShipment:"Track Shipment",navLogin:"Login",learnMore:"Learn More",getStarted:"Get Started",customPrice:"Custom",premiumServiceTitle:"Premium Service",aboutClickToLearn:"Click to learn more",aboutCommitment:"Our Commitment",aboutMissionCommitment:"Empowering every small business to reach new heights through reliable logistics solutions.",aboutVisionCommitment:"Building the future of e-commerce logistics in Egypt, one delivery at a time.",navTrackShipmentMobile:"Track Shipment",heroTitle:'Lightning-Fast Shipping for Your <span class="brand-yellow">E-commerce Business</span>',heroSubtitle:"We empower small businesses with professional handling and delivery in 3 business days, guaranteed.",heroCTA:"Get Started",heroStat1Text:"Delivery Success Rate",heroStat2Text:"Customer Support",heroStat3Text:"Max Delivery Time",trackTitle:"Track Your Shipment",trackSubtitle:"Enter your tracking number and phone to see the status of your package.",trackPlaceholder:"Enter your tracking number (e.g., FE123456789)",trackPhonePlaceholder:"Recipient or Sender Phone",trackButton:"Track",servicesTitle:"Our Promise to You",servicesSubtitle:"We handle every package with care and ensure it reaches its destination on time.",service1Title:"Professional Handling",service1Desc:"Our expert team is trained to handle your products with the utmost care, ensuring they arrive in perfect condition. We treat every package as if it were our own.",service2Title:"Max 3 Business Days Delivery",service2Desc:"Speed is crucial for e-commerce. We guarantee delivery within a maximum of three business days, helping you keep your customers happy and loyal.",service3Title:"Reliable & Secure",service3Desc:"End-to-end security with full accountability for every shipment.",service1Feature1:"Expert handling",service1Feature2:"Quality assurance",service1Feature3:"Damage protection",service1Feature4:"Insurance coverage",service2Feature1:"Same-day pickup",service2Feature2:"3-day guarantee",service2Feature3:"Real-time tracking",service2Feature4:"Priority processing",service3Feature1:"Secure packaging",service3Feature2:"GPS tracking",service3Feature3:"24/7 monitoring",service3Feature4:"Proof of delivery",aboutTitle:"Our Mission & Vision",aboutSubtitle:"The driving force behind our commitment to excellence.",missionTitle:"Our Mission",missionDesc:"To empower small businesses and e-commerce entrepreneurs by providing the fastest, most reliable, and professional shipping services in Egypt, ensuring their success is delivered with every package.",visionTitle:"Our Vision",visionDesc:"To be the leading logistics partner for Egypt's e-commerce sector, recognized for our unmatched speed, unwavering reliability, and our dedication to fostering the growth of local businesses.",pricingTitle:"Our Pricing",pricingSubtitle:"Simple, transparent pricing for our partners.",smallOrdersTitle:"Small Orders",smallOrdersPrice:"75 LE",smallOrdersDesc:"Flat rate for all our partners across Greater Cairo.",largeOrdersTitle:"Large Orders",largeOrdersDesc:"For bulk shipments or special requirements, please get in touch for a custom price quotation.",largeOrdersCTA:"Request a Quote",premiumServicePrice:"100 LE",premiumServiceDesc:"Enhanced service with priority handling and faster delivery.",standardFeature1:"Greater Cairo Coverage",standardFeature2:"3-Day Delivery Guarantee",standardFeature3:"Professional Handling",standardFeature4:"Real-time Tracking",standardFeature5:"Basic Insurance",premiumFeature1:"All Standard Features",premiumFeature2:"1-2 Day Express Delivery",premiumFeature3:"Priority Handling",premiumFeature4:"Premium Insurance",premiumFeature5:"Dedicated Support",premiumFeature6:"SMS & Email Updates",enterpriseFeature1:"Volume Discounts",enterpriseFeature2:"Custom Solutions",enterpriseFeature3:"Dedicated Account Manager",enterpriseFeature4:"API Integration",enterpriseFeature5:"White-label Options",enterpriseFeature6:"Same-day Pickup",subscriptionsTitle:"Exclusive Partner Program",subscriptionsDesc:"Our partner program is designed for our most loyal customers. Contact us to learn about the criteria and unlock special rates and exclusive offers.",subscriptionsCTA:"Learn More",testimonialsTitle:"Trusted by Businesses Like Yours",testimonialsSubtitle:"Hear what our happy customers have to say about our service.",testimonial1:'"Flash Express has been a game-changer for our online store. Their speed and reliability have significantly improved our customer satisfaction."',testimonial1Name:"Omar Hassan",testimonial1Role:"Founder, The Cairo Bazaar",testimonial2:`"The professional handling is top-notch. We ship fragile items, and with Flash Express, we have peace of mind knowing they'll arrive safely."`,testimonial2Name:"Fatima Ali",testimonial2Role:"Manager, Alexandria Crafts",testimonial3:'"Switching to Flash Express was the best decision we made for our logistics. The 3-day delivery promise is always met. Highly recommended!"',testimonial3Name:"Youssef Mahmoud",testimonial3Role:"Owner, Giza Goods",contactTitle:"Get in Touch",contactSubtitle:"You can reach us via call or WhatsApp for any inquiries.",contactNumber:"Customer Service",contactCall:"Call Us",contactWhatsapp:"WhatsApp",contactServiceAreaTitle:"Service Area",contactServiceAreaDesc:"Greater Cairo, Alexandria, Giza and surrounding areas",contactHoursTitle:"Business Hours",contactHours1:"Sunday - Thursday: 9:00 AM - 8:00 PM",contactHours2:"Friday - Saturday: 10:00 AM - 6:00 PM",contactEmailTitle:"Email Support",contactEmail1:"General: info@flashexpress.eg",contactEmail2:"Support: support@flashexpress.eg",footerSlogan:"Your reliable partner for e-commerce shipping.",footerLinks:"Quick Links",footerTrack:"Track",footerFollow:"Follow Us",footerRights:"All rights reserved."},ar:{navHome:"",navServices:"",navAbout:"",navPricing:"",navSubscriptions:"",navTestimonials:" ",navContact:" ",navTrackShipment:" ",navLogin:" ",learnMore:" ",getStarted:" ",customPrice:"",premiumServiceTitle:" ",aboutClickToLearn:"  ",aboutCommitment:"",aboutMissionCommitment:"             .",aboutVisionCommitment:"          .",navTrackShipmentMobile:" ",heroTitle:"     ",heroSubtitle:"            3   .",heroCTA:" ",heroStat1Text:"  ",heroStat2Text:" ",heroStat3Text:"  ",trackTitle:" ",trackSubtitle:"         .",trackPlaceholder:"   (: FE123456789)",trackPhonePlaceholder:"    ",trackButton:"",servicesTitle:" ",servicesSubtitle:"            .",service1Title:" ",service1Desc:"               .        .",service2Title:"  3    ",service2Desc:"     .                .",service3Title:" ",service3Desc:"       .",service1Feature1:" ",service1Feature2:" ",service1Feature3:"  ",service1Feature4:" ",service2Feature1:"   ",service2Feature2:" 3 ",service2Feature3:"   ",service2Feature4:"  ",service3Feature1:" ",service3Feature2:" GPS",service3Feature3:" 24/7",service3Feature4:" ",aboutTitle:" ",aboutSubtitle:"    .",missionTitle:"",missionDesc:"                       .",visionTitle:"",visionDesc:"                        .",pricingTitle:"",pricingSubtitle:"   .",smallOrdersTitle:" ",smallOrdersPrice:"75 ",smallOrdersDesc:"      .",largeOrdersTitle:" ",largeOrdersDesc:"            .",largeOrdersCTA:"  ",premiumServicePrice:"100 ",premiumServiceDesc:"       .",standardFeature1:"  ",standardFeature2:"  3 ",standardFeature3:" ",standardFeature4:"   ",standardFeature5:" ",premiumFeature1:"   ",premiumFeature2:"     ",premiumFeature3:"  ",premiumFeature4:" ",premiumFeature5:" ",premiumFeature6:"   ",enterpriseFeature1:"  ",enterpriseFeature2:" ",enterpriseFeature3:"  ",enterpriseFeature4:" API",enterpriseFeature5:"  ",enterpriseFeature6:"   ",subscriptionsTitle:"  ",subscriptionsDesc:"     .         .",subscriptionsCTA:" ",testimonialsTitle:"      ",testimonialsSubtitle:"       .",testimonial1:'"       .          ."',testimonial1Name:" ",testimonial1Role:"  ",testimonial2:'"    .               ."',testimonial2Name:" ",testimonial2Role:"  ",testimonial3:'"           .      3  .   !"',testimonial3Name:" ",testimonial3Role:"  ",contactTitle:" ",contactSubtitle:"        .",contactNumber:" ",contactCall:" ",contactWhatsapp:"",contactServiceAreaTitle:" ",contactServiceAreaDesc:"      ",contactHoursTitle:" ",contactHours1:" - : 9:00  - 8:00 ",contactHours2:" - : 10:00  - 6:00 ",contactEmailTitle:"   ",contactEmail1:": info@flashexpress.eg",contactEmail2:": support@flashexpress.eg",footerSlogan:"      .",footerLinks:" ",footerTrack:"",footerFollow:"",footerRights:"  ."}};/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bA=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Py=(...e)=>e.filter((t,n,i)=>!!t&&i.indexOf(t)===n).join(" ");/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var yA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vA=pe.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:o="",children:l,iconNode:f,...m},p)=>pe.createElement("svg",{ref:p,...yA,width:t,height:t,stroke:e,strokeWidth:i?Number(n)*24/Number(t):n,className:Py("lucide",o),...m},[...f.map(([x,S])=>pe.createElement(x,S)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=(e,t)=>{const n=pe.forwardRef(({className:i,...o},l)=>pe.createElement(vA,{ref:l,iconNode:t,className:Py(`lucide-${bA(e)}`,i),...o}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fy=Rn("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wA=Rn("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NA=Rn("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AA=Rn("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uh=Rn("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mf=Rn("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SA=Rn("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CA=Rn("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X0=Rn("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EA=Rn("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const By=Rn("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gm=Rn("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TA=Rn("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jA=Rn("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _A=Rn("PackageCheck",[["path",{d:"m16 16 2 2 4-4",key:"gfu2re"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IA=Rn("PackagePlus",[["path",{d:"M16 16h6",key:"100bgy"}],["path",{d:"M19 13v6",key:"85cyf1"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uy=Rn("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2=Rn("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DA=Rn("Quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LA=Rn("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OA=Rn("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tx=Rn("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const md=Rn("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MA=Rn("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RA=Rn("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pm=Rn("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kA=Rn("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PA=Rn("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FA=Rn("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gd=Rn("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),BA=({currentLang:e,setLanguage:t,t:n})=>{const[i,o]=pe.useState(!1),[l,f]=pe.useState("hero"),[m,p]=pe.useState(!1);pe.useEffect(()=>{const N=()=>{p(window.scrollY>50);const j=["hero","tracking","services","about","pricing","subscriptions","testimonials","contact"],v=window.innerHeight;j.forEach(O=>{const E=document.getElementById(O);if(E){const P=E.getBoundingClientRect();P.top<=v/2&&P.bottom>=v/2&&f(O)}})};return window.addEventListener("scroll",N),()=>window.removeEventListener("scroll",N)},[]);const x=N=>{var j;(j=document.getElementById(N))==null||j.scrollIntoView({behavior:"smooth"}),o(!1)},S=[{id:"hero",label:n("navHome")},{id:"services",label:n("navServices")},{id:"about",label:n("navAbout")},{id:"pricing",label:n("navPricing")},{id:"subscriptions",label:n("navSubscriptions")},{id:"testimonials",label:n("navTestimonials")},{id:"contact",label:n("navContact")}];return s.jsx("nav",{className:`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${m?"header-blur shadow-xl":"bg-transparent"}`,children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"flex justify-between items-center py-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"logo-bounce",children:s.jsx(gd,{className:"h-10 w-10 text-[#FFD000]"})}),s.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-[#FFD000] to-[#FFF700] bg-clip-text text-transparent",children:"Flash Express"})]}),s.jsx("div",{className:"hidden md:flex items-center gap-x-8",children:S.map(N=>s.jsx("button",{onClick:()=>x(N.id),className:`nav-link text-sm font-medium transition-all duration-300 ${l===N.id?"text-[#FFD000] active":"text-white hover:text-[#FFD000]"}`,children:N.label},N.id))}),s.jsxs("div",{className:"hidden md:flex items-center gap-x-4",children:[s.jsx("a",{href:"/app.html",className:"px-4 py-2 rounded-lg text-sm border-2 border-white/80 text-white/80 hover:bg-white/10 hover:text-white transition-all duration-300 font-semibold",children:n("navLogin")}),s.jsxs("button",{onClick:()=>x("tracking"),className:"bg-[#FFD000] text-[#061A40] px-6 py-2 rounded-lg font-semibold hover:bg-[#e6bb00] transform hover:scale-105 transition-all duration-300 shadow-lg hover:shadow-xl flex items-center",children:[s.jsx(Uy,{className:"inline h-4 w-4 me-2"}),n("navTrackShipment")]}),s.jsx("button",{onClick:()=>t(e==="en"?"ar":"en"),className:"px-4 py-2 rounded-lg border-2 border-[#FFD000] text-[#FFD000] hover:bg-[#FFD000] hover:text-[#061A40] transition-all duration-300 font-semibold",children:e==="en"?"AR":"EN"})]}),s.jsx("button",{className:"md:hidden p-2 text-white hover:text-[#FFD000] transition-colors",onClick:()=>o(!i),children:i?s.jsx(FA,{className:"h-6 w-6"}):s.jsx(TA,{className:"h-6 w-6"})})]}),i&&s.jsx("div",{className:"md:hidden mobile-menu-slide bg-[#061A40]/95 backdrop-blur-md rounded-lg mt-2 mb-4 p-4",children:s.jsxs("div",{className:"space-y-3",children:[S.map(N=>s.jsx("button",{onClick:()=>x(N.id),className:`block w-full text-left px-4 py-3 rounded-lg transition-all duration-300 ${l===N.id?"bg-[#FFD000] text-[#061A40] font-semibold":"text-white hover:bg-[#FFD000]/10 hover:text-[#FFD000]"}`,children:N.label},N.id)),s.jsxs("div",{className:"flex space-x-3 pt-3 border-t border-white/20",children:[s.jsx("a",{href:"/app.html",className:"flex-1 text-center bg-transparent border-2 border-white/80 text-white/80 px-4 py-2 rounded-lg font-semibold",children:n("navLogin")}),s.jsx("button",{onClick:()=>x("tracking"),className:"flex-1 bg-[#FFD000] text-[#061A40] px-4 py-2 rounded-lg font-semibold text-center",children:n("navTrackShipment")}),s.jsx("button",{onClick:()=>t(e==="en"?"ar":"en"),className:"px-4 py-2 rounded-lg border-2 border-[#FFD000] text-[#FFD000] font-semibold",children:e==="en"?"AR":"EN"})]})]})})]})})},UA=({t:e})=>{const[t,n]=pe.useState(!1);pe.useEffect(()=>{n(!0)},[]);const i=o=>{var l;(l=document.getElementById(o))==null||l.scrollIntoView({behavior:"smooth"})};return s.jsx("section",{id:"hero",className:"hero-bg min-h-screen flex items-center justify-center py-20",children:s.jsx("div",{className:"hero-content container mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"text-center max-w-5xl mx-auto",children:[s.jsx("div",{className:"absolute top-20 left-10 floating-element",children:s.jsx(gd,{className:"h-16 w-16 text-[#FFD000] lightning-bolt opacity-30"})}),s.jsx("div",{className:"absolute top-32 right-20 floating-element",style:{animationDelay:"2s"},children:s.jsx(pm,{className:"h-12 w-12 text-[#FFD000] hero-truck opacity-20"})}),s.jsx("div",{className:"absolute bottom-40 left-20 floating-element",style:{animationDelay:"4s"},children:s.jsx(Uh,{className:"h-10 w-10 text-[#FFD000] opacity-25"})}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"mb-8",children:s.jsx(gd,{className:"h-20 w-20 mx-auto text-[#FFD000] lightning-bolt"})}),s.jsx("h1",{className:"will-animate text-4xl md:text-7xl font-black leading-tight mb-6 text-white hero-title",dangerouslySetInnerHTML:{__html:e("heroTitle")}}),s.jsx("p",{className:"will-animate text-xl md:text-2xl text-gray-300 max-w-3xl mx-auto mb-8 hero-subtitle",children:e("heroSubtitle")}),s.jsxs("div",{className:"will-animate flex flex-col sm:flex-row gap-6 justify-center items-center hero-cta",children:[s.jsxs("button",{onClick:()=>i("tracking"),className:"pulse-glow bg-[#FFD000] text-[#061A40] px-8 py-4 rounded-xl text-xl font-bold hover:bg-[#e6bb00] transition-all duration-300 flex items-center group",children:[e("heroCTA"),s.jsx(Fy,{className:"ml-2 h-6 w-6 group-hover:translate-x-1 transition-transform"})]}),s.jsx("button",{onClick:()=>i("about"),className:"border-2 border-[#FFD000] text-[#FFD000] px-8 py-4 rounded-xl text-xl font-bold hover:bg-[#FFD000] hover:text-[#061A40] transition-all duration-300",children:e("learnMore")})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mt-16 max-w-4xl mx-auto",children:[s.jsxs("div",{className:"will-animate stats-counter text-center",children:[s.jsx("div",{className:"text-4xl font-black text-[#FFD000] mb-2",children:"99.9%"}),s.jsx("div",{className:"text-gray-300",children:e("heroStat1Text")})]}),s.jsxs("div",{className:"will-animate stats-counter text-center",style:{animationDelay:"0.2s"},children:[s.jsx("div",{className:"text-4xl font-black text-[#FFD000] mb-2",children:"24/7"}),s.jsx("div",{className:"text-gray-300",children:e("heroStat2Text")})]}),s.jsxs("div",{className:"will-animate stats-counter text-center",style:{animationDelay:"0.4s"},children:[s.jsx("div",{className:"text-4xl font-black text-[#FFD000] mb-2",children:"3 Days"}),s.jsx("div",{className:"text-gray-300",children:e("heroStat3Text")})]})]})]})]})})})},zA=({t:e})=>{const[t,n]=pe.useState(""),[i,o]=pe.useState(""),[l,f]=pe.useState(null),[m,p]=pe.useState(!1),x=S=>{S.preventDefault(),!(!t.trim()||!i.trim())&&(p(!0),f(null),setTimeout(()=>{const N=[{status:"In Transit",location:"Cairo Sorting Facility",details:"Package has left the origin facility.",icon:s.jsx(pm,{className:"h-5 w-5"}),color:"text-blue-600"},{status:"Out for Delivery",location:"Alexandria Hub",details:"Your package is on its way to the final destination.",icon:s.jsx(Uy,{className:"h-5 w-5"}),color:"text-orange-600"},{status:"Delivered",location:"Your City",details:"Package delivered successfully.",icon:s.jsx(AA,{className:"h-5 w-5"}),color:"text-green-600"},{status:"Exception",location:"Giza",details:"Delivery attempt failed. Will retry next business day.",icon:s.jsx(RA,{className:"h-5 w-5"}),color:"text-red-600"}],j=N[Math.floor(Math.random()*N.length)];f({trackingId:t.toUpperCase(),...j}),p(!1)},1500))};return s.jsx("section",{id:"tracking",className:"py-20 tracking-bg",children:s.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-4xl font-bold text-[#061A40] mb-4",children:e("trackTitle")}),s.jsx("p",{className:"text-xl text-gray-600",children:e("trackSubtitle")})]}),s.jsxs("div",{className:"tracking-form rounded-2xl p-8 shadow-xl",children:[s.jsxs("form",{onSubmit:x,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[s.jsxs("div",{className:"md:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"tracking-number-landing",className:"sr-only",children:"Tracking Number"}),s.jsx("input",{id:"tracking-number-landing",type:"text",value:t,onChange:S=>n(S.target.value),placeholder:e("trackPlaceholder"),className:"tracking-input w-full px-6 py-4 text-lg rounded-xl bg-white text-gray-800 placeholder-gray-400 focus:outline-none",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"phone-number-landing",className:"sr-only",children:"Phone Number"}),s.jsx("input",{id:"phone-number-landing",type:"tel",value:i,onChange:S=>o(S.target.value),placeholder:e("trackPhonePlaceholder"),className:"tracking-input w-full px-6 py-4 text-lg rounded-xl bg-white text-gray-800 placeholder-gray-400 focus:outline-none",required:!0})]})]}),s.jsx("button",{type:"submit",disabled:m,className:"tracking-button w-full px-8 py-4 rounded-xl text-lg font-bold text-[#061A40] flex items-center justify-center space-x-2 disabled:opacity-50",children:m?s.jsx("div",{className:"loading-spinner w-6 h-6 border-2 border-[#061A40] border-t-transparent rounded-full"}):s.jsxs(s.Fragment,{children:[s.jsx(OA,{className:"h-5 w-5"}),s.jsx("span",{children:e("trackButton")})]})})]}),l&&s.jsxs("div",{className:"result-slide mt-8 p-6 bg-gray-50 rounded-xl border-l-4 border-[#FFD000]",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h4",{className:"text-lg font-semibold text-[#061A40]",children:["Tracking ID: ",l.trackingId]}),s.jsxs("div",{className:`flex items-center space-x-2 ${l.color}`,children:[l.icon,s.jsx("span",{className:"font-medium",children:l.status})]})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(gm,{className:"h-5 w-5 text-gray-500"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-500",children:"Current Location"}),s.jsx("div",{className:"font-medium text-[#061A40]",children:l.location})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Uh,{className:"h-5 w-5 text-gray-500"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-500",children:"Details"}),s.jsx("div",{className:"font-medium text-[#061A40]",children:l.details})]})]})]})]})]})]})})})},HA=({t:e})=>{const[t,n]=pe.useState(0),[i,o]=pe.useState(!1),l=pe.useRef(null),f=[{id:"professional",title:e("service1Title"),description:e("service1Desc"),icon:s.jsx(_A,{className:"h-8 w-8"}),features:[e("service1Feature1"),e("service1Feature2"),e("service1Feature3"),e("service1Feature4")]},{id:"fast",title:e("service2Title"),description:e("service2Desc"),icon:s.jsx(pm,{className:"h-8 w-8"}),features:[e("service2Feature1"),e("service2Feature2"),e("service2Feature3"),e("service2Feature4")]},{id:"reliable",title:e("service3Title"),description:e("service3Desc"),icon:s.jsx(tx,{className:"h-8 w-8"}),features:[e("service3Feature1"),e("service3Feature2"),e("service3Feature3"),e("service3Feature4")]}];return pe.useEffect(()=>{const m=new IntersectionObserver(([p])=>{p.isIntersecting&&o(!0)},{threshold:.3});return l.current&&m.observe(l.current),()=>{l.current&&m.unobserve(l.current)}},[]),pe.useEffect(()=>{const m=setInterval(()=>{n(p=>(p+1)%f.length)},4e3);return()=>clearInterval(m)},[f.length]),s.jsx("section",{ref:l,id:"services",className:"services-bg py-20",children:s.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx("h2",{className:`will-animate text-4xl font-bold text-white mb-6 ${i?"slide-in-visible":""}`,children:e("servicesTitle")}),s.jsx("p",{className:`will-animate text-xl text-gray-300 max-w-3xl mx-auto ${i?"slide-in-visible":""}`,style:{animationDelay:"0.2s"},children:e("servicesSubtitle")})]}),s.jsxs("div",{className:"max-w-6xl mx-auto",children:[s.jsx("div",{className:"flex flex-col md:flex-row justify-center mb-12 space-y-4 md:space-y-0 md:space-x-4",children:f.map((m,p)=>s.jsxs("button",{onClick:()=>n(p),className:`service-tab p-6 rounded-xl text-left w-full md:w-auto will-animate ${t===p?"active text-[#061A40] shadow-2xl":"bg-white/10 text-white hover:bg-white/20"} ${i?"slide-in-visible":""}`,style:{animationDelay:`${.3+p*.1}s`},children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[s.jsx("div",{className:`floating-icon ${t===p?"text-[#061A40]":"text-[#FFD000]"}`,children:m.icon}),s.jsx("h3",{className:"text-lg font-semibold",children:m.title})]}),s.jsxs("p",{className:`text-sm ${t===p?"text-[#061A40]/80":"text-gray-300"}`,children:[m.description.substring(0,60),"..."]})]},m.id))}),s.jsx("div",{className:"service-content bg-white rounded-2xl p-8 md:p-12 shadow-2xl",children:s.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[s.jsx("div",{className:"p-3 bg-[#FFD000] rounded-xl text-[#061A40]",children:f[t].icon}),s.jsx("h3",{className:"text-3xl font-bold text-[#061A40]",children:f[t].title})]}),s.jsx("p",{className:"text-lg text-gray-700 mb-8",children:f[t].description}),s.jsx("div",{className:"space-y-4",children:f[t].features.map((m,p)=>s.jsxs("div",{className:"feature-item flex items-center space-x-3",children:[s.jsx("div",{className:"w-2 h-2 bg-[#FFD000] rounded-full"}),s.jsx("span",{className:"text-[#061A40] font-medium",children:m})]},p))})]}),s.jsx("div",{className:"relative",children:s.jsx("div",{className:"bg-gradient-to-r from-[#061A40] to-[#0A2F6B] rounded-2xl p-8 text-white",children:s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx(md,{className:"h-12 w-12 mx-auto text-[#FFD000] mb-4"}),s.jsx("div",{className:"text-2xl font-bold",children:"4.9/5"}),s.jsx("div",{className:"text-sm text-gray-300",children:"Customer Rating"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx(PA,{className:"h-12 w-12 mx-auto text-[#FFD000] mb-4"}),s.jsx("div",{className:"text-2xl font-bold",children:"1000+"}),s.jsx("div",{className:"text-sm text-gray-300",children:"Happy Clients"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx(Uh,{className:"h-12 w-12 mx-auto text-[#FFD000] mb-4"}),s.jsx("div",{className:"text-2xl font-bold",children:"99.9%"}),s.jsx("div",{className:"text-sm text-gray-300",children:"On-Time Delivery"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx(tx,{className:"h-12 w-12 mx-auto text-[#FFD000] mb-4"}),s.jsx("div",{className:"text-2xl font-bold",children:"100%"}),s.jsx("div",{className:"text-sm text-gray-300",children:"Secure Handling"})]})]})})})]})})]})]})})},VA=({t:e})=>{const[t,n]=pe.useState(0),[i,o]=pe.useState(!1),l=pe.useRef(null),f=[{id:"mission",title:e("missionTitle"),description:e("missionDesc"),icon:s.jsx(LA,{className:"h-12 w-12"}),color:"from-blue-500 to-blue-700",stats:[{label:"Local Businesses Served",value:"500+"},{label:"Packages Delivered",value:"50K+"},{label:"Cities Covered",value:"25+"}]},{id:"vision",title:e("visionTitle"),description:e("visionDesc"),icon:s.jsx(SA,{className:"h-12 w-12"}),color:"from-purple-500 to-purple-700",stats:[{label:"Growth Target",value:"200%"},{label:"New Partnerships",value:"100+"},{label:"Market Coverage",value:"80%"}]}];return pe.useEffect(()=>{const m=new IntersectionObserver(([p])=>{p.isIntersecting&&o(!0)},{threshold:.3});return l.current&&m.observe(l.current),()=>{l.current&&m.unobserve(l.current)}},[]),pe.useEffect(()=>{const m=setInterval(()=>{n(p=>(p+1)%f.length)},5e3);return()=>clearInterval(m)},[f.length]),s.jsx("section",{ref:l,id:"about",className:"about-bg py-20",children:s.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx("h2",{className:`will-animate text-4xl font-bold text-[#061A40] mb-6 ${i?"slide-in-visible":""}`,children:e("aboutTitle")}),s.jsx("p",{className:`will-animate text-xl text-gray-600 max-w-3xl mx-auto ${i?"slide-in-visible":""}`,style:{animationDelay:"0.2s"},children:e("aboutSubtitle")})]}),s.jsxs("div",{className:"max-w-6xl mx-auto",children:[s.jsx("div",{className:"flex flex-col md:flex-row justify-center mb-12 space-y-4 md:space-y-0 md:space-x-8",children:f.map((m,p)=>s.jsxs("button",{onClick:()=>n(p),className:`tab-button p-8 rounded-2xl text-center w-full md:w-auto will-animate ${t===p?"active text-[#061A40] shadow-2xl":"bg-white text-gray-700 hover:shadow-lg"} ${i?"slide-in-visible":""}`,style:{animationDelay:`${.3+p*.1}s`},children:[s.jsx("div",{className:`floating-icon mx-auto mb-4 ${t===p?"text-[#061A40]":"text-[#FFD000]"}`,children:m.icon}),s.jsx("h3",{className:"text-2xl font-bold mb-2",children:m.title}),s.jsx("p",{className:`text-sm ${t===p?"text-[#061A40]/80":"text-gray-600"}`,children:e("aboutClickToLearn")})]},m.id))}),s.jsx("div",{className:"tab-content bg-white rounded-2xl shadow-2xl overflow-hidden",children:s.jsxs("div",{className:"grid md:grid-cols-2 gap-0",children:[s.jsxs("div",{className:"p-8 md:p-12",children:[s.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[s.jsx("div",{className:"p-4 bg-[#FFD000] rounded-xl text-[#061A40]",children:f[t].icon}),s.jsx("h3",{className:"text-3xl font-bold text-[#061A40]",children:f[t].title})]}),s.jsx("p",{className:"text-lg text-gray-700 leading-relaxed mb-8",children:f[t].description}),s.jsx("div",{className:"space-y-4",children:f[t].stats.map((m,p)=>s.jsxs("div",{className:"stat-item flex items-center justify-between p-4 bg-gray-50 rounded-lg",style:{animationDelay:`${p*.1}s`},children:[s.jsx("span",{className:"text-[#061A40] font-medium",children:m.label}),s.jsx("span",{className:"text-2xl font-bold text-[#FFD000]",children:m.value})]},p))})]}),s.jsx("div",{className:`bg-gradient-to-br ${f[t].color} p-8 md:p-12 text-white flex items-center justify-center`,children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"floating-icon mb-8",children:s.jsx(MA,{className:"h-24 w-24 mx-auto text-white/80"})}),s.jsx("h4",{className:"text-2xl font-bold mb-4",children:e("aboutCommitment")}),s.jsx("p",{className:"text-lg opacity-90 mb-6",children:e(t===0?"aboutMissionCommitment":"aboutVisionCommitment")}),s.jsx("div",{className:"flex justify-center",children:s.jsx(wA,{className:"h-16 w-16 text-yellow-300"})})]})})]})})]})]})})},qA=({t:e})=>{const[t,n]=pe.useState(!1),[i,o]=pe.useState(0),l=pe.useRef(null),f=[{id:"standard",title:e("smallOrdersTitle"),price:e("smallOrdersPrice"),description:e("smallOrdersDesc"),icon:s.jsx(NA,{className:"h-12 w-12"}),features:[e("standardFeature1"),e("standardFeature2"),e("standardFeature3"),e("standardFeature4"),e("standardFeature5")],color:"from-blue-500 to-blue-700",popular:!1},{id:"premium",title:e("premiumServiceTitle"),price:e("premiumServicePrice"),description:e("premiumServiceDesc"),icon:s.jsx(Mf,{className:"h-12 w-12"}),features:[e("premiumFeature1"),e("premiumFeature2"),e("premiumFeature3"),e("premiumFeature4"),e("premiumFeature5"),e("premiumFeature6")],color:"from-purple-500 to-purple-700",popular:!0},{id:"enterprise",title:e("largeOrdersTitle"),price:e("customPrice"),description:e("largeOrdersDesc"),icon:s.jsx(IA,{className:"h-12 w-12"}),features:[e("enterpriseFeature1"),e("enterpriseFeature2"),e("enterpriseFeature3"),e("enterpriseFeature4"),e("enterpriseFeature5"),e("enterpriseFeature6")],color:"from-green-500 to-green-700",popular:!1}];return pe.useEffect(()=>{const m=new IntersectionObserver(([p])=>{p.isIntersecting&&n(!0)},{threshold:.3});return l.current&&m.observe(l.current),()=>{l.current&&m.unobserve(l.current)}},[]),pe.useEffect(()=>{const m=setInterval(()=>{o(p=>(p+1)%f.length)},4e3);return()=>clearInterval(m)},[f.length]),s.jsx("section",{ref:l,id:"pricing",className:"pricing-bg py-20",children:s.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx("h2",{className:`will-animate text-4xl font-bold text-white mb-6 ${t?"slide-in-visible":""}`,children:e("pricingTitle")}),s.jsx("p",{className:`will-animate text-xl text-gray-300 max-w-3xl mx-auto ${t?"slide-in-visible":""}`,style:{animationDelay:"0.2s"},children:e("pricingSubtitle")})]}),s.jsx("div",{className:"max-w-6xl mx-auto",children:s.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:f.map((m,p)=>s.jsxs("div",{className:`tier-card flex flex-col bg-white rounded-2xl p-8 relative will-animate ${i===p?"active":""} ${t?"slide-in-visible":""}`,style:{animationDelay:`${.3+p*.1}s`},onMouseEnter:()=>o(p),children:[m.popular&&s.jsx("div",{className:"popular-badge absolute -top-4 left-1/2 transform -translate-x-1/2",children:s.jsxs("div",{className:"bg-[#FFD000] text-[#061A40] px-6 py-2 rounded-full text-sm font-bold flex items-center",children:[s.jsx(gd,{className:"h-4 w-4 mr-1"}),"Most Popular"]})}),s.jsxs("div",{className:"flex-grow",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:`p-4 rounded-xl bg-gradient-to-r ${m.color} inline-block mb-4`,children:s.jsx("div",{className:"text-white",children:m.icon})}),s.jsx("h3",{className:"text-2xl font-bold text-[#061A40] mb-2",children:m.title}),s.jsx("div",{className:"text-4xl font-black price-highlight mb-2",children:m.price}),s.jsx("p",{className:"text-gray-600",children:m.description})]}),s.jsx("div",{className:"space-y-4 mb-8",children:m.features.map((x,S)=>s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"feature-check w-5 h-5 bg-[#FFD000] rounded-full flex items-center justify-center",style:{animationDelay:`${.5+S*.1}s`},children:s.jsx("div",{className:"w-2 h-2 bg-[#061A40] rounded-full"})}),s.jsx("span",{className:"text-[#061A40] font-medium",children:x})]},S))})]}),s.jsx("button",{className:`w-full py-3 rounded-xl font-bold transition-all duration-300 mt-auto ${m.popular?"bg-[#FFD000] text-[#061A40] hover:bg-[#e6bb00]":"border-2 border-[#FFD000] text-[#FFD000] hover:bg-[#FFD000] hover:text-[#061A40]"}`,children:m.id==="enterprise"?e("largeOrdersCTA"):e("getStarted")})]},m.id))})})]})})},GA=({t:e})=>{const[t,n]=pe.useState(!1),i=pe.useRef(null);pe.useEffect(()=>{const l=new IntersectionObserver(([f])=>{f.isIntersecting&&n(!0)},{threshold:.3});return i.current&&l.observe(i.current),()=>{i.current&&l.unobserve(i.current)}},[]);const o=l=>{var f;(f=document.getElementById(l))==null||f.scrollIntoView({behavior:"smooth"})};return s.jsx("section",{ref:i,id:"subscriptions",className:"subscriptions-bg py-20",children:s.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:s.jsx("div",{className:"max-w-5xl mx-auto",children:s.jsxs("div",{className:`exclusive-card rounded-3xl p-12 md:p-16 text-center text-white relative overflow-hidden will-animate ${t?"slide-in-visible":""}`,children:[s.jsx("div",{className:"absolute top-10 left-10 floating-gems opacity-20",children:s.jsx(X0,{className:"h-16 w-16 text-[#FFD000]"})}),s.jsx("div",{className:"absolute top-20 right-20 floating-gems opacity-15",style:{animationDelay:"2s"},children:s.jsx(Mf,{className:"h-20 w-20 text-[#FFD000]"})}),s.jsx("div",{className:"absolute bottom-16 left-16 floating-gems opacity-25",style:{animationDelay:"4s"},children:s.jsx(md,{className:"h-12 w-12 text-[#FFD000] star-twinkle"})}),s.jsx("div",{className:"absolute bottom-20 right-10 floating-gems opacity-20",style:{animationDelay:"1s"},children:s.jsx(X0,{className:"h-14 w-14 text-[#FFD000]"})}),s.jsx("div",{className:"absolute inset-0 shimmer"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"mb-8",children:s.jsx("div",{className:"p-4 bg-[#FFD000] rounded-full inline-block mb-6",children:s.jsx(Mf,{className:"h-16 w-16 text-[#061A40]"})})}),s.jsx("h2",{className:"text-4xl md:text-5xl font-black mb-6",children:e("subscriptionsTitle")}),s.jsx("p",{className:"text-xl text-gray-300 max-w-3xl mx-auto mb-8 leading-relaxed",children:e("subscriptionsDesc")}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-10",children:[s.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6",children:[s.jsx(md,{className:"h-10 w-10 text-[#FFD000] mx-auto mb-4"}),s.jsx("h4",{className:"text-lg font-bold mb-2",children:"Exclusive Rates"}),s.jsx("p",{className:"text-sm text-gray-300",children:"Up to 30% discount on regular shipping rates"})]}),s.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6",children:[s.jsx(Mf,{className:"h-10 w-10 text-[#FFD000] mx-auto mb-4"}),s.jsx("h4",{className:"text-lg font-bold mb-2",children:"Priority Service"}),s.jsx("p",{className:"text-sm text-gray-300",children:"Jump the queue with priority processing"})]}),s.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6",children:[s.jsx(X0,{className:"h-10 w-10 text-[#FFD000] mx-auto mb-4"}),s.jsx("h4",{className:"text-lg font-bold mb-2",children:"Dedicated Support"}),s.jsx("p",{className:"text-sm text-gray-300",children:"24/7 premium customer service"})]})]}),s.jsxs("button",{onClick:()=>o("contact"),className:"cta-button px-10 py-4 rounded-xl text-xl font-bold text-[#061A40] flex items-center mx-auto group",children:[e("subscriptionsCTA"),s.jsx(Fy,{className:"ml-2 h-6 w-6 group-hover:translate-x-1 transition-transform"})]}),s.jsx("div",{className:"mt-8 text-sm text-gray-400",children:"* Partnership criteria based on monthly volume and business requirements"})]})]})})})})},WA=({t:e})=>{const[t,n]=pe.useState(!1),[i,o]=pe.useState(0),l=pe.useRef(null),f=[{quote:e("testimonial1"),name:e("testimonial1Name"),role:e("testimonial1Role"),avatar:"https://images.pexels.com/photos/2379004/pexels-photo-2379004.jpeg?w=100&h=100&fit=crop&crop=face",rating:5},{quote:e("testimonial2"),name:e("testimonial2Name"),role:e("testimonial2Role"),avatar:"https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?w=100&h=100&fit=crop&crop=face",rating:5},{quote:e("testimonial3"),name:e("testimonial3Name"),role:e("testimonial3Role"),avatar:"https://images.pexels.com/photos/2182970/pexels-photo-2182970.jpeg?w=100&h=100&fit=crop&crop=face",rating:5}];return pe.useEffect(()=>{const m=new IntersectionObserver(([p])=>{p.isIntersecting&&n(!0)},{threshold:.3});return l.current&&m.observe(l.current),()=>{l.current&&m.unobserve(l.current)}},[]),pe.useEffect(()=>{const m=setInterval(()=>{o(p=>(p+1)%f.length)},5e3);return()=>clearInterval(m)},[f.length]),s.jsx("section",{ref:l,id:"testimonials",className:"testimonials-bg py-20",children:s.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx("h2",{className:`will-animate text-4xl font-bold text-white mb-6 ${t?"slide-in-visible":""}`,children:e("testimonialsTitle")}),s.jsx("p",{className:`will-animate text-xl text-gray-300 max-w-3xl mx-auto ${t?"slide-in-visible":""}`,style:{animationDelay:"0.2s"},children:e("testimonialsSubtitle")})]}),s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:`testimonial-card rounded-2xl p-8 md:p-12 mb-12 relative will-animate ${t?"slide-in-visible":""}`,style:{animationDelay:"0.4s"},children:[s.jsx(DA,{className:"quote-icon absolute top-6 left-6 h-16 w-16 text-[#FFD000]"}),s.jsxs("div",{className:"testimonial-transition",children:[s.jsx("div",{className:"flex star-rating justify-center mb-6",children:[...Array(f[i].rating)].map((m,p)=>s.jsx(md,{className:"h-6 w-6 text-[#FFD000] fill-current"},p))}),s.jsx("blockquote",{className:"text-2xl md:text-3xl text-[#061A40] font-medium text-center mb-8 leading-relaxed",children:f[i].quote}),s.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[s.jsx("div",{className:"avatar-ring p-1 rounded-full",children:s.jsx("img",{className:"h-16 w-16 rounded-full object-cover",src:f[i].avatar,alt:f[i].name})}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl font-bold text-[#061A40]",children:f[i].name}),s.jsx("div",{className:"text-gray-600",children:f[i].role})]})]})]},i)]}),s.jsx("div",{className:"flex justify-center space-x-4",children:f.map((m,p)=>s.jsx("button",{onClick:()=>o(p),className:`w-4 h-4 rounded-full transition-all duration-300 ${i===p?"bg-[#FFD000] scale-125":"bg-white/30 hover:bg-white/50"}`},p))}),s.jsx("div",{className:"grid md:grid-cols-3 gap-8 mt-16",children:f.map((m,p)=>s.jsxs("div",{className:`testimonial-card rounded-xl p-6 will-animate ${t?"slide-in-visible":""}`,style:{animationDelay:`${.6+p*.1}s`},children:[s.jsx("div",{className:"flex mb-4",children:[...Array(m.rating)].map((x,S)=>s.jsx(md,{className:"h-5 w-5 text-[#FFD000] fill-current"},S))}),s.jsx("p",{className:"text-[#061A40] mb-6 leading-relaxed",children:m.quote.length>100?m.quote.substring(0,100)+"...":m.quote}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("img",{className:"h-12 w-12 rounded-full object-cover",src:m.avatar,alt:m.name}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-[#061A40]",children:m.name}),s.jsx("div",{className:"text-sm text-gray-600",children:m.role})]})]})]},p))})]})]})})},YA=({t:e})=>{const[t,n]=pe.useState(!1),i=pe.useRef(null);return pe.useEffect(()=>{const o=new IntersectionObserver(([l])=>{l.isIntersecting&&n(!0)},{threshold:.3});return i.current&&o.observe(i.current),()=>{i.current&&o.unobserve(i.current)}},[]),s.jsx("section",{ref:i,id:"contact",className:"contact-bg py-20",children:s.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx("h2",{className:`will-animate text-4xl font-bold text-[#061A40] mb-6 ${t?"slide-in-visible":""}`,children:e("contactTitle")}),s.jsx("p",{className:`will-animate text-xl text-gray-600 max-w-3xl mx-auto ${t?"slide-in-visible":""}`,style:{animationDelay:"0.2s"},children:e("contactSubtitle")})]}),s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mb-12",children:[s.jsxs("div",{className:`contact-card rounded-2xl p-8 text-center will-animate ${t?"slide-in-visible":""}`,style:{animationDelay:"0.4s"},children:[s.jsx("div",{className:"phone-pulse mb-6",children:s.jsx("div",{className:"p-4 bg-[#FFD000] rounded-full inline-block",children:s.jsx(l2,{className:"h-16 w-16 text-[#061A40]"})})}),s.jsx("h3",{className:"text-2xl font-bold text-[#061A40] mb-4",children:e("contactNumber")}),s.jsx("div",{className:"text-3xl font-black text-[#061A40] mb-8 tracking-wider",children:"+20 111 630 6013"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("a",{href:"tel:+201116306013",className:"contact-button w-full bg-[#061A40] text-white py-4 px-6 rounded-xl font-bold flex items-center justify-center space-x-3 hover:bg-[#0A2F6B] shadow-lg",children:[s.jsx(l2,{className:"h-5 w-5"}),s.jsx("span",{children:e("contactCall")})]}),s.jsxs("a",{href:"https://wa.me/201116306013",target:"_blank",rel:"noopener noreferrer",className:"contact-button w-full bg-green-500 text-white py-4 px-6 rounded-xl font-bold flex items-center justify-center space-x-3 hover:bg-green-600 shadow-lg",children:[s.jsx(jA,{className:"h-5 w-5"}),s.jsx("span",{children:e("contactWhatsapp")})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:`info-card rounded-xl p-6 text-white will-animate ${t?"slide-in-visible":""}`,style:{animationDelay:"0.5s"},children:[s.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[s.jsx("div",{className:"floating-icon",children:s.jsx(gm,{className:"h-8 w-8 text-[#FFD000]"})}),s.jsx("h4",{className:"text-xl font-bold",children:e("contactServiceAreaTitle")})]}),s.jsx("p",{className:"text-gray-300",children:e("contactServiceAreaDesc")})]}),s.jsxs("div",{className:`info-card rounded-xl p-6 text-white will-animate ${t?"slide-in-visible":""}`,style:{animationDelay:"0.6s"},children:[s.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[s.jsx("div",{className:"floating-icon",style:{animationDelay:"1s"},children:s.jsx(Uh,{className:"h-8 w-8 text-[#FFD000]"})}),s.jsx("h4",{className:"text-xl font-bold",children:e("contactHoursTitle")})]}),s.jsxs("div",{className:"text-gray-300 space-y-2",children:[s.jsx("div",{children:e("contactHours1")}),s.jsx("div",{children:e("contactHours2")})]})]}),s.jsxs("div",{className:`info-card rounded-xl p-6 text-white will-animate ${t?"slide-in-visible":""}`,style:{animationDelay:"0.7s"},children:[s.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[s.jsx("div",{className:"floating-icon",style:{animationDelay:"2s"},children:s.jsx(By,{className:"h-8 w-8 text-[#FFD000]"})}),s.jsx("h4",{className:"text-xl font-bold",children:e("contactEmailTitle")})]}),s.jsxs("div",{className:"text-gray-300",children:[s.jsx("div",{children:e("contactEmail1")}),s.jsx("div",{children:e("contactEmail2")})]})]})]})]}),s.jsx("div",{className:`bg-white rounded-2xl p-8 shadow-xl will-animate ${t?"slide-in-visible":""}`,style:{animationDelay:"0.8s"},children:s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 text-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-3xl font-black text-[#FFD000] mb-2",children:"<2min"}),s.jsx("div",{className:"text-gray-600",children:"Average Response Time"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-3xl font-black text-[#FFD000] mb-2",children:"24/7"}),s.jsx("div",{className:"text-gray-600",children:"WhatsApp Support"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-3xl font-black text-[#FFD000] mb-2",children:"99%"}),s.jsx("div",{className:"text-gray-600",children:"Customer Satisfaction"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-3xl font-black text-[#FFD000] mb-2",children:"100+"}),s.jsx("div",{className:"text-gray-600",children:"Calls Handled Daily"})]})]})})]})]})})},XA=({t:e})=>{const t=new Date().getFullYear(),n=i=>{var o;(o=document.getElementById(i))==null||o.scrollIntoView({behavior:"smooth"})};return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"wave-border"}),s.jsx("footer",{className:"footer-bg text-white",children:s.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[s.jsxs("div",{className:"col-span-1 lg:col-span-2",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[s.jsx("div",{className:"logo-glow",children:s.jsx(gd,{className:"h-10 w-10 text-[#FFD000]"})}),s.jsx("h3",{className:"text-3xl font-bold bg-gradient-to-r from-[#FFD000] to-[#FFF700] bg-clip-text text-transparent",children:"Flash Express"})]}),s.jsx("p",{className:"text-xl text-gray-300 mb-6 leading-relaxed",children:e("footerSlogan")}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(l2,{className:"h-5 w-5 text-[#FFD000]"}),s.jsx("span",{className:"text-gray-300",children:"+20 111 630 6013"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(By,{className:"h-5 w-5 text-[#FFD000]"}),s.jsx("span",{className:"text-gray-300",children:"info@flashexpress.eg"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(gm,{className:"h-5 w-5 text-[#FFD000]"}),s.jsx("span",{className:"text-gray-300",children:"Greater Cairo, Egypt"})]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-xl font-bold text-[#FFD000] mb-6",children:e("footerLinks")}),s.jsx("ul",{className:"space-y-3",children:[{key:"navServices",section:"services"},{key:"navAbout",section:"about"},{key:"navPricing",section:"pricing"},{key:"navSubscriptions",section:"subscriptions"},{key:"footerTrack",section:"tracking"},{key:"navContact",section:"contact"}].map(i=>s.jsx("li",{children:s.jsx("button",{onClick:()=>n(i.section),className:"footer-link text-gray-300 hover:text-[#FFD000] text-left",children:e(i.key)})},i.key))})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-xl font-bold text-[#FFD000] mb-6",children:e("footerFollow")}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsx("a",{href:"#",className:"social-icon p-3 bg-white/10 rounded-full text-gray-300 hover:bg-[#FFD000] hover:text-[#061A40] transition-all duration-300",children:s.jsx(CA,{className:"h-5 w-5"})}),s.jsx("a",{href:"#",className:"social-icon p-3 bg-white/10 rounded-full text-gray-300 hover:bg-[#FFD000] hover:text-[#061A40] transition-all duration-300",children:s.jsx(kA,{className:"h-5 w-5"})}),s.jsx("a",{href:"#",className:"social-icon p-3 bg-white/10 rounded-full text-gray-300 hover:bg-[#FFD000] hover:text-[#061A40] transition-all duration-300",children:s.jsx(EA,{className:"h-5 w-5"})})]}),s.jsxs("div",{className:"mt-8",children:[s.jsx("h5",{className:"font-semibold mb-3 text-[#FFD000]",children:"Business Hours"}),s.jsxs("div",{className:"text-sm text-gray-400 space-y-1",children:[s.jsx("div",{children:"Sun-Thu: 9:00 AM - 8:00 PM"}),s.jsx("div",{children:"Fri-Sat: 10:00 AM - 6:00 PM"})]})]})]})]}),s.jsx("div",{className:"mt-12 pt-8 border-t border-white/20",children:s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0",children:[s.jsxs("div",{className:"text-gray-400 text-sm",children:[" ",t," Flash Express. ",e("footerRights")]}),s.jsxs("div",{className:"flex space-x-6 text-sm text-gray-400",children:[s.jsx("a",{href:"#",className:"hover:text-[#FFD000] transition-colors",children:"Privacy Policy"}),s.jsx("a",{href:"#",className:"hover:text-[#FFD000] transition-colors",children:"Terms of Service"}),s.jsx("a",{href:"#",className:"hover:text-[#FFD000] transition-colors",children:"Cookie Policy"})]})]})})]})})]})},ZA=()=>{const[e,t]=pe.useState("en"),n=i=>xA[e][i]||i;return pe.useEffect(()=>(document.body.className="landing-page-active",e==="ar"?(document.body.classList.add("lang-ar"),document.documentElement.dir="rtl"):(document.body.classList.remove("lang-ar"),document.documentElement.dir="ltr"),()=>{document.body.className="",document.documentElement.dir=""}),[e]),s.jsxs("div",{className:"bg-[#061A40]",children:[s.jsx(BA,{currentLang:e,setLanguage:t,t:n}),s.jsxs("main",{children:[s.jsx(UA,{t:n}),s.jsx(zA,{t:n}),s.jsx(HA,{t:n}),s.jsx(VA,{t:n}),s.jsx(qA,{t:n}),s.jsx(GA,{t:n}),s.jsx(WA,{t:n}),s.jsx(YA,{t:n})]}),s.jsx(XA,{t:n})]})},QA=()=>window.location.pathname==="/app.html"?s.jsx(Tw,{children:s.jsx(pA,{})}):s.jsx(ZA,{}),zy=document.getElementById("root");if(!zy)throw new Error("Could not find root element to mount to");const KA=Aw.createRoot(zy);KA.render(s.jsx(pd.StrictMode,{children:s.jsx(QA,{})}));export{Vn as _,qs as c,ph as g};
