function j3(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in e)){const l=Object.getOwnPropertyDescriptor(r,o);l&&Object.defineProperty(e,o,l.get?l:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const f of l.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();var eo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ph(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function I3(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var o=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:function(){return e[r]}})}),n}var Wx={exports:{}},Fh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D3=Symbol.for("react.transitional.element"),R3=Symbol.for("react.fragment");function Yx(e,t,n){var r=null;if(n!==void 0&&(r=""+n),t.key!==void 0&&(r=""+t.key),"key"in t){n={};for(var o in t)o!=="key"&&(n[o]=t[o])}else n=t;return t=n.ref,{$$typeof:D3,type:e,key:r,ref:t!==void 0?t:null,props:n}}Fh.Fragment=R3;Fh.jsx=Yx;Fh.jsxs=Yx;Wx.exports=Fh;var a=Wx.exports,Xx={exports:{}},un={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zm=Symbol.for("react.transitional.element"),O3=Symbol.for("react.portal"),L3=Symbol.for("react.fragment"),M3=Symbol.for("react.strict_mode"),k3=Symbol.for("react.profiler"),P3=Symbol.for("react.consumer"),F3=Symbol.for("react.context"),B3=Symbol.for("react.forward_ref"),U3=Symbol.for("react.suspense"),z3=Symbol.for("react.memo"),Zx=Symbol.for("react.lazy"),Ep=Symbol.iterator;function H3(e){return e===null||typeof e!="object"?null:(e=Ep&&e[Ep]||e["@@iterator"],typeof e=="function"?e:null)}var Qx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Kx=Object.assign,Jx={};function fu(e,t,n){this.props=e,this.context=t,this.refs=Jx,this.updater=n||Qx}fu.prototype.isReactComponent={};fu.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};fu.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function $x(){}$x.prototype=fu.prototype;function Hm(e,t,n){this.props=e,this.context=t,this.refs=Jx,this.updater=n||Qx}var Vm=Hm.prototype=new $x;Vm.constructor=Hm;Kx(Vm,fu.prototype);Vm.isPureReactComponent=!0;var Tp=Array.isArray,br={H:null,A:null,T:null,S:null,V:null},eb=Object.prototype.hasOwnProperty;function qm(e,t,n,r,o,l){return n=l.ref,{$$typeof:zm,type:e,key:t,ref:n!==void 0?n:null,props:l}}function V3(e,t){return qm(e.type,t,void 0,void 0,void 0,e.props)}function Gm(e){return typeof e=="object"&&e!==null&&e.$$typeof===zm}function q3(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var _p=/\/+/g;function S0(e,t){return typeof e=="object"&&e!==null&&e.key!=null?q3(""+e.key):t.toString(36)}function jp(){}function G3(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(jp,jp):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function Ac(e,t,n,r,o){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var f=!1;if(e===null)f=!0;else switch(l){case"bigint":case"string":case"number":f=!0;break;case"object":switch(e.$$typeof){case zm:case O3:f=!0;break;case Zx:return f=e._init,Ac(f(e._payload),t,n,r,o)}}if(f)return o=o(e),f=r===""?"."+S0(e,0):r,Tp(o)?(n="",f!=null&&(n=f.replace(_p,"$&/")+"/"),Ac(o,t,n,"",function(x){return x})):o!=null&&(Gm(o)&&(o=V3(o,n+(o.key==null||e&&e.key===o.key?"":(""+o.key).replace(_p,"$&/")+"/")+f)),t.push(o)),1;f=0;var m=r===""?".":r+":";if(Tp(e))for(var g=0;g<e.length;g++)r=e[g],l=m+S0(r,g),f+=Ac(r,t,n,l,o);else if(g=H3(e),typeof g=="function")for(e=g.call(e),g=0;!(r=e.next()).done;)r=r.value,l=m+S0(r,g++),f+=Ac(r,t,n,l,o);else if(l==="object"){if(typeof e.then=="function")return Ac(G3(e),t,n,r,o);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return f}function pf(e,t,n){if(e==null)return e;var r=[],o=0;return Ac(e,r,"","",function(l){return t.call(n,l,o++)}),r}function W3(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ip=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Y3(){}un.Children={map:pf,forEach:function(e,t,n){pf(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return pf(e,function(){t++}),t},toArray:function(e){return pf(e,function(t){return t})||[]},only:function(e){if(!Gm(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};un.Component=fu;un.Fragment=L3;un.Profiler=k3;un.PureComponent=Hm;un.StrictMode=M3;un.Suspense=U3;un.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=br;un.__COMPILER_RUNTIME={__proto__:null,c:function(e){return br.H.useMemoCache(e)}};un.cache=function(e){return function(){return e.apply(null,arguments)}};un.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var r=Kx({},e.props),o=e.key,l=void 0;if(t!=null)for(f in t.ref!==void 0&&(l=void 0),t.key!==void 0&&(o=""+t.key),t)!eb.call(t,f)||f==="key"||f==="__self"||f==="__source"||f==="ref"&&t.ref===void 0||(r[f]=t[f]);var f=arguments.length-2;if(f===1)r.children=n;else if(1<f){for(var m=Array(f),g=0;g<f;g++)m[g]=arguments[g+2];r.children=m}return qm(e.type,o,void 0,void 0,l,r)};un.createContext=function(e){return e={$$typeof:F3,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:P3,_context:e},e};un.createElement=function(e,t,n){var r,o={},l=null;if(t!=null)for(r in t.key!==void 0&&(l=""+t.key),t)eb.call(t,r)&&r!=="key"&&r!=="__self"&&r!=="__source"&&(o[r]=t[r]);var f=arguments.length-2;if(f===1)o.children=n;else if(1<f){for(var m=Array(f),g=0;g<f;g++)m[g]=arguments[g+2];o.children=m}if(e&&e.defaultProps)for(r in f=e.defaultProps,f)o[r]===void 0&&(o[r]=f[r]);return qm(e,l,void 0,void 0,null,o)};un.createRef=function(){return{current:null}};un.forwardRef=function(e){return{$$typeof:B3,render:e}};un.isValidElement=Gm;un.lazy=function(e){return{$$typeof:Zx,_payload:{_status:-1,_result:e},_init:W3}};un.memo=function(e,t){return{$$typeof:z3,type:e,compare:t===void 0?null:t}};un.startTransition=function(e){var t=br.T,n={};br.T=n;try{var r=e(),o=br.S;o!==null&&o(n,r),typeof r=="object"&&r!==null&&typeof r.then=="function"&&r.then(Y3,Ip)}catch(l){Ip(l)}finally{br.T=t}};un.unstable_useCacheRefresh=function(){return br.H.useCacheRefresh()};un.use=function(e){return br.H.use(e)};un.useActionState=function(e,t,n){return br.H.useActionState(e,t,n)};un.useCallback=function(e,t){return br.H.useCallback(e,t)};un.useContext=function(e){return br.H.useContext(e)};un.useDebugValue=function(){};un.useDeferredValue=function(e,t){return br.H.useDeferredValue(e,t)};un.useEffect=function(e,t,n){var r=br.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)};un.useId=function(){return br.H.useId()};un.useImperativeHandle=function(e,t,n){return br.H.useImperativeHandle(e,t,n)};un.useInsertionEffect=function(e,t){return br.H.useInsertionEffect(e,t)};un.useLayoutEffect=function(e,t){return br.H.useLayoutEffect(e,t)};un.useMemo=function(e,t){return br.H.useMemo(e,t)};un.useOptimistic=function(e,t){return br.H.useOptimistic(e,t)};un.useReducer=function(e,t,n){return br.H.useReducer(e,t,n)};un.useRef=function(e){return br.H.useRef(e)};un.useState=function(e){return br.H.useState(e)};un.useSyncExternalStore=function(e,t,n){return br.H.useSyncExternalStore(e,t,n)};un.useTransition=function(){return br.H.useTransition()};un.version="19.1.1";Xx.exports=un;var me=Xx.exports;const $l=Ph(me);var tb={exports:{}},Bh={},nb={exports:{}},rb={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Y,z){var X=Y.length;Y.push(z);e:for(;0<X;){var te=X-1>>>1,ge=Y[te];if(0<o(ge,z))Y[te]=z,Y[X]=ge,X=te;else break e}}function n(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var z=Y[0],X=Y.pop();if(X!==z){Y[0]=X;e:for(var te=0,ge=Y.length,ue=ge>>>1;te<ue;){var L=2*(te+1)-1,q=Y[L],ee=L+1,fe=Y[ee];if(0>o(q,X))ee<ge&&0>o(fe,q)?(Y[te]=fe,Y[ee]=X,te=ee):(Y[te]=q,Y[L]=X,te=L);else if(ee<ge&&0>o(fe,X))Y[te]=fe,Y[ee]=X,te=ee;else break e}}return z}function o(Y,z){var X=Y.sortIndex-z.sortIndex;return X!==0?X:Y.id-z.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var f=Date,m=f.now();e.unstable_now=function(){return f.now()-m}}var g=[],x=[],A=1,N=null,T=3,v=!1,O=!1,D=!1,P=!1,C=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;function V(Y){for(var z=n(x);z!==null;){if(z.callback===null)r(x);else if(z.startTime<=Y)r(x),z.sortIndex=z.expirationTime,t(g,z);else break;z=n(x)}}function W(Y){if(D=!1,V(Y),!O)if(n(g)!==null)O=!0,ie||(ie=!0,k());else{var z=n(x);z!==null&&G(W,z.startTime-Y)}}var ie=!1,B=-1,R=5,M=-1;function Z(){return P?!0:!(e.unstable_now()-M<R)}function F(){if(P=!1,ie){var Y=e.unstable_now();M=Y;var z=!0;try{e:{O=!1,D&&(D=!1,E(B),B=-1),v=!0;var X=T;try{t:{for(V(Y),N=n(g);N!==null&&!(N.expirationTime>Y&&Z());){var te=N.callback;if(typeof te=="function"){N.callback=null,T=N.priorityLevel;var ge=te(N.expirationTime<=Y);if(Y=e.unstable_now(),typeof ge=="function"){N.callback=ge,V(Y),z=!0;break t}N===n(g)&&r(g),V(Y)}else r(g);N=n(g)}if(N!==null)z=!0;else{var ue=n(x);ue!==null&&G(W,ue.startTime-Y),z=!1}}break e}finally{N=null,T=X,v=!1}z=void 0}}finally{z?k():ie=!1}}}var k;if(typeof j=="function")k=function(){j(F)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,J=Q.port2;Q.port1.onmessage=F,k=function(){J.postMessage(null)}}else k=function(){C(F,0)};function G(Y,z){B=C(function(){Y(e.unstable_now())},z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Y){Y.callback=null},e.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<Y?Math.floor(1e3/Y):5},e.unstable_getCurrentPriorityLevel=function(){return T},e.unstable_next=function(Y){switch(T){case 1:case 2:case 3:var z=3;break;default:z=T}var X=T;T=z;try{return Y()}finally{T=X}},e.unstable_requestPaint=function(){P=!0},e.unstable_runWithPriority=function(Y,z){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var X=T;T=Y;try{return z()}finally{T=X}},e.unstable_scheduleCallback=function(Y,z,X){var te=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?te+X:te):X=te,Y){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=X+ge,Y={id:A++,callback:z,priorityLevel:Y,startTime:X,expirationTime:ge,sortIndex:-1},X>te?(Y.sortIndex=X,t(x,Y),n(g)===null&&Y===n(x)&&(D?(E(B),B=-1):D=!0,G(W,X-te))):(Y.sortIndex=ge,t(g,Y),O||v||(O=!0,ie||(ie=!0,k()))),Y},e.unstable_shouldYield=Z,e.unstable_wrapCallback=function(Y){var z=T;return function(){var X=T;T=z;try{return Y.apply(this,arguments)}finally{T=X}}}})(rb);nb.exports=rb;var X3=nb.exports,ib={exports:{}},Ji={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z3=me;function ab(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Ro(){}var Qi={d:{f:Ro,r:function(){throw Error(ab(522))},D:Ro,C:Ro,L:Ro,m:Ro,X:Ro,S:Ro,M:Ro},p:0,findDOMNode:null},Q3=Symbol.for("react.portal");function K3(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Q3,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}var Wu=Z3.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Uh(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}Ji.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Qi;Ji.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(ab(299));return K3(e,t,null,n)};Ji.flushSync=function(e){var t=Wu.T,n=Qi.p;try{if(Wu.T=null,Qi.p=2,e)return e()}finally{Wu.T=t,Qi.p=n,Qi.d.f()}};Ji.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,Qi.d.C(e,t))};Ji.prefetchDNS=function(e){typeof e=="string"&&Qi.d.D(e)};Ji.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,r=Uh(n,t.crossOrigin),o=typeof t.integrity=="string"?t.integrity:void 0,l=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?Qi.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:r,integrity:o,fetchPriority:l}):n==="script"&&Qi.d.X(e,{crossOrigin:r,integrity:o,fetchPriority:l,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};Ji.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=Uh(t.as,t.crossOrigin);Qi.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&Qi.d.M(e)};Ji.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,r=Uh(n,t.crossOrigin);Qi.d.L(e,n,{crossOrigin:r,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};Ji.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=Uh(t.as,t.crossOrigin);Qi.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else Qi.d.m(e)};Ji.requestFormReset=function(e){Qi.d.r(e)};Ji.unstable_batchedUpdates=function(e,t){return e(t)};Ji.useFormState=function(e,t,n){return Wu.H.useFormState(e,t,n)};Ji.useFormStatus=function(){return Wu.H.useHostTransitionStatus()};Ji.version="19.1.1";function sb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(sb)}catch(e){console.error(e)}}sb(),ib.exports=Ji;var J3=ib.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ci=X3,ob=me,$3=J3;function at(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function lb(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Dd(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function cb(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Dp(e){if(Dd(e)!==e)throw Error(at(188))}function ew(e){var t=e.alternate;if(!t){if(t=Dd(e),t===null)throw Error(at(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var l=o.alternate;if(l===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===l.child){for(l=o.child;l;){if(l===n)return Dp(o),e;if(l===r)return Dp(o),t;l=l.sibling}throw Error(at(188))}if(n.return!==r.return)n=o,r=l;else{for(var f=!1,m=o.child;m;){if(m===n){f=!0,n=o,r=l;break}if(m===r){f=!0,r=o,n=l;break}m=m.sibling}if(!f){for(m=l.child;m;){if(m===n){f=!0,n=l,r=o;break}if(m===r){f=!0,r=l,n=o;break}m=m.sibling}if(!f)throw Error(at(189))}}if(n.alternate!==r)throw Error(at(190))}if(n.tag!==3)throw Error(at(188));return n.stateNode.current===n?e:t}function ub(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=ub(e),t!==null)return t;e=e.sibling}return null}var fr=Object.assign,tw=Symbol.for("react.element"),xf=Symbol.for("react.transitional.element"),zu=Symbol.for("react.portal"),Ic=Symbol.for("react.fragment"),db=Symbol.for("react.strict_mode"),y1=Symbol.for("react.profiler"),nw=Symbol.for("react.provider"),fb=Symbol.for("react.consumer"),no=Symbol.for("react.context"),Wm=Symbol.for("react.forward_ref"),v1=Symbol.for("react.suspense"),w1=Symbol.for("react.suspense_list"),Ym=Symbol.for("react.memo"),Fo=Symbol.for("react.lazy"),N1=Symbol.for("react.activity"),rw=Symbol.for("react.memo_cache_sentinel"),Rp=Symbol.iterator;function Iu(e){return e===null||typeof e!="object"?null:(e=Rp&&e[Rp]||e["@@iterator"],typeof e=="function"?e:null)}var iw=Symbol.for("react.client.reference");function A1(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===iw?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ic:return"Fragment";case y1:return"Profiler";case db:return"StrictMode";case v1:return"Suspense";case w1:return"SuspenseList";case N1:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case zu:return"Portal";case no:return(e.displayName||"Context")+".Provider";case fb:return(e._context.displayName||"Context")+".Consumer";case Wm:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ym:return t=e.displayName||null,t!==null?t:A1(e.type)||"Memo";case Fo:t=e._payload,e=e._init;try{return A1(e(t))}catch{}}return null}var Hu=Array.isArray,Qt=ob.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Mn=$3.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,zl={pending:!1,data:null,method:null,action:null},S1=[],Dc=-1;function ks(e){return{current:e}}function yi(e){0>Dc||(e.current=S1[Dc],S1[Dc]=null,Dc--)}function yr(e,t){Dc++,S1[Dc]=e.current,e.current=t}var _s=ks(null),fd=ks(null),Ko=ks(null),nh=ks(null);function rh(e,t){switch(yr(Ko,t),yr(fd,e),yr(_s,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?P2(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=P2(t),e=j5(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}yi(_s),yr(_s,e)}function $c(){yi(_s),yi(fd),yi(Ko)}function C1(e){e.memoizedState!==null&&yr(nh,e);var t=_s.current,n=j5(t,e.type);t!==n&&(yr(fd,e),yr(_s,n))}function ih(e){fd.current===e&&(yi(_s),yi(fd)),nh.current===e&&(yi(nh),Nd._currentValue=zl)}var E1=Object.prototype.hasOwnProperty,Xm=ci.unstable_scheduleCallback,C0=ci.unstable_cancelCallback,aw=ci.unstable_shouldYield,sw=ci.unstable_requestPaint,js=ci.unstable_now,ow=ci.unstable_getCurrentPriorityLevel,hb=ci.unstable_ImmediatePriority,mb=ci.unstable_UserBlockingPriority,ah=ci.unstable_NormalPriority,lw=ci.unstable_LowPriority,gb=ci.unstable_IdlePriority,cw=ci.log,uw=ci.unstable_setDisableYieldValue,Rd=null,ja=null;function Wo(e){if(typeof cw=="function"&&uw(e),ja&&typeof ja.setStrictMode=="function")try{ja.setStrictMode(Rd,e)}catch{}}var Ia=Math.clz32?Math.clz32:hw,dw=Math.log,fw=Math.LN2;function hw(e){return e>>>=0,e===0?32:31-(dw(e)/fw|0)|0}var bf=256,yf=4194304;function Ml(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function zh(e,t,n){var r=e.pendingLanes;if(r===0)return 0;var o=0,l=e.suspendedLanes,f=e.pingedLanes;e=e.warmLanes;var m=r&134217727;return m!==0?(r=m&~l,r!==0?o=Ml(r):(f&=m,f!==0?o=Ml(f):n||(n=m&~e,n!==0&&(o=Ml(n))))):(m=r&~l,m!==0?o=Ml(m):f!==0?o=Ml(f):n||(n=r&~e,n!==0&&(o=Ml(n)))),o===0?0:t!==0&&t!==o&&!(t&l)&&(l=o&-o,n=t&-t,l>=n||l===32&&(n&4194048)!==0)?t:o}function Od(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function mw(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pb(){var e=bf;return bf<<=1,!(bf&4194048)&&(bf=256),e}function xb(){var e=yf;return yf<<=1,!(yf&62914560)&&(yf=4194304),e}function E0(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ld(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function gw(e,t,n,r,o,l){var f=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var m=e.entanglements,g=e.expirationTimes,x=e.hiddenUpdates;for(n=f&~n;0<n;){var A=31-Ia(n),N=1<<A;m[A]=0,g[A]=-1;var T=x[A];if(T!==null)for(x[A]=null,A=0;A<T.length;A++){var v=T[A];v!==null&&(v.lane&=-536870913)}n&=~N}r!==0&&bb(e,r,0),l!==0&&o===0&&e.tag!==0&&(e.suspendedLanes|=l&~(f&~t))}function bb(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-Ia(t);e.entangledLanes|=t,e.entanglements[r]=e.entanglements[r]|1073741824|n&4194090}function yb(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ia(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}function Zm(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Qm(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function vb(){var e=Mn.p;return e!==0?e:(e=window.event,e===void 0?32:B5(e.type))}function pw(e,t){var n=Mn.p;try{return Mn.p=e,t()}finally{Mn.p=n}}var pl=Math.random().toString(36).slice(2),Bi="__reactFiber$"+pl,da="__reactProps$"+pl,hu="__reactContainer$"+pl,T1="__reactEvents$"+pl,xw="__reactListeners$"+pl,bw="__reactHandles$"+pl,Op="__reactResources$"+pl,Md="__reactMarker$"+pl;function Km(e){delete e[Bi],delete e[da],delete e[T1],delete e[xw],delete e[bw]}function Rc(e){var t=e[Bi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[hu]||n[Bi]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=U2(e);e!==null;){if(n=e[Bi])return n;e=U2(e)}return t}e=n,n=e.parentNode}return null}function mu(e){if(e=e[Bi]||e[hu]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function Vu(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(at(33))}function Gc(e){var t=e[Op];return t||(t=e[Op]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function xi(e){e[Md]=!0}var wb=new Set,Nb={};function ac(e,t){eu(e,t),eu(e+"Capture",t)}function eu(e,t){for(Nb[e]=t,e=0;e<t.length;e++)wb.add(t[e])}var yw=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Lp={},Mp={};function vw(e){return E1.call(Mp,e)?!0:E1.call(Lp,e)?!1:yw.test(e)?Mp[e]=!0:(Lp[e]=!0,!1)}function Pf(e,t,n){if(vw(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var r=t.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function vf(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function Qs(e,t,n,r){if(r===null)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+r)}}var T0,kp;function Sc(e){if(T0===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);T0=t&&t[1]||"",kp=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+T0+e+kp}var _0=!1;function j0(e,t){if(!e||_0)return"";_0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var N=function(){throw Error()};if(Object.defineProperty(N.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(N,[])}catch(v){var T=v}Reflect.construct(e,[],N)}else{try{N.call()}catch(v){T=v}e.call(N.prototype)}}else{try{throw Error()}catch(v){T=v}(N=e())&&typeof N.catch=="function"&&N.catch(function(){})}}catch(v){if(v&&T&&typeof v.stack=="string")return[v.stack,T.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var l=r.DetermineComponentFrameRoot(),f=l[0],m=l[1];if(f&&m){var g=f.split(`
`),x=m.split(`
`);for(o=r=0;r<g.length&&!g[r].includes("DetermineComponentFrameRoot");)r++;for(;o<x.length&&!x[o].includes("DetermineComponentFrameRoot");)o++;if(r===g.length||o===x.length)for(r=g.length-1,o=x.length-1;1<=r&&0<=o&&g[r]!==x[o];)o--;for(;1<=r&&0<=o;r--,o--)if(g[r]!==x[o]){if(r!==1||o!==1)do if(r--,o--,0>o||g[r]!==x[o]){var A=`
`+g[r].replace(" at new "," at ");return e.displayName&&A.includes("<anonymous>")&&(A=A.replace("<anonymous>",e.displayName)),A}while(1<=r&&0<=o);break}}}finally{_0=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Sc(n):""}function ww(e){switch(e.tag){case 26:case 27:case 5:return Sc(e.type);case 16:return Sc("Lazy");case 13:return Sc("Suspense");case 19:return Sc("SuspenseList");case 0:case 15:return j0(e.type,!1);case 11:return j0(e.type.render,!1);case 1:return j0(e.type,!0);case 31:return Sc("Activity");default:return""}}function Pp(e){try{var t="";do t+=ww(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function qa(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ab(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Nw(e){var t=Ab(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(f){r=""+f,l.call(this,f)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(f){r=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function sh(e){e._valueTracker||(e._valueTracker=Nw(e))}function Sb(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Ab(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function oh(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Aw=/[\n"\\]/g;function Xa(e){return e.replace(Aw,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function _1(e,t,n,r,o,l,f,m){e.name="",f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"?e.type=f:e.removeAttribute("type"),t!=null?f==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+qa(t)):e.value!==""+qa(t)&&(e.value=""+qa(t)):f!=="submit"&&f!=="reset"||e.removeAttribute("value"),t!=null?j1(e,f,qa(t)):n!=null?j1(e,f,qa(n)):r!=null&&e.removeAttribute("value"),o==null&&l!=null&&(e.defaultChecked=!!l),o!=null&&(e.checked=o&&typeof o!="function"&&typeof o!="symbol"),m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"?e.name=""+qa(m):e.removeAttribute("name")}function Cb(e,t,n,r,o,l,f,m){if(l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"&&(e.type=l),t!=null||n!=null){if(!(l!=="submit"&&l!=="reset"||t!=null))return;n=n!=null?""+qa(n):"",t=t!=null?""+qa(t):n,m||t===e.value||(e.value=t),e.defaultValue=t}r=r??o,r=typeof r!="function"&&typeof r!="symbol"&&!!r,e.checked=m?e.checked:!!r,e.defaultChecked=!!r,f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.name=f)}function j1(e,t,n){t==="number"&&oh(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Wc(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+qa(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Eb(e,t,n){if(t!=null&&(t=""+qa(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+qa(n):""}function Tb(e,t,n,r){if(t==null){if(r!=null){if(n!=null)throw Error(at(92));if(Hu(r)){if(1<r.length)throw Error(at(93));r=r[0]}n=r}n==null&&(n=""),t=n}n=qa(t),e.defaultValue=n,r=e.textContent,r===n&&r!==""&&r!==null&&(e.value=r)}function tu(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Sw=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Fp(e,t,n){var r=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?r?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":r?e.setProperty(t,n):typeof n!="number"||n===0||Sw.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function _b(e,t,n){if(t!=null&&typeof t!="object")throw Error(at(62));if(e=e.style,n!=null){for(var r in n)!n.hasOwnProperty(r)||t!=null&&t.hasOwnProperty(r)||(r.indexOf("--")===0?e.setProperty(r,""):r==="float"?e.cssFloat="":e[r]="");for(var o in t)r=t[o],t.hasOwnProperty(o)&&n[o]!==r&&Fp(e,o,r)}else for(var l in t)t.hasOwnProperty(l)&&Fp(e,l,t[l])}function Jm(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cw=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ew=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ff(e){return Ew.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var I1=null;function $m(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Oc=null,Yc=null;function Bp(e){var t=mu(e);if(t&&(e=t.stateNode)){var n=e[da]||null;e:switch(e=t.stateNode,t.type){case"input":if(_1(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Xa(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=r[da]||null;if(!o)throw Error(at(90));_1(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<n.length;t++)r=n[t],r.form===e.form&&Sb(r)}break e;case"textarea":Eb(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&Wc(e,!!n.multiple,t,!1)}}}var I0=!1;function jb(e,t,n){if(I0)return e(t,n);I0=!0;try{var r=e(t);return r}finally{if(I0=!1,(Oc!==null||Yc!==null)&&(Kh(),Oc&&(t=Oc,e=Yc,Yc=Oc=null,Bp(t),e)))for(t=0;t<e.length;t++)Bp(e[t])}}function hd(e,t){var n=e.stateNode;if(n===null)return null;var r=n[da]||null;if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(at(231,t,typeof n));return n}var uo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),D1=!1;if(uo)try{var Du={};Object.defineProperty(Du,"passive",{get:function(){D1=!0}}),window.addEventListener("test",Du,Du),window.removeEventListener("test",Du,Du)}catch{D1=!1}var Yo=null,eg=null,Bf=null;function Ib(){if(Bf)return Bf;var e,t=eg,n=t.length,r,o="value"in Yo?Yo.value:Yo.textContent,l=o.length;for(e=0;e<n&&t[e]===o[e];e++);var f=n-e;for(r=1;r<=f&&t[n-r]===o[l-r];r++);return Bf=o.slice(e,1<r?1-r:void 0)}function Uf(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function wf(){return!0}function Up(){return!1}function fa(e){function t(n,r,o,l,f){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=l,this.target=f,this.currentTarget=null;for(var m in e)e.hasOwnProperty(m)&&(n=e[m],this[m]=n?n(l):l[m]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?wf:Up,this.isPropagationStopped=Up,this}return fr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=wf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=wf)},persist:function(){},isPersistent:wf}),t}var sc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hh=fa(sc),kd=fr({},sc,{view:0,detail:0}),Tw=fa(kd),D0,R0,Ru,Vh=fr({},kd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tg,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ru&&(Ru&&e.type==="mousemove"?(D0=e.screenX-Ru.screenX,R0=e.screenY-Ru.screenY):R0=D0=0,Ru=e),D0)},movementY:function(e){return"movementY"in e?e.movementY:R0}}),zp=fa(Vh),_w=fr({},Vh,{dataTransfer:0}),jw=fa(_w),Iw=fr({},kd,{relatedTarget:0}),O0=fa(Iw),Dw=fr({},sc,{animationName:0,elapsedTime:0,pseudoElement:0}),Rw=fa(Dw),Ow=fr({},sc,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Lw=fa(Ow),Mw=fr({},sc,{data:0}),Hp=fa(Mw),kw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bw(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Fw[e])?!!t[e]:!1}function tg(){return Bw}var Uw=fr({},kd,{key:function(e){if(e.key){var t=kw[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Uf(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Pw[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tg,charCode:function(e){return e.type==="keypress"?Uf(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Uf(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),zw=fa(Uw),Hw=fr({},Vh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vp=fa(Hw),Vw=fr({},kd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tg}),qw=fa(Vw),Gw=fr({},sc,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ww=fa(Gw),Yw=fr({},Vh,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Xw=fa(Yw),Zw=fr({},sc,{newState:0,oldState:0}),Qw=fa(Zw),Kw=[9,13,27,32],ng=uo&&"CompositionEvent"in window,Yu=null;uo&&"documentMode"in document&&(Yu=document.documentMode);var Jw=uo&&"TextEvent"in window&&!Yu,Db=uo&&(!ng||Yu&&8<Yu&&11>=Yu),qp=" ",Gp=!1;function Rb(e,t){switch(e){case"keyup":return Kw.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ob(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Lc=!1;function $w(e,t){switch(e){case"compositionend":return Ob(t);case"keypress":return t.which!==32?null:(Gp=!0,qp);case"textInput":return e=t.data,e===qp&&Gp?null:e;default:return null}}function e4(e,t){if(Lc)return e==="compositionend"||!ng&&Rb(e,t)?(e=Ib(),Bf=eg=Yo=null,Lc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Db&&t.locale!=="ko"?null:t.data;default:return null}}var t4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!t4[e.type]:t==="textarea"}function Lb(e,t,n,r){Oc?Yc?Yc.push(r):Yc=[r]:Oc=r,t=Ch(t,"onChange"),0<t.length&&(n=new Hh("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Xu=null,md=null;function n4(e){E5(e,0)}function qh(e){var t=Vu(e);if(Sb(t))return e}function Yp(e,t){if(e==="change")return t}var Mb=!1;if(uo){var L0;if(uo){var M0="oninput"in document;if(!M0){var Xp=document.createElement("div");Xp.setAttribute("oninput","return;"),M0=typeof Xp.oninput=="function"}L0=M0}else L0=!1;Mb=L0&&(!document.documentMode||9<document.documentMode)}function Zp(){Xu&&(Xu.detachEvent("onpropertychange",kb),md=Xu=null)}function kb(e){if(e.propertyName==="value"&&qh(md)){var t=[];Lb(t,md,e,$m(e)),jb(n4,t)}}function r4(e,t,n){e==="focusin"?(Zp(),Xu=t,md=n,Xu.attachEvent("onpropertychange",kb)):e==="focusout"&&Zp()}function i4(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return qh(md)}function a4(e,t){if(e==="click")return qh(t)}function s4(e,t){if(e==="input"||e==="change")return qh(t)}function o4(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Oa=typeof Object.is=="function"?Object.is:o4;function gd(e,t){if(Oa(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!E1.call(t,o)||!Oa(e[o],t[o]))return!1}return!0}function Qp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Kp(e,t){var n=Qp(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Qp(n)}}function Pb(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Pb(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Fb(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=oh(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=oh(e.document)}return t}function rg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var l4=uo&&"documentMode"in document&&11>=document.documentMode,Mc=null,R1=null,Zu=null,O1=!1;function Jp(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;O1||Mc==null||Mc!==oh(r)||(r=Mc,"selectionStart"in r&&rg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Zu&&gd(Zu,r)||(Zu=r,r=Ch(R1,"onSelect"),0<r.length&&(t=new Hh("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Mc)))}function Ll(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kc={animationend:Ll("Animation","AnimationEnd"),animationiteration:Ll("Animation","AnimationIteration"),animationstart:Ll("Animation","AnimationStart"),transitionrun:Ll("Transition","TransitionRun"),transitionstart:Ll("Transition","TransitionStart"),transitioncancel:Ll("Transition","TransitionCancel"),transitionend:Ll("Transition","TransitionEnd")},k0={},Bb={};uo&&(Bb=document.createElement("div").style,"AnimationEvent"in window||(delete kc.animationend.animation,delete kc.animationiteration.animation,delete kc.animationstart.animation),"TransitionEvent"in window||delete kc.transitionend.transition);function oc(e){if(k0[e])return k0[e];if(!kc[e])return e;var t=kc[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Bb)return k0[e]=t[n];return e}var Ub=oc("animationend"),zb=oc("animationiteration"),Hb=oc("animationstart"),c4=oc("transitionrun"),u4=oc("transitionstart"),d4=oc("transitioncancel"),Vb=oc("transitionend"),qb=new Map,L1="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");L1.push("scrollEnd");function ds(e,t){qb.set(e,t),ac(t,[e])}var $p=new WeakMap;function Za(e,t){if(typeof e=="object"&&e!==null){var n=$p.get(e);return n!==void 0?n:(t={value:e,source:t,stack:Pp(t)},$p.set(e,t),t)}return{value:e,source:t,stack:Pp(t)}}var Va=[],Pc=0,ig=0;function Gh(){for(var e=Pc,t=ig=Pc=0;t<e;){var n=Va[t];Va[t++]=null;var r=Va[t];Va[t++]=null;var o=Va[t];Va[t++]=null;var l=Va[t];if(Va[t++]=null,r!==null&&o!==null){var f=r.pending;f===null?o.next=o:(o.next=f.next,f.next=o),r.pending=o}l!==0&&Gb(n,o,l)}}function Wh(e,t,n,r){Va[Pc++]=e,Va[Pc++]=t,Va[Pc++]=n,Va[Pc++]=r,ig|=r,e.lanes|=r,e=e.alternate,e!==null&&(e.lanes|=r)}function ag(e,t,n,r){return Wh(e,t,n,r),lh(e)}function gu(e,t){return Wh(e,null,null,t),lh(e)}function Gb(e,t,n){e.lanes|=n;var r=e.alternate;r!==null&&(r.lanes|=n);for(var o=!1,l=e.return;l!==null;)l.childLanes|=n,r=l.alternate,r!==null&&(r.childLanes|=n),l.tag===22&&(e=l.stateNode,e===null||e._visibility&1||(o=!0)),e=l,l=l.return;return e.tag===3?(l=e.stateNode,o&&t!==null&&(o=31-Ia(n),e=l.hiddenUpdates,r=e[o],r===null?e[o]=[t]:r.push(t),t.lane=n|536870912),l):null}function lh(e){if(50<ad)throw ad=0,tm=null,Error(at(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Fc={};function f4(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ea(e,t,n,r){return new f4(e,t,n,r)}function sg(e){return e=e.prototype,!(!e||!e.isReactComponent)}function lo(e,t){var n=e.alternate;return n===null?(n=Ea(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Wb(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function zf(e,t,n,r,o,l){var f=0;if(r=e,typeof e=="function")sg(e)&&(f=1);else if(typeof e=="string")f=mN(e,n,_s.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case N1:return e=Ea(31,n,t,o),e.elementType=N1,e.lanes=l,e;case Ic:return Hl(n.children,o,l,t);case db:f=8,o|=24;break;case y1:return e=Ea(12,n,t,o|2),e.elementType=y1,e.lanes=l,e;case v1:return e=Ea(13,n,t,o),e.elementType=v1,e.lanes=l,e;case w1:return e=Ea(19,n,t,o),e.elementType=w1,e.lanes=l,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case nw:case no:f=10;break e;case fb:f=9;break e;case Wm:f=11;break e;case Ym:f=14;break e;case Fo:f=16,r=null;break e}f=29,n=Error(at(130,e===null?"null":typeof e,"")),r=null}return t=Ea(f,n,t,o),t.elementType=e,t.type=r,t.lanes=l,t}function Hl(e,t,n,r){return e=Ea(7,e,r,t),e.lanes=n,e}function P0(e,t,n){return e=Ea(6,e,null,t),e.lanes=n,e}function F0(e,t,n){return t=Ea(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Bc=[],Uc=0,ch=null,uh=0,Ga=[],Wa=0,Vl=null,ro=1,io="";function kl(e,t){Bc[Uc++]=uh,Bc[Uc++]=ch,ch=e,uh=t}function Yb(e,t,n){Ga[Wa++]=ro,Ga[Wa++]=io,Ga[Wa++]=Vl,Vl=e;var r=ro;e=io;var o=32-Ia(r)-1;r&=~(1<<o),n+=1;var l=32-Ia(t)+o;if(30<l){var f=o-o%5;l=(r&(1<<f)-1).toString(32),r>>=f,o-=f,ro=1<<32-Ia(t)+o|n<<o|r,io=l+e}else ro=1<<l|n<<o|r,io=e}function og(e){e.return!==null&&(kl(e,1),Yb(e,1,0))}function lg(e){for(;e===ch;)ch=Bc[--Uc],Bc[Uc]=null,uh=Bc[--Uc],Bc[Uc]=null;for(;e===Vl;)Vl=Ga[--Wa],Ga[Wa]=null,io=Ga[--Wa],Ga[Wa]=null,ro=Ga[--Wa],Ga[Wa]=null}var Zi=null,Or=null,Ln=!1,ql=null,Cs=!1,M1=Error(at(519));function ec(e){var t=Error(at(418,""));throw pd(Za(t,e)),M1}function e2(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Bi]=e,t[da]=r,n){case"dialog":xn("cancel",t),xn("close",t);break;case"iframe":case"object":case"embed":xn("load",t);break;case"video":case"audio":for(n=0;n<yd.length;n++)xn(yd[n],t);break;case"source":xn("error",t);break;case"img":case"image":case"link":xn("error",t),xn("load",t);break;case"details":xn("toggle",t);break;case"input":xn("invalid",t),Cb(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),sh(t);break;case"select":xn("invalid",t);break;case"textarea":xn("invalid",t),Tb(t,r.value,r.defaultValue,r.children),sh(t)}n=r.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||r.suppressHydrationWarning===!0||_5(t.textContent,n)?(r.popover!=null&&(xn("beforetoggle",t),xn("toggle",t)),r.onScroll!=null&&xn("scroll",t),r.onScrollEnd!=null&&xn("scrollend",t),r.onClick!=null&&(t.onclick=e0),t=!0):t=!1,t||ec(e)}function t2(e){for(Zi=e.return;Zi;)switch(Zi.tag){case 5:case 13:Cs=!1;return;case 27:case 3:Cs=!0;return;default:Zi=Zi.return}}function Ou(e){if(e!==Zi)return!1;if(!Ln)return t2(e),Ln=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||om(e.type,e.memoizedProps)),n=!n),n&&Or&&ec(e),t2(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(at(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){Or=us(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}Or=null}}else t===27?(t=Or,xl(e.type)?(e=um,um=null,Or=e):Or=t):Or=Zi?us(e.stateNode.nextSibling):null;return!0}function Pd(){Or=Zi=null,Ln=!1}function n2(){var e=ql;return e!==null&&(ca===null?ca=e:ca.push.apply(ca,e),ql=null),e}function pd(e){ql===null?ql=[e]:ql.push(e)}var k1=ks(null),lc=null,ao=null;function Uo(e,t,n){yr(k1,t._currentValue),t._currentValue=n}function co(e){e._currentValue=k1.current,yi(k1)}function P1(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function F1(e,t,n,r){var o=e.child;for(o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){var f=o.child;l=l.firstContext;e:for(;l!==null;){var m=l;l=o;for(var g=0;g<t.length;g++)if(m.context===t[g]){l.lanes|=n,m=l.alternate,m!==null&&(m.lanes|=n),P1(l.return,n,e),r||(f=null);break e}l=m.next}}else if(o.tag===18){if(f=o.return,f===null)throw Error(at(341));f.lanes|=n,l=f.alternate,l!==null&&(l.lanes|=n),P1(f,n,e),f=null}else f=o.child;if(f!==null)f.return=o;else for(f=o;f!==null;){if(f===e){f=null;break}if(o=f.sibling,o!==null){o.return=f.return,f=o;break}f=f.return}o=f}}function Fd(e,t,n,r){e=null;for(var o=t,l=!1;o!==null;){if(!l){if(o.flags&524288)l=!0;else if(o.flags&262144)break}if(o.tag===10){var f=o.alternate;if(f===null)throw Error(at(387));if(f=f.memoizedProps,f!==null){var m=o.type;Oa(o.pendingProps.value,f.value)||(e!==null?e.push(m):e=[m])}}else if(o===nh.current){if(f=o.alternate,f===null)throw Error(at(387));f.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(e!==null?e.push(Nd):e=[Nd])}o=o.return}e!==null&&F1(t,e,n,r),t.flags|=262144}function dh(e){for(e=e.firstContext;e!==null;){if(!Oa(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function tc(e){lc=e,ao=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ui(e){return Xb(lc,e)}function Nf(e,t){return lc===null&&tc(e),Xb(e,t)}function Xb(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},ao===null){if(e===null)throw Error(at(308));ao=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ao=ao.next=t;return n}var h4=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,r){e.push(r)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},m4=ci.unstable_scheduleCallback,g4=ci.unstable_NormalPriority,oi={$$typeof:no,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function cg(){return{controller:new h4,data:new Map,refCount:0}}function Bd(e){e.refCount--,e.refCount===0&&m4(g4,function(){e.controller.abort()})}var Qu=null,B1=0,nu=0,Xc=null;function p4(e,t){if(Qu===null){var n=Qu=[];B1=0,nu=Rg(),Xc={status:"pending",value:void 0,then:function(r){n.push(r)}}}return B1++,t.then(r2,r2),t}function r2(){if(--B1===0&&Qu!==null){Xc!==null&&(Xc.status="fulfilled");var e=Qu;Qu=null,nu=0,Xc=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function x4(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(o){n.push(o)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var o=0;o<n.length;o++)(0,n[o])(t)},function(o){for(r.status="rejected",r.reason=o,o=0;o<n.length;o++)(0,n[o])(void 0)}),r}var i2=Qt.S;Qt.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&p4(e,t),i2!==null&&i2(e,t)};var Gl=ks(null);function ug(){var e=Gl.current;return e!==null?e:or.pooledCache}function Hf(e,t){t===null?yr(Gl,Gl.current):yr(Gl,t.pool)}function Zb(){var e=ug();return e===null?null:{parent:oi._currentValue,pool:e}}var Ud=Error(at(460)),Qb=Error(at(474)),Yh=Error(at(542)),U1={then:function(){}};function a2(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Af(){}function Kb(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Af,Af),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,o2(e),e;default:if(typeof t.status=="string")t.then(Af,Af);else{if(e=or,e!==null&&100<e.shellSuspendCounter)throw Error(at(482));e=t,e.status="pending",e.then(function(r){if(t.status==="pending"){var o=t;o.status="fulfilled",o.value=r}},function(r){if(t.status==="pending"){var o=t;o.status="rejected",o.reason=r}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,o2(e),e}throw Ku=t,Ud}}var Ku=null;function s2(){if(Ku===null)throw Error(at(459));var e=Ku;return Ku=null,e}function o2(e){if(e===Ud||e===Yh)throw Error(at(483))}var Bo=!1;function dg(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function z1(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Jo(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function $o(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Gn&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,t=lh(e),Gb(e,null,n),t}return Wh(e,r,t,n),lh(e)}function Ju(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,yb(e,n)}}function B0(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var f={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};l===null?o=l=f:l=l.next=f,n=n.next}while(n!==null);l===null?o=l=t:l=l.next=t}else o=l=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:l,shared:r.shared,callbacks:r.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var H1=!1;function $u(){if(H1){var e=Xc;if(e!==null)throw e}}function ed(e,t,n,r){H1=!1;var o=e.updateQueue;Bo=!1;var l=o.firstBaseUpdate,f=o.lastBaseUpdate,m=o.shared.pending;if(m!==null){o.shared.pending=null;var g=m,x=g.next;g.next=null,f===null?l=x:f.next=x,f=g;var A=e.alternate;A!==null&&(A=A.updateQueue,m=A.lastBaseUpdate,m!==f&&(m===null?A.firstBaseUpdate=x:m.next=x,A.lastBaseUpdate=g))}if(l!==null){var N=o.baseState;f=0,A=x=g=null,m=l;do{var T=m.lane&-536870913,v=T!==m.lane;if(v?(Cn&T)===T:(r&T)===T){T!==0&&T===nu&&(H1=!0),A!==null&&(A=A.next={lane:0,tag:m.tag,payload:m.payload,callback:null,next:null});e:{var O=e,D=m;T=t;var P=n;switch(D.tag){case 1:if(O=D.payload,typeof O=="function"){N=O.call(P,N,T);break e}N=O;break e;case 3:O.flags=O.flags&-65537|128;case 0:if(O=D.payload,T=typeof O=="function"?O.call(P,N,T):O,T==null)break e;N=fr({},N,T);break e;case 2:Bo=!0}}T=m.callback,T!==null&&(e.flags|=64,v&&(e.flags|=8192),v=o.callbacks,v===null?o.callbacks=[T]:v.push(T))}else v={lane:T,tag:m.tag,payload:m.payload,callback:m.callback,next:null},A===null?(x=A=v,g=N):A=A.next=v,f|=T;if(m=m.next,m===null){if(m=o.shared.pending,m===null)break;v=m,m=v.next,v.next=null,o.lastBaseUpdate=v,o.shared.pending=null}}while(!0);A===null&&(g=N),o.baseState=g,o.firstBaseUpdate=x,o.lastBaseUpdate=A,l===null&&(o.shared.lanes=0),ul|=f,e.lanes=f,e.memoizedState=N}}function Jb(e,t){if(typeof e!="function")throw Error(at(191,e));e.call(t)}function $b(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)Jb(n[e],t)}var ru=ks(null),fh=ks(0);function l2(e,t){e=mo,yr(fh,e),yr(ru,t),mo=e|t.baseLanes}function V1(){yr(fh,mo),yr(ru,ru.current)}function fg(){mo=fh.current,yi(ru),yi(fh)}var ll=0,fn=null,Jn=null,Qr=null,hh=!1,Zc=!1,nc=!1,mh=0,xd=0,Qc=null,b4=0;function zr(){throw Error(at(321))}function hg(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Oa(e[n],t[n]))return!1;return!0}function mg(e,t,n,r,o,l){return ll=l,fn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Qt.H=e===null||e.memoizedState===null?Iy:Dy,nc=!1,l=n(r,o),nc=!1,Zc&&(l=ty(t,n,r,o)),ey(e),l}function ey(e){Qt.H=gh;var t=Jn!==null&&Jn.next!==null;if(ll=0,Qr=Jn=fn=null,hh=!1,xd=0,Qc=null,t)throw Error(at(300));e===null||bi||(e=e.dependencies,e!==null&&dh(e)&&(bi=!0))}function ty(e,t,n,r){fn=e;var o=0;do{if(Zc&&(Qc=null),xd=0,Zc=!1,25<=o)throw Error(at(301));if(o+=1,Qr=Jn=null,e.updateQueue!=null){var l=e.updateQueue;l.lastEffect=null,l.events=null,l.stores=null,l.memoCache!=null&&(l.memoCache.index=0)}Qt.H=C4,l=t(n,r)}while(Zc);return l}function y4(){var e=Qt.H,t=e.useState()[0];return t=typeof t.then=="function"?zd(t):t,e=e.useState()[0],(Jn!==null?Jn.memoizedState:null)!==e&&(fn.flags|=1024),t}function gg(){var e=mh!==0;return mh=0,e}function pg(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function xg(e){if(hh){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}hh=!1}ll=0,Qr=Jn=fn=null,Zc=!1,xd=mh=0,Qc=null}function oa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qr===null?fn.memoizedState=Qr=e:Qr=Qr.next=e,Qr}function Jr(){if(Jn===null){var e=fn.alternate;e=e!==null?e.memoizedState:null}else e=Jn.next;var t=Qr===null?fn.memoizedState:Qr.next;if(t!==null)Qr=t,Jn=e;else{if(e===null)throw fn.alternate===null?Error(at(467)):Error(at(310));Jn=e,e={memoizedState:Jn.memoizedState,baseState:Jn.baseState,baseQueue:Jn.baseQueue,queue:Jn.queue,next:null},Qr===null?fn.memoizedState=Qr=e:Qr=Qr.next=e}return Qr}function bg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function zd(e){var t=xd;return xd+=1,Qc===null&&(Qc=[]),e=Kb(Qc,e,t),t=fn,(Qr===null?t.memoizedState:Qr.next)===null&&(t=t.alternate,Qt.H=t===null||t.memoizedState===null?Iy:Dy),e}function Xh(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return zd(e);if(e.$$typeof===no)return Ui(e)}throw Error(at(438,String(e)))}function yg(e){var t=null,n=fn.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var r=fn.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(t={data:r.data.map(function(o){return o.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=bg(),fn.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=rw;return t.index++,n}function fo(e,t){return typeof t=="function"?t(e):t}function Vf(e){var t=Jr();return vg(t,Jn,e)}function vg(e,t,n){var r=e.queue;if(r===null)throw Error(at(311));r.lastRenderedReducer=n;var o=e.baseQueue,l=r.pending;if(l!==null){if(o!==null){var f=o.next;o.next=l.next,l.next=f}t.baseQueue=o=l,r.pending=null}if(l=e.baseState,o===null)e.memoizedState=l;else{t=o.next;var m=f=null,g=null,x=t,A=!1;do{var N=x.lane&-536870913;if(N!==x.lane?(Cn&N)===N:(ll&N)===N){var T=x.revertLane;if(T===0)g!==null&&(g=g.next={lane:0,revertLane:0,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null}),N===nu&&(A=!0);else if((ll&T)===T){x=x.next,T===nu&&(A=!0);continue}else N={lane:0,revertLane:x.revertLane,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null},g===null?(m=g=N,f=l):g=g.next=N,fn.lanes|=T,ul|=T;N=x.action,nc&&n(l,N),l=x.hasEagerState?x.eagerState:n(l,N)}else T={lane:N,revertLane:x.revertLane,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null},g===null?(m=g=T,f=l):g=g.next=T,fn.lanes|=N,ul|=N;x=x.next}while(x!==null&&x!==t);if(g===null?f=l:g.next=m,!Oa(l,e.memoizedState)&&(bi=!0,A&&(n=Xc,n!==null)))throw n;e.memoizedState=l,e.baseState=f,e.baseQueue=g,r.lastRenderedState=l}return o===null&&(r.lanes=0),[e.memoizedState,r.dispatch]}function U0(e){var t=Jr(),n=t.queue;if(n===null)throw Error(at(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,l=t.memoizedState;if(o!==null){n.pending=null;var f=o=o.next;do l=e(l,f.action),f=f.next;while(f!==o);Oa(l,t.memoizedState)||(bi=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function ny(e,t,n){var r=fn,o=Jr(),l=Ln;if(l){if(n===void 0)throw Error(at(407));n=n()}else n=t();var f=!Oa((Jn||o).memoizedState,n);f&&(o.memoizedState=n,bi=!0),o=o.queue;var m=ay.bind(null,r,o,e);if(Hd(2048,8,m,[e]),o.getSnapshot!==t||f||Qr!==null&&Qr.memoizedState.tag&1){if(r.flags|=2048,iu(9,Zh(),iy.bind(null,r,o,n,t),null),or===null)throw Error(at(349));l||ll&124||ry(r,t,n)}return n}function ry(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=fn.updateQueue,t===null?(t=bg(),fn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function iy(e,t,n,r){t.value=n,t.getSnapshot=r,sy(t)&&oy(e)}function ay(e,t,n){return n(function(){sy(t)&&oy(e)})}function sy(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Oa(e,n)}catch{return!0}}function oy(e){var t=gu(e,2);t!==null&&Ra(t,e,2)}function q1(e){var t=oa();if(typeof e=="function"){var n=e;if(e=n(),nc){Wo(!0);try{n()}finally{Wo(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fo,lastRenderedState:e},t}function ly(e,t,n,r){return e.baseState=n,vg(e,Jn,typeof r=="function"?r:fo)}function v4(e,t,n,r,o){if(Qh(e))throw Error(at(485));if(e=t.action,e!==null){var l={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(f){l.listeners.push(f)}};Qt.T!==null?n(!0):l.isTransition=!1,r(l),n=t.pending,n===null?(l.next=t.pending=l,cy(t,l)):(l.next=n.next,t.pending=n.next=l)}}function cy(e,t){var n=t.action,r=t.payload,o=e.state;if(t.isTransition){var l=Qt.T,f={};Qt.T=f;try{var m=n(o,r),g=Qt.S;g!==null&&g(f,m),c2(e,t,m)}catch(x){G1(e,t,x)}finally{Qt.T=l}}else try{l=n(o,r),c2(e,t,l)}catch(x){G1(e,t,x)}}function c2(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(r){u2(e,t,r)},function(r){return G1(e,t,r)}):u2(e,t,n)}function u2(e,t,n){t.status="fulfilled",t.value=n,uy(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,cy(e,n)))}function G1(e,t,n){var r=e.pending;if(e.pending=null,r!==null){r=r.next;do t.status="rejected",t.reason=n,uy(t),t=t.next;while(t!==r)}e.action=null}function uy(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function dy(e,t){return t}function d2(e,t){if(Ln){var n=or.formState;if(n!==null){e:{var r=fn;if(Ln){if(Or){t:{for(var o=Or,l=Cs;o.nodeType!==8;){if(!l){o=null;break t}if(o=us(o.nextSibling),o===null){o=null;break t}}l=o.data,o=l==="F!"||l==="F"?o:null}if(o){Or=us(o.nextSibling),r=o.data==="F!";break e}}ec(r)}r=!1}r&&(t=n[0])}}return n=oa(),n.memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dy,lastRenderedState:t},n.queue=r,n=Ty.bind(null,fn,r),r.dispatch=n,r=q1(!1),l=Sg.bind(null,fn,!1,r.queue),r=oa(),o={state:t,dispatch:null,action:e,pending:null},r.queue=o,n=v4.bind(null,fn,o,l,n),o.dispatch=n,r.memoizedState=e,[t,n,!1]}function f2(e){var t=Jr();return fy(t,Jn,e)}function fy(e,t,n){if(t=vg(e,t,dy)[0],e=Vf(fo)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var r=zd(t)}catch(f){throw f===Ud?Yh:f}else r=t;t=Jr();var o=t.queue,l=o.dispatch;return n!==t.memoizedState&&(fn.flags|=2048,iu(9,Zh(),w4.bind(null,o,n),null)),[r,l,e]}function w4(e,t){e.action=t}function h2(e){var t=Jr(),n=Jn;if(n!==null)return fy(t,n,e);Jr(),t=t.memoizedState,n=Jr();var r=n.queue.dispatch;return n.memoizedState=e,[t,r,!1]}function iu(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},t=fn.updateQueue,t===null&&(t=bg(),fn.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Zh(){return{destroy:void 0,resource:void 0}}function hy(){return Jr().memoizedState}function qf(e,t,n,r){var o=oa();r=r===void 0?null:r,fn.flags|=e,o.memoizedState=iu(1|t,Zh(),n,r)}function Hd(e,t,n,r){var o=Jr();r=r===void 0?null:r;var l=o.memoizedState.inst;Jn!==null&&r!==null&&hg(r,Jn.memoizedState.deps)?o.memoizedState=iu(t,l,n,r):(fn.flags|=e,o.memoizedState=iu(1|t,l,n,r))}function m2(e,t){qf(8390656,8,e,t)}function my(e,t){Hd(2048,8,e,t)}function gy(e,t){return Hd(4,2,e,t)}function py(e,t){return Hd(4,4,e,t)}function xy(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function by(e,t,n){n=n!=null?n.concat([e]):null,Hd(4,4,xy.bind(null,t,e),n)}function wg(){}function yy(e,t){var n=Jr();t=t===void 0?null:t;var r=n.memoizedState;return t!==null&&hg(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function vy(e,t){var n=Jr();t=t===void 0?null:t;var r=n.memoizedState;if(t!==null&&hg(t,r[1]))return r[0];if(r=e(),nc){Wo(!0);try{e()}finally{Wo(!1)}}return n.memoizedState=[r,t],r}function Ng(e,t,n){return n===void 0||ll&1073741824?e.memoizedState=t:(e.memoizedState=n,e=u5(),fn.lanes|=e,ul|=e,n)}function wy(e,t,n,r){return Oa(n,t)?n:ru.current!==null?(e=Ng(e,n,r),Oa(e,t)||(bi=!0),e):ll&42?(e=u5(),fn.lanes|=e,ul|=e,t):(bi=!0,e.memoizedState=n)}function Ny(e,t,n,r,o){var l=Mn.p;Mn.p=l!==0&&8>l?l:8;var f=Qt.T,m={};Qt.T=m,Sg(e,!1,t,n);try{var g=o(),x=Qt.S;if(x!==null&&x(m,g),g!==null&&typeof g=="object"&&typeof g.then=="function"){var A=x4(g,r);td(e,t,A,Da(e))}else td(e,t,r,Da(e))}catch(N){td(e,t,{then:function(){},status:"rejected",reason:N},Da())}finally{Mn.p=l,Qt.T=f}}function N4(){}function W1(e,t,n,r){if(e.tag!==5)throw Error(at(476));var o=Ay(e).queue;Ny(e,o,t,zl,n===null?N4:function(){return Sy(e),n(r)})}function Ay(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:zl,baseState:zl,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fo,lastRenderedState:zl},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fo,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Sy(e){var t=Ay(e).next.queue;td(e,t,{},Da())}function Ag(){return Ui(Nd)}function Cy(){return Jr().memoizedState}function Ey(){return Jr().memoizedState}function A4(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Da();e=Jo(n);var r=$o(t,e,n);r!==null&&(Ra(r,t,n),Ju(r,t,n)),t={cache:cg()},e.payload=t;return}t=t.return}}function S4(e,t,n){var r=Da();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Qh(e)?_y(t,n):(n=ag(e,t,n,r),n!==null&&(Ra(n,e,r),jy(n,t,r)))}function Ty(e,t,n){var r=Da();td(e,t,n,r)}function td(e,t,n,r){var o={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qh(e))_y(t,o);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var f=t.lastRenderedState,m=l(f,n);if(o.hasEagerState=!0,o.eagerState=m,Oa(m,f))return Wh(e,t,o,0),or===null&&Gh(),!1}catch{}finally{}if(n=ag(e,t,o,r),n!==null)return Ra(n,e,r),jy(n,t,r),!0}return!1}function Sg(e,t,n,r){if(r={lane:2,revertLane:Rg(),action:r,hasEagerState:!1,eagerState:null,next:null},Qh(e)){if(t)throw Error(at(479))}else t=ag(e,n,r,2),t!==null&&Ra(t,e,2)}function Qh(e){var t=e.alternate;return e===fn||t!==null&&t===fn}function _y(e,t){Zc=hh=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function jy(e,t,n){if(n&4194048){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,yb(e,n)}}var gh={readContext:Ui,use:Xh,useCallback:zr,useContext:zr,useEffect:zr,useImperativeHandle:zr,useLayoutEffect:zr,useInsertionEffect:zr,useMemo:zr,useReducer:zr,useRef:zr,useState:zr,useDebugValue:zr,useDeferredValue:zr,useTransition:zr,useSyncExternalStore:zr,useId:zr,useHostTransitionStatus:zr,useFormState:zr,useActionState:zr,useOptimistic:zr,useMemoCache:zr,useCacheRefresh:zr},Iy={readContext:Ui,use:Xh,useCallback:function(e,t){return oa().memoizedState=[e,t===void 0?null:t],e},useContext:Ui,useEffect:m2,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,qf(4194308,4,xy.bind(null,t,e),n)},useLayoutEffect:function(e,t){return qf(4194308,4,e,t)},useInsertionEffect:function(e,t){qf(4,2,e,t)},useMemo:function(e,t){var n=oa();t=t===void 0?null:t;var r=e();if(nc){Wo(!0);try{e()}finally{Wo(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=oa();if(n!==void 0){var o=n(t);if(nc){Wo(!0);try{n(t)}finally{Wo(!1)}}}else o=t;return r.memoizedState=r.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},r.queue=e,e=e.dispatch=S4.bind(null,fn,e),[r.memoizedState,e]},useRef:function(e){var t=oa();return e={current:e},t.memoizedState=e},useState:function(e){e=q1(e);var t=e.queue,n=Ty.bind(null,fn,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:wg,useDeferredValue:function(e,t){var n=oa();return Ng(n,e,t)},useTransition:function(){var e=q1(!1);return e=Ny.bind(null,fn,e.queue,!0,!1),oa().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=fn,o=oa();if(Ln){if(n===void 0)throw Error(at(407));n=n()}else{if(n=t(),or===null)throw Error(at(349));Cn&124||ry(r,t,n)}o.memoizedState=n;var l={value:n,getSnapshot:t};return o.queue=l,m2(ay.bind(null,r,l,e),[e]),r.flags|=2048,iu(9,Zh(),iy.bind(null,r,l,n,t),null),n},useId:function(){var e=oa(),t=or.identifierPrefix;if(Ln){var n=io,r=ro;n=(r&~(1<<32-Ia(r)-1)).toString(32)+n,t="«"+t+"R"+n,n=mh++,0<n&&(t+="H"+n.toString(32)),t+="»"}else n=b4++,t="«"+t+"r"+n.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:Ag,useFormState:d2,useActionState:d2,useOptimistic:function(e){var t=oa();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Sg.bind(null,fn,!0,n),n.dispatch=t,[e,t]},useMemoCache:yg,useCacheRefresh:function(){return oa().memoizedState=A4.bind(null,fn)}},Dy={readContext:Ui,use:Xh,useCallback:yy,useContext:Ui,useEffect:my,useImperativeHandle:by,useInsertionEffect:gy,useLayoutEffect:py,useMemo:vy,useReducer:Vf,useRef:hy,useState:function(){return Vf(fo)},useDebugValue:wg,useDeferredValue:function(e,t){var n=Jr();return wy(n,Jn.memoizedState,e,t)},useTransition:function(){var e=Vf(fo)[0],t=Jr().memoizedState;return[typeof e=="boolean"?e:zd(e),t]},useSyncExternalStore:ny,useId:Cy,useHostTransitionStatus:Ag,useFormState:f2,useActionState:f2,useOptimistic:function(e,t){var n=Jr();return ly(n,Jn,e,t)},useMemoCache:yg,useCacheRefresh:Ey},C4={readContext:Ui,use:Xh,useCallback:yy,useContext:Ui,useEffect:my,useImperativeHandle:by,useInsertionEffect:gy,useLayoutEffect:py,useMemo:vy,useReducer:U0,useRef:hy,useState:function(){return U0(fo)},useDebugValue:wg,useDeferredValue:function(e,t){var n=Jr();return Jn===null?Ng(n,e,t):wy(n,Jn.memoizedState,e,t)},useTransition:function(){var e=U0(fo)[0],t=Jr().memoizedState;return[typeof e=="boolean"?e:zd(e),t]},useSyncExternalStore:ny,useId:Cy,useHostTransitionStatus:Ag,useFormState:h2,useActionState:h2,useOptimistic:function(e,t){var n=Jr();return Jn!==null?ly(n,Jn,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:yg,useCacheRefresh:Ey},Kc=null,bd=0;function Sf(e){var t=bd;return bd+=1,Kc===null&&(Kc=[]),Kb(Kc,e,t)}function Lu(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Cf(e,t){throw t.$$typeof===tw?Error(at(525)):(e=Object.prototype.toString.call(t),Error(at(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function g2(e){var t=e._init;return t(e._payload)}function Ry(e){function t(C,E){if(e){var j=C.deletions;j===null?(C.deletions=[E],C.flags|=16):j.push(E)}}function n(C,E){if(!e)return null;for(;E!==null;)t(C,E),E=E.sibling;return null}function r(C){for(var E=new Map;C!==null;)C.key!==null?E.set(C.key,C):E.set(C.index,C),C=C.sibling;return E}function o(C,E){return C=lo(C,E),C.index=0,C.sibling=null,C}function l(C,E,j){return C.index=j,e?(j=C.alternate,j!==null?(j=j.index,j<E?(C.flags|=67108866,E):j):(C.flags|=67108866,E)):(C.flags|=1048576,E)}function f(C){return e&&C.alternate===null&&(C.flags|=67108866),C}function m(C,E,j,V){return E===null||E.tag!==6?(E=P0(j,C.mode,V),E.return=C,E):(E=o(E,j),E.return=C,E)}function g(C,E,j,V){var W=j.type;return W===Ic?A(C,E,j.props.children,V,j.key):E!==null&&(E.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===Fo&&g2(W)===E.type)?(E=o(E,j.props),Lu(E,j),E.return=C,E):(E=zf(j.type,j.key,j.props,null,C.mode,V),Lu(E,j),E.return=C,E)}function x(C,E,j,V){return E===null||E.tag!==4||E.stateNode.containerInfo!==j.containerInfo||E.stateNode.implementation!==j.implementation?(E=F0(j,C.mode,V),E.return=C,E):(E=o(E,j.children||[]),E.return=C,E)}function A(C,E,j,V,W){return E===null||E.tag!==7?(E=Hl(j,C.mode,V,W),E.return=C,E):(E=o(E,j),E.return=C,E)}function N(C,E,j){if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return E=P0(""+E,C.mode,j),E.return=C,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case xf:return j=zf(E.type,E.key,E.props,null,C.mode,j),Lu(j,E),j.return=C,j;case zu:return E=F0(E,C.mode,j),E.return=C,E;case Fo:var V=E._init;return E=V(E._payload),N(C,E,j)}if(Hu(E)||Iu(E))return E=Hl(E,C.mode,j,null),E.return=C,E;if(typeof E.then=="function")return N(C,Sf(E),j);if(E.$$typeof===no)return N(C,Nf(C,E),j);Cf(C,E)}return null}function T(C,E,j,V){var W=E!==null?E.key:null;if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return W!==null?null:m(C,E,""+j,V);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case xf:return j.key===W?g(C,E,j,V):null;case zu:return j.key===W?x(C,E,j,V):null;case Fo:return W=j._init,j=W(j._payload),T(C,E,j,V)}if(Hu(j)||Iu(j))return W!==null?null:A(C,E,j,V,null);if(typeof j.then=="function")return T(C,E,Sf(j),V);if(j.$$typeof===no)return T(C,E,Nf(C,j),V);Cf(C,j)}return null}function v(C,E,j,V,W){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return C=C.get(j)||null,m(E,C,""+V,W);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case xf:return C=C.get(V.key===null?j:V.key)||null,g(E,C,V,W);case zu:return C=C.get(V.key===null?j:V.key)||null,x(E,C,V,W);case Fo:var ie=V._init;return V=ie(V._payload),v(C,E,j,V,W)}if(Hu(V)||Iu(V))return C=C.get(j)||null,A(E,C,V,W,null);if(typeof V.then=="function")return v(C,E,j,Sf(V),W);if(V.$$typeof===no)return v(C,E,j,Nf(E,V),W);Cf(E,V)}return null}function O(C,E,j,V){for(var W=null,ie=null,B=E,R=E=0,M=null;B!==null&&R<j.length;R++){B.index>R?(M=B,B=null):M=B.sibling;var Z=T(C,B,j[R],V);if(Z===null){B===null&&(B=M);break}e&&B&&Z.alternate===null&&t(C,B),E=l(Z,E,R),ie===null?W=Z:ie.sibling=Z,ie=Z,B=M}if(R===j.length)return n(C,B),Ln&&kl(C,R),W;if(B===null){for(;R<j.length;R++)B=N(C,j[R],V),B!==null&&(E=l(B,E,R),ie===null?W=B:ie.sibling=B,ie=B);return Ln&&kl(C,R),W}for(B=r(B);R<j.length;R++)M=v(B,C,R,j[R],V),M!==null&&(e&&M.alternate!==null&&B.delete(M.key===null?R:M.key),E=l(M,E,R),ie===null?W=M:ie.sibling=M,ie=M);return e&&B.forEach(function(F){return t(C,F)}),Ln&&kl(C,R),W}function D(C,E,j,V){if(j==null)throw Error(at(151));for(var W=null,ie=null,B=E,R=E=0,M=null,Z=j.next();B!==null&&!Z.done;R++,Z=j.next()){B.index>R?(M=B,B=null):M=B.sibling;var F=T(C,B,Z.value,V);if(F===null){B===null&&(B=M);break}e&&B&&F.alternate===null&&t(C,B),E=l(F,E,R),ie===null?W=F:ie.sibling=F,ie=F,B=M}if(Z.done)return n(C,B),Ln&&kl(C,R),W;if(B===null){for(;!Z.done;R++,Z=j.next())Z=N(C,Z.value,V),Z!==null&&(E=l(Z,E,R),ie===null?W=Z:ie.sibling=Z,ie=Z);return Ln&&kl(C,R),W}for(B=r(B);!Z.done;R++,Z=j.next())Z=v(B,C,R,Z.value,V),Z!==null&&(e&&Z.alternate!==null&&B.delete(Z.key===null?R:Z.key),E=l(Z,E,R),ie===null?W=Z:ie.sibling=Z,ie=Z);return e&&B.forEach(function(k){return t(C,k)}),Ln&&kl(C,R),W}function P(C,E,j,V){if(typeof j=="object"&&j!==null&&j.type===Ic&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case xf:e:{for(var W=j.key;E!==null;){if(E.key===W){if(W=j.type,W===Ic){if(E.tag===7){n(C,E.sibling),V=o(E,j.props.children),V.return=C,C=V;break e}}else if(E.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===Fo&&g2(W)===E.type){n(C,E.sibling),V=o(E,j.props),Lu(V,j),V.return=C,C=V;break e}n(C,E);break}else t(C,E);E=E.sibling}j.type===Ic?(V=Hl(j.props.children,C.mode,V,j.key),V.return=C,C=V):(V=zf(j.type,j.key,j.props,null,C.mode,V),Lu(V,j),V.return=C,C=V)}return f(C);case zu:e:{for(W=j.key;E!==null;){if(E.key===W)if(E.tag===4&&E.stateNode.containerInfo===j.containerInfo&&E.stateNode.implementation===j.implementation){n(C,E.sibling),V=o(E,j.children||[]),V.return=C,C=V;break e}else{n(C,E);break}else t(C,E);E=E.sibling}V=F0(j,C.mode,V),V.return=C,C=V}return f(C);case Fo:return W=j._init,j=W(j._payload),P(C,E,j,V)}if(Hu(j))return O(C,E,j,V);if(Iu(j)){if(W=Iu(j),typeof W!="function")throw Error(at(150));return j=W.call(j),D(C,E,j,V)}if(typeof j.then=="function")return P(C,E,Sf(j),V);if(j.$$typeof===no)return P(C,E,Nf(C,j),V);Cf(C,j)}return typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint"?(j=""+j,E!==null&&E.tag===6?(n(C,E.sibling),V=o(E,j),V.return=C,C=V):(n(C,E),V=P0(j,C.mode,V),V.return=C,C=V),f(C)):n(C,E)}return function(C,E,j,V){try{bd=0;var W=P(C,E,j,V);return Kc=null,W}catch(B){if(B===Ud||B===Yh)throw B;var ie=Ea(29,B,null,C.mode);return ie.lanes=V,ie.return=C,ie}finally{}}}var au=Ry(!0),Oy=Ry(!1),Ka=ks(null),Is=null;function zo(e){var t=e.alternate;yr(li,li.current&1),yr(Ka,e),Is===null&&(t===null||ru.current!==null||t.memoizedState!==null)&&(Is=e)}function Ly(e){if(e.tag===22){if(yr(li,li.current),yr(Ka,e),Is===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Is=e)}}else Ho()}function Ho(){yr(li,li.current),yr(Ka,Ka.current)}function so(e){yi(Ka),Is===e&&(Is=null),yi(li)}var li=ks(0);function ph(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||cm(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function z0(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:fr({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Y1={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Da(),o=Jo(r);o.payload=t,n!=null&&(o.callback=n),t=$o(e,o,r),t!==null&&(Ra(t,e,r),Ju(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Da(),o=Jo(r);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=$o(e,o,r),t!==null&&(Ra(t,e,r),Ju(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Da(),r=Jo(n);r.tag=2,t!=null&&(r.callback=t),t=$o(e,r,n),t!==null&&(Ra(t,e,n),Ju(t,e,n))}};function p2(e,t,n,r,o,l,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,f):t.prototype&&t.prototype.isPureReactComponent?!gd(n,r)||!gd(o,l):!0}function x2(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Y1.enqueueReplaceState(t,t.state,null)}function rc(e,t){var n=t;if("ref"in t){n={};for(var r in t)r!=="ref"&&(n[r]=t[r])}if(e=e.defaultProps){n===t&&(n=fr({},n));for(var o in e)n[o]===void 0&&(n[o]=e[o])}return n}var xh=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function My(e){xh(e)}function ky(e){console.error(e)}function Py(e){xh(e)}function bh(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(r){setTimeout(function(){throw r})}}function b2(e,t,n){try{var r=e.onCaughtError;r(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function X1(e,t,n){return n=Jo(n),n.tag=3,n.payload={element:null},n.callback=function(){bh(e,t)},n}function Fy(e){return e=Jo(e),e.tag=3,e}function By(e,t,n,r){var o=n.type.getDerivedStateFromError;if(typeof o=="function"){var l=r.value;e.payload=function(){return o(l)},e.callback=function(){b2(t,n,r)}}var f=n.stateNode;f!==null&&typeof f.componentDidCatch=="function"&&(e.callback=function(){b2(t,n,r),typeof o!="function"&&(el===null?el=new Set([this]):el.add(this));var m=r.stack;this.componentDidCatch(r.value,{componentStack:m!==null?m:""})})}function E4(e,t,n,r,o){if(n.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(t=n.alternate,t!==null&&Fd(t,n,o,!0),n=Ka.current,n!==null){switch(n.tag){case 13:return Is===null?nm():n.alternate===null&&Lr===0&&(Lr=3),n.flags&=-257,n.flags|=65536,n.lanes=o,r===U1?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([r]):t.add(r),J0(e,r,o)),!1;case 22:return n.flags|=65536,r===U1?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([r]):n.add(r)),J0(e,r,o)),!1}throw Error(at(435,n.tag))}return J0(e,r,o),nm(),!1}if(Ln)return t=Ka.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=o,r!==M1&&(e=Error(at(422),{cause:r}),pd(Za(e,n)))):(r!==M1&&(t=Error(at(423),{cause:r}),pd(Za(t,n))),e=e.current.alternate,e.flags|=65536,o&=-o,e.lanes|=o,r=Za(r,n),o=X1(e.stateNode,r,o),B0(e,o),Lr!==4&&(Lr=2)),!1;var l=Error(at(520),{cause:r});if(l=Za(l,n),id===null?id=[l]:id.push(l),Lr!==4&&(Lr=2),t===null)return!0;r=Za(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=o&-o,n.lanes|=e,e=X1(n.stateNode,r,e),B0(n,e),!1;case 1:if(t=n.type,l=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||l!==null&&typeof l.componentDidCatch=="function"&&(el===null||!el.has(l))))return n.flags|=65536,o&=-o,n.lanes|=o,o=Fy(o),By(o,e,n,r),B0(n,o),!1}n=n.return}while(n!==null);return!1}var Uy=Error(at(461)),bi=!1;function Ai(e,t,n,r){t.child=e===null?Oy(t,null,n,r):au(t,e.child,n,r)}function y2(e,t,n,r,o){n=n.render;var l=t.ref;if("ref"in r){var f={};for(var m in r)m!=="ref"&&(f[m]=r[m])}else f=r;return tc(t),r=mg(e,t,n,f,l,o),m=gg(),e!==null&&!bi?(pg(e,t,o),ho(e,t,o)):(Ln&&m&&og(t),t.flags|=1,Ai(e,t,r,o),t.child)}function v2(e,t,n,r,o){if(e===null){var l=n.type;return typeof l=="function"&&!sg(l)&&l.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=l,zy(e,t,l,r,o)):(e=zf(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!Cg(e,o)){var f=l.memoizedProps;if(n=n.compare,n=n!==null?n:gd,n(f,r)&&e.ref===t.ref)return ho(e,t,o)}return t.flags|=1,e=lo(l,r),e.ref=t.ref,e.return=t,t.child=e}function zy(e,t,n,r,o){if(e!==null){var l=e.memoizedProps;if(gd(l,r)&&e.ref===t.ref)if(bi=!1,t.pendingProps=r=l,Cg(e,o))e.flags&131072&&(bi=!0);else return t.lanes=e.lanes,ho(e,t,o)}return Z1(e,t,n,r,o)}function Hy(e,t,n){var r=t.pendingProps,o=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden"){if(t.flags&128){if(r=l!==null?l.baseLanes|n:n,e!==null){for(o=t.child=e.child,l=0;o!==null;)l=l|o.lanes|o.childLanes,o=o.sibling;t.childLanes=l&~r}else t.childLanes=0,t.child=null;return w2(e,t,r,n)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Hf(t,l!==null?l.cachePool:null),l!==null?l2(t,l):V1(),Ly(t);else return t.lanes=t.childLanes=536870912,w2(e,t,l!==null?l.baseLanes|n:n,n)}else l!==null?(Hf(t,l.cachePool),l2(t,l),Ho(),t.memoizedState=null):(e!==null&&Hf(t,null),V1(),Ho());return Ai(e,t,o,n),t.child}function w2(e,t,n,r){var o=ug();return o=o===null?null:{parent:oi._currentValue,pool:o},t.memoizedState={baseLanes:n,cachePool:o},e!==null&&Hf(t,null),V1(),Ly(t),e!==null&&Fd(e,t,r,!0),null}function Gf(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(at(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Z1(e,t,n,r,o){return tc(t),n=mg(e,t,n,r,void 0,o),r=gg(),e!==null&&!bi?(pg(e,t,o),ho(e,t,o)):(Ln&&r&&og(t),t.flags|=1,Ai(e,t,n,o),t.child)}function N2(e,t,n,r,o,l){return tc(t),t.updateQueue=null,n=ty(t,r,n,o),ey(e),r=gg(),e!==null&&!bi?(pg(e,t,l),ho(e,t,l)):(Ln&&r&&og(t),t.flags|=1,Ai(e,t,n,l),t.child)}function A2(e,t,n,r,o){if(tc(t),t.stateNode===null){var l=Fc,f=n.contextType;typeof f=="object"&&f!==null&&(l=Ui(f)),l=new n(r,l),t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Y1,t.stateNode=l,l._reactInternals=t,l=t.stateNode,l.props=r,l.state=t.memoizedState,l.refs={},dg(t),f=n.contextType,l.context=typeof f=="object"&&f!==null?Ui(f):Fc,l.state=t.memoizedState,f=n.getDerivedStateFromProps,typeof f=="function"&&(z0(t,n,f,r),l.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(f=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),f!==l.state&&Y1.enqueueReplaceState(l,l.state,null),ed(t,r,l,o),$u(),l.state=t.memoizedState),typeof l.componentDidMount=="function"&&(t.flags|=4194308),r=!0}else if(e===null){l=t.stateNode;var m=t.memoizedProps,g=rc(n,m);l.props=g;var x=l.context,A=n.contextType;f=Fc,typeof A=="object"&&A!==null&&(f=Ui(A));var N=n.getDerivedStateFromProps;A=typeof N=="function"||typeof l.getSnapshotBeforeUpdate=="function",m=t.pendingProps!==m,A||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(m||x!==f)&&x2(t,l,r,f),Bo=!1;var T=t.memoizedState;l.state=T,ed(t,r,l,o),$u(),x=t.memoizedState,m||T!==x||Bo?(typeof N=="function"&&(z0(t,n,N,r),x=t.memoizedState),(g=Bo||p2(t,n,g,r,T,x,f))?(A||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=x),l.props=r,l.state=x,l.context=f,r=g):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{l=t.stateNode,z1(e,t),f=t.memoizedProps,A=rc(n,f),l.props=A,N=t.pendingProps,T=l.context,x=n.contextType,g=Fc,typeof x=="object"&&x!==null&&(g=Ui(x)),m=n.getDerivedStateFromProps,(x=typeof m=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(f!==N||T!==g)&&x2(t,l,r,g),Bo=!1,T=t.memoizedState,l.state=T,ed(t,r,l,o),$u();var v=t.memoizedState;f!==N||T!==v||Bo||e!==null&&e.dependencies!==null&&dh(e.dependencies)?(typeof m=="function"&&(z0(t,n,m,r),v=t.memoizedState),(A=Bo||p2(t,n,A,r,T,v,g)||e!==null&&e.dependencies!==null&&dh(e.dependencies))?(x||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,v,g),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,v,g)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||f===e.memoizedProps&&T===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&T===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),l.props=r,l.state=v,l.context=g,r=A):(typeof l.componentDidUpdate!="function"||f===e.memoizedProps&&T===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&T===e.memoizedState||(t.flags|=1024),r=!1)}return l=r,Gf(e,t),r=(t.flags&128)!==0,l||r?(l=t.stateNode,n=r&&typeof n.getDerivedStateFromError!="function"?null:l.render(),t.flags|=1,e!==null&&r?(t.child=au(t,e.child,null,o),t.child=au(t,null,n,o)):Ai(e,t,n,o),t.memoizedState=l.state,e=t.child):e=ho(e,t,o),e}function S2(e,t,n,r){return Pd(),t.flags|=256,Ai(e,t,n,r),t.child}var H0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function V0(e){return{baseLanes:e,cachePool:Zb()}}function q0(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=Qa),e}function Vy(e,t,n){var r=t.pendingProps,o=!1,l=(t.flags&128)!==0,f;if((f=l)||(f=e!==null&&e.memoizedState===null?!1:(li.current&2)!==0),f&&(o=!0,t.flags&=-129),f=(t.flags&32)!==0,t.flags&=-33,e===null){if(Ln){if(o?zo(t):Ho(),Ln){var m=Or,g;if(g=m){e:{for(g=m,m=Cs;g.nodeType!==8;){if(!m){m=null;break e}if(g=us(g.nextSibling),g===null){m=null;break e}}m=g}m!==null?(t.memoizedState={dehydrated:m,treeContext:Vl!==null?{id:ro,overflow:io}:null,retryLane:536870912,hydrationErrors:null},g=Ea(18,null,null,0),g.stateNode=m,g.return=t,t.child=g,Zi=t,Or=null,g=!0):g=!1}g||ec(t)}if(m=t.memoizedState,m!==null&&(m=m.dehydrated,m!==null))return cm(m)?t.lanes=32:t.lanes=536870912,null;so(t)}return m=r.children,r=r.fallback,o?(Ho(),o=t.mode,m=yh({mode:"hidden",children:m},o),r=Hl(r,o,n,null),m.return=t,r.return=t,m.sibling=r,t.child=m,o=t.child,o.memoizedState=V0(n),o.childLanes=q0(e,f,n),t.memoizedState=H0,r):(zo(t),Q1(t,m))}if(g=e.memoizedState,g!==null&&(m=g.dehydrated,m!==null)){if(l)t.flags&256?(zo(t),t.flags&=-257,t=G0(e,t,n)):t.memoizedState!==null?(Ho(),t.child=e.child,t.flags|=128,t=null):(Ho(),o=r.fallback,m=t.mode,r=yh({mode:"visible",children:r.children},m),o=Hl(o,m,n,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,au(t,e.child,null,n),r=t.child,r.memoizedState=V0(n),r.childLanes=q0(e,f,n),t.memoizedState=H0,t=o);else if(zo(t),cm(m)){if(f=m.nextSibling&&m.nextSibling.dataset,f)var x=f.dgst;f=x,r=Error(at(419)),r.stack="",r.digest=f,pd({value:r,source:null,stack:null}),t=G0(e,t,n)}else if(bi||Fd(e,t,n,!1),f=(n&e.childLanes)!==0,bi||f){if(f=or,f!==null&&(r=n&-n,r=r&42?1:Zm(r),r=r&(f.suspendedLanes|n)?0:r,r!==0&&r!==g.retryLane))throw g.retryLane=r,gu(e,r),Ra(f,e,r),Uy;m.data==="$?"||nm(),t=G0(e,t,n)}else m.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=g.treeContext,Or=us(m.nextSibling),Zi=t,Ln=!0,ql=null,Cs=!1,e!==null&&(Ga[Wa++]=ro,Ga[Wa++]=io,Ga[Wa++]=Vl,ro=e.id,io=e.overflow,Vl=t),t=Q1(t,r.children),t.flags|=4096);return t}return o?(Ho(),o=r.fallback,m=t.mode,g=e.child,x=g.sibling,r=lo(g,{mode:"hidden",children:r.children}),r.subtreeFlags=g.subtreeFlags&65011712,x!==null?o=lo(x,o):(o=Hl(o,m,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,m=e.child.memoizedState,m===null?m=V0(n):(g=m.cachePool,g!==null?(x=oi._currentValue,g=g.parent!==x?{parent:x,pool:x}:g):g=Zb(),m={baseLanes:m.baseLanes|n,cachePool:g}),o.memoizedState=m,o.childLanes=q0(e,f,n),t.memoizedState=H0,r):(zo(t),n=e.child,e=n.sibling,n=lo(n,{mode:"visible",children:r.children}),n.return=t,n.sibling=null,e!==null&&(f=t.deletions,f===null?(t.deletions=[e],t.flags|=16):f.push(e)),t.child=n,t.memoizedState=null,n)}function Q1(e,t){return t=yh({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function yh(e,t){return e=Ea(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function G0(e,t,n){return au(t,e.child,null,n),e=Q1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function C2(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),P1(e.return,t,n)}function W0(e,t,n,r,o){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=o)}function qy(e,t,n){var r=t.pendingProps,o=r.revealOrder,l=r.tail;if(Ai(e,t,r.children,n),r=li.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&C2(e,n,t);else if(e.tag===19)C2(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(yr(li,r),o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&ph(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),W0(t,!1,o,n,l);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&ph(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}W0(t,!0,n,null,l);break;case"together":W0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ho(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ul|=t.lanes,!(n&t.childLanes))if(e!==null){if(Fd(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(at(153));if(t.child!==null){for(e=t.child,n=lo(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=lo(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Cg(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&dh(e)))}function T4(e,t,n){switch(t.tag){case 3:rh(t,t.stateNode.containerInfo),Uo(t,oi,e.memoizedState.cache),Pd();break;case 27:case 5:C1(t);break;case 4:rh(t,t.stateNode.containerInfo);break;case 10:Uo(t,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(r!==null)return r.dehydrated!==null?(zo(t),t.flags|=128,null):n&t.child.childLanes?Vy(e,t,n):(zo(t),e=ho(e,t,n),e!==null?e.sibling:null);zo(t);break;case 19:var o=(e.flags&128)!==0;if(r=(n&t.childLanes)!==0,r||(Fd(e,t,n,!1),r=(n&t.childLanes)!==0),o){if(r)return qy(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),yr(li,li.current),r)break;return null;case 22:case 23:return t.lanes=0,Hy(e,t,n);case 24:Uo(t,oi,e.memoizedState.cache)}return ho(e,t,n)}function Gy(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)bi=!0;else{if(!Cg(e,n)&&!(t.flags&128))return bi=!1,T4(e,t,n);bi=!!(e.flags&131072)}else bi=!1,Ln&&t.flags&1048576&&Yb(t,uh,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,o=r._init;if(r=o(r._payload),t.type=r,typeof r=="function")sg(r)?(e=rc(r,e),t.tag=1,t=A2(null,t,r,e,n)):(t.tag=0,t=Z1(null,t,r,e,n));else{if(r!=null){if(o=r.$$typeof,o===Wm){t.tag=11,t=y2(null,t,r,e,n);break e}else if(o===Ym){t.tag=14,t=v2(null,t,r,e,n);break e}}throw t=A1(r)||r,Error(at(306,t,""))}}return t;case 0:return Z1(e,t,t.type,t.pendingProps,n);case 1:return r=t.type,o=rc(r,t.pendingProps),A2(e,t,r,o,n);case 3:e:{if(rh(t,t.stateNode.containerInfo),e===null)throw Error(at(387));r=t.pendingProps;var l=t.memoizedState;o=l.element,z1(e,t),ed(t,r,null,n);var f=t.memoizedState;if(r=f.cache,Uo(t,oi,r),r!==l.cache&&F1(t,[oi],n,!0),$u(),r=f.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:f.cache},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){t=S2(e,t,r,n);break e}else if(r!==o){o=Za(Error(at(424)),t),pd(o),t=S2(e,t,r,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Or=us(e.firstChild),Zi=t,Ln=!0,ql=null,Cs=!0,n=Oy(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Pd(),r===o){t=ho(e,t,n);break e}Ai(e,t,r,n)}t=t.child}return t;case 26:return Gf(e,t),e===null?(n=H2(t.type,null,t.pendingProps,null))?t.memoizedState=n:Ln||(n=t.type,e=t.pendingProps,r=Eh(Ko.current).createElement(n),r[Bi]=t,r[da]=e,Ci(r,n,e),xi(r),t.stateNode=r):t.memoizedState=H2(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return C1(t),e===null&&Ln&&(r=t.stateNode=D5(t.type,t.pendingProps,Ko.current),Zi=t,Cs=!0,o=Or,xl(t.type)?(um=o,Or=us(r.firstChild)):Or=o),Ai(e,t,t.pendingProps.children,n),Gf(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Ln&&((o=r=Or)&&(r=tN(r,t.type,t.pendingProps,Cs),r!==null?(t.stateNode=r,Zi=t,Or=us(r.firstChild),Cs=!1,o=!0):o=!1),o||ec(t)),C1(t),o=t.type,l=t.pendingProps,f=e!==null?e.memoizedProps:null,r=l.children,om(o,l)?r=null:f!==null&&om(o,f)&&(t.flags|=32),t.memoizedState!==null&&(o=mg(e,t,y4,null,null,n),Nd._currentValue=o),Gf(e,t),Ai(e,t,r,n),t.child;case 6:return e===null&&Ln&&((e=n=Or)&&(n=nN(n,t.pendingProps,Cs),n!==null?(t.stateNode=n,Zi=t,Or=null,e=!0):e=!1),e||ec(t)),null;case 13:return Vy(e,t,n);case 4:return rh(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=au(t,null,r,n):Ai(e,t,r,n),t.child;case 11:return y2(e,t,t.type,t.pendingProps,n);case 7:return Ai(e,t,t.pendingProps,n),t.child;case 8:return Ai(e,t,t.pendingProps.children,n),t.child;case 12:return Ai(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,Uo(t,t.type,r.value),Ai(e,t,r.children,n),t.child;case 9:return o=t.type._context,r=t.pendingProps.children,tc(t),o=Ui(o),r=r(o),t.flags|=1,Ai(e,t,r,n),t.child;case 14:return v2(e,t,t.type,t.pendingProps,n);case 15:return zy(e,t,t.type,t.pendingProps,n);case 19:return qy(e,t,n);case 31:return r=t.pendingProps,n=t.mode,r={mode:r.mode,children:r.children},e===null?(n=yh(r,n),n.ref=t.ref,t.child=n,n.return=t,t=n):(n=lo(e.child,r),n.ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Hy(e,t,n);case 24:return tc(t),r=Ui(oi),e===null?(o=ug(),o===null&&(o=or,l=cg(),o.pooledCache=l,l.refCount++,l!==null&&(o.pooledCacheLanes|=n),o=l),t.memoizedState={parent:r,cache:o},dg(t),Uo(t,oi,o)):(e.lanes&n&&(z1(e,t),ed(t,null,null,n),$u()),o=e.memoizedState,l=t.memoizedState,o.parent!==r?(o={parent:r,cache:r},t.memoizedState=o,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=o),Uo(t,oi,r)):(r=l.cache,Uo(t,oi,r),r!==o.cache&&F1(t,[oi],n,!0))),Ai(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(at(156,t.tag))}function Ks(e){e.flags|=4}function E2(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!L5(t)){if(t=Ka.current,t!==null&&((Cn&4194048)===Cn?Is!==null:(Cn&62914560)!==Cn&&!(Cn&536870912)||t!==Is))throw Ku=U1,Qb;e.flags|=8192}}function Ef(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?xb():536870912,e.lanes|=t,su|=t)}function Mu(e,t){if(!Ln)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Cr(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&65011712,r|=o.flags&65011712,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function _4(e,t,n){var r=t.pendingProps;switch(lg(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Cr(t),null;case 1:return Cr(t),null;case 3:return n=t.stateNode,r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),co(oi),$c(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Ou(t)?Ks(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,n2())),Cr(t),null;case 26:return n=t.memoizedState,e===null?(Ks(t),n!==null?(Cr(t),E2(t,n)):(Cr(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Ks(t),Cr(t),E2(t,n)):(Cr(t),t.flags&=-16777217):(e.memoizedProps!==r&&Ks(t),Cr(t),t.flags&=-16777217),null;case 27:ih(t),n=Ko.current;var o=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==r&&Ks(t);else{if(!r){if(t.stateNode===null)throw Error(at(166));return Cr(t),null}e=_s.current,Ou(t)?e2(t):(e=D5(o,r,n),t.stateNode=e,Ks(t))}return Cr(t),null;case 5:if(ih(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&Ks(t);else{if(!r){if(t.stateNode===null)throw Error(at(166));return Cr(t),null}if(e=_s.current,Ou(t))e2(t);else{switch(o=Eh(Ko.current),e){case 1:e=o.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=o.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=o.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=o.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof r.is=="string"?o.createElement("select",{is:r.is}):o.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e=typeof r.is=="string"?o.createElement(n,{is:r.is}):o.createElement(n)}}e[Bi]=t,e[da]=r;e:for(o=t.child;o!==null;){if(o.tag===5||o.tag===6)e.appendChild(o.stateNode);else if(o.tag!==4&&o.tag!==27&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;o.sibling===null;){if(o.return===null||o.return===t)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=e;e:switch(Ci(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Ks(t)}}return Cr(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==r&&Ks(t);else{if(typeof r!="string"&&t.stateNode===null)throw Error(at(166));if(e=Ko.current,Ou(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,o=Zi,o!==null)switch(o.tag){case 27:case 5:r=o.memoizedProps}e[Bi]=t,e=!!(e.nodeValue===n||r!==null&&r.suppressHydrationWarning===!0||_5(e.nodeValue,n)),e||ec(t)}else e=Eh(e).createTextNode(r),e[Bi]=t,t.stateNode=e}return Cr(t),null;case 13:if(r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(o=Ou(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(at(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(at(317));o[Bi]=t}else Pd(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Cr(t),o=!1}else o=n2(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return t.flags&256?(so(t),t):(so(t),null)}if(so(t),t.flags&128)return t.lanes=n,t;if(n=r!==null,e=e!==null&&e.memoizedState!==null,n){r=t.child,o=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(o=r.alternate.memoizedState.cachePool.pool);var l=null;r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==o&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),Ef(t,t.updateQueue),Cr(t),null;case 4:return $c(),e===null&&Og(t.stateNode.containerInfo),Cr(t),null;case 10:return co(t.type),Cr(t),null;case 19:if(yi(li),o=t.memoizedState,o===null)return Cr(t),null;if(r=(t.flags&128)!==0,l=o.rendering,l===null)if(r)Mu(o,!1);else{if(Lr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=ph(e),l!==null){for(t.flags|=128,Mu(o,!1),e=l.updateQueue,t.updateQueue=e,Ef(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)Wb(n,e),n=n.sibling;return yr(li,li.current&1|2),t.child}e=e.sibling}o.tail!==null&&js()>wh&&(t.flags|=128,r=!0,Mu(o,!1),t.lanes=4194304)}else{if(!r)if(e=ph(l),e!==null){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,Ef(t,e),Mu(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!Ln)return Cr(t),null}else 2*js()-o.renderingStartTime>wh&&n!==536870912&&(t.flags|=128,r=!0,Mu(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(e=o.last,e!==null?e.sibling=l:t.child=l,o.last=l)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=js(),t.sibling=null,e=li.current,yr(li,r?e&1|2:e&1),t):(Cr(t),null);case 22:case 23:return so(t),fg(),r=t.memoizedState!==null,e!==null?e.memoizedState!==null!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?n&536870912&&!(t.flags&128)&&(Cr(t),t.subtreeFlags&6&&(t.flags|=8192)):Cr(t),n=t.updateQueue,n!==null&&Ef(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),r=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),e!==null&&yi(Gl),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),co(oi),Cr(t),null;case 25:return null;case 30:return null}throw Error(at(156,t.tag))}function j4(e,t){switch(lg(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return co(oi),$c(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return ih(t),null;case 13:if(so(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(at(340));Pd()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return yi(li),null;case 4:return $c(),null;case 10:return co(t.type),null;case 22:case 23:return so(t),fg(),e!==null&&yi(Gl),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return co(oi),null;case 25:return null;default:return null}}function Wy(e,t){switch(lg(t),t.tag){case 3:co(oi),$c();break;case 26:case 27:case 5:ih(t);break;case 4:$c();break;case 13:so(t);break;case 19:yi(li);break;case 10:co(t.type);break;case 22:case 23:so(t),fg(),e!==null&&yi(Gl);break;case 24:co(oi)}}function Vd(e,t){try{var n=t.updateQueue,r=n!==null?n.lastEffect:null;if(r!==null){var o=r.next;n=o;do{if((n.tag&e)===e){r=void 0;var l=n.create,f=n.inst;r=l(),f.destroy=r}n=n.next}while(n!==o)}}catch(m){rr(t,t.return,m)}}function cl(e,t,n){try{var r=t.updateQueue,o=r!==null?r.lastEffect:null;if(o!==null){var l=o.next;r=l;do{if((r.tag&e)===e){var f=r.inst,m=f.destroy;if(m!==void 0){f.destroy=void 0,o=t;var g=n,x=m;try{x()}catch(A){rr(o,g,A)}}}r=r.next}while(r!==l)}}catch(A){rr(t,t.return,A)}}function Yy(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{$b(t,n)}catch(r){rr(e,e.return,r)}}}function Xy(e,t,n){n.props=rc(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){rr(e,t,r)}}function nd(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;case 30:r=e.stateNode;break;default:r=e.stateNode}typeof n=="function"?e.refCleanup=n(r):n.current=r}}catch(o){rr(e,t,o)}}function Es(e,t){var n=e.ref,r=e.refCleanup;if(n!==null)if(typeof r=="function")try{r()}catch(o){rr(e,t,o)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(o){rr(e,t,o)}else n.current=null}function Zy(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(o){rr(e,e.return,o)}}function Y0(e,t,n){try{var r=e.stateNode;Q4(r,e.type,n,t),r[da]=t}catch(o){rr(e,e.return,o)}}function Qy(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&xl(e.type)||e.tag===4}function X0(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Qy(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&xl(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function K1(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=e0));else if(r!==4&&(r===27&&xl(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(K1(e,t,n),e=e.sibling;e!==null;)K1(e,t,n),e=e.sibling}function vh(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(r===27&&xl(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(vh(e,t,n),e=e.sibling;e!==null;)vh(e,t,n),e=e.sibling}function Ky(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,o=t.attributes;o.length;)t.removeAttributeNode(o[0]);Ci(t,r,n),t[Bi]=e,t[da]=n}catch(l){rr(e,e.return,l)}}var to=!1,Hr=!1,Z0=!1,T2=typeof WeakSet=="function"?WeakSet:Set,pi=null;function I4(e,t){if(e=e.containerInfo,am=Ih,e=Fb(e),rg(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var f=0,m=-1,g=-1,x=0,A=0,N=e,T=null;t:for(;;){for(var v;N!==n||o!==0&&N.nodeType!==3||(m=f+o),N!==l||r!==0&&N.nodeType!==3||(g=f+r),N.nodeType===3&&(f+=N.nodeValue.length),(v=N.firstChild)!==null;)T=N,N=v;for(;;){if(N===e)break t;if(T===n&&++x===o&&(m=f),T===l&&++A===r&&(g=f),(v=N.nextSibling)!==null)break;N=T,T=N.parentNode}N=v}n=m===-1||g===-1?null:{start:m,end:g}}else n=null}n=n||{start:0,end:0}}else n=null;for(sm={focusedElem:e,selectionRange:n},Ih=!1,pi=t;pi!==null;)if(t=pi,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,pi=e;else for(;pi!==null;){switch(t=pi,l=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&l!==null){e=void 0,n=t,o=l.memoizedProps,l=l.memoizedState,r=n.stateNode;try{var O=rc(n.type,o,n.elementType===n.type);e=r.getSnapshotBeforeUpdate(O,l),r.__reactInternalSnapshotBeforeUpdate=e}catch(D){rr(n,n.return,D)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)lm(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":lm(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(at(163))}if(e=t.sibling,e!==null){e.return=t.return,pi=e;break}pi=t.return}}function Jy(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Oo(e,n),r&4&&Vd(5,n);break;case 1:if(Oo(e,n),r&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(f){rr(n,n.return,f)}else{var o=rc(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(f){rr(n,n.return,f)}}r&64&&Yy(n),r&512&&nd(n,n.return);break;case 3:if(Oo(e,n),r&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{$b(e,t)}catch(f){rr(n,n.return,f)}}break;case 27:t===null&&r&4&&Ky(n);case 26:case 5:Oo(e,n),t===null&&r&4&&Zy(n),r&512&&nd(n,n.return);break;case 12:Oo(e,n);break;case 13:Oo(e,n),r&4&&t5(e,n),r&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=B4.bind(null,n),rN(e,n))));break;case 22:if(r=n.memoizedState!==null||to,!r){t=t!==null&&t.memoizedState!==null||Hr,o=to;var l=Hr;to=r,(Hr=t)&&!l?Po(e,n,(n.subtreeFlags&8772)!==0):Oo(e,n),to=o,Hr=l}break;case 30:break;default:Oo(e,n)}}function $y(e){var t=e.alternate;t!==null&&(e.alternate=null,$y(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Km(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var xr=null,la=!1;function Js(e,t,n){for(n=n.child;n!==null;)e5(e,t,n),n=n.sibling}function e5(e,t,n){if(ja&&typeof ja.onCommitFiberUnmount=="function")try{ja.onCommitFiberUnmount(Rd,n)}catch{}switch(n.tag){case 26:Hr||Es(n,t),Js(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Hr||Es(n,t);var r=xr,o=la;xl(n.type)&&(xr=n.stateNode,la=!1),Js(e,t,n),sd(n.stateNode),xr=r,la=o;break;case 5:Hr||Es(n,t);case 6:if(r=xr,o=la,xr=null,Js(e,t,n),xr=r,la=o,xr!==null)if(la)try{(xr.nodeType===9?xr.body:xr.nodeName==="HTML"?xr.ownerDocument.body:xr).removeChild(n.stateNode)}catch(l){rr(n,t,l)}else try{xr.removeChild(n.stateNode)}catch(l){rr(n,t,l)}break;case 18:xr!==null&&(la?(e=xr,B2(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Cd(e)):B2(xr,n.stateNode));break;case 4:r=xr,o=la,xr=n.stateNode.containerInfo,la=!0,Js(e,t,n),xr=r,la=o;break;case 0:case 11:case 14:case 15:Hr||cl(2,n,t),Hr||cl(4,n,t),Js(e,t,n);break;case 1:Hr||(Es(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"&&Xy(n,t,r)),Js(e,t,n);break;case 21:Js(e,t,n);break;case 22:Hr=(r=Hr)||n.memoizedState!==null,Js(e,t,n),Hr=r;break;default:Js(e,t,n)}}function t5(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Cd(e)}catch(n){rr(t,t.return,n)}}function D4(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new T2),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new T2),t;default:throw Error(at(435,e.tag))}}function Q0(e,t){var n=D4(e);t.forEach(function(r){var o=U4.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}function wa(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r],l=e,f=t,m=f;e:for(;m!==null;){switch(m.tag){case 27:if(xl(m.type)){xr=m.stateNode,la=!1;break e}break;case 5:xr=m.stateNode,la=!1;break e;case 3:case 4:xr=m.stateNode.containerInfo,la=!0;break e}m=m.return}if(xr===null)throw Error(at(160));e5(l,f,o),xr=null,la=!1,l=o.alternate,l!==null&&(l.return=null),o.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)n5(t,e),t=t.sibling}var os=null;function n5(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:wa(t,e),Na(e),r&4&&(cl(3,e,e.return),Vd(3,e),cl(5,e,e.return));break;case 1:wa(t,e),Na(e),r&512&&(Hr||n===null||Es(n,n.return)),r&64&&to&&(e=e.updateQueue,e!==null&&(r=e.callbacks,r!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?r:n.concat(r))));break;case 26:var o=os;if(wa(t,e),Na(e),r&512&&(Hr||n===null||Es(n,n.return)),r&4){var l=n!==null?n.memoizedState:null;if(r=e.memoizedState,n===null)if(r===null)if(e.stateNode===null){e:{r=e.type,n=e.memoizedProps,o=o.ownerDocument||o;t:switch(r){case"title":l=o.getElementsByTagName("title")[0],(!l||l[Md]||l[Bi]||l.namespaceURI==="http://www.w3.org/2000/svg"||l.hasAttribute("itemprop"))&&(l=o.createElement(r),o.head.insertBefore(l,o.querySelector("head > title"))),Ci(l,r,n),l[Bi]=e,xi(l),r=l;break e;case"link":var f=q2("link","href",o).get(r+(n.href||""));if(f){for(var m=0;m<f.length;m++)if(l=f[m],l.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&l.getAttribute("rel")===(n.rel==null?null:n.rel)&&l.getAttribute("title")===(n.title==null?null:n.title)&&l.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){f.splice(m,1);break t}}l=o.createElement(r),Ci(l,r,n),o.head.appendChild(l);break;case"meta":if(f=q2("meta","content",o).get(r+(n.content||""))){for(m=0;m<f.length;m++)if(l=f[m],l.getAttribute("content")===(n.content==null?null:""+n.content)&&l.getAttribute("name")===(n.name==null?null:n.name)&&l.getAttribute("property")===(n.property==null?null:n.property)&&l.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&l.getAttribute("charset")===(n.charSet==null?null:n.charSet)){f.splice(m,1);break t}}l=o.createElement(r),Ci(l,r,n),o.head.appendChild(l);break;default:throw Error(at(468,r))}l[Bi]=e,xi(l),r=l}e.stateNode=r}else G2(o,e.type,e.stateNode);else e.stateNode=V2(o,r,e.memoizedProps);else l!==r?(l===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):l.count--,r===null?G2(o,e.type,e.stateNode):V2(o,r,e.memoizedProps)):r===null&&e.stateNode!==null&&Y0(e,e.memoizedProps,n.memoizedProps)}break;case 27:wa(t,e),Na(e),r&512&&(Hr||n===null||Es(n,n.return)),n!==null&&r&4&&Y0(e,e.memoizedProps,n.memoizedProps);break;case 5:if(wa(t,e),Na(e),r&512&&(Hr||n===null||Es(n,n.return)),e.flags&32){o=e.stateNode;try{tu(o,"")}catch(v){rr(e,e.return,v)}}r&4&&e.stateNode!=null&&(o=e.memoizedProps,Y0(e,o,n!==null?n.memoizedProps:o)),r&1024&&(Z0=!0);break;case 6:if(wa(t,e),Na(e),r&4){if(e.stateNode===null)throw Error(at(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(v){rr(e,e.return,v)}}break;case 3:if(Xf=null,o=os,os=Th(t.containerInfo),wa(t,e),os=o,Na(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Cd(t.containerInfo)}catch(v){rr(e,e.return,v)}Z0&&(Z0=!1,r5(e));break;case 4:r=os,os=Th(e.stateNode.containerInfo),wa(t,e),Na(e),os=r;break;case 12:wa(t,e),Na(e);break;case 13:wa(t,e),Na(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Ig=js()),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,Q0(e,r)));break;case 22:o=e.memoizedState!==null;var g=n!==null&&n.memoizedState!==null,x=to,A=Hr;if(to=x||o,Hr=A||g,wa(t,e),Hr=A,to=x,Na(e),r&8192)e:for(t=e.stateNode,t._visibility=o?t._visibility&-2:t._visibility|1,o&&(n===null||g||to||Hr||Pl(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){g=n=t;try{if(l=g.stateNode,o)f=l.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none";else{m=g.stateNode;var N=g.memoizedProps.style,T=N!=null&&N.hasOwnProperty("display")?N.display:null;m.style.display=T==null||typeof T=="boolean"?"":(""+T).trim()}}catch(v){rr(g,g.return,v)}}}else if(t.tag===6){if(n===null){g=t;try{g.stateNode.nodeValue=o?"":g.memoizedProps}catch(v){rr(g,g.return,v)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}r&4&&(r=e.updateQueue,r!==null&&(n=r.retryQueue,n!==null&&(r.retryQueue=null,Q0(e,n))));break;case 19:wa(t,e),Na(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,Q0(e,r)));break;case 30:break;case 21:break;default:wa(t,e),Na(e)}}function Na(e){var t=e.flags;if(t&2){try{for(var n,r=e.return;r!==null;){if(Qy(r)){n=r;break}r=r.return}if(n==null)throw Error(at(160));switch(n.tag){case 27:var o=n.stateNode,l=X0(e);vh(e,l,o);break;case 5:var f=n.stateNode;n.flags&32&&(tu(f,""),n.flags&=-33);var m=X0(e);vh(e,m,f);break;case 3:case 4:var g=n.stateNode.containerInfo,x=X0(e);K1(e,x,g);break;default:throw Error(at(161))}}catch(A){rr(e,e.return,A)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function r5(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;r5(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Oo(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Jy(e,t.alternate,t),t=t.sibling}function Pl(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:cl(4,t,t.return),Pl(t);break;case 1:Es(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&Xy(t,t.return,n),Pl(t);break;case 27:sd(t.stateNode);case 26:case 5:Es(t,t.return),Pl(t);break;case 22:t.memoizedState===null&&Pl(t);break;case 30:Pl(t);break;default:Pl(t)}e=e.sibling}}function Po(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var r=t.alternate,o=e,l=t,f=l.flags;switch(l.tag){case 0:case 11:case 15:Po(o,l,n),Vd(4,l);break;case 1:if(Po(o,l,n),r=l,o=r.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(x){rr(r,r.return,x)}if(r=l,o=r.updateQueue,o!==null){var m=r.stateNode;try{var g=o.shared.hiddenCallbacks;if(g!==null)for(o.shared.hiddenCallbacks=null,o=0;o<g.length;o++)Jb(g[o],m)}catch(x){rr(r,r.return,x)}}n&&f&64&&Yy(l),nd(l,l.return);break;case 27:Ky(l);case 26:case 5:Po(o,l,n),n&&r===null&&f&4&&Zy(l),nd(l,l.return);break;case 12:Po(o,l,n);break;case 13:Po(o,l,n),n&&f&4&&t5(o,l);break;case 22:l.memoizedState===null&&Po(o,l,n),nd(l,l.return);break;case 30:break;default:Po(o,l,n)}t=t.sibling}}function Eg(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Bd(n))}function Tg(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Bd(e))}function Ns(e,t,n,r){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)i5(e,t,n,r),t=t.sibling}function i5(e,t,n,r){var o=t.flags;switch(t.tag){case 0:case 11:case 15:Ns(e,t,n,r),o&2048&&Vd(9,t);break;case 1:Ns(e,t,n,r);break;case 3:Ns(e,t,n,r),o&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Bd(e)));break;case 12:if(o&2048){Ns(e,t,n,r),e=t.stateNode;try{var l=t.memoizedProps,f=l.id,m=l.onPostCommit;typeof m=="function"&&m(f,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(g){rr(t,t.return,g)}}else Ns(e,t,n,r);break;case 13:Ns(e,t,n,r);break;case 23:break;case 22:l=t.stateNode,f=t.alternate,t.memoizedState!==null?l._visibility&2?Ns(e,t,n,r):rd(e,t):l._visibility&2?Ns(e,t,n,r):(l._visibility|=2,Cc(e,t,n,r,(t.subtreeFlags&10256)!==0)),o&2048&&Eg(f,t);break;case 24:Ns(e,t,n,r),o&2048&&Tg(t.alternate,t);break;default:Ns(e,t,n,r)}}function Cc(e,t,n,r,o){for(o=o&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var l=e,f=t,m=n,g=r,x=f.flags;switch(f.tag){case 0:case 11:case 15:Cc(l,f,m,g,o),Vd(8,f);break;case 23:break;case 22:var A=f.stateNode;f.memoizedState!==null?A._visibility&2?Cc(l,f,m,g,o):rd(l,f):(A._visibility|=2,Cc(l,f,m,g,o)),o&&x&2048&&Eg(f.alternate,f);break;case 24:Cc(l,f,m,g,o),o&&x&2048&&Tg(f.alternate,f);break;default:Cc(l,f,m,g,o)}t=t.sibling}}function rd(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,r=t,o=r.flags;switch(r.tag){case 22:rd(n,r),o&2048&&Eg(r.alternate,r);break;case 24:rd(n,r),o&2048&&Tg(r.alternate,r);break;default:rd(n,r)}t=t.sibling}}var qu=8192;function bc(e){if(e.subtreeFlags&qu)for(e=e.child;e!==null;)a5(e),e=e.sibling}function a5(e){switch(e.tag){case 26:bc(e),e.flags&qu&&e.memoizedState!==null&&pN(os,e.memoizedState,e.memoizedProps);break;case 5:bc(e);break;case 3:case 4:var t=os;os=Th(e.stateNode.containerInfo),bc(e),os=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=qu,qu=16777216,bc(e),qu=t):bc(e));break;default:bc(e)}}function s5(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function ku(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];pi=r,l5(r,e)}s5(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)o5(e),e=e.sibling}function o5(e){switch(e.tag){case 0:case 11:case 15:ku(e),e.flags&2048&&cl(9,e,e.return);break;case 3:ku(e);break;case 12:ku(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Wf(e)):ku(e);break;default:ku(e)}}function Wf(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];pi=r,l5(r,e)}s5(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:cl(8,t,t.return),Wf(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Wf(t));break;default:Wf(t)}e=e.sibling}}function l5(e,t){for(;pi!==null;){var n=pi;switch(n.tag){case 0:case 11:case 15:cl(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var r=n.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:Bd(n.memoizedState.cache)}if(r=n.child,r!==null)r.return=n,pi=r;else e:for(n=e;pi!==null;){r=pi;var o=r.sibling,l=r.return;if($y(r),r===n){pi=null;break e}if(o!==null){o.return=l,pi=o;break e}pi=l}}}var R4={getCacheForType:function(e){var t=Ui(oi),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},O4=typeof WeakMap=="function"?WeakMap:Map,Gn=0,or=null,bn=null,Cn=0,Vn=0,Ca=null,Xo=!1,pu=!1,_g=!1,mo=0,Lr=0,ul=0,Wl=0,jg=0,Qa=0,su=0,id=null,ca=null,J1=!1,Ig=0,wh=1/0,Nh=null,el=null,Si=0,tl=null,ou=null,Jc=0,$1=0,em=null,c5=null,ad=0,tm=null;function Da(){if(Gn&2&&Cn!==0)return Cn&-Cn;if(Qt.T!==null){var e=nu;return e!==0?e:Rg()}return vb()}function u5(){Qa===0&&(Qa=!(Cn&536870912)||Ln?pb():536870912);var e=Ka.current;return e!==null&&(e.flags|=32),Qa}function Ra(e,t,n){(e===or&&(Vn===2||Vn===9)||e.cancelPendingCommit!==null)&&(lu(e,0),Zo(e,Cn,Qa,!1)),Ld(e,n),(!(Gn&2)||e!==or)&&(e===or&&(!(Gn&2)&&(Wl|=n),Lr===4&&Zo(e,Cn,Qa,!1)),Ps(e))}function d5(e,t,n){if(Gn&6)throw Error(at(327));var r=!n&&(t&124)===0&&(t&e.expiredLanes)===0||Od(e,t),o=r?k4(e,t):K0(e,t,!0),l=r;do{if(o===0){pu&&!r&&Zo(e,t,0,!1);break}else{if(n=e.current.alternate,l&&!L4(n)){o=K0(e,t,!1),l=!1;continue}if(o===2){if(l=t,e.errorRecoveryDisabledLanes&l)var f=0;else f=e.pendingLanes&-536870913,f=f!==0?f:f&536870912?536870912:0;if(f!==0){t=f;e:{var m=e;o=id;var g=m.current.memoizedState.isDehydrated;if(g&&(lu(m,f).flags|=256),f=K0(m,f,!1),f!==2){if(_g&&!g){m.errorRecoveryDisabledLanes|=l,Wl|=l,o=4;break e}l=ca,ca=o,l!==null&&(ca===null?ca=l:ca.push.apply(ca,l))}o=f}if(l=!1,o!==2)continue}}if(o===1){lu(e,0),Zo(e,t,0,!0);break}e:{switch(r=e,l=o,l){case 0:case 1:throw Error(at(345));case 4:if((t&4194048)!==t)break;case 6:Zo(r,t,Qa,!Xo);break e;case 2:ca=null;break;case 3:case 5:break;default:throw Error(at(329))}if((t&62914560)===t&&(o=Ig+300-js(),10<o)){if(Zo(r,t,Qa,!Xo),zh(r,0,!0)!==0)break e;r.timeoutHandle=I5(_2.bind(null,r,n,ca,Nh,J1,t,Qa,Wl,su,Xo,l,2,-0,0),o);break e}_2(r,n,ca,Nh,J1,t,Qa,Wl,su,Xo,l,0,-0,0)}}break}while(!0);Ps(e)}function _2(e,t,n,r,o,l,f,m,g,x,A,N,T,v){if(e.timeoutHandle=-1,N=t.subtreeFlags,(N&8192||(N&16785408)===16785408)&&(wd={stylesheets:null,count:0,unsuspend:gN},a5(t),N=xN(),N!==null)){e.cancelPendingCommit=N(I2.bind(null,e,t,l,n,r,o,f,m,g,A,1,T,v)),Zo(e,l,f,!x);return}I2(e,t,l,n,r,o,f,m,g)}function L4(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var r=0;r<n.length;r++){var o=n[r],l=o.getSnapshot;o=o.value;try{if(!Oa(l(),o))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Zo(e,t,n,r){t&=~jg,t&=~Wl,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var o=t;0<o;){var l=31-Ia(o),f=1<<l;r[l]=-1,o&=~f}n!==0&&bb(e,n,t)}function Kh(){return Gn&6?!0:(qd(0),!1)}function Dg(){if(bn!==null){if(Vn===0)var e=bn.return;else e=bn,ao=lc=null,xg(e),Kc=null,bd=0,e=bn;for(;e!==null;)Wy(e.alternate,e),e=e.return;bn=null}}function lu(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,J4(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Dg(),or=e,bn=n=lo(e.current,null),Cn=t,Vn=0,Ca=null,Xo=!1,pu=Od(e,t),_g=!1,su=Qa=jg=Wl=ul=Lr=0,ca=id=null,J1=!1,t&8&&(t|=t&32);var r=e.entangledLanes;if(r!==0)for(e=e.entanglements,r&=t;0<r;){var o=31-Ia(r),l=1<<o;t|=e[o],r&=~l}return mo=t,Gh(),n}function f5(e,t){fn=null,Qt.H=gh,t===Ud||t===Yh?(t=s2(),Vn=3):t===Qb?(t=s2(),Vn=4):Vn=t===Uy?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Ca=t,bn===null&&(Lr=1,bh(e,Za(t,e.current)))}function h5(){var e=Qt.H;return Qt.H=gh,e===null?gh:e}function m5(){var e=Qt.A;return Qt.A=R4,e}function nm(){Lr=4,Xo||(Cn&4194048)!==Cn&&Ka.current!==null||(pu=!0),!(ul&134217727)&&!(Wl&134217727)||or===null||Zo(or,Cn,Qa,!1)}function K0(e,t,n){var r=Gn;Gn|=2;var o=h5(),l=m5();(or!==e||Cn!==t)&&(Nh=null,lu(e,t)),t=!1;var f=Lr;e:do try{if(Vn!==0&&bn!==null){var m=bn,g=Ca;switch(Vn){case 8:Dg(),f=6;break e;case 3:case 2:case 9:case 6:Ka.current===null&&(t=!0);var x=Vn;if(Vn=0,Ca=null,zc(e,m,g,x),n&&pu){f=0;break e}break;default:x=Vn,Vn=0,Ca=null,zc(e,m,g,x)}}M4(),f=Lr;break}catch(A){f5(e,A)}while(!0);return t&&e.shellSuspendCounter++,ao=lc=null,Gn=r,Qt.H=o,Qt.A=l,bn===null&&(or=null,Cn=0,Gh()),f}function M4(){for(;bn!==null;)g5(bn)}function k4(e,t){var n=Gn;Gn|=2;var r=h5(),o=m5();or!==e||Cn!==t?(Nh=null,wh=js()+500,lu(e,t)):pu=Od(e,t);e:do try{if(Vn!==0&&bn!==null){t=bn;var l=Ca;t:switch(Vn){case 1:Vn=0,Ca=null,zc(e,t,l,1);break;case 2:case 9:if(a2(l)){Vn=0,Ca=null,j2(t);break}t=function(){Vn!==2&&Vn!==9||or!==e||(Vn=7),Ps(e)},l.then(t,t);break e;case 3:Vn=7;break e;case 4:Vn=5;break e;case 7:a2(l)?(Vn=0,Ca=null,j2(t)):(Vn=0,Ca=null,zc(e,t,l,7));break;case 5:var f=null;switch(bn.tag){case 26:f=bn.memoizedState;case 5:case 27:var m=bn;if(!f||L5(f)){Vn=0,Ca=null;var g=m.sibling;if(g!==null)bn=g;else{var x=m.return;x!==null?(bn=x,Jh(x)):bn=null}break t}}Vn=0,Ca=null,zc(e,t,l,5);break;case 6:Vn=0,Ca=null,zc(e,t,l,6);break;case 8:Dg(),Lr=6;break e;default:throw Error(at(462))}}P4();break}catch(A){f5(e,A)}while(!0);return ao=lc=null,Qt.H=r,Qt.A=o,Gn=n,bn!==null?0:(or=null,Cn=0,Gh(),Lr)}function P4(){for(;bn!==null&&!aw();)g5(bn)}function g5(e){var t=Gy(e.alternate,e,mo);e.memoizedProps=e.pendingProps,t===null?Jh(e):bn=t}function j2(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=N2(n,t,t.pendingProps,t.type,void 0,Cn);break;case 11:t=N2(n,t,t.pendingProps,t.type.render,t.ref,Cn);break;case 5:xg(t);default:Wy(n,t),t=bn=Wb(t,mo),t=Gy(n,t,mo)}e.memoizedProps=e.pendingProps,t===null?Jh(e):bn=t}function zc(e,t,n,r){ao=lc=null,xg(t),Kc=null,bd=0;var o=t.return;try{if(E4(e,o,t,n,Cn)){Lr=1,bh(e,Za(n,e.current)),bn=null;return}}catch(l){if(o!==null)throw bn=o,l;Lr=1,bh(e,Za(n,e.current)),bn=null;return}t.flags&32768?(Ln||r===1?e=!0:pu||Cn&536870912?e=!1:(Xo=e=!0,(r===2||r===9||r===3||r===6)&&(r=Ka.current,r!==null&&r.tag===13&&(r.flags|=16384))),p5(t,e)):Jh(t)}function Jh(e){var t=e;do{if(t.flags&32768){p5(t,Xo);return}e=t.return;var n=_4(t.alternate,t,mo);if(n!==null){bn=n;return}if(t=t.sibling,t!==null){bn=t;return}bn=t=e}while(t!==null);Lr===0&&(Lr=5)}function p5(e,t){do{var n=j4(e.alternate,e);if(n!==null){n.flags&=32767,bn=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){bn=e;return}bn=e=n}while(e!==null);Lr=6,bn=null}function I2(e,t,n,r,o,l,f,m,g){e.cancelPendingCommit=null;do $h();while(Si!==0);if(Gn&6)throw Error(at(327));if(t!==null){if(t===e.current)throw Error(at(177));if(l=t.lanes|t.childLanes,l|=ig,gw(e,n,l,f,m,g),e===or&&(bn=or=null,Cn=0),ou=t,tl=e,Jc=n,$1=l,em=o,c5=r,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,z4(ah,function(){return w5(),null})):(e.callbackNode=null,e.callbackPriority=0),r=(t.flags&13878)!==0,t.subtreeFlags&13878||r){r=Qt.T,Qt.T=null,o=Mn.p,Mn.p=2,f=Gn,Gn|=4;try{I4(e,t,n)}finally{Gn=f,Mn.p=o,Qt.T=r}}Si=1,x5(),b5(),y5()}}function x5(){if(Si===1){Si=0;var e=tl,t=ou,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=Qt.T,Qt.T=null;var r=Mn.p;Mn.p=2;var o=Gn;Gn|=4;try{n5(t,e);var l=sm,f=Fb(e.containerInfo),m=l.focusedElem,g=l.selectionRange;if(f!==m&&m&&m.ownerDocument&&Pb(m.ownerDocument.documentElement,m)){if(g!==null&&rg(m)){var x=g.start,A=g.end;if(A===void 0&&(A=x),"selectionStart"in m)m.selectionStart=x,m.selectionEnd=Math.min(A,m.value.length);else{var N=m.ownerDocument||document,T=N&&N.defaultView||window;if(T.getSelection){var v=T.getSelection(),O=m.textContent.length,D=Math.min(g.start,O),P=g.end===void 0?D:Math.min(g.end,O);!v.extend&&D>P&&(f=P,P=D,D=f);var C=Kp(m,D),E=Kp(m,P);if(C&&E&&(v.rangeCount!==1||v.anchorNode!==C.node||v.anchorOffset!==C.offset||v.focusNode!==E.node||v.focusOffset!==E.offset)){var j=N.createRange();j.setStart(C.node,C.offset),v.removeAllRanges(),D>P?(v.addRange(j),v.extend(E.node,E.offset)):(j.setEnd(E.node,E.offset),v.addRange(j))}}}}for(N=[],v=m;v=v.parentNode;)v.nodeType===1&&N.push({element:v,left:v.scrollLeft,top:v.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<N.length;m++){var V=N[m];V.element.scrollLeft=V.left,V.element.scrollTop=V.top}}Ih=!!am,sm=am=null}finally{Gn=o,Mn.p=r,Qt.T=n}}e.current=t,Si=2}}function b5(){if(Si===2){Si=0;var e=tl,t=ou,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=Qt.T,Qt.T=null;var r=Mn.p;Mn.p=2;var o=Gn;Gn|=4;try{Jy(e,t.alternate,t)}finally{Gn=o,Mn.p=r,Qt.T=n}}Si=3}}function y5(){if(Si===4||Si===3){Si=0,sw();var e=tl,t=ou,n=Jc,r=c5;t.subtreeFlags&10256||t.flags&10256?Si=5:(Si=0,ou=tl=null,v5(e,e.pendingLanes));var o=e.pendingLanes;if(o===0&&(el=null),Qm(n),t=t.stateNode,ja&&typeof ja.onCommitFiberRoot=="function")try{ja.onCommitFiberRoot(Rd,t,void 0,(t.current.flags&128)===128)}catch{}if(r!==null){t=Qt.T,o=Mn.p,Mn.p=2,Qt.T=null;try{for(var l=e.onRecoverableError,f=0;f<r.length;f++){var m=r[f];l(m.value,{componentStack:m.stack})}}finally{Qt.T=t,Mn.p=o}}Jc&3&&$h(),Ps(e),o=e.pendingLanes,n&4194090&&o&42?e===tm?ad++:(ad=0,tm=e):ad=0,qd(0)}}function v5(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Bd(t)))}function $h(e){return x5(),b5(),y5(),w5()}function w5(){if(Si!==5)return!1;var e=tl,t=$1;$1=0;var n=Qm(Jc),r=Qt.T,o=Mn.p;try{Mn.p=32>n?32:n,Qt.T=null,n=em,em=null;var l=tl,f=Jc;if(Si=0,ou=tl=null,Jc=0,Gn&6)throw Error(at(331));var m=Gn;if(Gn|=4,o5(l.current),i5(l,l.current,f,n),Gn=m,qd(0,!1),ja&&typeof ja.onPostCommitFiberRoot=="function")try{ja.onPostCommitFiberRoot(Rd,l)}catch{}return!0}finally{Mn.p=o,Qt.T=r,v5(e,t)}}function D2(e,t,n){t=Za(n,t),t=X1(e.stateNode,t,2),e=$o(e,t,2),e!==null&&(Ld(e,2),Ps(e))}function rr(e,t,n){if(e.tag===3)D2(e,e,n);else for(;t!==null;){if(t.tag===3){D2(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(el===null||!el.has(r))){e=Za(n,e),n=Fy(2),r=$o(t,n,2),r!==null&&(By(n,r,t,e),Ld(r,2),Ps(r));break}}t=t.return}}function J0(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new O4;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(_g=!0,o.add(n),e=F4.bind(null,e,t,n),t.then(e,e))}function F4(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,or===e&&(Cn&n)===n&&(Lr===4||Lr===3&&(Cn&62914560)===Cn&&300>js()-Ig?!(Gn&2)&&lu(e,0):jg|=n,su===Cn&&(su=0)),Ps(e)}function N5(e,t){t===0&&(t=xb()),e=gu(e,t),e!==null&&(Ld(e,t),Ps(e))}function B4(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),N5(e,n)}function U4(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(at(314))}r!==null&&r.delete(t),N5(e,n)}function z4(e,t){return Xm(e,t)}var Ah=null,Ec=null,rm=!1,Sh=!1,$0=!1,Yl=0;function Ps(e){e!==Ec&&e.next===null&&(Ec===null?Ah=Ec=e:Ec=Ec.next=e),Sh=!0,rm||(rm=!0,V4())}function qd(e,t){if(!$0&&Sh){$0=!0;do for(var n=!1,r=Ah;r!==null;){if(e!==0){var o=r.pendingLanes;if(o===0)var l=0;else{var f=r.suspendedLanes,m=r.pingedLanes;l=(1<<31-Ia(42|e)+1)-1,l&=o&~(f&~m),l=l&201326741?l&201326741|1:l?l|2:0}l!==0&&(n=!0,R2(r,l))}else l=Cn,l=zh(r,r===or?l:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),!(l&3)||Od(r,l)||(n=!0,R2(r,l));r=r.next}while(n);$0=!1}}function H4(){A5()}function A5(){Sh=rm=!1;var e=0;Yl!==0&&(K4()&&(e=Yl),Yl=0);for(var t=js(),n=null,r=Ah;r!==null;){var o=r.next,l=S5(r,t);l===0?(r.next=null,n===null?Ah=o:n.next=o,o===null&&(Ec=n)):(n=r,(e!==0||l&3)&&(Sh=!0)),r=o}qd(e)}function S5(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,l=e.pendingLanes&-62914561;0<l;){var f=31-Ia(l),m=1<<f,g=o[f];g===-1?(!(m&n)||m&r)&&(o[f]=mw(m,t)):g<=t&&(e.expiredLanes|=m),l&=~m}if(t=or,n=Cn,n=zh(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r=e.callbackNode,n===0||e===t&&(Vn===2||Vn===9)||e.cancelPendingCommit!==null)return r!==null&&r!==null&&C0(r),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||Od(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(r!==null&&C0(r),Qm(n)){case 2:case 8:n=mb;break;case 32:n=ah;break;case 268435456:n=gb;break;default:n=ah}return r=C5.bind(null,e),n=Xm(n,r),e.callbackPriority=t,e.callbackNode=n,t}return r!==null&&r!==null&&C0(r),e.callbackPriority=2,e.callbackNode=null,2}function C5(e,t){if(Si!==0&&Si!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if($h()&&e.callbackNode!==n)return null;var r=Cn;return r=zh(e,e===or?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r===0?null:(d5(e,r,t),S5(e,js()),e.callbackNode!=null&&e.callbackNode===n?C5.bind(null,e):null)}function R2(e,t){if($h())return null;d5(e,t,!0)}function V4(){$4(function(){Gn&6?Xm(hb,H4):A5()})}function Rg(){return Yl===0&&(Yl=pb()),Yl}function O2(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ff(""+e)}function L2(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function q4(e,t,n,r,o){if(t==="submit"&&n&&n.stateNode===o){var l=O2((o[da]||null).action),f=r.submitter;f&&(t=(t=f[da]||null)?O2(t.formAction):f.getAttribute("formAction"),t!==null&&(l=t,f=null));var m=new Hh("action","action",null,r,o);e.push({event:m,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(Yl!==0){var g=f?L2(o,f):new FormData(o);W1(n,{pending:!0,data:g,method:o.method,action:l},null,g)}}else typeof l=="function"&&(m.preventDefault(),g=f?L2(o,f):new FormData(o),W1(n,{pending:!0,data:g,method:o.method,action:l},l,g))},currentTarget:o}]})}}for(var e1=0;e1<L1.length;e1++){var t1=L1[e1],G4=t1.toLowerCase(),W4=t1[0].toUpperCase()+t1.slice(1);ds(G4,"on"+W4)}ds(Ub,"onAnimationEnd");ds(zb,"onAnimationIteration");ds(Hb,"onAnimationStart");ds("dblclick","onDoubleClick");ds("focusin","onFocus");ds("focusout","onBlur");ds(c4,"onTransitionRun");ds(u4,"onTransitionStart");ds(d4,"onTransitionCancel");ds(Vb,"onTransitionEnd");eu("onMouseEnter",["mouseout","mouseover"]);eu("onMouseLeave",["mouseout","mouseover"]);eu("onPointerEnter",["pointerout","pointerover"]);eu("onPointerLeave",["pointerout","pointerover"]);ac("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ac("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ac("onBeforeInput",["compositionend","keypress","textInput","paste"]);ac("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ac("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ac("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Y4=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(yd));function E5(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var f=r.length-1;0<=f;f--){var m=r[f],g=m.instance,x=m.currentTarget;if(m=m.listener,g!==l&&o.isPropagationStopped())break e;l=m,o.currentTarget=x;try{l(o)}catch(A){xh(A)}o.currentTarget=null,l=g}else for(f=0;f<r.length;f++){if(m=r[f],g=m.instance,x=m.currentTarget,m=m.listener,g!==l&&o.isPropagationStopped())break e;l=m,o.currentTarget=x;try{l(o)}catch(A){xh(A)}o.currentTarget=null,l=g}}}}function xn(e,t){var n=t[T1];n===void 0&&(n=t[T1]=new Set);var r=e+"__bubble";n.has(r)||(T5(t,e,2,!1),n.add(r))}function n1(e,t,n){var r=0;t&&(r|=4),T5(n,e,r,t)}var Tf="_reactListening"+Math.random().toString(36).slice(2);function Og(e){if(!e[Tf]){e[Tf]=!0,wb.forEach(function(n){n!=="selectionchange"&&(Y4.has(n)||n1(n,!1,e),n1(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Tf]||(t[Tf]=!0,n1("selectionchange",!1,t))}}function T5(e,t,n,r){switch(B5(t)){case 2:var o=vN;break;case 8:o=wN;break;default:o=Pg}n=o.bind(null,t,n,e),o=void 0,!D1||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function r1(e,t,n,r,o){var l=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var f=r.tag;if(f===3||f===4){var m=r.stateNode.containerInfo;if(m===o)break;if(f===4)for(f=r.return;f!==null;){var g=f.tag;if((g===3||g===4)&&f.stateNode.containerInfo===o)return;f=f.return}for(;m!==null;){if(f=Rc(m),f===null)return;if(g=f.tag,g===5||g===6||g===26||g===27){r=l=f;continue e}m=m.parentNode}}r=r.return}jb(function(){var x=l,A=$m(n),N=[];e:{var T=qb.get(e);if(T!==void 0){var v=Hh,O=e;switch(e){case"keypress":if(Uf(n)===0)break e;case"keydown":case"keyup":v=zw;break;case"focusin":O="focus",v=O0;break;case"focusout":O="blur",v=O0;break;case"beforeblur":case"afterblur":v=O0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=zp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=jw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=qw;break;case Ub:case zb:case Hb:v=Rw;break;case Vb:v=Ww;break;case"scroll":case"scrollend":v=Tw;break;case"wheel":v=Xw;break;case"copy":case"cut":case"paste":v=Lw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Vp;break;case"toggle":case"beforetoggle":v=Qw}var D=(t&4)!==0,P=!D&&(e==="scroll"||e==="scrollend"),C=D?T!==null?T+"Capture":null:T;D=[];for(var E=x,j;E!==null;){var V=E;if(j=V.stateNode,V=V.tag,V!==5&&V!==26&&V!==27||j===null||C===null||(V=hd(E,C),V!=null&&D.push(vd(E,V,j))),P)break;E=E.return}0<D.length&&(T=new v(T,O,null,n,A),N.push({event:T,listeners:D}))}}if(!(t&7)){e:{if(T=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",T&&n!==I1&&(O=n.relatedTarget||n.fromElement)&&(Rc(O)||O[hu]))break e;if((v||T)&&(T=A.window===A?A:(T=A.ownerDocument)?T.defaultView||T.parentWindow:window,v?(O=n.relatedTarget||n.toElement,v=x,O=O?Rc(O):null,O!==null&&(P=Dd(O),D=O.tag,O!==P||D!==5&&D!==27&&D!==6)&&(O=null)):(v=null,O=x),v!==O)){if(D=zp,V="onMouseLeave",C="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(D=Vp,V="onPointerLeave",C="onPointerEnter",E="pointer"),P=v==null?T:Vu(v),j=O==null?T:Vu(O),T=new D(V,E+"leave",v,n,A),T.target=P,T.relatedTarget=j,V=null,Rc(A)===x&&(D=new D(C,E+"enter",O,n,A),D.target=j,D.relatedTarget=P,V=D),P=V,v&&O)t:{for(D=v,C=O,E=0,j=D;j;j=yc(j))E++;for(j=0,V=C;V;V=yc(V))j++;for(;0<E-j;)D=yc(D),E--;for(;0<j-E;)C=yc(C),j--;for(;E--;){if(D===C||C!==null&&D===C.alternate)break t;D=yc(D),C=yc(C)}D=null}else D=null;v!==null&&M2(N,T,v,D,!1),O!==null&&P!==null&&M2(N,P,O,D,!0)}}e:{if(T=x?Vu(x):window,v=T.nodeName&&T.nodeName.toLowerCase(),v==="select"||v==="input"&&T.type==="file")var W=Yp;else if(Wp(T))if(Mb)W=s4;else{W=i4;var ie=r4}else v=T.nodeName,!v||v.toLowerCase()!=="input"||T.type!=="checkbox"&&T.type!=="radio"?x&&Jm(x.elementType)&&(W=Yp):W=a4;if(W&&(W=W(e,x))){Lb(N,W,n,A);break e}ie&&ie(e,T,x),e==="focusout"&&x&&T.type==="number"&&x.memoizedProps.value!=null&&j1(T,"number",T.value)}switch(ie=x?Vu(x):window,e){case"focusin":(Wp(ie)||ie.contentEditable==="true")&&(Mc=ie,R1=x,Zu=null);break;case"focusout":Zu=R1=Mc=null;break;case"mousedown":O1=!0;break;case"contextmenu":case"mouseup":case"dragend":O1=!1,Jp(N,n,A);break;case"selectionchange":if(l4)break;case"keydown":case"keyup":Jp(N,n,A)}var B;if(ng)e:{switch(e){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else Lc?Rb(e,n)&&(R="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(Db&&n.locale!=="ko"&&(Lc||R!=="onCompositionStart"?R==="onCompositionEnd"&&Lc&&(B=Ib()):(Yo=A,eg="value"in Yo?Yo.value:Yo.textContent,Lc=!0)),ie=Ch(x,R),0<ie.length&&(R=new Hp(R,e,null,n,A),N.push({event:R,listeners:ie}),B?R.data=B:(B=Ob(n),B!==null&&(R.data=B)))),(B=Jw?$w(e,n):e4(e,n))&&(R=Ch(x,"onBeforeInput"),0<R.length&&(ie=new Hp("onBeforeInput","beforeinput",null,n,A),N.push({event:ie,listeners:R}),ie.data=B)),q4(N,e,x,n,A)}E5(N,t)})}function vd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ch(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,l=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||l===null||(o=hd(e,n),o!=null&&r.unshift(vd(e,o,l)),o=hd(e,t),o!=null&&r.push(vd(e,o,l))),e.tag===3)return r;e=e.return}return[]}function yc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function M2(e,t,n,r,o){for(var l=t._reactName,f=[];n!==null&&n!==r;){var m=n,g=m.alternate,x=m.stateNode;if(m=m.tag,g!==null&&g===r)break;m!==5&&m!==26&&m!==27||x===null||(g=x,o?(x=hd(n,l),x!=null&&f.unshift(vd(n,x,g))):o||(x=hd(n,l),x!=null&&f.push(vd(n,x,g)))),n=n.return}f.length!==0&&e.push({event:t,listeners:f})}var X4=/\r\n?/g,Z4=/\u0000|\uFFFD/g;function k2(e){return(typeof e=="string"?e:""+e).replace(X4,`
`).replace(Z4,"")}function _5(e,t){return t=k2(t),k2(e)===t}function e0(){}function Kn(e,t,n,r,o,l){switch(n){case"children":typeof r=="string"?t==="body"||t==="textarea"&&r===""||tu(e,r):(typeof r=="number"||typeof r=="bigint")&&t!=="body"&&tu(e,""+r);break;case"className":vf(e,"class",r);break;case"tabIndex":vf(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":vf(e,n,r);break;case"style":_b(e,r,l);break;case"data":if(t!=="object"){vf(e,"data",r);break}case"src":case"href":if(r===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(n);break}r=Ff(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if(typeof r=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof l=="function"&&(n==="formAction"?(t!=="input"&&Kn(e,t,"name",o.name,o,null),Kn(e,t,"formEncType",o.formEncType,o,null),Kn(e,t,"formMethod",o.formMethod,o,null),Kn(e,t,"formTarget",o.formTarget,o,null)):(Kn(e,t,"encType",o.encType,o,null),Kn(e,t,"method",o.method,o,null),Kn(e,t,"target",o.target,o,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(n);break}r=Ff(""+r),e.setAttribute(n,r);break;case"onClick":r!=null&&(e.onclick=e0);break;case"onScroll":r!=null&&xn("scroll",e);break;case"onScrollEnd":r!=null&&xn("scrollend",e);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(at(61));if(n=r.__html,n!=null){if(o.children!=null)throw Error(at(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":e.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){e.removeAttribute("xlink:href");break}n=Ff(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":r===!0?e.setAttribute(n,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":xn("beforetoggle",e),xn("toggle",e),Pf(e,"popover",r);break;case"xlinkActuate":Qs(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":Qs(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":Qs(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":Qs(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":Qs(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":Qs(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":Qs(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":Qs(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":Qs(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":Pf(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Cw.get(n)||n,Pf(e,n,r))}}function im(e,t,n,r,o,l){switch(n){case"style":_b(e,r,l);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(at(61));if(n=r.__html,n!=null){if(o.children!=null)throw Error(at(60));e.innerHTML=n}}break;case"children":typeof r=="string"?tu(e,r):(typeof r=="number"||typeof r=="bigint")&&tu(e,""+r);break;case"onScroll":r!=null&&xn("scroll",e);break;case"onScrollEnd":r!=null&&xn("scrollend",e);break;case"onClick":r!=null&&(e.onclick=e0);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Nb.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(o=n.endsWith("Capture"),t=n.slice(2,o?n.length-7:void 0),l=e[da]||null,l=l!=null?l[n]:null,typeof l=="function"&&e.removeEventListener(t,l,o),typeof r=="function")){typeof l!="function"&&l!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,o);break e}n in e?e[n]=r:r===!0?e.setAttribute(n,""):Pf(e,n,r)}}}function Ci(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":xn("error",e),xn("load",e);var r=!1,o=!1,l;for(l in n)if(n.hasOwnProperty(l)){var f=n[l];if(f!=null)switch(l){case"src":r=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(at(137,t));default:Kn(e,t,l,f,n,null)}}o&&Kn(e,t,"srcSet",n.srcSet,n,null),r&&Kn(e,t,"src",n.src,n,null);return;case"input":xn("invalid",e);var m=l=f=o=null,g=null,x=null;for(r in n)if(n.hasOwnProperty(r)){var A=n[r];if(A!=null)switch(r){case"name":o=A;break;case"type":f=A;break;case"checked":g=A;break;case"defaultChecked":x=A;break;case"value":l=A;break;case"defaultValue":m=A;break;case"children":case"dangerouslySetInnerHTML":if(A!=null)throw Error(at(137,t));break;default:Kn(e,t,r,A,n,null)}}Cb(e,l,m,g,x,f,o,!1),sh(e);return;case"select":xn("invalid",e),r=f=l=null;for(o in n)if(n.hasOwnProperty(o)&&(m=n[o],m!=null))switch(o){case"value":l=m;break;case"defaultValue":f=m;break;case"multiple":r=m;default:Kn(e,t,o,m,n,null)}t=l,n=f,e.multiple=!!r,t!=null?Wc(e,!!r,t,!1):n!=null&&Wc(e,!!r,n,!0);return;case"textarea":xn("invalid",e),l=o=r=null;for(f in n)if(n.hasOwnProperty(f)&&(m=n[f],m!=null))switch(f){case"value":r=m;break;case"defaultValue":o=m;break;case"children":l=m;break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(at(91));break;default:Kn(e,t,f,m,n,null)}Tb(e,r,o,l),sh(e);return;case"option":for(g in n)if(n.hasOwnProperty(g)&&(r=n[g],r!=null))switch(g){case"selected":e.selected=r&&typeof r!="function"&&typeof r!="symbol";break;default:Kn(e,t,g,r,n,null)}return;case"dialog":xn("beforetoggle",e),xn("toggle",e),xn("cancel",e),xn("close",e);break;case"iframe":case"object":xn("load",e);break;case"video":case"audio":for(r=0;r<yd.length;r++)xn(yd[r],e);break;case"image":xn("error",e),xn("load",e);break;case"details":xn("toggle",e);break;case"embed":case"source":case"link":xn("error",e),xn("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(x in n)if(n.hasOwnProperty(x)&&(r=n[x],r!=null))switch(x){case"children":case"dangerouslySetInnerHTML":throw Error(at(137,t));default:Kn(e,t,x,r,n,null)}return;default:if(Jm(t)){for(A in n)n.hasOwnProperty(A)&&(r=n[A],r!==void 0&&im(e,t,A,r,n,void 0));return}}for(m in n)n.hasOwnProperty(m)&&(r=n[m],r!=null&&Kn(e,t,m,r,n,null))}function Q4(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,l=null,f=null,m=null,g=null,x=null,A=null;for(v in n){var N=n[v];if(n.hasOwnProperty(v)&&N!=null)switch(v){case"checked":break;case"value":break;case"defaultValue":g=N;default:r.hasOwnProperty(v)||Kn(e,t,v,null,r,N)}}for(var T in r){var v=r[T];if(N=n[T],r.hasOwnProperty(T)&&(v!=null||N!=null))switch(T){case"type":l=v;break;case"name":o=v;break;case"checked":x=v;break;case"defaultChecked":A=v;break;case"value":f=v;break;case"defaultValue":m=v;break;case"children":case"dangerouslySetInnerHTML":if(v!=null)throw Error(at(137,t));break;default:v!==N&&Kn(e,t,T,v,r,N)}}_1(e,f,m,g,x,A,l,o);return;case"select":v=f=m=T=null;for(l in n)if(g=n[l],n.hasOwnProperty(l)&&g!=null)switch(l){case"value":break;case"multiple":v=g;default:r.hasOwnProperty(l)||Kn(e,t,l,null,r,g)}for(o in r)if(l=r[o],g=n[o],r.hasOwnProperty(o)&&(l!=null||g!=null))switch(o){case"value":T=l;break;case"defaultValue":m=l;break;case"multiple":f=l;default:l!==g&&Kn(e,t,o,l,r,g)}t=m,n=f,r=v,T!=null?Wc(e,!!n,T,!1):!!r!=!!n&&(t!=null?Wc(e,!!n,t,!0):Wc(e,!!n,n?[]:"",!1));return;case"textarea":v=T=null;for(m in n)if(o=n[m],n.hasOwnProperty(m)&&o!=null&&!r.hasOwnProperty(m))switch(m){case"value":break;case"children":break;default:Kn(e,t,m,null,r,o)}for(f in r)if(o=r[f],l=n[f],r.hasOwnProperty(f)&&(o!=null||l!=null))switch(f){case"value":T=o;break;case"defaultValue":v=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(at(91));break;default:o!==l&&Kn(e,t,f,o,r,l)}Eb(e,T,v);return;case"option":for(var O in n)if(T=n[O],n.hasOwnProperty(O)&&T!=null&&!r.hasOwnProperty(O))switch(O){case"selected":e.selected=!1;break;default:Kn(e,t,O,null,r,T)}for(g in r)if(T=r[g],v=n[g],r.hasOwnProperty(g)&&T!==v&&(T!=null||v!=null))switch(g){case"selected":e.selected=T&&typeof T!="function"&&typeof T!="symbol";break;default:Kn(e,t,g,T,r,v)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var D in n)T=n[D],n.hasOwnProperty(D)&&T!=null&&!r.hasOwnProperty(D)&&Kn(e,t,D,null,r,T);for(x in r)if(T=r[x],v=n[x],r.hasOwnProperty(x)&&T!==v&&(T!=null||v!=null))switch(x){case"children":case"dangerouslySetInnerHTML":if(T!=null)throw Error(at(137,t));break;default:Kn(e,t,x,T,r,v)}return;default:if(Jm(t)){for(var P in n)T=n[P],n.hasOwnProperty(P)&&T!==void 0&&!r.hasOwnProperty(P)&&im(e,t,P,void 0,r,T);for(A in r)T=r[A],v=n[A],!r.hasOwnProperty(A)||T===v||T===void 0&&v===void 0||im(e,t,A,T,r,v);return}}for(var C in n)T=n[C],n.hasOwnProperty(C)&&T!=null&&!r.hasOwnProperty(C)&&Kn(e,t,C,null,r,T);for(N in r)T=r[N],v=n[N],!r.hasOwnProperty(N)||T===v||T==null&&v==null||Kn(e,t,N,T,r,v)}var am=null,sm=null;function Eh(e){return e.nodeType===9?e:e.ownerDocument}function P2(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function j5(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function om(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var i1=null;function K4(){var e=window.event;return e&&e.type==="popstate"?e===i1?!1:(i1=e,!0):(i1=null,!1)}var I5=typeof setTimeout=="function"?setTimeout:void 0,J4=typeof clearTimeout=="function"?clearTimeout:void 0,F2=typeof Promise=="function"?Promise:void 0,$4=typeof queueMicrotask=="function"?queueMicrotask:typeof F2<"u"?function(e){return F2.resolve(null).then(e).catch(eN)}:I5;function eN(e){setTimeout(function(){throw e})}function xl(e){return e==="head"}function B2(e,t){var n=t,r=0,o=0;do{var l=n.nextSibling;if(e.removeChild(n),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(0<r&&8>r){n=r;var f=e.ownerDocument;if(n&1&&sd(f.documentElement),n&2&&sd(f.body),n&4)for(n=f.head,sd(n),f=n.firstChild;f;){var m=f.nextSibling,g=f.nodeName;f[Md]||g==="SCRIPT"||g==="STYLE"||g==="LINK"&&f.rel.toLowerCase()==="stylesheet"||n.removeChild(f),f=m}}if(o===0){e.removeChild(l),Cd(t);return}o--}else n==="$"||n==="$?"||n==="$!"?o++:r=n.charCodeAt(0)-48;else r=0;n=l}while(n);Cd(t)}function lm(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":lm(n),Km(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function tN(e,t,n,r){for(;e.nodeType===1;){var o=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(r){if(!e[Md])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(l=e.getAttribute("rel"),l==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(l!==o.rel||e.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||e.getAttribute("title")!==(o.title==null?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(l=e.getAttribute("src"),(l!==(o.src==null?null:o.src)||e.getAttribute("type")!==(o.type==null?null:o.type)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&l&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var l=o.name==null?null:""+o.name;if(o.type==="hidden"&&e.getAttribute("name")===l)return e}else return e;if(e=us(e.nextSibling),e===null)break}return null}function nN(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=us(e.nextSibling),e===null))return null;return e}function cm(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function rN(e,t){var n=e.ownerDocument;if(e.data!=="$?"||n.readyState==="complete")t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}function us(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var um=null;function U2(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function D5(e,t,n){switch(t=Eh(n),e){case"html":if(e=t.documentElement,!e)throw Error(at(452));return e;case"head":if(e=t.head,!e)throw Error(at(453));return e;case"body":if(e=t.body,!e)throw Error(at(454));return e;default:throw Error(at(451))}}function sd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Km(e)}var Ja=new Map,z2=new Set;function Th(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var go=Mn.d;Mn.d={f:iN,r:aN,D:sN,C:oN,L:lN,m:cN,X:dN,S:uN,M:fN};function iN(){var e=go.f(),t=Kh();return e||t}function aN(e){var t=mu(e);t!==null&&t.tag===5&&t.type==="form"?Sy(t):go.r(e)}var xu=typeof document>"u"?null:document;function R5(e,t,n){var r=xu;if(r&&typeof t=="string"&&t){var o=Xa(t);o='link[rel="'+e+'"][href="'+o+'"]',typeof n=="string"&&(o+='[crossorigin="'+n+'"]'),z2.has(o)||(z2.add(o),e={rel:e,crossOrigin:n,href:t},r.querySelector(o)===null&&(t=r.createElement("link"),Ci(t,"link",e),xi(t),r.head.appendChild(t)))}}function sN(e){go.D(e),R5("dns-prefetch",e,null)}function oN(e,t){go.C(e,t),R5("preconnect",e,t)}function lN(e,t,n){go.L(e,t,n);var r=xu;if(r&&e&&t){var o='link[rel="preload"][as="'+Xa(t)+'"]';t==="image"&&n&&n.imageSrcSet?(o+='[imagesrcset="'+Xa(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(o+='[imagesizes="'+Xa(n.imageSizes)+'"]')):o+='[href="'+Xa(e)+'"]';var l=o;switch(t){case"style":l=cu(e);break;case"script":l=bu(e)}Ja.has(l)||(e=fr({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),Ja.set(l,e),r.querySelector(o)!==null||t==="style"&&r.querySelector(Gd(l))||t==="script"&&r.querySelector(Wd(l))||(t=r.createElement("link"),Ci(t,"link",e),xi(t),r.head.appendChild(t)))}}function cN(e,t){go.m(e,t);var n=xu;if(n&&e){var r=t&&typeof t.as=="string"?t.as:"script",o='link[rel="modulepreload"][as="'+Xa(r)+'"][href="'+Xa(e)+'"]',l=o;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":l=bu(e)}if(!Ja.has(l)&&(e=fr({rel:"modulepreload",href:e},t),Ja.set(l,e),n.querySelector(o)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Wd(l)))return}r=n.createElement("link"),Ci(r,"link",e),xi(r),n.head.appendChild(r)}}}function uN(e,t,n){go.S(e,t,n);var r=xu;if(r&&e){var o=Gc(r).hoistableStyles,l=cu(e);t=t||"default";var f=o.get(l);if(!f){var m={loading:0,preload:null};if(f=r.querySelector(Gd(l)))m.loading=5;else{e=fr({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Ja.get(l))&&Lg(e,n);var g=f=r.createElement("link");xi(g),Ci(g,"link",e),g._p=new Promise(function(x,A){g.onload=x,g.onerror=A}),g.addEventListener("load",function(){m.loading|=1}),g.addEventListener("error",function(){m.loading|=2}),m.loading|=4,Yf(f,t,r)}f={type:"stylesheet",instance:f,count:1,state:m},o.set(l,f)}}}function dN(e,t){go.X(e,t);var n=xu;if(n&&e){var r=Gc(n).hoistableScripts,o=bu(e),l=r.get(o);l||(l=n.querySelector(Wd(o)),l||(e=fr({src:e,async:!0},t),(t=Ja.get(o))&&Mg(e,t),l=n.createElement("script"),xi(l),Ci(l,"link",e),n.head.appendChild(l)),l={type:"script",instance:l,count:1,state:null},r.set(o,l))}}function fN(e,t){go.M(e,t);var n=xu;if(n&&e){var r=Gc(n).hoistableScripts,o=bu(e),l=r.get(o);l||(l=n.querySelector(Wd(o)),l||(e=fr({src:e,async:!0,type:"module"},t),(t=Ja.get(o))&&Mg(e,t),l=n.createElement("script"),xi(l),Ci(l,"link",e),n.head.appendChild(l)),l={type:"script",instance:l,count:1,state:null},r.set(o,l))}}function H2(e,t,n,r){var o=(o=Ko.current)?Th(o):null;if(!o)throw Error(at(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=cu(n.href),n=Gc(o).hoistableStyles,r=n.get(t),r||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=cu(n.href);var l=Gc(o).hoistableStyles,f=l.get(e);if(f||(o=o.ownerDocument||o,f={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},l.set(e,f),(l=o.querySelector(Gd(e)))&&!l._p&&(f.instance=l,f.state.loading=5),Ja.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Ja.set(e,n),l||hN(o,e,n,f.state))),t&&r===null)throw Error(at(528,""));return f}if(t&&r!==null)throw Error(at(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=bu(n),n=Gc(o).hoistableScripts,r=n.get(t),r||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(at(444,e))}}function cu(e){return'href="'+Xa(e)+'"'}function Gd(e){return'link[rel="stylesheet"]['+e+"]"}function O5(e){return fr({},e,{"data-precedence":e.precedence,precedence:null})}function hN(e,t,n,r){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?r.loading=1:(t=e.createElement("link"),r.preload=t,t.addEventListener("load",function(){return r.loading|=1}),t.addEventListener("error",function(){return r.loading|=2}),Ci(t,"link",n),xi(t),e.head.appendChild(t))}function bu(e){return'[src="'+Xa(e)+'"]'}function Wd(e){return"script[async]"+e}function V2(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+Xa(n.href)+'"]');if(r)return t.instance=r,xi(r),r;var o=fr({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return r=(e.ownerDocument||e).createElement("style"),xi(r),Ci(r,"style",o),Yf(r,n.precedence,e),t.instance=r;case"stylesheet":o=cu(n.href);var l=e.querySelector(Gd(o));if(l)return t.state.loading|=4,t.instance=l,xi(l),l;r=O5(n),(o=Ja.get(o))&&Lg(r,o),l=(e.ownerDocument||e).createElement("link"),xi(l);var f=l;return f._p=new Promise(function(m,g){f.onload=m,f.onerror=g}),Ci(l,"link",r),t.state.loading|=4,Yf(l,n.precedence,e),t.instance=l;case"script":return l=bu(n.src),(o=e.querySelector(Wd(l)))?(t.instance=o,xi(o),o):(r=n,(o=Ja.get(l))&&(r=fr({},n),Mg(r,o)),e=e.ownerDocument||e,o=e.createElement("script"),xi(o),Ci(o,"link",r),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(at(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(r=t.instance,t.state.loading|=4,Yf(r,n.precedence,e));return t.instance}function Yf(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=r.length?r[r.length-1]:null,l=o,f=0;f<r.length;f++){var m=r[f];if(m.dataset.precedence===t)l=m;else if(l!==o)break}l?l.parentNode.insertBefore(e,l.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Lg(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Mg(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Xf=null;function q2(e,t,n){if(Xf===null){var r=new Map,o=Xf=new Map;o.set(n,r)}else o=Xf,r=o.get(n),r||(r=new Map,o.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),o=0;o<n.length;o++){var l=n[o];if(!(l[Md]||l[Bi]||e==="link"&&l.getAttribute("rel")==="stylesheet")&&l.namespaceURI!=="http://www.w3.org/2000/svg"){var f=l.getAttribute(t)||"";f=e+f;var m=r.get(f);m?m.push(l):r.set(f,[l])}}return r}function G2(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function mN(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function L5(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var wd=null;function gN(){}function pN(e,t,n){if(wd===null)throw Error(at(475));var r=wd;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var o=cu(n.href),l=e.querySelector(Gd(o));if(l){e=l._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(r.count++,r=_h.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=l,xi(l);return}l=e.ownerDocument||e,n=O5(n),(o=Ja.get(o))&&Lg(n,o),l=l.createElement("link"),xi(l);var f=l;f._p=new Promise(function(m,g){f.onload=m,f.onerror=g}),Ci(l,"link",n),t.instance=l}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(r.count++,t=_h.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}function xN(){if(wd===null)throw Error(at(475));var e=wd;return e.stylesheets&&e.count===0&&dm(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&dm(e,e.stylesheets),e.unsuspend){var r=e.unsuspend;e.unsuspend=null,r()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function _h(){if(this.count--,this.count===0){if(this.stylesheets)dm(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var jh=null;function dm(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,jh=new Map,t.forEach(bN,e),jh=null,_h.call(e))}function bN(e,t){if(!(t.state.loading&4)){var n=jh.get(e);if(n)var r=n.get(null);else{n=new Map,jh.set(e,n);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),l=0;l<o.length;l++){var f=o[l];(f.nodeName==="LINK"||f.getAttribute("media")!=="not all")&&(n.set(f.dataset.precedence,f),r=f)}r&&n.set(null,r)}o=t.instance,f=o.getAttribute("data-precedence"),l=n.get(f)||r,l===r&&n.set(null,o),n.set(f,o),this.count++,r=_h.bind(this),o.addEventListener("load",r),o.addEventListener("error",r),l?l.parentNode.insertBefore(o,l.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(o,e.firstChild)),t.state.loading|=4}}var Nd={$$typeof:no,Provider:null,Consumer:null,_currentValue:zl,_currentValue2:zl,_threadCount:0};function yN(e,t,n,r,o,l,f,m){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=E0(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=E0(0),this.hiddenUpdates=E0(null),this.identifierPrefix=r,this.onUncaughtError=o,this.onCaughtError=l,this.onRecoverableError=f,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=m,this.incompleteTransitions=new Map}function M5(e,t,n,r,o,l,f,m,g,x,A,N){return e=new yN(e,t,n,f,m,g,x,N),t=1,l===!0&&(t|=24),l=Ea(3,null,null,t),e.current=l,l.stateNode=e,t=cg(),t.refCount++,e.pooledCache=t,t.refCount++,l.memoizedState={element:r,isDehydrated:n,cache:t},dg(l),e}function k5(e){return e?(e=Fc,e):Fc}function P5(e,t,n,r,o,l){o=k5(o),r.context===null?r.context=o:r.pendingContext=o,r=Jo(t),r.payload={element:n},l=l===void 0?null:l,l!==null&&(r.callback=l),n=$o(e,r,t),n!==null&&(Ra(n,e,t),Ju(n,e,t))}function W2(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function kg(e,t){W2(e,t),(e=e.alternate)&&W2(e,t)}function F5(e){if(e.tag===13){var t=gu(e,67108864);t!==null&&Ra(t,e,67108864),kg(e,67108864)}}var Ih=!0;function vN(e,t,n,r){var o=Qt.T;Qt.T=null;var l=Mn.p;try{Mn.p=2,Pg(e,t,n,r)}finally{Mn.p=l,Qt.T=o}}function wN(e,t,n,r){var o=Qt.T;Qt.T=null;var l=Mn.p;try{Mn.p=8,Pg(e,t,n,r)}finally{Mn.p=l,Qt.T=o}}function Pg(e,t,n,r){if(Ih){var o=fm(r);if(o===null)r1(e,t,r,Dh,n),Y2(e,r);else if(AN(o,e,t,n,r))r.stopPropagation();else if(Y2(e,r),t&4&&-1<NN.indexOf(e)){for(;o!==null;){var l=mu(o);if(l!==null)switch(l.tag){case 3:if(l=l.stateNode,l.current.memoizedState.isDehydrated){var f=Ml(l.pendingLanes);if(f!==0){var m=l;for(m.pendingLanes|=2,m.entangledLanes|=2;f;){var g=1<<31-Ia(f);m.entanglements[1]|=g,f&=~g}Ps(l),!(Gn&6)&&(wh=js()+500,qd(0))}}break;case 13:m=gu(l,2),m!==null&&Ra(m,l,2),Kh(),kg(l,2)}if(l=fm(r),l===null&&r1(e,t,r,Dh,n),l===o)break;o=l}o!==null&&r.stopPropagation()}else r1(e,t,r,null,n)}}function fm(e){return e=$m(e),Fg(e)}var Dh=null;function Fg(e){if(Dh=null,e=Rc(e),e!==null){var t=Dd(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=cb(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Dh=e,null}function B5(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ow()){case hb:return 2;case mb:return 8;case ah:case lw:return 32;case gb:return 268435456;default:return 32}default:return 32}}var hm=!1,nl=null,rl=null,il=null,Ad=new Map,Sd=new Map,Vo=[],NN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Y2(e,t){switch(e){case"focusin":case"focusout":nl=null;break;case"dragenter":case"dragleave":rl=null;break;case"mouseover":case"mouseout":il=null;break;case"pointerover":case"pointerout":Ad.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sd.delete(t.pointerId)}}function Pu(e,t,n,r,o,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[o]},t!==null&&(t=mu(t),t!==null&&F5(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function AN(e,t,n,r,o){switch(t){case"focusin":return nl=Pu(nl,e,t,n,r,o),!0;case"dragenter":return rl=Pu(rl,e,t,n,r,o),!0;case"mouseover":return il=Pu(il,e,t,n,r,o),!0;case"pointerover":var l=o.pointerId;return Ad.set(l,Pu(Ad.get(l)||null,e,t,n,r,o)),!0;case"gotpointercapture":return l=o.pointerId,Sd.set(l,Pu(Sd.get(l)||null,e,t,n,r,o)),!0}return!1}function U5(e){var t=Rc(e.target);if(t!==null){var n=Dd(t);if(n!==null){if(t=n.tag,t===13){if(t=cb(n),t!==null){e.blockedOn=t,pw(e.priority,function(){if(n.tag===13){var r=Da();r=Zm(r);var o=gu(n,r);o!==null&&Ra(o,n,r),kg(n,r)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Zf(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=fm(e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);I1=r,n.target.dispatchEvent(r),I1=null}else return t=mu(n),t!==null&&F5(t),e.blockedOn=n,!1;t.shift()}return!0}function X2(e,t,n){Zf(e)&&n.delete(t)}function SN(){hm=!1,nl!==null&&Zf(nl)&&(nl=null),rl!==null&&Zf(rl)&&(rl=null),il!==null&&Zf(il)&&(il=null),Ad.forEach(X2),Sd.forEach(X2)}function _f(e,t){e.blockedOn===t&&(e.blockedOn=null,hm||(hm=!0,ci.unstable_scheduleCallback(ci.unstable_NormalPriority,SN)))}var jf=null;function Z2(e){jf!==e&&(jf=e,ci.unstable_scheduleCallback(ci.unstable_NormalPriority,function(){jf===e&&(jf=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],o=e[t+2];if(typeof r!="function"){if(Fg(r||n)===null)continue;break}var l=mu(n);l!==null&&(e.splice(t,3),t-=3,W1(l,{pending:!0,data:o,method:n.method,action:r},r,o))}}))}function Cd(e){function t(g){return _f(g,e)}nl!==null&&_f(nl,e),rl!==null&&_f(rl,e),il!==null&&_f(il,e),Ad.forEach(t),Sd.forEach(t);for(var n=0;n<Vo.length;n++){var r=Vo[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Vo.length&&(n=Vo[0],n.blockedOn===null);)U5(n),n.blockedOn===null&&Vo.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(r=0;r<n.length;r+=3){var o=n[r],l=n[r+1],f=o[da]||null;if(typeof l=="function")f||Z2(n);else if(f){var m=null;if(l&&l.hasAttribute("formAction")){if(o=l,f=l[da]||null)m=f.formAction;else if(Fg(o)!==null)continue}else m=f.action;typeof m=="function"?n[r+1]=m:(n.splice(r,3),r-=3),Z2(n)}}}function Bg(e){this._internalRoot=e}t0.prototype.render=Bg.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(at(409));var n=t.current,r=Da();P5(n,r,e,t,null,null)};t0.prototype.unmount=Bg.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;P5(e.current,2,null,e,null,null),Kh(),t[hu]=null}};function t0(e){this._internalRoot=e}t0.prototype.unstable_scheduleHydration=function(e){if(e){var t=vb();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Vo.length&&t!==0&&t<Vo[n].priority;n++);Vo.splice(n,0,e),n===0&&U5(e)}};var Q2=ob.version;if(Q2!=="19.1.1")throw Error(at(527,Q2,"19.1.1"));Mn.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(at(188)):(e=Object.keys(e).join(","),Error(at(268,e)));return e=ew(t),e=e!==null?ub(e):null,e=e===null?null:e.stateNode,e};var CN={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Qt,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var If=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!If.isDisabled&&If.supportsFiber)try{Rd=If.inject(CN),ja=If}catch{}}Bh.createRoot=function(e,t){if(!lb(e))throw Error(at(299));var n=!1,r="",o=My,l=ky,f=Py,m=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(l=t.onCaughtError),t.onRecoverableError!==void 0&&(f=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(m=t.unstable_transitionCallbacks)),t=M5(e,1,!1,null,null,n,r,o,l,f,m,null),e[hu]=t.current,Og(e),new Bg(t)};Bh.hydrateRoot=function(e,t,n){if(!lb(e))throw Error(at(299));var r=!1,o="",l=My,f=ky,m=Py,g=null,x=null;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(l=n.onUncaughtError),n.onCaughtError!==void 0&&(f=n.onCaughtError),n.onRecoverableError!==void 0&&(m=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(g=n.unstable_transitionCallbacks),n.formState!==void 0&&(x=n.formState)),t=M5(e,1,!0,t,n??null,r,o,l,f,m,g,x),t.context=k5(null),n=t.current,r=Da(),r=Zm(r),o=Jo(r),o.callback=null,$o(n,o,r),n=r,t.current.lanes=n,Ld(t,n),Ps(t),e[hu]=t.current,Og(e),new t0(t)};Bh.version="19.1.1";function z5(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(z5)}catch(e){console.error(e)}}z5(),tb.exports=Bh;var EN=tb.exports;const TN=Ph(EN);var zt=(e=>(e.ADMIN="Administrator",e.SUPER_USER="Super User",e.CLIENT="Client",e.COURIER="Courier",e.ASSIGNING_USER="Assigning User",e))(zt||{}),tt=(e=>(e.WAITING_FOR_PACKAGING="Waiting for Packaging",e.PACKAGED_AND_WAITING_FOR_ASSIGNMENT="Packaged and Waiting for Assignment",e.ASSIGNED_TO_COURIER="Assigned to Courier",e.OUT_FOR_DELIVERY="Out for Delivery",e.DELIVERED="Delivered",e.DELIVERY_FAILED="Delivery Failed",e))(tt||{}),Rn=(e=>(e.COD="COD",e.WALLET="Wallet",e.TRANSFER="Transfer",e))(Rn||{}),an=(e=>(e.STANDARD="Standard",e.URGENT="Urgent",e.EXPRESS="Express",e))(an||{}),H5=(e=>(e.FLAT="flat",e.PERCENTAGE="percentage",e))(H5||{}),dl=(e=>(e.COMMISSION="Commission",e.PENALTY="Penalty",e.BONUS="Bonus",e.WITHDRAWAL_REQUEST="Withdrawal Request",e.WITHDRAWAL_PROCESSED="Withdrawal Processed",e.WITHDRAWAL_DECLINED="Withdrawal Declined",e.REFERRAL_BONUS="Referral Bonus",e))(dl||{}),Xl=(e=>(e.PENDING="Pending",e.PROCESSED="Processed",e.FAILED="Failed",e))(Xl||{}),qo=(e=>(e.DEPOSIT="Deposit",e.PAYMENT="Payment",e.WITHDRAWAL_REQUEST="Withdrawal Request",e.WITHDRAWAL_PROCESSED="Withdrawal Processed",e))(qo||{}),Fl=(e=>(e.EMAIL="Email",e.SMS="SMS",e.SYSTEM="System",e))(Fl||{}),Qf=(e=>(e.VEHICLE="Vehicle",e.DEVICE="Device",e.EQUIPMENT="Equipment",e.OTHER="Other",e))(Qf||{}),Ed=(e=>(e.AVAILABLE="Available",e.ASSIGNED="Assigned",e.IN_REPAIR="In Repair",e.RETIRED="Retired",e))(Ed||{}),Yi=(e=>(e.BRONZE="Bronze",e.SILVER="Silver",e.GOLD="Gold",e))(Yi||{});const Ut={MANAGE_USERS:"manage_users",EDIT_USER_PROFILE:"edit_user_profile",MANAGE_ROLES:"manage_roles",CREATE_SHIPMENTS:"create_shipments",CREATE_SHIPMENTS_FOR_OTHERS:"create_shipments_for_others",VIEW_OWN_SHIPMENTS:"view_own_shipments",VIEW_ALL_SHIPMENTS:"view_all_shipments",ASSIGN_SHIPMENTS:"assign_shipments",VIEW_COURIER_TASKS:"view_courier_tasks",UPDATE_SHIPMENT_STATUS:"update_shipment_status",VIEW_OWN_WALLET:"view_own_wallet",VIEW_OWN_FINANCIALS:"view_own_financials",VIEW_CLIENT_REVENUE:"view_client_revenue",VIEW_ADMIN_FINANCIALS:"view_admin_financials",VIEW_CLIENT_ANALYTICS:"view_client_analytics",VIEW_COURIER_PERFORMANCE:"view_courier_performance",MANAGE_COURIER_PAYOUTS:"manage_courier_payouts",VIEW_COURIER_EARNINGS:"view_courier_earnings",VIEW_NOTIFICATIONS_LOG:"view_notifications_log",VIEW_DASHBOARD:"view_dashboard",VIEW_PROFILE:"view_profile",VIEW_TOTAL_SHIPMENTS_OVERVIEW:"view_total_shipments_overview",VIEW_COURIER_COMPLETED_ORDERS:"view_courier_completed_orders",MANAGE_INVENTORY:"manage_inventory",DELETE_INVENTORY_ITEM:"delete_inventory_item",MANAGE_ASSETS:"manage_assets",DELETE_ASSET:"delete_asset",VIEW_OWN_ASSETS:"view_own_assets",MANAGE_CLIENT_PAYOUTS:"manage_client_payouts",MANAGE_SUPPLIERS:"manage_suppliers",PRINT_LABELS:"print_labels",VIEW_DELIVERED_SHIPMENTS:"view_delivered_shipments",VIEW_COURIERS_BY_ZONE:"view_couriers_by_zone",MANAGE_PARTNER_TIERS:"manage_partner_tiers",EDIT_CLIENT_ADDRESS:"edit_client_address",VIEW_ADMIN_DELIVERY_MANAGEMENT:"view_admin_delivery_management"},Rr={GreaterCairo:{Cairo:["Nasr City","Heliopolis","New Cairo","5th Settlement","3rd Settlement","1st Settlement","Rehab City","Madinty","El Shorouk","El Obour","Maadi","Zahraa El Maadi","Katameya","Mokattam","Downtown Cairo","Garden City","Zamalek","Shubra","Abbassia","Ain Shams","El Marg","Matariya","Helwan","15th of May City","New Administrative Capital"],Giza:["Mohandessin","Dokki","Agouza","Haram","Faisal","Giza Square","Imbaba","Boulak El Dakrour","Warraq","6th of October City","Sheikh Zayed","Hadayek October","Mansoureya","Nazlet El Semman","Maryoteya","Bahariya Oasis Road"]},Alexandria:["Alexandria - Raml Station","Alexandria - Laurent","Alexandria - Smouha","Alexandria - Asafra"],Other:["Other - Shibin El Kom","Other - Port Said","Other - Mansoura (University)","Other - Mansoura (El Geish)","Other - Tanta","Other - Ismailia","Other - Zagazig","Other - Suez","Other - Mahalla","Other - Assiut","Other - Marina","Other - Hurghada"]},_N="https://flash-express-app-production.up.railway.app",vc=new Map,K2=new Map,jN=2e3,Gt=async(e,t={})=>{const n=`${_N}${e}`,r=`${t.method||"GET"}:${n}`,o=Date.now(),l=K2.get(r)||0;if(o-l<jN&&(!t.method||t.method==="GET")&&(console.log(`Request throttled: ${r}, last request was ${o-l}ms ago`),vc.has(r)))return vc.get(r);if(K2.set(r,o),(!t.method||t.method==="GET")&&vc.has(r))return console.log(`Reusing pending request: ${r}`),vc.get(r);const f=(async()=>{try{const m=await fetch(n,{...t,headers:{"Content-Type":"application/json",...t.headers}});if(!m.ok)try{const x=await m.json();throw new Error(x.error||`Server error: ${m.statusText}`)}catch{throw new Error(`Server error: ${m.status} ${m.statusText}`)}const g=m.headers.get("content-type");return g&&g.includes("application/json")?m.json():{success:!0}}catch(m){throw m}finally{vc.delete(r)}})();return(!t.method||t.method==="GET")&&vc.set(r,f),f},Os=Object.create(null);Os.open="0";Os.close="1";Os.ping="2";Os.pong="3";Os.message="4";Os.upgrade="5";Os.noop="6";const Kf=Object.create(null);Object.keys(Os).forEach(e=>{Kf[Os[e]]=e});const mm={type:"error",data:"parser error"},V5=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",q5=typeof ArrayBuffer=="function",G5=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Ug=({type:e,data:t},n,r)=>V5&&t instanceof Blob?n?r(t):J2(t,r):q5&&(t instanceof ArrayBuffer||G5(t))?n?r(t):J2(new Blob([t]),r):r(Os[e]+(t||"")),J2=(e,t)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];t("b"+(r||""))},n.readAsDataURL(e)};function $2(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let a1;function IN(e,t){if(V5&&e.data instanceof Blob)return e.data.arrayBuffer().then($2).then(t);if(q5&&(e.data instanceof ArrayBuffer||G5(e.data)))return t($2(e.data));Ug(e,!1,n=>{a1||(a1=new TextEncoder),t(a1.encode(n))})}const ex="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Gu=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<ex.length;e++)Gu[ex.charCodeAt(e)]=e;const DN=e=>{let t=e.length*.75,n=e.length,r,o=0,l,f,m,g;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const x=new ArrayBuffer(t),A=new Uint8Array(x);for(r=0;r<n;r+=4)l=Gu[e.charCodeAt(r)],f=Gu[e.charCodeAt(r+1)],m=Gu[e.charCodeAt(r+2)],g=Gu[e.charCodeAt(r+3)],A[o++]=l<<2|f>>4,A[o++]=(f&15)<<4|m>>2,A[o++]=(m&3)<<6|g&63;return x},RN=typeof ArrayBuffer=="function",zg=(e,t)=>{if(typeof e!="string")return{type:"message",data:W5(e,t)};const n=e.charAt(0);return n==="b"?{type:"message",data:ON(e.substring(1),t)}:Kf[n]?e.length>1?{type:Kf[n],data:e.substring(1)}:{type:Kf[n]}:mm},ON=(e,t)=>{if(RN){const n=DN(e);return W5(n,t)}else return{base64:!0,data:e}},W5=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},Y5="",LN=(e,t)=>{const n=e.length,r=new Array(n);let o=0;e.forEach((l,f)=>{Ug(l,!1,m=>{r[f]=m,++o===n&&t(r.join(Y5))})})},MN=(e,t)=>{const n=e.split(Y5),r=[];for(let o=0;o<n.length;o++){const l=zg(n[o],t);if(r.push(l),l.type==="error")break}return r};function kN(){return new TransformStream({transform(e,t){IN(e,n=>{const r=n.length;let o;if(r<126)o=new Uint8Array(1),new DataView(o.buffer).setUint8(0,r);else if(r<65536){o=new Uint8Array(3);const l=new DataView(o.buffer);l.setUint8(0,126),l.setUint16(1,r)}else{o=new Uint8Array(9);const l=new DataView(o.buffer);l.setUint8(0,127),l.setBigUint64(1,BigInt(r))}e.data&&typeof e.data!="string"&&(o[0]|=128),t.enqueue(o),t.enqueue(n)})}})}let s1;function Df(e){return e.reduce((t,n)=>t+n.length,0)}function Rf(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let r=0;for(let o=0;o<t;o++)n[o]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function PN(e,t){s1||(s1=new TextDecoder);const n=[];let r=0,o=-1,l=!1;return new TransformStream({transform(f,m){for(n.push(f);;){if(r===0){if(Df(n)<1)break;const g=Rf(n,1);l=(g[0]&128)===128,o=g[0]&127,o<126?r=3:o===126?r=1:r=2}else if(r===1){if(Df(n)<2)break;const g=Rf(n,2);o=new DataView(g.buffer,g.byteOffset,g.length).getUint16(0),r=3}else if(r===2){if(Df(n)<8)break;const g=Rf(n,8),x=new DataView(g.buffer,g.byteOffset,g.length),A=x.getUint32(0);if(A>Math.pow(2,21)-1){m.enqueue(mm);break}o=A*Math.pow(2,32)+x.getUint32(4),r=3}else{if(Df(n)<o)break;const g=Rf(n,o);m.enqueue(zg(l?g:s1.decode(g),t)),r=0}if(o===0||o>e){m.enqueue(mm);break}}}})}const X5=4;function Kr(e){if(e)return FN(e)}function FN(e){for(var t in Kr.prototype)e[t]=Kr.prototype[t];return e}Kr.prototype.on=Kr.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};Kr.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this};Kr.prototype.off=Kr.prototype.removeListener=Kr.prototype.removeAllListeners=Kr.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var r,o=0;o<n.length;o++)if(r=n[o],r===t||r.fn===t){n.splice(o,1);break}return n.length===0&&delete this._callbacks["$"+e],this};Kr.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,o=n.length;r<o;++r)n[r].apply(this,t)}return this};Kr.prototype.emitReserved=Kr.prototype.emit;Kr.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};Kr.prototype.hasListeners=function(e){return!!this.listeners(e).length};const n0=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0),Ya=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),BN="arraybuffer";function Z5(e,...t){return t.reduce((n,r)=>(e.hasOwnProperty(r)&&(n[r]=e[r]),n),{})}const UN=Ya.setTimeout,zN=Ya.clearTimeout;function r0(e,t){t.useNativeTimers?(e.setTimeoutFn=UN.bind(Ya),e.clearTimeoutFn=zN.bind(Ya)):(e.setTimeoutFn=Ya.setTimeout.bind(Ya),e.clearTimeoutFn=Ya.clearTimeout.bind(Ya))}const HN=1.33;function VN(e){return typeof e=="string"?qN(e):Math.ceil((e.byteLength||e.size)*HN)}function qN(e){let t=0,n=0;for(let r=0,o=e.length;r<o;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}function Q5(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function GN(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function WN(e){let t={},n=e.split("&");for(let r=0,o=n.length;r<o;r++){let l=n[r].split("=");t[decodeURIComponent(l[0])]=decodeURIComponent(l[1])}return t}class YN extends Error{constructor(t,n,r){super(t),this.description=n,this.context=r,this.type="TransportError"}}class Hg extends Kr{constructor(t){super(),this.writable=!1,r0(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,n,r){return super.emitReserved("error",new YN(t,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=zg(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const n=GN(t);return n.length?"?"+n:""}}class XN extends Hg{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};MN(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,LN(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=Q5()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}}let K5=!1;try{K5=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const ZN=K5;function QN(){}class KN extends XN{constructor(t){if(super(t),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||r!==t.port}}doWrite(t,n){const r=this.request({method:"POST",data:t});r.on("success",n),r.on("error",(o,l)=>{this.onError("xhr post error",o,l)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=t}}class Ds extends Kr{constructor(t,n,r){super(),this.createRequest=t,r0(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var t;const n=Z5(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let o in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(o)&&r.setRequestHeader(o,this._opts.extraHeaders[o])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var o;r.readyState===3&&((o=this._opts.cookieJar)===null||o===void 0||o.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(o){this.setTimeoutFn(()=>{this._onError(o)},0);return}typeof document<"u"&&(this._index=Ds.requestsCount++,Ds.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=QN,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Ds.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Ds.requestsCount=0;Ds.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",tx);else if(typeof addEventListener=="function"){const e="onpagehide"in Ya?"pagehide":"unload";addEventListener(e,tx,!1)}}function tx(){for(let e in Ds.requests)Ds.requests.hasOwnProperty(e)&&Ds.requests[e].abort()}const JN=function(){const e=J5({xdomain:!1});return e&&e.responseType!==null}();class $N extends KN{constructor(t){super(t);const n=t&&t.forceBase64;this.supportsBinary=JN&&!n}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Ds(J5,this.uri(),t)}}function J5(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||ZN))return new XMLHttpRequest}catch{}if(!t)try{return new Ya[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const $5=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class e6 extends Hg{get name(){return"websocket"}doOpen(){const t=this.uri(),n=this.opts.protocols,r=$5?{}:Z5(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,n,r)}catch(o){return this.emitReserved("error",o)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],o=n===t.length-1;Ug(r,this.supportsBinary,l=>{try{this.doWrite(r,l)}catch{}o&&n0(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=Q5()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}}const o1=Ya.WebSocket||Ya.MozWebSocket;class t6 extends e6{createSocket(t,n,r){return $5?new o1(t,n,r):n?new o1(t,n):new o1(t)}doWrite(t,n){this.ws.send(n)}}class n6 extends Hg{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const n=PN(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=t.readable.pipeThrough(n).getReader(),o=kN();o.readable.pipeTo(t.writable),this._writer=o.writable.getWriter();const l=()=>{r.read().then(({done:m,value:g})=>{m||(this.onPacket(g),l())}).catch(m=>{})};l();const f={type:"open"};this.query.sid&&(f.data=`{"sid":"${this.query.sid}"}`),this._writer.write(f).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],o=n===t.length-1;this._writer.write(r).then(()=>{o&&n0(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const r6={websocket:t6,webtransport:n6,polling:$N},i6=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,a6=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function gm(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),r=e.indexOf("]");n!=-1&&r!=-1&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let o=i6.exec(e||""),l={},f=14;for(;f--;)l[a6[f]]=o[f]||"";return n!=-1&&r!=-1&&(l.source=t,l.host=l.host.substring(1,l.host.length-1).replace(/;/g,":"),l.authority=l.authority.replace("[","").replace("]","").replace(/;/g,":"),l.ipv6uri=!0),l.pathNames=s6(l,l.path),l.queryKey=o6(l,l.query),l}function s6(e,t){const n=/\/{2,9}/g,r=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&r.splice(0,1),t.slice(-1)=="/"&&r.splice(r.length-1,1),r}function o6(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,o,l){o&&(n[o]=l)}),n}const pm=typeof addEventListener=="function"&&typeof removeEventListener=="function",Jf=[];pm&&addEventListener("offline",()=>{Jf.forEach(e=>e())},!1);class al extends Kr{constructor(t,n){if(super(),this.binaryType=BN,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(n=t,t=null),t){const r=gm(t);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=gm(n.host).host);r0(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const o=r.prototype.name;this.transports.push(o),this._transportsByName[o]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=WN(this.opts.query)),pm&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Jf.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=X5,n.transport=t,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&al.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(t);n.open(),this.setTransport(n)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",al.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=t.data,this._onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const o=this.writeBuffer[r].data;if(o&&(n+=VN(o)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,n0(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,n,r){return this._sendPacket("message",t,n,r),this}send(t,n,r){return this._sendPacket("message",t,n,r),this}_sendPacket(t,n,r,o){if(typeof n=="function"&&(o=n,n=void 0),typeof r=="function"&&(o=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const l={type:t,data:n,options:r};this.emitReserved("packetCreate",l),this.writeBuffer.push(l),o&&this.once("flush",o),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():t()}):this.upgrading?r():t()),this}_onError(t){if(al.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),pm&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=Jf.indexOf(this._offlineEventListener);r!==-1&&Jf.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this._prevBufferLen=0}}}al.protocol=X5;class l6 extends al{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let n=this.createTransport(t),r=!1;al.priorWebsocketSuccess=!1;const o=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",N=>{if(!r)if(N.type==="pong"&&N.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;al.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(A(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const T=new Error("probe error");T.transport=n.name,this.emitReserved("upgradeError",T)}}))};function l(){r||(r=!0,A(),n.close(),n=null)}const f=N=>{const T=new Error("probe error: "+N);T.transport=n.name,l(),this.emitReserved("upgradeError",T)};function m(){f("transport closed")}function g(){f("socket closed")}function x(N){n&&N.name!==n.name&&l()}const A=()=>{n.removeListener("open",o),n.removeListener("error",f),n.removeListener("close",m),this.off("close",g),this.off("upgrading",x)};n.once("open",o),n.once("error",f),n.once("close",m),this.once("close",g),this.once("upgrading",x),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const n=[];for(let r=0;r<t.length;r++)~this.transports.indexOf(t[r])&&n.push(t[r]);return n}}let c6=class extends l6{constructor(t,n={}){const r=typeof t=="object"?t:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(o=>r6[o]).filter(o=>!!o)),super(t,r)}};function u6(e,t="",n){let r=e;n=n||typeof location<"u"&&location,e==null&&(e=n.protocol+"//"+n.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=n.protocol+e:e=n.host+e),/^(https?|wss?):\/\//.test(e)||(typeof n<"u"?e=n.protocol+"//"+e:e="https://"+e),r=gm(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const l=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+l+":"+r.port+t,r.href=r.protocol+"://"+l+(n&&n.port===r.port?"":":"+r.port),r}const d6=typeof ArrayBuffer=="function",f6=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,ev=Object.prototype.toString,h6=typeof Blob=="function"||typeof Blob<"u"&&ev.call(Blob)==="[object BlobConstructor]",m6=typeof File=="function"||typeof File<"u"&&ev.call(File)==="[object FileConstructor]";function Vg(e){return d6&&(e instanceof ArrayBuffer||f6(e))||h6&&e instanceof Blob||m6&&e instanceof File}function $f(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let n=0,r=e.length;n<r;n++)if($f(e[n]))return!0;return!1}if(Vg(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return $f(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&$f(e[n]))return!0;return!1}function g6(e){const t=[],n=e.data,r=e;return r.data=xm(n,t),r.attachments=t.length,{packet:r,buffers:t}}function xm(e,t){if(!e)return e;if(Vg(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=xm(e[r],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=xm(e[r],t));return n}return e}function p6(e,t){return e.data=bm(e.data,t),delete e.attachments,e}function bm(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=bm(e[n],t);else if(typeof e=="object")for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=bm(e[n],t));return e}const x6=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],b6=5;var An;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(An||(An={}));class y6{constructor(t){this.replacer=t}encode(t){return(t.type===An.EVENT||t.type===An.ACK)&&$f(t)?this.encodeAsBinary({type:t.type===An.EVENT?An.BINARY_EVENT:An.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===An.BINARY_EVENT||t.type===An.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=g6(t),r=this.encodeAsString(n.packet),o=n.buffers;return o.unshift(r),o}}function nx(e){return Object.prototype.toString.call(e)==="[object Object]"}class qg extends Kr{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);const r=n.type===An.BINARY_EVENT;r||n.type===An.BINARY_ACK?(n.type=r?An.EVENT:An.ACK,this.reconstructor=new v6(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Vg(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const r={type:Number(t.charAt(0))};if(An[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===An.BINARY_EVENT||r.type===An.BINARY_ACK){const l=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const f=t.substring(l,n);if(f!=Number(f)||t.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(f)}if(t.charAt(n+1)==="/"){const l=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););r.nsp=t.substring(l,n)}else r.nsp="/";const o=t.charAt(n+1);if(o!==""&&Number(o)==o){const l=n+1;for(;++n;){const f=t.charAt(n);if(f==null||Number(f)!=f){--n;break}if(n===t.length)break}r.id=Number(t.substring(l,n+1))}if(t.charAt(++n)){const l=this.tryParse(t.substr(n));if(qg.isPayloadValid(r.type,l))r.data=l;else throw new Error("invalid payload")}return r}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case An.CONNECT:return nx(n);case An.DISCONNECT:return n===void 0;case An.CONNECT_ERROR:return typeof n=="string"||nx(n);case An.EVENT:case An.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&x6.indexOf(n[0])===-1);case An.ACK:case An.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class v6{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=p6(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const w6=Object.freeze(Object.defineProperty({__proto__:null,Decoder:qg,Encoder:y6,get PacketType(){return An},protocol:b6},Symbol.toStringTag,{value:"Module"}));function ls(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const N6=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class tv extends Kr{constructor(t,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[ls(t,"open",this.onopen.bind(this)),ls(t,"packet",this.onpacket.bind(this)),ls(t,"error",this.onerror.bind(this)),ls(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){var r,o,l;if(N6.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const f={type:An.EVENT,data:n};if(f.options={},f.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const A=this.ids++,N=n.pop();this._registerAckCallback(A,N),f.id=A}const m=(o=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||o===void 0?void 0:o.writable,g=this.connected&&!(!((l=this.io.engine)===null||l===void 0)&&l._hasPingExpired());return this.flags.volatile&&!m||(g?(this.notifyOutgoingListeners(f),this.packet(f)):this.sendBuffer.push(f)),this.flags={},this}_registerAckCallback(t,n){var r;const o=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(o===void 0){this.acks[t]=n;return}const l=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let m=0;m<this.sendBuffer.length;m++)this.sendBuffer[m].id===t&&this.sendBuffer.splice(m,1);n.call(this,new Error("operation has timed out"))},o),f=(...m)=>{this.io.clearTimeoutFn(l),n.apply(this,m)};f.withError=!0,this.acks[t]=f}emitWithAck(t,...n){return new Promise((r,o)=>{const l=(f,m)=>f?o(f):r(m);l.withError=!0,n.push(l),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((o,...l)=>r!==this._queue[0]?void 0:(o!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(o)):(this._queue.shift(),n&&n(null,...l)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:An.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(r=>String(r.id)===t)){const r=this.acks[t];delete this.acks[t],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case An.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case An.EVENT:case An.BINARY_EVENT:this.onevent(t);break;case An.ACK:case An.BINARY_ACK:this.onack(t);break;case An.DISCONNECT:this.ondisconnect();break;case An.CONNECT_ERROR:this.destroy();const r=new Error(t.data.message);r.data=t.data.data,this.emitReserved("connect_error",r);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const n=this;let r=!1;return function(...o){r||(r=!0,n.packet({type:An.ACK,id:t,data:o}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(delete this.acks[t.id],n.withError&&t.data.unshift(null),n.apply(this,t.data))}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:An.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,t.data)}}}function yu(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}yu.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+n:e-n}return Math.min(e,this.max)|0};yu.prototype.reset=function(){this.attempts=0};yu.prototype.setMin=function(e){this.ms=e};yu.prototype.setMax=function(e){this.max=e};yu.prototype.setJitter=function(e){this.jitter=e};class ym extends Kr{constructor(t,n){var r;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,r0(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new yu({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const o=n.parser||w6;this.encoder=new o.Encoder,this.decoder=new o.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new c6(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const o=ls(n,"open",function(){r.onopen(),t&&t()}),l=m=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",m),t?t(m):this.maybeReconnectOnOpen()},f=ls(n,"error",l);if(this._timeout!==!1){const m=this._timeout,g=this.setTimeoutFn(()=>{o(),l(new Error("timeout")),n.close()},m);this.opts.autoUnref&&g.unref(),this.subs.push(()=>{this.clearTimeoutFn(g)})}return this.subs.push(o),this.subs.push(f),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(ls(t,"ping",this.onping.bind(this)),ls(t,"data",this.ondata.bind(this)),ls(t,"error",this.onerror.bind(this)),ls(t,"close",this.onclose.bind(this)),ls(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){n0(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let r=this.nsps[t];return r?this._autoConnect&&!r.active&&r.connect():(r=new tv(this,t,n),this.nsps[t]=r),r}_destroy(t){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let r=0;r<n.length;r++)this.engine.write(n[r],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(o=>{o?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",o)):t.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Fu={};function eh(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const n=u6(e,t.path||"/socket.io"),r=n.source,o=n.id,l=n.path,f=Fu[o]&&l in Fu[o].nsps,m=t.forceNew||t["force new connection"]||t.multiplex===!1||f;let g;return m?g=new ym(r,t):(Fu[o]||(Fu[o]=new ym(r,t)),g=Fu[o]),n.query&&!t.query&&(t.query=n.queryKey),g.socket(n.path,t)}Object.assign(eh,{Manager:ym,Socket:tv,io:eh,connect:eh});const nv=(e,t)=>{try{const n=window.localStorage.getItem(e);return n==null?t:JSON.parse(n)}catch(n){return console.error(`Error reading from localStorage for key "${e}":`,n),t}},rv=(e,t)=>{try{if(t===void 0)window.localStorage.removeItem(e);else{const n=JSON.stringify(t);window.localStorage.setItem(e,n)}}catch(n){console.error(`Error writing to localStorage for key "${e}":`,n)}},iv=$l.createContext(null),Sn=()=>{const e=$l.useContext(iv);if(!e)throw new Error("useAppContext must be used within an AppProvider");return e},A6=({children:e})=>{const[t,n]=me.useState(null),[r,o]=me.useState([]),[l,f]=me.useState([]),[m,g]=me.useState([]),[x,A]=me.useState([]),[N,T]=me.useState({}),[v,O]=me.useState([]),[D,P]=me.useState([]),[C,E]=me.useState([]),[j,V]=me.useState([]),[W,ie]=me.useState([]),[B,R]=me.useState([]),[M,Z]=me.useState([]),[F,k]=me.useState([]),[Q,J]=me.useState([]),[G,Y]=me.useState([]),[z,X]=me.useState(null),[te,ge]=me.useState(()=>nv("app-theme","dark")),[ue,L]=me.useState(!1),[q,ee]=me.useState(null),fe=Ve=>{ge(Ve),rv("app-theme",Ve)};me.useEffect(()=>{te==="dark"?(document.documentElement.classList.add("dark"),document.documentElement.classList.remove("light")):(document.documentElement.classList.add("light"),document.documentElement.classList.remove("dark"))},[te]);const ae=me.useCallback((Ve,Ne,bt)=>{const Ft=Date.now(),Mr=bt||1e4;O(ga=>[...ga,{id:Ft,message:Ve,type:Ne,duration:Mr}])},[]),Ee=me.useCallback(Ve=>{O(Ne=>Ne.filter(bt=>bt.id!==Ve))},[]),we=me.useRef(0),xe=me.useRef(null),Me=me.useRef(!1),_e=5e3,Qe=1500,Be=me.useCallback(async(Ve=!1)=>{if(!t){console.log("No current user - skipping data fetch");return}if(Me.current&&!Ve){console.log("Data fetch already in progress - skipping");return}const Ne=Date.now();if(!Ve&&Ne-we.current<_e){console.log(`Data fetch throttled - last fetch was ${Ne-we.current}ms ago, throttle is ${_e}ms`),xe.current&&clearTimeout(xe.current),Me.current||(xe.current=setTimeout(()=>{console.log("Executing debounced fetch after throttle period"),Be(!0)},Qe));return}xe.current&&(clearTimeout(xe.current),xe.current=null);try{Me.current=!0,we.current=Ne,console.log("Starting data fetch at",new Date(Ne).toISOString()),L(!0),we.current=Ne,console.log("Fetching application data...");const bt=await Gt("/api/data");o(bt.users||[]),f(bt.shipments||[]),g(bt.clientTransactions||[]),A(bt.notifications||[]),E(bt.courierStats||[]),V(bt.courierTransactions||[]),P(bt.customRoles||[]),ie(bt.inventoryItems||[]),R(bt.assets||[]),Z(bt.suppliers||[]),k(bt.supplierTransactions||[]),J(bt.inAppNotifications||[]),Y(bt.tierSettings||[]),console.log("Application data fetched successfully")}catch(bt){console.error("Failed to fetch application data:",bt),ae(`Failed to load data: ${bt.message}`,"error")}finally{Me.current=!1,L(!1),console.log("Data fetch completed, isFetching reset to false")}},[t,ae]);me.useEffect(()=>{if(t&&!q){console.log("Setting up WebSocket connection for user:",t.id);const Ve=eh({autoConnect:!0,timeout:1e4,reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3});Ve.on("connect",()=>{console.log("WebSocket connected successfully")});let Ne=null;return Ve.on("data_updated",()=>{console.log("Received data_updated event - scheduling throttled fetch"),Ne&&clearTimeout(Ne),Ne=setTimeout(()=>{console.log("Executing debounced data fetch from socket event"),Be()},500)}),Ve.on("disconnect",()=>{console.log("WebSocket disconnected"),Ne&&(clearTimeout(Ne),Ne=null)}),Ve.on("reconnect",bt=>{console.log(`WebSocket reconnected after ${bt} attempts`),setTimeout(()=>{Be(!0)},1e3)}),ee(Ve),setTimeout(()=>{Be(!0)},500),()=>{console.log("Cleaning up WebSocket connection"),Ne&&clearTimeout(Ne),Ve.disconnect(),ee(null)}}else!t&&q&&(console.log("User logged out - cleaning up socket"),q.disconnect(),ee(null))},[t]),me.useEffect(()=>{if(t&&r.length>0){const Ve=r.find(Ne=>Ne.id===t.id);Ve&&Ve.walletBalance!==t.walletBalance&&(console.log(`💰 Updating currentUser walletBalance: ${t.walletBalance} → ${Ve.walletBalance}`),n({...t,walletBalance:Ve.walletBalance}))}},[r,t]);const ft=me.useCallback(()=>{xe.current&&(clearTimeout(xe.current),xe.current=null),n(null),o([]),f([]),g([]),A([]),E([]),V([]),P([]),ie([]),R([]),Z([]),k([]),J([]),Y([]),q&&(q.disconnect(),ee(null)),ae("You have been logged out.","info")},[ae,q]),ke=me.useCallback(async(Ve,Ne)=>{L(!0);try{console.log("🔑 Starting login process..."),console.log("📧 Email:",Ve),console.log("📋 Fetching roles...");const bt=await Gt("/api/roles");console.log("✅ Roles fetched:",bt.length),P(bt),console.log("👤 Attempting login...");const Ft=await Gt("/api/login",{method:"POST",body:JSON.stringify({email:Ve,password:Ne})});console.log("✅ Login API successful:",{id:Ft.id,name:Ft.name,email:Ft.email});const Mr=Array.isArray(Ft.roles)?Ft.roles:[];console.log("🔍 User roles:",Mr);const ga=Mr.reduce((Yt,ea)=>{const En=bt.find(La=>La.name===ea);return En!=null&&En.permissions?[...Yt,...En.permissions]:Yt},[]),$t=[...new Set(ga)].sort();console.log("🔐 User permissions:",$t.length,"permissions");const on={...Ft,permissions:$t};return n(on),ae(`Welcome back, ${Ft.name}!`,"success"),!0}catch(bt){const Ft=bt.message||"Login failed - please try again";return console.error("❌ Login failed:",bt),ae(Ft,"error"),ft(),!1}finally{L(!1)}},[ae,ft]),he=me.useCallback(Ve=>{var Ne;return((Ne=t==null?void 0:t.permissions)==null?void 0:Ne.includes(Ve))??!1},[t]),ot=me.useCallback(async Ve=>{t&&await Gt("/api/shipments",{method:"POST",body:JSON.stringify(Ve)})},[t]),ze=me.useCallback(async(Ve,Ne,bt={})=>{try{return await Gt(`/api/shipments/${Ve}/status`,{method:"PUT",body:JSON.stringify({status:Ne,...bt})}),ae(`Shipment ${Ve} updated to ${Ne}`,"success"),!0}catch(Ft){return ae(`Error: ${Ft.message}`,"error"),!1}},[ae]),Pe=me.useCallback(async Ve=>{try{await Gt(`/api/shipments/${Ve}/status`,{method:"PUT",body:JSON.stringify({isRevert:!0})}),ae(`Shipment ${Ve} status has been reverted.`,"success")}catch(Ne){ae(`Error reverting status: ${Ne.message}`,"error"),console.error("Revert status failed:",Ne)}},[ae]),ct=me.useCallback(async Ve=>{try{return await Gt(`/api/shipments/${Ve}/send-delivery-code`,{method:"POST"}),ae("Verification code sent to recipient!","success"),!0}catch(Ne){return ae(`Failed to send code: ${Ne.message}`,"error"),!1}},[ae]),We=me.useCallback(async(Ve,Ne)=>{try{return await Gt(`/api/shipments/${Ve}/verify-delivery`,{method:"POST",body:JSON.stringify({code:Ne})}),ae("Delivery confirmed!","success"),!0}catch(bt){return ae(`Verification failed: ${bt.message}`,"error"),!1}},[ae]),mt=me.useCallback(async(Ve,Ne)=>{try{return await Gt(`/api/shipments/${Ve}/assign`,{method:"PUT",body:JSON.stringify({courierId:Ne})}),ae(`Shipment ${Ve} assigned successfully`,"success"),setTimeout(()=>Be(),500),!0}catch(bt){return ae(bt.message,"error"),!1}},[ae]),Ue=me.useCallback(async Ve=>{try{await Gt("/api/users",{method:"POST",body:JSON.stringify(Ve)}),ae(`User ${Ve.name} created successfully.`,"success")}catch(Ne){ae(Ne.message,"error")}},[ae]),it=me.useCallback(async(Ve,Ne,bt=!1)=>{try{await Gt(`/api/users/${Ve}`,{method:"PUT",body:JSON.stringify(Ne)}),bt||ae("User updated successfully.","success"),setTimeout(()=>Be(),500)}catch(Ft){ae(Ft.message,"error")}},[ae]),Oe=me.useCallback(async Ve=>{try{await Gt(`/api/users/${Ve}`,{method:"DELETE"}),ae("User deleted successfully.","success")}catch(Ne){ae(Ne.message,"error")}},[ae]),Ze=me.useCallback(async(Ve,Ne)=>{try{await Gt(`/api/users/${Ve}/password`,{method:"PUT",body:JSON.stringify({password:Ne})}),ae("Password reset successfully.","success")}catch(bt){ae(bt.message,"error")}},[ae]),pt=me.useCallback(Ve=>{var Ne;return Ve?((Ne=r.find(bt=>bt.id===Ve))==null?void 0:Ne.name)||"Unknown Courier":"Unassigned"},[r]),St=me.useCallback(async(Ve,Ne)=>{await mt(Ve,Ne)},[mt]),yt=me.useCallback(Ve=>{const Ne=C.find(bt=>bt.courierId===Ve);return!(Ne!=null&&Ne.isRestricted)},[C]),qt=me.useCallback(()=>{const Ve=l.filter(Mt=>Mt.status===tt.DELIVERED),Ne=l.filter(Mt=>![tt.DELIVERED,tt.DELIVERY_FAILED].includes(Mt.status)),bt=l.filter(Mt=>[tt.OUT_FOR_DELIVERY].includes(Mt.status)&&Mt.paymentMethod===Rn.COD),Ft=l.filter(Mt=>Mt.status===tt.DELIVERED&&Mt.paymentMethod===Rn.COD),Mr=Ve.reduce((Mt,mn)=>Mt+(Number(mn.price)||0),0),ga=Ne.reduce((Mt,mn)=>Mt+(Number(mn.price)||0),0),$t=Ne.filter(Mt=>Mt.paymentMethod===Rn.TRANSFER).reduce((Mt,mn)=>Mt+(Number(mn.clientFlatRateFee)||0),0),on=l.filter(Mt=>Mt.status===tt.DELIVERED||Mt.status===tt.DELIVERY_FAILED),Yt=Ne.reduce((Mt,mn)=>Mt+(Number(mn.clientFlatRateFee)||0),0),ea=on.reduce((Mt,mn)=>Mt+(Number(mn.clientFlatRateFee)||0),0),En=Ve.reduce((Mt,mn)=>Mt+(Number(mn.courierCommission)||0),0),La=ea-En,ir=bt.reduce((Mt,mn)=>Mt+(Number(mn.price)||0),0),Hi=Ft.reduce((Mt,mn)=>Mt+(Number(mn.price)||0),0),Us=C.reduce((Mt,mn)=>Mt+(Number(mn.currentBalance)||0),0);return{totalCollectedMoney:Mr,undeliveredPackagesValue:ga,uncollectedTransferFees:$t,totalOwedToCouriers:Us,totalRevenue:ea,totalFees:Yt,totalCommission:En,netRevenue:La,cashToCollect:ir,totalCODCollected:Hi,totalOrders:Ve.length}},[l,C]),xt=me.useCallback(()=>r.filter(Ne=>(Ne.roles||[]).includes(zt.CLIENT)).map(Ne=>{const bt=l.filter($t=>$t.clientId===Ne.id),Ft=bt.filter($t=>$t.status===tt.DELIVERED),Mr=bt.length;Ft.length;const ga=Ft.reduce(($t,on)=>{const Yt=Number(on.packageValue)||0,ea=Number(on.clientFlatRateFee)||0;return $t+Math.max(0,Yt-ea)},0);return{clientId:Ne.id,clientName:Ne.name,totalOrders:Mr,orderSum:ga,flatRateFee:Ne.flatRateFee||0,partnerTier:Ne.partnerTier,manualTierAssignment:Ne.manualTierAssignment}}),[r,l]),hn=async(Ve,Ne)=>{await Gt(`/api/shipments/${Ve}/fees`,{method:"PUT",body:JSON.stringify(Ne)})},Tt=async(Ve,Ne,bt)=>{await Gt(`/api/shipments/${Ve}/packaging`,{method:"PUT",body:JSON.stringify({packagingLog:Ne,packagingNotes:bt})}),setTimeout(()=>Be(),500)},gt=async Ve=>{T(Ne=>({...Ne,[Ve]:"sending"}));try{await Gt(`/api/notifications/${Ve}/resend`,{method:"POST"}),T(Ne=>({...Ne,[Ve]:"sent"}))}catch{T(bt=>({...bt,[Ve]:"failed"}))}},Te=async(Ve,Ne)=>{await Gt(`/api/couriers/${Ve}/settings`,{method:"PUT",body:JSON.stringify(Ne)})},lt=async(Ve,Ne,bt)=>{await Gt(`/api/couriers/${Ve}/penalty`,{method:"POST",body:JSON.stringify({amount:Ne,description:bt})})},It=async(Ve,Ne,bt)=>{await Gt(`/api/payouts/${Ve}/process`,{method:"PUT",body:JSON.stringify({transferEvidence:bt,processedAmount:Ne})}),setTimeout(()=>Be(),500)},Pt=async Ve=>{await Gt(`/api/payouts/${Ve}/decline`,{method:"PUT"}),setTimeout(()=>Be(),500)},Yn=async(Ve,Ne,bt)=>{await Gt("/api/couriers/payouts",{method:"POST",body:JSON.stringify({courierId:Ve,amount:Ne,paymentMethod:bt})}),setTimeout(()=>Be(),500)},kn=async(Ve,Ne)=>{await Gt(`/api/clients/${Ve}/payouts`,{method:"POST",body:JSON.stringify({amount:Ne})}),setTimeout(()=>Be(),500)},en=async Ve=>{await Gt(`/api/client-transactions/${Ve}/process`,{method:"PUT"}),setTimeout(()=>Be(),500)},$r=async Ve=>{await Gt(`/api/client-transactions/${Ve}/decline`,{method:"PUT"}),setTimeout(()=>Be(),500)},$n=async()=>{try{const Ve=await Gt("/api/admin/reset-database-complete",{method:"POST"});return Ve.success?(ae("Database reset completed successfully! All data cleared except Admin, Test Courier, and Test Client.","success",5e3),setTimeout(()=>Be(!0),1e3),!0):(ae(`Database reset failed: ${Ve.error||"Unknown error"}`,"error",5e3),!1)}catch(Ve){return console.error("Database reset error:",Ve),ae(`Database reset failed: ${Ve.message||"Network error"}`,"error",5e3),!1}},Wt=async(Ve,Ne)=>{await Gt(`/api/clients/${Ve}/flatrate`,{method:"PUT",body:JSON.stringify({flatRateFee:Ne})})},nn=async(Ve,Ne)=>{await Gt(`/api/clients/${Ve}/taxcard`,{method:"PUT",body:JSON.stringify({taxCardNumber:Ne})})},ma=async Ve=>{await Gt("/api/tier-settings",{method:"PUT",body:JSON.stringify({settings:Ve})})},yn=async(Ve,Ne)=>{await Gt(`/api/clients/${Ve}/tier`,{method:"PUT",body:JSON.stringify({tier:Ne})})},ei=Ve=>{var Ne;return((Ne=r.find(bt=>bt.id===Ve))==null?void 0:Ne.taxCardNumber)||""},vi=(Ve,Ne)=>Ne.commissionType===H5.FLAT?Ne.commissionValue:Ve.price*(Ne.commissionValue/100),Dt=(Ve,Ne,bt)=>{const Ft=bt.priorityMultipliers||{[an.STANDARD]:1,[an.URGENT]:1.5,[an.EXPRESS]:2};return Ve*(Ft[Ne]||1)},zi=async Ve=>{await Gt("/api/roles",{method:"POST",body:JSON.stringify(Ve)})},Wr=async(Ve,Ne)=>{await Gt(`/api/roles/${Ve}`,{method:"PUT",body:JSON.stringify(Ne)})},Yr=async Ve=>{await Gt(`/api/roles/${Ve}`,{method:"DELETE"})},vn=me.useCallback(async Ve=>{try{J(Ne=>Ne.map(bt=>bt.id===Ve?{...bt,isRead:!0}:bt)),await Gt(`/api/notifications/${Ve}/read`,{method:"PUT"})}catch(Ne){ae(`Failed to mark notification as read: ${Ne.message}`,"error"),J(bt=>bt.map(Ft=>Ft.id===Ve?{...Ft,isRead:!1}:Ft))}},[ae]),Pn=async()=>{try{const Ve=await Gt("/api/shipments/auto-assign",{method:"POST"});ae(Ve.message||"Auto-assignment completed.","success")}catch(Ve){ae(`Auto-assignment failed: ${Ve.message}`,"error")}},Xn=me.useCallback(async(Ve,Ne,bt)=>{try{const Ft=await Gt("/api/shipments/bulk-package",{method:"POST",body:JSON.stringify({shipmentIds:Ve,materialsSummary:Ne,packagingNotes:bt})});ae(Ft.message||"Shipments packaged successfully.","success"),setTimeout(()=>Be(),500)}catch(Ft){ae(`Bulk packaging failed: ${Ft.message}`,"error")}},[ae]),wt=me.useCallback(async(Ve,Ne)=>{try{const bt=await Gt("/api/shipments/bulk-assign",{method:"POST",body:JSON.stringify({shipmentIds:Ve,courierId:Ne})});ae(bt.message||"Shipments assigned successfully.","success"),setTimeout(()=>Be(),500)}catch(bt){ae(`Bulk assignment failed: ${bt.message}`,"error")}},[ae]),ui=me.useCallback(async(Ve,Ne)=>{try{const bt=await Gt("/api/shipments/bulk-status-update",{method:"POST",body:JSON.stringify({shipmentIds:Ve,status:Ne})});ae(bt.message||"Shipments updated successfully.","success")}catch(bt){ae(`Bulk update failed: ${bt.message}`,"error")}},[ae]),$i={currentUser:t,users:r,shipments:l,clientTransactions:m,toasts:v,notifications:x,notificationStatus:N,courierStats:C,courierTransactions:j,customRoles:D,inventoryItems:W,assets:B,suppliers:M,supplierTransactions:F,inAppNotifications:Q,tierSettings:G,isLoading:ue,theme:te,setTheme:fe,login:ke,logout:ft,addShipment:ot,updateShipmentStatus:ze,revertShipmentStatus:Pe,updateShipmentFees:hn,updateShipmentPackaging:Tt,assignShipmentToCourier:mt,reassignCourier:St,addUser:Ue,updateUser:it,removeUser:Oe,resetPassword:Ze,addToast:ae,removeToast:Ee,resendNotification:gt,canCourierReceiveAssignment:yt,updateCourierSettings:Te,applyManualPenalty:lt,processCourierPayout:It,declineCourierPayout:Pt,requestCourierPayout:Yn,requestClientPayout:kn,processClientPayout:en,declineClientPayout:$r,resetDatabaseComplete:$n,updateClientFlatRate:Wt,updateClientTaxCard:nn,updateTierSettings:ma,updateClientTier:yn,getTaxCardNumber:ei,getAdminFinancials:qt,getClientFinancials:xt,hasPermission:he,calculateCommission:vi,calculatePriorityPrice:Dt,getCourierName:pt,addRole:zi,updateRole:Wr,deleteRole:Yr,sendDeliveryVerificationCode:ct,verifyDelivery:We,shipmentFilter:z,setShipmentFilter:X,markNotificationAsRead:vn,autoAssignShipments:Pn,bulkPackageShipments:Xn,bulkAssignShipments:wt,bulkUpdateShipmentStatus:ui,addInventoryItem:async Ve=>{await Gt("/api/inventory",{method:"POST",body:JSON.stringify(Ve)})},updateInventoryItem:async(Ve,Ne)=>{await Gt(`/api/inventory/${Ve}`,{method:"PUT",body:JSON.stringify(Ne)})},deleteInventoryItem:async Ve=>{await Gt(`/api/inventory/${Ve}`,{method:"DELETE"})},addAsset:async Ve=>{await Gt("/api/assets",{method:"POST",body:JSON.stringify(Ve)})},updateAsset:async(Ve,Ne)=>{await Gt(`/api/assets/${Ve}`,{method:"PUT",body:JSON.stringify(Ne)})},deleteAsset:async Ve=>{await Gt(`/api/assets/${Ve}`,{method:"DELETE"})},assignAsset:async(Ve,Ne)=>{Ne?await Gt(`/api/assets/${Ve}/assign`,{method:"POST",body:JSON.stringify({userId:Ne})}):await Gt(`/api/assets/${Ve}/unassign`,{method:"POST"})},addSupplier:async Ve=>{await Gt("/api/suppliers",{method:"POST",body:JSON.stringify(Ve)}),setTimeout(()=>Be(),500)},updateSupplier:async(Ve,Ne)=>{await Gt(`/api/suppliers/${Ve}`,{method:"PUT",body:JSON.stringify(Ne)}),setTimeout(()=>Be(),500)},deleteSupplier:async Ve=>{await Gt(`/api/suppliers/${Ve}`,{method:"DELETE"}),setTimeout(()=>Be(),500)},addSupplierTransaction:async Ve=>{await Gt("/api/supplier-transactions",{method:"POST",body:JSON.stringify(Ve)})},deleteSupplierTransaction:async Ve=>{await Gt(`/api/supplier-transactions/${Ve}`,{method:"DELETE"})}};return a.jsx(iv.Provider,{value:$i,children:e})},S6={en:{"nav.dashboard":"Dashboard","nav.myShipments":"My Shipments","nav.createShipment":"Create Shipment","nav.myWallet":"My Wallet","nav.myFinancials":"My Financials","nav.clientRevenue":"Client Revenue","nav.myTasks":"My Tasks","nav.completedOrders":"Completed Orders","nav.myEarnings":"My Earnings","nav.deliveredShipments":"Delivered Shipments","nav.couriersByZone":"Couriers By Zone","nav.myProfile":"My Profile","nav.myAssets":"My Assets","nav.allShipments":"All Shipments","nav.packagingAssignment":"Packaging & Assignment","nav.deliveryManagement":"Delivery Management","nav.userManagement":"User Management","nav.roleManagement":"Role Management","nav.partnerTiers":"Partner Tiers","nav.inventory":"Inventory","nav.assetManagement":"Asset Management","nav.supplierManagement":"Supplier Management","nav.clientAnalytics":"Client Analytics","nav.courierPerformance":"Courier Performance","nav.financials":"Financials","nav.adminFinancials":"Admin Financials","nav.totalShipments":"Total Shipments","nav.notificationsLog":"Notifications Log","common.submit":"Submit","common.cancel":"Cancel","common.save":"Save","common.edit":"Edit","common.delete":"Delete","common.add":"Add","common.update":"Update","common.search":"Search","common.filter":"Filter","common.export":"Export","common.import":"Import","common.close":"Close","common.confirm":"Confirm","common.yes":"Yes","common.no":"No","common.loading":"Loading...","common.error":"Error","common.success":"Success","common.warning":"Warning","common.info":"Information","dashboard.title":"Dashboard","dashboard.overview":"Overview","dashboard.recentShipments":"Recent Shipments","dashboard.quickActions":"Quick Actions","shipments.title":"Shipments","shipments.id":"Shipment ID","shipments.recipient":"Recipient","shipments.status":"Status","shipments.duration":"Duration","shipments.price":"Price","shipments.creationDate":"Creation Date","shipments.overdue":"OVERDUE","shipments.warning":"WARNING",createShipments:"Create Shipments",createSingleShipment:"Create Single Shipment",bulkUploadShipments:"Bulk Upload Shipments",createShipmentForClient:"Create Shipment For Client",selectClient:"Select a client...",recipientName:"Recipient Name",recipientPhone:"Recipient Phone",recipientAddress:"Recipient Street Address",zone:"Zone",packageDescription:"Package Description",paymentMethod:"Payment Method",priority:"Priority",packageValue:"Package Value",phoneValidation:"Must be exactly 11 digits (01000909899)",downloadTemplate:"Download Template",uploadFile:"Upload File",myProfile:"My Profile",viewEditPersonalInfo:"View and edit your personal information and default address.",editProfile:"Edit Profile",personalInformation:"Personal Information",fullName:"Full Name",emailAddress:"Email Address",phoneNumber:"Phone Number",phoneExample:"Example for Egyptian number: 01012345678",role:"Role",notSet:"Not set",saveChanges:"Save Changes","profile.subtitle":"View and edit your personal information and default address.","profile.editProfile":"Edit Profile","profile.personalInfo":"Personal Information","profile.defaultAddress":"Default Pickup Address","profile.name":"Name","profile.email":"Email","profile.phone":"Phone","profile.street":"Street","profile.city":"City","profile.details":"Details","wallet.title":"My Wallet","wallet.balance":"Current Balance","wallet.transactions":"Transactions","wallet.requestPayout":"Request Payout","wallet.availableBalance":"Available Balance","wallet.pendingPayouts":"Pending Payouts","wallet.transactionHistory":"Transaction History","wallet.amount":"Amount","wallet.date":"Date","wallet.type":"Type","wallet.status":"Status","dashboard.welcomeBack":"Welcome back","dashboard.quickStats":"Quick Stats","dashboard.recentActivity":"Recent Activity","dashboard.totalRevenue":"Total Revenue","dashboard.activeShipments":"Active Shipments","dashboard.completedToday":"Completed Today","clientRevenue.title":"Client Revenue","clientRevenue.totalEarnings":"Total Earnings","clientRevenue.monthlyBreakdown":"Monthly Breakdown","clientRevenue.revenueAnalysis":"Revenue Analysis","myTasks.title":"My Tasks","myTasks.assignedToday":"Assigned Today","myTasks.pending":"Pending Tasks","myTasks.inProgress":"In Progress","completedOrders.title":"Completed Orders","completedOrders.today":"Today","completedOrders.thisWeek":"This Week","completedOrders.thisMonth":"This Month","myEarnings.title":"My Earnings","myEarnings.totalEarnings":"Total Earnings","myEarnings.commissionRate":"Commission Rate","deliveredShipments.title":"Delivered Shipments","couriersByZone.title":"Couriers By Zone","myAssets.title":"My Assets","allShipments.title":"All Shipments","packagingAssignment.title":"Packaging & Assignment","deliveryManagement.title":"Delivery Management","userManagement.title":"User Management","roleManagement.title":"Role Management","partnerTiers.title":"Partner Tiers","inventory.title":"Inventory","assetManagement.title":"Asset Management","supplierManagement.title":"Supplier Management","courierPerformance.title":"Courier Performance","adminFinancials.title":"Admin Financials","totalShipments.title":"Total Shipments","notificationsLog.title":"Notifications Log","table.id":"ID","table.name":"Name","table.email":"Email","table.phone":"Phone","table.address":"Address","table.city":"City","table.zone":"Zone","table.status":"Status","table.date":"Date","table.amount":"Amount","table.actions":"Actions","table.view":"View","table.edit":"Edit","table.delete":"Delete","form.street":"Street Address","form.city":"City","form.zone":"Zone","form.details":"Additional Details","form.description":"Description","form.value":"Value","form.priority":"Priority","form.required":"Required","form.optional":"Optional","clientAnalytics.title":"Client Analytics","clientAnalytics.client":"Client","clientAnalytics.totalShipments":"Total Shipments","clientAnalytics.walletBalance":"Wallet Balance","clientAnalytics.partnerTier":"Partner Tier","clientAnalytics.flatRate":"Flat Rate","clientAnalytics.pendingPayouts":"Pending Payouts","clientAnalytics.actions":"Actions","clientAnalytics.viewShipments":"View Shipments","status.pending":"Pending","status.assigned":"Assigned","status.pickedUp":"Picked Up","status.inTransit":"In Transit","status.outForDelivery":"Out for Delivery","status.delivered":"Delivered","status.deliveryFailed":"Delivery Failed","status.returned":"Returned","payment.cod":"Cash on Delivery","payment.transfer":"Transfer","payment.wallet":"Wallet","priority.standard":"Standard","priority.urgent":"Urgent","priority.express":"Express"},ar:{"nav.dashboard":"لوحة التحكم","nav.myShipments":"شحناتي","nav.createShipment":"إنشاء شحنة","nav.myWallet":"محفظتي","nav.myFinancials":"مالياتي","nav.clientRevenue":"إيرادات العميل","nav.myTasks":"مهامي","nav.completedOrders":"الطلبات المكتملة","nav.myEarnings":"أرباحي","nav.deliveredShipments":"الشحنات المسلمة","nav.couriersByZone":"المناديب حسب المنطقة","nav.myProfile":"ملفي الشخصي","nav.myAssets":"أصولي","nav.allShipments":"جميع الشحنات","nav.packagingAssignment":"التعبئة والتوزيع","nav.deliveryManagement":"إدارة التسليم","nav.userManagement":"إدارة المستخدمين","nav.roleManagement":"إدارة الأدوار","nav.partnerTiers":"مستويات الشراكة","nav.inventory":"المخزون","nav.assetManagement":"إدارة الأصول","nav.supplierManagement":"إدارة الموردين","nav.clientAnalytics":"تحليلات العملاء","nav.courierPerformance":"أداء المناديب","nav.financials":"الماليات","nav.adminFinancials":"الماليات الإدارية","nav.totalShipments":"إجمالي الشحنات","nav.notificationsLog":"سجل الإشعارات","common.submit":"إرسال","common.cancel":"إلغاء","common.save":"حفظ","common.edit":"تعديل","common.delete":"حذف","common.add":"إضافة","common.update":"تحديث","common.search":"بحث","common.filter":"تصفية","common.export":"تصدير","common.import":"استيراد","common.close":"إغلاق","common.confirm":"تأكيد","common.yes":"نعم","common.no":"لا","common.loading":"جاري التحميل...","common.error":"خطأ","common.success":"نجح","common.warning":"تحذير","common.info":"معلومات","dashboard.title":"لوحة التحكم","dashboard.overview":"نظرة عامة","dashboard.recentShipments":"الشحنات الأخيرة","dashboard.quickActions":"إجراءات سريعة","shipments.title":"الشحنات","shipments.id":"رقم الشحنة","shipments.recipient":"المستلم","shipments.status":"الحالة","shipments.duration":"المدة","shipments.price":"السعر","shipments.creationDate":"تاريخ الإنشاء","shipments.overdue":"متأخرة","shipments.warning":"تحذير",createShipments:"إنشاء الشحنات",createSingleShipment:"إنشاء شحنة واحدة",bulkUploadShipments:"رفع الشحنات بالجملة",createShipmentForClient:"إنشاء شحنة للعميل",selectClient:"اختر عميلاً...",recipientName:"اسم المستلم",recipientPhone:"هاتف المستلم",recipientAddress:"عنوان المستلم",zone:"المنطقة",packageDescription:"وصف الطرد",paymentMethod:"طريقة الدفع",priority:"الأولوية",packageValue:"قيمة الطرد",phoneValidation:"يجب أن يكون 11 رقماً بالضبط (01000909899)",downloadTemplate:"تحميل النموذج",uploadFile:"رفع ملف",myProfile:"ملفي الشخصي",viewEditPersonalInfo:"عرض وتعديل معلوماتك الشخصية والعنوان الافتراضي.",editProfile:"تعديل الملف الشخصي",personalInformation:"المعلومات الشخصية",fullName:"الاسم الكامل",emailAddress:"عنوان البريد الإلكتروني",phoneNumber:"رقم الهاتف",phoneExample:"مثال للرقم المصري: 01012345678",role:"الدور",notSet:"غير محدد",saveChanges:"حفظ التغييرات","profile.subtitle":"عرض وتعديل معلوماتك الشخصية والعنوان الافتراضي.","profile.editProfile":"تعديل الملف الشخصي","profile.personalInfo":"المعلومات الشخصية","profile.defaultAddress":"عنوان الاستلام الافتراضي","profile.name":"الاسم","profile.email":"البريد الإلكتروني","profile.phone":"الهاتف","profile.street":"الشارع","profile.city":"المدينة","profile.details":"التفاصيل","wallet.title":"محفظتي","wallet.balance":"الرصيد الحالي","wallet.transactions":"المعاملات","wallet.requestPayout":"طلب سحب","wallet.availableBalance":"الرصيد المتاح","wallet.pendingPayouts":"المدفوعات المعلقة","wallet.transactionHistory":"تاريخ المعاملات","wallet.amount":"المبلغ","wallet.date":"التاريخ","wallet.type":"النوع","wallet.status":"الحالة","dashboard.welcomeBack":"مرحباً بعودتك","dashboard.quickStats":"إحصائيات سريعة","dashboard.recentActivity":"النشاط الأخير","dashboard.totalRevenue":"إجمالي الإيرادات","dashboard.activeShipments":"الشحنات النشطة","dashboard.completedToday":"مكتملة اليوم","clientRevenue.title":"إيرادات العميل","clientRevenue.totalEarnings":"إجمالي الأرباح","clientRevenue.monthlyBreakdown":"التفصيل الشهري","clientRevenue.revenueAnalysis":"تحليل الإيرادات","myTasks.title":"مهامي","myTasks.assignedToday":"المكلف بها اليوم","myTasks.pending":"المهام المعلقة","myTasks.inProgress":"قيد التنفيذ","completedOrders.title":"الطلبات المكتملة","completedOrders.today":"اليوم","completedOrders.thisWeek":"هذا الأسبوع","completedOrders.thisMonth":"هذا الشهر","myEarnings.title":"أرباحي","myEarnings.totalEarnings":"إجمالي الأرباح","myEarnings.commissionRate":"معدل العمولة","deliveredShipments.title":"الشحنات المسلمة","couriersByZone.title":"المناديب حسب المنطقة","myAssets.title":"أصولي","allShipments.title":"جميع الشحنات","packagingAssignment.title":"التعبئة والتوزيع","deliveryManagement.title":"إدارة التسليم","userManagement.title":"إدارة المستخدمين","roleManagement.title":"إدارة الأدوار","partnerTiers.title":"مستويات الشراكة","inventory.title":"المخزون","assetManagement.title":"إدارة الأصول","supplierManagement.title":"إدارة الموردين","courierPerformance.title":"أداء المناديب","adminFinancials.title":"الماليات الإدارية","totalShipments.title":"إجمالي الشحنات","notificationsLog.title":"سجل الإشعارات","table.id":"المعرف","table.name":"الاسم","table.email":"البريد الإلكتروني","table.phone":"الهاتف","table.address":"العنوان","table.city":"المدينة","table.zone":"المنطقة","table.status":"الحالة","table.date":"التاريخ","table.amount":"المبلغ","table.actions":"الإجراءات","table.view":"عرض","table.edit":"تعديل","table.delete":"حذف","form.street":"عنوان الشارع","form.city":"المدينة","form.zone":"المنطقة","form.details":"تفاصيل إضافية","form.description":"الوصف","form.value":"القيمة","form.priority":"الأولوية","form.required":"مطلوب","form.optional":"اختياري","clientAnalytics.title":"تحليلات العملاء","clientAnalytics.client":"العميل","clientAnalytics.totalShipments":"إجمالي الشحنات","clientAnalytics.walletBalance":"رصيد المحفظة","clientAnalytics.partnerTier":"مستوى الشراكة","clientAnalytics.flatRate":"السعر الثابت","clientAnalytics.pendingPayouts":"المدفوعات المعلقة","clientAnalytics.actions":"الإجراءات","clientAnalytics.viewShipments":"عرض الشحنات","status.pending":"في الانتظار","status.assigned":"مسند","status.pickedUp":"تم الاستلام","status.inTransit":"في الطريق","status.outForDelivery":"خارج للتسليم","status.delivered":"تم التسليم","status.deliveryFailed":"فشل التسليم","status.returned":"مرتجع","payment.cod":"الدفع عند الاستلام","payment.transfer":"تحويل","payment.wallet":"المحفظة","priority.standard":"عادي","priority.urgent":"عاجل","priority.express":"سريع"}},av=me.createContext(null),bl=()=>{const e=me.useContext(av);if(!e)throw new Error("useLanguage must be used within a LanguageProvider");return e},rx=({children:e})=>{const[t,n]=me.useState(()=>nv("app-language","en"));me.useEffect(()=>{document.documentElement.setAttribute("dir","ltr"),document.documentElement.setAttribute("lang",t)},[t]);const r=l=>{n(l),rv("app-language",l)},o=l=>S6[t][l]||l;return a.jsx(av.Provider,{value:{language:t,setLanguage:r,t:o},children:e})},C6=({className:e="w-6 h-6"})=>a.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),Xi=({className:e="w-6 h-6"})=>a.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),Wi=({className:e="w-6 h-6"})=>a.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"})}),Hc=({className:e="w-6 h-6"})=>a.jsx("svg",{className:e,fill:"currentColor",viewBox:"0 0 256 256",children:a.jsx("path",{d:"M240,128a113.33,113.33,0,0,1-48.84,92.51,16,16,0,0,1-19.82-24.64,80.1,80.1,0,0,0-86.68,0A16,16,0,0,1,64.84,220.51,112,112,0,1,1,240,128ZM128,144a40,40,0,1,0-40-40A40,40,0,0,0,128,144Z"})}),ua=({className:e="w-6 h-6"})=>a.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),E6=({className:e="w-6 h-6"})=>a.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),sl=({className:e="w-6 h-6"})=>a.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),Tc=({className:e="w-6 h-6"})=>a.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),fl=({className:e="w-6 h-6"})=>a.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),T6=({className:e="w-5 h-5"})=>a.jsx("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})}),Ls=({className:e="w-6 h-6"})=>a.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),vu=({className:e="w-6 h-6"})=>a.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),_6=({className:e="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),Vc=({className:e="w-6 h-6"})=>a.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),Ms=({className:e="w-5 h-5"})=>a.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.536L16.732 3.732z"})}),vm=({className:e="w-6 h-6"})=>a.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),Yd=({className:e="w-5 h-5"})=>a.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),sv=({className:e="w-5 h-5"})=>a.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4v-3l1.258-1.258a6 6 0 015.742-10.485A6 6 0 0115 7z"})}),j6=({className:e="w-6 h-6"})=>a.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 11l3-3m0 0l3 3m-3-3v8m0-13a9 9 0 110 18 9 9 0 010-18z"})}),Ki=({className:e="w-6 h-6"})=>a.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),Rh=({className:e="w-6 h-6"})=>a.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 10h10a8 8 0 018 8v2M3 10l4-4m-4 4l4 4"})}),wm=({className:e="w-6 h-6"})=>a.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),Gg=({className:e="w-6 h-6"})=>a.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),ov=({className:e="w-6 h-6"})=>a.jsxs("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),ix=({className:e="w-6 h-6"})=>a.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),I6=({className:e="w-6 h-6"})=>a.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v1m6 11v1m-6-16v1m12 11v1M4 12H3m10 6H3m10-12H3m18 12h-1M4 20v-1m0-6V3m0 18v-1M20 4v1m0 12v1M4 4h1m15 15h1M4 8h1m15 7h1m-6-4h.01M12 12h.01M8 12h.01M12 16h.01M16 12h.01M16 16h.01M8 16h.01M12 8h.01M16 8h.01M8 8h.01"})}),lv=({className:e="w-6 h-6"})=>a.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),Nm=({className:e="w-6 h-6"})=>a.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),uu=({className:e="w-6 h-6"})=>a.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v.01M12 14v3m-3-3h6M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),cv=({className:e="w-6 h-6"})=>a.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),uv=({className:e="w-6 h-6"})=>a.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l4-4m0 0l4 4m-4-4v12"})}),du=({className:e="w-6 h-6"})=>a.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),dv=({className:e="w-6 h-6"})=>a.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}),D6=({className:e="w-6 h-6"})=>a.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})}),fv=({className:e="w-6 h-6"})=>a.jsxs("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),ax=({className:e="w-5 h-5"})=>a.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),R6=({className:e="w-6 h-6"})=>a.jsxs("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),ic=({className:e="w-6 h-6"})=>a.jsxs("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 12l-8 4-8-4"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 12v6a2 2 0 002 2h12a2 2 0 002-2v-6"})]}),Am=({className:e="w-6 h-6"})=>a.jsxs("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 7h.01M7 3h5a2 2 0 012 2v5a2 2 0 01-2 2H7a2 2 0 01-2-2V5a2 2 0 012-2z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 12l-4 4 4 4"})]}),O6=({className:e="w-6 h-6"})=>a.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 20.944a11.955 11.955 0 019-2.606 11.955 11.955 0 019 2.606 12.02 12.02 0 00-2.382-9.008z"})}),L6=({className:e="w-6 h-6"})=>a.jsxs("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2m-2-2a9 9 0 11-18 0 9 9 0 0118 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),Wg=({className:e="w-6 h-6"})=>a.jsxs("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm-3-7a9 9 0 01.121 17.804m-2.121-2.121a1.5 1.5 0 00-2.121 2.121M12 21a9 9 0 01-9-9h18a9 9 0 01-9 9z",transform:"rotate(-45 12 12)"}),a.jsx("path",{d:"M14 21L12 19l-2 2"}),a.jsx("path",{d:"M12 3v2"}),a.jsx("path",{d:"M5.636 5.636l1.414 1.414M18.364 5.636l-1.414 1.414"})]}),M6=({className:e="w-6 h-6"})=>a.jsx("svg",{className:e,fill:"currentColor",viewBox:"0 0 256 256",children:a.jsx("path",{d:"M128,80a48,48,0,1,0,48,48A48.05,48.05,0,0,0,128,80Zm0,80a32,32,0,1,1,32-32A32,32,0,0,1,128,160ZM232,128A8,8,0,0,1,224,136H200a8,8,0,0,1,0-16h24A8,8,0,0,1,232,128ZM128,24a8,8,0,0,1-8-8V8a8,8,0,0,1,16,0V16A8,8,0,0,1,128,24Zm-80,42.34A8,8,0,0,0,59.31,77.66l17-17a8,8,0,0,0-11.32-11.32l-17,17A8,8,0,0,0,48,66.34ZM183,183a8,8,0,0,0-11.31-11.31l-17,17a8,8,0,0,0,11.31,11.31l17-17A8,8,0,0,0,183,183ZM128,232a8,8,0,0,1,8,8v8a8,8,0,0,1-16,0v-8A8,8,0,0,1,128,232ZM56,128a8,8,0,0,1-8-8V96a8,8,0,0,1,16,0v24A8,8,0,0,1,56,128ZM197.66,48a8,8,0,0,0-11.32,0l-17,17a8,8,0,0,0,11.32,11.32l17-17A8,8,0,0,0,197.66,48ZM76.34,197.66,59.31,180.69a8,8,0,0,0-11.31,11.31l17,17a8,8,0,0,0,11.31-11.31Z"})}),k6=({className:e="w-6 h-6"})=>a.jsx("svg",{className:e,fill:"currentColor",viewBox:"0 0 256 256",children:a.jsx("path",{d:"M216.7,152.61A95.82,95.82,0,0,1,103.39,39.3a8,8,0,0,0-10.9-10.9,111.94,111.94,0,0,0,16.5,152.91A112,112,0,0,0,227.6,227.6a8,8,0,0,0-10.9-10.9A95.82,95.82,0,0,1,216.7,152.61Z"})}),P6=({className:e="w-6 h-6"})=>a.jsx("svg",{className:e,fill:"currentColor",viewBox:"0 0 256 256",children:a.jsx("path",{d:"M128,24C74.17,24,32,48.6,32,80v96c0,31.4,42.17,56,96,56s96-24.6,96-56V80C224,48.6,181.83,24,128,24Zm80,56c0,13.25-35.82,40-80,40S48,93.25,48,80s35.82-40,80-40S208,66.75,208,80ZM48,105.61c18.11,10.14,48.44,18.39,80,18.39s61.89-8.25,80-18.39V128c0,13.25-35.82,40-80,40S48,141.25,48,128Zm160,70.78c-18.11,10.14-48.44,18.39-80,18.39s-61.89-8.25-80-18.39V176c0,13.25,35.82,40,80,40s80-26.75,80-40Z"})}),F6=({toast:e})=>{const{removeToast:t}=Sn(),n={success:"bg-green-600",error:"bg-red-600",info:"bg-primary-600"},r={success:a.jsx(Ls,{className:"w-6 h-6 text-white"}),error:a.jsx(vu,{className:"w-6 h-6 text-white"}),info:a.jsx(_6,{className:"w-6 h-6 text-white"})};return me.useEffect(()=>{const o=e.duration||1e4,l=setTimeout(()=>{t(e.id)},o);return()=>clearTimeout(l)},[e.id,e.duration,t]),a.jsxs("div",{className:`flex items-center gap-4 text-white p-4 pr-6 rounded-xl shadow-2xl animate-fade-in-up ${n[e.type]} relative`,children:[r[e.type],a.jsx("p",{className:"font-medium flex-1",children:e.message}),a.jsx("button",{onClick:()=>t(e.id),className:"ml-2 hover:bg-white hover:bg-opacity-20 rounded-full p-1 transition-colors","aria-label":"Close notification",children:a.jsx(dv,{className:"w-4 h-4 text-white"})})]})},B6=()=>{const{toasts:e}=Sn();return a.jsx("div",{className:"fixed bottom-8 right-8 z-[100] space-y-3",children:e.map(t=>a.jsx(F6,{toast:t},t.id))})},U6=()=>{const{login:e,isLoading:t,theme:n}=Sn(),[r,o]=me.useState(""),[l,f]=me.useState(""),m=g=>{g.preventDefault(),e(r,l)};return a.jsx("div",{className:"min-h-screen w-full flex items-center justify-center p-4 bg-login-image",children:a.jsxs("div",{className:"w-full max-w-sm",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"inline-block p-4",children:a.jsx("img",{src:n==="dark"?"/shuhna-logo-main.png":"/shuhna-logo-app.png",alt:"Shuhna Express Logo",className:"w-72 h-72 object-contain"})}),a.jsx("h1",{className:"text-4xl font-bold tracking-tight text-foreground mt-4",children:"Shuhna Express"}),a.jsx("p",{className:"mt-2 text-muted-foreground",children:"Your world, delivered."})]}),a.jsxs("div",{className:"bg-card/60 dark:bg-card/80 backdrop-blur-md p-8 rounded-2xl border border-border shadow-2xl",children:[a.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Portal Login"}),a.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Enter your credentials to access your account."}),a.jsxs("form",{onSubmit:m,className:"mt-8 space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-muted-foreground mb-1",children:"Email Address"}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3",children:a.jsx(Nm,{className:"h-5 w-5 text-muted-foreground"})}),a.jsx("input",{id:"email",type:"email",value:r,onChange:g=>o(g.target.value),className:"w-full pl-10 pr-4 py-3 bg-background/60 border border-border rounded-lg text-foreground placeholder-muted-foreground focus:ring-2 focus:ring-primary/80 focus:border-primary transition",placeholder:"admin@shuhna.net",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-muted-foreground mb-1",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3",children:a.jsx(sv,{className:"h-5 w-5 text-muted-foreground"})}),a.jsx("input",{id:"password",type:"password",value:l,onChange:g=>f(g.target.value),className:"w-full pl-10 pr-4 py-3 bg-background/60 border border-border rounded-lg text-foreground placeholder-muted-foreground focus:ring-2 focus:ring-primary/80 focus:border-primary transition",placeholder:"••••••••",required:!0})]})]}),a.jsx("button",{type:"submit",disabled:t,className:"w-full flex justify-center bg-primary text-primary-foreground font-bold py-3 px-4 rounded-lg shadow-lg hover:bg-primary/90 focus:outline-none focus:ring-4 focus:ring-primary/50 transition duration-300 disabled:bg-primary/50 disabled:cursor-not-allowed",children:t?"Logging in...":"Login"})]})]})]})})},sx=[{nameKey:"nav.dashboard",icon:a.jsx(C6,{}),view:"dashboard",permission:Ut.VIEW_DASHBOARD},{nameKey:"nav.myShipments",icon:a.jsx(Xi,{}),view:"shipments",permission:Ut.VIEW_OWN_SHIPMENTS},{nameKey:"nav.createShipment",icon:a.jsx(fl,{}),view:"create",permission:Ut.CREATE_SHIPMENTS},{nameKey:"nav.myWallet",icon:a.jsx(ua,{}),view:"wallet",permission:Ut.VIEW_OWN_WALLET},{nameKey:"nav.myFinancials",icon:a.jsx(sl,{}),view:"financials",permission:Ut.VIEW_OWN_FINANCIALS},{nameKey:"nav.clientRevenue",icon:a.jsx(ix,{}),view:"client-revenue",permission:Ut.VIEW_CLIENT_REVENUE},{nameKey:"nav.myTasks",icon:a.jsx(Tc,{}),view:"tasks",permission:Ut.VIEW_COURIER_TASKS},{nameKey:"nav.completedOrders",icon:a.jsx(Ls,{}),view:"completed-orders",permission:Ut.VIEW_COURIER_COMPLETED_ORDERS},{nameKey:"nav.myEarnings",icon:a.jsx(uu,{}),view:"courier-financials",permission:Ut.VIEW_COURIER_EARNINGS},{nameKey:"nav.deliveredShipments",icon:a.jsx(Xi,{}),view:"delivered-shipments",permission:Ut.VIEW_DELIVERED_SHIPMENTS},{nameKey:"nav.couriersByZone",icon:a.jsx(ov,{}),view:"couriers-by-zone",permission:Ut.VIEW_COURIERS_BY_ZONE},{nameKey:"nav.myProfile",icon:a.jsx(Gg,{}),view:"profile",permission:Ut.VIEW_PROFILE},{nameKey:"nav.myAssets",icon:a.jsx(Am,{}),view:"my-assets",permission:Ut.VIEW_OWN_ASSETS},{nameKey:"nav.allShipments",icon:a.jsx(Xi,{}),view:"shipments",permission:Ut.VIEW_ALL_SHIPMENTS},{nameKey:"nav.packagingAssignment",icon:a.jsx(ic,{}),view:"packaging-and-assignment",permission:Ut.ASSIGN_SHIPMENTS},{nameKey:"nav.deliveryManagement",icon:a.jsx(wm,{}),view:"admin-delivery-management",permission:Ut.VIEW_ADMIN_DELIVERY_MANAGEMENT},{nameKey:"nav.userManagement",icon:a.jsx(Hc,{}),view:"users",permission:Ut.MANAGE_USERS},{nameKey:"nav.roleManagement",icon:a.jsx(fv,{}),view:"roles",permission:Ut.MANAGE_ROLES},{nameKey:"nav.partnerTiers",icon:a.jsx(Wg,{}),view:"partner-tier-management",permission:Ut.MANAGE_PARTNER_TIERS},{nameKey:"nav.inventory",icon:a.jsx(ic,{}),view:"inventory",permission:Ut.MANAGE_INVENTORY},{nameKey:"nav.assetManagement",icon:a.jsx(Am,{}),view:"asset-management",permission:Ut.MANAGE_ASSETS},{nameKey:"nav.supplierManagement",icon:a.jsx(wm,{}),view:"supplier-management",permission:Ut.MANAGE_SUPPLIERS},{nameKey:"nav.clientAnalytics",icon:a.jsx(ix,{}),view:"client-analytics",permission:Ut.VIEW_CLIENT_ANALYTICS},{nameKey:"nav.courierPerformance",icon:a.jsx(uu,{}),view:"courier-performance",permission:Ut.VIEW_COURIER_PERFORMANCE},{nameKey:"nav.financials",icon:a.jsx(sl,{}),view:"financials",permission:Ut.VIEW_ADMIN_FINANCIALS},{nameKey:"nav.adminFinancials",icon:a.jsx(sl,{}),view:"admin-financials",permission:Ut.VIEW_ADMIN_FINANCIALS},{nameKey:"nav.totalShipments",icon:a.jsx(Xi,{}),view:"total-shipments",permission:Ut.VIEW_TOTAL_SHIPMENTS_OVERVIEW},{nameKey:"nav.notificationsLog",icon:a.jsx(lv,{}),view:"notifications",permission:Ut.VIEW_NOTIFICATIONS_LOG}],z6=({activeView:e,setActiveView:t,isOpen:n,setIsOpen:r})=>{const{hasPermission:o,theme:l}=Sn(),{t:f}=bl(),m=sx.filter(x=>{if(x.view==="financials"&&o(Ut.VIEW_ADMIN_FINANCIALS)){const A=sx.find(N=>N.view==="admin-financials");if(A&&o(A.permission))return!1}return x.view==="shipments"&&x.permission===Ut.VIEW_OWN_SHIPMENTS&&o(Ut.VIEW_ALL_SHIPMENTS)?!1:o(x.permission)}),g=x=>{t(x),r(!1)};return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:`fixed inset-0 bg-black/60 z-30 lg:hidden transition-opacity ${n?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:()=>r(!1)}),a.jsxs("aside",{className:`fixed inset-y-0 left-0 z-40 w-64 bg-card text-card-foreground flex flex-col flex-shrink-0 transition-transform duration-300 ease-in-out
                ${n?"translate-x-0":"-translate-x-full"}
                lg:relative lg:translate-x-0 lg:w-64`,children:[a.jsxs("div",{className:"p-4 flex items-center justify-between border-b border-border",children:[a.jsx("button",{onClick:()=>window.location.href="/",className:"flex items-center gap-3 hover:opacity-80 transition-opacity duration-300",children:a.jsx("div",{className:"p-2",children:a.jsx("img",{src:l==="dark"?"/shuhna-logo-main.png":"/shuhna-logo-app.png",alt:"Shuhna Express Logo",className:"w-15 h-15 object-contain"})})}),a.jsx("button",{onClick:()=>r(!1),className:"p-1 text-muted-foreground hover:text-foreground lg:hidden",children:a.jsx(dv,{className:"w-6 h-6"})})]}),a.jsx("nav",{className:"flex-1 p-4 space-y-1.5 overflow-y-auto",children:m.map(x=>a.jsxs("button",{onClick:()=>g(x.view),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-md text-left transition-all duration-200 group relative ${e===x.view?"bg-primary/10 text-primary font-semibold":"hover:bg-accent hover:text-accent-foreground"}`,children:[a.jsx("div",{className:`absolute left-0 top-0 h-full w-1 rounded-r-full transition-all duration-200 ${e===x.view?"bg-primary":"bg-transparent"}`}),a.jsx("div",{className:"w-6 h-6",children:x.icon}),a.jsx("span",{className:"text-sm font-medium",children:f(x.nameKey)})]},x.view+x.nameKey))})]})]})},H6=({onLogout:e,user:t,onNavigate:n,onMenuClick:r})=>{const{inAppNotifications:o,markNotificationAsRead:l,theme:f,setTheme:m}=Sn(),{language:g,setLanguage:x,t:A}=bl(),[N,T]=me.useState(!1),v=me.useRef(null),O=o.filter(E=>E.userId===t.id).sort((E,j)=>new Date(j.timestamp).getTime()-new Date(E.timestamp).getTime()),D=O.filter(E=>!E.isRead).length;me.useEffect(()=>{const E=j=>{v.current&&!v.current.contains(j.target)&&T(!1)};return document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[]);const P=(E,j)=>{if(l(E),j){const V=j.startsWith("/")?j.substring(1):j;n(V)}T(!1)},C=Array.isArray(t.roles)?t.roles:[];return a.jsxs("header",{className:"bg-card/80 backdrop-blur-sm border-b border-border p-4 flex justify-between items-center z-20 sticky top-0",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:r,className:"p-1 -ml-1 text-foreground lg:hidden",children:a.jsx(D6,{className:"w-6 h-6"})}),a.jsxs("div",{className:"text-lg font-bold text-foreground",children:[C.join(" & ")," Portal"]})]}),a.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[a.jsx("button",{onClick:()=>m(f==="dark"?"light":"dark"),className:"p-2 rounded-full text-foreground hover:bg-accent transition","aria-label":"Toggle theme",children:f==="dark"?a.jsx(M6,{className:"w-6 h-6 text-yellow-400"}):a.jsx(k6,{className:"w-6 h-6"})}),a.jsx("button",{onClick:()=>x(g==="en"?"ar":"en"),className:"p-2 rounded-full text-foreground hover:bg-accent transition text-sm font-medium","aria-label":"Toggle language",children:g==="en"?"ع":"EN"}),a.jsxs("div",{className:"relative",ref:v,children:[a.jsxs("button",{onClick:()=>T(E=>!E),className:"p-2 rounded-full hover:bg-accent transition relative",children:[a.jsx(lv,{className:"w-6 h-6 text-foreground"}),D>0&&a.jsxs("span",{className:"absolute top-0 right-0 flex h-3 w-3",children:[a.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),a.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-red-500"})]})]}),N&&a.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-card rounded-lg shadow-xl border border-border overflow-hidden",children:[a.jsx("div",{className:"p-3 font-semibold text-foreground border-b border-border",children:"Notifications"}),a.jsx("div",{className:"max-h-96 overflow-y-auto",children:O.length>0?O.map(E=>a.jsx("button",{onClick:()=>P(E.id,E.link),className:`w-full text-left p-3 border-b border-border last:border-b-0 ${E.isRead?"hover:bg-accent":"bg-primary/10"}`,children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:`mt-1 w-2 h-2 rounded-full flex-shrink-0 ${E.isRead?"bg-transparent":"bg-primary"}`}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm text-foreground",children:E.message}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(E.timestamp).toLocaleString()})]})]})},E.id)):a.jsx("p",{className:"text-sm text-muted-foreground p-4 text-center",children:"No notifications yet."})})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"text-right hidden sm:block",children:[a.jsx("p",{className:"font-semibold text-foreground",children:t.name}),a.jsx("p",{className:"text-xs text-muted-foreground",children:t.email})]}),a.jsx("button",{onClick:e,title:"Logout",className:"p-2 rounded-full hover:bg-red-100/50 dark:hover:bg-red-900/20 transition",children:a.jsx(E6,{className:"w-6 h-6 text-red-500"})})]})]})]})},Rt=({title:e,value:t,icon:n,color:r,subtitle:o,onClick:l})=>a.jsxs("div",{className:`card p-5 flex items-center justify-between border-t-4 ${l?"cursor-pointer hover:shadow-lg hover:-translate-y-1 transition-all duration-300":""}`,style:{borderTopColor:r},onClick:l,children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:e}),a.jsx("p",{className:"text-3xl font-bold text-foreground dark:text-primary mt-1",children:t}),o&&a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:o})]}),a.jsx("div",{className:"p-4 rounded-full",style:{color:r,backgroundColor:`${r}1A`},children:$l.cloneElement(n,{className:"w-8 h-8"})})]}),ox=({setActiveView:e})=>{const{currentUser:t,shipments:n,users:r,courierStats:o,hasPermission:l,setShipmentFilter:f,resetDatabaseComplete:m,addToast:g}=Sn(),{t:x}=bl(),[A,N]=$l.useState(!1),[T,v]=$l.useState(!1);if(!t)return null;const O=n.filter(B=>B.clientId===t.id),D=(B,R="total-shipments")=>{f(()=>B),e(R)},P=async()=>{if(confirm(`⚠️ WARNING: This will permanently delete ALL data except Admin, Test Courier, and Test Client!

This action cannot be undone. Are you absolutely sure?`)){v(!0);try{await m()&&e("dashboard")}catch(B){console.error("Reset failed:",B)}finally{v(!1),N(!1)}}},C=()=>{const B=O.filter(k=>k.status===tt.DELIVERED),R=O.filter(k=>![tt.DELIVERED,tt.DELIVERY_FAILED].includes(k.status)),M=O.filter(k=>k.status===tt.OUT_FOR_DELIVERY),Z=B.reduce((k,Q)=>{const J=Number(Q.packageValue)||0,G=Number(Q.clientFlatRateFee)||0;return k+Math.max(0,J-G)},0),F=B.reduce((k,Q)=>{const J=Number(Q.packageValue)||0;return k+J},0);return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(Rt,{title:x("shipments.title"),value:O.length,icon:a.jsx(Xi,{}),color:"#3b82f6",onClick:()=>e("shipments")}),a.jsx(Rt,{title:x("status.pending"),value:R.length,icon:a.jsx(du,{}),color:"#f59e0b",onClick:()=>D(k=>k.clientId===t.id&&![tt.DELIVERED,tt.DELIVERY_FAILED].includes(k.status),"shipments")}),a.jsx(Rt,{title:x("status.outForDelivery"),value:M.length,icon:a.jsx(Wi,{}),color:"#8b5cf6",onClick:()=>D(k=>k.clientId===t.id&&k.status===tt.OUT_FOR_DELIVERY,"shipments")}),a.jsx(Rt,{title:x("completedOrders.title"),value:B.length,icon:a.jsx(Ls,{}),color:"#10b981",onClick:()=>D(k=>k.clientId===t.id&&k.status===tt.DELIVERED,"shipments")})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[a.jsx(Rt,{title:x("wallet.balance"),value:`${(Number(t.walletBalance)||0).toFixed(2)} EGP`,icon:a.jsx(ua,{}),color:"#22c55e",onClick:()=>e("wallet")}),a.jsx(Rt,{title:x("dashboard.totalRevenue"),value:`${(Number(F)||0).toFixed(2)} EGP`,icon:a.jsx(uu,{}),color:"#3b82f6",onClick:()=>e("wallet")}),a.jsx(Rt,{title:x("clientRevenue.totalEarnings"),value:`${(Number(Z)||0).toFixed(2)} EGP`,icon:a.jsx(sl,{}),color:"#16a34a",onClick:()=>e("wallet")})]})]})},E=()=>{const B=o.find(F=>F.courierId===t.id),R=n.filter(F=>F.courierId===t.id&&![tt.DELIVERED,tt.DELIVERY_FAILED].includes(F.status)),M=R.filter(F=>F.paymentMethod===Rn.COD).reduce((F,k)=>F+k.price,0),Z=n.filter(F=>F.courierId===t.id&&F.status===tt.DELIVERED);return a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(Rt,{title:"Cash to Collect",value:`${(Number(M)||0).toFixed(2)} EGP`,icon:a.jsx(ua,{}),color:"#f97316",onClick:()=>e("tasks")}),a.jsx(Rt,{title:"Current Balance",value:`${(Number(B==null?void 0:B.currentBalance)||0).toFixed(2)} EGP`,icon:a.jsx(uu,{}),color:"#16a34a",onClick:()=>e("courier-financials")}),a.jsx(Rt,{title:"Pending Deliveries",value:R.length,icon:a.jsx(Wi,{}),color:"#06b6d4",onClick:()=>e("tasks")}),a.jsx(Rt,{title:"Total Deliveries",value:Z.length,icon:a.jsx(Ls,{}),color:"#8b5cf6",onClick:()=>e("completed-orders")})]})},j=()=>{const B=M=>{if([tt.DELIVERED,tt.DELIVERY_FAILED].includes(M.status))return!1;const Z=new Date(Date.now()-2.5*24*60*60*1e3);return new Date(M.creationDate)<Z},R=n.filter(B);return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[a.jsx(Rt,{title:"Total Shipments",value:n.length,icon:a.jsx(Xi,{}),color:"#3b82f6",onClick:()=>e("total-shipments")}),a.jsx(Rt,{title:"Total Clients",value:r.filter(M=>(M.roles||[]).includes(zt.CLIENT)).length,icon:a.jsx(Hc,{}),color:"#8b5cf6",onClick:()=>e("client-analytics")}),a.jsx(Rt,{title:"Total Couriers",value:r.filter(M=>(M.roles||[]).includes(zt.COURIER)).length,icon:a.jsx(Wi,{}),color:"#f97316",onClick:()=>e("courier-performance")})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(Rt,{title:"Processing",value:n.filter(M=>[tt.WAITING_FOR_PACKAGING,tt.PACKAGED_AND_WAITING_FOR_ASSIGNMENT].includes(M.status)).length,icon:a.jsx(Tc,{}),color:"#f59e0b",onClick:()=>e("packaging-and-assignment")}),a.jsx(Rt,{title:"Out for Delivery",value:n.filter(M=>M.status===tt.OUT_FOR_DELIVERY).length,icon:a.jsx(Wi,{}),color:"#06b6d4",onClick:()=>D(M=>M.status===tt.OUT_FOR_DELIVERY)}),a.jsx(Rt,{title:"Delivered Today",value:n.filter(M=>M.status===tt.DELIVERED&&new Date(M.deliveryDate||"").toDateString()===new Date().toDateString()).length,icon:a.jsx(Xi,{}),color:"#16a34a",onClick:()=>D(M=>M.status===tt.DELIVERED&&new Date(M.deliveryDate||"").toDateString()===new Date().toDateString())}),a.jsx(Rt,{title:"Overdue",value:R.length,icon:a.jsx(du,{}),color:"#ef4444",onClick:()=>D(B)})]}),a.jsxs("div",{className:"card",children:[a.jsx("h2",{className:"text-xl font-bold text-foreground mb-4",children:"Quick Actions"}),a.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-4",children:[a.jsxs("button",{onClick:()=>e("users"),className:"p-4 bg-secondary hover:bg-accent rounded-lg border border-border transition-colors text-center group",children:[a.jsx(Hc,{className:"w-8 h-8 text-primary mx-auto mb-2 group-hover:scale-110 transition-transform"}),a.jsx("span",{className:"text-sm font-semibold text-foreground",children:"Manage Users"})]}),a.jsxs("button",{onClick:()=>e("courier-performance"),className:"p-4 bg-secondary hover:bg-accent rounded-lg border border-border transition-colors text-center group",children:[a.jsx(Wi,{className:"w-8 h-8 text-primary mx-auto mb-2 group-hover:scale-110 transition-transform"}),a.jsx("span",{className:"text-sm font-semibold text-foreground",children:"Courier Performance"})]}),a.jsxs("button",{onClick:()=>e("admin-financials"),className:"p-4 bg-secondary hover:bg-accent rounded-lg border border-border transition-colors text-center group",children:[a.jsx(sl,{className:"w-8 h-8 text-primary mx-auto mb-2 group-hover:scale-110 transition-transform"}),a.jsx("span",{className:"text-sm font-semibold text-foreground",children:"Financials"})]}),a.jsxs("button",{onClick:()=>e("notifications"),className:"p-4 bg-secondary hover:bg-accent rounded-lg border border-border transition-colors text-center group",children:[a.jsx(Tc,{className:"w-8 h-8 text-primary mx-auto mb-2 group-hover:scale-110 transition-transform"}),a.jsx("span",{className:"text-sm font-semibold text-foreground",children:"Notifications Log"})]}),a.jsxs("button",{onClick:P,disabled:T,className:"p-4 bg-red-50 hover:bg-red-100 border-red-200 hover:border-red-300 rounded-lg border transition-colors text-center group disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(P6,{className:`w-8 h-8 text-red-600 mx-auto mb-2 group-hover:scale-110 transition-transform ${T?"animate-spin":""}`}),a.jsx("span",{className:"text-sm font-semibold text-red-700",children:T?"Resetting...":"Reset Database"})]})]})]})]})},V=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[a.jsx(Rt,{title:"Total Shipments",value:n.length,icon:a.jsx(Xi,{}),color:"#3b82f6",onClick:()=>e("total-shipments")}),a.jsx(Rt,{title:"Total Clients",value:r.filter(B=>(B.roles||[]).includes(zt.CLIENT)).length,icon:a.jsx(Hc,{}),color:"#8b5cf6",onClick:()=>e("client-analytics")}),a.jsx(Rt,{title:"Total Couriers",value:r.filter(B=>(B.roles||[]).includes(zt.COURIER)).length,icon:a.jsx(Wi,{}),color:"#f97316",onClick:()=>e("courier-performance")})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[a.jsx(Rt,{title:"Processing",value:n.filter(B=>[tt.WAITING_FOR_PACKAGING,tt.PACKAGED_AND_WAITING_FOR_ASSIGNMENT].includes(B.status)).length,icon:a.jsx(Tc,{}),color:"#f59e0b",onClick:()=>e("packaging-and-assignment")}),a.jsx(Rt,{title:"Out for Delivery",value:n.filter(B=>B.status===tt.OUT_FOR_DELIVERY).length,icon:a.jsx(Wi,{}),color:"#06b6d4",onClick:()=>D(B=>B.status===tt.OUT_FOR_DELIVERY)}),a.jsx(Rt,{title:"Delivered Today",value:n.filter(B=>B.status===tt.DELIVERED&&new Date(B.deliveryDate||"").toDateString()===new Date().toDateString()).length,icon:a.jsx(Xi,{}),color:"#16a34a",onClick:()=>D(B=>B.status===tt.DELIVERED&&new Date(B.deliveryDate||"").toDateString()===new Date().toDateString())})]}),a.jsxs("div",{className:"card",children:[a.jsx("h2",{className:"text-xl font-bold text-foreground mb-4",children:"Quick Actions"}),a.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsxs("button",{onClick:()=>e("users"),className:"p-4 bg-secondary hover:bg-accent rounded-lg border border-border transition-colors text-center group",children:[a.jsx(Hc,{className:"w-8 h-8 text-primary mx-auto mb-2 group-hover:scale-110 transition-transform"}),a.jsx("span",{className:"text-sm font-semibold text-foreground",children:"Manage Users"})]}),a.jsxs("button",{onClick:()=>e("courier-performance"),className:"p-4 bg-secondary hover:bg-accent rounded-lg border border-border transition-colors text-center group",children:[a.jsx(Wi,{className:"w-8 h-8 text-primary mx-auto mb-2 group-hover:scale-110 transition-transform"}),a.jsx("span",{className:"text-sm font-semibold text-foreground",children:"Courier Performance"})]}),a.jsxs("button",{onClick:()=>e("client-analytics"),className:"p-4 bg-secondary hover:bg-accent rounded-lg border border-border transition-colors text-center group",children:[a.jsx(sl,{className:"w-8 h-8 text-primary mx-auto mb-2 group-hover:scale-110 transition-transform"}),a.jsx("span",{className:"text-sm font-semibold text-foreground",children:"Client Analytics"})]}),a.jsxs("button",{onClick:()=>e("notifications"),className:"p-4 bg-secondary hover:bg-accent rounded-lg border border-border transition-colors text-center group",children:[a.jsx(Tc,{className:"w-8 h-8 text-primary mx-auto mb-2 group-hover:scale-110 transition-transform"}),a.jsx("span",{className:"text-sm font-semibold text-foreground",children:"Notifications Log"})]})]})]})]}),W=()=>{const B=n.filter(M=>M.status===tt.PACKAGED_AND_WAITING_FOR_ASSIGNMENT),R=n.filter(M=>M.status===tt.OUT_FOR_DELIVERY);return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[a.jsx(Rt,{title:"Ready for Assignment",value:B.length,icon:a.jsx(Xi,{}),color:"#8b5cf6",onClick:()=>e("packaging-and-assignment")}),a.jsx(Rt,{title:"Total Out for Delivery",value:R.length,icon:a.jsx(Wi,{}),color:"#06b6d4",onClick:()=>D(M=>M.status===tt.OUT_FOR_DELIVERY)}),a.jsx(Rt,{title:"Total Shipments",value:n.length,icon:a.jsx(Tc,{}),color:"#3b82f6",onClick:()=>e("total-shipments")})]}),a.jsxs("div",{className:"card",children:[a.jsx("h2",{className:"text-xl font-bold text-foreground mb-4",children:"Quick Actions"}),a.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsxs("button",{onClick:()=>e("packaging-and-assignment"),className:"p-4 bg-secondary hover:bg-accent rounded-lg border border-border transition-colors text-center group",children:[a.jsx(ic,{className:"w-8 h-8 text-primary mx-auto mb-2 group-hover:scale-110 transition-transform"}),a.jsx("span",{className:"text-sm font-semibold text-foreground",children:"Assign Shipments"})]}),a.jsxs("button",{onClick:()=>e("total-shipments"),className:"p-4 bg-secondary hover:bg-accent rounded-lg border border-border transition-colors text-center group",children:[a.jsx(Xi,{className:"w-8 h-8 text-primary mx-auto mb-2 group-hover:scale-110 transition-transform"}),a.jsx("span",{className:"text-sm font-semibold text-foreground",children:"View All Shipments"})]}),a.jsxs("button",{onClick:()=>e("inventory"),className:"p-4 bg-secondary hover:bg-accent rounded-lg border border-border transition-colors text-center group",children:[a.jsx(ic,{className:"w-8 h-8 text-primary mx-auto mb-2 group-hover:scale-110 transition-transform"}),a.jsx("span",{className:"text-sm font-semibold text-foreground",children:"Manage Inventory"})]})]})]})]})},ie=Array.isArray(t.roles)?t.roles:[];return ie.includes(zt.ADMIN)?j():ie.includes(zt.SUPER_USER)?V():ie.includes(zt.ASSIGNING_USER)?W():ie.includes(zt.COURIER)?E():ie.includes(zt.CLIENT)?C():a.jsxs("div",{className:"card p-6",children:[a.jsxs("h1",{className:"text-2xl font-bold",children:["Welcome, ",t.name]}),a.jsx("p",{children:"Your dashboard is ready."})]})},V6="modulepreload",q6=function(e){return"/"+e},lx={},Sm=function(t,n,r){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),m=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));o=Promise.allSettled(n.map(g=>{if(g=q6(g),g in lx)return;lx[g]=!0;const x=g.endsWith(".css"),A=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${A}`))return;const N=document.createElement("link");if(N.rel=x?"stylesheet":V6,x||(N.as="script"),N.crossOrigin="",N.href=g,m&&N.setAttribute("nonce",m),document.head.appendChild(N),x)return new Promise((T,v)=>{N.addEventListener("load",T),N.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${g}`)))})}))}function l(f){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=f,window.dispatchEvent(m),!m.defaultPrevented)throw f}return o.then(f=>{for(const m of f||[])m.status==="rejected"&&l(m.reason);return t().catch(l)})};function Wn(e){"@babel/helpers - typeof";return Wn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wn(e)}var Fi=Uint8Array,_a=Uint16Array,Yg=Int32Array,i0=new Fi([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),a0=new Fi([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Cm=new Fi([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),hv=function(e,t){for(var n=new _a(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];for(var o=new Yg(n[30]),r=1;r<30;++r)for(var l=n[r];l<n[r+1];++l)o[l]=l-n[r]<<5|r;return{b:n,r:o}},mv=hv(i0,2),gv=mv.b,Em=mv.r;gv[28]=258,Em[258]=28;var pv=hv(a0,0),G6=pv.b,cx=pv.r,Tm=new _a(32768);for(var ur=0;ur<32768;++ur){var Lo=(ur&43690)>>1|(ur&21845)<<1;Lo=(Lo&52428)>>2|(Lo&13107)<<2,Lo=(Lo&61680)>>4|(Lo&3855)<<4,Tm[ur]=((Lo&65280)>>8|(Lo&255)<<8)>>1}var Rs=function(e,t,n){for(var r=e.length,o=0,l=new _a(t);o<r;++o)e[o]&&++l[e[o]-1];var f=new _a(t);for(o=1;o<t;++o)f[o]=f[o-1]+l[o-1]<<1;var m;if(n){m=new _a(1<<t);var g=15-t;for(o=0;o<r;++o)if(e[o])for(var x=o<<4|e[o],A=t-e[o],N=f[e[o]-1]++<<A,T=N|(1<<A)-1;N<=T;++N)m[Tm[N]>>g]=x}else for(m=new _a(r),o=0;o<r;++o)e[o]&&(m[o]=Tm[f[e[o]-1]++]>>15-e[o]);return m},hl=new Fi(288);for(var ur=0;ur<144;++ur)hl[ur]=8;for(var ur=144;ur<256;++ur)hl[ur]=9;for(var ur=256;ur<280;++ur)hl[ur]=7;for(var ur=280;ur<288;++ur)hl[ur]=8;var Td=new Fi(32);for(var ur=0;ur<32;++ur)Td[ur]=5;var W6=Rs(hl,9,0),Y6=Rs(hl,9,1),X6=Rs(Td,5,0),Z6=Rs(Td,5,1),l1=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},is=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(t&7)&n},c1=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(t&7)},Xg=function(e){return(e+7)/8|0},xv=function(e,t,n){return(n==null||n>e.length)&&(n=e.length),new Fi(e.subarray(t,n))},Q6=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ss=function(e,t,n){var r=new Error(t||Q6[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,ss),!n)throw r;return r},K6=function(e,t,n,r){var o=e.length,l=0;if(!o||t.f&&!t.l)return n||new Fi(0);var f=!n,m=f||t.i!=2,g=t.i;f&&(n=new Fi(o*3));var x=function(_e){var Qe=n.length;if(_e>Qe){var Be=new Fi(Math.max(Qe*2,_e));Be.set(n),n=Be}},A=t.f||0,N=t.p||0,T=t.b||0,v=t.l,O=t.d,D=t.m,P=t.n,C=o*8;do{if(!v){A=is(e,N,1);var E=is(e,N+1,3);if(N+=3,E)if(E==1)v=Y6,O=Z6,D=9,P=5;else if(E==2){var ie=is(e,N,31)+257,B=is(e,N+10,15)+4,R=ie+is(e,N+5,31)+1;N+=14;for(var M=new Fi(R),Z=new Fi(19),F=0;F<B;++F)Z[Cm[F]]=is(e,N+F*3,7);N+=B*3;for(var k=l1(Z),Q=(1<<k)-1,J=Rs(Z,k,1),F=0;F<R;){var G=J[is(e,N,Q)];N+=G&15;var j=G>>4;if(j<16)M[F++]=j;else{var Y=0,z=0;for(j==16?(z=3+is(e,N,3),N+=2,Y=M[F-1]):j==17?(z=3+is(e,N,7),N+=3):j==18&&(z=11+is(e,N,127),N+=7);z--;)M[F++]=Y}}var X=M.subarray(0,ie),te=M.subarray(ie);D=l1(X),P=l1(te),v=Rs(X,D,1),O=Rs(te,P,1)}else ss(1);else{var j=Xg(N)+4,V=e[j-4]|e[j-3]<<8,W=j+V;if(W>o){g&&ss(0);break}m&&x(T+V),n.set(e.subarray(j,W),T),t.b=T+=V,t.p=N=W*8,t.f=A;continue}if(N>C){g&&ss(0);break}}m&&x(T+131072);for(var ge=(1<<D)-1,ue=(1<<P)-1,L=N;;L=N){var Y=v[c1(e,N)&ge],q=Y>>4;if(N+=Y&15,N>C){g&&ss(0);break}if(Y||ss(2),q<256)n[T++]=q;else if(q==256){L=N,v=null;break}else{var ee=q-254;if(q>264){var F=q-257,fe=i0[F];ee=is(e,N,(1<<fe)-1)+gv[F],N+=fe}var ae=O[c1(e,N)&ue],Ee=ae>>4;ae||ss(3),N+=ae&15;var te=G6[Ee];if(Ee>3){var fe=a0[Ee];te+=c1(e,N)&(1<<fe)-1,N+=fe}if(N>C){g&&ss(0);break}m&&x(T+131072);var we=T+ee;if(T<te){var xe=l-te,Me=Math.min(te,we);for(xe+T<0&&ss(3);T<Me;++T)n[T]=r[xe+T]}for(;T<we;++T)n[T]=n[T-te]}}t.l=v,t.p=L,t.b=T,t.f=A,v&&(A=1,t.m=D,t.d=O,t.n=P)}while(!A);return T!=n.length&&f?xv(n,0,T):n.subarray(0,T)},$s=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8},Bu=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8,e[r+2]|=n>>16},u1=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var o=n.length,l=n.slice();if(!o)return{t:yv,l:0};if(o==1){var f=new Fi(n[0].s+1);return f[n[0].s]=1,{t:f,l:1}}n.sort(function(W,ie){return W.f-ie.f}),n.push({s:-1,f:25001});var m=n[0],g=n[1],x=0,A=1,N=2;for(n[0]={s:-1,f:m.f+g.f,l:m,r:g};A!=o-1;)m=n[n[x].f<n[N].f?x++:N++],g=n[x!=A&&n[x].f<n[N].f?x++:N++],n[A++]={s:-1,f:m.f+g.f,l:m,r:g};for(var T=l[0].s,r=1;r<o;++r)l[r].s>T&&(T=l[r].s);var v=new _a(T+1),O=_m(n[A-1],v,0);if(O>t){var r=0,D=0,P=O-t,C=1<<P;for(l.sort(function(ie,B){return v[B.s]-v[ie.s]||ie.f-B.f});r<o;++r){var E=l[r].s;if(v[E]>t)D+=C-(1<<O-v[E]),v[E]=t;else break}for(D>>=P;D>0;){var j=l[r].s;v[j]<t?D-=1<<t-v[j]++-1:++r}for(;r>=0&&D;--r){var V=l[r].s;v[V]==t&&(--v[V],++D)}O=t}return{t:new Fi(v),l:O}},_m=function(e,t,n){return e.s==-1?Math.max(_m(e.l,t,n+1),_m(e.r,t,n+1)):t[e.s]=n},ux=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new _a(++t),r=0,o=e[0],l=1,f=function(g){n[r++]=g},m=1;m<=t;++m)if(e[m]==o&&m!=t)++l;else{if(!o&&l>2){for(;l>138;l-=138)f(32754);l>2&&(f(l>10?l-11<<5|28690:l-3<<5|12305),l=0)}else if(l>3){for(f(o),--l;l>6;l-=6)f(8304);l>2&&(f(l-3<<5|8208),l=0)}for(;l--;)f(o);l=1,o=e[m]}return{c:n.subarray(0,r),n:t}},Uu=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},bv=function(e,t,n){var r=n.length,o=Xg(t+2);e[o]=r&255,e[o+1]=r>>8,e[o+2]=e[o]^255,e[o+3]=e[o+1]^255;for(var l=0;l<r;++l)e[o+l+4]=n[l];return(o+4+r)*8},dx=function(e,t,n,r,o,l,f,m,g,x,A){$s(t,A++,n),++o[256];for(var N=u1(o,15),T=N.t,v=N.l,O=u1(l,15),D=O.t,P=O.l,C=ux(T),E=C.c,j=C.n,V=ux(D),W=V.c,ie=V.n,B=new _a(19),R=0;R<E.length;++R)++B[E[R]&31];for(var R=0;R<W.length;++R)++B[W[R]&31];for(var M=u1(B,7),Z=M.t,F=M.l,k=19;k>4&&!Z[Cm[k-1]];--k);var Q=x+5<<3,J=Uu(o,hl)+Uu(l,Td)+f,G=Uu(o,T)+Uu(l,D)+f+14+3*k+Uu(B,Z)+2*B[16]+3*B[17]+7*B[18];if(g>=0&&Q<=J&&Q<=G)return bv(t,A,e.subarray(g,g+x));var Y,z,X,te;if($s(t,A,1+(G<J)),A+=2,G<J){Y=Rs(T,v,0),z=T,X=Rs(D,P,0),te=D;var ge=Rs(Z,F,0);$s(t,A,j-257),$s(t,A+5,ie-1),$s(t,A+10,k-4),A+=14;for(var R=0;R<k;++R)$s(t,A+3*R,Z[Cm[R]]);A+=3*k;for(var ue=[E,W],L=0;L<2;++L)for(var q=ue[L],R=0;R<q.length;++R){var ee=q[R]&31;$s(t,A,ge[ee]),A+=Z[ee],ee>15&&($s(t,A,q[R]>>5&127),A+=q[R]>>12)}}else Y=W6,z=hl,X=X6,te=Td;for(var R=0;R<m;++R){var fe=r[R];if(fe>255){var ee=fe>>18&31;Bu(t,A,Y[ee+257]),A+=z[ee+257],ee>7&&($s(t,A,fe>>23&31),A+=i0[ee]);var ae=fe&31;Bu(t,A,X[ae]),A+=te[ae],ae>3&&(Bu(t,A,fe>>5&8191),A+=a0[ae])}else Bu(t,A,Y[fe]),A+=z[fe]}return Bu(t,A,Y[256]),A+z[256]},J6=new Yg([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),yv=new Fi(0),$6=function(e,t,n,r,o,l){var f=l.z||e.length,m=new Fi(r+f+5*(1+Math.ceil(f/7e3))+o),g=m.subarray(r,m.length-o),x=l.l,A=(l.r||0)&7;if(t){A&&(g[0]=l.r>>3);for(var N=J6[t-1],T=N>>13,v=N&8191,O=(1<<n)-1,D=l.p||new _a(32768),P=l.h||new _a(O+1),C=Math.ceil(n/3),E=2*C,j=function(ft){return(e[ft]^e[ft+1]<<C^e[ft+2]<<E)&O},V=new Yg(25e3),W=new _a(288),ie=new _a(32),B=0,R=0,M=l.i||0,Z=0,F=l.w||0,k=0;M+2<f;++M){var Q=j(M),J=M&32767,G=P[Q];if(D[J]=G,P[Q]=J,F<=M){var Y=f-M;if((B>7e3||Z>24576)&&(Y>423||!x)){A=dx(e,g,0,V,W,ie,R,Z,k,M-k,A),Z=B=R=0,k=M;for(var z=0;z<286;++z)W[z]=0;for(var z=0;z<30;++z)ie[z]=0}var X=2,te=0,ge=v,ue=J-G&32767;if(Y>2&&Q==j(M-ue))for(var L=Math.min(T,Y)-1,q=Math.min(32767,M),ee=Math.min(258,Y);ue<=q&&--ge&&J!=G;){if(e[M+X]==e[M+X-ue]){for(var fe=0;fe<ee&&e[M+fe]==e[M+fe-ue];++fe);if(fe>X){if(X=fe,te=ue,fe>L)break;for(var ae=Math.min(ue,fe-2),Ee=0,z=0;z<ae;++z){var we=M-ue+z&32767,xe=D[we],Me=we-xe&32767;Me>Ee&&(Ee=Me,G=we)}}}J=G,G=D[J],ue+=J-G&32767}if(te){V[Z++]=268435456|Em[X]<<18|cx[te];var _e=Em[X]&31,Qe=cx[te]&31;R+=i0[_e]+a0[Qe],++W[257+_e],++ie[Qe],F=M+X,++B}else V[Z++]=e[M],++W[e[M]]}}for(M=Math.max(M,F);M<f;++M)V[Z++]=e[M],++W[e[M]];A=dx(e,g,x,V,W,ie,R,Z,k,M-k,A),x||(l.r=A&7|g[A/8|0]<<3,A-=7,l.h=P,l.p=D,l.i=M,l.w=F)}else{for(var M=l.w||0;M<f+x;M+=65535){var Be=M+65535;Be>=f&&(g[A/8|0]=x,Be=f),A=bv(g,A+1,e.subarray(M,Be))}l.i=f}return xv(m,0,r+Xg(A)+o)},vv=function(){var e=1,t=0;return{p:function(n){for(var r=e,o=t,l=n.length|0,f=0;f!=l;){for(var m=Math.min(f+2655,l);f<m;++f)o+=r+=n[f];r=(r&65535)+15*(r>>16),o=(o&65535)+15*(o>>16)}e=r,t=o},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},eA=function(e,t,n,r,o){if(!o&&(o={l:1},t.dictionary)){var l=t.dictionary.subarray(-32768),f=new Fi(l.length+e.length);f.set(l),f.set(e,l.length),e=f,o.w=l.length}return $6(e,t.level==null?6:t.level,t.mem==null?o.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,n,r,o)},wv=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},tA=function(e,t){var n=t.level,r=n==0?0:n<6?1:n==9?3:2;if(e[0]=120,e[1]=r<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var o=vv();o.p(t.dictionary),wv(e,2,o.d())}},nA=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&ss(6,"invalid zlib data"),(e[1]>>5&1)==1&&ss(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function jm(e,t){t||(t={});var n=vv();n.p(e);var r=eA(e,t,t.dictionary?6:2,4);return tA(r,t),wv(r,r.length-4,n.d()),r}function rA(e,t){return K6(e.subarray(nA(e),-4),{i:2},t,t)}var iA=typeof TextDecoder<"u"&&new TextDecoder,aA=0;try{iA.decode(yv,{stream:!0}),aA=1}catch{}var Xt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function d1(){Xt.console&&typeof Xt.console.log=="function"&&Xt.console.log.apply(Xt.console,arguments)}var nr={log:d1,warn:function(e){Xt.console&&(typeof Xt.console.warn=="function"?Xt.console.warn.apply(Xt.console,arguments):d1.call(null,arguments))},error:function(e){Xt.console&&(typeof Xt.console.error=="function"?Xt.console.error.apply(Xt.console,arguments):d1(e))}};function f1(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){Bl(r.response,t,n)},r.onerror=function(){nr.error("could not download file")},r.send()}function fx(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Of(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var od,Im,Bl=Xt.saveAs||((typeof window>"u"?"undefined":Wn(window))!=="object"||window!==Xt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var r=Xt.URL||Xt.webkitURL,o=document.createElement("a");t=t||e.name||"download",o.download=t,o.rel="noopener",typeof e=="string"?(o.href=e,o.origin!==location.origin?fx(o.href)?f1(e,t,n):Of(o,o.target="_blank"):Of(o)):(o.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(o.href)},4e4),setTimeout(function(){Of(o)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download",typeof e=="string")if(fx(e))f1(e,t,n);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout(function(){Of(r)})}else navigator.msSaveOrOpenBlob(function(o,l){return l===void 0?l={autoBom:!1}:Wn(l)!=="object"&&(nr.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob(["\uFEFF",o],{type:o.type}):o}(e,n),t)}:function(e,t,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof e=="string")return f1(e,t,n);var o=e.type==="application/octet-stream",l=/constructor/i.test(Xt.HTMLElement)||Xt.safari,f=/CriOS\/[\d]+/.test(navigator.userAgent);if((f||o&&l)&&(typeof FileReader>"u"?"undefined":Wn(FileReader))==="object"){var m=new FileReader;m.onloadend=function(){var A=m.result;A=f?A:A.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=A:location=A,r=null},m.readAsDataURL(e)}else{var g=Xt.URL||Xt.webkitURL,x=g.createObjectURL(e);r?r.location=x:location.href=x,r=null,setTimeout(function(){g.revokeObjectURL(x)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Nv(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(m){return[parseInt(m[1]),parseInt(m[2]),parseInt(m[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(m){return[parseInt(m[1],16),parseInt(m[2],16),parseInt(m[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(m){return[parseInt(m[1]+m[1],16),parseInt(m[2]+m[2],16),parseInt(m[3]+m[3],16)]}}],r=0;r<n.length;r++){var o=n[r].re,l=n[r].process,f=o.exec(e);f&&(t=l(f),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var m=this.r.toString(16),g=this.g.toString(16),x=this.b.toString(16);return m.length==1&&(m="0"+m),g.length==1&&(g="0"+g),x.length==1&&(x="0"+x),"#"+m+g+x}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function h1(e,t){var n=e[0],r=e[1],o=e[2],l=e[3];n=Li(n,r,o,l,t[0],7,-680876936),l=Li(l,n,r,o,t[1],12,-389564586),o=Li(o,l,n,r,t[2],17,606105819),r=Li(r,o,l,n,t[3],22,-1044525330),n=Li(n,r,o,l,t[4],7,-176418897),l=Li(l,n,r,o,t[5],12,1200080426),o=Li(o,l,n,r,t[6],17,-1473231341),r=Li(r,o,l,n,t[7],22,-45705983),n=Li(n,r,o,l,t[8],7,1770035416),l=Li(l,n,r,o,t[9],12,-1958414417),o=Li(o,l,n,r,t[10],17,-42063),r=Li(r,o,l,n,t[11],22,-1990404162),n=Li(n,r,o,l,t[12],7,1804603682),l=Li(l,n,r,o,t[13],12,-40341101),o=Li(o,l,n,r,t[14],17,-1502002290),n=Mi(n,r=Li(r,o,l,n,t[15],22,1236535329),o,l,t[1],5,-165796510),l=Mi(l,n,r,o,t[6],9,-1069501632),o=Mi(o,l,n,r,t[11],14,643717713),r=Mi(r,o,l,n,t[0],20,-373897302),n=Mi(n,r,o,l,t[5],5,-701558691),l=Mi(l,n,r,o,t[10],9,38016083),o=Mi(o,l,n,r,t[15],14,-660478335),r=Mi(r,o,l,n,t[4],20,-405537848),n=Mi(n,r,o,l,t[9],5,568446438),l=Mi(l,n,r,o,t[14],9,-1019803690),o=Mi(o,l,n,r,t[3],14,-187363961),r=Mi(r,o,l,n,t[8],20,1163531501),n=Mi(n,r,o,l,t[13],5,-1444681467),l=Mi(l,n,r,o,t[2],9,-51403784),o=Mi(o,l,n,r,t[7],14,1735328473),n=ki(n,r=Mi(r,o,l,n,t[12],20,-1926607734),o,l,t[5],4,-378558),l=ki(l,n,r,o,t[8],11,-2022574463),o=ki(o,l,n,r,t[11],16,1839030562),r=ki(r,o,l,n,t[14],23,-35309556),n=ki(n,r,o,l,t[1],4,-1530992060),l=ki(l,n,r,o,t[4],11,1272893353),o=ki(o,l,n,r,t[7],16,-155497632),r=ki(r,o,l,n,t[10],23,-1094730640),n=ki(n,r,o,l,t[13],4,681279174),l=ki(l,n,r,o,t[0],11,-358537222),o=ki(o,l,n,r,t[3],16,-722521979),r=ki(r,o,l,n,t[6],23,76029189),n=ki(n,r,o,l,t[9],4,-640364487),l=ki(l,n,r,o,t[12],11,-421815835),o=ki(o,l,n,r,t[15],16,530742520),n=Pi(n,r=ki(r,o,l,n,t[2],23,-995338651),o,l,t[0],6,-198630844),l=Pi(l,n,r,o,t[7],10,1126891415),o=Pi(o,l,n,r,t[14],15,-1416354905),r=Pi(r,o,l,n,t[5],21,-57434055),n=Pi(n,r,o,l,t[12],6,1700485571),l=Pi(l,n,r,o,t[3],10,-1894986606),o=Pi(o,l,n,r,t[10],15,-1051523),r=Pi(r,o,l,n,t[1],21,-2054922799),n=Pi(n,r,o,l,t[8],6,1873313359),l=Pi(l,n,r,o,t[15],10,-30611744),o=Pi(o,l,n,r,t[6],15,-1560198380),r=Pi(r,o,l,n,t[13],21,1309151649),n=Pi(n,r,o,l,t[4],6,-145523070),l=Pi(l,n,r,o,t[11],10,-1120210379),o=Pi(o,l,n,r,t[2],15,718787259),r=Pi(r,o,l,n,t[9],21,-343485551),e[0]=Qo(n,e[0]),e[1]=Qo(r,e[1]),e[2]=Qo(o,e[2]),e[3]=Qo(l,e[3])}function s0(e,t,n,r,o,l){return t=Qo(Qo(t,e),Qo(r,l)),Qo(t<<o|t>>>32-o,n)}function Li(e,t,n,r,o,l,f){return s0(t&n|~t&r,e,t,o,l,f)}function Mi(e,t,n,r,o,l,f){return s0(t&r|n&~r,e,t,o,l,f)}function ki(e,t,n,r,o,l,f){return s0(t^n^r,e,t,o,l,f)}function Pi(e,t,n,r,o,l,f){return s0(n^(t|~r),e,t,o,l,f)}function Av(e){var t,n=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)h1(r,sA(e.substring(t-64,t)));e=e.substring(t-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)o[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(o[t>>2]|=128<<(t%4<<3),t>55)for(h1(r,o),t=0;t<16;t++)o[t]=0;return o[14]=8*n,h1(r,o),r}function sA(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}od=Xt.atob.bind(Xt),Im=Xt.btoa.bind(Xt);var hx="0123456789abcdef".split("");function oA(e){for(var t="",n=0;n<4;n++)t+=hx[e>>8*n+4&15]+hx[e>>8*n&15];return t}function lA(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function Dm(e){return Av(e).map(lA).join("")}var cA=function(e){for(var t=0;t<e.length;t++)e[t]=oA(e[t]);return e.join("")}(Av("hello"))!="5d41402abc4b2a76b9719d911017c592";function Qo(e,t){if(cA){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Rm(e,t){var n,r,o,l;if(e!==n){for(var f=(o=e,l=1+(256/e.length>>0),new Array(l+1).join(o)),m=[],g=0;g<256;g++)m[g]=g;var x=0;for(g=0;g<256;g++){var A=m[g];x=(x+A+f.charCodeAt(g))%256,m[g]=m[x],m[x]=A}n=e,r=m}else m=r;var N=t.length,T=0,v=0,O="";for(g=0;g<N;g++)v=(v+(A=m[T=(T+1)%256]))%256,m[T]=m[v],m[v]=A,f=m[(m[T]+m[v])%256],O+=String.fromCharCode(t.charCodeAt(g)^f);return O}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var mx={print:4,modify:8,copy:16,"annot-forms":32};function _c(e,t,n,r){this.v=1,this.r=2;var o=192;e.forEach(function(m){if(mx.perm!==void 0)throw new Error("Invalid permission: "+m);o+=mx[m]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var l=(t+this.padding).substr(0,32),f=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(l,f),this.P=-(1+(255^o)),this.encryptionKey=Dm(l+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Rm(this.encryptionKey,this.padding)}function jc(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,r=0;r<n;r++){var o=e.charCodeAt(r);o<33||o===35||o===37||o===40||o===41||o===47||o===60||o===62||o===91||o===93||o===123||o===125||o>126?t+="#"+("0"+o.toString(16)).slice(-2):t+=e[r]}return t}function gx(e){if(Wn(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(n,r,o){if(o=o||!1,typeof n!="string"||typeof r!="function"||typeof o!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(n)||(t[n]={});var l=Math.random().toString(35);return t[n][l]=[r,!!o],l},this.unsubscribe=function(n){for(var r in t)if(t[r][n])return delete t[r][n],Object.keys(t[r]).length===0&&delete t[r],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),o=[];for(var l in t[n]){var f=t[n][l];try{f[0].apply(e,r)}catch(m){Xt.console&&nr.error("jsPDF PubSub Error",m.message,m)}f[1]&&o.push(l)}o.length&&o.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function _d(e){if(!(this instanceof _d))return new _d(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function Sv(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Go(e,t,n,r,o){if(!(this instanceof Go))return new Go(e,t,n,r,o);this.type=e==="axial"?2:3,this.coords=t,this.colors=n,Sv.call(this,r,o)}function Ul(e,t,n,r,o){if(!(this instanceof Ul))return new Ul(e,t,n,r,o);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,Sv.call(this,r,o)}function Vt(e){var t,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],o=arguments[2],l=arguments[3],f=[],m=1,g=16,x="S",A=null;Wn(e=e||{})==="object"&&(n=e.orientation,r=e.unit||r,o=e.format||o,l=e.compress||e.compressPdf||l,(A=e.encryption||null)!==null&&(A.userPassword=A.userPassword||"",A.ownerPassword=A.ownerPassword||"",A.userPermissions=A.userPermissions||[]),m=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(g=e.floatPrecision),x=e.defaultPathOperation||"S"),f=e.filters||(l===!0?["FlateEncode"]:f),r=r||"mm",n=(""+(n||"P")).toLowerCase();var N=e.putOnlyUsedFonts||!1,T={},v={internal:{},__private__:{}};v.__private__.PubSub=gx;var O="1.3",D=v.__private__.getPdfVersion=function(){return O};v.__private__.setPdfVersion=function(S){O=S};var P={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};v.__private__.getPageFormats=function(){return P};var C=v.__private__.getPageFormat=function(S){return P[S]};o=o||"a4";var E={COMPAT:"compat",ADVANCED:"advanced"},j=E.COMPAT;function V(){this.saveGraphicsState(),he(new Dt(xt,0,0,-xt,0,Ri()*xt).toString()+" cm"),this.setFontSize(this.getFontSize()/xt),x="n",j=E.ADVANCED}function W(){this.restoreGraphicsState(),x="S",j=E.COMPAT}var ie=v.__private__.combineFontStyleAndFontWeight=function(S,re){if(S=="bold"&&re=="normal"||S=="bold"&&re==400||S=="normal"&&re=="italic"||S=="bold"&&re=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return re&&(S=re==400||re==="normal"?S==="italic"?"italic":"normal":re!=700&&re!=="bold"||S!=="normal"?(re==700?"bold":re)+""+S:"bold"),S};v.advancedAPI=function(S){var re=j===E.COMPAT;return re&&V.call(this),typeof S!="function"||(S(this),re&&W.call(this)),this},v.compatAPI=function(S){var re=j===E.ADVANCED;return re&&W.call(this),typeof S!="function"||(S(this),re&&V.call(this)),this},v.isAdvancedAPI=function(){return j===E.ADVANCED};var B,R=function(S){if(j!==E.ADVANCED)throw new Error(S+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},M=v.roundToPrecision=v.__private__.roundToPrecision=function(S,re){var be=t||re;if(isNaN(S)||isNaN(be))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return S.toFixed(be).replace(/0+$/,"")};B=v.hpf=v.__private__.hpf=typeof g=="number"?function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return M(S,g)}:g==="smart"?function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return M(S,S>-1&&S<1?16:5)}:function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return M(S,16)};var Z=v.f2=v.__private__.f2=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.f2");return M(S,2)},F=v.__private__.f3=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.f3");return M(S,3)},k=v.scale=v.__private__.scale=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.scale");return j===E.COMPAT?S*xt:j===E.ADVANCED?S:void 0},Q=function(S){return j===E.COMPAT?Ri()-S:j===E.ADVANCED?S:void 0},J=function(S){return k(Q(S))};v.__private__.setPrecision=v.setPrecision=function(S){typeof parseInt(S,10)=="number"&&(t=parseInt(S,10))};var G,Y="00000000000000000000000000000000",z=v.__private__.getFileId=function(){return Y},X=v.__private__.setFileId=function(S){return Y=S!==void 0&&/^[a-fA-F0-9]{32}$/.test(S)?S.toUpperCase():Y.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),A!==null&&(Fr=new _c(A.userPermissions,A.userPassword,A.ownerPassword,Y)),Y};v.setFileId=function(S){return X(S),this},v.getFileId=function(){return z()};var te=v.__private__.convertDateToPDFDate=function(S){var re=S.getTimezoneOffset(),be=re<0?"+":"-",Se=Math.floor(Math.abs(re/60)),Fe=Math.abs(re%60),Je=[be,ee(Se),"'",ee(Fe),"'"].join("");return["D:",S.getFullYear(),ee(S.getMonth()+1),ee(S.getDate()),ee(S.getHours()),ee(S.getMinutes()),ee(S.getSeconds()),Je].join("")},ge=v.__private__.convertPDFDateToDate=function(S){var re=parseInt(S.substr(2,4),10),be=parseInt(S.substr(6,2),10)-1,Se=parseInt(S.substr(8,2),10),Fe=parseInt(S.substr(10,2),10),Je=parseInt(S.substr(12,2),10),rt=parseInt(S.substr(14,2),10);return new Date(re,be,Se,Fe,Je,rt,0)},ue=v.__private__.setCreationDate=function(S){var re;if(S===void 0&&(S=new Date),S instanceof Date)re=te(S);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(S))throw new Error("Invalid argument passed to jsPDF.setCreationDate");re=S}return G=re},L=v.__private__.getCreationDate=function(S){var re=G;return S==="jsDate"&&(re=ge(G)),re};v.setCreationDate=function(S){return ue(S),this},v.getCreationDate=function(S){return L(S)};var q,ee=v.__private__.padd2=function(S){return("0"+parseInt(S)).slice(-2)},fe=v.__private__.padd2Hex=function(S){return("00"+(S=S.toString())).substr(S.length)},ae=0,Ee=[],we=[],xe=0,Me=[],_e=[],Qe=!1,Be=we,ft=function(){ae=0,xe=0,we=[],Ee=[],Me=[],ui=Pn(),Ti=Pn()};v.__private__.setCustomOutputDestination=function(S){Qe=!0,Be=S};var ke=function(S){Qe||(Be=S)};v.__private__.resetCustomOutputDestination=function(){Qe=!1,Be=we};var he=v.__private__.out=function(S){return S=S.toString(),xe+=S.length+1,Be.push(S),Be},ot=v.__private__.write=function(S){return he(arguments.length===1?S.toString():Array.prototype.join.call(arguments," "))},ze=v.__private__.getArrayBuffer=function(S){for(var re=S.length,be=new ArrayBuffer(re),Se=new Uint8Array(be);re--;)Se[re]=S.charCodeAt(re);return be},Pe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];v.__private__.getStandardFonts=function(){return Pe};var ct=e.fontSize||16;v.__private__.setFontSize=v.setFontSize=function(S){return ct=j===E.ADVANCED?S/xt:S,this};var We,mt=v.__private__.getFontSize=v.getFontSize=function(){return j===E.COMPAT?ct:ct*xt},Ue=e.R2L||!1;v.__private__.setR2L=v.setR2L=function(S){return Ue=S,this},v.__private__.getR2L=v.getR2L=function(){return Ue};var it,Oe=v.__private__.setZoomMode=function(S){var re=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(S))We=S;else if(isNaN(S)){if(re.indexOf(S)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+S+'" is not recognized.');We=S}else We=parseInt(S,10)};v.__private__.getZoomMode=function(){return We};var Ze,pt=v.__private__.setPageMode=function(S){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(S)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+S+'" is not recognized.');it=S};v.__private__.getPageMode=function(){return it};var St=v.__private__.setLayoutMode=function(S){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(S)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+S+'" is not recognized.');Ze=S};v.__private__.getLayoutMode=function(){return Ze},v.__private__.setDisplayMode=v.setDisplayMode=function(S,re,be){return Oe(S),St(re),pt(be),this};var yt={title:"",subject:"",author:"",keywords:"",creator:""};v.__private__.getDocumentProperty=function(S){if(Object.keys(yt).indexOf(S)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return yt[S]},v.__private__.getDocumentProperties=function(){return yt},v.__private__.setDocumentProperties=v.setProperties=v.setDocumentProperties=function(S){for(var re in yt)yt.hasOwnProperty(re)&&S[re]&&(yt[re]=S[re]);return this},v.__private__.setDocumentProperty=function(S,re){if(Object.keys(yt).indexOf(S)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return yt[S]=re};var qt,xt,hn,Tt,gt,Te={},lt={},It=[],Pt={},Yn={},kn={},en={},$r=null,$n=0,Wt=[],nn=new gx(v),ma=e.hotfixes||[],yn={},ei={},vi=[],Dt=function S(re,be,Se,Fe,Je,rt){if(!(this instanceof S))return new S(re,be,Se,Fe,Je,rt);isNaN(re)&&(re=1),isNaN(be)&&(be=0),isNaN(Se)&&(Se=0),isNaN(Fe)&&(Fe=1),isNaN(Je)&&(Je=0),isNaN(rt)&&(rt=0),this._matrix=[re,be,Se,Fe,Je,rt]};Object.defineProperty(Dt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(S){this._matrix[0]=S}}),Object.defineProperty(Dt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(S){this._matrix[1]=S}}),Object.defineProperty(Dt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(S){this._matrix[2]=S}}),Object.defineProperty(Dt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(S){this._matrix[3]=S}}),Object.defineProperty(Dt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(S){this._matrix[4]=S}}),Object.defineProperty(Dt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(S){this._matrix[5]=S}}),Object.defineProperty(Dt.prototype,"a",{get:function(){return this._matrix[0]},set:function(S){this._matrix[0]=S}}),Object.defineProperty(Dt.prototype,"b",{get:function(){return this._matrix[1]},set:function(S){this._matrix[1]=S}}),Object.defineProperty(Dt.prototype,"c",{get:function(){return this._matrix[2]},set:function(S){this._matrix[2]=S}}),Object.defineProperty(Dt.prototype,"d",{get:function(){return this._matrix[3]},set:function(S){this._matrix[3]=S}}),Object.defineProperty(Dt.prototype,"e",{get:function(){return this._matrix[4]},set:function(S){this._matrix[4]=S}}),Object.defineProperty(Dt.prototype,"f",{get:function(){return this._matrix[5]},set:function(S){this._matrix[5]=S}}),Object.defineProperty(Dt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Dt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Dt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Dt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Dt.prototype.join=function(S){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(B).join(S)},Dt.prototype.multiply=function(S){var re=S.sx*this.sx+S.shy*this.shx,be=S.sx*this.shy+S.shy*this.sy,Se=S.shx*this.sx+S.sy*this.shx,Fe=S.shx*this.shy+S.sy*this.sy,Je=S.tx*this.sx+S.ty*this.shx+this.tx,rt=S.tx*this.shy+S.ty*this.sy+this.ty;return new Dt(re,be,Se,Fe,Je,rt)},Dt.prototype.decompose=function(){var S=this.sx,re=this.shy,be=this.shx,Se=this.sy,Fe=this.tx,Je=this.ty,rt=Math.sqrt(S*S+re*re),At=(S/=rt)*be+(re/=rt)*Se;be-=S*At,Se-=re*At;var kt=Math.sqrt(be*be+Se*Se);return At/=kt,S*(Se/=kt)<re*(be/=kt)&&(S=-S,re=-re,At=-At,rt=-rt),{scale:new Dt(rt,0,0,kt,0,0),translate:new Dt(1,0,0,1,Fe,Je),rotate:new Dt(S,re,-re,S,0,0),skew:new Dt(1,0,At,1,0,0)}},Dt.prototype.toString=function(S){return this.join(" ")},Dt.prototype.inversed=function(){var S=this.sx,re=this.shy,be=this.shx,Se=this.sy,Fe=this.tx,Je=this.ty,rt=1/(S*Se-re*be),At=Se*rt,kt=-re*rt,Kt=-be*rt,Jt=S*rt;return new Dt(At,kt,Kt,Jt,-At*Fe-Kt*Je,-kt*Fe-Jt*Je)},Dt.prototype.applyToPoint=function(S){var re=S.x*this.sx+S.y*this.shx+this.tx,be=S.x*this.shy+S.y*this.sy+this.ty;return new vo(re,be)},Dt.prototype.applyToRectangle=function(S){var re=this.applyToPoint(S),be=this.applyToPoint(new vo(S.x+S.w,S.y+S.h));return new Il(re.x,re.y,be.x-re.x,be.y-re.y)},Dt.prototype.clone=function(){var S=this.sx,re=this.shy,be=this.shx,Se=this.sy,Fe=this.tx,Je=this.ty;return new Dt(S,re,be,Se,Fe,Je)},v.Matrix=Dt;var zi=v.matrixMult=function(S,re){return re.multiply(S)},Wr=new Dt(1,0,0,1,0,0);v.unitMatrix=v.identityMatrix=Wr;var Yr=function(S,re){if(!Yn[S]){var be=(re instanceof Go?"Sh":"P")+(Object.keys(Pt).length+1).toString(10);re.id=be,Yn[S]=be,Pt[be]=re,nn.publish("addPattern",re)}};v.ShadingPattern=Go,v.TilingPattern=Ul,v.addShadingPattern=function(S,re){return R("addShadingPattern()"),Yr(S,re),this},v.beginTilingPattern=function(S){R("beginTilingPattern()"),wo(S.boundingBox[0],S.boundingBox[1],S.boundingBox[2]-S.boundingBox[0],S.boundingBox[3]-S.boundingBox[1],S.matrix)},v.endTilingPattern=function(S,re){R("endTilingPattern()"),re.stream=_e[q].join(`
`),Yr(S,re),nn.publish("endTilingPattern",re),vi.pop().restore()};var vn=v.__private__.newObject=function(){var S=Pn();return Xn(S,!0),S},Pn=v.__private__.newObjectDeferred=function(){return ae++,Ee[ae]=function(){return xe},ae},Xn=function(S,re){return re=typeof re=="boolean"&&re,Ee[S]=xe,re&&he(S+" 0 obj"),S},wt=v.__private__.newAdditionalObject=function(){var S={objId:Pn(),content:""};return Me.push(S),S},ui=Pn(),Ti=Pn(),er=v.__private__.decodeColorString=function(S){var re=S.split(" ");if(re.length!==2||re[1]!=="g"&&re[1]!=="G")re.length===5&&(re[4]==="k"||re[4]==="K")&&(re=[(1-re[0])*(1-re[3]),(1-re[1])*(1-re[3]),(1-re[2])*(1-re[3]),"r"]);else{var be=parseFloat(re[0]);re=[be,be,be,"r"]}for(var Se="#",Fe=0;Fe<3;Fe++)Se+=("0"+Math.floor(255*parseFloat(re[Fe])).toString(16)).slice(-2);return Se},ti=v.__private__.encodeColorString=function(S){var re;typeof S=="string"&&(S={ch1:S});var be=S.ch1,Se=S.ch2,Fe=S.ch3,Je=S.ch4,rt=S.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof be=="string"&&be.charAt(0)!=="#"){var At=new Nv(be);if(At.ok)be=At.toHex();else if(!/^\d*\.?\d*$/.test(be))throw new Error('Invalid color "'+be+'" passed to jsPDF.encodeColorString.')}if(typeof be=="string"&&/^#[0-9A-Fa-f]{3}$/.test(be)&&(be="#"+be[1]+be[1]+be[2]+be[2]+be[3]+be[3]),typeof be=="string"&&/^#[0-9A-Fa-f]{6}$/.test(be)){var kt=parseInt(be.substr(1),16);be=kt>>16&255,Se=kt>>8&255,Fe=255&kt}if(Se===void 0||Je===void 0&&be===Se&&Se===Fe)if(typeof be=="string")re=be+" "+rt[0];else switch(S.precision){case 2:re=Z(be/255)+" "+rt[0];break;case 3:default:re=F(be/255)+" "+rt[0]}else if(Je===void 0||Wn(Je)==="object"){if(Je&&!isNaN(Je.a)&&Je.a===0)return re=["1.","1.","1.",rt[1]].join(" ");if(typeof be=="string")re=[be,Se,Fe,rt[1]].join(" ");else switch(S.precision){case 2:re=[Z(be/255),Z(Se/255),Z(Fe/255),rt[1]].join(" ");break;default:case 3:re=[F(be/255),F(Se/255),F(Fe/255),rt[1]].join(" ")}}else if(typeof be=="string")re=[be,Se,Fe,Je,rt[2]].join(" ");else switch(S.precision){case 2:re=[Z(be),Z(Se),Z(Fe),Z(Je),rt[2]].join(" ");break;case 3:default:re=[F(be),F(Se),F(Fe),F(Je),rt[2]].join(" ")}return re},_i=v.__private__.getFilters=function(){return f},di=v.__private__.putStream=function(S){var re=(S=S||{}).data||"",be=S.filters||_i(),Se=S.alreadyAppliedFilters||[],Fe=S.addLength1||!1,Je=re.length,rt=S.objectId,At=function(hi){return hi};if(A!==null&&rt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");A!==null&&(At=Fr.encryptor(rt,0));var kt={};be===!0&&(be=["FlateEncode"]);var Kt=S.additionalKeyValues||[],Jt=(kt=Vt.API.processDataByFilters!==void 0?Vt.API.processDataByFilters(re,be):{data:re,reverseChain:[]}).reverseChain+(Array.isArray(Se)?Se.join(" "):Se.toString());if(kt.data.length!==0&&(Kt.push({key:"Length",value:kt.data.length}),Fe===!0&&Kt.push({key:"Length1",value:Je})),Jt.length!=0)if(Jt.split("/").length-1==1)Kt.push({key:"Filter",value:Jt});else{Kt.push({key:"Filter",value:"["+Jt+"]"});for(var pn=0;pn<Kt.length;pn+=1)if(Kt[pn].key==="DecodeParms"){for(var lr=[],Un=0;Un<kt.reverseChain.split("/").length-1;Un+=1)lr.push("null");lr.push(Kt[pn].value),Kt[pn].value="["+lr.join(" ")+"]"}}he("<<");for(var mr=0;mr<Kt.length;mr++)he("/"+Kt[mr].key+" "+Kt[mr].value);he(">>"),kt.data.length!==0&&(he("stream"),he(At(kt.data)),he("endstream"))},Tr=v.__private__.putPage=function(S){var re=S.number,be=S.data,Se=S.objId,Fe=S.contentsObjId;Xn(Se,!0),he("<</Type /Page"),he("/Parent "+S.rootDictionaryObjId+" 0 R"),he("/Resources "+S.resourceDictionaryObjId+" 0 R"),he("/MediaBox ["+parseFloat(B(S.mediaBox.bottomLeftX))+" "+parseFloat(B(S.mediaBox.bottomLeftY))+" "+B(S.mediaBox.topRightX)+" "+B(S.mediaBox.topRightY)+"]"),S.cropBox!==null&&he("/CropBox ["+B(S.cropBox.bottomLeftX)+" "+B(S.cropBox.bottomLeftY)+" "+B(S.cropBox.topRightX)+" "+B(S.cropBox.topRightY)+"]"),S.bleedBox!==null&&he("/BleedBox ["+B(S.bleedBox.bottomLeftX)+" "+B(S.bleedBox.bottomLeftY)+" "+B(S.bleedBox.topRightX)+" "+B(S.bleedBox.topRightY)+"]"),S.trimBox!==null&&he("/TrimBox ["+B(S.trimBox.bottomLeftX)+" "+B(S.trimBox.bottomLeftY)+" "+B(S.trimBox.topRightX)+" "+B(S.trimBox.topRightY)+"]"),S.artBox!==null&&he("/ArtBox ["+B(S.artBox.bottomLeftX)+" "+B(S.artBox.bottomLeftY)+" "+B(S.artBox.topRightX)+" "+B(S.artBox.topRightY)+"]"),typeof S.userUnit=="number"&&S.userUnit!==1&&he("/UserUnit "+S.userUnit),nn.publish("putPage",{objId:Se,pageContext:Wt[re],pageNumber:re,page:be}),he("/Contents "+Fe+" 0 R"),he(">>"),he("endobj");var Je=be.join(`
`);return j===E.ADVANCED&&(Je+=`
Q`),Xn(Fe,!0),di({data:Je,filters:_i(),objectId:Fe}),he("endobj"),Se},ms=v.__private__.putPages=function(){var S,re,be=[];for(S=1;S<=$n;S++)Wt[S].objId=Pn(),Wt[S].contentsObjId=Pn();for(S=1;S<=$n;S++)be.push(Tr({number:S,data:_e[S],objId:Wt[S].objId,contentsObjId:Wt[S].contentsObjId,mediaBox:Wt[S].mediaBox,cropBox:Wt[S].cropBox,bleedBox:Wt[S].bleedBox,trimBox:Wt[S].trimBox,artBox:Wt[S].artBox,userUnit:Wt[S].userUnit,rootDictionaryObjId:ui,resourceDictionaryObjId:Ti}));Xn(ui,!0),he("<</Type /Pages");var Se="/Kids [";for(re=0;re<$n;re++)Se+=be[re]+" 0 R ";he(Se+"]"),he("/Count "+$n),he(">>"),he("endobj"),nn.publish("postPutPages")},Bs=function(S){nn.publish("putFont",{font:S,out:he,newObject:vn,putStream:di}),S.isAlreadyPutted!==!0&&(S.objectNumber=vn(),he("<<"),he("/Type /Font"),he("/BaseFont /"+jc(S.postScriptName)),he("/Subtype /Type1"),typeof S.encoding=="string"&&he("/Encoding /"+S.encoding),he("/FirstChar 32"),he("/LastChar 255"),he(">>"),he("endobj"))},fi=function(){for(var S in Te)Te.hasOwnProperty(S)&&(N===!1||N===!0&&T.hasOwnProperty(S))&&Bs(Te[S])},vr=function(S){S.objectNumber=vn();var re=[];re.push({key:"Type",value:"/XObject"}),re.push({key:"Subtype",value:"/Form"}),re.push({key:"BBox",value:"["+[B(S.x),B(S.y),B(S.x+S.width),B(S.y+S.height)].join(" ")+"]"}),re.push({key:"Matrix",value:"["+S.matrix.toString()+"]"});var be=S.pages[1].join(`
`);di({data:be,additionalKeyValues:re,objectId:S.objectNumber}),he("endobj")},In=function(){for(var S in yn)yn.hasOwnProperty(S)&&vr(yn[S])},po=function(S,re){var be,Se=[],Fe=1/(re-1);for(be=0;be<1;be+=Fe)Se.push(be);if(Se.push(1),S[0].offset!=0){var Je={offset:0,color:S[0].color};S.unshift(Je)}if(S[S.length-1].offset!=1){var rt={offset:1,color:S[S.length-1].color};S.push(rt)}for(var At="",kt=0,Kt=0;Kt<Se.length;Kt++){for(be=Se[Kt];be>S[kt+1].offset;)kt++;var Jt=S[kt].offset,pn=(be-Jt)/(S[kt+1].offset-Jt),lr=S[kt].color,Un=S[kt+1].color;At+=fe(Math.round((1-pn)*lr[0]+pn*Un[0]).toString(16))+fe(Math.round((1-pn)*lr[1]+pn*Un[1]).toString(16))+fe(Math.round((1-pn)*lr[2]+pn*Un[2]).toString(16))}return At.trim()},$i=function(S,re){re||(re=21);var be=vn(),Se=po(S.colors,re),Fe=[];Fe.push({key:"FunctionType",value:"0"}),Fe.push({key:"Domain",value:"[0.0 1.0]"}),Fe.push({key:"Size",value:"["+re+"]"}),Fe.push({key:"BitsPerSample",value:"8"}),Fe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Fe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),di({data:Se,additionalKeyValues:Fe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:be}),he("endobj"),S.objectNumber=vn(),he("<< /ShadingType "+S.type),he("/ColorSpace /DeviceRGB");var Je="/Coords ["+B(parseFloat(S.coords[0]))+" "+B(parseFloat(S.coords[1]))+" ";S.type===2?Je+=B(parseFloat(S.coords[2]))+" "+B(parseFloat(S.coords[3])):Je+=B(parseFloat(S.coords[2]))+" "+B(parseFloat(S.coords[3]))+" "+B(parseFloat(S.coords[4]))+" "+B(parseFloat(S.coords[5])),he(Je+="]"),S.matrix&&he("/Matrix ["+S.matrix.toString()+"]"),he("/Function "+be+" 0 R"),he("/Extend [true true]"),he(">>"),he("endobj")},Ve=function(S,re){var be=Pn(),Se=vn();re.push({resourcesOid:be,objectOid:Se}),S.objectNumber=Se;var Fe=[];Fe.push({key:"Type",value:"/Pattern"}),Fe.push({key:"PatternType",value:"1"}),Fe.push({key:"PaintType",value:"1"}),Fe.push({key:"TilingType",value:"1"}),Fe.push({key:"BBox",value:"["+S.boundingBox.map(B).join(" ")+"]"}),Fe.push({key:"XStep",value:B(S.xStep)}),Fe.push({key:"YStep",value:B(S.yStep)}),Fe.push({key:"Resources",value:be+" 0 R"}),S.matrix&&Fe.push({key:"Matrix",value:"["+S.matrix.toString()+"]"}),di({data:S.stream,additionalKeyValues:Fe,objectId:S.objectNumber}),he("endobj")},Ne=function(S){var re;for(re in Pt)Pt.hasOwnProperty(re)&&(Pt[re]instanceof Go?$i(Pt[re]):Pt[re]instanceof Ul&&Ve(Pt[re],S))},bt=function(S){for(var re in S.objectNumber=vn(),he("<<"),S)switch(re){case"opacity":he("/ca "+Z(S[re]));break;case"stroke-opacity":he("/CA "+Z(S[re]))}he(">>"),he("endobj")},Ft=function(){var S;for(S in kn)kn.hasOwnProperty(S)&&bt(kn[S])},Mr=function(){for(var S in he("/XObject <<"),yn)yn.hasOwnProperty(S)&&yn[S].objectNumber>=0&&he("/"+S+" "+yn[S].objectNumber+" 0 R");nn.publish("putXobjectDict"),he(">>")},ga=function(){Fr.oid=vn(),he("<<"),he("/Filter /Standard"),he("/V "+Fr.v),he("/R "+Fr.r),he("/U <"+Fr.toHexString(Fr.U)+">"),he("/O <"+Fr.toHexString(Fr.O)+">"),he("/P "+Fr.P),he(">>"),he("endobj")},$t=function(){for(var S in he("/Font <<"),Te)Te.hasOwnProperty(S)&&(N===!1||N===!0&&T.hasOwnProperty(S))&&he("/"+S+" "+Te[S].objectNumber+" 0 R");he(">>")},on=function(){if(Object.keys(Pt).length>0){for(var S in he("/Shading <<"),Pt)Pt.hasOwnProperty(S)&&Pt[S]instanceof Go&&Pt[S].objectNumber>=0&&he("/"+S+" "+Pt[S].objectNumber+" 0 R");nn.publish("putShadingPatternDict"),he(">>")}},Yt=function(S){if(Object.keys(Pt).length>0){for(var re in he("/Pattern <<"),Pt)Pt.hasOwnProperty(re)&&Pt[re]instanceof v.TilingPattern&&Pt[re].objectNumber>=0&&Pt[re].objectNumber<S&&he("/"+re+" "+Pt[re].objectNumber+" 0 R");nn.publish("putTilingPatternDict"),he(">>")}},ea=function(){if(Object.keys(kn).length>0){var S;for(S in he("/ExtGState <<"),kn)kn.hasOwnProperty(S)&&kn[S].objectNumber>=0&&he("/"+S+" "+kn[S].objectNumber+" 0 R");nn.publish("putGStateDict"),he(">>")}},En=function(S){Xn(S.resourcesOid,!0),he("<<"),he("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),$t(),on(),Yt(S.objectOid),ea(),Mr(),he(">>"),he("endobj")},La=function(){var S=[];fi(),Ft(),In(),Ne(S),nn.publish("putResources"),S.forEach(En),En({resourcesOid:Ti,objectOid:Number.MAX_SAFE_INTEGER}),nn.publish("postPutResources")},ir=function(){nn.publish("putAdditionalObjects");for(var S=0;S<Me.length;S++){var re=Me[S];Xn(re.objId,!0),he(re.content),he("endobj")}nn.publish("postPutAdditionalObjects")},Hi=function(S){lt[S.fontName]=lt[S.fontName]||{},lt[S.fontName][S.fontStyle]=S.id},Us=function(S,re,be,Se,Fe){var Je={id:"F"+(Object.keys(Te).length+1).toString(10),postScriptName:S,fontName:re,fontStyle:be,encoding:Se,isStandardFont:Fe||!1,metadata:{}};return nn.publish("addFont",{font:Je,instance:this}),Te[Je.id]=Je,Hi(Je),Je.id},Mt=function(S){for(var re=0,be=Pe.length;re<be;re++){var Se=Us.call(this,S[re][0],S[re][1],S[re][2],Pe[re][3],!0);N===!1&&(T[Se]=!0);var Fe=S[re][0].split("-");Hi({id:Se,fontName:Fe[0],fontStyle:Fe[1]||""})}nn.publish("addFonts",{fonts:Te,dictionary:lt})},mn=function(S){return S.foo=function(){try{return S.apply(this,arguments)}catch(Se){var re=Se.stack||"";~re.indexOf(" at ")&&(re=re.split(" at ")[1]);var be="Error in function "+re.split(`
`)[0].split("<")[0]+": "+Se.message;if(!Xt.console)throw new Error(be);Xt.console.error(be,Se),Xt.alert&&alert(be)}},S.foo.bar=S,S.foo},xo=function(S,re){var be,Se,Fe,Je,rt,At,kt,Kt,Jt;if(Fe=(re=re||{}).sourceEncoding||"Unicode",rt=re.outputEncoding,(re.autoencode||rt)&&Te[qt].metadata&&Te[qt].metadata[Fe]&&Te[qt].metadata[Fe].encoding&&(Je=Te[qt].metadata[Fe].encoding,!rt&&Te[qt].encoding&&(rt=Te[qt].encoding),!rt&&Je.codePages&&(rt=Je.codePages[0]),typeof rt=="string"&&(rt=Je[rt]),rt)){for(kt=!1,At=[],be=0,Se=S.length;be<Se;be++)(Kt=rt[S.charCodeAt(be)])?At.push(String.fromCharCode(Kt)):At.push(S[be]),At[be].charCodeAt(0)>>8&&(kt=!0);S=At.join("")}for(be=S.length;kt===void 0&&be!==0;)S.charCodeAt(be-1)>>8&&(kt=!0),be--;if(!kt)return S;for(At=re.noBOM?[]:[254,255],be=0,Se=S.length;be<Se;be++){if((Jt=(Kt=S.charCodeAt(be))>>8)>>8)throw new Error("Character at position "+be+" of string '"+S+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");At.push(Jt),At.push(Kt-(Jt<<8))}return String.fromCharCode.apply(void 0,At)},kr=v.__private__.pdfEscape=v.pdfEscape=function(S,re){return xo(S,re).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Dn=v.__private__.beginPage=function(S){_e[++$n]=[],Wt[$n]={objId:0,contentsObjId:0,userUnit:Number(m),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(S[0]),topRightY:Number(S[1])}},pe($n),ke(_e[q])},Pr=function(S,re){var be,Se,Fe;switch(n=re||n,typeof S=="string"&&(be=C(S.toLowerCase()),Array.isArray(be)&&(Se=be[0],Fe=be[1])),Array.isArray(S)&&(Se=S[0]*xt,Fe=S[1]*xt),isNaN(Se)&&(Se=o[0],Fe=o[1]),(Se>14400||Fe>14400)&&(nr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Se=Math.min(14400,Se),Fe=Math.min(14400,Fe)),o=[Se,Fe],n.substr(0,1)){case"l":Fe>Se&&(o=[Fe,Se]);break;case"p":Se>Fe&&(o=[Fe,Se])}Dn(o),ni(es),he(na),Nr!==0&&he(Nr+" J"),xs!==0&&he(xs+" j"),nn.publish("addPage",{pageNumber:$n})},He=function(S){S>0&&S<=$n&&(_e.splice(S,1),Wt.splice(S,1),$n--,q>$n&&(q=$n),this.setPage(q))},pe=function(S){S>0&&S<=$n&&(q=S)},Ot=v.__private__.getNumberOfPages=v.getNumberOfPages=function(){return _e.length-1},wr=function(S,re,be){var Se,Fe=void 0;return be=be||{},S=S!==void 0?S:Te[qt].fontName,re=re!==void 0?re:Te[qt].fontStyle,Se=S.toLowerCase(),lt[Se]!==void 0&&lt[Se][re]!==void 0?Fe=lt[Se][re]:lt[S]!==void 0&&lt[S][re]!==void 0?Fe=lt[S][re]:be.disableWarning===!1&&nr.warn("Unable to look up font label for font '"+S+"', '"+re+"'. Refer to getFontList() for available fonts."),Fe||be.noFallback||(Fe=lt.times[re])==null&&(Fe=lt.times.normal),Fe},ji=v.__private__.putInfo=function(){var S=vn(),re=function(Se){return Se};for(var be in A!==null&&(re=Fr.encryptor(S,0)),he("<<"),he("/Producer ("+kr(re("jsPDF "+Vt.version))+")"),yt)yt.hasOwnProperty(be)&&yt[be]&&he("/"+be.substr(0,1).toUpperCase()+be.substr(1)+" ("+kr(re(yt[be]))+")");he("/CreationDate ("+kr(re(G))+")"),he(">>"),he("endobj")},vl=v.__private__.putCatalog=function(S){var re=(S=S||{}).rootDictionaryObjId||ui;switch(vn(),he("<<"),he("/Type /Catalog"),he("/Pages "+re+" 0 R"),We||(We="fullwidth"),We){case"fullwidth":he("/OpenAction [3 0 R /FitH null]");break;case"fullheight":he("/OpenAction [3 0 R /FitV null]");break;case"fullpage":he("/OpenAction [3 0 R /Fit]");break;case"original":he("/OpenAction [3 0 R /XYZ null null 1]");break;default:var be=""+We;be.substr(be.length-1)==="%"&&(We=parseInt(We)/100),typeof We=="number"&&he("/OpenAction [3 0 R /XYZ null null "+Z(We)+"]")}switch(Ze||(Ze="continuous"),Ze){case"continuous":he("/PageLayout /OneColumn");break;case"single":he("/PageLayout /SinglePage");break;case"two":case"twoleft":he("/PageLayout /TwoColumnLeft");break;case"tworight":he("/PageLayout /TwoColumnRight")}it&&he("/PageMode /"+it),nn.publish("putCatalog"),he(">>"),he("endobj")},wl=v.__private__.putTrailer=function(){he("trailer"),he("<<"),he("/Size "+(ae+1)),he("/Root "+ae+" 0 R"),he("/Info "+(ae-1)+" 0 R"),A!==null&&he("/Encrypt "+Fr.oid+" 0 R"),he("/ID [ <"+Y+"> <"+Y+"> ]"),he(">>")},Ii=v.__private__.putHeader=function(){he("%PDF-"+O),he("%ºß¬à")},Bt=v.__private__.putXRef=function(){var S="0000000000";he("xref"),he("0 "+(ae+1)),he("0000000000 65535 f ");for(var re=1;re<=ae;re++)typeof Ee[re]=="function"?he((S+Ee[re]()).slice(-10)+" 00000 n "):Ee[re]!==void 0?he((S+Ee[re]).slice(-10)+" 00000 n "):he("0000000000 00000 n ")},Tn=v.__private__.buildDocument=function(){ft(),ke(we),nn.publish("buildDocument"),Ii(),ms(),ir(),La(),A!==null&&ga(),ji(),vl();var S=xe;return Bt(),wl(),he("startxref"),he(""+S),he("%%EOF"),ke(_e[q]),we.join(`
`)},zs=v.__private__.getBlob=function(S){return new Blob([ze(S)],{type:"application/pdf"})},bo=v.output=v.__private__.output=mn(function(S,re){switch(typeof(re=re||{})=="string"?re={filename:re}:re.filename=re.filename||"generated.pdf",S){case void 0:return Tn();case"save":v.save(re.filename);break;case"arraybuffer":return ze(Tn());case"blob":return zs(Tn());case"bloburi":case"bloburl":if(Xt.URL!==void 0&&typeof Xt.URL.createObjectURL=="function")return Xt.URL&&Xt.URL.createObjectURL(zs(Tn()))||void 0;nr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var be="",Se=Tn();try{be=Im(Se)}catch{be=Im(unescape(encodeURIComponent(Se)))}return"data:application/pdf;filename="+re.filename+";base64,"+be;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Xt)==="[object Window]"){var Fe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Je=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';re.pdfObjectUrl&&(Fe=re.pdfObjectUrl,Je="");var rt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Fe+'"'+Je+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(re)+");<\/script></body></html>",At=Xt.open();return At!==null&&At.document.write(rt),At}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Xt)==="[object Window]"){var kt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(re.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+re.filename+'" width="500px" height="400px" /></body></html>',Kt=Xt.open();if(Kt!==null){Kt.document.write(kt);var Jt=this;Kt.document.documentElement.querySelector("#pdfViewer").onload=function(){Kt.document.title=re.filename,Kt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Jt.output("bloburl"))}}return Kt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Xt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var pn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",re)+'"></iframe></body></html>',lr=Xt.open();if(lr!==null&&(lr.document.write(pn),lr.document.title=re.filename),lr||typeof safari>"u")return lr;break;case"datauri":case"dataurl":return Xt.document.location.href=this.output("datauristring",re);default:return null}}),yo=function(S){return Array.isArray(ma)===!0&&ma.indexOf(S)>-1};switch(r){case"pt":xt=1;break;case"mm":xt=72/25.4;break;case"cm":xt=72/2.54;break;case"in":xt=72;break;case"px":xt=yo("px_scaling")==1?.75:96/72;break;case"pc":case"em":xt=12;break;case"ex":xt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);xt=r}var Fr=null;ue(),X();var Nl=function(S){return A!==null?Fr.encryptor(S,0):function(re){return re}},uc=v.__private__.getPageInfo=v.getPageInfo=function(S){if(isNaN(S)||S%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Wt[S].objId,pageNumber:S,pageContext:Wt[S]}},jt=v.__private__.getPageInfoByObjId=function(S){if(isNaN(S)||S%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var re in Wt)if(Wt[re].objId===S)break;return uc(re)},Hs=v.__private__.getCurrentPageInfo=v.getCurrentPageInfo=function(){return{objId:Wt[q].objId,pageNumber:q,pageContext:Wt[q]}};v.addPage=function(){return Pr.apply(this,arguments),this},v.setPage=function(){return pe.apply(this,arguments),ke.call(this,_e[q]),this},v.insertPage=function(S){return this.addPage(),this.movePage(q,S),this},v.movePage=function(S,re){var be,Se;if(S>re){be=_e[S],Se=Wt[S];for(var Fe=S;Fe>re;Fe--)_e[Fe]=_e[Fe-1],Wt[Fe]=Wt[Fe-1];_e[re]=be,Wt[re]=Se,this.setPage(re)}else if(S<re){be=_e[S],Se=Wt[S];for(var Je=S;Je<re;Je++)_e[Je]=_e[Je+1],Wt[Je]=Wt[Je+1];_e[re]=be,Wt[re]=Se,this.setPage(re)}return this},v.deletePage=function(){return He.apply(this,arguments),this},v.__private__.text=v.text=function(S,re,be,Se,Fe){var Je,rt,At,kt,Kt,Jt,pn,lr,Un,mr=(Se=Se||{}).scope||this;if(typeof S=="number"&&typeof re=="number"&&(typeof be=="string"||Array.isArray(be))){var hi=be;be=re,re=S,S=hi}if(arguments[3]instanceof Dt?(R("The transform parameter of text() with a Matrix value"),Un=Fe):(At=arguments[4],kt=arguments[5],Wn(pn=arguments[3])==="object"&&pn!==null||(typeof At=="string"&&(kt=At,At=null),typeof pn=="string"&&(kt=pn,pn=null),typeof pn=="number"&&(At=pn,pn=null),Se={flags:pn,angle:At,align:kt})),isNaN(re)||isNaN(be)||S==null)throw new Error("Invalid arguments passed to jsPDF.text");if(S.length===0)return mr;var gr="",xa=!1,_r=typeof Se.lineHeightFactor=="number"?Se.lineHeightFactor:gs,Vi=mr.internal.scaleFactor;function wi(ar){return ar=ar.split("	").join(Array(Se.TabLen||9).join(" ")),kr(ar,pn)}function No(ar){for(var sr,Ur=ar.concat(),ai=[],Ws=Ur.length;Ws--;)typeof(sr=Ur.shift())=="string"?ai.push(sr):Array.isArray(ar)&&(sr.length===1||sr[1]===void 0&&sr[2]===void 0)?ai.push(sr[0]):ai.push([sr[0],sr[1],sr[2]]);return ai}function Oi(ar,sr){var Ur;if(typeof ar=="string")Ur=sr(ar)[0];else if(Array.isArray(ar)){for(var ai,Ws,Au=ar.concat(),hc=[],Zd=Au.length;Zd--;)typeof(ai=Au.shift())=="string"?hc.push(sr(ai)[0]):Array.isArray(ai)&&typeof ai[0]=="string"&&(Ws=sr(ai[0],ai[1],ai[2]),hc.push([Ws[0],Ws[1],Ws[2]]));Ur=hc}return Ur}var Ao=!1,qs=!0;if(typeof S=="string")Ao=!0;else if(Array.isArray(S)){var Rl=S.concat();rt=[];for(var Gs,Zn=Rl.length;Zn--;)(typeof(Gs=Rl.shift())!="string"||Array.isArray(Gs)&&typeof Gs[0]!="string")&&(qs=!1);Ao=qs}if(Ao===!1)throw new Error('Type of text must be string or Array. "'+S+'" is not recognized.');typeof S=="string"&&(S=S.match(/[\r?\n]/)?S.split(/\r\n|\r|\n/g):[S]);var So=ct/mr.internal.scaleFactor,vs=So*(_r-1);switch(Se.baseline){case"bottom":be-=vs;break;case"top":be+=So-vs;break;case"hanging":be+=So-2*vs;break;case"middle":be+=So/2-vs}if((Jt=Se.maxWidth||0)>0&&(typeof S=="string"?S=mr.splitTextToSize(S,Jt):Object.prototype.toString.call(S)==="[object Array]"&&(S=S.reduce(function(ar,sr){return ar.concat(mr.splitTextToSize(sr,Jt))},[]))),Je={text:S,x:re,y:be,options:Se,mutex:{pdfEscape:kr,activeFontKey:qt,fonts:Te,activeFontSize:ct}},nn.publish("preProcessText",Je),S=Je.text,At=(Se=Je.options).angle,!(Un instanceof Dt)&&At&&typeof At=="number"){At*=Math.PI/180,Se.rotationDirection===0&&(At=-At),j===E.ADVANCED&&(At=-At);var Fa=Math.cos(At),dn=Math.sin(At);Un=new Dt(Fa,dn,-dn,Fa,0,0)}else At&&At instanceof Dt&&(Un=At);j!==E.ADVANCED||Un||(Un=Wr),(Kt=Se.charSpace||Ye)!==void 0&&(gr+=B(k(Kt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(lr=Se.horizontalScale)!==void 0&&(gr+=B(100*lr)+` Tz
`),Se.lang;var ri=-1,$=Se.renderingMode!==void 0?Se.renderingMode:Se.stroke,i=mr.internal.getCurrentPageInfo().pageContext;switch($){case 0:case!1:case"fill":ri=0;break;case 1:case!0:case"stroke":ri=1;break;case 2:case"fillThenStroke":ri=2;break;case 3:case"invisible":ri=3;break;case 4:case"fillAndAddForClipping":ri=4;break;case 5:case"strokeAndAddPathForClipping":ri=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ri=6;break;case 7:case"addToPathForClipping":ri=7}var s=i.usedRenderingMode!==void 0?i.usedRenderingMode:-1;ri!==-1?gr+=ri+` Tr
`:s!==-1&&(gr+=`0 Tr
`),ri!==-1&&(i.usedRenderingMode=ri),kt=Se.align||"left";var c,u=ct*_r,d=mr.internal.pageSize.getWidth(),h=Te[qt];Kt=Se.charSpace||Ye,Jt=Se.maxWidth||0,pn=Object.assign({autoencode:!0,noBOM:!0},Se.flags);var b=[],w=function(ar){return mr.getStringUnitWidth(ar,{font:h,charSpace:Kt,fontSize:ct,doKerning:!1})*ct/Vi};if(Object.prototype.toString.call(S)==="[object Array]"){var _;rt=No(S),kt!=="left"&&(c=rt.map(w));var H,K=0;if(kt==="right"){re-=c[0],S=[],Zn=rt.length;for(var oe=0;oe<Zn;oe++)oe===0?(H=Pa(re),_=ts(be)):(H=k(K-c[oe]),_=-u),S.push([rt[oe],H,_]),K=c[oe]}else if(kt==="center"){re-=c[0]/2,S=[],Zn=rt.length;for(var ye=0;ye<Zn;ye++)ye===0?(H=Pa(re),_=ts(be)):(H=k((K-c[ye])/2),_=-u),S.push([rt[ye],H,_]),K=c[ye]}else if(kt==="left"){S=[],Zn=rt.length;for(var Ae=0;Ae<Zn;Ae++)S.push(rt[Ae])}else if(kt==="justify"&&h.encoding==="Identity-H"){S=[],Zn=rt.length,Jt=Jt!==0?Jt:d;for(var Ce=0,Re=0;Re<Zn;Re++)if(_=Re===0?ts(be):-u,H=Re===0?Pa(re):Ce,Re<Zn-1){var Xe=k((Jt-c[Re])/(rt[Re].split(" ").length-1)),st=rt[Re].split(" ");S.push([st[0]+" ",H,_]),Ce=0;for(var ht=1;ht<st.length;ht++){var ut=(w(st[ht-1]+" "+st[ht])-w(st[ht]))*Vi+Xe;ht==st.length-1?S.push([st[ht],ut,0]):S.push([st[ht]+" ",ut,0]),Ce-=ut}}else S.push([rt[Re],H,_]);S.push(["",Ce,0])}else{if(kt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(S=[],Zn=rt.length,Jt=Jt!==0?Jt:d,Re=0;Re<Zn;Re++)_=Re===0?ts(be):-u,H=Re===0?Pa(re):0,Re<Zn-1?b.push(B(k((Jt-c[Re])/(rt[Re].split(" ").length-1)))):b.push(0),S.push([rt[Re],H,_])}}var cn=typeof Se.R2L=="boolean"?Se.R2L:Ue;cn===!0&&(S=Oi(S,function(ar,sr,Ur){return[ar.split("").reverse().join(""),sr,Ur]})),Je={text:S,x:re,y:be,options:Se,mutex:{pdfEscape:kr,activeFontKey:qt,fonts:Te,activeFontSize:ct}},nn.publish("postProcessText",Je),S=Je.text,xa=Je.mutex.isHex||!1;var Zt=Te[qt].encoding;Zt!=="WinAnsiEncoding"&&Zt!=="StandardEncoding"||(S=Oi(S,function(ar,sr,Ur){return[wi(ar),sr,Ur]})),rt=No(S),S=[];for(var jr,ii,Sr,Nn=0,pr=1,Br=Array.isArray(rt[0])?pr:Nn,qi="",Ba=function(ar,sr,Ur){var ai="";return Ur instanceof Dt?(Ur=typeof Se.angle=="number"?zi(Ur,new Dt(1,0,0,1,ar,sr)):zi(new Dt(1,0,0,1,ar,sr),Ur),j===E.ADVANCED&&(Ur=zi(new Dt(1,0,0,-1,0,0),Ur)),ai=Ur.join(" ")+` Tm
`):ai=B(ar)+" "+B(sr)+` Td
`,ai},ra=0;ra<rt.length;ra++){switch(qi="",Br){case pr:Sr=(xa?"<":"(")+rt[ra][0]+(xa?">":")"),jr=parseFloat(rt[ra][1]),ii=parseFloat(rt[ra][2]);break;case Nn:Sr=(xa?"<":"(")+rt[ra]+(xa?">":")"),jr=Pa(re),ii=ts(be)}b!==void 0&&b[ra]!==void 0&&(qi=b[ra]+` Tw
`),ra===0?S.push(qi+Ba(jr,ii,Un)+Sr):Br===Nn?S.push(qi+Sr):Br===pr&&S.push(qi+Ba(jr,ii,Un)+Sr)}S=Br===Nn?S.join(` Tj
T* `):S.join(` Tj
`),S+=` Tj
`;var ia=`BT
/`;return ia+=qt+" "+ct+` Tf
`,ia+=B(ct*_r)+` TL
`,ia+=Di+`
`,ia+=gr,ia+=S,he(ia+="ET"),T[qt]=!0,mr};var Ma=v.__private__.clip=v.clip=function(S){return he(S==="evenodd"?"W*":"W"),this};v.clipEvenOdd=function(){return Ma("evenodd")},v.__private__.discardPath=v.discardPath=function(){return he("n"),this};var Lt=v.__private__.isValidStyle=function(S){var re=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(S)!==-1&&(re=!0),re};v.__private__.setDefaultPathOperation=v.setDefaultPathOperation=function(S){return Lt(S)&&(x=S),this};var dc=v.__private__.getStyle=v.getStyle=function(S){var re=x;switch(S){case"D":case"S":re="S";break;case"F":re="f";break;case"FD":case"DF":re="B";break;case"f":case"f*":case"B":case"B*":re=S}return re},tn=v.close=function(){return he("h"),this};v.stroke=function(){return he("S"),this},v.fill=function(S){return hr("f",S),this},v.fillEvenOdd=function(S){return hr("f*",S),this},v.fillStroke=function(S){return hr("B",S),this},v.fillStrokeEvenOdd=function(S){return hr("B*",S),this};var hr=function(S,re){Wn(re)==="object"?fc(re,S):he(S)},Al=function(S){S===null||j===E.ADVANCED&&S===void 0||(S=dc(S),he(S))};function Sl(S,re,be,Se,Fe){var Je=new Ul(re||this.boundingBox,be||this.xStep,Se||this.yStep,this.gState,Fe||this.matrix);Je.stream=this.stream;var rt=S+"$$"+this.cloneIndex+++"$$";return Yr(rt,Je),Je}var fc=function(S,re){var be=Yn[S.key],Se=Pt[be];if(Se instanceof Go)he("q"),he($a(re)),Se.gState&&v.setGState(Se.gState),he(S.matrix.toString()+" cm"),he("/"+be+" sh"),he("Q");else if(Se instanceof Ul){var Fe=new Dt(1,0,0,-1,0,Ri());S.matrix&&(Fe=Fe.multiply(S.matrix||Wr),be=Sl.call(Se,S.key,S.boundingBox,S.xStep,S.yStep,Fe).id),he("q"),he("/Pattern cs"),he("/"+be+" scn"),Se.gState&&v.setGState(Se.gState),he(re),he("Q")}},$a=function(S){switch(S){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Cl=v.moveTo=function(S,re){return he(B(k(S))+" "+B(J(re))+" m"),this},pa=v.lineTo=function(S,re){return he(B(k(S))+" "+B(J(re))+" l"),this},ta=v.curveTo=function(S,re,be,Se,Fe,Je){return he([B(k(S)),B(J(re)),B(k(be)),B(J(Se)),B(k(Fe)),B(J(Je)),"c"].join(" ")),this};v.__private__.line=v.line=function(S,re,be,Se,Fe){if(isNaN(S)||isNaN(re)||isNaN(be)||isNaN(Se)||!Lt(Fe))throw new Error("Invalid arguments passed to jsPDF.line");return j===E.COMPAT?this.lines([[be-S,Se-re]],S,re,[1,1],Fe||"S"):this.lines([[be-S,Se-re]],S,re,[1,1]).stroke()},v.__private__.lines=v.lines=function(S,re,be,Se,Fe,Je){var rt,At,kt,Kt,Jt,pn,lr,Un,mr,hi,gr,xa;if(typeof S=="number"&&(xa=be,be=re,re=S,S=xa),Se=Se||[1,1],Je=Je||!1,isNaN(re)||isNaN(be)||!Array.isArray(S)||!Array.isArray(Se)||!Lt(Fe)||typeof Je!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Cl(re,be),rt=Se[0],At=Se[1],Kt=S.length,hi=re,gr=be,kt=0;kt<Kt;kt++)(Jt=S[kt]).length===2?(hi=Jt[0]*rt+hi,gr=Jt[1]*At+gr,pa(hi,gr)):(pn=Jt[0]*rt+hi,lr=Jt[1]*At+gr,Un=Jt[2]*rt+hi,mr=Jt[3]*At+gr,hi=Jt[4]*rt+hi,gr=Jt[5]*At+gr,ta(pn,lr,Un,mr,hi,gr));return Je&&tn(),Al(Fe),this},v.path=function(S){for(var re=0;re<S.length;re++){var be=S[re],Se=be.c;switch(be.op){case"m":Cl(Se[0],Se[1]);break;case"l":pa(Se[0],Se[1]);break;case"c":ta.apply(this,Se);break;case"h":tn()}}return this},v.__private__.rect=v.rect=function(S,re,be,Se,Fe){if(isNaN(S)||isNaN(re)||isNaN(be)||isNaN(Se)||!Lt(Fe))throw new Error("Invalid arguments passed to jsPDF.rect");return j===E.COMPAT&&(Se=-Se),he([B(k(S)),B(J(re)),B(k(be)),B(k(Se)),"re"].join(" ")),Al(Fe),this},v.__private__.triangle=v.triangle=function(S,re,be,Se,Fe,Je,rt){if(isNaN(S)||isNaN(re)||isNaN(be)||isNaN(Se)||isNaN(Fe)||isNaN(Je)||!Lt(rt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[be-S,Se-re],[Fe-be,Je-Se],[S-Fe,re-Je]],S,re,[1,1],rt,!0),this},v.__private__.roundedRect=v.roundedRect=function(S,re,be,Se,Fe,Je,rt){if(isNaN(S)||isNaN(re)||isNaN(be)||isNaN(Se)||isNaN(Fe)||isNaN(Je)||!Lt(rt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var At=4/3*(Math.SQRT2-1);return Fe=Math.min(Fe,.5*be),Je=Math.min(Je,.5*Se),this.lines([[be-2*Fe,0],[Fe*At,0,Fe,Je-Je*At,Fe,Je],[0,Se-2*Je],[0,Je*At,-Fe*At,Je,-Fe,Je],[2*Fe-be,0],[-Fe*At,0,-Fe,-Je*At,-Fe,-Je],[0,2*Je-Se],[0,-Je*At,Fe*At,-Je,Fe,-Je]],S+Fe,re,[1,1],rt,!0),this},v.__private__.ellipse=v.ellipse=function(S,re,be,Se,Fe){if(isNaN(S)||isNaN(re)||isNaN(be)||isNaN(Se)||!Lt(Fe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Je=4/3*(Math.SQRT2-1)*be,rt=4/3*(Math.SQRT2-1)*Se;return Cl(S+be,re),ta(S+be,re-rt,S+Je,re-Se,S,re-Se),ta(S-Je,re-Se,S-be,re-rt,S-be,re),ta(S-be,re+rt,S-Je,re+Se,S,re+Se),ta(S+Je,re+Se,S+be,re+rt,S+be,re),Al(Fe),this},v.__private__.circle=v.circle=function(S,re,be,Se){if(isNaN(S)||isNaN(re)||isNaN(be)||!Lt(Se))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(S,re,be,be,Se)},v.setFont=function(S,re,be){return be&&(re=ie(re,be)),qt=wr(S,re,{disableWarning:!1}),this};var Vs=v.__private__.getFont=v.getFont=function(){return Te[wr.apply(v,arguments)]};v.__private__.getFontList=v.getFontList=function(){var S,re,be={};for(S in lt)if(lt.hasOwnProperty(S))for(re in be[S]=[],lt[S])lt[S].hasOwnProperty(re)&&be[S].push(re);return be},v.addFont=function(S,re,be,Se,Fe){var Je=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Je.indexOf(arguments[3])!==-1?Fe=arguments[3]:arguments[3]&&Je.indexOf(arguments[3])==-1&&(be=ie(be,Se)),Fe=Fe||"Identity-H",Us.call(this,S,re,be,Fe)};var gs,es=e.lineWidth||.200025,ka=v.__private__.getLineWidth=v.getLineWidth=function(){return es},ni=v.__private__.setLineWidth=v.setLineWidth=function(S){return es=S,he(B(k(S))+" w"),this};v.__private__.setLineDash=Vt.API.setLineDash=Vt.API.setLineDashPattern=function(S,re){if(S=S||[],re=re||0,isNaN(re)||!Array.isArray(S))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return S=S.map(function(be){return B(k(be))}).join(" "),re=B(k(re)),he("["+S+"] "+re+" d"),this};var El=v.__private__.getLineHeight=v.getLineHeight=function(){return ct*gs};v.__private__.getLineHeight=v.getLineHeight=function(){return ct*gs};var Tl=v.__private__.setLineHeightFactor=v.setLineHeightFactor=function(S){return typeof(S=S||1.15)=="number"&&(gs=S),this},_l=v.__private__.getLineHeightFactor=v.getLineHeightFactor=function(){return gs};Tl(e.lineHeight);var Pa=v.__private__.getHorizontalCoordinate=function(S){return k(S)},ts=v.__private__.getVerticalCoordinate=function(S){return j===E.ADVANCED?S:Wt[q].mediaBox.topRightY-Wt[q].mediaBox.bottomLeftY-k(S)},wu=v.__private__.getHorizontalCoordinateString=v.getHorizontalCoordinateString=function(S){return B(Pa(S))},gn=v.__private__.getVerticalCoordinateString=v.getVerticalCoordinateString=function(S){return B(ts(S))},na=e.strokeColor||"0 G";v.__private__.getStrokeColor=v.getDrawColor=function(){return er(na)},v.__private__.setStrokeColor=v.setDrawColor=function(S,re,be,Se){return na=ti({ch1:S,ch2:re,ch3:be,ch4:Se,pdfColorType:"draw",precision:2}),he(na),this};var ps=e.fillColor||"0 g";v.__private__.getFillColor=v.getFillColor=function(){return er(ps)},v.__private__.setFillColor=v.setFillColor=function(S,re,be,Se){return ps=ti({ch1:S,ch2:re,ch3:be,ch4:Se,pdfColorType:"fill",precision:2}),he(ps),this};var Di=e.textColor||"0 g",Nu=v.__private__.getTextColor=v.getTextColor=function(){return er(Di)};v.__private__.setTextColor=v.setTextColor=function(S,re,be,Se){return Di=ti({ch1:S,ch2:re,ch3:be,ch4:Se,pdfColorType:"text",precision:3}),this};var Ye=e.charSpace,sn=v.__private__.getCharSpace=v.getCharSpace=function(){return parseFloat(Ye||0)};v.__private__.setCharSpace=v.setCharSpace=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ye=S,this};var Nr=0;v.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},v.__private__.setLineCap=v.setLineCap=function(S){var re=v.CapJoinStyles[S];if(re===void 0)throw new Error("Line cap style of '"+S+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Nr=re,he(re+" J"),this};var xs=0;v.__private__.setLineJoin=v.setLineJoin=function(S){var re=v.CapJoinStyles[S];if(re===void 0)throw new Error("Line join style of '"+S+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return xs=re,he(re+" j"),this},v.__private__.setLineMiterLimit=v.__private__.setMiterLimit=v.setLineMiterLimit=v.setMiterLimit=function(S){if(S=S||0,isNaN(S))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return he(B(k(S))+" M"),this},v.GState=_d,v.setGState=function(S){(S=typeof S=="string"?kn[en[S]]:jl(null,S)).equals($r)||(he("/"+S.id+" gs"),$r=S)};var jl=function(S,re){if(!S||!en[S]){var be=!1;for(var Se in kn)if(kn.hasOwnProperty(Se)&&kn[Se].equals(re)){be=!0;break}if(be)re=kn[Se];else{var Fe="GS"+(Object.keys(kn).length+1).toString(10);kn[Fe]=re,re.id=Fe}return S&&(en[S]=re.id),nn.publish("addGState",re),re}};v.addGState=function(S,re){return jl(S,re),this},v.saveGraphicsState=function(){return he("q"),It.push({key:qt,size:ct,color:Di}),this},v.restoreGraphicsState=function(){he("Q");var S=It.pop();return qt=S.key,ct=S.size,Di=S.color,$r=null,this},v.setCurrentTransformationMatrix=function(S){return he(S.toString()+" cm"),this},v.comment=function(S){return he("#"+S),this};var vo=function(S,re){var be=S||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return be},set:function(Je){isNaN(Je)||(be=parseFloat(Je))}});var Se=re||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Se},set:function(Je){isNaN(Je)||(Se=parseFloat(Je))}});var Fe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Fe},set:function(Je){Fe=Je.toString()}}),this},Il=function(S,re,be,Se){vo.call(this,S,re),this.type="rect";var Fe=be||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Fe},set:function(rt){isNaN(rt)||(Fe=parseFloat(rt))}});var Je=Se||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Je},set:function(rt){isNaN(rt)||(Je=parseFloat(rt))}}),this},Dl=function(){this.page=$n,this.currentPage=q,this.pages=_e.slice(0),this.pagesContext=Wt.slice(0),this.x=hn,this.y=Tt,this.matrix=gt,this.width=Fn(q),this.height=Ri(q),this.outputDestination=Be,this.id="",this.objectNumber=-1};Dl.prototype.restore=function(){$n=this.page,q=this.currentPage,Wt=this.pagesContext,_e=this.pages,hn=this.x,Tt=this.y,gt=this.matrix,ys(q,this.width),_n(q,this.height),Be=this.outputDestination};var wo=function(S,re,be,Se,Fe){vi.push(new Dl),$n=q=0,_e=[],hn=S,Tt=re,gt=Fe,Dn([be,Se])},Ar=function(S){if(ei[S])vi.pop().restore();else{var re=new Dl,be="Xo"+(Object.keys(yn).length+1).toString(10);re.id=be,ei[S]=be,yn[be]=re,nn.publish("addFormObject",re),vi.pop().restore()}};for(var bs in v.beginFormObject=function(S,re,be,Se,Fe){return wo(S,re,be,Se,Fe),this},v.endFormObject=function(S){return Ar(S),this},v.doFormObject=function(S,re){var be=yn[ei[S]];return he("q"),he(re.toString()+" cm"),he("/"+be.id+" Do"),he("Q"),this},v.getFormObject=function(S){var re=yn[ei[S]];return{x:re.x,y:re.y,width:re.width,height:re.height,matrix:re.matrix}},v.save=function(S,re){return S=S||"generated.pdf",(re=re||{}).returnPromise=re.returnPromise||!1,re.returnPromise===!1?(Bl(zs(Tn()),S),typeof Bl.unload=="function"&&Xt.setTimeout&&setTimeout(Bl.unload,911),this):new Promise(function(be,Se){try{var Fe=Bl(zs(Tn()),S);typeof Bl.unload=="function"&&Xt.setTimeout&&setTimeout(Bl.unload,911),be(Fe)}catch(Je){Se(Je.message)}})},Vt.API)Vt.API.hasOwnProperty(bs)&&(bs==="events"&&Vt.API.events.length?function(S,re){var be,Se,Fe;for(Fe=re.length-1;Fe!==-1;Fe--)be=re[Fe][0],Se=re[Fe][1],S.subscribe.apply(S,[be].concat(typeof Se=="function"?[Se]:Se))}(nn,Vt.API.events):v[bs]=Vt.API[bs]);var Fn=v.getPageWidth=function(S){return(Wt[S=S||q].mediaBox.topRightX-Wt[S].mediaBox.bottomLeftX)/xt},ys=v.setPageWidth=function(S,re){Wt[S].mediaBox.topRightX=re*xt+Wt[S].mediaBox.bottomLeftX},Ri=v.getPageHeight=function(S){return(Wt[S=S||q].mediaBox.topRightY-Wt[S].mediaBox.bottomLeftY)/xt},_n=v.setPageHeight=function(S,re){Wt[S].mediaBox.topRightY=re*xt+Wt[S].mediaBox.bottomLeftY};return v.internal={pdfEscape:kr,getStyle:dc,getFont:Vs,getFontSize:mt,getCharSpace:sn,getTextColor:Nu,getLineHeight:El,getLineHeightFactor:_l,getLineWidth:ka,write:ot,getHorizontalCoordinate:Pa,getVerticalCoordinate:ts,getCoordinateString:wu,getVerticalCoordinateString:gn,collections:{},newObject:vn,newAdditionalObject:wt,newObjectDeferred:Pn,newObjectDeferredBegin:Xn,getFilters:_i,putStream:di,events:nn,scaleFactor:xt,pageSize:{getWidth:function(){return Fn(q)},setWidth:function(S){ys(q,S)},getHeight:function(){return Ri(q)},setHeight:function(S){_n(q,S)}},encryptionOptions:A,encryption:Fr,getEncryptor:Nl,output:bo,getNumberOfPages:Ot,pages:_e,out:he,f2:Z,f3:F,getPageInfo:uc,getPageInfoByObjId:jt,getCurrentPageInfo:Hs,getPDFVersion:D,Point:vo,Rectangle:Il,Matrix:Dt,hasHotfix:yo},Object.defineProperty(v.internal.pageSize,"width",{get:function(){return Fn(q)},set:function(S){ys(q,S)},enumerable:!0,configurable:!0}),Object.defineProperty(v.internal.pageSize,"height",{get:function(){return Ri(q)},set:function(S){_n(q,S)},enumerable:!0,configurable:!0}),Mt.call(v,Pe),qt="F1",Pr(o,n),nn.publish("initialized"),v}_c.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},_c.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},_c.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},_c.prototype.processOwnerPassword=function(e,t){return Rm(Dm(t).substr(0,5),e)},_c.prototype.encryptor=function(e,t){var n=Dm(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(r){return Rm(n,r)}},_d.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||Wn(e)!==Wn(this))return!1;var r=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;r++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&r--;return r===0},Vt.API={events:[]},Vt.version="2.5.2";var Dr=Vt.API,Zg=1,cc=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},wc=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},rn=function(e){return e.toFixed(2)},Mo=function(e){return e.toFixed(5)};Dr.__acroform__={};var ha=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},px=function(e){return e*Zg},As=function(e){var t=new Ev,n=_t.internal.getHeight(e)||0,r=_t.internal.getWidth(e)||0;return t.BBox=[0,0,Number(rn(r)),Number(rn(n))],t},uA=Dr.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},dA=Dr.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},fA=Dr.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},Vr=Dr.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return fA(e,t-1)},qr=Dr.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return uA(e,t-1)},Gr=Dr.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return dA(e,t-1)},hA=Dr.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,r=t.internal.getVerticalCoordinate,o=e[0],l=e[1],f=e[2],m=e[3],g={};return g.lowerLeft_X=n(o)||0,g.lowerLeft_Y=r(l+m)||0,g.upperRight_X=n(o+f)||0,g.upperRight_Y=r(l)||0,[Number(rn(g.lowerLeft_X)),Number(rn(g.lowerLeft_Y)),Number(rn(g.upperRight_X)),Number(rn(g.upperRight_Y))]},mA=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,r=Om(e,n),o=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+o+" "+rn(r.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC");var l=As(e);return l.scope=e.scope,l.stream=t.join(`
`),l}},Om=function(e,t){var n=e.fontSize===0?e.maxFontSize:e.fontSize,r={text:"",fontSize:""},o=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");o=e.multiline?o.map(function(F){return F.split(`
`)}):o.map(function(F){return[F]});var l=n,f=_t.internal.getHeight(e)||0;f=f<0?-f:f;var m=_t.internal.getWidth(e)||0;m=m<0?-m:m;var g=function(F,k,Q){if(F+1<o.length){var J=k+" "+o[F+1][0];return Lf(J,e,Q).width<=m-4}return!1};l++;e:for(;l>0;){t="",l--;var x,A,N=Lf("3",e,l).height,T=e.multiline?f-l:(f-N)/2,v=T+=2,O=0,D=0,P=0;if(l<=0){t=`(...) Tj
`,t+="% Width of Text: "+Lf(t,e,l=12).width+", FieldWidth:"+m+`
`;break}for(var C="",E=0,j=0;j<o.length;j++)if(o.hasOwnProperty(j)){var V=!1;if(o[j].length!==1&&P!==o[j].length-1){if((N+2)*(E+2)+2>f)continue e;C+=o[j][P],V=!0,D=j,j--}else{C=(C+=o[j][P]+" ").substr(C.length-1)==" "?C.substr(0,C.length-1):C;var W=parseInt(j),ie=g(W,C,l),B=j>=o.length-1;if(ie&&!B){C+=" ",P=0;continue}if(ie||B){if(B)D=W;else if(e.multiline&&(N+2)*(E+2)+2>f)continue e}else{if(!e.multiline||(N+2)*(E+2)+2>f)continue e;D=W}}for(var R="",M=O;M<=D;M++){var Z=o[M];if(e.multiline){if(M===D){R+=Z[P]+" ",P=(P+1)%Z.length;continue}if(M===O){R+=Z[Z.length-1]+" ";continue}}R+=Z[0]+" "}switch(R=R.substr(R.length-1)==" "?R.substr(0,R.length-1):R,A=Lf(R,e,l).width,e.textAlign){case"right":x=m-A-2;break;case"center":x=(m-A)/2;break;case"left":default:x=2}t+=rn(x)+" "+rn(v)+` Td
`,t+="("+cc(R)+`) Tj
`,t+=-rn(x)+` 0 Td
`,v=-(l+2),A=0,O=V?D:D+1,E++,C=""}break}return r.text=t,r.fontSize=l,r},Lf=function(e,t,n){var r=t.scope.internal.getFont(t.fontName,t.fontStyle),o=t.scope.getStringUnitWidth(e,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:o}},gA={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},pA=function(e,t){var n={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},xA=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var r=n,o=e[n];t.internal.newObjectDeferredBegin(o.objId,!0),Wn(o)==="object"&&typeof o.putStream=="function"&&o.putStream(),delete e[r]}},bA=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(fs.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(gA)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Zg=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new Tv,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var o in r)if(r.hasOwnProperty(o)){var l=r[o];l.objId=void 0,l.hasAnnotation&&pA(l,n)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(n){(function(r,o){var l=!r;for(var f in r||(o.internal.newObjectDeferredBegin(o.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),o.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||o.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(f)){var m=r[f],g=[],x=m.Rect;if(m.Rect&&(m.Rect=hA(m.Rect,o)),o.internal.newObjectDeferredBegin(m.objId,!0),m.DA=_t.createDefaultAppearanceStream(m),Wn(m)==="object"&&typeof m.getKeyValueListForStream=="function"&&(g=m.getKeyValueListForStream()),m.Rect=x,m.hasAppearanceStream&&!m.appearanceStreamContent){var A=mA(m);g.push({key:"AP",value:"<</N "+A+">>"}),o.internal.acroformPlugin.xForms.push(A)}if(m.appearanceStreamContent){var N="";for(var T in m.appearanceStreamContent)if(m.appearanceStreamContent.hasOwnProperty(T)){var v=m.appearanceStreamContent[T];if(N+="/"+T+" ",N+="<<",Object.keys(v).length>=1||Array.isArray(v)){for(var f in v)if(v.hasOwnProperty(f)){var O=v[f];typeof O=="function"&&(O=O.call(o,m)),N+="/"+f+" "+O+" ",o.internal.acroformPlugin.xForms.indexOf(O)>=0||o.internal.acroformPlugin.xForms.push(O)}}else typeof(O=v)=="function"&&(O=O.call(o,m)),N+="/"+f+" "+O,o.internal.acroformPlugin.xForms.indexOf(O)>=0||o.internal.acroformPlugin.xForms.push(O);N+=">>"}g.push({key:"AP",value:`<<
`+N+">>"})}o.internal.putStream({additionalKeyValues:g,objectId:m.objId}),o.internal.out("endobj")}l&&xA(o.internal.acroformPlugin.xForms,o)})(n,e)}),e.internal.acroformPlugin.isInitialized=!0}},Cv=Dr.__acroform__.arrayToPdfArray=function(e,t,n){var r=function(f){return f};if(Array.isArray(e)){for(var o="[",l=0;l<e.length;l++)switch(l!==0&&(o+=" "),Wn(e[l])){case"boolean":case"number":case"object":o+=e[l].toString();break;case"string":e[l].substr(0,1)!=="/"?(t!==void 0&&n&&(r=n.internal.getEncryptor(t)),o+="("+cc(r(e[l].toString()))+")"):o+=e[l].toString()}return o+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},m1=function(e,t,n){var r=function(o){return o};return t!==void 0&&n&&(r=n.internal.getEncryptor(t)),(e=e||"").toString(),e="("+cc(r(e))+")"},Ts=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ts.prototype.toString=function(){return this.objId+" 0 R"},Ts.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Ts.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(l){return l!="content"&&l!="appearanceStreamContent"&&l!="scope"&&l!="objId"&&l.substring(0,1)!="_"});for(var n in t)if(Object.getOwnPropertyDescriptor(this,t[n]).configurable===!1){var r=t[n],o=this[r];o&&(Array.isArray(o)?e.push({key:r,value:Cv(o,this.objId,this.scope)}):o instanceof Ts?(o.scope=this.scope,e.push({key:r,value:o.objId+" 0 R"})):typeof o!="function"&&e.push({key:r,value:o}))}return e};var Ev=function(){Ts.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){e=n.trim()},get:function(){return e||null}})};ha(Ev,Ts);var Tv=function(){Ts.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+cc(n(e))+")"}},set:function(n){e=n}})};ha(Tv,Ts);var fs=function e(){Ts.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(C){if(isNaN(C))throw new Error('Invalid value "'+C+'" for attribute F supplied.');t=C}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Vr(t,3)},set:function(C){C?this.F=qr(t,3):this.F=Gr(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(C){if(isNaN(C))throw new Error('Invalid value "'+C+'" for attribute Ff supplied.');n=C}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(C){r=C!==void 0?C:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(C){r[0]=C}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(C){r[1]=C}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(C){r[2]=C}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(C){r[3]=C}});var o="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return o},set:function(C){switch(C){case"/Btn":case"/Tx":case"/Ch":case"/Sig":o=C;break;default:throw new Error('Invalid value "'+C+'" for attribute FT supplied.')}}});var l=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!l||l.length<1){if(this instanceof Oh)return;l="FieldObject"+e.FieldNum++}var C=function(E){return E};return this.scope&&(C=this.scope.internal.getEncryptor(this.objId)),"("+cc(C(l))+")"},set:function(C){l=C.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return l},set:function(C){l=C}});var f="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return f},set:function(C){f=C}});var m="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return m},set:function(C){m=C}});var g=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return g},set:function(C){g=C}});var x=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return x===void 0?50/Zg:x},set:function(C){x=C}});var A="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return A},set:function(C){A=C}});var N="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!N||this instanceof Oh||this instanceof ol))return m1(N,this.objId,this.scope)},set:function(C){C=C.toString(),N=C}});var T=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(T)return this instanceof si?T:m1(T,this.objId,this.scope)},set:function(C){C=C.toString(),T=this instanceof si?C:C.substr(0,1)==="("?wc(C.substr(1,C.length-2)):wc(C)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof si?wc(T.substr(1,T.length-1)):T},set:function(C){C=C.toString(),T=this instanceof si?"/"+C:C}});var v=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(v)return v},set:function(C){this.V=C}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof si?v:m1(v,this.objId,this.scope)},set:function(C){C=C.toString(),v=this instanceof si?C:C.substr(0,1)==="("?wc(C.substr(1,C.length-2)):wc(C)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof si?wc(v.substr(1,v.length-1)):v},set:function(C){C=C.toString(),v=this instanceof si?"/"+C:C}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var O,D=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return D},set:function(C){C=!!C,D=C}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(O)return O},set:function(C){O=C}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Vr(this.Ff,1)},set:function(C){C?this.Ff=qr(this.Ff,1):this.Ff=Gr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Vr(this.Ff,2)},set:function(C){C?this.Ff=qr(this.Ff,2):this.Ff=Gr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Vr(this.Ff,3)},set:function(C){C?this.Ff=qr(this.Ff,3):this.Ff=Gr(this.Ff,3)}});var P=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(P!==null)return P},set:function(C){if([0,1,2].indexOf(C)===-1)throw new Error('Invalid value "'+C+'" for attribute Q supplied.');P=C}}),Object.defineProperty(this,"textAlign",{get:function(){var C;switch(P){case 0:default:C="left";break;case 1:C="center";break;case 2:C="right"}return C},configurable:!0,enumerable:!0,set:function(C){switch(C){case"right":case 2:P=2;break;case"center":case 1:P=1;break;case"left":case 0:default:P=0}}})};ha(fs,Ts);var Zl=function(){fs.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){e=n}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Cv(t,this.objId,this.scope)},set:function(n){var r,o;o=[],typeof(r=n)=="string"&&(o=function(l,f,m){m||(m=1);for(var g,x=[];g=f.exec(l);)x.push(g[m]);return x}(r,/\((.*?)\)/g)),t=o}}),this.getOptions=function(){return t},this.setOptions=function(n){t=n,this.sort&&t.sort()},this.addOption=function(n){n=(n=n||"").toString(),t.push(n),this.sort&&t.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();t.indexOf(n)!==-1&&(t.splice(t.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Vr(this.Ff,18)},set:function(n){n?this.Ff=qr(this.Ff,18):this.Ff=Gr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Vr(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=qr(this.Ff,19):this.Ff=Gr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Vr(this.Ff,20)},set:function(n){n?(this.Ff=qr(this.Ff,20),t.sort()):this.Ff=Gr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Vr(this.Ff,22)},set:function(n){n?this.Ff=qr(this.Ff,22):this.Ff=Gr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Vr(this.Ff,23)},set:function(n){n?this.Ff=qr(this.Ff,23):this.Ff=Gr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Vr(this.Ff,27)},set:function(n){n?this.Ff=qr(this.Ff,27):this.Ff=Gr(this.Ff,27)}}),this.hasAppearanceStream=!1};ha(Zl,fs);var Ql=function(){Zl.call(this),this.fontName="helvetica",this.combo=!1};ha(Ql,Zl);var Kl=function(){Ql.call(this),this.combo=!0};ha(Kl,Ql);var ld=function(){Kl.call(this),this.edit=!0};ha(ld,Kl);var si=function(){fs.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Vr(this.Ff,15)},set:function(n){n?this.Ff=qr(this.Ff,15):this.Ff=Gr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Vr(this.Ff,16)},set:function(n){n?this.Ff=qr(this.Ff,16):this.Ff=Gr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Vr(this.Ff,17)},set:function(n){n?this.Ff=qr(this.Ff,17):this.Ff=Gr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Vr(this.Ff,26)},set:function(n){n?this.Ff=qr(this.Ff,26):this.Ff=Gr(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(l){return l};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var r,o=[];for(r in o.push("<<"),t)o.push("/"+r+" ("+cc(n(t[r]))+")");return o.push(">>"),o.join(`
`)}},set:function(n){Wn(n)==="object"&&(t=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(n){typeof n=="string"&&(t.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(n){e="/"+n}})};ha(si,fs);var cd=function(){si.call(this),this.pushButton=!0};ha(cd,si);var Jl=function(){si.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};ha(Jl,si);var Oh=function(){var e,t;fs.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(o){e=o}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(o){t=o}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var o=function(m){return m};this.scope&&(o=this.scope.internal.getEncryptor(this.objId));var l,f=[];for(l in f.push("<<"),r)f.push("/"+l+" ("+cc(o(r[l]))+")");return f.push(">>"),f.join(`
`)},set:function(o){Wn(o)==="object"&&(r=o)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(o){typeof o=="string"&&(r.CA=o)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(o){n=o}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(o){n="/"+o}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=_t.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ha(Oh,fs),Jl.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},Jl.prototype.createOption=function(e){var t=new Oh;return t.Parent=this,t.optionName=e,this.Kids.push(t),yA.call(this.scope,t),t};var ud=function(){si.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=_t.CheckBox.createAppearanceStream()};ha(ud,si);var ol=function(){fs.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Vr(this.Ff,13)},set:function(t){t?this.Ff=qr(this.Ff,13):this.Ff=Gr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Vr(this.Ff,21)},set:function(t){t?this.Ff=qr(this.Ff,21):this.Ff=Gr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Vr(this.Ff,23)},set:function(t){t?this.Ff=qr(this.Ff,23):this.Ff=Gr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Vr(this.Ff,24)},set:function(t){t?this.Ff=qr(this.Ff,24):this.Ff=Gr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Vr(this.Ff,25)},set:function(t){t?this.Ff=qr(this.Ff,25):this.Ff=Gr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Vr(this.Ff,26)},set:function(t){t?this.Ff=qr(this.Ff,26):this.Ff=Gr(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ha(ol,fs);var dd=function(){ol.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Vr(this.Ff,14)},set:function(e){e?this.Ff=qr(this.Ff,14):this.Ff=Gr(this.Ff,14)}}),this.password=!0};ha(dd,ol);var _t={CheckBox:{createAppearanceStream:function(){return{N:{On:_t.CheckBox.YesNormal},D:{On:_t.CheckBox.YesPushDown,Off:_t.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=As(e);t.scope=e.scope;var n=[],r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,o=e.scope.__private__.encodeColorString(e.color),l=Om(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+rn(_t.internal.getWidth(e))+" "+rn(_t.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+rn(l.fontSize)+" Tf "+o),n.push("BT"),n.push(l.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join(`
`),t},YesNormal:function(e){var t=As(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),o=[],l=_t.internal.getHeight(e),f=_t.internal.getWidth(e),m=Om(e,e.caption);return o.push("1 g"),o.push("0 0 "+rn(f)+" "+rn(l)+" re"),o.push("f"),o.push("q"),o.push("0 0 1 rg"),o.push("0 0 "+rn(f-1)+" "+rn(l-1)+" re"),o.push("W"),o.push("n"),o.push("0 g"),o.push("BT"),o.push("/"+n+" "+rn(m.fontSize)+" Tf "+r),o.push(m.text),o.push("ET"),o.push("Q"),t.stream=o.join(`
`),t},OffPushDown:function(e){var t=As(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+rn(_t.internal.getWidth(e))+" "+rn(_t.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:_t.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=_t.RadioButton.Circle.YesNormal,t.D[e]=_t.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=As(e);t.scope=e.scope;var n=[],r=_t.internal.getWidth(e)<=_t.internal.getHeight(e)?_t.internal.getWidth(e)/4:_t.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var o=_t.internal.Bezier_C,l=Number((r*o).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Mo(_t.internal.getWidth(e)/2)+" "+Mo(_t.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+l+" "+l+" "+r+" 0 "+r+" c"),n.push("-"+l+" "+r+" -"+r+" "+l+" -"+r+" 0 c"),n.push("-"+r+" -"+l+" -"+l+" -"+r+" 0 -"+r+" c"),n.push(l+" -"+r+" "+r+" -"+l+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=As(e);t.scope=e.scope;var n=[],r=_t.internal.getWidth(e)<=_t.internal.getHeight(e)?_t.internal.getWidth(e)/4:_t.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var o=Number((2*r).toFixed(5)),l=Number((o*_t.internal.Bezier_C).toFixed(5)),f=Number((r*_t.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Mo(_t.internal.getWidth(e)/2)+" "+Mo(_t.internal.getHeight(e)/2)+" cm"),n.push(o+" 0 m"),n.push(o+" "+l+" "+l+" "+o+" 0 "+o+" c"),n.push("-"+l+" "+o+" -"+o+" "+l+" -"+o+" 0 c"),n.push("-"+o+" -"+l+" -"+l+" -"+o+" 0 -"+o+" c"),n.push(l+" -"+o+" "+o+" -"+l+" "+o+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Mo(_t.internal.getWidth(e)/2)+" "+Mo(_t.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+f+" "+f+" "+r+" 0 "+r+" c"),n.push("-"+f+" "+r+" -"+r+" "+f+" -"+r+" 0 c"),n.push("-"+r+" -"+f+" -"+f+" -"+r+" 0 -"+r+" c"),n.push(f+" -"+r+" "+r+" -"+f+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=As(e);t.scope=e.scope;var n=[],r=_t.internal.getWidth(e)<=_t.internal.getHeight(e)?_t.internal.getWidth(e)/4:_t.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var o=Number((2*r).toFixed(5)),l=Number((o*_t.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Mo(_t.internal.getWidth(e)/2)+" "+Mo(_t.internal.getHeight(e)/2)+" cm"),n.push(o+" 0 m"),n.push(o+" "+l+" "+l+" "+o+" 0 "+o+" c"),n.push("-"+l+" "+o+" -"+o+" "+l+" -"+o+" 0 c"),n.push("-"+o+" -"+l+" -"+l+" -"+o+" 0 -"+o+" c"),n.push(l+" -"+o+" "+o+" -"+l+" "+o+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:_t.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=_t.RadioButton.Cross.YesNormal,t.D[e]=_t.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=As(e);t.scope=e.scope;var n=[],r=_t.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+rn(_t.internal.getWidth(e)-2)+" "+rn(_t.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(rn(r.x1.x)+" "+rn(r.x1.y)+" m"),n.push(rn(r.x2.x)+" "+rn(r.x2.y)+" l"),n.push(rn(r.x4.x)+" "+rn(r.x4.y)+" m"),n.push(rn(r.x3.x)+" "+rn(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=As(e);t.scope=e.scope;var n=_t.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+rn(_t.internal.getWidth(e))+" "+rn(_t.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+rn(_t.internal.getWidth(e)-2)+" "+rn(_t.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(rn(n.x1.x)+" "+rn(n.x1.y)+" m"),r.push(rn(n.x2.x)+" "+rn(n.x2.y)+" l"),r.push(rn(n.x4.x)+" "+rn(n.x4.y)+" m"),r.push(rn(n.x3.x)+" "+rn(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=As(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+rn(_t.internal.getWidth(e))+" "+rn(_t.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};_t.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=_t.internal.getWidth(e),n=_t.internal.getHeight(e),r=Math.min(t,n);return{x1:{x:(t-r)/2,y:(n-r)/2+r},x2:{x:(t-r)/2+r,y:(n-r)/2},x3:{x:(t-r)/2,y:(n-r)/2},x4:{x:(t-r)/2+r,y:(n-r)/2+r}}}},_t.internal.getWidth=function(e){var t=0;return Wn(e)==="object"&&(t=px(e.Rect[2])),t},_t.internal.getHeight=function(e){var t=0;return Wn(e)==="object"&&(t=px(e.Rect[3])),t};var yA=Dr.addField=function(e){if(bA(this,e),!(e instanceof fs))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Dr.AcroFormChoiceField=Zl,Dr.AcroFormListBox=Ql,Dr.AcroFormComboBox=Kl,Dr.AcroFormEditBox=ld,Dr.AcroFormButton=si,Dr.AcroFormPushButton=cd,Dr.AcroFormRadioButton=Jl,Dr.AcroFormCheckBox=ud,Dr.AcroFormTextField=ol,Dr.AcroFormPasswordField=dd,Dr.AcroFormAppearance=_t,Dr.AcroForm={ChoiceField:Zl,ListBox:Ql,ComboBox:Kl,EditBox:ld,Button:si,PushButton:cd,RadioButton:Jl,CheckBox:ud,TextField:ol,PasswordField:dd,Appearance:_t},Vt.AcroForm={ChoiceField:Zl,ListBox:Ql,ComboBox:Kl,EditBox:ld,Button:si,PushButton:cd,RadioButton:Jl,CheckBox:ud,TextField:ol,PasswordField:dd,Appearance:_t};var vA=Vt.AcroForm;function _v(e){return e.reduce(function(t,n,r){return t[n]=r,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=e.__addimage__.getImageFileTypeByImageData=function(F,k){var Q,J,G,Y,z,X=t;if((k=k||t)==="RGBA"||F.data!==void 0&&F.data instanceof Uint8ClampedArray&&"height"in F&&"width"in F)return"RGBA";if(ie(F))for(z in n)for(G=n[z],Q=0;Q<G.length;Q+=1){for(Y=!0,J=0;J<G[Q].length;J+=1)if(G[Q][J]!==void 0&&G[Q][J]!==F[J]){Y=!1;break}if(Y===!0){X=z;break}}else for(z in n)for(G=n[z],Q=0;Q<G.length;Q+=1){for(Y=!0,J=0;J<G[Q].length;J+=1)if(G[Q][J]!==void 0&&G[Q][J]!==F.charCodeAt(J)){Y=!1;break}if(Y===!0){X=z;break}}return X===t&&k!==t&&(X=k),X},o=function F(k){for(var Q=this.internal.write,J=this.internal.putStream,G=(0,this.internal.getFilters)();G.indexOf("FlateEncode")!==-1;)G.splice(G.indexOf("FlateEncode"),1);k.objectId=this.internal.newObject();var Y=[];if(Y.push({key:"Type",value:"/XObject"}),Y.push({key:"Subtype",value:"/Image"}),Y.push({key:"Width",value:k.width}),Y.push({key:"Height",value:k.height}),k.colorSpace===P.INDEXED?Y.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(k.palette.length/3-1)+" "+("sMask"in k&&k.sMask!==void 0?k.objectId+2:k.objectId+1)+" 0 R]"}):(Y.push({key:"ColorSpace",value:"/"+k.colorSpace}),k.colorSpace===P.DEVICE_CMYK&&Y.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Y.push({key:"BitsPerComponent",value:k.bitsPerComponent}),"decodeParameters"in k&&k.decodeParameters!==void 0&&Y.push({key:"DecodeParms",value:"<<"+k.decodeParameters+">>"}),"transparency"in k&&Array.isArray(k.transparency)){for(var z="",X=0,te=k.transparency.length;X<te;X++)z+=k.transparency[X]+" "+k.transparency[X]+" ";Y.push({key:"Mask",value:"["+z+"]"})}k.sMask!==void 0&&Y.push({key:"SMask",value:k.objectId+1+" 0 R"});var ge=k.filter!==void 0?["/"+k.filter]:void 0;if(J({data:k.data,additionalKeyValues:Y,alreadyAppliedFilters:ge,objectId:k.objectId}),Q("endobj"),"sMask"in k&&k.sMask!==void 0){var ue="/Predictor "+k.predictor+" /Colors 1 /BitsPerComponent "+k.bitsPerComponent+" /Columns "+k.width,L={width:k.width,height:k.height,colorSpace:"DeviceGray",bitsPerComponent:k.bitsPerComponent,decodeParameters:ue,data:k.sMask};"filter"in k&&(L.filter=k.filter),F.call(this,L)}if(k.colorSpace===P.INDEXED){var q=this.internal.newObject();J({data:R(new Uint8Array(k.palette)),objectId:q}),Q("endobj")}},l=function(){var F=this.internal.collections.addImage_images;for(var k in F)o.call(this,F[k])},f=function(){var F,k=this.internal.collections.addImage_images,Q=this.internal.write;for(var J in k)Q("/I"+(F=k[J]).index,F.objectId,"0","R")},m=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",l),this.internal.events.subscribe("putXobjectDict",f))},g=function(){var F=this.internal.collections.addImage_images;return m.call(this),F},x=function(){return Object.keys(this.internal.collections.addImage_images).length},A=function(F){return typeof e["process"+F.toUpperCase()]=="function"},N=function(F){return Wn(F)==="object"&&F.nodeType===1},T=function(F,k){if(F.nodeName==="IMG"&&F.hasAttribute("src")){var Q=""+F.getAttribute("src");if(Q.indexOf("data:image/")===0)return od(unescape(Q).split("base64,").pop());var J=e.loadFile(Q,!0);if(J!==void 0)return J}if(F.nodeName==="CANVAS"){if(F.width===0||F.height===0)throw new Error("Given canvas must have data. Canvas width: "+F.width+", height: "+F.height);var G;switch(k){case"PNG":G="image/png";break;case"WEBP":G="image/webp";break;case"JPEG":case"JPG":default:G="image/jpeg"}return od(F.toDataURL(G,1).split("base64,").pop())}},v=function(F){var k=this.internal.collections.addImage_images;if(k){for(var Q in k)if(F===k[Q].alias)return k[Q]}},O=function(F,k,Q){return F||k||(F=-96,k=-96),F<0&&(F=-1*Q.width*72/F/this.internal.scaleFactor),k<0&&(k=-1*Q.height*72/k/this.internal.scaleFactor),F===0&&(F=k*Q.width/Q.height),k===0&&(k=F*Q.height/Q.width),[F,k]},D=function(F,k,Q,J,G,Y){var z=O.call(this,Q,J,G),X=this.internal.getCoordinateString,te=this.internal.getVerticalCoordinateString,ge=g.call(this);if(Q=z[0],J=z[1],ge[G.index]=G,Y){Y*=Math.PI/180;var ue=Math.cos(Y),L=Math.sin(Y),q=function(fe){return fe.toFixed(4)},ee=[q(ue),q(L),q(-1*L),q(ue),0,0,"cm"]}this.internal.write("q"),Y?(this.internal.write([1,"0","0",1,X(F),te(k+J),"cm"].join(" ")),this.internal.write(ee.join(" ")),this.internal.write([X(Q),"0","0",X(J),"0","0","cm"].join(" "))):this.internal.write([X(Q),"0","0",X(J),X(F),te(k+J),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+G.index+" Do"),this.internal.write("Q")},P=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var C=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},E=e.__addimage__.sHashCode=function(F){var k,Q,J=0;if(typeof F=="string")for(Q=F.length,k=0;k<Q;k++)J=(J<<5)-J+F.charCodeAt(k),J|=0;else if(ie(F))for(Q=F.byteLength/2,k=0;k<Q;k++)J=(J<<5)-J+F[k],J|=0;return J},j=e.__addimage__.validateStringAsBase64=function(F){(F=F||"").toString().trim();var k=!0;return F.length===0&&(k=!1),F.length%4!=0&&(k=!1),/^[A-Za-z0-9+/]+$/.test(F.substr(0,F.length-2))===!1&&(k=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(F.substr(-2))===!1&&(k=!1),k},V=e.__addimage__.extractImageFromDataUrl=function(F){var k=(F=F||"").split("base64,"),Q=null;if(k.length===2){var J=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(k[0]);Array.isArray(J)&&(Q={mimeType:J[1],charset:J[2],data:k[1]})}return Q},W=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(F){return W()&&F instanceof ArrayBuffer};var ie=e.__addimage__.isArrayBufferView=function(F){return W()&&typeof Uint32Array<"u"&&(F instanceof Int8Array||F instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&F instanceof Uint8ClampedArray||F instanceof Int16Array||F instanceof Uint16Array||F instanceof Int32Array||F instanceof Uint32Array||F instanceof Float32Array||F instanceof Float64Array)},B=e.__addimage__.binaryStringToUint8Array=function(F){for(var k=F.length,Q=new Uint8Array(k),J=0;J<k;J++)Q[J]=F.charCodeAt(J);return Q},R=e.__addimage__.arrayBufferToBinaryString=function(F){for(var k="",Q=ie(F)?F:new Uint8Array(F),J=0;J<Q.length;J+=8192)k+=String.fromCharCode.apply(null,Q.subarray(J,J+8192));return k};e.addImage=function(){var F,k,Q,J,G,Y,z,X,te;if(typeof arguments[1]=="number"?(k=t,Q=arguments[1],J=arguments[2],G=arguments[3],Y=arguments[4],z=arguments[5],X=arguments[6],te=arguments[7]):(k=arguments[1],Q=arguments[2],J=arguments[3],G=arguments[4],Y=arguments[5],z=arguments[6],X=arguments[7],te=arguments[8]),Wn(F=arguments[0])==="object"&&!N(F)&&"imageData"in F){var ge=F;F=ge.imageData,k=ge.format||k||t,Q=ge.x||Q||0,J=ge.y||J||0,G=ge.w||ge.width||G,Y=ge.h||ge.height||Y,z=ge.alias||z,X=ge.compression||X,te=ge.rotation||ge.angle||te}var ue=this.internal.getFilters();if(X===void 0&&ue.indexOf("FlateEncode")!==-1&&(X="SLOW"),isNaN(Q)||isNaN(J))throw new Error("Invalid coordinates passed to jsPDF.addImage");m.call(this);var L=M.call(this,F,k,z,X);return D.call(this,Q,J,G,Y,L,te),this};var M=function(F,k,Q,J){var G,Y,z;if(typeof F=="string"&&r(F)===t){F=unescape(F);var X=Z(F,!1);(X!==""||(X=e.loadFile(F,!0))!==void 0)&&(F=X)}if(N(F)&&(F=T(F,k)),k=r(F,k),!A(k))throw new Error("addImage does not support files of type '"+k+"', please ensure that a plugin for '"+k+"' support is added.");if(((z=Q)==null||z.length===0)&&(Q=function(te){return typeof te=="string"||ie(te)?E(te):ie(te.data)?E(te.data):null}(F)),(G=v.call(this,Q))||(W()&&(F instanceof Uint8Array||k==="RGBA"||(Y=F,F=B(F))),G=this["process"+k.toUpperCase()](F,x.call(this),Q,function(te){return te&&typeof te=="string"&&(te=te.toUpperCase()),te in e.image_compression?te:C.NONE}(J),Y)),!G)throw new Error("An unknown error occurred whilst processing the image.");return G},Z=e.__addimage__.convertBase64ToBinaryString=function(F,k){var Q;k=typeof k!="boolean"||k;var J,G="";if(typeof F=="string"){J=(Q=V(F))!==null?Q.data:F;try{G=od(J)}catch(Y){if(k)throw j(J)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Y.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return G};e.getImageProperties=function(F){var k,Q,J="";if(N(F)&&(F=T(F)),typeof F=="string"&&r(F)===t&&((J=Z(F,!1))===""&&(J=e.loadFile(F)||""),F=J),Q=r(F),!A(Q))throw new Error("addImage does not support files of type '"+Q+"', please ensure that a plugin for '"+Q+"' support is added.");if(!W()||F instanceof Uint8Array||(F=B(F)),!(k=this["process"+Q.toUpperCase()](F)))throw new Error("An unknown error occurred whilst processing the image");return k.fileType=Q,k}})(Vt.API),function(e){var t=function(n){if(n!==void 0&&n!="")return!0};Vt.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(n){for(var r,o,l,f=this.internal.getCoordinateString,m=this.internal.getVerticalCoordinateString,g=this.internal.getPageInfoByObjId(n.objId),x=n.pageContext.annotations,A=!1,N=0;N<x.length&&!A;N++)switch((r=x[N]).type){case"link":(t(r.options.url)||t(r.options.pageNumber))&&(A=!0);break;case"reference":case"text":case"freetext":A=!0}if(A!=0){this.internal.write("/Annots [");for(var T=0;T<x.length;T++){r=x[T];var v=this.internal.pdfEscape,O=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var D=this.internal.newAdditionalObject(),P=this.internal.newAdditionalObject(),C=this.internal.getEncryptor(D.objId),E=r.title||"Note";l="<</Type /Annot /Subtype /Text "+(o="/Rect ["+f(r.bounds.x)+" "+m(r.bounds.y+r.bounds.h)+" "+f(r.bounds.x+r.bounds.w)+" "+m(r.bounds.y)+"] ")+"/Contents ("+v(C(r.contents))+")",l+=" /Popup "+P.objId+" 0 R",l+=" /P "+g.objId+" 0 R",l+=" /T ("+v(C(E))+") >>",D.content=l;var j=D.objId+" 0 R";l="<</Type /Annot /Subtype /Popup "+(o="/Rect ["+f(r.bounds.x+30)+" "+m(r.bounds.y+r.bounds.h)+" "+f(r.bounds.x+r.bounds.w+30)+" "+m(r.bounds.y)+"] ")+" /Parent "+j,r.open&&(l+=" /Open true"),l+=" >>",P.content=l,this.internal.write(D.objId,"0 R",P.objId,"0 R");break;case"freetext":o="/Rect ["+f(r.bounds.x)+" "+m(r.bounds.y)+" "+f(r.bounds.x+r.bounds.w)+" "+m(r.bounds.y+r.bounds.h)+"] ";var V=r.color||"#000000";l="<</Type /Annot /Subtype /FreeText "+o+"/Contents ("+v(O(r.contents))+")",l+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+V+")",l+=" /Border [0 0 0]",l+=" >>",this.internal.write(l);break;case"link":if(r.options.name){var W=this.annotations._nameMap[r.options.name];r.options.pageNumber=W.page,r.options.top=W.y}else r.options.top||(r.options.top=0);if(o="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",l="",r.options.url)l="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /A <</S /URI /URI ("+v(O(r.options.url))+") >>";else if(r.options.pageNumber)switch(l="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":l+=" /Fit]";break;case"FitH":l+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,l+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var ie=m(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),l+=" /XYZ "+r.options.left+" "+ie+" "+r.options.zoom+"]"}l!=""&&(l+=" >>",this.internal.write(l))}}this.internal.write("]")}}]),e.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},e.link=function(n,r,o,l,f){var m=this.internal.getCurrentPageInfo(),g=this.internal.getCoordinateString,x=this.internal.getVerticalCoordinateString;m.pageContext.annotations.push({finalBounds:{x:g(n),y:x(r),w:g(n+o),h:x(r+l)},options:f,type:"link"})},e.textWithLink=function(n,r,o,l){var f,m,g=this.getTextWidth(n),x=this.internal.getLineHeight()/this.internal.scaleFactor;if(l.maxWidth!==void 0){m=l.maxWidth;var A=this.splitTextToSize(n,m).length;f=Math.ceil(x*A)}else m=g,f=x;return this.text(n,r,o,l),o+=.2*x,l.align==="center"&&(r-=g/2),l.align==="right"&&(r-=g),this.link(r,o-x,m,f,l),g},e.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(Vt.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},o=[1570,1571,1573,1575];e.__arabicParser__={};var l=e.__arabicParser__.isInArabicSubstitutionA=function(D){return t[D.charCodeAt(0)]!==void 0},f=e.__arabicParser__.isArabicLetter=function(D){return typeof D=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(D)},m=e.__arabicParser__.isArabicEndLetter=function(D){return f(D)&&l(D)&&t[D.charCodeAt(0)].length<=2},g=e.__arabicParser__.isArabicAlfLetter=function(D){return f(D)&&o.indexOf(D.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(D){return f(D)&&l(D)&&t[D.charCodeAt(0)].length>=1};var x=e.__arabicParser__.arabicLetterHasFinalForm=function(D){return f(D)&&l(D)&&t[D.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(D){return f(D)&&l(D)&&t[D.charCodeAt(0)].length>=3};var A=e.__arabicParser__.arabicLetterHasMedialForm=function(D){return f(D)&&l(D)&&t[D.charCodeAt(0)].length==4},N=e.__arabicParser__.resolveLigatures=function(D){var P=0,C=n,E="",j=0;for(P=0;P<D.length;P+=1)C[D.charCodeAt(P)]!==void 0?(j++,typeof(C=C[D.charCodeAt(P)])=="number"&&(E+=String.fromCharCode(C),C=n,j=0),P===D.length-1&&(C=n,E+=D.charAt(P-(j-1)),P-=j-1,j=0)):(C=n,E+=D.charAt(P-j),P-=j,j=0);return E};e.__arabicParser__.isArabicDiacritic=function(D){return D!==void 0&&r[D.charCodeAt(0)]!==void 0};var T=e.__arabicParser__.getCorrectForm=function(D,P,C){return f(D)?l(D)===!1?-1:!x(D)||!f(P)&&!f(C)||!f(C)&&m(P)||m(D)&&!f(P)||m(D)&&g(P)||m(D)&&m(P)?0:A(D)&&f(P)&&!m(P)&&f(C)&&x(C)?3:m(D)||!f(C)?1:2:-1},v=function(D){var P=0,C=0,E=0,j="",V="",W="",ie=(D=D||"").split("\\s+"),B=[];for(P=0;P<ie.length;P+=1){for(B.push(""),C=0;C<ie[P].length;C+=1)j=ie[P][C],V=ie[P][C-1],W=ie[P][C+1],f(j)?(E=T(j,V,W),B[P]+=E!==-1?String.fromCharCode(t[j.charCodeAt(0)][E]):j):B[P]+=j;B[P]=N(B[P])}return B.join(" ")},O=e.__arabicParser__.processArabic=e.processArabic=function(){var D,P=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,C=[];if(Array.isArray(P)){var E=0;for(C=[],E=0;E<P.length;E+=1)Array.isArray(P[E])?C.push([v(P[E][0]),P[E][1],P[E][2]]):C.push([v(P[E])]);D=C}else D=v(P);return typeof arguments[0]=="string"?D:(arguments[0].text=D,arguments[0])};e.events.push(["preProcessText",O])}(Vt.API),Vt.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(m){n=m}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(m){r=isNaN(m)||Number.isInteger(m)===!1||m<0?150:m,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var o=300;Object.defineProperty(this,"height",{get:function(){return o},set:function(m){o=isNaN(m)||Number.isInteger(m)===!1||m<0?300:m,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=o+1)}});var l=[];Object.defineProperty(this,"childNodes",{get:function(){return l},set:function(m){l=m}});var f={};Object.defineProperty(this,"style",{get:function(){return f},set:function(m){f=m}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(n,r){var o;if((n=n||"2d")!=="2d")return null;for(o in r)this.pdf.context2d.hasOwnProperty(o)&&(this.pdf.context2d[o]=r[o]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Vt.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),o.call(this))},o=function(){this.internal.__cell__.lastCell=new l,this.internal.__cell__.pages=1},l=function(){var g=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return g},set:function(D){g=D}});var x=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return x},set:function(D){x=D}});var A=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return A},set:function(D){A=D}});var N=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return N},set:function(D){N=D}});var T=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return T},set:function(D){T=D}});var v=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return v},set:function(D){v=D}});var O=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return O},set:function(D){O=D}}),this};l.prototype.clone=function(){return new l(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},l.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(g){return r.call(this),this.internal.__cell__.headerFunction=typeof g=="function"?g:void 0,this},e.getTextDimensions=function(g,x){r.call(this);var A=(x=x||{}).fontSize||this.getFontSize(),N=x.font||this.getFont(),T=x.scaleFactor||this.internal.scaleFactor,v=0,O=0,D=0,P=this;if(!Array.isArray(g)&&typeof g!="string"){if(typeof g!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");g=String(g)}var C=x.maxWidth;C>0?typeof g=="string"?g=this.splitTextToSize(g,C):Object.prototype.toString.call(g)==="[object Array]"&&(g=g.reduce(function(j,V){return j.concat(P.splitTextToSize(V,C))},[])):g=Array.isArray(g)?g:[g];for(var E=0;E<g.length;E++)v<(D=this.getStringUnitWidth(g[E],{font:N})*A)&&(v=D);return v!==0&&(O=g.length),{w:v/=T,h:Math.max((O*A*this.getLineHeightFactor()-A*(this.getLineHeightFactor()-1))/T,0)}},e.cellAddPage=function(){r.call(this),this.addPage();var g=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new l(g.left,g.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var f=e.cell=function(){var g;g=arguments[0]instanceof l?arguments[0]:new l(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var x=this.internal.__cell__.lastCell,A=this.internal.__cell__.padding,N=this.internal.__cell__.margins||t,T=this.internal.__cell__.tableHeaderRow,v=this.internal.__cell__.printHeaders;return x.lineNumber!==void 0&&(x.lineNumber===g.lineNumber?(g.x=(x.x||0)+(x.width||0),g.y=x.y||0):x.y+x.height+g.height+N.bottom>this.getPageHeight()?(this.cellAddPage(),g.y=N.top,v&&T&&(this.printHeaderRow(g.lineNumber,!0),g.y+=T[0].height)):g.y=x.y+x.height||g.y),g.text[0]!==void 0&&(this.rect(g.x,g.y,g.width,g.height,n===!0?"FD":void 0),g.align==="right"?this.text(g.text,g.x+g.width-A,g.y+A,{align:"right",baseline:"top"}):g.align==="center"?this.text(g.text,g.x+g.width/2,g.y+A,{align:"center",baseline:"top",maxWidth:g.width-A-A}):this.text(g.text,g.x+A,g.y+A,{align:"left",baseline:"top",maxWidth:g.width-A-A})),this.internal.__cell__.lastCell=g,this};e.table=function(g,x,A,N,T){if(r.call(this),!A)throw new Error("No data for PDF table.");var v,O,D,P,C=[],E=[],j=[],V={},W={},ie=[],B=[],R=(T=T||{}).autoSize||!1,M=T.printHeaders!==!1,Z=T.css&&T.css["font-size"]!==void 0?16*T.css["font-size"]:T.fontSize||12,F=T.margins||Object.assign({width:this.getPageWidth()},t),k=typeof T.padding=="number"?T.padding:3,Q=T.headerBackgroundColor||"#c8c8c8",J=T.headerTextColor||"#000";if(o.call(this),this.internal.__cell__.printHeaders=M,this.internal.__cell__.margins=F,this.internal.__cell__.table_font_size=Z,this.internal.__cell__.padding=k,this.internal.__cell__.headerBackgroundColor=Q,this.internal.__cell__.headerTextColor=J,this.setFontSize(Z),N==null)E=C=Object.keys(A[0]),j=C.map(function(){return"left"});else if(Array.isArray(N)&&Wn(N[0])==="object")for(C=N.map(function(ge){return ge.name}),E=N.map(function(ge){return ge.prompt||ge.name||""}),j=N.map(function(ge){return ge.align||"left"}),v=0;v<N.length;v+=1)W[N[v].name]=N[v].width*(19.049976/25.4);else Array.isArray(N)&&typeof N[0]=="string"&&(E=C=N,j=C.map(function(){return"left"}));if(R||Array.isArray(N)&&typeof N[0]=="string")for(v=0;v<C.length;v+=1){for(V[P=C[v]]=A.map(function(ge){return ge[P]}),this.setFont(void 0,"bold"),ie.push(this.getTextDimensions(E[v],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),O=V[P],this.setFont(void 0,"normal"),D=0;D<O.length;D+=1)ie.push(this.getTextDimensions(O[D],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);W[P]=Math.max.apply(null,ie)+k+k,ie=[]}if(M){var G={};for(v=0;v<C.length;v+=1)G[C[v]]={},G[C[v]].text=E[v],G[C[v]].align=j[v];var Y=m.call(this,G,W);B=C.map(function(ge){return new l(g,x,W[ge],Y,G[ge].text,void 0,G[ge].align)}),this.setTableHeaderRow(B),this.printHeaderRow(1,!1)}var z=N.reduce(function(ge,ue){return ge[ue.name]=ue.align,ge},{});for(v=0;v<A.length;v+=1){"rowStart"in T&&T.rowStart instanceof Function&&T.rowStart({row:v,data:A[v]},this);var X=m.call(this,A[v],W);for(D=0;D<C.length;D+=1){var te=A[v][C[D]];"cellStart"in T&&T.cellStart instanceof Function&&T.cellStart({row:v,col:D,data:te},this),f.call(this,new l(g,x,W[C[D]],X,te,v+2,z[C[D]]))}}return this.internal.__cell__.table_x=g,this.internal.__cell__.table_y=x,this};var m=function(g,x){var A=this.internal.__cell__.padding,N=this.internal.__cell__.table_font_size,T=this.internal.scaleFactor;return Object.keys(g).map(function(v){var O=g[v];return this.splitTextToSize(O.hasOwnProperty("text")?O.text:O,x[v]-A-A)},this).map(function(v){return this.getLineHeightFactor()*v.length*N/T+A+A},this).reduce(function(v,O){return Math.max(v,O)},0)};e.setTableHeaderRow=function(g){r.call(this),this.internal.__cell__.tableHeaderRow=g},e.printHeaderRow=function(g,x){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var A;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var N=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new l(N[0],N[1],N[2],N[3],void 0,-1)}this.setFont(void 0,"bold");for(var T=[],v=0;v<this.internal.__cell__.tableHeaderRow.length;v+=1){A=this.internal.__cell__.tableHeaderRow[v].clone(),x&&(A.y=this.internal.__cell__.margins.top||0,T.push(A)),A.lineNumber=g;var O=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),f.call(this,A),this.setTextColor(O)}T.length>0&&this.setTableHeaderRow(T),this.setFont(void 0,"normal"),n=!1}}(Vt.API);var jv={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Iv=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Lm=_v(Iv),Dv=[100,200,300,400,500,600,700,800,900],wA=_v(Dv);function Mm(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(l){return jv[l=l||"normal"]?l:"normal"}(e.style),r=function(l){if(!l)return 400;if(typeof l=="number")return l>=100&&l<=900&&l%100==0?l:400;if(/^\d00$/.test(l))return parseInt(l);switch(l){case"bold":return 700;case"normal":default:return 400}}(e.weight),o=function(l){return typeof Lm[l=l||"normal"]=="number"?l:"normal"}(e.stretch);return{family:t,style:n,weight:r,stretch:o,src:e.src||[],ref:e.ref||{name:t,style:[o,n,r].join(" ")}}}function xx(e,t,n,r){var o;for(o=n;o>=0&&o<t.length;o+=r)if(e[t[o]])return e[t[o]];for(o=n;o>=0&&o<t.length;o-=r)if(e[t[o]])return e[t[o]]}var NA={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},bx={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function yx(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function AA(e,t,n){for(var r=(n=n||{}).defaultFontFamily||"times",o=Object.assign({},NA,n.genericFontFamilies||{}),l=null,f=null,m=0;m<t.length;++m)if(o[(l=Mm(t[m])).family]&&(l.family=o[l.family]),e.hasOwnProperty(l.family)){f=e[l.family];break}if(!(f=f||e[r]))throw new Error("Could not find a font-family for the rule '"+yx(l)+"' and default family '"+r+"'.");if(f=function(g,x){if(x[g])return x[g];var A=Lm[g],N=A<=Lm.normal?-1:1,T=xx(x,Iv,A,N);if(!T)throw new Error("Could not find a matching font-stretch value for "+g);return T}(l.stretch,f),f=function(g,x){if(x[g])return x[g];for(var A=jv[g],N=0;N<A.length;++N)if(x[A[N]])return x[A[N]];throw new Error("Could not find a matching font-style for "+g)}(l.style,f),!(f=function(g,x){if(x[g])return x[g];if(g===400&&x[500])return x[500];if(g===500&&x[400])return x[400];var A=wA[g],N=xx(x,Dv,A,g<400?-1:1);if(!N)throw new Error("Could not find a matching font-weight for value "+g);return N}(l.weight,f)))throw new Error("Failed to resolve a font for the rule '"+yx(l)+"'.");return f}function vx(e){return e.trimLeft()}function SA(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function CA(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var Mf,wx,Nx,g1=["times"];(function(e){var t,n,r,o,l,f,m,g,x,A=function(L){return L=L||{},this.isStrokeTransparent=L.isStrokeTransparent||!1,this.strokeOpacity=L.strokeOpacity||1,this.strokeStyle=L.strokeStyle||"#000000",this.fillStyle=L.fillStyle||"#000000",this.isFillTransparent=L.isFillTransparent||!1,this.fillOpacity=L.fillOpacity||1,this.font=L.font||"10px sans-serif",this.textBaseline=L.textBaseline||"alphabetic",this.textAlign=L.textAlign||"left",this.lineWidth=L.lineWidth||1,this.lineJoin=L.lineJoin||"miter",this.lineCap=L.lineCap||"butt",this.path=L.path||[],this.transform=L.transform!==void 0?L.transform.clone():new g,this.globalCompositeOperation=L.globalCompositeOperation||"normal",this.globalAlpha=L.globalAlpha||1,this.clip_path=L.clip_path||[],this.currentPoint=L.currentPoint||new f,this.miterLimit=L.miterLimit||10,this.lastPoint=L.lastPoint||new f,this.lineDashOffset=L.lineDashOffset||0,this.lineDash=L.lineDash||[],this.margin=L.margin||[0,0,0,0],this.prevPageLastElemOffset=L.prevPageLastElemOffset||0,this.ignoreClearRect=typeof L.ignoreClearRect!="boolean"||L.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new N(this),t=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,o=this.internal.getHorizontalCoordinate,l=this.internal.getVerticalCoordinate,f=this.internal.Point,m=this.internal.Rectangle,g=this.internal.Matrix,x=new A}]);var N=function(L){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var q=L;Object.defineProperty(this,"pdf",{get:function(){return q}});var ee=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return ee},set:function(ke){ee=!!ke}});var fe=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return fe},set:function(ke){fe=!!ke}});var ae=0;Object.defineProperty(this,"posX",{get:function(){return ae},set:function(ke){isNaN(ke)||(ae=ke)}});var Ee=0;Object.defineProperty(this,"posY",{get:function(){return Ee},set:function(ke){isNaN(ke)||(Ee=ke)}}),Object.defineProperty(this,"margin",{get:function(){return x.margin},set:function(ke){var he;typeof ke=="number"?he=[ke,ke,ke,ke]:((he=new Array(4))[0]=ke[0],he[1]=ke.length>=2?ke[1]:he[0],he[2]=ke.length>=3?ke[2]:he[0],he[3]=ke.length>=4?ke[3]:he[1]),x.margin=he}});var we=!1;Object.defineProperty(this,"autoPaging",{get:function(){return we},set:function(ke){we=ke}});var xe=0;Object.defineProperty(this,"lastBreak",{get:function(){return xe},set:function(ke){xe=ke}});var Me=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Me},set:function(ke){Me=ke}}),Object.defineProperty(this,"ctx",{get:function(){return x},set:function(ke){ke instanceof A&&(x=ke)}}),Object.defineProperty(this,"path",{get:function(){return x.path},set:function(ke){x.path=ke}});var _e=[];Object.defineProperty(this,"ctxStack",{get:function(){return _e},set:function(ke){_e=ke}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ke){var he;he=T(ke),this.ctx.fillStyle=he.style,this.ctx.isFillTransparent=he.a===0,this.ctx.fillOpacity=he.a,this.pdf.setFillColor(he.r,he.g,he.b,{a:he.a}),this.pdf.setTextColor(he.r,he.g,he.b,{a:he.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ke){var he=T(ke);this.ctx.strokeStyle=he.style,this.ctx.isStrokeTransparent=he.a===0,this.ctx.strokeOpacity=he.a,he.a===0?this.pdf.setDrawColor(255,255,255):(he.a,this.pdf.setDrawColor(he.r,he.g,he.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ke){["butt","round","square"].indexOf(ke)!==-1&&(this.ctx.lineCap=ke,this.pdf.setLineCap(ke))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ke){isNaN(ke)||(this.ctx.lineWidth=ke,this.pdf.setLineWidth(ke))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ke){["bevel","round","miter"].indexOf(ke)!==-1&&(this.ctx.lineJoin=ke,this.pdf.setLineJoin(ke))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ke){isNaN(ke)||(this.ctx.miterLimit=ke,this.pdf.setMiterLimit(ke))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ke){this.ctx.textBaseline=ke}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ke){["right","end","center","left","start"].indexOf(ke)!==-1&&(this.ctx.textAlign=ke)}});var Qe=null;function Be(ke,he){if(Qe===null){var ot=function(ze){var Pe=[];return Object.keys(ze).forEach(function(ct){ze[ct].forEach(function(We){var mt=null;switch(We){case"bold":mt={family:ct,weight:"bold"};break;case"italic":mt={family:ct,style:"italic"};break;case"bolditalic":mt={family:ct,weight:"bold",style:"italic"};break;case"":case"normal":mt={family:ct}}mt!==null&&(mt.ref={name:ct,style:We},Pe.push(mt))})}),Pe}(ke.getFontList());Qe=function(ze){for(var Pe={},ct=0;ct<ze.length;++ct){var We=Mm(ze[ct]),mt=We.family,Ue=We.stretch,it=We.style,Oe=We.weight;Pe[mt]=Pe[mt]||{},Pe[mt][Ue]=Pe[mt][Ue]||{},Pe[mt][Ue][it]=Pe[mt][Ue][it]||{},Pe[mt][Ue][it][Oe]=We}return Pe}(ot.concat(he))}return Qe}var ft=null;Object.defineProperty(this,"fontFaces",{get:function(){return ft},set:function(ke){Qe=null,ft=ke}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ke){var he;if(this.ctx.font=ke,(he=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ke))!==null){var ot=he[1],ze=(he[2],he[3]),Pe=he[4],ct=(he[5],he[6]),We=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Pe)[2];Pe=Math.floor(We==="px"?parseFloat(Pe)*this.pdf.internal.scaleFactor:We==="em"?parseFloat(Pe)*this.pdf.getFontSize():parseFloat(Pe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Pe);var mt=function(yt){var qt,xt,hn=[],Tt=yt.trim();if(Tt==="")return g1;if(Tt in bx)return[bx[Tt]];for(;Tt!=="";){switch(xt=null,qt=(Tt=vx(Tt)).charAt(0)){case'"':case"'":xt=SA(Tt.substring(1),qt);break;default:xt=CA(Tt)}if(xt===null||(hn.push(xt[0]),(Tt=vx(xt[1]))!==""&&Tt.charAt(0)!==","))return g1;Tt=Tt.replace(/^,/,"")}return hn}(ct);if(this.fontFaces){var Ue=AA(Be(this.pdf,this.fontFaces),mt.map(function(yt){return{family:yt,stretch:"normal",weight:ze,style:ot}}));this.pdf.setFont(Ue.ref.name,Ue.ref.style)}else{var it="";(ze==="bold"||parseInt(ze,10)>=700||ot==="bold")&&(it="bold"),ot==="italic"&&(it+="italic"),it.length===0&&(it="normal");for(var Oe="",Ze={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},pt=0;pt<mt.length;pt++){if(this.pdf.internal.getFont(mt[pt],it,{noFallback:!0,disableWarning:!0})!==void 0){Oe=mt[pt];break}if(it==="bolditalic"&&this.pdf.internal.getFont(mt[pt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Oe=mt[pt],it="bold";else if(this.pdf.internal.getFont(mt[pt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Oe=mt[pt],it="normal";break}}if(Oe===""){for(var St=0;St<mt.length;St++)if(Ze[mt[St]]){Oe=Ze[mt[St]];break}}Oe=Oe===""?"Times":Oe,this.pdf.setFont(Oe,it)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ke){this.ctx.globalCompositeOperation=ke}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ke){this.ctx.globalAlpha=ke}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ke){this.ctx.lineDashOffset=ke,ue.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ke){this.ctx.lineDash=ke,ue.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ke){this.ctx.ignoreClearRect=!!ke}})};N.prototype.setLineDash=function(L){this.lineDash=L},N.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},N.prototype.fill=function(){V.call(this,"fill",!1)},N.prototype.stroke=function(){V.call(this,"stroke",!1)},N.prototype.beginPath=function(){this.path=[{type:"begin"}]},N.prototype.moveTo=function(L,q){if(isNaN(L)||isNaN(q))throw nr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var ee=this.ctx.transform.applyToPoint(new f(L,q));this.path.push({type:"mt",x:ee.x,y:ee.y}),this.ctx.lastPoint=new f(L,q)},N.prototype.closePath=function(){var L=new f(0,0),q=0;for(q=this.path.length-1;q!==-1;q--)if(this.path[q].type==="begin"&&Wn(this.path[q+1])==="object"&&typeof this.path[q+1].x=="number"){L=new f(this.path[q+1].x,this.path[q+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new f(L.x,L.y)},N.prototype.lineTo=function(L,q){if(isNaN(L)||isNaN(q))throw nr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var ee=this.ctx.transform.applyToPoint(new f(L,q));this.path.push({type:"lt",x:ee.x,y:ee.y}),this.ctx.lastPoint=new f(ee.x,ee.y)},N.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),V.call(this,null,!0)},N.prototype.quadraticCurveTo=function(L,q,ee,fe){if(isNaN(ee)||isNaN(fe)||isNaN(L)||isNaN(q))throw nr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ae=this.ctx.transform.applyToPoint(new f(ee,fe)),Ee=this.ctx.transform.applyToPoint(new f(L,q));this.path.push({type:"qct",x1:Ee.x,y1:Ee.y,x:ae.x,y:ae.y}),this.ctx.lastPoint=new f(ae.x,ae.y)},N.prototype.bezierCurveTo=function(L,q,ee,fe,ae,Ee){if(isNaN(ae)||isNaN(Ee)||isNaN(L)||isNaN(q)||isNaN(ee)||isNaN(fe))throw nr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var we=this.ctx.transform.applyToPoint(new f(ae,Ee)),xe=this.ctx.transform.applyToPoint(new f(L,q)),Me=this.ctx.transform.applyToPoint(new f(ee,fe));this.path.push({type:"bct",x1:xe.x,y1:xe.y,x2:Me.x,y2:Me.y,x:we.x,y:we.y}),this.ctx.lastPoint=new f(we.x,we.y)},N.prototype.arc=function(L,q,ee,fe,ae,Ee){if(isNaN(L)||isNaN(q)||isNaN(ee)||isNaN(fe)||isNaN(ae))throw nr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Ee=!!Ee,!this.ctx.transform.isIdentity){var we=this.ctx.transform.applyToPoint(new f(L,q));L=we.x,q=we.y;var xe=this.ctx.transform.applyToPoint(new f(0,ee)),Me=this.ctx.transform.applyToPoint(new f(0,0));ee=Math.sqrt(Math.pow(xe.x-Me.x,2)+Math.pow(xe.y-Me.y,2))}Math.abs(ae-fe)>=2*Math.PI&&(fe=0,ae=2*Math.PI),this.path.push({type:"arc",x:L,y:q,radius:ee,startAngle:fe,endAngle:ae,counterclockwise:Ee})},N.prototype.arcTo=function(L,q,ee,fe,ae){throw new Error("arcTo not implemented.")},N.prototype.rect=function(L,q,ee,fe){if(isNaN(L)||isNaN(q)||isNaN(ee)||isNaN(fe))throw nr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(L,q),this.lineTo(L+ee,q),this.lineTo(L+ee,q+fe),this.lineTo(L,q+fe),this.lineTo(L,q),this.lineTo(L+ee,q),this.lineTo(L,q)},N.prototype.fillRect=function(L,q,ee,fe){if(isNaN(L)||isNaN(q)||isNaN(ee)||isNaN(fe))throw nr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!v.call(this)){var ae={};this.lineCap!=="butt"&&(ae.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ae.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(L,q,ee,fe),this.fill(),ae.hasOwnProperty("lineCap")&&(this.lineCap=ae.lineCap),ae.hasOwnProperty("lineJoin")&&(this.lineJoin=ae.lineJoin)}},N.prototype.strokeRect=function(L,q,ee,fe){if(isNaN(L)||isNaN(q)||isNaN(ee)||isNaN(fe))throw nr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");O.call(this)||(this.beginPath(),this.rect(L,q,ee,fe),this.stroke())},N.prototype.clearRect=function(L,q,ee,fe){if(isNaN(L)||isNaN(q)||isNaN(ee)||isNaN(fe))throw nr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(L,q,ee,fe))},N.prototype.save=function(L){L=typeof L!="boolean"||L;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,ee=0;ee<this.pdf.internal.getNumberOfPages();ee++)this.pdf.setPage(ee+1),this.pdf.internal.out("q");if(this.pdf.setPage(q),L){this.ctx.fontSize=this.pdf.internal.getFontSize();var fe=new A(this.ctx);this.ctxStack.push(this.ctx),this.ctx=fe}},N.prototype.restore=function(L){L=typeof L!="boolean"||L;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,ee=0;ee<this.pdf.internal.getNumberOfPages();ee++)this.pdf.setPage(ee+1),this.pdf.internal.out("Q");this.pdf.setPage(q),L&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},N.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var T=function(L){var q,ee,fe,ae;if(L.isCanvasGradient===!0&&(L=L.getColor()),!L)return{r:0,g:0,b:0,a:0,style:L};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(L))q=0,ee=0,fe=0,ae=0;else{var Ee=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(L);if(Ee!==null)q=parseInt(Ee[1]),ee=parseInt(Ee[2]),fe=parseInt(Ee[3]),ae=1;else if((Ee=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(L))!==null)q=parseInt(Ee[1]),ee=parseInt(Ee[2]),fe=parseInt(Ee[3]),ae=parseFloat(Ee[4]);else{if(ae=1,typeof L=="string"&&L.charAt(0)!=="#"){var we=new Nv(L);L=we.ok?we.toHex():"#000000"}L.length===4?(q=L.substring(1,2),q+=q,ee=L.substring(2,3),ee+=ee,fe=L.substring(3,4),fe+=fe):(q=L.substring(1,3),ee=L.substring(3,5),fe=L.substring(5,7)),q=parseInt(q,16),ee=parseInt(ee,16),fe=parseInt(fe,16)}}return{r:q,g:ee,b:fe,a:ae,style:L}},v=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},O=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};N.prototype.fillText=function(L,q,ee,fe){if(isNaN(q)||isNaN(ee)||typeof L!="string")throw nr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(fe=isNaN(fe)?void 0:fe,!v.call(this)){var ae=X(this.ctx.transform.rotation),Ee=this.ctx.transform.scaleX;k.call(this,{text:L,x:q,y:ee,scale:Ee,angle:ae,align:this.textAlign,maxWidth:fe})}},N.prototype.strokeText=function(L,q,ee,fe){if(isNaN(q)||isNaN(ee)||typeof L!="string")throw nr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!O.call(this)){fe=isNaN(fe)?void 0:fe;var ae=X(this.ctx.transform.rotation),Ee=this.ctx.transform.scaleX;k.call(this,{text:L,x:q,y:ee,scale:Ee,renderingMode:"stroke",angle:ae,align:this.textAlign,maxWidth:fe})}},N.prototype.measureText=function(L){if(typeof L!="string")throw nr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var q=this.pdf,ee=this.pdf.internal.scaleFactor,fe=q.internal.getFontSize(),ae=q.getStringUnitWidth(L)*fe/q.internal.scaleFactor,Ee=function(we){var xe=(we=we||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return xe}}),this};return new Ee({width:ae*=Math.round(96*ee/72*1e4)/1e4})},N.prototype.scale=function(L,q){if(isNaN(L)||isNaN(q))throw nr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var ee=new g(L,0,0,q,0,0);this.ctx.transform=this.ctx.transform.multiply(ee)},N.prototype.rotate=function(L){if(isNaN(L))throw nr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var q=new g(Math.cos(L),Math.sin(L),-Math.sin(L),Math.cos(L),0,0);this.ctx.transform=this.ctx.transform.multiply(q)},N.prototype.translate=function(L,q){if(isNaN(L)||isNaN(q))throw nr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var ee=new g(1,0,0,1,L,q);this.ctx.transform=this.ctx.transform.multiply(ee)},N.prototype.transform=function(L,q,ee,fe,ae,Ee){if(isNaN(L)||isNaN(q)||isNaN(ee)||isNaN(fe)||isNaN(ae)||isNaN(Ee))throw nr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var we=new g(L,q,ee,fe,ae,Ee);this.ctx.transform=this.ctx.transform.multiply(we)},N.prototype.setTransform=function(L,q,ee,fe,ae,Ee){L=isNaN(L)?1:L,q=isNaN(q)?0:q,ee=isNaN(ee)?0:ee,fe=isNaN(fe)?1:fe,ae=isNaN(ae)?0:ae,Ee=isNaN(Ee)?0:Ee,this.ctx.transform=new g(L,q,ee,fe,ae,Ee)};var D=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};N.prototype.drawImage=function(L,q,ee,fe,ae,Ee,we,xe,Me){var _e=this.pdf.getImageProperties(L),Qe=1,Be=1,ft=1,ke=1;fe!==void 0&&xe!==void 0&&(ft=xe/fe,ke=Me/ae,Qe=_e.width/fe*xe/fe,Be=_e.height/ae*Me/ae),Ee===void 0&&(Ee=q,we=ee,q=0,ee=0),fe!==void 0&&xe===void 0&&(xe=fe,Me=ae),fe===void 0&&xe===void 0&&(xe=_e.width,Me=_e.height);for(var he,ot=this.ctx.transform.decompose(),ze=X(ot.rotate.shx),Pe=new g,ct=(Pe=(Pe=(Pe=Pe.multiply(ot.translate)).multiply(ot.skew)).multiply(ot.scale)).applyToRectangle(new m(Ee-q*ft,we-ee*ke,fe*Qe,ae*Be)),We=P.call(this,ct),mt=[],Ue=0;Ue<We.length;Ue+=1)mt.indexOf(We[Ue])===-1&&mt.push(We[Ue]);if(j(mt),this.autoPaging)for(var it=mt[0],Oe=mt[mt.length-1],Ze=it;Ze<Oe+1;Ze++){this.pdf.setPage(Ze);var pt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],St=Ze===1?this.posY+this.margin[0]:this.margin[0],yt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],qt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],xt=Ze===1?0:yt+(Ze-2)*qt;if(this.ctx.clip_path.length!==0){var hn=this.path;he=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=E(he,this.posX+this.margin[3],-xt+St+this.ctx.prevPageLastElemOffset),W.call(this,"fill",!0),this.path=hn}var Tt=JSON.parse(JSON.stringify(ct));Tt=E([Tt],this.posX+this.margin[3],-xt+St+this.ctx.prevPageLastElemOffset)[0];var gt=(Ze>it||Ze<Oe)&&D.call(this);gt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],pt,qt,null).clip().discardPath()),this.pdf.addImage(L,"JPEG",Tt.x,Tt.y,Tt.w,Tt.h,null,null,ze),gt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(L,"JPEG",ct.x,ct.y,ct.w,ct.h,null,null,ze)};var P=function(L,q,ee){var fe=[];q=q||this.pdf.internal.pageSize.width,ee=ee||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ae=this.posY+this.ctx.prevPageLastElemOffset;switch(L.type){default:case"mt":case"lt":fe.push(Math.floor((L.y+ae)/ee)+1);break;case"arc":fe.push(Math.floor((L.y+ae-L.radius)/ee)+1),fe.push(Math.floor((L.y+ae+L.radius)/ee)+1);break;case"qct":var Ee=te(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x,L.y);fe.push(Math.floor((Ee.y+ae)/ee)+1),fe.push(Math.floor((Ee.y+Ee.h+ae)/ee)+1);break;case"bct":var we=ge(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x2,L.y2,L.x,L.y);fe.push(Math.floor((we.y+ae)/ee)+1),fe.push(Math.floor((we.y+we.h+ae)/ee)+1);break;case"rect":fe.push(Math.floor((L.y+ae)/ee)+1),fe.push(Math.floor((L.y+L.h+ae)/ee)+1)}for(var xe=0;xe<fe.length;xe+=1)for(;this.pdf.internal.getNumberOfPages()<fe[xe];)C.call(this);return fe},C=function(){var L=this.fillStyle,q=this.strokeStyle,ee=this.font,fe=this.lineCap,ae=this.lineWidth,Ee=this.lineJoin;this.pdf.addPage(),this.fillStyle=L,this.strokeStyle=q,this.font=ee,this.lineCap=fe,this.lineWidth=ae,this.lineJoin=Ee},E=function(L,q,ee){for(var fe=0;fe<L.length;fe++)switch(L[fe].type){case"bct":L[fe].x2+=q,L[fe].y2+=ee;case"qct":L[fe].x1+=q,L[fe].y1+=ee;case"mt":case"lt":case"arc":default:L[fe].x+=q,L[fe].y+=ee}return L},j=function(L){return L.sort(function(q,ee){return q-ee})},V=function(L,q){for(var ee,fe,ae=this.fillStyle,Ee=this.strokeStyle,we=this.lineCap,xe=this.lineWidth,Me=Math.abs(xe*this.ctx.transform.scaleX),_e=this.lineJoin,Qe=JSON.parse(JSON.stringify(this.path)),Be=JSON.parse(JSON.stringify(this.path)),ft=[],ke=0;ke<Be.length;ke++)if(Be[ke].x!==void 0)for(var he=P.call(this,Be[ke]),ot=0;ot<he.length;ot+=1)ft.indexOf(he[ot])===-1&&ft.push(he[ot]);for(var ze=0;ze<ft.length;ze++)for(;this.pdf.internal.getNumberOfPages()<ft[ze];)C.call(this);if(j(ft),this.autoPaging)for(var Pe=ft[0],ct=ft[ft.length-1],We=Pe;We<ct+1;We++){this.pdf.setPage(We),this.fillStyle=ae,this.strokeStyle=Ee,this.lineCap=we,this.lineWidth=Me,this.lineJoin=_e;var mt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ue=We===1?this.posY+this.margin[0]:this.margin[0],it=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Oe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ze=We===1?0:it+(We-2)*Oe;if(this.ctx.clip_path.length!==0){var pt=this.path;ee=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=E(ee,this.posX+this.margin[3],-Ze+Ue+this.ctx.prevPageLastElemOffset),W.call(this,L,!0),this.path=pt}if(fe=JSON.parse(JSON.stringify(Qe)),this.path=E(fe,this.posX+this.margin[3],-Ze+Ue+this.ctx.prevPageLastElemOffset),q===!1||We===0){var St=(We>Pe||We<ct)&&D.call(this);St&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],mt,Oe,null).clip().discardPath()),W.call(this,L,q),St&&this.pdf.restoreGraphicsState()}this.lineWidth=xe}else this.lineWidth=Me,W.call(this,L,q),this.lineWidth=xe;this.path=Qe},W=function(L,q){if((L!=="stroke"||q||!O.call(this))&&(L==="stroke"||q||!v.call(this))){for(var ee,fe,ae=[],Ee=this.path,we=0;we<Ee.length;we++){var xe=Ee[we];switch(xe.type){case"begin":ae.push({begin:!0});break;case"close":ae.push({close:!0});break;case"mt":ae.push({start:xe,deltas:[],abs:[]});break;case"lt":var Me=ae.length;if(Ee[we-1]&&!isNaN(Ee[we-1].x)&&(ee=[xe.x-Ee[we-1].x,xe.y-Ee[we-1].y],Me>0)){for(;Me>=0;Me--)if(ae[Me-1].close!==!0&&ae[Me-1].begin!==!0){ae[Me-1].deltas.push(ee),ae[Me-1].abs.push(xe);break}}break;case"bct":ee=[xe.x1-Ee[we-1].x,xe.y1-Ee[we-1].y,xe.x2-Ee[we-1].x,xe.y2-Ee[we-1].y,xe.x-Ee[we-1].x,xe.y-Ee[we-1].y],ae[ae.length-1].deltas.push(ee);break;case"qct":var _e=Ee[we-1].x+2/3*(xe.x1-Ee[we-1].x),Qe=Ee[we-1].y+2/3*(xe.y1-Ee[we-1].y),Be=xe.x+2/3*(xe.x1-xe.x),ft=xe.y+2/3*(xe.y1-xe.y),ke=xe.x,he=xe.y;ee=[_e-Ee[we-1].x,Qe-Ee[we-1].y,Be-Ee[we-1].x,ft-Ee[we-1].y,ke-Ee[we-1].x,he-Ee[we-1].y],ae[ae.length-1].deltas.push(ee);break;case"arc":ae.push({deltas:[],abs:[],arc:!0}),Array.isArray(ae[ae.length-1].abs)&&ae[ae.length-1].abs.push(xe)}}fe=q?null:L==="stroke"?"stroke":"fill";for(var ot=!1,ze=0;ze<ae.length;ze++)if(ae[ze].arc)for(var Pe=ae[ze].abs,ct=0;ct<Pe.length;ct++){var We=Pe[ct];We.type==="arc"?R.call(this,We.x,We.y,We.radius,We.startAngle,We.endAngle,We.counterclockwise,void 0,q,!ot):Q.call(this,We.x,We.y),ot=!0}else if(ae[ze].close===!0)this.pdf.internal.out("h"),ot=!1;else if(ae[ze].begin!==!0){var mt=ae[ze].start.x,Ue=ae[ze].start.y;J.call(this,ae[ze].deltas,mt,Ue),ot=!0}fe&&M.call(this,fe),q&&Z.call(this)}},ie=function(L){var q=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,ee=q*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return L-ee;case"top":return L+q-ee;case"hanging":return L+q-2*ee;case"middle":return L+q/2-ee;case"ideographic":return L;case"alphabetic":default:return L}},B=function(L){return L+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};N.prototype.createLinearGradient=function(){var L=function(){};return L.colorStops=[],L.addColorStop=function(q,ee){this.colorStops.push([q,ee])},L.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},L.isCanvasGradient=!0,L},N.prototype.createPattern=function(){return this.createLinearGradient()},N.prototype.createRadialGradient=function(){return this.createLinearGradient()};var R=function(L,q,ee,fe,ae,Ee,we,xe,Me){for(var _e=Y.call(this,ee,fe,ae,Ee),Qe=0;Qe<_e.length;Qe++){var Be=_e[Qe];Qe===0&&(Me?F.call(this,Be.x1+L,Be.y1+q):Q.call(this,Be.x1+L,Be.y1+q)),G.call(this,L,q,Be.x2,Be.y2,Be.x3,Be.y3,Be.x4,Be.y4)}xe?Z.call(this):M.call(this,we)},M=function(L){switch(L){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Z=function(){this.pdf.clip(),this.pdf.discardPath()},F=function(L,q){this.pdf.internal.out(n(L)+" "+r(q)+" m")},k=function(L){var q;switch(L.align){case"right":case"end":q="right";break;case"center":q="center";break;case"left":case"start":default:q="left"}var ee=this.pdf.getTextDimensions(L.text),fe=ie.call(this,L.y),ae=B.call(this,fe)-ee.h,Ee=this.ctx.transform.applyToPoint(new f(L.x,fe)),we=this.ctx.transform.decompose(),xe=new g;xe=(xe=(xe=xe.multiply(we.translate)).multiply(we.skew)).multiply(we.scale);for(var Me,_e,Qe,Be=this.ctx.transform.applyToRectangle(new m(L.x,fe,ee.w,ee.h)),ft=xe.applyToRectangle(new m(L.x,ae,ee.w,ee.h)),ke=P.call(this,ft),he=[],ot=0;ot<ke.length;ot+=1)he.indexOf(ke[ot])===-1&&he.push(ke[ot]);if(j(he),this.autoPaging)for(var ze=he[0],Pe=he[he.length-1],ct=ze;ct<Pe+1;ct++){this.pdf.setPage(ct);var We=ct===1?this.posY+this.margin[0]:this.margin[0],mt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ue=this.pdf.internal.pageSize.height-this.margin[2],it=Ue-this.margin[0],Oe=this.pdf.internal.pageSize.width-this.margin[1],Ze=Oe-this.margin[3],pt=ct===1?0:mt+(ct-2)*it;if(this.ctx.clip_path.length!==0){var St=this.path;Me=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=E(Me,this.posX+this.margin[3],-1*pt+We),W.call(this,"fill",!0),this.path=St}var yt=E([JSON.parse(JSON.stringify(ft))],this.posX+this.margin[3],-pt+We+this.ctx.prevPageLastElemOffset)[0];L.scale>=.01&&(_e=this.pdf.internal.getFontSize(),this.pdf.setFontSize(_e*L.scale),Qe=this.lineWidth,this.lineWidth=Qe*L.scale);var qt=this.autoPaging!=="text";if(qt||yt.y+yt.h<=Ue){if(qt||yt.y>=We&&yt.x<=Oe){var xt=qt?L.text:this.pdf.splitTextToSize(L.text,L.maxWidth||Oe-yt.x)[0],hn=E([JSON.parse(JSON.stringify(Be))],this.posX+this.margin[3],-pt+We+this.ctx.prevPageLastElemOffset)[0],Tt=qt&&(ct>ze||ct<Pe)&&D.call(this);Tt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ze,it,null).clip().discardPath()),this.pdf.text(xt,hn.x,hn.y,{angle:L.angle,align:q,renderingMode:L.renderingMode}),Tt&&this.pdf.restoreGraphicsState()}}else yt.y<Ue&&(this.ctx.prevPageLastElemOffset+=Ue-yt.y);L.scale>=.01&&(this.pdf.setFontSize(_e),this.lineWidth=Qe)}else L.scale>=.01&&(_e=this.pdf.internal.getFontSize(),this.pdf.setFontSize(_e*L.scale),Qe=this.lineWidth,this.lineWidth=Qe*L.scale),this.pdf.text(L.text,Ee.x+this.posX,Ee.y+this.posY,{angle:L.angle,align:q,renderingMode:L.renderingMode,maxWidth:L.maxWidth}),L.scale>=.01&&(this.pdf.setFontSize(_e),this.lineWidth=Qe)},Q=function(L,q,ee,fe){ee=ee||0,fe=fe||0,this.pdf.internal.out(n(L+ee)+" "+r(q+fe)+" l")},J=function(L,q,ee){return this.pdf.lines(L,q,ee,null,null)},G=function(L,q,ee,fe,ae,Ee,we,xe){this.pdf.internal.out([t(o(ee+L)),t(l(fe+q)),t(o(ae+L)),t(l(Ee+q)),t(o(we+L)),t(l(xe+q)),"c"].join(" "))},Y=function(L,q,ee,fe){for(var ae=2*Math.PI,Ee=Math.PI/2;q>ee;)q-=ae;var we=Math.abs(ee-q);we<ae&&fe&&(we=ae-we);for(var xe=[],Me=fe?-1:1,_e=q;we>1e-5;){var Qe=_e+Me*Math.min(we,Ee);xe.push(z.call(this,L,_e,Qe)),we-=Math.abs(Qe-_e),_e=Qe}return xe},z=function(L,q,ee){var fe=(ee-q)/2,ae=L*Math.cos(fe),Ee=L*Math.sin(fe),we=ae,xe=-Ee,Me=we*we+xe*xe,_e=Me+we*ae+xe*Ee,Qe=4/3*(Math.sqrt(2*Me*_e)-_e)/(we*Ee-xe*ae),Be=we-Qe*xe,ft=xe+Qe*we,ke=Be,he=-ft,ot=fe+q,ze=Math.cos(ot),Pe=Math.sin(ot);return{x1:L*Math.cos(q),y1:L*Math.sin(q),x2:Be*ze-ft*Pe,y2:Be*Pe+ft*ze,x3:ke*ze-he*Pe,y3:ke*Pe+he*ze,x4:L*Math.cos(ee),y4:L*Math.sin(ee)}},X=function(L){return 180*L/Math.PI},te=function(L,q,ee,fe,ae,Ee){var we=L+.5*(ee-L),xe=q+.5*(fe-q),Me=ae+.5*(ee-ae),_e=Ee+.5*(fe-Ee),Qe=Math.min(L,ae,we,Me),Be=Math.max(L,ae,we,Me),ft=Math.min(q,Ee,xe,_e),ke=Math.max(q,Ee,xe,_e);return new m(Qe,ft,Be-Qe,ke-ft)},ge=function(L,q,ee,fe,ae,Ee,we,xe){var Me,_e,Qe,Be,ft,ke,he,ot,ze,Pe,ct,We,mt,Ue,it=ee-L,Oe=fe-q,Ze=ae-ee,pt=Ee-fe,St=we-ae,yt=xe-Ee;for(_e=0;_e<41;_e++)ze=(he=(Qe=L+(Me=_e/40)*it)+Me*((ft=ee+Me*Ze)-Qe))+Me*(ft+Me*(ae+Me*St-ft)-he),Pe=(ot=(Be=q+Me*Oe)+Me*((ke=fe+Me*pt)-Be))+Me*(ke+Me*(Ee+Me*yt-ke)-ot),_e==0?(ct=ze,We=Pe,mt=ze,Ue=Pe):(ct=Math.min(ct,ze),We=Math.min(We,Pe),mt=Math.max(mt,ze),Ue=Math.max(Ue,Pe));return new m(Math.round(ct),Math.round(We),Math.round(mt-ct),Math.round(Ue-We))},ue=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var L,q,ee=(L=this.ctx.lineDash,q=this.ctx.lineDashOffset,JSON.stringify({lineDash:L,lineDashOffset:q}));this.prevLineDash!==ee&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=ee)}}})(Vt.API),function(e){var t=function(l){var f,m,g,x,A,N,T,v,O,D;for(m=[],g=0,x=(l+=f="\0\0\0\0".slice(l.length%4||4)).length;x>g;g+=4)(A=(l.charCodeAt(g)<<24)+(l.charCodeAt(g+1)<<16)+(l.charCodeAt(g+2)<<8)+l.charCodeAt(g+3))!==0?(N=(A=((A=((A=((A=(A-(D=A%85))/85)-(O=A%85))/85)-(v=A%85))/85)-(T=A%85))/85)%85,m.push(N+33,T+33,v+33,O+33,D+33)):m.push(122);return function(P,C){for(var E=C;E>0;E--)P.pop()}(m,f.length),String.fromCharCode.apply(String,m)+"~>"},n=function(l){var f,m,g,x,A,N=String,T="length",v=255,O="charCodeAt",D="slice",P="replace";for(l[D](-2),l=l[D](0,-2)[P](/\s/g,"")[P]("z","!!!!!"),g=[],x=0,A=(l+=f="uuuuu"[D](l[T]%5||5))[T];A>x;x+=5)m=52200625*(l[O](x)-33)+614125*(l[O](x+1)-33)+7225*(l[O](x+2)-33)+85*(l[O](x+3)-33)+(l[O](x+4)-33),g.push(v&m>>24,v&m>>16,v&m>>8,v&m);return function(C,E){for(var j=E;j>0;j--)C.pop()}(g,f[T]),N.fromCharCode.apply(N,g)},r=function(l){var f=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((l=l.replace(/\s/g,"")).indexOf(">")!==-1&&(l=l.substr(0,l.indexOf(">"))),l.length%2&&(l+="0"),f.test(l)===!1)return"";for(var m="",g=0;g<l.length;g+=2)m+=String.fromCharCode("0x"+(l[g]+l[g+1]));return m},o=function(l){for(var f=new Uint8Array(l.length),m=l.length;m--;)f[m]=l.charCodeAt(m);return l=(f=jm(f)).reduce(function(g,x){return g+String.fromCharCode(x)},"")};e.processDataByFilters=function(l,f){var m=0,g=l||"",x=[];for(typeof(f=f||[])=="string"&&(f=[f]),m=0;m<f.length;m+=1)switch(f[m]){case"ASCII85Decode":case"/ASCII85Decode":g=n(g),x.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":g=t(g),x.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":g=r(g),x.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":g=g.split("").map(function(A){return("0"+A.charCodeAt().toString(16)).slice(-2)}).join("")+">",x.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":g=o(g),x.push("/FlateDecode");break;default:throw new Error('The filter: "'+f[m]+'" is not implemented')}return{data:g,reverseChain:x.reverse().join(" ")}}}(Vt.API),function(e){e.loadFile=function(t,n,r){return function(o,l,f){l=l!==!1,f=typeof f=="function"?f:function(){};var m=void 0;try{m=function(g,x,A){var N=new XMLHttpRequest,T=0,v=function(O){var D=O.length,P=[],C=String.fromCharCode;for(T=0;T<D;T+=1)P.push(C(255&O.charCodeAt(T)));return P.join("")};if(N.open("GET",g,!x),N.overrideMimeType("text/plain; charset=x-user-defined"),x===!1&&(N.onload=function(){N.status===200?A(v(this.responseText)):A(void 0)}),N.send(null),x&&N.status===200)return v(N.responseText)}(o,l,f)}catch{}return m}(t,n,r)},e.loadImageFile=e.loadFile}(Vt.API),function(e){function t(){return(Xt.html2canvas?Promise.resolve(Xt.html2canvas):Sm(()=>import("./html2canvas.esm-CBrSDip1-1756437903414.js"),[])).catch(function(f){return Promise.reject(new Error("Could not load html2canvas: "+f))}).then(function(f){return f.default?f.default:f})}function n(){return(Xt.DOMPurify?Promise.resolve(Xt.DOMPurify):Sm(()=>import("./purify.es-C_uT9hQ1-1756437903414.js"),[])).catch(function(f){return Promise.reject(new Error("Could not load dompurify: "+f))}).then(function(f){return f.default?f.default:f})}var r=function(f){var m=Wn(f);return m==="undefined"?"undefined":m==="string"||f instanceof String?"string":m==="number"||f instanceof Number?"number":m==="function"||f instanceof Function?"function":f&&f.constructor===Array?"array":f&&f.nodeType===1?"element":m==="object"?"object":"unknown"},o=function(f,m){var g=document.createElement(f);for(var x in m.className&&(g.className=m.className),m.innerHTML&&m.dompurify&&(g.innerHTML=m.dompurify.sanitize(m.innerHTML)),m.style)g.style[x]=m.style[x];return g},l=function f(m){var g=Object.assign(f.convert(Promise.resolve()),JSON.parse(JSON.stringify(f.template))),x=f.convert(Promise.resolve(),g);return x=(x=x.setProgress(1,f,1,[f])).set(m)};(l.prototype=Object.create(Promise.prototype)).constructor=l,l.convert=function(f,m){return f.__proto__=m||l.prototype,f},l.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},l.prototype.from=function(f,m){return this.then(function(){switch(m=m||function(g){switch(r(g)){case"string":return"string";case"element":return g.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(f)){case"string":return this.then(n).then(function(g){return this.set({src:o("div",{innerHTML:f,dompurify:g})})});case"element":return this.set({src:f});case"canvas":return this.set({canvas:f});case"img":return this.set({img:f});default:return this.error("Unknown source type.")}})},l.prototype.to=function(f){switch(f){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},l.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var f={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},m=function g(x,A){for(var N=x.nodeType===3?document.createTextNode(x.nodeValue):x.cloneNode(!1),T=x.firstChild;T;T=T.nextSibling)A!==!0&&T.nodeType===1&&T.nodeName==="SCRIPT"||N.appendChild(g(T,A));return x.nodeType===1&&(x.nodeName==="CANVAS"?(N.width=x.width,N.height=x.height,N.getContext("2d").drawImage(x,0,0)):x.nodeName!=="TEXTAREA"&&x.nodeName!=="SELECT"||(N.value=x.value),N.addEventListener("load",function(){N.scrollTop=x.scrollTop,N.scrollLeft=x.scrollLeft},!0)),N}(this.prop.src,this.opt.html2canvas.javascriptEnabled);m.tagName==="BODY"&&(f.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=o("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=o("div",{className:"html2pdf__container",style:f}),this.prop.container.appendChild(m),this.prop.container.firstChild.appendChild(o("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},l.prototype.toCanvas=function(){var f=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(f).then(t).then(function(m){var g=Object.assign({},this.opt.html2canvas);return delete g.onrendered,m(this.prop.container,g)}).then(function(m){(this.opt.html2canvas.onrendered||function(){})(m),this.prop.canvas=m,document.body.removeChild(this.prop.overlay)})},l.prototype.toContext2d=function(){var f=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(f).then(t).then(function(m){var g=this.opt.jsPDF,x=this.opt.fontFaces,A=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,N=Object.assign({async:!0,allowTaint:!0,scale:A,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete N.onrendered,g.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,g.context2d.posX=this.opt.x,g.context2d.posY=this.opt.y,g.context2d.margin=this.opt.margin,g.context2d.fontFaces=x,x)for(var T=0;T<x.length;++T){var v=x[T],O=v.src.find(function(D){return D.format==="truetype"});O&&g.addFont(O.url,v.ref.name,v.ref.style)}return N.windowHeight=N.windowHeight||0,N.windowHeight=N.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):N.windowHeight,g.context2d.save(!0),m(this.prop.container,N)}).then(function(m){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(m),this.prop.canvas=m,document.body.removeChild(this.prop.overlay)})},l.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var f=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=f})},l.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},l.prototype.output=function(f,m,g){return(g=g||"pdf").toLowerCase()==="img"||g.toLowerCase()==="image"?this.outputImg(f,m):this.outputPdf(f,m)},l.prototype.outputPdf=function(f,m){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(f,m)})},l.prototype.outputImg=function(f){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(f){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+f+'" is not supported.'}})},l.prototype.save=function(f){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(f?{filename:f}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},l.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},l.prototype.set=function(f){if(r(f)!=="object")return this;var m=Object.keys(f||{}).map(function(g){if(g in l.template.prop)return function(){this.prop[g]=f[g]};switch(g){case"margin":return this.setMargin.bind(this,f.margin);case"jsPDF":return function(){return this.opt.jsPDF=f.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,f.pageSize);default:return function(){this.opt[g]=f[g]}}},this);return this.then(function(){return this.thenList(m)})},l.prototype.get=function(f,m){return this.then(function(){var g=f in l.template.prop?this.prop[f]:this.opt[f];return m?m(g):g})},l.prototype.setMargin=function(f){return this.then(function(){switch(r(f)){case"number":f=[f,f,f,f];case"array":if(f.length===2&&(f=[f[0],f[1],f[0],f[1]]),f.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=f}).then(this.setPageSize)},l.prototype.setPageSize=function(f){function m(g,x){return Math.floor(g*x/72*96)}return this.then(function(){(f=f||Vt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(f.inner={width:f.width-this.opt.margin[1]-this.opt.margin[3],height:f.height-this.opt.margin[0]-this.opt.margin[2]},f.inner.px={width:m(f.inner.width,f.k),height:m(f.inner.height,f.k)},f.inner.ratio=f.inner.height/f.inner.width),this.prop.pageSize=f})},l.prototype.setProgress=function(f,m,g,x){return f!=null&&(this.progress.val=f),m!=null&&(this.progress.state=m),g!=null&&(this.progress.n=g),x!=null&&(this.progress.stack=x),this.progress.ratio=this.progress.val/this.progress.state,this},l.prototype.updateProgress=function(f,m,g,x){return this.setProgress(f?this.progress.val+f:null,m||null,g?this.progress.n+g:null,x?this.progress.stack.concat(x):null)},l.prototype.then=function(f,m){var g=this;return this.thenCore(f,m,function(x,A){return g.updateProgress(null,null,1,[x]),Promise.prototype.then.call(this,function(N){return g.updateProgress(null,x),N}).then(x,A).then(function(N){return g.updateProgress(1),N})})},l.prototype.thenCore=function(f,m,g){g=g||Promise.prototype.then,f&&(f=f.bind(this)),m&&(m=m.bind(this));var x=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:l.convert(Object.assign({},this),Promise.prototype),A=g.call(x,f,m);return l.convert(A,this.__proto__)},l.prototype.thenExternal=function(f,m){return Promise.prototype.then.call(this,f,m)},l.prototype.thenList=function(f){var m=this;return f.forEach(function(g){m=m.thenCore(g)}),m},l.prototype.catch=function(f){f&&(f=f.bind(this));var m=Promise.prototype.catch.call(this,f);return l.convert(m,this)},l.prototype.catchExternal=function(f){return Promise.prototype.catch.call(this,f)},l.prototype.error=function(f){return this.then(function(){throw new Error(f)})},l.prototype.using=l.prototype.set,l.prototype.saveAs=l.prototype.save,l.prototype.export=l.prototype.output,l.prototype.run=l.prototype.then,Vt.getPageSize=function(f,m,g){if(Wn(f)==="object"){var x=f;f=x.orientation,m=x.unit||m,g=x.format||g}m=m||"mm",g=g||"a4",f=(""+(f||"P")).toLowerCase();var A,N=(""+g).toLowerCase(),T={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(m){case"pt":A=1;break;case"mm":A=72/25.4;break;case"cm":A=72/2.54;break;case"in":A=72;break;case"px":A=.75;break;case"pc":case"em":A=12;break;case"ex":A=6;break;default:throw"Invalid unit: "+m}var v,O=0,D=0;if(T.hasOwnProperty(N))O=T[N][1]/A,D=T[N][0]/A;else try{O=g[1],D=g[0]}catch{throw new Error("Invalid format: "+g)}if(f==="p"||f==="portrait")f="p",D>O&&(v=D,D=O,O=v);else{if(f!=="l"&&f!=="landscape")throw"Invalid orientation: "+f;f="l",O>D&&(v=D,D=O,O=v)}return{width:D,height:O,unit:m,k:A,orientation:f}},e.html=function(f,m){(m=m||{}).callback=m.callback||function(){},m.html2canvas=m.html2canvas||{},m.html2canvas.canvas=m.html2canvas.canvas||this.canvas,m.jsPDF=m.jsPDF||this,m.fontFaces=m.fontFaces?m.fontFaces.map(Mm):null;var g=new l(m);return m.worker?g:g.from(f).doCallback()}}(Vt.API),Vt.API.addJS=function(e){return Nx=e,this.internal.events.subscribe("postPutResources",function(){Mf=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Mf+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),wx=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Nx+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Mf!==void 0&&wx!==void 0&&this.internal.out("/Names <</JavaScript "+Mf+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var o=n.outline.render().split(/\r\n/),l=0;l<o.length;l++){var f=o[l],m=r.exec(f);if(m!=null){var g=m[1];n.internal.newObjectDeferredBegin(g,!1)}n.internal.write(f)}if(this.outline.createNamedDestinations){var x=this.internal.pages.length,A=[];for(l=0;l<x;l++){var N=n.internal.newObject();A.push(N);var T=n.internal.getPageInfo(l+1);n.internal.write("<< /D["+T.objId+" 0 R /XYZ null null null]>> endobj")}var v=n.internal.newObject();for(n.internal.write("<< /Names [ "),l=0;l<A.length;l++)n.internal.write("(page_"+(l+1)+")"+A[l]+" 0 R");n.internal.write(" ] >>","endobj"),t=n.internal.newObject(),n.internal.write("<< /Dests "+v+" 0 R"),n.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,o,l){var f={title:o,options:l,children:[]};return r==null&&(r=this.root),r.children.push(f),f},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var o=0;o<r.children.length;o++)this.genIds_r(r.children[o])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var o=this.ctx.pdf.internal.getVerticalCoordinateString,l=0;l<r.children.length;l++){var f=r.children[l];this.objStart(f),this.line("/Title "+this.makeString(f.title)),this.line("/Parent "+this.makeRef(r)),l>0&&this.line("/Prev "+this.makeRef(r.children[l-1])),l<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[l+1])),f.children.length>0&&(this.line("/First "+this.makeRef(f.children[0])),this.line("/Last "+this.makeRef(f.children[f.children.length-1])));var m=this.count=this.count_r({count:0},f);if(m>0&&this.line("/Count "+m),f.options&&f.options.pageNumber){var g=n.internal.getPageInfo(f.options.pageNumber);this.line("/Dest ["+g.objId+" 0 R /XYZ 0 "+o(0)+" 0]")}this.objEnd()}for(var x=0;x<r.children.length;x++)this.renderItems(r.children[x])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,o){for(var l=0;l<o.children.length;l++)r.count++,this.count_r(r,o.children[l]);return r.count}}])}(Vt.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(n,r,o,l,f,m){var g,x=this.decode.DCT_DECODE,A=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=f||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(g=function(N){for(var T,v=256*N.charCodeAt(4)+N.charCodeAt(5),O=N.length,D={width:0,height:0,numcomponents:1},P=4;P<O;P+=2){if(P+=v,t.indexOf(N.charCodeAt(P+1))!==-1){T=256*N.charCodeAt(P+5)+N.charCodeAt(P+6),D={width:256*N.charCodeAt(P+7)+N.charCodeAt(P+8),height:T,numcomponents:N.charCodeAt(P+9)};break}v=256*N.charCodeAt(P+2)+N.charCodeAt(P+3)}return D}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:m=this.color_spaces.DEVICE_GRAY;break;case 4:m=this.color_spaces.DEVICE_CMYK;break;case 3:m=this.color_spaces.DEVICE_RGB}A={data:n,width:g.width,height:g.height,colorSpace:m,bitsPerComponent:8,filter:x,index:r,alias:o}}return A}}(Vt.API);var Nc,kf,Ax,Sx,Cx,EA=function(){var e,t,n;function r(l){var f,m,g,x,A,N,T,v,O,D,P,C,E,j;for(this.data=l,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},N=null;;){switch(f=this.readUInt32(),O=(function(){var V,W;for(W=[],V=0;V<4;++V)W.push(String.fromCharCode(this.data[this.pos++]));return W}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(f);break;case"fcTL":N&&this.animation.frames.push(N),this.pos+=4,N={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},A=this.readUInt16(),x=this.readUInt16()||100,N.delay=1e3*A/x,N.disposeOp=this.data[this.pos++],N.blendOp=this.data[this.pos++],N.data=[];break;case"IDAT":case"fdAT":for(O==="fdAT"&&(this.pos+=4,f-=4),l=(N!=null?N.data:void 0)||this.imgData,C=0;0<=f?C<f:C>f;0<=f?++C:--C)l.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(g=this.palette.length/3,this.transparency.indexed=this.read(f),this.transparency.indexed.length>g)throw new Error("More transparent colors than palette size");if((D=g-this.transparency.indexed.length)>0)for(E=0;0<=D?E<D:E>D;0<=D?++E:--E)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(f)[0];break;case 2:this.transparency.rgb=this.read(f)}break;case"tEXt":T=(P=this.read(f)).indexOf(0),v=String.fromCharCode.apply(String,P.slice(0,T)),this.text[v]=String.fromCharCode.apply(String,P.slice(T+1));break;case"IEND":return N&&this.animation.frames.push(N),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(j=this.colorType)===4||j===6,m=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*m,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=f}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(l){var f,m;for(m=[],f=0;0<=l?f<l:f>l;0<=l?++f:--f)m.push(this.data[this.pos++]);return m},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(l){var f=this.pixelBitlength/8,m=new Uint8Array(this.width*this.height*f),g=0,x=this;if(l==null&&(l=this.imgData),l.length===0)return new Uint8Array(0);function A(N,T,v,O){var D,P,C,E,j,V,W,ie,B,R,M,Z,F,k,Q,J,G,Y,z,X,te,ge=Math.ceil((x.width-N)/v),ue=Math.ceil((x.height-T)/O),L=x.width==ge&&x.height==ue;for(k=f*ge,Z=L?m:new Uint8Array(k*ue),V=l.length,F=0,P=0;F<ue&&g<V;){switch(l[g++]){case 0:for(E=G=0;G<k;E=G+=1)Z[P++]=l[g++];break;case 1:for(E=Y=0;Y<k;E=Y+=1)D=l[g++],j=E<f?0:Z[P-f],Z[P++]=(D+j)%256;break;case 2:for(E=z=0;z<k;E=z+=1)D=l[g++],C=(E-E%f)/f,Q=F&&Z[(F-1)*k+C*f+E%f],Z[P++]=(Q+D)%256;break;case 3:for(E=X=0;X<k;E=X+=1)D=l[g++],C=(E-E%f)/f,j=E<f?0:Z[P-f],Q=F&&Z[(F-1)*k+C*f+E%f],Z[P++]=(D+Math.floor((j+Q)/2))%256;break;case 4:for(E=te=0;te<k;E=te+=1)D=l[g++],C=(E-E%f)/f,j=E<f?0:Z[P-f],F===0?Q=J=0:(Q=Z[(F-1)*k+C*f+E%f],J=C&&Z[(F-1)*k+(C-1)*f+E%f]),W=j+Q-J,ie=Math.abs(W-j),R=Math.abs(W-Q),M=Math.abs(W-J),B=ie<=R&&ie<=M?j:R<=M?Q:J,Z[P++]=(D+B)%256;break;default:throw new Error("Invalid filter algorithm: "+l[g-1])}if(!L){var q=((T+F*O)*x.width+N)*f,ee=F*k;for(E=0;E<ge;E+=1){for(var fe=0;fe<f;fe+=1)m[q++]=Z[ee++];q+=(v-1)*f}}F++}}return l=rA(l),x.interlaceMethod==1?(A(0,0,8,8),A(4,0,8,8),A(0,4,4,8),A(2,0,4,4),A(0,2,2,4),A(1,0,2,2),A(0,1,1,2)):A(0,0,1,1),m},r.prototype.decodePalette=function(){var l,f,m,g,x,A,N,T,v;for(m=this.palette,A=this.transparency.indexed||[],x=new Uint8Array((A.length||0)+m.length),g=0,l=0,f=N=0,T=m.length;N<T;f=N+=3)x[g++]=m[f],x[g++]=m[f+1],x[g++]=m[f+2],x[g++]=(v=A[l++])!=null?v:255;return x},r.prototype.copyToImageData=function(l,f){var m,g,x,A,N,T,v,O,D,P,C;if(g=this.colors,D=null,m=this.hasAlphaChannel,this.palette.length&&(D=(C=this._decodedPalette)!=null?C:this._decodedPalette=this.decodePalette(),g=4,m=!0),O=(x=l.data||l).length,N=D||f,A=T=0,g===1)for(;A<O;)v=D?4*f[A/4]:T,P=N[v++],x[A++]=P,x[A++]=P,x[A++]=P,x[A++]=m?N[v++]:255,T=v;else for(;A<O;)v=D?4*f[A/4]:T,x[A++]=N[v++],x[A++]=N[v++],x[A++]=N[v++],x[A++]=m?N[v++]:255,T=v},r.prototype.decode=function(){var l;return l=new Uint8Array(this.width*this.height*4),this.copyToImageData(l,this.decodePixels()),l};var o=function(){if(Object.prototype.toString.call(Xt)==="[object Window]"){try{t=Xt.document.createElement("canvas"),n=t.getContext("2d")}catch{return!1}return!0}return!1};return o(),e=function(l){var f;if(o()===!0)return n.width=l.width,n.height=l.height,n.clearRect(0,0,l.width,l.height),n.putImageData(l,0,0),(f=new Image).src=t.toDataURL(),f;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(l){var f,m,g,x,A,N,T,v;if(this.animation){for(v=[],m=A=0,N=(T=this.animation.frames).length;A<N;m=++A)f=T[m],g=l.createImageData(f.width,f.height),x=this.decodePixels(new Uint8Array(f.data)),this.copyToImageData(g,x),f.imageData=g,v.push(f.image=e(g));return v}},r.prototype.renderFrame=function(l,f){var m,g,x;return m=(g=this.animation.frames)[f],x=g[f-1],f===0&&l.clearRect(0,0,this.width,this.height),(x!=null?x.disposeOp:void 0)===1?l.clearRect(x.xOffset,x.yOffset,x.width,x.height):(x!=null?x.disposeOp:void 0)===2&&l.putImageData(x.imageData,x.xOffset,x.yOffset),m.blendOp===0&&l.clearRect(m.xOffset,m.yOffset,m.width,m.height),l.drawImage(m.image,m.xOffset,m.yOffset)},r.prototype.animate=function(l){var f,m,g,x,A,N,T=this;return m=0,N=this.animation,x=N.numFrames,g=N.frames,A=N.numPlays,(f=function(){var v,O;if(v=m++%x,O=g[v],T.renderFrame(l,v),x>1&&m/x<A)return T.animation._timeout=setTimeout(f,O.delay)})()},r.prototype.stopAnimation=function(){var l;return clearTimeout((l=this.animation)!=null?l._timeout:void 0)},r.prototype.render=function(l){var f,m;return l._png&&l._png.stopAnimation(),l._png=this,l.width=this.width,l.height=this.height,f=l.getContext("2d"),this.animation?(this.decodeFrames(f),this.animate(f)):(m=f.createImageData(this.width,this.height),this.copyToImageData(m,this.decodePixels()),f.putImageData(m,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function TA(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,r=e[t++]|e[t++]<<8,o=e[t++],l=o>>7,f=1<<(7&o)+1;e[t++],e[t++];var m=null,g=null;l&&(m=t,g=f,t+=3*f);var x=!0,A=[],N=0,T=null,v=0,O=null;for(this.width=n,this.height=r;x&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,O=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((F=e[t++])>=0))throw Error("Invalid block size");if(F===0)break;t+=F}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var D=e[t++];N=e[t++]|e[t++]<<8,T=e[t++],!(1&D)&&(T=null),v=D>>2&7,t++;break;case 254:for(;;){if(!((F=e[t++])>=0))throw Error("Invalid block size");if(F===0)break;t+=F}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var P=e[t++]|e[t++]<<8,C=e[t++]|e[t++]<<8,E=e[t++]|e[t++]<<8,j=e[t++]|e[t++]<<8,V=e[t++],W=V>>6&1,ie=1<<(7&V)+1,B=m,R=g,M=!1;V>>7&&(M=!0,B=t,R=ie,t+=3*ie);var Z=t;for(t++;;){var F;if(!((F=e[t++])>=0))throw Error("Invalid block size");if(F===0)break;t+=F}A.push({x:P,y:C,width:E,height:j,has_local_palette:M,palette_offset:B,palette_size:R,data_offset:Z,data_length:t-Z,transparent_index:T,interlaced:!!W,delay:N,disposal:v});break;case 59:x=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return A.length},this.loopCount=function(){return O},this.frameInfo=function(k){if(k<0||k>=A.length)throw new Error("Frame index out of range.");return A[k]},this.decodeAndBlitFrameBGRA=function(k,Q){var J=this.frameInfo(k),G=J.width*J.height,Y=new Uint8Array(G);Ex(e,J.data_offset,Y,G);var z=J.palette_offset,X=J.transparent_index;X===null&&(X=256);var te=J.width,ge=n-te,ue=te,L=4*(J.y*n+J.x),q=4*((J.y+J.height)*n+J.x),ee=L,fe=4*ge;J.interlaced===!0&&(fe+=4*n*7);for(var ae=8,Ee=0,we=Y.length;Ee<we;++Ee){var xe=Y[Ee];if(ue===0&&(ue=te,(ee+=fe)>=q&&(fe=4*ge+4*n*(ae-1),ee=L+(te+ge)*(ae<<1),ae>>=1)),xe===X)ee+=4;else{var Me=e[z+3*xe],_e=e[z+3*xe+1],Qe=e[z+3*xe+2];Q[ee++]=Qe,Q[ee++]=_e,Q[ee++]=Me,Q[ee++]=255}--ue}},this.decodeAndBlitFrameRGBA=function(k,Q){var J=this.frameInfo(k),G=J.width*J.height,Y=new Uint8Array(G);Ex(e,J.data_offset,Y,G);var z=J.palette_offset,X=J.transparent_index;X===null&&(X=256);var te=J.width,ge=n-te,ue=te,L=4*(J.y*n+J.x),q=4*((J.y+J.height)*n+J.x),ee=L,fe=4*ge;J.interlaced===!0&&(fe+=4*n*7);for(var ae=8,Ee=0,we=Y.length;Ee<we;++Ee){var xe=Y[Ee];if(ue===0&&(ue=te,(ee+=fe)>=q&&(fe=4*ge+4*n*(ae-1),ee=L+(te+ge)*(ae<<1),ae>>=1)),xe===X)ee+=4;else{var Me=e[z+3*xe],_e=e[z+3*xe+1],Qe=e[z+3*xe+2];Q[ee++]=Me,Q[ee++]=_e,Q[ee++]=Qe,Q[ee++]=255}--ue}}}function Ex(e,t,n,r){for(var o=e[t++],l=1<<o,f=l+1,m=f+1,g=o+1,x=(1<<g)-1,A=0,N=0,T=0,v=e[t++],O=new Int32Array(4096),D=null;;){for(;A<16&&v!==0;)N|=e[t++]<<A,A+=8,v===1?v=e[t++]:--v;if(A<g)break;var P=N&x;if(N>>=g,A-=g,P!==l){if(P===f)break;for(var C=P<m?P:D,E=0,j=C;j>l;)j=O[j]>>8,++E;var V=j;if(T+E+(C!==P?1:0)>r)return void nr.log("Warning, gif stream longer than expected.");n[T++]=V;var W=T+=E;for(C!==P&&(n[T++]=V),j=C;E--;)j=O[j],n[--W]=255&j,j>>=8;D!==null&&m<4096&&(O[m++]=D<<8|V,m>=x+1&&g<12&&(++g,x=x<<1|1)),D=P}else m=f+1,x=(1<<(g=o+1))-1,D=null}return T!==r&&nr.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function p1(e){var t,n,r,o,l,f=Math.floor,m=new Array(64),g=new Array(64),x=new Array(64),A=new Array(64),N=new Array(65535),T=new Array(65535),v=new Array(64),O=new Array(64),D=[],P=0,C=7,E=new Array(64),j=new Array(64),V=new Array(64),W=new Array(256),ie=new Array(2048),B=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],R=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],M=[0,1,2,3,4,5,6,7,8,9,10,11],Z=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],F=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],k=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Q=[0,1,2,3,4,5,6,7,8,9,10,11],J=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],G=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Y(L,q){for(var ee=0,fe=0,ae=new Array,Ee=1;Ee<=16;Ee++){for(var we=1;we<=L[Ee];we++)ae[q[fe]]=[],ae[q[fe]][0]=ee,ae[q[fe]][1]=Ee,fe++,ee++;ee*=2}return ae}function z(L){for(var q=L[0],ee=L[1]-1;ee>=0;)q&1<<ee&&(P|=1<<C),ee--,--C<0&&(P==255?(X(255),X(0)):X(P),C=7,P=0)}function X(L){D.push(L)}function te(L){X(L>>8&255),X(255&L)}function ge(L,q,ee,fe,ae){for(var Ee,we=ae[0],xe=ae[240],Me=function(Pe,ct){var We,mt,Ue,it,Oe,Ze,pt,St,yt,qt,xt=0;for(yt=0;yt<8;++yt){We=Pe[xt],mt=Pe[xt+1],Ue=Pe[xt+2],it=Pe[xt+3],Oe=Pe[xt+4],Ze=Pe[xt+5],pt=Pe[xt+6];var hn=We+(St=Pe[xt+7]),Tt=We-St,gt=mt+pt,Te=mt-pt,lt=Ue+Ze,It=Ue-Ze,Pt=it+Oe,Yn=it-Oe,kn=hn+Pt,en=hn-Pt,$r=gt+lt,$n=gt-lt;Pe[xt]=kn+$r,Pe[xt+4]=kn-$r;var Wt=.707106781*($n+en);Pe[xt+2]=en+Wt,Pe[xt+6]=en-Wt;var nn=.382683433*((kn=Yn+It)-($n=Te+Tt)),ma=.5411961*kn+nn,yn=1.306562965*$n+nn,ei=.707106781*($r=It+Te),vi=Tt+ei,Dt=Tt-ei;Pe[xt+5]=Dt+ma,Pe[xt+3]=Dt-ma,Pe[xt+1]=vi+yn,Pe[xt+7]=vi-yn,xt+=8}for(xt=0,yt=0;yt<8;++yt){We=Pe[xt],mt=Pe[xt+8],Ue=Pe[xt+16],it=Pe[xt+24],Oe=Pe[xt+32],Ze=Pe[xt+40],pt=Pe[xt+48];var zi=We+(St=Pe[xt+56]),Wr=We-St,Yr=mt+pt,vn=mt-pt,Pn=Ue+Ze,Xn=Ue-Ze,wt=it+Oe,ui=it-Oe,Ti=zi+wt,er=zi-wt,ti=Yr+Pn,_i=Yr-Pn;Pe[xt]=Ti+ti,Pe[xt+32]=Ti-ti;var di=.707106781*(_i+er);Pe[xt+16]=er+di,Pe[xt+48]=er-di;var Tr=.382683433*((Ti=ui+Xn)-(_i=vn+Wr)),ms=.5411961*Ti+Tr,Bs=1.306562965*_i+Tr,fi=.707106781*(ti=Xn+vn),vr=Wr+fi,In=Wr-fi;Pe[xt+40]=In+ms,Pe[xt+24]=In-ms,Pe[xt+8]=vr+Bs,Pe[xt+56]=vr-Bs,xt++}for(yt=0;yt<64;++yt)qt=Pe[yt]*ct[yt],v[yt]=qt>0?qt+.5|0:qt-.5|0;return v}(L,q),_e=0;_e<64;++_e)O[B[_e]]=Me[_e];var Qe=O[0]-ee;ee=O[0],Qe==0?z(fe[0]):(z(fe[T[Ee=32767+Qe]]),z(N[Ee]));for(var Be=63;Be>0&&O[Be]==0;)Be--;if(Be==0)return z(we),ee;for(var ft,ke=1;ke<=Be;){for(var he=ke;O[ke]==0&&ke<=Be;)++ke;var ot=ke-he;if(ot>=16){ft=ot>>4;for(var ze=1;ze<=ft;++ze)z(xe);ot&=15}Ee=32767+O[ke],z(ae[(ot<<4)+T[Ee]]),z(N[Ee]),ke++}return Be!=63&&z(we),ee}function ue(L){L=Math.min(Math.max(L,1),100),l!=L&&(function(q){for(var ee=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],fe=0;fe<64;fe++){var ae=f((ee[fe]*q+50)/100);ae=Math.min(Math.max(ae,1),255),m[B[fe]]=ae}for(var Ee=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],we=0;we<64;we++){var xe=f((Ee[we]*q+50)/100);xe=Math.min(Math.max(xe,1),255),g[B[we]]=xe}for(var Me=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],_e=0,Qe=0;Qe<8;Qe++)for(var Be=0;Be<8;Be++)x[_e]=1/(m[B[_e]]*Me[Qe]*Me[Be]*8),A[_e]=1/(g[B[_e]]*Me[Qe]*Me[Be]*8),_e++}(L<50?Math.floor(5e3/L):Math.floor(200-2*L)),l=L)}this.encode=function(L,q){q&&ue(q),D=new Array,P=0,C=7,te(65496),te(65504),te(16),X(74),X(70),X(73),X(70),X(0),X(1),X(1),X(0),te(1),te(1),X(0),X(0),function(){te(65499),te(132),X(0);for(var mt=0;mt<64;mt++)X(m[mt]);X(1);for(var Ue=0;Ue<64;Ue++)X(g[Ue])}(),function(mt,Ue){te(65472),te(17),X(8),te(Ue),te(mt),X(3),X(1),X(17),X(0),X(2),X(17),X(1),X(3),X(17),X(1)}(L.width,L.height),function(){te(65476),te(418),X(0);for(var mt=0;mt<16;mt++)X(R[mt+1]);for(var Ue=0;Ue<=11;Ue++)X(M[Ue]);X(16);for(var it=0;it<16;it++)X(Z[it+1]);for(var Oe=0;Oe<=161;Oe++)X(F[Oe]);X(1);for(var Ze=0;Ze<16;Ze++)X(k[Ze+1]);for(var pt=0;pt<=11;pt++)X(Q[pt]);X(17);for(var St=0;St<16;St++)X(J[St+1]);for(var yt=0;yt<=161;yt++)X(G[yt])}(),te(65498),te(12),X(3),X(1),X(0),X(2),X(17),X(3),X(17),X(0),X(63),X(0);var ee=0,fe=0,ae=0;P=0,C=7,this.encode.displayName="_encode_";for(var Ee,we,xe,Me,_e,Qe,Be,ft,ke,he=L.data,ot=L.width,ze=L.height,Pe=4*ot,ct=0;ct<ze;){for(Ee=0;Ee<Pe;){for(_e=Pe*ct+Ee,Be=-1,ft=0,ke=0;ke<64;ke++)Qe=_e+(ft=ke>>3)*Pe+(Be=4*(7&ke)),ct+ft>=ze&&(Qe-=Pe*(ct+1+ft-ze)),Ee+Be>=Pe&&(Qe-=Ee+Be-Pe+4),we=he[Qe++],xe=he[Qe++],Me=he[Qe++],E[ke]=(ie[we]+ie[xe+256>>0]+ie[Me+512>>0]>>16)-128,j[ke]=(ie[we+768>>0]+ie[xe+1024>>0]+ie[Me+1280>>0]>>16)-128,V[ke]=(ie[we+1280>>0]+ie[xe+1536>>0]+ie[Me+1792>>0]>>16)-128;ee=ge(E,x,ee,t,r),fe=ge(j,A,fe,n,o),ae=ge(V,A,ae,n,o),Ee+=32}ct+=8}if(C>=0){var We=[];We[1]=C+1,We[0]=(1<<C+1)-1,z(We)}return te(65497),new Uint8Array(D)},e=e||50,function(){for(var L=String.fromCharCode,q=0;q<256;q++)W[q]=L(q)}(),t=Y(R,M),n=Y(k,Q),r=Y(Z,F),o=Y(J,G),function(){for(var L=1,q=2,ee=1;ee<=15;ee++){for(var fe=L;fe<q;fe++)T[32767+fe]=ee,N[32767+fe]=[],N[32767+fe][1]=ee,N[32767+fe][0]=fe;for(var ae=-(q-1);ae<=-L;ae++)T[32767+ae]=ee,N[32767+ae]=[],N[32767+ae][1]=ee,N[32767+ae][0]=q-1+ae;L<<=1,q<<=1}}(),function(){for(var L=0;L<256;L++)ie[L]=19595*L,ie[L+256>>0]=38470*L,ie[L+512>>0]=7471*L+32768,ie[L+768>>0]=-11059*L,ie[L+1024>>0]=-21709*L,ie[L+1280>>0]=32768*L+8421375,ie[L+1536>>0]=-27439*L,ie[L+1792>>0]=-5329*L}(),ue(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function as(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Tx(e){function t(R){if(!R)throw Error("assert :P")}function n(R,M,Z){for(var F=0;4>F;F++)if(R[M+F]!=Z.charCodeAt(F))return!0;return!1}function r(R,M,Z,F,k){for(var Q=0;Q<k;Q++)R[M+Q]=Z[F+Q]}function o(R,M,Z,F){for(var k=0;k<F;k++)R[M+k]=Z}function l(R){return new Int32Array(R)}function f(R,M){for(var Z=[],F=0;F<R;F++)Z.push(new M);return Z}function m(R,M){var Z=[];return function F(k,Q,J){for(var G=J[Q],Y=0;Y<G&&(k.push(J.length>Q+1?[]:new M),!(J.length<Q+1));Y++)F(k[Y],Q+1,J)}(Z,0,R),Z}var g=function(){var R=this;function M(p,y){for(var I=1<<y-1>>>0;p&I;)I>>>=1;return I?(p&I-1)+I:p}function Z(p,y,I,U,ne){t(!(U%I));do p[y+(U-=I)]=ne;while(0<U)}function F(p,y,I,U,ne){if(t(2328>=ne),512>=ne)var se=l(512);else if((se=l(ne))==null)return 0;return function(le,ce,de,ve,je,qe){var Ge,Le,nt=ce,Ke=1<<de,Ie=l(16),De=l(16);for(t(je!=0),t(ve!=null),t(le!=null),t(0<de),Le=0;Le<je;++Le){if(15<ve[Le])return 0;++Ie[ve[Le]]}if(Ie[0]==je)return 0;for(De[1]=0,Ge=1;15>Ge;++Ge){if(Ie[Ge]>1<<Ge)return 0;De[Ge+1]=De[Ge]+Ie[Ge]}for(Le=0;Le<je;++Le)Ge=ve[Le],0<ve[Le]&&(qe[De[Ge]++]=Le);if(De[15]==1)return(ve=new k).g=0,ve.value=qe[0],Z(le,nt,1,Ke,ve),Ke;var $e,dt=-1,et=Ke-1,Ct=0,vt=1,Ht=1,Nt=1<<de;for(Le=0,Ge=1,je=2;Ge<=de;++Ge,je<<=1){if(vt+=Ht<<=1,0>(Ht-=Ie[Ge]))return 0;for(;0<Ie[Ge];--Ie[Ge])(ve=new k).g=Ge,ve.value=qe[Le++],Z(le,nt+Ct,je,Nt,ve),Ct=M(Ct,Ge)}for(Ge=de+1,je=2;15>=Ge;++Ge,je<<=1){if(vt+=Ht<<=1,0>(Ht-=Ie[Ge]))return 0;for(;0<Ie[Ge];--Ie[Ge]){if(ve=new k,(Ct&et)!=dt){for(nt+=Nt,$e=1<<(dt=Ge)-de;15>dt&&!(0>=($e-=Ie[dt]));)++dt,$e<<=1;Ke+=Nt=1<<($e=dt-de),le[ce+(dt=Ct&et)].g=$e+de,le[ce+dt].value=nt-ce-dt}ve.g=Ge-de,ve.value=qe[Le++],Z(le,nt+(Ct>>de),je,Nt,ve),Ct=M(Ct,Ge)}}return vt!=2*De[15]-1?0:Ke}(p,y,I,U,ne,se)}function k(){this.value=this.g=0}function Q(){this.value=this.g=0}function J(){this.G=f(5,k),this.H=l(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=f(Zn,Q)}function G(p,y,I,U){t(p!=null),t(y!=null),t(2147483648>U),p.Ca=254,p.I=0,p.b=-8,p.Ka=0,p.oa=y,p.pa=I,p.Jd=y,p.Yc=I+U,p.Zc=4<=U?I+U-4+1:I,Ee(p)}function Y(p,y){for(var I=0;0<y--;)I|=xe(p,128)<<y;return I}function z(p,y){var I=Y(p,y);return we(p)?-I:I}function X(p,y,I,U){var ne,se=0;for(t(p!=null),t(y!=null),t(4294967288>U),p.Sb=U,p.Ra=0,p.u=0,p.h=0,4<U&&(U=4),ne=0;ne<U;++ne)se+=y[I+ne]<<8*ne;p.Ra=se,p.bb=U,p.oa=y,p.pa=I}function te(p){for(;8<=p.u&&p.bb<p.Sb;)p.Ra>>>=8,p.Ra+=p.oa[p.pa+p.bb]<<Fa-8>>>0,++p.bb,p.u-=8;ee(p)&&(p.h=1,p.u=0)}function ge(p,y){if(t(0<=y),!p.h&&y<=vs){var I=q(p)&So[y];return p.u+=y,te(p),I}return p.h=1,p.u=0}function ue(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function L(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function q(p){return p.Ra>>>(p.u&Fa-1)>>>0}function ee(p){return t(p.bb<=p.Sb),p.h||p.bb==p.Sb&&p.u>Fa}function fe(p,y){p.u=y,p.h=ee(p)}function ae(p){p.u>=dn&&(t(p.u>=dn),te(p))}function Ee(p){t(p!=null&&p.oa!=null),p.pa<p.Zc?(p.I=(p.oa[p.pa++]|p.I<<8)>>>0,p.b+=8):(t(p!=null&&p.oa!=null),p.pa<p.Yc?(p.b+=8,p.I=p.oa[p.pa++]|p.I<<8):p.Ka?p.b=0:(p.I<<=8,p.b+=8,p.Ka=1))}function we(p){return Y(p,1)}function xe(p,y){var I=p.Ca;0>p.b&&Ee(p);var U=p.b,ne=I*y>>>8,se=(p.I>>>U>ne)+0;for(se?(I-=ne,p.I-=ne+1<<U>>>0):I=ne+1,U=I,ne=0;256<=U;)ne+=8,U>>=8;return U=7^ne+ri[U],p.b-=U,p.Ca=(I<<U)-1,se}function Me(p,y,I){p[y+0]=I>>24&255,p[y+1]=I>>16&255,p[y+2]=I>>8&255,p[y+3]=I>>0&255}function _e(p,y){return p[y+0]<<0|p[y+1]<<8}function Qe(p,y){return _e(p,y)|p[y+2]<<16}function Be(p,y){return _e(p,y)|_e(p,y+2)<<16}function ft(p,y){var I=1<<y;return t(p!=null),t(0<y),p.X=l(I),p.X==null?0:(p.Mb=32-y,p.Xa=y,1)}function ke(p,y){t(p!=null),t(y!=null),t(p.Xa==y.Xa),r(y.X,0,p.X,0,1<<y.Xa)}function he(){this.X=[],this.Xa=this.Mb=0}function ot(p,y,I,U){t(I!=null),t(U!=null);var ne=I[0],se=U[0];return ne==0&&(ne=(p*se+y/2)/y),se==0&&(se=(y*ne+p/2)/p),0>=ne||0>=se?0:(I[0]=ne,U[0]=se,1)}function ze(p,y){return p+(1<<y)-1>>>y}function Pe(p,y){return((4278255360&p)+(4278255360&y)>>>0&4278255360)+((16711935&p)+(16711935&y)>>>0&16711935)>>>0}function ct(p,y){R[y]=function(I,U,ne,se,le,ce,de){var ve;for(ve=0;ve<le;++ve){var je=R[p](ce[de+ve-1],ne,se+ve);ce[de+ve]=Pe(I[U+ve],je)}}}function We(){this.ud=this.hd=this.jd=0}function mt(p,y){return((4278124286&(p^y))>>>1)+(p&y)>>>0}function Ue(p){return 0<=p&&256>p?p:0>p?0:255<p?255:void 0}function it(p,y){return Ue(p+(p-y+.5>>1))}function Oe(p,y,I){return Math.abs(y-I)-Math.abs(p-I)}function Ze(p,y,I,U,ne,se,le){for(U=se[le-1],I=0;I<ne;++I)se[le+I]=U=Pe(p[y+I],U)}function pt(p,y,I,U,ne){var se;for(se=0;se<I;++se){var le=p[y+se],ce=le>>8&255,de=16711935&(de=(de=16711935&le)+((ce<<16)+ce));U[ne+se]=(4278255360&le)+de>>>0}}function St(p,y){y.jd=p>>0&255,y.hd=p>>8&255,y.ud=p>>16&255}function yt(p,y,I,U,ne,se){var le;for(le=0;le<U;++le){var ce=y[I+le],de=ce>>>8,ve=ce,je=255&(je=(je=ce>>>16)+((p.jd<<24>>24)*(de<<24>>24)>>>5));ve=255&(ve=(ve=ve+((p.hd<<24>>24)*(de<<24>>24)>>>5))+((p.ud<<24>>24)*(je<<24>>24)>>>5)),ne[se+le]=(4278255360&ce)+(je<<16)+ve}}function qt(p,y,I,U,ne){R[y]=function(se,le,ce,de,ve,je,qe,Ge,Le){for(de=qe;de<Ge;++de)for(qe=0;qe<Le;++qe)ve[je++]=ne(ce[U(se[le++])])},R[p]=function(se,le,ce,de,ve,je,qe){var Ge=8>>se.b,Le=se.Ea,nt=se.K[0],Ke=se.w;if(8>Ge)for(se=(1<<se.b)-1,Ke=(1<<Ge)-1;le<ce;++le){var Ie,De=0;for(Ie=0;Ie<Le;++Ie)Ie&se||(De=U(de[ve++])),je[qe++]=ne(nt[De&Ke]),De>>=Ge}else R["VP8LMapColor"+I](de,ve,nt,Ke,je,qe,le,ce,Le)}}function xt(p,y,I,U,ne){for(I=y+I;y<I;){var se=p[y++];U[ne++]=se>>16&255,U[ne++]=se>>8&255,U[ne++]=se>>0&255}}function hn(p,y,I,U,ne){for(I=y+I;y<I;){var se=p[y++];U[ne++]=se>>16&255,U[ne++]=se>>8&255,U[ne++]=se>>0&255,U[ne++]=se>>24&255}}function Tt(p,y,I,U,ne){for(I=y+I;y<I;){var se=(le=p[y++])>>16&240|le>>12&15,le=le>>0&240|le>>28&15;U[ne++]=se,U[ne++]=le}}function gt(p,y,I,U,ne){for(I=y+I;y<I;){var se=(le=p[y++])>>16&248|le>>13&7,le=le>>5&224|le>>3&31;U[ne++]=se,U[ne++]=le}}function Te(p,y,I,U,ne){for(I=y+I;y<I;){var se=p[y++];U[ne++]=se>>0&255,U[ne++]=se>>8&255,U[ne++]=se>>16&255}}function lt(p,y,I,U,ne,se){if(se==0)for(I=y+I;y<I;)Me(U,((se=p[y++])[0]>>24|se[1]>>8&65280|se[2]<<8&16711680|se[3]<<24)>>>0),ne+=32;else r(U,ne,p,y,I)}function It(p,y){R[y][0]=R[p+"0"],R[y][1]=R[p+"1"],R[y][2]=R[p+"2"],R[y][3]=R[p+"3"],R[y][4]=R[p+"4"],R[y][5]=R[p+"5"],R[y][6]=R[p+"6"],R[y][7]=R[p+"7"],R[y][8]=R[p+"8"],R[y][9]=R[p+"9"],R[y][10]=R[p+"10"],R[y][11]=R[p+"11"],R[y][12]=R[p+"12"],R[y][13]=R[p+"13"],R[y][14]=R[p+"0"],R[y][15]=R[p+"0"]}function Pt(p){return p==c0||p==u0||p==tf||p==d0}function Yn(){this.eb=[],this.size=this.A=this.fb=0}function kn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function en(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Yn,this.f.kb=new kn,this.sd=null}function $r(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function $n(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Wt(p){return alert("todo:WebPSamplerProcessPlane"),p.T}function nn(p,y){var I=p.T,U=y.ba.f.RGBA,ne=U.eb,se=U.fb+p.ka*U.A,le=za[y.ba.S],ce=p.y,de=p.O,ve=p.f,je=p.N,qe=p.ea,Ge=p.W,Le=y.cc,nt=y.dc,Ke=y.Mc,Ie=y.Nc,De=p.ka,$e=p.ka+p.T,dt=p.U,et=dt+1>>1;for(De==0?le(ce,de,null,null,ve,je,qe,Ge,ve,je,qe,Ge,ne,se,null,null,dt):(le(y.ec,y.fc,ce,de,Le,nt,Ke,Ie,ve,je,qe,Ge,ne,se-U.A,ne,se,dt),++I);De+2<$e;De+=2)Le=ve,nt=je,Ke=qe,Ie=Ge,je+=p.Rc,Ge+=p.Rc,se+=2*U.A,le(ce,(de+=2*p.fa)-p.fa,ce,de,Le,nt,Ke,Ie,ve,je,qe,Ge,ne,se-U.A,ne,se,dt);return de+=p.fa,p.j+$e<p.o?(r(y.ec,y.fc,ce,de,dt),r(y.cc,y.dc,ve,je,et),r(y.Mc,y.Nc,qe,Ge,et),I--):1&$e||le(ce,de,null,null,ve,je,qe,Ge,ve,je,qe,Ge,ne,se+U.A,null,null,dt),I}function ma(p,y,I){var U=p.F,ne=[p.J];if(U!=null){var se=p.U,le=y.ba.S,ce=le==ef||le==tf;y=y.ba.f.RGBA;var de=[0],ve=p.ka;de[0]=p.T,p.Kb&&(ve==0?--de[0]:(--ve,ne[0]-=p.width),p.j+p.ka+p.T==p.o&&(de[0]=p.o-p.j-ve));var je=y.eb;ve=y.fb+ve*y.A,p=sr(U,ne[0],p.width,se,de,je,ve+(ce?0:3),y.A),t(I==de),p&&Pt(le)&&ia(je,ve,ce,se,de,y.A)}return 0}function yn(p){var y=p.ma,I=y.ba.S,U=11>I,ne=I==Jd||I==$d||I==ef||I==l0||I==12||Pt(I);if(y.memory=null,y.Ib=null,y.Jb=null,y.Nd=null,!qs(y.Oa,p,ne?11:12))return 0;if(ne&&Pt(I)&&rt(),p.da)alert("todo:use_scaling");else{if(U){if(y.Ib=Wt,p.Kb){if(I=p.U+1>>1,y.memory=l(p.U+2*I),y.memory==null)return 0;y.ec=y.memory,y.fc=0,y.cc=y.ec,y.dc=y.fc+p.U,y.Mc=y.cc,y.Nc=y.dc+I,y.Ib=nn,rt()}}else alert("todo:EmitYUV");ne&&(y.Jb=ma,U&&Fe())}if(U&&!lp){for(p=0;256>p;++p)u3[p]=89858*(p-128)+rf>>nf,h3[p]=-22014*(p-128)+rf,f3[p]=-45773*(p-128),d3[p]=113618*(p-128)+rf>>nf;for(p=Cu;p<m0;++p)y=76283*(p-16)+rf>>nf,m3[p-Cu]=_r(y,255),g3[p-Cu]=_r(y+8>>4,15);lp=1}return 1}function ei(p){var y=p.ma,I=p.U,U=p.T;return t(!(1&p.ka)),0>=I||0>=U?0:(I=y.Ib(p,y),y.Jb!=null&&y.Jb(p,y,I),y.Dc+=I,1)}function vi(p){p.ma.memory=null}function Dt(p,y,I,U){return ge(p,8)!=47?0:(y[0]=ge(p,14)+1,I[0]=ge(p,14)+1,U[0]=ge(p,1),ge(p,3)!=0?0:!p.h)}function zi(p,y){if(4>p)return p+1;var I=p-2>>1;return(2+(1&p)<<I)+ge(y,I)+1}function Wr(p,y){return 120<y?y-120:1<=(I=((I=Qv[y-1])>>4)*p+(8-(15&I)))?I:1;var I}function Yr(p,y,I){var U=q(I),ne=p[y+=255&U].g-8;return 0<ne&&(fe(I,I.u+8),U=q(I),y+=p[y].value,y+=U&(1<<ne)-1),fe(I,I.u+p[y].g),p[y].value}function vn(p,y,I){return I.g+=p.g,I.value+=p.value<<y>>>0,t(8>=I.g),p.g}function Pn(p,y,I){var U=p.xc;return t((y=U==0?0:p.vc[p.md*(I>>U)+(y>>U)])<p.Wb),p.Ya[y]}function Xn(p,y,I,U){var ne=p.ab,se=p.c*y,le=p.C;y=le+y;var ce=I,de=U;for(U=p.Ta,I=p.Ua;0<ne--;){var ve=p.gc[ne],je=le,qe=y,Ge=ce,Le=de,nt=(de=U,ce=I,ve.Ea);switch(t(je<qe),t(qe<=ve.nc),ve.hc){case 2:s(Ge,Le,(qe-je)*nt,de,ce);break;case 0:var Ke=je,Ie=qe,De=de,$e=ce,dt=(Nt=ve).Ea;Ke==0&&($(Ge,Le,null,null,1,De,$e),Ze(Ge,Le+1,0,0,dt-1,De,$e+1),Le+=dt,$e+=dt,++Ke);for(var et=1<<Nt.b,Ct=et-1,vt=ze(dt,Nt.b),Ht=Nt.K,Nt=Nt.w+(Ke>>Nt.b)*vt;Ke<Ie;){var On=Ht,zn=Nt,jn=1;for(i(Ge,Le,De,$e-dt,1,De,$e);jn<dt;){var wn=(jn&~Ct)+et;wn>dt&&(wn=dt),(0,b[On[zn++]>>8&15])(Ge,Le+ +jn,De,$e+jn-dt,wn-jn,De,$e+jn),jn=wn}Le+=dt,$e+=dt,++Ke&Ct||(Nt+=vt)}qe!=ve.nc&&r(de,ce-nt,de,ce+(qe-je-1)*nt,nt);break;case 1:for(nt=Ge,Ie=Le,dt=(Ge=ve.Ea)-($e=Ge&~(De=(Le=1<<ve.b)-1)),Ke=ze(Ge,ve.b),et=ve.K,ve=ve.w+(je>>ve.b)*Ke;je<qe;){for(Ct=et,vt=ve,Ht=new We,Nt=Ie+$e,On=Ie+Ge;Ie<Nt;)St(Ct[vt++],Ht),w(Ht,nt,Ie,Le,de,ce),Ie+=Le,ce+=Le;Ie<On&&(St(Ct[vt++],Ht),w(Ht,nt,Ie,dt,de,ce),Ie+=dt,ce+=dt),++je&De||(ve+=Ke)}break;case 3:if(Ge==de&&Le==ce&&0<ve.b){for(Ie=de,Ge=nt=ce+(qe-je)*nt-($e=(qe-je)*ze(ve.Ea,ve.b)),Le=de,De=ce,Ke=[],$e=(dt=$e)-1;0<=$e;--$e)Ke[$e]=Le[De+$e];for($e=dt-1;0<=$e;--$e)Ie[Ge+$e]=Ke[$e];c(ve,je,qe,de,nt,de,ce)}else c(ve,je,qe,Ge,Le,de,ce)}ce=U,de=I}de!=I&&r(U,I,ce,de,se)}function wt(p,y){var I=p.V,U=p.Ba+p.c*p.C,ne=y-p.C;if(t(y<=p.l.o),t(16>=ne),0<ne){var se=p.l,le=p.Ta,ce=p.Ua,de=se.width;if(Xn(p,ne,I,U),ne=ce=[ce],t((I=p.C)<(U=y)),t(se.v<se.va),U>se.o&&(U=se.o),I<se.j){var ve=se.j-I;I=se.j,ne[0]+=ve*de}if(I>=U?I=0:(ne[0]+=4*se.v,se.ka=I-se.j,se.U=se.va-se.v,se.T=U-I,I=1),I){if(ce=ce[0],11>(I=p.ca).S){var je=I.f.RGBA,qe=(U=I.S,ne=se.U,se=se.T,ve=je.eb,je.A),Ge=se;for(je=je.fb+p.Ma*je.A;0<Ge--;){var Le=le,nt=ce,Ke=ne,Ie=ve,De=je;switch(U){case Kd:_(Le,nt,Ke,Ie,De);break;case Jd:H(Le,nt,Ke,Ie,De);break;case c0:H(Le,nt,Ke,Ie,De),ia(Ie,De,0,Ke,1,0);break;case $g:ye(Le,nt,Ke,Ie,De);break;case $d:lt(Le,nt,Ke,Ie,De,1);break;case u0:lt(Le,nt,Ke,Ie,De,1),ia(Ie,De,0,Ke,1,0);break;case ef:lt(Le,nt,Ke,Ie,De,0);break;case tf:lt(Le,nt,Ke,Ie,De,0),ia(Ie,De,1,Ke,1,0);break;case l0:K(Le,nt,Ke,Ie,De);break;case d0:K(Le,nt,Ke,Ie,De),ar(Ie,De,Ke,1,0);break;case ep:oe(Le,nt,Ke,Ie,De);break;default:t(0)}ce+=de,je+=qe}p.Ma+=se}else alert("todo:EmitRescaledRowsYUVA");t(p.Ma<=I.height)}}p.C=y,t(p.C<=p.i)}function ui(p){var y;if(0<p.ua)return 0;for(y=0;y<p.Wb;++y){var I=p.Ya[y].G,U=p.Ya[y].H;if(0<I[1][U[1]+0].g||0<I[2][U[2]+0].g||0<I[3][U[3]+0].g)return 0}return 1}function Ti(p,y,I,U,ne,se){if(p.Z!=0){var le=p.qd,ce=p.rd;for(t(Eo[p.Z]!=null);y<I;++y)Eo[p.Z](le,ce,U,ne,U,ne,se),le=U,ce=ne,ne+=se;p.qd=le,p.rd=ce}}function er(p,y){var I=p.l.ma,U=I.Z==0||I.Z==1?p.l.j:p.C;if(U=p.C<U?U:p.C,t(y<=p.l.o),y>U){var ne=p.l.width,se=I.ca,le=I.tb+ne*U,ce=p.V,de=p.Ba+p.c*U,ve=p.gc;t(p.ab==1),t(ve[0].hc==3),d(ve[0],U,y,ce,de,se,le),Ti(I,U,y,se,le,ne)}p.C=p.Ma=y}function ti(p,y,I,U,ne,se,le){var ce=p.$/U,de=p.$%U,ve=p.m,je=p.s,qe=I+p.$,Ge=qe;ne=I+U*ne;var Le=I+U*se,nt=280+je.ua,Ke=p.Pb?ce:16777216,Ie=0<je.ua?je.Wa:null,De=je.wc,$e=qe<Le?Pn(je,de,ce):null;t(p.C<se),t(Le<=ne);var dt=!1;e:for(;;){for(;dt||qe<Le;){var et=0;if(ce>=Ke){var Ct=qe-I;t((Ke=p).Pb),Ke.wd=Ke.m,Ke.xd=Ct,0<Ke.s.ua&&ke(Ke.s.Wa,Ke.s.vb),Ke=ce+Jv}if(de&De||($e=Pn(je,de,ce)),t($e!=null),$e.Qb&&(y[qe]=$e.qb,dt=!0),!dt)if(ae(ve),$e.jc){et=ve,Ct=y;var vt=qe,Ht=$e.pd[q(et)&Zn-1];t($e.jc),256>Ht.g?(fe(et,et.u+Ht.g),Ct[vt]=Ht.value,et=0):(fe(et,et.u+Ht.g-256),t(256<=Ht.value),et=Ht.value),et==0&&(dt=!0)}else et=Yr($e.G[0],$e.H[0],ve);if(ve.h)break;if(dt||256>et){if(!dt)if($e.nd)y[qe]=($e.qb|et<<8)>>>0;else{if(ae(ve),dt=Yr($e.G[1],$e.H[1],ve),ae(ve),Ct=Yr($e.G[2],$e.H[2],ve),vt=Yr($e.G[3],$e.H[3],ve),ve.h)break;y[qe]=(vt<<24|dt<<16|et<<8|Ct)>>>0}if(dt=!1,++qe,++de>=U&&(de=0,++ce,le!=null&&ce<=se&&!(ce%16)&&le(p,ce),Ie!=null))for(;Ge<qe;)et=y[Ge++],Ie.X[(506832829*et&4294967295)>>>Ie.Mb]=et}else if(280>et){if(et=zi(et-256,ve),Ct=Yr($e.G[4],$e.H[4],ve),ae(ve),Ct=Wr(U,Ct=zi(Ct,ve)),ve.h)break;if(qe-I<Ct||ne-qe<et)break e;for(vt=0;vt<et;++vt)y[qe+vt]=y[qe+vt-Ct];for(qe+=et,de+=et;de>=U;)de-=U,++ce,le!=null&&ce<=se&&!(ce%16)&&le(p,ce);if(t(qe<=ne),de&De&&($e=Pn(je,de,ce)),Ie!=null)for(;Ge<qe;)et=y[Ge++],Ie.X[(506832829*et&4294967295)>>>Ie.Mb]=et}else{if(!(et<nt))break e;for(dt=et-280,t(Ie!=null);Ge<qe;)et=y[Ge++],Ie.X[(506832829*et&4294967295)>>>Ie.Mb]=et;et=qe,t(!(dt>>>(Ct=Ie).Xa)),y[et]=Ct.X[dt],dt=!0}dt||t(ve.h==ee(ve))}if(p.Pb&&ve.h&&qe<ne)t(p.m.h),p.a=5,p.m=p.wd,p.$=p.xd,0<p.s.ua&&ke(p.s.vb,p.s.Wa);else{if(ve.h)break e;le!=null&&le(p,ce>se?se:ce),p.a=0,p.$=qe-I}return 1}return p.a=3,0}function _i(p){t(p!=null),p.vc=null,p.yc=null,p.Ya=null;var y=p.Wa;y!=null&&(y.X=null),p.vb=null,t(p!=null)}function di(){var p=new Ar;return p==null?null:(p.a=0,p.xb=rp,It("Predictor","VP8LPredictors"),It("Predictor","VP8LPredictors_C"),It("PredictorAdd","VP8LPredictorsAdd"),It("PredictorAdd","VP8LPredictorsAdd_C"),s=pt,w=yt,_=xt,H=hn,K=Tt,oe=gt,ye=Te,R.VP8LMapColor32b=u,R.VP8LMapColor8b=h,p)}function Tr(p,y,I,U,ne){var se=1,le=[p],ce=[y],de=U.m,ve=U.s,je=null,qe=0;e:for(;;){if(I)for(;se&&ge(de,1);){var Ge=le,Le=ce,nt=U,Ke=1,Ie=nt.m,De=nt.gc[nt.ab],$e=ge(Ie,2);if(nt.Oc&1<<$e)se=0;else{switch(nt.Oc|=1<<$e,De.hc=$e,De.Ea=Ge[0],De.nc=Le[0],De.K=[null],++nt.ab,t(4>=nt.ab),$e){case 0:case 1:De.b=ge(Ie,3)+2,Ke=Tr(ze(De.Ea,De.b),ze(De.nc,De.b),0,nt,De.K),De.K=De.K[0];break;case 3:var dt,et=ge(Ie,8)+1,Ct=16<et?0:4<et?1:2<et?2:3;if(Ge[0]=ze(De.Ea,Ct),De.b=Ct,dt=Ke=Tr(et,1,0,nt,De.K)){var vt,Ht=et,Nt=De,On=1<<(8>>Nt.b),zn=l(On);if(zn==null)dt=0;else{var jn=Nt.K[0],wn=Nt.w;for(zn[0]=Nt.K[0][0],vt=1;vt<1*Ht;++vt)zn[vt]=Pe(jn[wn+vt],zn[vt-1]);for(;vt<4*On;++vt)zn[vt]=0;Nt.K[0]=null,Nt.K[0]=zn,dt=1}}Ke=dt;break;case 2:break;default:t(0)}se=Ke}}if(le=le[0],ce=ce[0],se&&ge(de,1)&&!(se=1<=(qe=ge(de,4))&&11>=qe)){U.a=3;break e}var tr;if(tr=se)t:{var Qn,ln,Xr,aa=U,Zr=le,sa=ce,Hn=qe,ya=I,va=aa.m,mi=aa.s,Ni=[null],Gi=1,Ha=0,ws=Kv[Hn];n:for(;;){if(ya&&ge(va,1)){var gi=ge(va,3)+2,Xs=ze(Zr,gi),Ol=ze(sa,gi),mc=Xs*Ol;if(!Tr(Xs,Ol,0,aa,Ni))break n;for(Ni=Ni[0],mi.xc=gi,Qn=0;Qn<mc;++Qn){var To=Ni[Qn]>>8&65535;Ni[Qn]=To,To>=Gi&&(Gi=To+1)}}if(va.h)break n;for(ln=0;5>ln;++ln){var Ir=tp[ln];!ln&&0<Hn&&(Ir+=1<<Hn),Ha<Ir&&(Ha=Ir)}var g0=f(Gi*ws,k),dp=Gi,fp=f(dp,J);if(fp==null)var sf=null;else t(65536>=dp),sf=fp;var Eu=l(Ha);if(sf==null||Eu==null||g0==null){aa.a=1;break n}var of=g0;for(Qn=Xr=0;Qn<Gi;++Qn){var rs=sf[Qn],gc=rs.G,pc=rs.H,hp=0,lf=1,mp=0;for(ln=0;5>ln;++ln){Ir=tp[ln],gc[ln]=of,pc[ln]=Xr,!ln&&0<Hn&&(Ir+=1<<Hn);i:{var cf,p0=Ir,uf=aa,Tu=Eu,b3=of,y3=Xr,x0=0,_o=uf.m,v3=ge(_o,1);if(o(Tu,0,0,p0),v3){var w3=ge(_o,1)+1,N3=ge(_o,1),gp=ge(_o,N3==0?1:8);Tu[gp]=1,w3==2&&(Tu[gp=ge(_o,8)]=1);var df=1}else{var pp=l(19),xp=ge(_o,4)+4;if(19<xp){uf.a=3;var ff=0;break i}for(cf=0;cf<xp;++cf)pp[Zv[cf]]=ge(_o,3);var b0=void 0,_u=void 0,bp=uf,A3=pp,hf=p0,yp=Tu,y0=0,jo=bp.m,vp=8,wp=f(128,k);r:for(;F(wp,0,7,A3,19);){if(ge(jo,1)){var S3=2+2*ge(jo,3);if((b0=2+ge(jo,S3))>hf)break r}else b0=hf;for(_u=0;_u<hf&&b0--;){ae(jo);var Np=wp[0+(127&q(jo))];fe(jo,jo.u+Np.g);var xc=Np.value;if(16>xc)yp[_u++]=xc,xc!=0&&(vp=xc);else{var C3=xc==16,Ap=xc-16,E3=Yv[Ap],Sp=ge(jo,Wv[Ap])+E3;if(_u+Sp>hf)break r;for(var T3=C3?vp:0;0<Sp--;)yp[_u++]=T3}}y0=1;break r}y0||(bp.a=3),df=y0}(df=df&&!_o.h)&&(x0=F(b3,y3,8,Tu,p0)),df&&x0!=0?ff=x0:(uf.a=3,ff=0)}if(ff==0)break n;if(lf&&Xv[ln]==1&&(lf=of[Xr].g==0),hp+=of[Xr].g,Xr+=ff,3>=ln){var ju,v0=Eu[0];for(ju=1;ju<Ir;++ju)Eu[ju]>v0&&(v0=Eu[ju]);mp+=v0}}if(rs.nd=lf,rs.Qb=0,lf&&(rs.qb=(gc[3][pc[3]+0].value<<24|gc[1][pc[1]+0].value<<16|gc[2][pc[2]+0].value)>>>0,hp==0&&256>gc[0][pc[0]+0].value&&(rs.Qb=1,rs.qb+=gc[0][pc[0]+0].value<<8)),rs.jc=!rs.Qb&&6>mp,rs.jc){var mf,Zs=rs;for(mf=0;mf<Zn;++mf){var Io=mf,Do=Zs.pd[Io],gf=Zs.G[0][Zs.H[0]+Io];256<=gf.value?(Do.g=gf.g+256,Do.value=gf.value):(Do.g=0,Do.value=0,Io>>=vn(gf,8,Do),Io>>=vn(Zs.G[1][Zs.H[1]+Io],16,Do),Io>>=vn(Zs.G[2][Zs.H[2]+Io],0,Do),vn(Zs.G[3][Zs.H[3]+Io],24,Do))}}}mi.vc=Ni,mi.Wb=Gi,mi.Ya=sf,mi.yc=g0,tr=1;break t}tr=0}if(!(se=tr)){U.a=3;break e}if(0<qe){if(ve.ua=1<<qe,!ft(ve.Wa,qe)){U.a=1,se=0;break e}}else ve.ua=0;var w0=U,Cp=le,_3=ce,N0=w0.s,A0=N0.xc;if(w0.c=Cp,w0.i=_3,N0.md=ze(Cp,A0),N0.wc=A0==0?-1:(1<<A0)-1,I){U.xb=a3;break e}if((je=l(le*ce))==null){U.a=1,se=0;break e}se=(se=ti(U,je,0,le,ce,ce,null))&&!de.h;break e}return se?(ne!=null?ne[0]=je:(t(je==null),t(I)),U.$=0,I||_i(ve)):_i(ve),se}function ms(p,y){var I=p.c*p.i,U=I+y+16*y;return t(p.c<=y),p.V=l(U),p.V==null?(p.Ta=null,p.Ua=0,p.a=1,0):(p.Ta=p.V,p.Ua=p.Ba+I+y,1)}function Bs(p,y){var I=p.C,U=y-I,ne=p.V,se=p.Ba+p.c*I;for(t(y<=p.l.o);0<U;){var le=16<U?16:U,ce=p.l.ma,de=p.l.width,ve=de*le,je=ce.ca,qe=ce.tb+de*I,Ge=p.Ta,Le=p.Ua;Xn(p,le,ne,se),Ur(Ge,Le,je,qe,ve),Ti(ce,I,I+le,je,qe,de),U-=le,ne+=le*p.c,I+=le}t(I==y),p.C=p.Ma=y}function fi(){this.ub=this.yd=this.td=this.Rb=0}function vr(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function In(){this.Fb=this.Bb=this.Cb=0,this.Zb=l(4),this.Lb=l(4)}function po(){this.Yb=function(){var p=[];return function y(I,U,ne){for(var se=ne[U],le=0;le<se&&(I.push(ne.length>U+1?[]:0),!(ne.length<U+1));le++)y(I[le],U+1,ne)}(p,0,[3,11]),p}()}function $i(){this.jb=l(3),this.Wc=m([4,8],po),this.Xc=m([4,17],po)}function Ve(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new l(4),this.od=new l(4)}function Ne(){this.ld=this.La=this.dd=this.tc=0}function bt(){this.Na=this.la=0}function Ft(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Mr(){this.ad=l(384),this.Za=0,this.Ob=l(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function ga(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ne),this.Y=0,this.ya=Array(new Mr),this.aa=0,this.l=new Yt}function $t(){this.y=l(16),this.f=l(8),this.ea=l(8)}function on(){this.cb=this.a=0,this.sc="",this.m=new ue,this.Od=new fi,this.Kc=new vr,this.ed=new Ve,this.Qa=new In,this.Ic=this.$c=this.Aa=0,this.D=new ga,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=f(8,ue),this.ia=0,this.pb=f(4,Ft),this.Pa=new $i,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new $t),this.Hd=0,this.rb=Array(new bt),this.sb=0,this.wa=Array(new Ne),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Mr),this.L=this.aa=0,this.gd=m([4,2],Ne),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Yt(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function ea(){var p=new on;return p!=null&&(p.a=0,p.sc="OK",p.cb=0,p.Xb=0,Su||(Su=Hi)),p}function En(p,y,I){return p.a==0&&(p.a=y,p.sc=I,p.cb=0),0}function La(p,y,I){return 3<=I&&p[y+0]==157&&p[y+1]==1&&p[y+2]==42}function ir(p,y){if(p==null)return 0;if(p.a=0,p.sc="OK",y==null)return En(p,2,"null VP8Io passed to VP8GetHeaders()");var I=y.data,U=y.w,ne=y.ha;if(4>ne)return En(p,7,"Truncated header.");var se=I[U+0]|I[U+1]<<8|I[U+2]<<16,le=p.Od;if(le.Rb=!(1&se),le.td=se>>1&7,le.yd=se>>4&1,le.ub=se>>5,3<le.td)return En(p,3,"Incorrect keyframe parameters.");if(!le.yd)return En(p,4,"Frame not displayable.");U+=3,ne-=3;var ce=p.Kc;if(le.Rb){if(7>ne)return En(p,7,"cannot parse picture header");if(!La(I,U,ne))return En(p,3,"Bad code word");ce.c=16383&(I[U+4]<<8|I[U+3]),ce.Td=I[U+4]>>6,ce.i=16383&(I[U+6]<<8|I[U+5]),ce.Ud=I[U+6]>>6,U+=7,ne-=7,p.za=ce.c+15>>4,p.Ub=ce.i+15>>4,y.width=ce.c,y.height=ce.i,y.Da=0,y.j=0,y.v=0,y.va=y.width,y.o=y.height,y.da=0,y.ib=y.width,y.hb=y.height,y.U=y.width,y.T=y.height,o((se=p.Pa).jb,0,255,se.jb.length),t((se=p.Qa)!=null),se.Cb=0,se.Bb=0,se.Fb=1,o(se.Zb,0,0,se.Zb.length),o(se.Lb,0,0,se.Lb)}if(le.ub>ne)return En(p,7,"bad partition length");G(se=p.m,I,U,le.ub),U+=le.ub,ne-=le.ub,le.Rb&&(ce.Ld=we(se),ce.Kd=we(se)),ce=p.Qa;var de,ve=p.Pa;if(t(se!=null),t(ce!=null),ce.Cb=we(se),ce.Cb){if(ce.Bb=we(se),we(se)){for(ce.Fb=we(se),de=0;4>de;++de)ce.Zb[de]=we(se)?z(se,7):0;for(de=0;4>de;++de)ce.Lb[de]=we(se)?z(se,6):0}if(ce.Bb)for(de=0;3>de;++de)ve.jb[de]=we(se)?Y(se,8):255}else ce.Bb=0;if(se.Ka)return En(p,3,"cannot parse segment header");if((ce=p.ed).zd=we(se),ce.Tb=Y(se,6),ce.wb=Y(se,3),ce.Pc=we(se),ce.Pc&&we(se)){for(ve=0;4>ve;++ve)we(se)&&(ce.vd[ve]=z(se,6));for(ve=0;4>ve;++ve)we(se)&&(ce.od[ve]=z(se,6))}if(p.L=ce.Tb==0?0:ce.zd?1:2,se.Ka)return En(p,3,"cannot parse filter header");var je=ne;if(ne=de=U,U=de+je,ce=je,p.Xb=(1<<Y(p.m,2))-1,je<3*(ve=p.Xb))I=7;else{for(de+=3*ve,ce-=3*ve,je=0;je<ve;++je){var qe=I[ne+0]|I[ne+1]<<8|I[ne+2]<<16;qe>ce&&(qe=ce),G(p.Jc[+je],I,de,qe),de+=qe,ce-=qe,ne+=3}G(p.Jc[+ve],I,de,ce),I=de<U?0:5}if(I!=0)return En(p,I,"cannot parse partitions");for(I=Y(de=p.m,7),ne=we(de)?z(de,4):0,U=we(de)?z(de,4):0,ce=we(de)?z(de,4):0,ve=we(de)?z(de,4):0,de=we(de)?z(de,4):0,je=p.Qa,qe=0;4>qe;++qe){if(je.Cb){var Ge=je.Zb[qe];je.Fb||(Ge+=I)}else{if(0<qe){p.pb[qe]=p.pb[0];continue}Ge=I}var Le=p.pb[qe];Le.Sc[0]=f0[_r(Ge+ne,127)],Le.Sc[1]=h0[_r(Ge+0,127)],Le.Eb[0]=2*f0[_r(Ge+U,127)],Le.Eb[1]=101581*h0[_r(Ge+ce,127)]>>16,8>Le.Eb[1]&&(Le.Eb[1]=8),Le.Qc[0]=f0[_r(Ge+ve,117)],Le.Qc[1]=h0[_r(Ge+de,127)],Le.lc=Ge+de}if(!le.Rb)return En(p,4,"Not a key frame.");for(we(se),le=p.Pa,I=0;4>I;++I){for(ne=0;8>ne;++ne)for(U=0;3>U;++U)for(ce=0;11>ce;++ce)ve=xe(se,r3[I][ne][U][ce])?Y(se,8):t3[I][ne][U][ce],le.Wc[I][ne].Yb[U][ce]=ve;for(ne=0;17>ne;++ne)le.Xc[I][ne]=le.Wc[I][i3[ne]]}return p.kc=we(se),p.kc&&(p.Bd=Y(se,8)),p.cb=1}function Hi(p,y,I,U,ne,se,le){var ce=y[ne].Yb[I];for(I=0;16>ne;++ne){if(!xe(p,ce[I+0]))return ne;for(;!xe(p,ce[I+1]);)if(ce=y[++ne].Yb[0],I=0,ne==16)return 16;var de=y[ne+1].Yb;if(xe(p,ce[I+2])){var ve=p,je=0;if(xe(ve,(Ge=ce)[(qe=I)+3]))if(xe(ve,Ge[qe+6])){for(ce=0,qe=2*(je=xe(ve,Ge[qe+8]))+(Ge=xe(ve,Ge[qe+9+je])),je=0,Ge=$v[qe];Ge[ce];++ce)je+=je+xe(ve,Ge[ce]);je+=3+(8<<qe)}else xe(ve,Ge[qe+7])?(je=7+2*xe(ve,165),je+=xe(ve,145)):je=5+xe(ve,159);else je=xe(ve,Ge[qe+4])?3+xe(ve,Ge[qe+5]):2;ce=de[2]}else je=1,ce=de[1];de=le+e3[ne],0>(ve=p).b&&Ee(ve);var qe,Ge=ve.b,Le=(qe=ve.Ca>>1)-(ve.I>>Ge)>>31;--ve.b,ve.Ca+=Le,ve.Ca|=1,ve.I-=(qe+1&Le)<<Ge,se[de]=((je^Le)-Le)*U[(0<ne)+0]}return 16}function Us(p){var y=p.rb[p.sb-1];y.la=0,y.Na=0,o(p.zc,0,0,p.zc.length),p.ja=0}function Mt(p,y){if(p==null)return 0;if(y==null)return En(p,2,"NULL VP8Io parameter in VP8Decode().");if(!p.cb&&!ir(p,y))return 0;if(t(p.cb),y.ac==null||y.ac(y)){y.ob&&(p.L=0);var I=af[p.L];if(p.L==2?(p.yb=0,p.zb=0):(p.yb=y.v-I>>4,p.zb=y.j-I>>4,0>p.yb&&(p.yb=0),0>p.zb&&(p.zb=0)),p.Va=y.o+15+I>>4,p.Hb=y.va+15+I>>4,p.Hb>p.za&&(p.Hb=p.za),p.Va>p.Ub&&(p.Va=p.Ub),0<p.L){var U=p.ed;for(I=0;4>I;++I){var ne;if(p.Qa.Cb){var se=p.Qa.Lb[I];p.Qa.Fb||(se+=U.Tb)}else se=U.Tb;for(ne=0;1>=ne;++ne){var le=p.gd[I][ne],ce=se;if(U.Pc&&(ce+=U.vd[0],ne&&(ce+=U.od[0])),0<(ce=0>ce?0:63<ce?63:ce)){var de=ce;0<U.wb&&(de=4<U.wb?de>>2:de>>1)>9-U.wb&&(de=9-U.wb),1>de&&(de=1),le.dd=de,le.tc=2*ce+de,le.ld=40<=ce?2:15<=ce?1:0}else le.tc=0;le.La=ne}}}I=0}else En(p,6,"Frame setup failed"),I=p.a;if(I=I==0){if(I){p.$c=0,0<p.Aa||(p.Ic=x3);e:{I=p.Ic,U=4*(de=p.za);var ve=32*de,je=de+1,qe=0<p.L?de*(0<p.Aa?2:1):0,Ge=(p.Aa==2?2:1)*de;if((le=U+832+(ne=3*(16*I+af[p.L])/2*ve)+(se=p.Fa!=null&&0<p.Fa.length?p.Kc.c*p.Kc.i:0))!=le)I=0;else{if(le>p.Vb){if(p.Vb=0,p.Ec=l(le),p.Fc=0,p.Ec==null){I=En(p,1,"no memory during frame initialization.");break e}p.Vb=le}le=p.Ec,ce=p.Fc,p.Ac=le,p.Bc=ce,ce+=U,p.Gd=f(ve,$t),p.Hd=0,p.rb=f(je+1,bt),p.sb=1,p.wa=qe?f(qe,Ne):null,p.Y=0,p.D.Nb=0,p.D.wa=p.wa,p.D.Y=p.Y,0<p.Aa&&(p.D.Y+=de),t(!0),p.oc=le,p.pc=ce,ce+=832,p.ya=f(Ge,Mr),p.aa=0,p.D.ya=p.ya,p.D.aa=p.aa,p.Aa==2&&(p.D.aa+=de),p.R=16*de,p.B=8*de,de=(ve=af[p.L])*p.R,ve=ve/2*p.B,p.sa=le,p.ta=ce+de,p.qa=p.sa,p.ra=p.ta+16*I*p.R+ve,p.Ha=p.qa,p.Ia=p.ra+8*I*p.B+ve,p.$c=0,ce+=ne,p.mb=se?le:null,p.nb=se?ce:null,t(ce+se<=p.Fc+p.Vb),Us(p),o(p.Ac,p.Bc,0,U),I=1}}if(I){if(y.ka=0,y.y=p.sa,y.O=p.ta,y.f=p.qa,y.N=p.ra,y.ea=p.Ha,y.Vd=p.Ia,y.fa=p.R,y.Rc=p.B,y.F=null,y.J=0,!Zd){for(I=-255;255>=I;++I)ai[255+I]=0>I?-I:I;for(I=-1020;1020>=I;++I)Ws[1020+I]=-128>I?-128:127<I?127:I;for(I=-112;112>=I;++I)Au[112+I]=-16>I?-16:15<I?15:I;for(I=-255;510>=I;++I)hc[255+I]=0>I?0:255<I?255:I;Zd=1}Ae=ji,Ce=He,Xe=pe,st=Ot,ht=wr,Re=Pr,ut=ps,cn=Di,Zt=sn,jr=Nr,ii=Nu,Sr=Ye,Nn=xs,pr=jl,Br=_l,qi=Pa,Ba=ts,ra=wu,ns[0]=Lt,ns[1]=wl,ns[2]=Hs,ns[3]=Ma,ns[4]=dc,ns[5]=hr,ns[6]=tn,ns[7]=Al,ns[8]=fc,ns[9]=Sl,Co[0]=yo,Co[1]=Bt,Co[2]=Tn,Co[3]=zs,Co[4]=Fr,Co[5]=Nl,Co[6]=uc,Ys[0]=ta,Ys[1]=Ii,Ys[2]=$a,Ys[3]=Cl,Ys[4]=gs,Ys[5]=Vs,Ys[6]=es,I=1}else I=0}I&&(I=function(Le,nt){for(Le.M=0;Le.M<Le.Va;++Le.M){var Ke,Ie=Le.Jc[Le.M&Le.Xb],De=Le.m,$e=Le;for(Ke=0;Ke<$e.za;++Ke){var dt=De,et=$e,Ct=et.Ac,vt=et.Bc+4*Ke,Ht=et.zc,Nt=et.ya[et.aa+Ke];if(et.Qa.Bb?Nt.$b=xe(dt,et.Pa.jb[0])?2+xe(dt,et.Pa.jb[2]):xe(dt,et.Pa.jb[1]):Nt.$b=0,et.kc&&(Nt.Ad=xe(dt,et.Bd)),Nt.Za=!xe(dt,145)+0,Nt.Za){var On=Nt.Ob,zn=0;for(et=0;4>et;++et){var jn,wn=Ht[0+et];for(jn=0;4>jn;++jn){wn=n3[Ct[vt+jn]][wn];for(var tr=np[xe(dt,wn[0])];0<tr;)tr=np[2*tr+xe(dt,wn[tr])];wn=-tr,Ct[vt+jn]=wn}r(On,zn,Ct,vt,4),zn+=4,Ht[0+et]=wn}}else wn=xe(dt,156)?xe(dt,128)?1:3:xe(dt,163)?2:0,Nt.Ob[0]=wn,o(Ct,vt,wn,4),o(Ht,0,wn,4);Nt.Dd=xe(dt,142)?xe(dt,114)?xe(dt,183)?1:3:2:0}if($e.m.Ka)return En(Le,7,"Premature end-of-partition0 encountered.");for(;Le.ja<Le.za;++Le.ja){if($e=Ie,dt=(De=Le).rb[De.sb-1],Ct=De.rb[De.sb+De.ja],Ke=De.ya[De.aa+De.ja],vt=De.kc?Ke.Ad:0)dt.la=Ct.la=0,Ke.Za||(dt.Na=Ct.Na=0),Ke.Hc=0,Ke.Gc=0,Ke.ia=0;else{var Qn,ln;if(dt=Ct,Ct=$e,vt=De.Pa.Xc,Ht=De.ya[De.aa+De.ja],Nt=De.pb[Ht.$b],et=Ht.ad,On=0,zn=De.rb[De.sb-1],wn=jn=0,o(et,On,0,384),Ht.Za)var Xr=0,aa=vt[3];else{tr=l(16);var Zr=dt.Na+zn.Na;if(Zr=Su(Ct,vt[1],Zr,Nt.Eb,0,tr,0),dt.Na=zn.Na=(0<Zr)+0,1<Zr)Ae(tr,0,et,On);else{var sa=tr[0]+3>>3;for(tr=0;256>tr;tr+=16)et[On+tr]=sa}Xr=1,aa=vt[0]}var Hn=15&dt.la,ya=15&zn.la;for(tr=0;4>tr;++tr){var va=1&ya;for(sa=ln=0;4>sa;++sa)Hn=Hn>>1|(va=(Zr=Su(Ct,aa,Zr=va+(1&Hn),Nt.Sc,Xr,et,On))>Xr)<<7,ln=ln<<2|(3<Zr?3:1<Zr?2:et[On+0]!=0),On+=16;Hn>>=4,ya=ya>>1|va<<7,jn=(jn<<8|ln)>>>0}for(aa=Hn,Xr=ya>>4,Qn=0;4>Qn;Qn+=2){for(ln=0,Hn=dt.la>>4+Qn,ya=zn.la>>4+Qn,tr=0;2>tr;++tr){for(va=1&ya,sa=0;2>sa;++sa)Zr=va+(1&Hn),Hn=Hn>>1|(va=0<(Zr=Su(Ct,vt[2],Zr,Nt.Qc,0,et,On)))<<3,ln=ln<<2|(3<Zr?3:1<Zr?2:et[On+0]!=0),On+=16;Hn>>=2,ya=ya>>1|va<<5}wn|=ln<<4*Qn,aa|=Hn<<4<<Qn,Xr|=(240&ya)<<Qn}dt.la=aa,zn.la=Xr,Ht.Hc=jn,Ht.Gc=wn,Ht.ia=43690&wn?0:Nt.ia,vt=!(jn|wn)}if(0<De.L&&(De.wa[De.Y+De.ja]=De.gd[Ke.$b][Ke.Za],De.wa[De.Y+De.ja].La|=!vt),$e.Ka)return En(Le,7,"Premature end-of-file encountered.")}if(Us(Le),De=nt,$e=1,Ke=(Ie=Le).D,dt=0<Ie.L&&Ie.M>=Ie.zb&&Ie.M<=Ie.Va,Ie.Aa==0)e:{if(Ke.M=Ie.M,Ke.uc=dt,Oi(Ie,Ke),$e=1,Ke=(ln=Ie.D).Nb,dt=(wn=af[Ie.L])*Ie.R,Ct=wn/2*Ie.B,tr=16*Ke*Ie.R,sa=8*Ke*Ie.B,vt=Ie.sa,Ht=Ie.ta-dt+tr,Nt=Ie.qa,et=Ie.ra-Ct+sa,On=Ie.Ha,zn=Ie.Ia-Ct+sa,ya=(Hn=ln.M)==0,jn=Hn>=Ie.Va-1,Ie.Aa==2&&Oi(Ie,ln),ln.uc)for(va=(Zr=Ie).D.M,t(Zr.D.uc),ln=Zr.yb;ln<Zr.Hb;++ln){Xr=ln,aa=va;var mi=(Ni=(Ir=Zr).D).Nb;Qn=Ir.R;var Ni=Ni.wa[Ni.Y+Xr],Gi=Ir.sa,Ha=Ir.ta+16*mi*Qn+16*Xr,ws=Ni.dd,gi=Ni.tc;if(gi!=0)if(t(3<=gi),Ir.L==1)0<Xr&&qi(Gi,Ha,Qn,gi+4),Ni.La&&ra(Gi,Ha,Qn,gi),0<aa&&Br(Gi,Ha,Qn,gi+4),Ni.La&&Ba(Gi,Ha,Qn,gi);else{var Xs=Ir.B,Ol=Ir.qa,mc=Ir.ra+8*mi*Xs+8*Xr,To=Ir.Ha,Ir=Ir.Ia+8*mi*Xs+8*Xr;mi=Ni.ld,0<Xr&&(cn(Gi,Ha,Qn,gi+4,ws,mi),jr(Ol,mc,To,Ir,Xs,gi+4,ws,mi)),Ni.La&&(Sr(Gi,Ha,Qn,gi,ws,mi),pr(Ol,mc,To,Ir,Xs,gi,ws,mi)),0<aa&&(ut(Gi,Ha,Qn,gi+4,ws,mi),Zt(Ol,mc,To,Ir,Xs,gi+4,ws,mi)),Ni.La&&(ii(Gi,Ha,Qn,gi,ws,mi),Nn(Ol,mc,To,Ir,Xs,gi,ws,mi))}}if(Ie.ia&&alert("todo:DitherRow"),De.put!=null){if(ln=16*Hn,Hn=16*(Hn+1),ya?(De.y=Ie.sa,De.O=Ie.ta+tr,De.f=Ie.qa,De.N=Ie.ra+sa,De.ea=Ie.Ha,De.W=Ie.Ia+sa):(ln-=wn,De.y=vt,De.O=Ht,De.f=Nt,De.N=et,De.ea=On,De.W=zn),jn||(Hn-=wn),Hn>De.o&&(Hn=De.o),De.F=null,De.J=null,Ie.Fa!=null&&0<Ie.Fa.length&&ln<Hn&&(De.J=_n(Ie,De,ln,Hn-ln),De.F=Ie.mb,De.F==null&&De.F.length==0)){$e=En(Ie,3,"Could not decode alpha data.");break e}ln<De.j&&(wn=De.j-ln,ln=De.j,t(!(1&wn)),De.O+=Ie.R*wn,De.N+=Ie.B*(wn>>1),De.W+=Ie.B*(wn>>1),De.F!=null&&(De.J+=De.width*wn)),ln<Hn&&(De.O+=De.v,De.N+=De.v>>1,De.W+=De.v>>1,De.F!=null&&(De.J+=De.v),De.ka=ln-De.j,De.U=De.va-De.v,De.T=Hn-ln,$e=De.put(De))}Ke+1!=Ie.Ic||jn||(r(Ie.sa,Ie.ta-dt,vt,Ht+16*Ie.R,dt),r(Ie.qa,Ie.ra-Ct,Nt,et+8*Ie.B,Ct),r(Ie.Ha,Ie.Ia-Ct,On,zn+8*Ie.B,Ct))}if(!$e)return En(Le,6,"Output aborted.")}return 1}(p,y)),y.bc!=null&&y.bc(y),I&=1}return I?(p.cb=0,I):0}function mn(p,y,I,U,ne){ne=p[y+I+32*U]+(ne>>3),p[y+I+32*U]=-256&ne?0>ne?0:255:ne}function xo(p,y,I,U,ne,se){mn(p,y,0,I,U+ne),mn(p,y,1,I,U+se),mn(p,y,2,I,U-se),mn(p,y,3,I,U-ne)}function kr(p){return(20091*p>>16)+p}function Dn(p,y,I,U){var ne,se=0,le=l(16);for(ne=0;4>ne;++ne){var ce=p[y+0]+p[y+8],de=p[y+0]-p[y+8],ve=(35468*p[y+4]>>16)-kr(p[y+12]),je=kr(p[y+4])+(35468*p[y+12]>>16);le[se+0]=ce+je,le[se+1]=de+ve,le[se+2]=de-ve,le[se+3]=ce-je,se+=4,y++}for(ne=se=0;4>ne;++ne)ce=(p=le[se+0]+4)+le[se+8],de=p-le[se+8],ve=(35468*le[se+4]>>16)-kr(le[se+12]),mn(I,U,0,0,ce+(je=kr(le[se+4])+(35468*le[se+12]>>16))),mn(I,U,1,0,de+ve),mn(I,U,2,0,de-ve),mn(I,U,3,0,ce-je),se++,U+=32}function Pr(p,y,I,U){var ne=p[y+0]+4,se=35468*p[y+4]>>16,le=kr(p[y+4]),ce=35468*p[y+1]>>16;xo(I,U,0,ne+le,p=kr(p[y+1]),ce),xo(I,U,1,ne+se,p,ce),xo(I,U,2,ne-se,p,ce),xo(I,U,3,ne-le,p,ce)}function He(p,y,I,U,ne){Dn(p,y,I,U),ne&&Dn(p,y+16,I,U+4)}function pe(p,y,I,U){Ce(p,y+0,I,U,1),Ce(p,y+32,I,U+128,1)}function Ot(p,y,I,U){var ne;for(p=p[y+0]+4,ne=0;4>ne;++ne)for(y=0;4>y;++y)mn(I,U,y,ne,p)}function wr(p,y,I,U){p[y+0]&&st(p,y+0,I,U),p[y+16]&&st(p,y+16,I,U+4),p[y+32]&&st(p,y+32,I,U+128),p[y+48]&&st(p,y+48,I,U+128+4)}function ji(p,y,I,U){var ne,se=l(16);for(ne=0;4>ne;++ne){var le=p[y+0+ne]+p[y+12+ne],ce=p[y+4+ne]+p[y+8+ne],de=p[y+4+ne]-p[y+8+ne],ve=p[y+0+ne]-p[y+12+ne];se[0+ne]=le+ce,se[8+ne]=le-ce,se[4+ne]=ve+de,se[12+ne]=ve-de}for(ne=0;4>ne;++ne)le=(p=se[0+4*ne]+3)+se[3+4*ne],ce=se[1+4*ne]+se[2+4*ne],de=se[1+4*ne]-se[2+4*ne],ve=p-se[3+4*ne],I[U+0]=le+ce>>3,I[U+16]=ve+de>>3,I[U+32]=le-ce>>3,I[U+48]=ve-de>>3,U+=64}function vl(p,y,I){var U,ne=y-32,se=ba,le=255-p[ne-1];for(U=0;U<I;++U){var ce,de=se,ve=le+p[y-1];for(ce=0;ce<I;++ce)p[y+ce]=de[ve+p[ne+ce]];y+=32}}function wl(p,y){vl(p,y,4)}function Ii(p,y){vl(p,y,8)}function Bt(p,y){vl(p,y,16)}function Tn(p,y){var I;for(I=0;16>I;++I)r(p,y+32*I,p,y-32,16)}function zs(p,y){var I;for(I=16;0<I;--I)o(p,y,p[y-1],16),y+=32}function bo(p,y,I){var U;for(U=0;16>U;++U)o(y,I+32*U,p,16)}function yo(p,y){var I,U=16;for(I=0;16>I;++I)U+=p[y-1+32*I]+p[y+I-32];bo(U>>5,p,y)}function Fr(p,y){var I,U=8;for(I=0;16>I;++I)U+=p[y-1+32*I];bo(U>>4,p,y)}function Nl(p,y){var I,U=8;for(I=0;16>I;++I)U+=p[y+I-32];bo(U>>4,p,y)}function uc(p,y){bo(128,p,y)}function jt(p,y,I){return p+2*y+I+2>>2}function Hs(p,y){var I,U=y-32;for(U=new Uint8Array([jt(p[U-1],p[U+0],p[U+1]),jt(p[U+0],p[U+1],p[U+2]),jt(p[U+1],p[U+2],p[U+3]),jt(p[U+2],p[U+3],p[U+4])]),I=0;4>I;++I)r(p,y+32*I,U,0,U.length)}function Ma(p,y){var I=p[y-1],U=p[y-1+32],ne=p[y-1+64],se=p[y-1+96];Me(p,y+0,16843009*jt(p[y-1-32],I,U)),Me(p,y+32,16843009*jt(I,U,ne)),Me(p,y+64,16843009*jt(U,ne,se)),Me(p,y+96,16843009*jt(ne,se,se))}function Lt(p,y){var I,U=4;for(I=0;4>I;++I)U+=p[y+I-32]+p[y-1+32*I];for(U>>=3,I=0;4>I;++I)o(p,y+32*I,U,4)}function dc(p,y){var I=p[y-1+0],U=p[y-1+32],ne=p[y-1+64],se=p[y-1-32],le=p[y+0-32],ce=p[y+1-32],de=p[y+2-32],ve=p[y+3-32];p[y+0+96]=jt(U,ne,p[y-1+96]),p[y+1+96]=p[y+0+64]=jt(I,U,ne),p[y+2+96]=p[y+1+64]=p[y+0+32]=jt(se,I,U),p[y+3+96]=p[y+2+64]=p[y+1+32]=p[y+0+0]=jt(le,se,I),p[y+3+64]=p[y+2+32]=p[y+1+0]=jt(ce,le,se),p[y+3+32]=p[y+2+0]=jt(de,ce,le),p[y+3+0]=jt(ve,de,ce)}function tn(p,y){var I=p[y+1-32],U=p[y+2-32],ne=p[y+3-32],se=p[y+4-32],le=p[y+5-32],ce=p[y+6-32],de=p[y+7-32];p[y+0+0]=jt(p[y+0-32],I,U),p[y+1+0]=p[y+0+32]=jt(I,U,ne),p[y+2+0]=p[y+1+32]=p[y+0+64]=jt(U,ne,se),p[y+3+0]=p[y+2+32]=p[y+1+64]=p[y+0+96]=jt(ne,se,le),p[y+3+32]=p[y+2+64]=p[y+1+96]=jt(se,le,ce),p[y+3+64]=p[y+2+96]=jt(le,ce,de),p[y+3+96]=jt(ce,de,de)}function hr(p,y){var I=p[y-1+0],U=p[y-1+32],ne=p[y-1+64],se=p[y-1-32],le=p[y+0-32],ce=p[y+1-32],de=p[y+2-32],ve=p[y+3-32];p[y+0+0]=p[y+1+64]=se+le+1>>1,p[y+1+0]=p[y+2+64]=le+ce+1>>1,p[y+2+0]=p[y+3+64]=ce+de+1>>1,p[y+3+0]=de+ve+1>>1,p[y+0+96]=jt(ne,U,I),p[y+0+64]=jt(U,I,se),p[y+0+32]=p[y+1+96]=jt(I,se,le),p[y+1+32]=p[y+2+96]=jt(se,le,ce),p[y+2+32]=p[y+3+96]=jt(le,ce,de),p[y+3+32]=jt(ce,de,ve)}function Al(p,y){var I=p[y+0-32],U=p[y+1-32],ne=p[y+2-32],se=p[y+3-32],le=p[y+4-32],ce=p[y+5-32],de=p[y+6-32],ve=p[y+7-32];p[y+0+0]=I+U+1>>1,p[y+1+0]=p[y+0+64]=U+ne+1>>1,p[y+2+0]=p[y+1+64]=ne+se+1>>1,p[y+3+0]=p[y+2+64]=se+le+1>>1,p[y+0+32]=jt(I,U,ne),p[y+1+32]=p[y+0+96]=jt(U,ne,se),p[y+2+32]=p[y+1+96]=jt(ne,se,le),p[y+3+32]=p[y+2+96]=jt(se,le,ce),p[y+3+64]=jt(le,ce,de),p[y+3+96]=jt(ce,de,ve)}function Sl(p,y){var I=p[y-1+0],U=p[y-1+32],ne=p[y-1+64],se=p[y-1+96];p[y+0+0]=I+U+1>>1,p[y+2+0]=p[y+0+32]=U+ne+1>>1,p[y+2+32]=p[y+0+64]=ne+se+1>>1,p[y+1+0]=jt(I,U,ne),p[y+3+0]=p[y+1+32]=jt(U,ne,se),p[y+3+32]=p[y+1+64]=jt(ne,se,se),p[y+3+64]=p[y+2+64]=p[y+0+96]=p[y+1+96]=p[y+2+96]=p[y+3+96]=se}function fc(p,y){var I=p[y-1+0],U=p[y-1+32],ne=p[y-1+64],se=p[y-1+96],le=p[y-1-32],ce=p[y+0-32],de=p[y+1-32],ve=p[y+2-32];p[y+0+0]=p[y+2+32]=I+le+1>>1,p[y+0+32]=p[y+2+64]=U+I+1>>1,p[y+0+64]=p[y+2+96]=ne+U+1>>1,p[y+0+96]=se+ne+1>>1,p[y+3+0]=jt(ce,de,ve),p[y+2+0]=jt(le,ce,de),p[y+1+0]=p[y+3+32]=jt(I,le,ce),p[y+1+32]=p[y+3+64]=jt(U,I,le),p[y+1+64]=p[y+3+96]=jt(ne,U,I),p[y+1+96]=jt(se,ne,U)}function $a(p,y){var I;for(I=0;8>I;++I)r(p,y+32*I,p,y-32,8)}function Cl(p,y){var I;for(I=0;8>I;++I)o(p,y,p[y-1],8),y+=32}function pa(p,y,I){var U;for(U=0;8>U;++U)o(y,I+32*U,p,8)}function ta(p,y){var I,U=8;for(I=0;8>I;++I)U+=p[y+I-32]+p[y-1+32*I];pa(U>>4,p,y)}function Vs(p,y){var I,U=4;for(I=0;8>I;++I)U+=p[y+I-32];pa(U>>3,p,y)}function gs(p,y){var I,U=4;for(I=0;8>I;++I)U+=p[y-1+32*I];pa(U>>3,p,y)}function es(p,y){pa(128,p,y)}function ka(p,y,I){var U=p[y-I],ne=p[y+0],se=3*(ne-U)+o0[1020+p[y-2*I]-p[y+I]],le=Qd[112+(se+4>>3)];p[y-I]=ba[255+U+Qd[112+(se+3>>3)]],p[y+0]=ba[255+ne-le]}function ni(p,y,I,U){var ne=p[y+0],se=p[y+I];return Ua[255+p[y-2*I]-p[y-I]]>U||Ua[255+se-ne]>U}function El(p,y,I,U){return 4*Ua[255+p[y-I]-p[y+0]]+Ua[255+p[y-2*I]-p[y+I]]<=U}function Tl(p,y,I,U,ne){var se=p[y-3*I],le=p[y-2*I],ce=p[y-I],de=p[y+0],ve=p[y+I],je=p[y+2*I],qe=p[y+3*I];return 4*Ua[255+ce-de]+Ua[255+le-ve]>U?0:Ua[255+p[y-4*I]-se]<=ne&&Ua[255+se-le]<=ne&&Ua[255+le-ce]<=ne&&Ua[255+qe-je]<=ne&&Ua[255+je-ve]<=ne&&Ua[255+ve-de]<=ne}function _l(p,y,I,U){var ne=2*U+1;for(U=0;16>U;++U)El(p,y+U,I,ne)&&ka(p,y+U,I)}function Pa(p,y,I,U){var ne=2*U+1;for(U=0;16>U;++U)El(p,y+U*I,1,ne)&&ka(p,y+U*I,1)}function ts(p,y,I,U){var ne;for(ne=3;0<ne;--ne)_l(p,y+=4*I,I,U)}function wu(p,y,I,U){var ne;for(ne=3;0<ne;--ne)Pa(p,y+=4,I,U)}function gn(p,y,I,U,ne,se,le,ce){for(se=2*se+1;0<ne--;){if(Tl(p,y,I,se,le))if(ni(p,y,I,ce))ka(p,y,I);else{var de=p,ve=y,je=I,qe=de[ve-2*je],Ge=de[ve-je],Le=de[ve+0],nt=de[ve+je],Ke=de[ve+2*je],Ie=27*($e=o0[1020+3*(Le-Ge)+o0[1020+qe-nt]])+63>>7,De=18*$e+63>>7,$e=9*$e+63>>7;de[ve-3*je]=ba[255+de[ve-3*je]+$e],de[ve-2*je]=ba[255+qe+De],de[ve-je]=ba[255+Ge+Ie],de[ve+0]=ba[255+Le-Ie],de[ve+je]=ba[255+nt-De],de[ve+2*je]=ba[255+Ke-$e]}y+=U}}function na(p,y,I,U,ne,se,le,ce){for(se=2*se+1;0<ne--;){if(Tl(p,y,I,se,le))if(ni(p,y,I,ce))ka(p,y,I);else{var de=p,ve=y,je=I,qe=de[ve-je],Ge=de[ve+0],Le=de[ve+je],nt=Qd[112+((Ke=3*(Ge-qe))+4>>3)],Ke=Qd[112+(Ke+3>>3)],Ie=nt+1>>1;de[ve-2*je]=ba[255+de[ve-2*je]+Ie],de[ve-je]=ba[255+qe+Ke],de[ve+0]=ba[255+Ge-nt],de[ve+je]=ba[255+Le-Ie]}y+=U}}function ps(p,y,I,U,ne,se){gn(p,y,I,1,16,U,ne,se)}function Di(p,y,I,U,ne,se){gn(p,y,1,I,16,U,ne,se)}function Nu(p,y,I,U,ne,se){var le;for(le=3;0<le;--le)na(p,y+=4*I,I,1,16,U,ne,se)}function Ye(p,y,I,U,ne,se){var le;for(le=3;0<le;--le)na(p,y+=4,1,I,16,U,ne,se)}function sn(p,y,I,U,ne,se,le,ce){gn(p,y,ne,1,8,se,le,ce),gn(I,U,ne,1,8,se,le,ce)}function Nr(p,y,I,U,ne,se,le,ce){gn(p,y,1,ne,8,se,le,ce),gn(I,U,1,ne,8,se,le,ce)}function xs(p,y,I,U,ne,se,le,ce){na(p,y+4*ne,ne,1,8,se,le,ce),na(I,U+4*ne,ne,1,8,se,le,ce)}function jl(p,y,I,U,ne,se,le,ce){na(p,y+4,1,ne,8,se,le,ce),na(I,U+4,1,ne,8,se,le,ce)}function vo(){this.ba=new en,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new $n,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Il(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Dl(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function wo(){this.ua=0,this.Wa=new he,this.vb=new he,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new J,this.yc=new k}function Ar(){this.xb=this.a=0,this.l=new Yt,this.ca=new en,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new L,this.Pb=0,this.wd=new L,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new wo,this.ab=0,this.gc=f(4,Dl),this.Oc=0}function bs(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Yt,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Fn(p,y,I,U,ne,se,le){for(p=p==null?0:p[y+0],y=0;y<le;++y)ne[se+y]=p+I[U+y]&255,p=ne[se+y]}function ys(p,y,I,U,ne,se,le){var ce;if(p==null)Fn(null,null,I,U,ne,se,le);else for(ce=0;ce<le;++ce)ne[se+ce]=p[y+ce]+I[U+ce]&255}function Ri(p,y,I,U,ne,se,le){if(p==null)Fn(null,null,I,U,ne,se,le);else{var ce,de=p[y+0],ve=de,je=de;for(ce=0;ce<le;++ce)ve=je+(de=p[y+ce])-ve,je=I[U+ce]+(-256&ve?0>ve?0:255:ve)&255,ve=de,ne[se+ce]=je}}function _n(p,y,I,U){var ne=y.width,se=y.o;if(t(p!=null&&y!=null),0>I||0>=U||I+U>se)return null;if(!p.Cc){if(p.ga==null){var le;if(p.ga=new bs,(le=p.ga==null)||(le=y.width*y.o,t(p.Gb.length==0),p.Gb=l(le),p.Uc=0,p.Gb==null?le=0:(p.mb=p.Gb,p.nb=p.Uc,p.rc=null,le=1),le=!le),!le){le=p.ga;var ce=p.Fa,de=p.P,ve=p.qc,je=p.mb,qe=p.nb,Ge=de+1,Le=ve-1,nt=le.l;if(t(ce!=null&&je!=null&&y!=null),Eo[0]=null,Eo[1]=Fn,Eo[2]=ys,Eo[3]=Ri,le.ca=je,le.tb=qe,le.c=y.width,le.i=y.height,t(0<le.c&&0<le.i),1>=ve)y=0;else if(le.$a=ce[de+0]>>0&3,le.Z=ce[de+0]>>2&3,le.Lc=ce[de+0]>>4&3,de=ce[de+0]>>6&3,0>le.$a||1<le.$a||4<=le.Z||1<le.Lc||de)y=0;else if(nt.put=ei,nt.ac=yn,nt.bc=vi,nt.ma=le,nt.width=y.width,nt.height=y.height,nt.Da=y.Da,nt.v=y.v,nt.va=y.va,nt.j=y.j,nt.o=y.o,le.$a)e:{t(le.$a==1),y=di();t:for(;;){if(y==null){y=0;break e}if(t(le!=null),le.mc=y,y.c=le.c,y.i=le.i,y.l=le.l,y.l.ma=le,y.l.width=le.c,y.l.height=le.i,y.a=0,X(y.m,ce,Ge,Le),!Tr(le.c,le.i,1,y,null)||(y.ab==1&&y.gc[0].hc==3&&ui(y.s)?(le.ic=1,ce=y.c*y.i,y.Ta=null,y.Ua=0,y.V=l(ce),y.Ba=0,y.V==null?(y.a=1,y=0):y=1):(le.ic=0,y=ms(y,le.c)),!y))break t;y=1;break e}le.mc=null,y=0}else y=Le>=le.c*le.i;le=!y}if(le)return null;p.ga.Lc!=1?p.Ga=0:U=se-I}t(p.ga!=null),t(I+U<=se);e:{if(y=(ce=p.ga).c,se=ce.l.o,ce.$a==0){if(Ge=p.rc,Le=p.Vc,nt=p.Fa,de=p.P+1+I*y,ve=p.mb,je=p.nb+I*y,t(de<=p.P+p.qc),ce.Z!=0)for(t(Eo[ce.Z]!=null),le=0;le<U;++le)Eo[ce.Z](Ge,Le,nt,de,ve,je,y),Ge=ve,Le=je,je+=y,de+=y;else for(le=0;le<U;++le)r(ve,je,nt,de,y),Ge=ve,Le=je,je+=y,de+=y;p.rc=Ge,p.Vc=Le}else{if(t(ce.mc!=null),y=I+U,t((le=ce.mc)!=null),t(y<=le.i),le.C>=y)y=1;else if(ce.ic||Fe(),ce.ic){ce=le.V,Ge=le.Ba,Le=le.c;var Ke=le.i,Ie=(nt=1,de=le.$/Le,ve=le.$%Le,je=le.m,qe=le.s,le.$),De=Le*Ke,$e=Le*y,dt=qe.wc,et=Ie<$e?Pn(qe,ve,de):null;t(Ie<=De),t(y<=Ke),t(ui(qe));t:for(;;){for(;!je.h&&Ie<$e;){if(ve&dt||(et=Pn(qe,ve,de)),t(et!=null),ae(je),256>(Ke=Yr(et.G[0],et.H[0],je)))ce[Ge+Ie]=Ke,++Ie,++ve>=Le&&(ve=0,++de<=y&&!(de%16)&&er(le,de));else{if(!(280>Ke)){nt=0;break t}Ke=zi(Ke-256,je);var Ct,vt=Yr(et.G[4],et.H[4],je);if(ae(je),!(Ie>=(vt=Wr(Le,vt=zi(vt,je)))&&De-Ie>=Ke)){nt=0;break t}for(Ct=0;Ct<Ke;++Ct)ce[Ge+Ie+Ct]=ce[Ge+Ie+Ct-vt];for(Ie+=Ke,ve+=Ke;ve>=Le;)ve-=Le,++de<=y&&!(de%16)&&er(le,de);Ie<$e&&ve&dt&&(et=Pn(qe,ve,de))}t(je.h==ee(je))}er(le,de>y?y:de);break t}!nt||je.h&&Ie<De?(nt=0,le.a=je.h?5:3):le.$=Ie,y=nt}else y=ti(le,le.V,le.Ba,le.c,le.i,y,Bs);if(!y){U=0;break e}}I+U>=se&&(p.Cc=1),U=1}if(!U)return null;if(p.Cc&&((U=p.ga)!=null&&(U.mc=null),p.ga=null,0<p.Ga))return alert("todo:WebPDequantizeLevels"),null}return p.nb+I*ne}function S(p,y,I,U,ne,se){for(;0<ne--;){var le,ce=p,de=y+(I?1:0),ve=p,je=y+(I?0:3);for(le=0;le<U;++le){var qe=ve[je+4*le];qe!=255&&(qe*=32897,ce[de+4*le+0]=ce[de+4*le+0]*qe>>23,ce[de+4*le+1]=ce[de+4*le+1]*qe>>23,ce[de+4*le+2]=ce[de+4*le+2]*qe>>23)}y+=se}}function re(p,y,I,U,ne){for(;0<U--;){var se;for(se=0;se<I;++se){var le=p[y+2*se+0],ce=15&(ve=p[y+2*se+1]),de=4369*ce,ve=(240&ve|ve>>4)*de>>16;p[y+2*se+0]=(240&le|le>>4)*de>>16&240|(15&le|le<<4)*de>>16>>4&15,p[y+2*se+1]=240&ve|ce}y+=ne}}function be(p,y,I,U,ne,se,le,ce){var de,ve,je=255;for(ve=0;ve<ne;++ve){for(de=0;de<U;++de){var qe=p[y+de];se[le+4*de]=qe,je&=qe}y+=I,le+=ce}return je!=255}function Se(p,y,I,U,ne){var se;for(se=0;se<ne;++se)I[U+se]=p[y+se]>>8}function Fe(){ia=S,ar=re,sr=be,Ur=Se}function Je(p,y,I){R[p]=function(U,ne,se,le,ce,de,ve,je,qe,Ge,Le,nt,Ke,Ie,De,$e,dt){var et,Ct=dt-1>>1,vt=ce[de+0]|ve[je+0]<<16,Ht=qe[Ge+0]|Le[nt+0]<<16;t(U!=null);var Nt=3*vt+Ht+131074>>2;for(y(U[ne+0],255&Nt,Nt>>16,Ke,Ie),se!=null&&(Nt=3*Ht+vt+131074>>2,y(se[le+0],255&Nt,Nt>>16,De,$e)),et=1;et<=Ct;++et){var On=ce[de+et]|ve[je+et]<<16,zn=qe[Ge+et]|Le[nt+et]<<16,jn=vt+On+Ht+zn+524296,wn=jn+2*(On+Ht)>>3;Nt=wn+vt>>1,vt=(jn=jn+2*(vt+zn)>>3)+On>>1,y(U[ne+2*et-1],255&Nt,Nt>>16,Ke,Ie+(2*et-1)*I),y(U[ne+2*et-0],255&vt,vt>>16,Ke,Ie+(2*et-0)*I),se!=null&&(Nt=jn+Ht>>1,vt=wn+zn>>1,y(se[le+2*et-1],255&Nt,Nt>>16,De,$e+(2*et-1)*I),y(se[le+2*et+0],255&vt,vt>>16,De,$e+(2*et+0)*I)),vt=On,Ht=zn}1&dt||(Nt=3*vt+Ht+131074>>2,y(U[ne+dt-1],255&Nt,Nt>>16,Ke,Ie+(dt-1)*I),se!=null&&(Nt=3*Ht+vt+131074>>2,y(se[le+dt-1],255&Nt,Nt>>16,De,$e+(dt-1)*I)))}}function rt(){za[Kd]=s3,za[Jd]=ip,za[$g]=o3,za[$d]=ap,za[ef]=sp,za[l0]=op,za[ep]=l3,za[c0]=ip,za[u0]=ap,za[tf]=sp,za[d0]=op}function At(p){return p&-16384?0>p?0:255:p>>c3}function kt(p,y){return At((19077*p>>8)+(26149*y>>8)-14234)}function Kt(p,y,I){return At((19077*p>>8)-(6419*y>>8)-(13320*I>>8)+8708)}function Jt(p,y){return At((19077*p>>8)+(33050*y>>8)-17685)}function pn(p,y,I,U,ne){U[ne+0]=kt(p,I),U[ne+1]=Kt(p,y,I),U[ne+2]=Jt(p,y)}function lr(p,y,I,U,ne){U[ne+0]=Jt(p,y),U[ne+1]=Kt(p,y,I),U[ne+2]=kt(p,I)}function Un(p,y,I,U,ne){var se=Kt(p,y,I);y=se<<3&224|Jt(p,y)>>3,U[ne+0]=248&kt(p,I)|se>>5,U[ne+1]=y}function mr(p,y,I,U,ne){var se=240&Jt(p,y)|15;U[ne+0]=240&kt(p,I)|Kt(p,y,I)>>4,U[ne+1]=se}function hi(p,y,I,U,ne){U[ne+0]=255,pn(p,y,I,U,ne+1)}function gr(p,y,I,U,ne){lr(p,y,I,U,ne),U[ne+3]=255}function xa(p,y,I,U,ne){pn(p,y,I,U,ne),U[ne+3]=255}function _r(p,y){return 0>p?0:p>y?y:p}function Vi(p,y,I){R[p]=function(U,ne,se,le,ce,de,ve,je,qe){for(var Ge=je+(-2&qe)*I;je!=Ge;)y(U[ne+0],se[le+0],ce[de+0],ve,je),y(U[ne+1],se[le+0],ce[de+0],ve,je+I),ne+=2,++le,++de,je+=2*I;1&qe&&y(U[ne+0],se[le+0],ce[de+0],ve,je)}}function wi(p,y,I){return I==0?p==0?y==0?6:5:y==0?4:0:I}function No(p,y,I,U,ne){switch(p>>>30){case 3:Ce(y,I,U,ne,0);break;case 2:Re(y,I,U,ne);break;case 1:st(y,I,U,ne)}}function Oi(p,y){var I,U,ne=y.M,se=y.Nb,le=p.oc,ce=p.pc+40,de=p.oc,ve=p.pc+584,je=p.oc,qe=p.pc+600;for(I=0;16>I;++I)le[ce+32*I-1]=129;for(I=0;8>I;++I)de[ve+32*I-1]=129,je[qe+32*I-1]=129;for(0<ne?le[ce-1-32]=de[ve-1-32]=je[qe-1-32]=129:(o(le,ce-32-1,127,21),o(de,ve-32-1,127,9),o(je,qe-32-1,127,9)),U=0;U<p.za;++U){var Ge=y.ya[y.aa+U];if(0<U){for(I=-1;16>I;++I)r(le,ce+32*I-4,le,ce+32*I+12,4);for(I=-1;8>I;++I)r(de,ve+32*I-4,de,ve+32*I+4,4),r(je,qe+32*I-4,je,qe+32*I+4,4)}var Le=p.Gd,nt=p.Hd+U,Ke=Ge.ad,Ie=Ge.Hc;if(0<ne&&(r(le,ce-32,Le[nt].y,0,16),r(de,ve-32,Le[nt].f,0,8),r(je,qe-32,Le[nt].ea,0,8)),Ge.Za){var De=le,$e=ce-32+16;for(0<ne&&(U>=p.za-1?o(De,$e,Le[nt].y[15],4):r(De,$e,Le[nt+1].y,0,4)),I=0;4>I;I++)De[$e+128+I]=De[$e+256+I]=De[$e+384+I]=De[$e+0+I];for(I=0;16>I;++I,Ie<<=2)De=le,$e=ce+cp[I],ns[Ge.Ob[I]](De,$e),No(Ie,Ke,16*+I,De,$e)}else if(De=wi(U,ne,Ge.Ob[0]),Co[De](le,ce),Ie!=0)for(I=0;16>I;++I,Ie<<=2)No(Ie,Ke,16*+I,le,ce+cp[I]);for(I=Ge.Gc,De=wi(U,ne,Ge.Dd),Ys[De](de,ve),Ys[De](je,qe),Ie=Ke,De=de,$e=ve,255&(Ge=I>>0)&&(170&Ge?Xe(Ie,256,De,$e):ht(Ie,256,De,$e)),Ge=je,Ie=qe,255&(I>>=8)&&(170&I?Xe(Ke,320,Ge,Ie):ht(Ke,320,Ge,Ie)),ne<p.Ub-1&&(r(Le[nt].y,0,le,ce+480,16),r(Le[nt].f,0,de,ve+224,8),r(Le[nt].ea,0,je,qe+224,8)),I=8*se*p.B,Le=p.sa,nt=p.ta+16*U+16*se*p.R,Ke=p.qa,Ge=p.ra+8*U+I,Ie=p.Ha,De=p.Ia+8*U+I,I=0;16>I;++I)r(Le,nt+I*p.R,le,ce+32*I,16);for(I=0;8>I;++I)r(Ke,Ge+I*p.B,de,ve+32*I,8),r(Ie,De+I*p.B,je,qe+32*I,8)}}function Ao(p,y,I,U,ne,se,le,ce,de){var ve=[0],je=[0],qe=0,Ge=de!=null?de.kd:0,Le=de??new Il;if(p==null||12>I)return 7;Le.data=p,Le.w=y,Le.ha=I,y=[y],I=[I],Le.gb=[Le.gb];e:{var nt=y,Ke=I,Ie=Le.gb;if(t(p!=null),t(Ke!=null),t(Ie!=null),Ie[0]=0,12<=Ke[0]&&!n(p,nt[0],"RIFF")){if(n(p,nt[0]+8,"WEBP")){Ie=3;break e}var De=Be(p,nt[0]+4);if(12>De||4294967286<De){Ie=3;break e}if(Ge&&De>Ke[0]-8){Ie=7;break e}Ie[0]=De,nt[0]+=12,Ke[0]-=12}Ie=0}if(Ie!=0)return Ie;for(De=0<Le.gb[0],I=I[0];;){e:{var $e=p;Ke=y,Ie=I;var dt=ve,et=je,Ct=nt=[0];if((Nt=qe=[qe])[0]=0,8>Ie[0])Ie=7;else{if(!n($e,Ke[0],"VP8X")){if(Be($e,Ke[0]+4)!=10){Ie=3;break e}if(18>Ie[0]){Ie=7;break e}var vt=Be($e,Ke[0]+8),Ht=1+Qe($e,Ke[0]+12);if(2147483648<=Ht*($e=1+Qe($e,Ke[0]+15))){Ie=3;break e}Ct!=null&&(Ct[0]=vt),dt!=null&&(dt[0]=Ht),et!=null&&(et[0]=$e),Ke[0]+=18,Ie[0]-=18,Nt[0]=1}Ie=0}}if(qe=qe[0],nt=nt[0],Ie!=0)return Ie;if(Ke=!!(2&nt),!De&&qe)return 3;if(se!=null&&(se[0]=!!(16&nt)),le!=null&&(le[0]=Ke),ce!=null&&(ce[0]=0),le=ve[0],nt=je[0],qe&&Ke&&de==null){Ie=0;break}if(4>I){Ie=7;break}if(De&&qe||!De&&!qe&&!n(p,y[0],"ALPH")){I=[I],Le.na=[Le.na],Le.P=[Le.P],Le.Sa=[Le.Sa];e:{vt=p,Ie=y,De=I;var Nt=Le.gb;dt=Le.na,et=Le.P,Ct=Le.Sa,Ht=22,t(vt!=null),t(De!=null),$e=Ie[0];var On=De[0];for(t(dt!=null),t(Ct!=null),dt[0]=null,et[0]=null,Ct[0]=0;;){if(Ie[0]=$e,De[0]=On,8>On){Ie=7;break e}var zn=Be(vt,$e+4);if(4294967286<zn){Ie=3;break e}var jn=8+zn+1&-2;if(Ht+=jn,0<Nt&&Ht>Nt){Ie=3;break e}if(!n(vt,$e,"VP8 ")||!n(vt,$e,"VP8L")){Ie=0;break e}if(On[0]<jn){Ie=7;break e}n(vt,$e,"ALPH")||(dt[0]=vt,et[0]=$e+8,Ct[0]=zn),$e+=jn,On-=jn}}if(I=I[0],Le.na=Le.na[0],Le.P=Le.P[0],Le.Sa=Le.Sa[0],Ie!=0)break}I=[I],Le.Ja=[Le.Ja],Le.xa=[Le.xa];e:if(Nt=p,Ie=y,De=I,dt=Le.gb[0],et=Le.Ja,Ct=Le.xa,vt=Ie[0],$e=!n(Nt,vt,"VP8 "),Ht=!n(Nt,vt,"VP8L"),t(Nt!=null),t(De!=null),t(et!=null),t(Ct!=null),8>De[0])Ie=7;else{if($e||Ht){if(Nt=Be(Nt,vt+4),12<=dt&&Nt>dt-12){Ie=3;break e}if(Ge&&Nt>De[0]-8){Ie=7;break e}et[0]=Nt,Ie[0]+=8,De[0]-=8,Ct[0]=Ht}else Ct[0]=5<=De[0]&&Nt[vt+0]==47&&!(Nt[vt+4]>>5),et[0]=De[0];Ie=0}if(I=I[0],Le.Ja=Le.Ja[0],Le.xa=Le.xa[0],y=y[0],Ie!=0)break;if(4294967286<Le.Ja)return 3;if(ce==null||Ke||(ce[0]=Le.xa?2:1),le=[le],nt=[nt],Le.xa){if(5>I){Ie=7;break}ce=le,Ge=nt,Ke=se,p==null||5>I?p=0:5<=I&&p[y+0]==47&&!(p[y+4]>>5)?(De=[0],Nt=[0],dt=[0],X(et=new L,p,y,I),Dt(et,De,Nt,dt)?(ce!=null&&(ce[0]=De[0]),Ge!=null&&(Ge[0]=Nt[0]),Ke!=null&&(Ke[0]=dt[0]),p=1):p=0):p=0}else{if(10>I){Ie=7;break}ce=nt,p==null||10>I||!La(p,y+3,I-3)?p=0:(Ge=p[y+0]|p[y+1]<<8|p[y+2]<<16,Ke=16383&(p[y+7]<<8|p[y+6]),p=16383&(p[y+9]<<8|p[y+8]),1&Ge||3<(Ge>>1&7)||!(Ge>>4&1)||Ge>>5>=Le.Ja||!Ke||!p?p=0:(le&&(le[0]=Ke),ce&&(ce[0]=p),p=1))}if(!p||(le=le[0],nt=nt[0],qe&&(ve[0]!=le||je[0]!=nt)))return 3;de!=null&&(de[0]=Le,de.offset=y-de.w,t(4294967286>y-de.w),t(de.offset==de.ha-I));break}return Ie==0||Ie==7&&qe&&de==null?(se!=null&&(se[0]|=Le.na!=null&&0<Le.na.length),U!=null&&(U[0]=le),ne!=null&&(ne[0]=nt),0):Ie}function qs(p,y,I){var U=y.width,ne=y.height,se=0,le=0,ce=U,de=ne;if(y.Da=p!=null&&0<p.Da,y.Da&&(ce=p.cd,de=p.bd,se=p.v,le=p.j,11>I||(se&=-2,le&=-2),0>se||0>le||0>=ce||0>=de||se+ce>U||le+de>ne))return 0;if(y.v=se,y.j=le,y.va=se+ce,y.o=le+de,y.U=ce,y.T=de,y.da=p!=null&&0<p.da,y.da){if(!ot(ce,de,I=[p.ib],se=[p.hb]))return 0;y.ib=I[0],y.hb=se[0]}return y.ob=p!=null&&p.ob,y.Kb=p==null||!p.Sd,y.da&&(y.ob=y.ib<3*U/4&&y.hb<3*ne/4,y.Kb=0),1}function Rl(p){if(p==null)return 2;if(11>p.S){var y=p.f.RGBA;y.fb+=(p.height-1)*y.A,y.A=-y.A}else y=p.f.kb,p=p.height,y.O+=(p-1)*y.fa,y.fa=-y.fa,y.N+=(p-1>>1)*y.Ab,y.Ab=-y.Ab,y.W+=(p-1>>1)*y.Db,y.Db=-y.Db,y.F!=null&&(y.J+=(p-1)*y.lb,y.lb=-y.lb);return 0}function Gs(p,y,I,U){if(U==null||0>=p||0>=y)return 2;if(I!=null){if(I.Da){var ne=I.cd,se=I.bd,le=-2&I.v,ce=-2&I.j;if(0>le||0>ce||0>=ne||0>=se||le+ne>p||ce+se>y)return 2;p=ne,y=se}if(I.da){if(!ot(p,y,ne=[I.ib],se=[I.hb]))return 2;p=ne[0],y=se[0]}}U.width=p,U.height=y;e:{var de=U.width,ve=U.height;if(p=U.S,0>=de||0>=ve||!(p>=Kd&&13>p))p=2;else{if(0>=U.Rd&&U.sd==null){le=se=ne=y=0;var je=(ce=de*up[p])*ve;if(11>p||(se=(ve+1)/2*(y=(de+1)/2),p==12&&(le=(ne=de)*ve)),(ve=l(je+2*se+le))==null){p=1;break e}U.sd=ve,11>p?((de=U.f.RGBA).eb=ve,de.fb=0,de.A=ce,de.size=je):((de=U.f.kb).y=ve,de.O=0,de.fa=ce,de.Fd=je,de.f=ve,de.N=0+je,de.Ab=y,de.Cd=se,de.ea=ve,de.W=0+je+se,de.Db=y,de.Ed=se,p==12&&(de.F=ve,de.J=0+je+2*se),de.Tc=le,de.lb=ne)}if(y=1,ne=U.S,se=U.width,le=U.height,ne>=Kd&&13>ne)if(11>ne)p=U.f.RGBA,y&=(ce=Math.abs(p.A))*(le-1)+se<=p.size,y&=ce>=se*up[ne],y&=p.eb!=null;else{p=U.f.kb,ce=(se+1)/2,je=(le+1)/2,de=Math.abs(p.fa),ve=Math.abs(p.Ab);var qe=Math.abs(p.Db),Ge=Math.abs(p.lb),Le=Ge*(le-1)+se;y&=de*(le-1)+se<=p.Fd,y&=ve*(je-1)+ce<=p.Cd,y=(y&=qe*(je-1)+ce<=p.Ed)&de>=se&ve>=ce&qe>=ce,y&=p.y!=null,y&=p.f!=null,y&=p.ea!=null,ne==12&&(y&=Ge>=se,y&=Le<=p.Tc,y&=p.F!=null)}else y=0;p=y?0:2}}return p!=0||I!=null&&I.fd&&(p=Rl(U)),p}var Zn=64,So=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],vs=24,Fa=32,dn=8,ri=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ct("Predictor0","PredictorAdd0"),R.Predictor0=function(){return 4278190080},R.Predictor1=function(p){return p},R.Predictor2=function(p,y,I){return y[I+0]},R.Predictor3=function(p,y,I){return y[I+1]},R.Predictor4=function(p,y,I){return y[I-1]},R.Predictor5=function(p,y,I){return mt(mt(p,y[I+1]),y[I+0])},R.Predictor6=function(p,y,I){return mt(p,y[I-1])},R.Predictor7=function(p,y,I){return mt(p,y[I+0])},R.Predictor8=function(p,y,I){return mt(y[I-1],y[I+0])},R.Predictor9=function(p,y,I){return mt(y[I+0],y[I+1])},R.Predictor10=function(p,y,I){return mt(mt(p,y[I-1]),mt(y[I+0],y[I+1]))},R.Predictor11=function(p,y,I){var U=y[I+0];return 0>=Oe(U>>24&255,p>>24&255,(y=y[I-1])>>24&255)+Oe(U>>16&255,p>>16&255,y>>16&255)+Oe(U>>8&255,p>>8&255,y>>8&255)+Oe(255&U,255&p,255&y)?U:p},R.Predictor12=function(p,y,I){var U=y[I+0];return(Ue((p>>24&255)+(U>>24&255)-((y=y[I-1])>>24&255))<<24|Ue((p>>16&255)+(U>>16&255)-(y>>16&255))<<16|Ue((p>>8&255)+(U>>8&255)-(y>>8&255))<<8|Ue((255&p)+(255&U)-(255&y)))>>>0},R.Predictor13=function(p,y,I){var U=y[I-1];return(it((p=mt(p,y[I+0]))>>24&255,U>>24&255)<<24|it(p>>16&255,U>>16&255)<<16|it(p>>8&255,U>>8&255)<<8|it(p>>0&255,U>>0&255))>>>0};var $=R.PredictorAdd0;R.PredictorAdd1=Ze,ct("Predictor2","PredictorAdd2"),ct("Predictor3","PredictorAdd3"),ct("Predictor4","PredictorAdd4"),ct("Predictor5","PredictorAdd5"),ct("Predictor6","PredictorAdd6"),ct("Predictor7","PredictorAdd7"),ct("Predictor8","PredictorAdd8"),ct("Predictor9","PredictorAdd9"),ct("Predictor10","PredictorAdd10"),ct("Predictor11","PredictorAdd11"),ct("Predictor12","PredictorAdd12"),ct("Predictor13","PredictorAdd13");var i=R.PredictorAdd2;qt("ColorIndexInverseTransform","MapARGB","32b",function(p){return p>>8&255},function(p){return p}),qt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(p){return p},function(p){return p>>8&255});var s,c=R.ColorIndexInverseTransform,u=R.MapARGB,d=R.VP8LColorIndexInverseTransformAlpha,h=R.MapAlpha,b=R.VP8LPredictorsAdd=[];b.length=16,(R.VP8LPredictors=[]).length=16,(R.VP8LPredictorsAdd_C=[]).length=16,(R.VP8LPredictors_C=[]).length=16;var w,_,H,K,oe,ye,Ae,Ce,Re,Xe,st,ht,ut,cn,Zt,jr,ii,Sr,Nn,pr,Br,qi,Ba,ra,ia,ar,sr,Ur,ai=l(511),Ws=l(2041),Au=l(225),hc=l(767),Zd=0,o0=Ws,Qd=Au,ba=hc,Ua=ai,Kd=0,Jd=1,$g=2,$d=3,ef=4,l0=5,ep=6,c0=7,u0=8,tf=9,d0=10,Wv=[2,3,7],Yv=[3,3,11],tp=[280,256,256,256,40],Xv=[0,1,1,1,0],Zv=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Qv=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Kv=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Jv=8,f0=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],h0=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Su=null,$v=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],e3=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],np=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],t3=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],n3=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],r3=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],i3=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Co=[],ns=[],Ys=[],a3=1,rp=2,Eo=[],za=[];Je("UpsampleRgbLinePair",pn,3),Je("UpsampleBgrLinePair",lr,3),Je("UpsampleRgbaLinePair",xa,4),Je("UpsampleBgraLinePair",gr,4),Je("UpsampleArgbLinePair",hi,4),Je("UpsampleRgba4444LinePair",mr,2),Je("UpsampleRgb565LinePair",Un,2);var s3=R.UpsampleRgbLinePair,o3=R.UpsampleBgrLinePair,ip=R.UpsampleRgbaLinePair,ap=R.UpsampleBgraLinePair,sp=R.UpsampleArgbLinePair,op=R.UpsampleRgba4444LinePair,l3=R.UpsampleRgb565LinePair,nf=16,rf=1<<nf-1,Cu=-227,m0=482,c3=6,lp=0,u3=l(256),d3=l(256),f3=l(256),h3=l(256),m3=l(m0-Cu),g3=l(m0-Cu);Vi("YuvToRgbRow",pn,3),Vi("YuvToBgrRow",lr,3),Vi("YuvToRgbaRow",xa,4),Vi("YuvToBgraRow",gr,4),Vi("YuvToArgbRow",hi,4),Vi("YuvToRgba4444Row",mr,2),Vi("YuvToRgb565Row",Un,2);var cp=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],af=[0,2,8],p3=[8,7,6,4,4,2,2,2,1,1,1,1],x3=1;this.WebPDecodeRGBA=function(p,y,I,U,ne){var se=Jd,le=new vo,ce=new en;le.ba=ce,ce.S=se,ce.width=[ce.width],ce.height=[ce.height];var de=ce.width,ve=ce.height,je=new $r;if(je==null||p==null)var qe=2;else t(je!=null),qe=Ao(p,y,I,je.width,je.height,je.Pd,je.Qd,je.format,null);if(qe!=0?de=0:(de!=null&&(de[0]=je.width[0]),ve!=null&&(ve[0]=je.height[0]),de=1),de){ce.width=ce.width[0],ce.height=ce.height[0],U!=null&&(U[0]=ce.width),ne!=null&&(ne[0]=ce.height);e:{if(U=new Yt,(ne=new Il).data=p,ne.w=y,ne.ha=I,ne.kd=1,y=[0],t(ne!=null),((p=Ao(ne.data,ne.w,ne.ha,null,null,null,y,null,ne))==0||p==7)&&y[0]&&(p=4),(y=p)==0){if(t(le!=null),U.data=ne.data,U.w=ne.w+ne.offset,U.ha=ne.ha-ne.offset,U.put=ei,U.ac=yn,U.bc=vi,U.ma=le,ne.xa){if((p=di())==null){le=1;break e}if(function(Ge,Le){var nt=[0],Ke=[0],Ie=[0];t:for(;;){if(Ge==null)return 0;if(Le==null)return Ge.a=2,0;if(Ge.l=Le,Ge.a=0,X(Ge.m,Le.data,Le.w,Le.ha),!Dt(Ge.m,nt,Ke,Ie)){Ge.a=3;break t}if(Ge.xb=rp,Le.width=nt[0],Le.height=Ke[0],!Tr(nt[0],Ke[0],1,Ge,null))break t;return 1}return t(Ge.a!=0),0}(p,U)){if(U=(y=Gs(U.width,U.height,le.Oa,le.ba))==0){t:{U=p;n:for(;;){if(U==null){U=0;break t}if(t(U.s.yc!=null),t(U.s.Ya!=null),t(0<U.s.Wb),t((I=U.l)!=null),t((ne=I.ma)!=null),U.xb!=0){if(U.ca=ne.ba,U.tb=ne.tb,t(U.ca!=null),!qs(ne.Oa,I,$d)){U.a=2;break n}if(!ms(U,I.width)||I.da)break n;if((I.da||Pt(U.ca.S))&&Fe(),11>U.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),U.ca.f.kb.F!=null&&Fe()),U.Pb&&0<U.s.ua&&U.s.vb.X==null&&!ft(U.s.vb,U.s.Wa.Xa)){U.a=1;break n}U.xb=0}if(!ti(U,U.V,U.Ba,U.c,U.i,I.o,wt))break n;ne.Dc=U.Ma,U=1;break t}t(U.a!=0),U=0}U=!U}U&&(y=p.a)}else y=p.a}else{if((p=new ea)==null){le=1;break e}if(p.Fa=ne.na,p.P=ne.P,p.qc=ne.Sa,ir(p,U)){if((y=Gs(U.width,U.height,le.Oa,le.ba))==0){if(p.Aa=0,I=le.Oa,t((ne=p)!=null),I!=null){if(0<(de=0>(de=I.Md)?0:100<de?255:255*de/100)){for(ve=je=0;4>ve;++ve)12>(qe=ne.pb[ve]).lc&&(qe.ia=de*p3[0>qe.lc?0:qe.lc]>>3),je|=qe.ia;je&&(alert("todo:VP8InitRandom"),ne.ia=1)}ne.Ga=I.Id,100<ne.Ga?ne.Ga=100:0>ne.Ga&&(ne.Ga=0)}Mt(p,U)||(y=p.a)}}else y=p.a}y==0&&le.Oa!=null&&le.Oa.fd&&(y=Rl(le.ba))}le=y}se=le!=0?null:11>se?ce.f.RGBA.eb:ce.f.kb.y}else se=null;return se};var up=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function x(R,M){for(var Z="",F=0;F<4;F++)Z+=String.fromCharCode(R[M++]);return Z}function A(R,M){return(R[M+0]<<0|R[M+1]<<8|R[M+2]<<16)>>>0}function N(R,M){return(R[M+0]<<0|R[M+1]<<8|R[M+2]<<16|R[M+3]<<24)>>>0}new g;var T=[0],v=[0],O=[],D=new g,P=e,C=function(R,M){var Z={},F=0,k=!1,Q=0,J=0;if(Z.frames=[],!function(q,ee,fe,ae){for(var Ee=0;Ee<ae;Ee++)if(q[ee+Ee]!=fe.charCodeAt(Ee))return!0;return!1}(R,M,"RIFF",4)){var G,Y;for(N(R,M+=4),M+=8;M<R.length;){var z=x(R,M),X=N(R,M+=4);M+=4;var te=X+(1&X);switch(z){case"VP8 ":case"VP8L":Z.frames[F]===void 0&&(Z.frames[F]={}),(L=Z.frames[F]).src_off=k?J:M-8,L.src_size=Q+X+8,F++,k&&(k=!1,Q=0,J=0);break;case"VP8X":(L=Z.header={}).feature_flags=R[M];var ge=M+4;L.canvas_width=1+A(R,ge),ge+=3,L.canvas_height=1+A(R,ge),ge+=3;break;case"ALPH":k=!0,Q=te+8,J=M-8;break;case"ANIM":(L=Z.header).bgcolor=N(R,M),ge=M+4,L.loop_count=(G=R)[(Y=ge)+0]<<0|G[Y+1]<<8,ge+=2;break;case"ANMF":var ue,L;(L=Z.frames[F]={}).offset_x=2*A(R,M),M+=3,L.offset_y=2*A(R,M),M+=3,L.width=1+A(R,M),M+=3,L.height=1+A(R,M),M+=3,L.duration=A(R,M),M+=3,ue=R[M++],L.dispose=1&ue,L.blend=ue>>1&1}z!="ANMF"&&(M+=te)}return Z}}(P,0);C.response=P,C.rgbaoutput=!0,C.dataurl=!1;var E=C.header?C.header:null,j=C.frames?C.frames:null;if(E){E.loop_counter=E.loop_count,T=[E.canvas_height],v=[E.canvas_width];for(var V=0;V<j.length&&j[V].blend!=0;V++);}var W=j[0],ie=D.WebPDecodeRGBA(P,W.src_off,W.src_size,v,T);W.rgba=ie,W.imgwidth=v[0],W.imgheight=T[0];for(var B=0;B<v[0]*T[0]*4;B++)O[B]=ie[B];return this.width=v,this.height=T,this.data=O,this}(function(e){var t=function(){return typeof jm=="function"},n=function(T,v,O,D){var P=4,C=f;switch(D){case e.image_compression.FAST:P=1,C=l;break;case e.image_compression.MEDIUM:P=6,C=m;break;case e.image_compression.SLOW:P=9,C=g}T=r(T,v,O,C);var E=jm(T,{level:P});return e.__addimage__.arrayBufferToBinaryString(E)},r=function(T,v,O,D){for(var P,C,E,j=T.length/v,V=new Uint8Array(T.length+j),W=A(),ie=0;ie<j;ie+=1){if(E=ie*v,P=T.subarray(E,E+v),D)V.set(D(P,O,C),E+ie);else{for(var B,R=W.length,M=[];B<R;B+=1)M[B]=W[B](P,O,C);var Z=N(M.concat());V.set(M[Z],E+ie)}C=P}return V},o=function(T){var v=Array.apply([],T);return v.unshift(0),v},l=function(T,v){var O,D=[],P=T.length;D[0]=1;for(var C=0;C<P;C+=1)O=T[C-v]||0,D[C+1]=T[C]-O+256&255;return D},f=function(T,v,O){var D,P=[],C=T.length;P[0]=2;for(var E=0;E<C;E+=1)D=O&&O[E]||0,P[E+1]=T[E]-D+256&255;return P},m=function(T,v,O){var D,P,C=[],E=T.length;C[0]=3;for(var j=0;j<E;j+=1)D=T[j-v]||0,P=O&&O[j]||0,C[j+1]=T[j]+256-(D+P>>>1)&255;return C},g=function(T,v,O){var D,P,C,E,j=[],V=T.length;j[0]=4;for(var W=0;W<V;W+=1)D=T[W-v]||0,P=O&&O[W]||0,C=O&&O[W-v]||0,E=x(D,P,C),j[W+1]=T[W]-E+256&255;return j},x=function(T,v,O){if(T===v&&v===O)return T;var D=Math.abs(v-O),P=Math.abs(T-O),C=Math.abs(T+v-O-O);return D<=P&&D<=C?T:P<=C?v:O},A=function(){return[o,l,f,m,g]},N=function(T){var v=T.map(function(O){return O.reduce(function(D,P){return D+Math.abs(P)},0)});return v.indexOf(Math.min.apply(null,v))};e.processPNG=function(T,v,O,D){var P,C,E,j,V,W,ie,B,R,M,Z,F,k,Q,J,G=this.decode.FLATE_DECODE,Y="";if(this.__addimage__.isArrayBuffer(T)&&(T=new Uint8Array(T)),this.__addimage__.isArrayBufferView(T)){if(T=(E=new EA(T)).imgData,C=E.bits,P=E.colorSpace,V=E.colors,[4,6].indexOf(E.colorType)!==-1){if(E.bits===8){R=(B=E.pixelBitlength==32?new Uint32Array(E.decodePixels().buffer):E.pixelBitlength==16?new Uint16Array(E.decodePixels().buffer):new Uint8Array(E.decodePixels().buffer)).length,Z=new Uint8Array(R*E.colors),M=new Uint8Array(R);var z,X=E.pixelBitlength-E.bits;for(Q=0,J=0;Q<R;Q++){for(k=B[Q],z=0;z<X;)Z[J++]=k>>>z&255,z+=E.bits;M[Q]=k>>>z&255}}if(E.bits===16){R=(B=new Uint32Array(E.decodePixels().buffer)).length,Z=new Uint8Array(R*(32/E.pixelBitlength)*E.colors),M=new Uint8Array(R*(32/E.pixelBitlength)),F=E.colors>1,Q=0,J=0;for(var te=0;Q<R;)k=B[Q++],Z[J++]=k>>>0&255,F&&(Z[J++]=k>>>16&255,k=B[Q++],Z[J++]=k>>>0&255),M[te++]=k>>>16&255;C=8}D!==e.image_compression.NONE&&t()?(T=n(Z,E.width*E.colors,E.colors,D),ie=n(M,E.width,1,D)):(T=Z,ie=M,G=void 0)}if(E.colorType===3&&(P=this.color_spaces.INDEXED,W=E.palette,E.transparency.indexed)){var ge=E.transparency.indexed,ue=0;for(Q=0,R=ge.length;Q<R;++Q)ue+=ge[Q];if((ue/=255)===R-1&&ge.indexOf(0)!==-1)j=[ge.indexOf(0)];else if(ue!==R){for(B=E.decodePixels(),M=new Uint8Array(B.length),Q=0,R=B.length;Q<R;Q++)M[Q]=ge[B[Q]];ie=n(M,E.width,1)}}var L=function(q){var ee;switch(q){case e.image_compression.FAST:ee=11;break;case e.image_compression.MEDIUM:ee=13;break;case e.image_compression.SLOW:ee=14;break;default:ee=12}return ee}(D);return G===this.decode.FLATE_DECODE&&(Y="/Predictor "+L+" "),Y+="/Colors "+V+" /BitsPerComponent "+C+" /Columns "+E.width,(this.__addimage__.isArrayBuffer(T)||this.__addimage__.isArrayBufferView(T))&&(T=this.__addimage__.arrayBufferToBinaryString(T)),(ie&&this.__addimage__.isArrayBuffer(ie)||this.__addimage__.isArrayBufferView(ie))&&(ie=this.__addimage__.arrayBufferToBinaryString(ie)),{alias:O,data:T,index:v,filter:G,decodeParameters:Y,transparency:j,palette:W,sMask:ie,predictor:L,width:E.width,height:E.height,bitsPerComponent:C,colorSpace:P}}}})(Vt.API),function(e){e.processGIF89A=function(t,n,r,o){var l=new TA(t),f=l.width,m=l.height,g=[];l.decodeAndBlitFrameRGBA(0,g);var x={data:g,width:f,height:m},A=new p1(100).encode(x,100);return e.processJPEG.call(this,A,n,r,o)},e.processGIF87A=e.processGIF89A}(Vt.API),as.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:o,green:r,blue:n,quad:l}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},as.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(n){nr.log("bit decode error:"+n)}},as.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,o=0;o<t;o++)for(var l=this.datav.getUint8(this.pos++,!0),f=r*this.width*4+8*o*4,m=0;m<8&&8*o+m<this.width;m++){var g=this.palette[l>>7-m&1];this.data[f+4*m]=g.blue,this.data[f+4*m+1]=g.green,this.data[f+4*m+2]=g.red,this.data[f+4*m+3]=255}n!==0&&(this.pos+=4-n)}},as.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,o=0;o<e;o++){var l=this.datav.getUint8(this.pos++,!0),f=r*this.width*4+2*o*4,m=l>>4,g=15&l,x=this.palette[m];if(this.data[f]=x.blue,this.data[f+1]=x.green,this.data[f+2]=x.red,this.data[f+3]=255,2*o+1>=this.width)break;x=this.palette[g],this.data[f+4]=x.blue,this.data[f+4+1]=x.green,this.data[f+4+2]=x.red,this.data[f+4+3]=255}t!==0&&(this.pos+=4-t)}},as.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var o=this.datav.getUint8(this.pos++,!0),l=n*this.width*4+4*r;if(o<this.palette.length){var f=this.palette[o];this.data[l]=f.red,this.data[l+1]=f.green,this.data[l+2]=f.blue,this.data[l+3]=255}else this.data[l]=255,this.data[l+1]=255,this.data[l+2]=255,this.data[l+3]=255}e!==0&&(this.pos+=4-e)}},as.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,o=0;o<this.width;o++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var f=(l&t)/t*255|0,m=(l>>5&t)/t*255|0,g=(l>>10&t)/t*255|0,x=l>>15?255:0,A=r*this.width*4+4*o;this.data[A]=g,this.data[A+1]=m,this.data[A+2]=f,this.data[A+3]=x}this.pos+=e}},as.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var o=this.bottom_up?r:this.height-1-r,l=0;l<this.width;l++){var f=this.datav.getUint16(this.pos,!0);this.pos+=2;var m=(f&t)/t*255|0,g=(f>>5&n)/n*255|0,x=(f>>11)/t*255|0,A=o*this.width*4+4*l;this.data[A]=x,this.data[A+1]=g,this.data[A+2]=m,this.data[A+3]=255}this.pos+=e}},as.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),f=t*this.width*4+4*n;this.data[f]=l,this.data[f+1]=o,this.data[f+2]=r,this.data[f+3]=255}this.pos+=this.width%4}},as.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),f=this.datav.getUint8(this.pos++,!0),m=t*this.width*4+4*n;this.data[m]=l,this.data[m+1]=o,this.data[m+2]=r,this.data[m+3]=f}},as.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,r,o){var l=new as(t,!1),f=l.width,m=l.height,g={data:l.getData(),width:f,height:m},x=new p1(100).encode(g,100);return e.processJPEG.call(this,x,n,r,o)}}(Vt.API),Tx.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,r,o){var l=new Tx(t),f=l.width,m=l.height,g={data:l.getData(),width:f,height:m},x=new p1(100).encode(g,100);return e.processJPEG.call(this,x,n,r,o)}}(Vt.API),Vt.API.processRGBA=function(e,t,n){for(var r=e.data,o=r.length,l=new Uint8Array(o/4*3),f=new Uint8Array(o/4),m=0,g=0,x=0;x<o;x+=4){var A=r[x],N=r[x+1],T=r[x+2],v=r[x+3];l[m++]=A,l[m++]=N,l[m++]=T,f[g++]=v}var O=this.__addimage__.arrayBufferToBinaryString(l);return{alpha:this.__addimage__.arrayBufferToBinaryString(f),data:O,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Vt.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Nc=Vt.API,kf=Nc.getCharWidthsArray=function(e,t){var n,r,o=(t=t||{}).font||this.internal.getFont(),l=t.fontSize||this.internal.getFontSize(),f=t.charSpace||this.internal.getCharSpace(),m=t.widths?t.widths:o.metadata.Unicode.widths,g=m.fof?m.fof:1,x=t.kerning?t.kerning:o.metadata.Unicode.kerning,A=x.fof?x.fof:1,N=t.doKerning!==!1,T=0,v=e.length,O=0,D=m[0]||g,P=[];for(n=0;n<v;n++)r=e.charCodeAt(n),typeof o.metadata.widthOfString=="function"?P.push((o.metadata.widthOfGlyph(o.metadata.characterToGlyph(r))+f*(1e3/l)||0)/1e3):(T=N&&Wn(x[r])==="object"&&!isNaN(parseInt(x[r][O],10))?x[r][O]/A:0,P.push((m[r]||D)/g+T)),O=r;return P},Ax=Nc.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),o=t.charSpace||this.internal.getCharSpace();return Nc.processArabic&&(e=Nc.processArabic(e)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(e,n,o)/n:kf.apply(this,arguments).reduce(function(l,f){return l+f},0)},Sx=function(e,t,n,r){for(var o=[],l=0,f=e.length,m=0;l!==f&&m+t[l]<n;)m+=t[l],l++;o.push(e.slice(0,l));var g=l;for(m=0;l!==f;)m+t[l]>r&&(o.push(e.slice(g,l)),m=0,g=l),m+=t[l],l++;return g!==l&&o.push(e.slice(g,l)),o},Cx=function(e,t,n){n||(n={});var r,o,l,f,m,g,x,A=[],N=[A],T=n.textIndent||0,v=0,O=0,D=e.split(" "),P=kf.apply(this,[" ",n])[0];if(g=n.lineIndent===-1?D[0].length+2:n.lineIndent||0){var C=Array(g).join(" "),E=[];D.map(function(V){(V=V.split(/\s*\n/)).length>1?E=E.concat(V.map(function(W,ie){return(ie&&W.length?`
`:"")+W})):E.push(V[0])}),D=E,g=Ax.apply(this,[C,n])}for(l=0,f=D.length;l<f;l++){var j=0;if(r=D[l],g&&r[0]==`
`&&(r=r.substr(1),j=1),T+v+(O=(o=kf.apply(this,[r,n])).reduce(function(V,W){return V+W},0))>t||j){if(O>t){for(m=Sx.apply(this,[r,o,t-(T+v),t]),A.push(m.shift()),A=[m.pop()];m.length;)N.push([m.shift()]);O=o.slice(r.length-(A[0]?A[0].length:0)).reduce(function(V,W){return V+W},0)}else A=[r];N.push(A),T=O+g,v=P}else A.push(r),T+=v+O,v=P}return x=g?function(V,W){return(W?C:"")+V.join(" ")}:function(V){return V.join(" ")},N.map(x)},Nc.splitTextToSize=function(e,t,n){var r,o=(n=n||{}).fontSize||this.internal.getFontSize(),l=(function(A){if(A.widths&&A.kerning)return{widths:A.widths,kerning:A.kerning};var N=this.internal.getFont(A.fontName,A.fontStyle);return N.metadata.Unicode?{widths:N.metadata.Unicode.widths||{0:1},kerning:N.metadata.Unicode.kerning||{}}:{font:N.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(e)?e:String(e).split(/\r?\n/);var f=1*this.internal.scaleFactor*t/o;l.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/o:0,l.lineIndent=n.lineIndent;var m,g,x=[];for(m=0,g=r.length;m<g;m++)x=x.concat(Cx.apply(this,[r[m],f,l]));return x},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",n={},r={},o=0;o<t.length;o++)n[t[o]]="0123456789abcdef"[o],r["0123456789abcdef"[o]]=t[o];var l=function(N){return"0x"+parseInt(N,10).toString(16)},f=e.__fontmetrics__.compress=function(N){var T,v,O,D,P=["{"];for(var C in N){if(T=N[C],isNaN(parseInt(C,10))?v="'"+C+"'":(C=parseInt(C,10),v=(v=l(C).slice(2)).slice(0,-1)+r[v.slice(-1)]),typeof T=="number")T<0?(O=l(T).slice(3),D="-"):(O=l(T).slice(2),D=""),O=D+O.slice(0,-1)+r[O.slice(-1)];else{if(Wn(T)!=="object")throw new Error("Don't know what to do with value type "+Wn(T)+".");O=f(T)}P.push(v+O)}return P.push("}"),P.join("")},m=e.__fontmetrics__.uncompress=function(N){if(typeof N!="string")throw new Error("Invalid argument passed to uncompress.");for(var T,v,O,D,P={},C=1,E=P,j=[],V="",W="",ie=N.length-1,B=1;B<ie;B+=1)(D=N[B])=="'"?T?(O=T.join(""),T=void 0):T=[]:T?T.push(D):D=="{"?(j.push([E,O]),E={},O=void 0):D=="}"?((v=j.pop())[0][v[1]]=E,O=void 0,E=v[0]):D=="-"?C=-1:O===void 0?n.hasOwnProperty(D)?(V+=n[D],O=parseInt(V,16)*C,C=1,V=""):V+=D:n.hasOwnProperty(D)?(W+=n[D],E[O]=parseInt(W,16)*C,C=1,O=void 0,W=""):W+=D;return P},g={codePages:["WinAnsiEncoding"],WinAnsiEncoding:m("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},x={Unicode:{Courier:g,"Courier-Bold":g,"Courier-BoldOblique":g,"Courier-Oblique":g,Helvetica:g,"Helvetica-Bold":g,"Helvetica-BoldOblique":g,"Helvetica-Oblique":g,"Times-Roman":g,"Times-Bold":g,"Times-BoldItalic":g,"Times-Italic":g}},A={Unicode:{"Courier-Oblique":m("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":m("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":m("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:m("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":m("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":m("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:m("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:m("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":m("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:m("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":m("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":m("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":m("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":m("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(N){var T=N.font,v=A.Unicode[T.postScriptName];v&&(T.metadata.Unicode={},T.metadata.Unicode.widths=v.widths,T.metadata.Unicode.kerning=v.kerning);var O=x.Unicode[T.postScriptName];O&&(T.metadata.Unicode.encoding=O,T.encoding=O.codePages[0])}])}(Vt.API),function(e){var t=function(n){for(var r=n.length,o=new Uint8Array(r),l=0;l<r;l++)o[l]=n.charCodeAt(l);return o};e.API.events.push(["addFont",function(n){var r=void 0,o=n.font,l=n.instance;if(!o.isStandardFont){if(l===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");if(typeof(r=l.existsFileInVFS(o.postScriptName)===!1?l.loadFile(o.postScriptName):l.getFileFromVFS(o.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");(function(f,m){m=/^\x00\x01\x00\x00/.test(m)?t(m):t(od(m)),f.metadata=e.API.TTFFont.open(m),f.metadata.Unicode=f.metadata.Unicode||{encoding:{},kerning:{},widths:[]},f.metadata.glyIdsUsed=[0]})(o,r)}}])}(Vt),function(e){function t(){return(Xt.canvg?Promise.resolve(Xt.canvg):Sm(()=>import("./index.es-dw0SmoV_-1756437903414.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}Vt.API.addSvgAsImage=function(n,r,o,l,f,m,g,x){if(isNaN(r)||isNaN(o))throw nr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(l)||isNaN(f))throw nr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var A=document.createElement("canvas");A.width=l,A.height=f;var N=A.getContext("2d");N.fillStyle="#fff",N.fillRect(0,0,A.width,A.height);var T={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},v=this;return t().then(function(O){return O.fromString(N,n,T)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(O){return O.render(T)}).then(function(){v.addImage(A.toDataURL("image/jpeg",1),r,o,l,f,g,x)})}}(),Vt.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var o=0;o<this.internal.pages[r].length;o++)this.internal.pages[r][o]=this.internal.pages[r][o].replace(t,n);return this},Vt.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var r,o,l,f={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},m=Object.keys(f),g=[],x=0,A=0,N=0;function T(O,D){var P,C=!1;for(P=0;P<O.length;P+=1)O[P]===D&&(C=!0);return C}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(f)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var v=m.length;for(N=0;N<v;N+=1)n[m[N]].value=n[m[N]].defaultValue,n[m[N]].explicitSet=!1}if(Wn(e)==="object"){for(o in e)if(l=e[o],T(m,o)&&l!==void 0){if(n[o].type==="boolean"&&typeof l=="boolean")n[o].value=l;else if(n[o].type==="name"&&T(n[o].valueSet,l))n[o].value=l;else if(n[o].type==="integer"&&Number.isInteger(l))n[o].value=l;else if(n[o].type==="array"){for(x=0;x<l.length;x+=1)if(r=!0,l[x].length===1&&typeof l[x][0]=="number")g.push(String(l[x]-1));else if(l[x].length>1){for(A=0;A<l[x].length;A+=1)typeof l[x][A]!="number"&&(r=!1);r===!0&&g.push([l[x][0]-1,l[x][1]-1].join(" "))}n[o].value="["+g.join(" ")+"]"}else n[o].value=n[o].defaultValue;n[o].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var O,D=[];for(O in n)n[O].explicitSet===!0&&(n[O].type==="name"?D.push("/"+O+" /"+n[O].value):D.push("/"+O+" "+n[O].value));D.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+D.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',o=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),l=unescape(encodeURIComponent(r)),f=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),m=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),g=unescape(encodeURIComponent("</x:xmpmeta>")),x=l.length+f.length+m.length+o.length+g.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+x+" >>"),this.internal.write("stream"),this.internal.write(o+l+f+m+g),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(r,o){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:o||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(Vt.API),function(e){var t=e.API,n=t.pdfEscape16=function(l,f){for(var m,g=f.metadata.Unicode.widths,x=["","0","00","000","0000"],A=[""],N=0,T=l.length;N<T;++N){if(m=f.metadata.characterToGlyph(l.charCodeAt(N)),f.metadata.glyIdsUsed.push(m),f.metadata.toUnicode[m]=l.charCodeAt(N),g.indexOf(m)==-1&&(g.push(m),g.push([parseInt(f.metadata.widthOfGlyph(m),10)])),m=="0")return A.join("");m=m.toString(16),A.push(x[4-m.length],m)}return A.join("")},r=function(l){var f,m,g,x,A,N,T;for(A=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,g=[],N=0,T=(m=Object.keys(l).sort(function(v,O){return v-O})).length;N<T;N++)f=m[N],g.length>=100&&(A+=`
`+g.length+` beginbfchar
`+g.join(`
`)+`
endbfchar`,g=[]),l[f]!==void 0&&l[f]!==null&&typeof l[f].toString=="function"&&(x=("0000"+l[f].toString(16)).slice(-4),f=("0000"+(+f).toString(16)).slice(-4),g.push("<"+f+"><"+x+">"));return g.length&&(A+=`
`+g.length+` beginbfchar
`+g.join(`
`)+`
endbfchar
`),A+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(l){(function(f){var m=f.font,g=f.out,x=f.newObject,A=f.putStream;if(m.metadata instanceof e.API.TTFFont&&m.encoding==="Identity-H"){for(var N=m.metadata.Unicode.widths,T=m.metadata.subset.encode(m.metadata.glyIdsUsed,1),v="",O=0;O<T.length;O++)v+=String.fromCharCode(T[O]);var D=x();A({data:v,addLength1:!0,objectId:D}),g("endobj");var P=x();A({data:r(m.metadata.toUnicode),addLength1:!0,objectId:P}),g("endobj");var C=x();g("<<"),g("/Type /FontDescriptor"),g("/FontName /"+jc(m.fontName)),g("/FontFile2 "+D+" 0 R"),g("/FontBBox "+e.API.PDFObject.convert(m.metadata.bbox)),g("/Flags "+m.metadata.flags),g("/StemV "+m.metadata.stemV),g("/ItalicAngle "+m.metadata.italicAngle),g("/Ascent "+m.metadata.ascender),g("/Descent "+m.metadata.decender),g("/CapHeight "+m.metadata.capHeight),g(">>"),g("endobj");var E=x();g("<<"),g("/Type /Font"),g("/BaseFont /"+jc(m.fontName)),g("/FontDescriptor "+C+" 0 R"),g("/W "+e.API.PDFObject.convert(N)),g("/CIDToGIDMap /Identity"),g("/DW 1000"),g("/Subtype /CIDFontType2"),g("/CIDSystemInfo"),g("<<"),g("/Supplement 0"),g("/Registry (Adobe)"),g("/Ordering ("+m.encoding+")"),g(">>"),g(">>"),g("endobj"),m.objectNumber=x(),g("<<"),g("/Type /Font"),g("/Subtype /Type0"),g("/ToUnicode "+P+" 0 R"),g("/BaseFont /"+jc(m.fontName)),g("/Encoding /"+m.encoding),g("/DescendantFonts ["+E+" 0 R]"),g(">>"),g("endobj"),m.isAlreadyPutted=!0}})(l)}]),t.events.push(["putFont",function(l){(function(f){var m=f.font,g=f.out,x=f.newObject,A=f.putStream;if(m.metadata instanceof e.API.TTFFont&&m.encoding==="WinAnsiEncoding"){for(var N=m.metadata.rawData,T="",v=0;v<N.length;v++)T+=String.fromCharCode(N[v]);var O=x();A({data:T,addLength1:!0,objectId:O}),g("endobj");var D=x();A({data:r(m.metadata.toUnicode),addLength1:!0,objectId:D}),g("endobj");var P=x();g("<<"),g("/Descent "+m.metadata.decender),g("/CapHeight "+m.metadata.capHeight),g("/StemV "+m.metadata.stemV),g("/Type /FontDescriptor"),g("/FontFile2 "+O+" 0 R"),g("/Flags 96"),g("/FontBBox "+e.API.PDFObject.convert(m.metadata.bbox)),g("/FontName /"+jc(m.fontName)),g("/ItalicAngle "+m.metadata.italicAngle),g("/Ascent "+m.metadata.ascender),g(">>"),g("endobj"),m.objectNumber=x();for(var C=0;C<m.metadata.hmtx.widths.length;C++)m.metadata.hmtx.widths[C]=parseInt(m.metadata.hmtx.widths[C]*(1e3/m.metadata.head.unitsPerEm));g("<</Subtype/TrueType/Type/Font/ToUnicode "+D+" 0 R/BaseFont/"+jc(m.fontName)+"/FontDescriptor "+P+" 0 R/Encoding/"+m.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(m.metadata.hmtx.widths)+">>"),g("endobj"),m.isAlreadyPutted=!0}})(l)}]);var o=function(l){var f,m=l.text||"",g=l.x,x=l.y,A=l.options||{},N=l.mutex||{},T=N.pdfEscape,v=N.activeFontKey,O=N.fonts,D=v,P="",C=0,E="",j=O[D].encoding;if(O[D].encoding!=="Identity-H")return{text:m,x:g,y:x,options:A,mutex:N};for(E=m,D=v,Array.isArray(m)&&(E=m[0]),C=0;C<E.length;C+=1)O[D].metadata.hasOwnProperty("cmap")&&(f=O[D].metadata.cmap.unicode.codeMap[E[C].charCodeAt(0)]),f||E[C].charCodeAt(0)<256&&O[D].metadata.hasOwnProperty("Unicode")?P+=E[C]:P+="";var V="";return parseInt(D.slice(1))<14||j==="WinAnsiEncoding"?V=T(P,D).split("").map(function(W){return W.charCodeAt(0).toString(16)}).join(""):j==="Identity-H"&&(V=n(P,O[D])),N.isHex=!0,{text:V,x:g,y:x,options:A,mutex:N}};t.events.push(["postProcessText",function(l){var f=l.text||"",m=[],g={text:f,x:l.x,y:l.y,options:l.options,mutex:l.mutex};if(Array.isArray(f)){var x=0;for(x=0;x<f.length;x+=1)Array.isArray(f[x])&&f[x].length===3?m.push([o(Object.assign({},g,{text:f[x][0]})).text,f[x][1],f[x][2]]):m.push(o(Object.assign({},g,{text:f[x]})).text);l.text=m}else l.text=o(Object.assign({},g,{text:f})).text}])}(Vt),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0},e.addFileToVFS=function(n,r){return t.call(this),this.internal.vFS[n]=r,this},e.getFileFromVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(Vt.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(r){var o,l,f,m,g,x,A,N=t,T=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],v=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],O={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},D={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},P=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],C=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),E=!1,j=0;this.__bidiEngine__={};var V=function(F){var k=F.charCodeAt(),Q=k>>8,J=D[Q];return J!==void 0?N[256*J+(255&k)]:Q===252||Q===253?"AL":C.test(Q)?"L":Q===8?"R":"N"},W=function(F){for(var k,Q=0;Q<F.length;Q++){if((k=V(F.charAt(Q)))==="L")return!1;if(k==="R")return!0}return!1},ie=function(F,k,Q,J){var G,Y,z,X,te=k[J];switch(te){case"L":case"R":E=!1;break;case"N":case"AN":break;case"EN":E&&(te="AN");break;case"AL":E=!0,te="R";break;case"WS":te="N";break;case"CS":J<1||J+1>=k.length||(G=Q[J-1])!=="EN"&&G!=="AN"||(Y=k[J+1])!=="EN"&&Y!=="AN"?te="N":E&&(Y="AN"),te=Y===G?Y:"N";break;case"ES":te=(G=J>0?Q[J-1]:"B")==="EN"&&J+1<k.length&&k[J+1]==="EN"?"EN":"N";break;case"ET":if(J>0&&Q[J-1]==="EN"){te="EN";break}if(E){te="N";break}for(z=J+1,X=k.length;z<X&&k[z]==="ET";)z++;te=z<X&&k[z]==="EN"?"EN":"N";break;case"NSM":if(f&&!m){for(X=k.length,z=J+1;z<X&&k[z]==="NSM";)z++;if(z<X){var ge=F[J],ue=ge>=1425&&ge<=2303||ge===64286;if(G=k[z],ue&&(G==="R"||G==="AL")){te="R";break}}}te=J<1||(G=k[J-1])==="B"?"N":Q[J-1];break;case"B":E=!1,o=!0,te=j;break;case"S":l=!0,te="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":E=!1;break;case"BN":te="N"}return te},B=function(F,k,Q){var J=F.split("");return Q&&R(J,Q,{hiLevel:j}),J.reverse(),k&&k.reverse(),J.join("")},R=function(F,k,Q){var J,G,Y,z,X,te=-1,ge=F.length,ue=0,L=[],q=j?v:T,ee=[];for(E=!1,o=!1,l=!1,G=0;G<ge;G++)ee[G]=V(F[G]);for(Y=0;Y<ge;Y++){if(X=ue,L[Y]=ie(F,ee,L,Y),J=240&(ue=q[X][O[L[Y]]]),ue&=15,k[Y]=z=q[ue][5],J>0)if(J===16){for(G=te;G<Y;G++)k[G]=1;te=-1}else te=-1;if(q[ue][6])te===-1&&(te=Y);else if(te>-1){for(G=te;G<Y;G++)k[G]=z;te=-1}ee[Y]==="B"&&(k[Y]=0),Q.hiLevel|=z}l&&function(fe,ae,Ee){for(var we=0;we<Ee;we++)if(fe[we]==="S"){ae[we]=j;for(var xe=we-1;xe>=0&&fe[xe]==="WS";xe--)ae[xe]=j}}(ee,k,ge)},M=function(F,k,Q,J,G){if(!(G.hiLevel<F)){if(F===1&&j===1&&!o)return k.reverse(),void(Q&&Q.reverse());for(var Y,z,X,te,ge=k.length,ue=0;ue<ge;){if(J[ue]>=F){for(X=ue+1;X<ge&&J[X]>=F;)X++;for(te=ue,z=X-1;te<z;te++,z--)Y=k[te],k[te]=k[z],k[z]=Y,Q&&(Y=Q[te],Q[te]=Q[z],Q[z]=Y);ue=X}ue++}}},Z=function(F,k,Q){var J=F.split(""),G={hiLevel:j};return Q||(Q=[]),R(J,Q,G),function(Y,z,X){if(X.hiLevel!==0&&A)for(var te,ge=0;ge<Y.length;ge++)z[ge]===1&&(te=P.indexOf(Y[ge]))>=0&&(Y[ge]=P[te+1])}(J,Q,G),M(2,J,k,Q,G),M(1,J,k,Q,G),J.join("")};return this.__bidiEngine__.doBidiReorder=function(F,k,Q){if(function(G,Y){if(Y)for(var z=0;z<G.length;z++)Y[z]=z;m===void 0&&(m=W(G)),x===void 0&&(x=W(G))}(F,k),f||!g||x)if(f&&g&&m^x)j=m?1:0,F=B(F,k,Q);else if(!f&&g&&x)j=m?1:0,F=Z(F,k,Q),F=B(F,k);else if(!f||m||g||x){if(f&&!g&&m^x)F=B(F,k),m?(j=0,F=Z(F,k,Q)):(j=1,F=Z(F,k,Q),F=B(F,k));else if(f&&m&&!g&&x)j=1,F=Z(F,k,Q),F=B(F,k);else if(!f&&!g&&m^x){var J=A;m?(j=1,F=Z(F,k,Q),j=0,A=!1,F=Z(F,k,Q),A=J):(j=0,F=Z(F,k,Q),F=B(F,k),j=1,A=!1,F=Z(F,k,Q),A=J,F=B(F,k))}}else j=0,F=Z(F,k,Q);else j=m?1:0,F=Z(F,k,Q);return F},this.__bidiEngine__.setOptions=function(F){F&&(f=F.isInputVisual,g=F.isOutputVisual,m=F.isInputRtl,x=F.isOutputRtl,A=F.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(r){var o=r.text,l=(r.x,r.y,r.options||{}),f=(r.mutex,l.lang,[]);if(l.isInputVisual=typeof l.isInputVisual!="boolean"||l.isInputVisual,n.setOptions(l),Object.prototype.toString.call(o)==="[object Array]"){var m=0;for(f=[],m=0;m<o.length;m+=1)Object.prototype.toString.call(o[m])==="[object Array]"?f.push([n.doBidiReorder(o[m][0]),o[m][1],o[m][2]]):f.push([n.doBidiReorder(o[m])]);r.text=f}else r.text=n.doBidiReorder(o);n.setOptions({isInputVisual:!0})}])}(Vt),Vt.API.TTFFont=function(){function e(t){var n;if(this.rawData=t,n=this.contents=new ml(t),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new HA(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new _A(this.contents),this.head=new IA(this),this.name=new MA(this),this.cmap=new Rv(this),this.toUnicode={},this.hhea=new DA(this),this.maxp=new kA(this),this.hmtx=new PA(this),this.post=new OA(this),this.os2=new RA(this),this.loca=new zA(this),this.glyf=new FA(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,n,r,o,l;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var f,m,g,x;for(x=[],f=0,m=(g=this.bbox).length;f<m;f++)t=g[f],x.push(Math.round(t*this.scaleFactor));return x}).call(this),this.stemV=0,this.post.exists?(r=255&(o=this.post.italic_angle),32768&(n=o>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(l=this.familyClass)===1||l===2||l===3||l===4||l===5||l===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var n;return((n=this.cmap.unicode)!=null?n.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*n},e.prototype.widthOfString=function(t,n,r){var o,l,f,m;for(f=0,l=0,m=(t=""+t).length;0<=m?l<m:l>m;l=0<=m?++l:--l)o=t.charCodeAt(l),f+=this.widthOfGlyph(this.characterToGlyph(o))+r*(1e3/n)||0;return f*(n/1e3)},e.prototype.lineHeight=function(t,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*t},e}();var hs,ml=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var n,r;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},e.prototype.writeString=function(t){var n,r,o;for(o=[],n=0,r=t.length;0<=r?n<r:n>r;n=0<=r?++n:--n)o.push(this.writeByte(t.charCodeAt(n)));return o},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,n,r,o,l,f,m,g;return t=this.readByte(),n=this.readByte(),r=this.readByte(),o=this.readByte(),l=this.readByte(),f=this.readByte(),m=this.readByte(),g=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^o)+16777216*(255^l)+65536*(255^f)+256*(255^m)+(255^g)+1):72057594037927940*t+281474976710656*n+1099511627776*r+4294967296*o+16777216*l+65536*f+256*m+g},e.prototype.writeLongLong=function(t){var n,r;return n=Math.floor(t/4294967296),r=4294967295&t,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var n,r;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n.push(this.readByte());return n},e.prototype.write=function(t){var n,r,o,l;for(l=[],r=0,o=t.length;r<o;r++)n=t[r],l.push(this.writeByte(n));return l},e}(),_A=function(){var e;function t(n){var r,o,l;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},o=0,l=this.tableCount;0<=l?o<l:o>l;o=0<=l?++o:--o)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return t.prototype.encode=function(n){var r,o,l,f,m,g,x,A,N,T,v,O,D;for(D in v=Object.keys(n).length,g=Math.log(2),N=16*Math.floor(Math.log(v)/g),f=Math.floor(N/g),A=16*v-N,(o=new ml).writeInt(this.scalarType),o.writeShort(v),o.writeShort(N),o.writeShort(f),o.writeShort(A),l=16*v,x=o.pos+l,m=null,O=[],n)for(T=n[D],o.writeString(D),o.writeInt(e(T)),o.writeInt(x),o.writeInt(T.length),O=O.concat(T),D==="head"&&(m=x),x+=T.length;x%4;)O.push(0),x++;return o.write(O),r=2981146554-e(o.data),o.pos=m+8,o.writeUInt32(r),o.data},e=function(n){var r,o,l,f;for(n=Ov.call(n);n.length%4;)n.push(0);for(l=new ml(n),o=0,r=0,f=n.length;r<f;r=r+=4)o+=l.readUInt32();return 4294967295&o},t}(),jA={}.hasOwnProperty,Fs=function(e,t){for(var n in t)jA.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};hs=function(){function e(t){var n;this.file=t,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var IA=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Fs(t,hs),t.prototype.tag="head",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},t.prototype.encode=function(n){var r;return(r=new ml).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},t}(),_x=function(){function e(t,n){var r,o,l,f,m,g,x,A,N,T,v,O,D,P,C,E,j;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=n+t.readInt(),N=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(g=0;g<256;++g)this.codeMap[g]=t.readByte();break;case 4:for(v=t.readUInt16(),T=v/2,t.pos+=6,l=function(){var V,W;for(W=[],g=V=0;0<=T?V<T:V>T;g=0<=T?++V:--V)W.push(t.readUInt16());return W}(),t.pos+=2,D=function(){var V,W;for(W=[],g=V=0;0<=T?V<T:V>T;g=0<=T?++V:--V)W.push(t.readUInt16());return W}(),x=function(){var V,W;for(W=[],g=V=0;0<=T?V<T:V>T;g=0<=T?++V:--V)W.push(t.readUInt16());return W}(),A=function(){var V,W;for(W=[],g=V=0;0<=T?V<T:V>T;g=0<=T?++V:--V)W.push(t.readUInt16());return W}(),o=(this.length-t.pos+this.offset)/2,m=function(){var V,W;for(W=[],g=V=0;0<=o?V<o:V>o;g=0<=o?++V:--V)W.push(t.readUInt16());return W}(),g=C=0,j=l.length;C<j;g=++C)for(P=l[g],r=E=O=D[g];O<=P?E<=P:E>=P;r=O<=P?++E:--E)A[g]===0?f=r+x[g]:(f=m[A[g]/2+(r-O)-(T-g)]||0)!==0&&(f+=x[g]),this.codeMap[r]=65535&f}t.pos=N}return e.encode=function(t,n){var r,o,l,f,m,g,x,A,N,T,v,O,D,P,C,E,j,V,W,ie,B,R,M,Z,F,k,Q,J,G,Y,z,X,te,ge,ue,L,q,ee,fe,ae,Ee,we,xe,Me,_e,Qe;switch(J=new ml,f=Object.keys(t).sort(function(Be,ft){return Be-ft}),n){case"macroman":for(D=0,P=function(){var Be=[];for(O=0;O<256;++O)Be.push(0);return Be}(),E={0:0},l={},G=0,te=f.length;G<te;G++)E[xe=t[o=f[G]]]==null&&(E[xe]=++D),l[o]={old:t[o],new:E[t[o]]},P[o]=E[t[o]];return J.writeUInt16(1),J.writeUInt16(0),J.writeUInt32(12),J.writeUInt16(0),J.writeUInt16(262),J.writeUInt16(0),J.write(P),{charMap:l,subtable:J.data,maxGlyphID:D+1};case"unicode":for(k=[],N=[],j=0,E={},r={},C=x=null,Y=0,ge=f.length;Y<ge;Y++)E[W=t[o=f[Y]]]==null&&(E[W]=++j),r[o]={old:W,new:E[W]},m=E[W]-o,C!=null&&m===x||(C&&N.push(C),k.push(o),x=m),C=o;for(C&&N.push(C),N.push(65535),k.push(65535),Z=2*(M=k.length),R=2*Math.pow(Math.log(M)/Math.LN2,2),T=Math.log(R/2)/Math.LN2,B=2*M-R,g=[],ie=[],v=[],O=z=0,ue=k.length;z<ue;O=++z){if(F=k[O],A=N[O],F===65535){g.push(0),ie.push(0);break}if(F-(Q=r[F].new)>=32768)for(g.push(0),ie.push(2*(v.length+M-O)),o=X=F;F<=A?X<=A:X>=A;o=F<=A?++X:--X)v.push(r[o].new);else g.push(Q-F),ie.push(0)}for(J.writeUInt16(3),J.writeUInt16(1),J.writeUInt32(12),J.writeUInt16(4),J.writeUInt16(16+8*M+2*v.length),J.writeUInt16(0),J.writeUInt16(Z),J.writeUInt16(R),J.writeUInt16(T),J.writeUInt16(B),Ee=0,L=N.length;Ee<L;Ee++)o=N[Ee],J.writeUInt16(o);for(J.writeUInt16(0),we=0,q=k.length;we<q;we++)o=k[we],J.writeUInt16(o);for(Me=0,ee=g.length;Me<ee;Me++)m=g[Me],J.writeUInt16(m);for(_e=0,fe=ie.length;_e<fe;_e++)V=ie[_e],J.writeUInt16(V);for(Qe=0,ae=v.length;Qe<ae;Qe++)D=v[Qe],J.writeUInt16(D);return{charMap:r,subtable:J.data,maxGlyphID:j+1}}},e}(),Rv=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Fs(t,hs),t.prototype.tag="cmap",t.prototype.parse=function(n){var r,o,l;for(n.pos=this.offset,this.version=n.readUInt16(),l=n.readUInt16(),this.tables=[],this.unicode=null,o=0;0<=l?o<l:o>l;o=0<=l?++o:--o)r=new _x(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(n,r){var o,l;return r==null&&(r="macroman"),o=_x.encode(n,r),(l=new ml).writeUInt16(0),l.writeUInt16(1),o.table=l.data.concat(o.subtable),o},t}(),DA=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Fs(t,hs),t.prototype.tag="hhea",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},t}(),RA=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Fs(t,hs),t.prototype.tag="OS/2",t.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,o;for(o=[],r=0;r<10;++r)o.push(n.readByte());return o}(),this.charRange=function(){var r,o;for(o=[],r=0;r<4;++r)o.push(n.readInt());return o}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,o;for(o=[],r=0;r<2;r=++r)o.push(n.readInt());return o}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},t}(),OA=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Fs(t,hs),t.prototype.tag="post",t.prototype.parse=function(n){var r,o,l;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var f;for(o=n.readUInt16(),this.glyphNameIndex=[],f=0;0<=o?f<o:f>o;f=0<=o?++f:--f)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],l=[];n.pos<this.offset+this.length;)r=n.readByte(),l.push(this.names.push(n.readString(r)));return l;case 151552:return o=n.readUInt16(),this.offsets=n.read(o);case 196608:break;case 262144:return this.map=(function(){var m,g,x;for(x=[],f=m=0,g=this.file.maxp.numGlyphs;0<=g?m<g:m>g;f=0<=g?++m:--m)x.push(n.readUInt32());return x}).call(this)}},t}(),LA=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},MA=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Fs(t,hs),t.prototype.tag="name",t.prototype.parse=function(n){var r,o,l,f,m,g,x,A,N,T,v;for(n.pos=this.offset,n.readShort(),r=n.readShort(),g=n.readShort(),o=[],f=0;0<=r?f<r:f>r;f=0<=r?++f:--f)o.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+g+n.readShort()});for(x={},f=N=0,T=o.length;N<T;f=++N)l=o[f],n.pos=l.offset,A=n.readString(l.length),m=new LA(A,l),x[v=l.nameID]==null&&(x[v]=[]),x[l.nameID].push(m);this.strings=x,this.copyright=x[0],this.fontFamily=x[1],this.fontSubfamily=x[2],this.uniqueSubfamily=x[3],this.fontName=x[4],this.version=x[5];try{this.postscriptName=x[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=x[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=x[7],this.manufacturer=x[8],this.designer=x[9],this.description=x[10],this.vendorUrl=x[11],this.designerUrl=x[12],this.license=x[13],this.licenseUrl=x[14],this.preferredFamily=x[15],this.preferredSubfamily=x[17],this.compatibleFull=x[18],this.sampleText=x[19]},t}(),kA=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Fs(t,hs),t.prototype.tag="maxp",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},t}(),PA=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Fs(t,hs),t.prototype.tag="hmtx",t.prototype.parse=function(n){var r,o,l,f,m,g,x;for(n.pos=this.offset,this.metrics=[],r=0,g=this.file.hhea.numberOfMetrics;0<=g?r<g:r>g;r=0<=g?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(l=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var A,N;for(N=[],r=A=0;0<=l?A<l:A>l;r=0<=l?++A:--A)N.push(n.readInt16());return N}(),this.widths=(function(){var A,N,T,v;for(v=[],A=0,N=(T=this.metrics).length;A<N;A++)f=T[A],v.push(f.advance);return v}).call(this),o=this.widths[this.widths.length-1],x=[],r=m=0;0<=l?m<l:m>l;r=0<=l?++m:--m)x.push(this.widths.push(o));return x},t.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},t}(),Ov=[].slice,FA=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Fs(t,hs),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(n){var r,o,l,f,m,g,x,A,N,T;return n in this.cache?this.cache[n]:(f=this.file.loca,r=this.file.contents,o=f.indexOf(n),(l=f.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+o,m=(g=new ml(r.read(l))).readShort(),A=g.readShort(),T=g.readShort(),x=g.readShort(),N=g.readShort(),this.cache[n]=m===-1?new UA(g,A,T,x,N):new BA(g,m,A,T,x,N),this.cache[n]))},t.prototype.encode=function(n,r,o){var l,f,m,g,x;for(m=[],f=[],g=0,x=r.length;g<x;g++)l=n[r[g]],f.push(m.length),l&&(m=m.concat(l.encode(o)));return f.push(m.length),{table:m,offsets:f}},t}(),BA=function(){function e(t,n,r,o,l,f){this.raw=t,this.numberOfContours=n,this.xMin=r,this.yMin=o,this.xMax=l,this.yMax=f,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),UA=function(){function e(t,n,r,o,l){var f,m;for(this.raw=t,this.xMin=n,this.yMin=r,this.xMax=o,this.yMax=l,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],f=this.raw;m=f.readShort(),this.glyphOffsets.push(f.pos),this.glyphIDs.push(f.readUInt16()),32&m;)f.pos+=1&m?4:2,128&m?f.pos+=8:64&m?f.pos+=4:8&m&&(f.pos+=2)}return e.prototype.encode=function(){var t,n,r;for(n=new ml(Ov.call(this.raw.data)),t=0,r=this.glyphIDs.length;t<r;++t)n.pos=this.glyphOffsets[t];return n.data},e}(),zA=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Fs(t,hs),t.prototype.tag="loca",t.prototype.parse=function(n){var r,o;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var l,f;for(f=[],o=0,l=this.length;o<l;o+=2)f.push(2*n.readUInt16());return f}).call(this):(function(){var l,f;for(f=[],o=0,l=this.length;o<l;o+=4)f.push(n.readUInt32());return f}).call(this)},t.prototype.indexOf=function(n){return this.offsets[n]},t.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},t.prototype.encode=function(n,r){for(var o=new Uint32Array(this.offsets.length),l=0,f=0,m=0;m<o.length;++m)if(o[m]=l,f<r.length&&r[f]==m){++f,o[m]=l;var g=this.offsets[m],x=this.offsets[m+1]-g;x>0&&(l+=x)}for(var A=new Array(4*o.length),N=0;N<o.length;++N)A[4*N+3]=255&o[N],A[4*N+2]=(65280&o[N])>>8,A[4*N+1]=(16711680&o[N])>>16,A[4*N]=(4278190080&o[N])>>24;return A},t}(),HA=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,n,r,o,l;for(n in o=this.font.cmap.tables[0].codeMap,t={},l=this.subset)r=l[n],t[n]=o[r];return t},e.prototype.glyphsFor=function(t){var n,r,o,l,f,m,g;for(o={},f=0,m=t.length;f<m;f++)o[l=t[f]]=this.font.glyf.glyphFor(l);for(l in n=[],o)(r=o[l])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(l in g=this.glyphsFor(n))r=g[l],o[l]=r;return o},e.prototype.encode=function(t,n){var r,o,l,f,m,g,x,A,N,T,v,O,D,P,C;for(o in r=Rv.encode(this.generateCmap(),"unicode"),f=this.glyphsFor(t),v={0:0},C=r.charMap)v[(g=C[o]).old]=g.new;for(O in T=r.maxGlyphID,f)O in v||(v[O]=T++);return A=function(E){var j,V;for(j in V={},E)V[E[j]]=j;return V}(v),N=Object.keys(A).sort(function(E,j){return E-j}),D=function(){var E,j,V;for(V=[],E=0,j=N.length;E<j;E++)m=N[E],V.push(A[m]);return V}(),l=this.font.glyf.encode(f,D,v),x=this.font.loca.encode(l.offsets,D),P={cmap:this.font.cmap.raw(),glyf:l.table,loca:x,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(P["OS/2"]=this.font.os2.raw()),this.font.directory.encode(P)},e}();Vt.API.PDFObject=function(){var e;function t(){}return e=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},t.convert=function(n){var r,o,l,f;if(Array.isArray(n))return"["+function(){var m,g,x;for(x=[],m=0,g=n.length;m<g;m++)r=n[m],x.push(t.convert(r));return x}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(o in l=["<<"],n)f=n[o],l.push("/"+o+" "+t.convert(f));return l.push(">>"),l.join(`
`)}return""+n},t}();const VA=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:vA,AcroFormAppearance:_t,AcroFormButton:si,AcroFormCheckBox:ud,AcroFormChoiceField:Zl,AcroFormComboBox:Kl,AcroFormEditBox:ld,AcroFormListBox:Ql,AcroFormPasswordField:dd,AcroFormPushButton:cd,AcroFormRadioButton:Jl,AcroFormTextField:ol,GState:_d,ShadingPattern:Go,TilingPattern:Ul,default:Vt,jsPDF:Vt},Symbol.toStringTag,{value:"Module"}));var qA={exports:{}};const GA=I3(VA);/*!
 * 
 *               jsPDF AutoTable plugin v3.8.4
 *
 *               Copyright (c) 2024 Simon Bengtsson, https://github.com/simonbengtsson/jsPDF-AutoTable
 *               Licensed under the MIT License.
 *               http://opensource.org/licenses/mit-license
 *
 */(function(e,t){(function(r,o){e.exports=o(function(){try{return GA}catch{}}())})(typeof globalThis<"u"?globalThis:typeof eo<"u"?eo:typeof window<"u"?window:typeof self<"u"?self:eo,function(n){return function(){var r={172:function(m,g){var x=this&&this.__extends||function(){var T=function(v,O){return T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,P){D.__proto__=P}||function(D,P){for(var C in P)Object.prototype.hasOwnProperty.call(P,C)&&(D[C]=P[C])},T(v,O)};return function(v,O){if(typeof O!="function"&&O!==null)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");T(v,O);function D(){this.constructor=v}v.prototype=O===null?Object.create(O):(D.prototype=O.prototype,new D)}}();Object.defineProperty(g,"__esModule",{value:!0}),g.CellHookData=g.HookData=void 0;var A=function(){function T(v,O,D){this.table=O,this.pageNumber=O.pageNumber,this.pageCount=this.pageNumber,this.settings=O.settings,this.cursor=D,this.doc=v.getDocument()}return T}();g.HookData=A;var N=function(T){x(v,T);function v(O,D,P,C,E,j){var V=T.call(this,O,D,j)||this;return V.cell=P,V.row=C,V.column=E,V.section=C.section,V}return v}(A);g.CellHookData=N},340:function(m,g,x){Object.defineProperty(g,"__esModule",{value:!0});var A=x(4),N=x(136),T=x(744),v=x(776),O=x(664),D=x(972);function P(C){C.API.autoTable=function(){for(var E=[],j=0;j<arguments.length;j++)E[j]=arguments[j];var V;E.length===1?V=E[0]:(console.error("Use of deprecated autoTable initiation"),V=E[2]||{},V.columns=E[0],V.body=E[1]);var W=(0,v.parseInput)(this,V),ie=(0,D.createTable)(this,W);return(0,O.drawTable)(this,ie),this},C.API.lastAutoTable=!1,C.API.previousAutoTable=!1,C.API.autoTable.previous=!1,C.API.autoTableText=function(E,j,V,W){(0,N.default)(E,j,V,W,this)},C.API.autoTableSetDefaults=function(E){return T.DocHandler.setDefaults(E,this),this},C.autoTableSetDefaults=function(E,j){T.DocHandler.setDefaults(E,j)},C.API.autoTableHtmlToJson=function(E,j){var V;if(j===void 0&&(j=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var W=new T.DocHandler(this),ie=(0,A.parseHtml)(W,E,window,j,!1),B=ie.head,R=ie.body,M=((V=B[0])===null||V===void 0?void 0:V.map(function(Z){return Z.content}))||[];return{columns:M,rows:R,data:R}},C.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var E=this.lastAutoTable;return E&&E.finalY?E.finalY:0},C.API.autoTableAddPageContent=function(E){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),C.API.autoTable.globalDefaults||(C.API.autoTable.globalDefaults={}),C.API.autoTable.globalDefaults.addPageContent=E,this},C.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}g.default=P},136:function(m,g){Object.defineProperty(g,"__esModule",{value:!0});function x(A,N,T,v,O){v=v||{};var D=1.15,P=O.internal.scaleFactor,C=O.internal.getFontSize()/P,E=O.getLineHeightFactor?O.getLineHeightFactor():D,j=C*E,V=/\r\n|\r|\n/g,W="",ie=1;if((v.valign==="middle"||v.valign==="bottom"||v.halign==="center"||v.halign==="right")&&(W=typeof A=="string"?A.split(V):A,ie=W.length||1),T+=C*(2-D),v.valign==="middle"?T-=ie/2*j:v.valign==="bottom"&&(T-=ie*j),v.halign==="center"||v.halign==="right"){var B=C;if(v.halign==="center"&&(B*=.5),W&&ie>=1){for(var R=0;R<W.length;R++)O.text(W[R],N-O.getStringUnitWidth(W[R])*B,T),T+=j;return O}N-=O.getStringUnitWidth(A)*B}return v.halign==="justify"?O.text(A,N,T,{maxWidth:v.maxWidth||100,align:"justify"}):O.text(A,N,T),O}g.default=x},420:function(m,g){Object.defineProperty(g,"__esModule",{value:!0}),g.getPageAvailableWidth=g.parseSpacing=g.getFillStyle=g.addTableBorder=g.getStringWidth=void 0;function x(O,D,P){P.applyStyles(D,!0);var C=Array.isArray(O)?O:[O],E=C.map(function(j){return P.getTextWidth(j)}).reduce(function(j,V){return Math.max(j,V)},0);return E}g.getStringWidth=x;function A(O,D,P,C){var E=D.settings.tableLineWidth,j=D.settings.tableLineColor;O.applyStyles({lineWidth:E,lineColor:j});var V=N(E,!1);V&&O.rect(P.x,P.y,D.getWidth(O.pageSize().width),C.y-P.y,V)}g.addTableBorder=A;function N(O,D){var P=O>0,C=D||D===0;return P&&C?"DF":P?"S":C?"F":null}g.getFillStyle=N;function T(O,D){var P,C,E,j;if(O=O||D,Array.isArray(O)){if(O.length>=4)return{top:O[0],right:O[1],bottom:O[2],left:O[3]};if(O.length===3)return{top:O[0],right:O[1],bottom:O[2],left:O[1]};if(O.length===2)return{top:O[0],right:O[1],bottom:O[0],left:O[1]};O.length===1?O=O[0]:O=D}return typeof O=="object"?(typeof O.vertical=="number"&&(O.top=O.vertical,O.bottom=O.vertical),typeof O.horizontal=="number"&&(O.right=O.horizontal,O.left=O.horizontal),{left:(P=O.left)!==null&&P!==void 0?P:D,top:(C=O.top)!==null&&C!==void 0?C:D,right:(E=O.right)!==null&&E!==void 0?E:D,bottom:(j=O.bottom)!==null&&j!==void 0?j:D}):(typeof O!="number"&&(O=D),{top:O,right:O,bottom:O,left:O})}g.parseSpacing=T;function v(O,D){var P=T(D.settings.margin,0);return O.pageSize().width-(P.left+P.right)}g.getPageAvailableWidth=v},796:function(m,g){var x=this&&this.__extends||function(){var v=function(O,D){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,C){P.__proto__=C}||function(P,C){for(var E in C)Object.prototype.hasOwnProperty.call(C,E)&&(P[E]=C[E])},v(O,D)};return function(O,D){if(typeof D!="function"&&D!==null)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");v(O,D);function P(){this.constructor=O}O.prototype=D===null?Object.create(D):(P.prototype=D.prototype,new P)}}();Object.defineProperty(g,"__esModule",{value:!0}),g.getTheme=g.defaultStyles=g.HtmlRowInput=void 0;var A=function(v){x(O,v);function O(D){var P=v.call(this)||this;return P._element=D,P}return O}(Array);g.HtmlRowInput=A;function N(v){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/v,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}g.defaultStyles=N;function T(v){var O={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return O[v]}g.getTheme=T},903:function(m,g,x){Object.defineProperty(g,"__esModule",{value:!0}),g.parseCss=void 0;var A=x(420);function N(P,C,E,j,V){var W={},ie=1.3333333333333333,B=v(C,function(te){return V.getComputedStyle(te).backgroundColor});B!=null&&(W.fillColor=B);var R=v(C,function(te){return V.getComputedStyle(te).color});R!=null&&(W.textColor=R);var M=D(j,E);M&&(W.cellPadding=M);var Z="borderTopColor",F=ie*E,k=j.borderTopWidth;if(j.borderBottomWidth===k&&j.borderRightWidth===k&&j.borderLeftWidth===k){var Q=(parseFloat(k)||0)/F;Q&&(W.lineWidth=Q)}else W.lineWidth={top:(parseFloat(j.borderTopWidth)||0)/F,right:(parseFloat(j.borderRightWidth)||0)/F,bottom:(parseFloat(j.borderBottomWidth)||0)/F,left:(parseFloat(j.borderLeftWidth)||0)/F},W.lineWidth.top||(W.lineWidth.right?Z="borderRightColor":W.lineWidth.bottom?Z="borderBottomColor":W.lineWidth.left&&(Z="borderLeftColor"));var J=v(C,function(te){return V.getComputedStyle(te)[Z]});J!=null&&(W.lineColor=J);var G=["left","right","center","justify"];G.indexOf(j.textAlign)!==-1&&(W.halign=j.textAlign),G=["middle","bottom","top"],G.indexOf(j.verticalAlign)!==-1&&(W.valign=j.verticalAlign);var Y=parseInt(j.fontSize||"");isNaN(Y)||(W.fontSize=Y/ie);var z=T(j);z&&(W.fontStyle=z);var X=(j.fontFamily||"").toLowerCase();return P.indexOf(X)!==-1&&(W.font=X),W}g.parseCss=N;function T(P){var C="";return(P.fontWeight==="bold"||P.fontWeight==="bolder"||parseInt(P.fontWeight)>=700)&&(C="bold"),(P.fontStyle==="italic"||P.fontStyle==="oblique")&&(C+="italic"),C}function v(P,C){var E=O(P,C);if(!E)return null;var j=E.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!j||!Array.isArray(j))return null;var V=[parseInt(j[1]),parseInt(j[2]),parseInt(j[3])],W=parseInt(j[4]);return W===0||isNaN(V[0])||isNaN(V[1])||isNaN(V[2])?null:V}function O(P,C){var E=C(P);return E==="rgba(0, 0, 0, 0)"||E==="transparent"||E==="initial"||E==="inherit"?P.parentElement==null?null:O(P.parentElement,C):E}function D(P,C){var E=[P.paddingTop,P.paddingRight,P.paddingBottom,P.paddingLeft],j=96/(72/C),V=(parseInt(P.lineHeight)-parseInt(P.fontSize))/C/2,W=E.map(function(B){return parseInt(B||"0")/j}),ie=(0,A.parseSpacing)(W,0);return V>ie.top&&(ie.top=V),V>ie.bottom&&(ie.bottom=V),ie}},744:function(m,g){Object.defineProperty(g,"__esModule",{value:!0}),g.DocHandler=void 0;var x={},A=function(){function N(T){this.jsPDFDocument=T,this.userStyles={textColor:T.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:T.internal.getFontSize(),fontStyle:T.internal.getFont().fontStyle,font:T.internal.getFont().fontName,lineWidth:T.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:T.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return N.setDefaults=function(T,v){v===void 0&&(v=null),v?v.__autoTableDocumentDefaults=T:x=T},N.unifyColor=function(T){return Array.isArray(T)?T:typeof T=="number"?[T,T,T]:typeof T=="string"?[T]:null},N.prototype.applyStyles=function(T,v){var O,D,P;v===void 0&&(v=!1),T.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(T.fontStyle);var C=this.jsPDFDocument.internal.getFont(),E=C.fontStyle,j=C.fontName;if(T.font&&(j=T.font),T.fontStyle){E=T.fontStyle;var V=this.getFontList()[j];V&&V.indexOf(E)===-1&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(V[0]),E=V[0])}if(this.jsPDFDocument.setFont(j,E),T.fontSize&&this.jsPDFDocument.setFontSize(T.fontSize),!v){var W=N.unifyColor(T.fillColor);W&&(O=this.jsPDFDocument).setFillColor.apply(O,W),W=N.unifyColor(T.textColor),W&&(D=this.jsPDFDocument).setTextColor.apply(D,W),W=N.unifyColor(T.lineColor),W&&(P=this.jsPDFDocument).setDrawColor.apply(P,W),typeof T.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(T.lineWidth)}},N.prototype.splitTextToSize=function(T,v,O){return this.jsPDFDocument.splitTextToSize(T,v,O)},N.prototype.rect=function(T,v,O,D,P){return this.jsPDFDocument.rect(T,v,O,D,P)},N.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},N.prototype.getTextWidth=function(T){return this.jsPDFDocument.getTextWidth(T)},N.prototype.getDocument=function(){return this.jsPDFDocument},N.prototype.setPage=function(T){this.jsPDFDocument.setPage(T)},N.prototype.addPage=function(){return this.jsPDFDocument.addPage()},N.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},N.prototype.getGlobalOptions=function(){return x||{}},N.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},N.prototype.pageSize=function(){var T=this.jsPDFDocument.internal.pageSize;return T.width==null&&(T={width:T.getWidth(),height:T.getHeight()}),T},N.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},N.prototype.getLineHeightFactor=function(){var T=this.jsPDFDocument;return T.getLineHeightFactor?T.getLineHeightFactor():1.15},N.prototype.getLineHeight=function(T){return T/this.scaleFactor()*this.getLineHeightFactor()},N.prototype.pageNumber=function(){var T=this.jsPDFDocument.internal.getCurrentPageInfo();return T?T.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},N}();g.DocHandler=A},4:function(m,g,x){Object.defineProperty(g,"__esModule",{value:!0}),g.parseHtml=void 0;var A=x(903),N=x(796);function T(D,P,C,E,j){var V,W;E===void 0&&(E=!1),j===void 0&&(j=!1);var ie;typeof P=="string"?ie=C.document.querySelector(P):ie=P;var B=Object.keys(D.getFontList()),R=D.scaleFactor(),M=[],Z=[],F=[];if(!ie)return console.error("Html table could not be found with input: ",P),{head:M,body:Z,foot:F};for(var k=0;k<ie.rows.length;k++){var Q=ie.rows[k],J=(W=(V=Q==null?void 0:Q.parentElement)===null||V===void 0?void 0:V.tagName)===null||W===void 0?void 0:W.toLowerCase(),G=v(B,R,C,Q,E,j);G&&(J==="thead"?M.push(G):J==="tfoot"?F.push(G):Z.push(G))}return{head:M,body:Z,foot:F}}g.parseHtml=T;function v(D,P,C,E,j,V){for(var W=new N.HtmlRowInput(E),ie=0;ie<E.cells.length;ie++){var B=E.cells[ie],R=C.getComputedStyle(B);if(j||R.display!=="none"){var M=void 0;V&&(M=(0,A.parseCss)(D,B,P,R,C)),W.push({rowSpan:B.rowSpan,colSpan:B.colSpan,styles:M,_element:B,content:O(B)})}}var Z=C.getComputedStyle(E);if(W.length>0&&(j||Z.display!=="none"))return W}function O(D){var P=D.cloneNode(!0);return P.innerHTML=P.innerHTML.replace(/\n/g,"").replace(/ +/g," "),P.innerHTML=P.innerHTML.split(/<br.*?>/).map(function(C){return C.trim()}).join(`
`),P.innerText||P.textContent||""}},776:function(m,g,x){Object.defineProperty(g,"__esModule",{value:!0}),g.parseInput=void 0;var A=x(4),N=x(356),T=x(420),v=x(744),O=x(792);function D(ie,B){var R=new v.DocHandler(ie),M=R.getDocumentOptions(),Z=R.getGlobalOptions();(0,O.default)(R,Z,M,B);var F=(0,N.assign)({},Z,M,B),k;typeof window<"u"&&(k=window);var Q=P(Z,M,B),J=C(Z,M,B),G=E(R,F),Y=V(R,F,k);return{id:B.tableId,content:Y,hooks:J,styles:Q,settings:G}}g.parseInput=D;function P(ie,B,R){for(var M={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},Z=function(J){if(J==="columnStyles"){var G=ie[J],Y=B[J],z=R[J];M.columnStyles=(0,N.assign)({},G,Y,z)}else{var X=[ie,B,R],te=X.map(function(ge){return ge[J]||{}});M[J]=(0,N.assign)({},te[0],te[1],te[2])}},F=0,k=Object.keys(M);F<k.length;F++){var Q=k[F];Z(Q)}return M}function C(ie,B,R){for(var M=[ie,B,R],Z={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},F=0,k=M;F<k.length;F++){var Q=k[F];Q.didParseCell&&Z.didParseCell.push(Q.didParseCell),Q.willDrawCell&&Z.willDrawCell.push(Q.willDrawCell),Q.didDrawCell&&Z.didDrawCell.push(Q.didDrawCell),Q.willDrawPage&&Z.willDrawPage.push(Q.willDrawPage),Q.didDrawPage&&Z.didDrawPage.push(Q.didDrawPage)}return Z}function E(ie,B){var R,M,Z,F,k,Q,J,G,Y,z,X,te,ge=(0,T.parseSpacing)(B.margin,40/ie.scaleFactor()),ue=(R=j(ie,B.startY))!==null&&R!==void 0?R:ge.top,L;B.showFoot===!0?L="everyPage":B.showFoot===!1?L="never":L=(M=B.showFoot)!==null&&M!==void 0?M:"everyPage";var q;B.showHead===!0?q="everyPage":B.showHead===!1?q="never":q=(Z=B.showHead)!==null&&Z!==void 0?Z:"everyPage";var ee=(F=B.useCss)!==null&&F!==void 0?F:!1,fe=B.theme||(ee?"plain":"striped"),ae=!!B.horizontalPageBreak,Ee=(k=B.horizontalPageBreakRepeat)!==null&&k!==void 0?k:null;return{includeHiddenHtml:(Q=B.includeHiddenHtml)!==null&&Q!==void 0?Q:!1,useCss:ee,theme:fe,startY:ue,margin:ge,pageBreak:(J=B.pageBreak)!==null&&J!==void 0?J:"auto",rowPageBreak:(G=B.rowPageBreak)!==null&&G!==void 0?G:"auto",tableWidth:(Y=B.tableWidth)!==null&&Y!==void 0?Y:"auto",showHead:q,showFoot:L,tableLineWidth:(z=B.tableLineWidth)!==null&&z!==void 0?z:0,tableLineColor:(X=B.tableLineColor)!==null&&X!==void 0?X:200,horizontalPageBreak:ae,horizontalPageBreakRepeat:Ee,horizontalPageBreakBehaviour:(te=B.horizontalPageBreakBehaviour)!==null&&te!==void 0?te:"afterAllRows"}}function j(ie,B){var R=ie.getLastAutoTable(),M=ie.scaleFactor(),Z=ie.pageNumber(),F=!1;if(R&&R.startPageNumber){var k=R.startPageNumber+R.pageNumber-1;F=k===Z}return typeof B=="number"?B:(B==null||B===!1)&&F&&(R==null?void 0:R.finalY)!=null?R.finalY+20/M:null}function V(ie,B,R){var M=B.head||[],Z=B.body||[],F=B.foot||[];if(B.html){var k=B.includeHiddenHtml;if(R){var Q=(0,A.parseHtml)(ie,B.html,R,k,B.useCss)||{};M=Q.head||M,Z=Q.body||M,F=Q.foot||M}else console.error("Cannot parse html in non browser environment")}var J=B.columns||W(M,Z,F);return{columns:J,head:M,body:Z,foot:F}}function W(ie,B,R){var M=ie[0]||B[0]||R[0]||[],Z=[];return Object.keys(M).filter(function(F){return F!=="_element"}).forEach(function(F){var k=1,Q;Array.isArray(M)?Q=M[parseInt(F)]:Q=M[F],typeof Q=="object"&&!Array.isArray(Q)&&(k=(Q==null?void 0:Q.colSpan)||1);for(var J=0;J<k;J++){var G=void 0;Array.isArray(M)?G=Z.length:G=F+(J>0?"_".concat(J):"");var Y={dataKey:G};Z.push(Y)}}),Z}},792:function(m,g){Object.defineProperty(g,"__esModule",{value:!0});function x(N,T,v,O){for(var D=function(j){j&&typeof j!="object"&&console.error("The options parameter should be of type object, is: "+typeof j),typeof j.extendWidth<"u"&&(j.tableWidth=j.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),typeof j.margins<"u"&&(typeof j.margin>"u"&&(j.margin=j.margins),console.error("Use of deprecated option: margins, use margin instead.")),j.startY&&typeof j.startY!="number"&&(console.error("Invalid value for startY option",j.startY),delete j.startY),!j.didDrawPage&&(j.afterPageContent||j.beforePageContent||j.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),j.didDrawPage=function(F){N.applyStyles(N.userStyles),j.beforePageContent&&j.beforePageContent(F),N.applyStyles(N.userStyles),j.afterPageContent&&j.afterPageContent(F),N.applyStyles(N.userStyles),j.afterPageAdd&&F.pageNumber>1&&F.afterPageAdd(F),N.applyStyles(N.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(F){j[F]&&console.error('The "'.concat(F,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(F){var k=F[0],Q=F[1];j[Q]&&(console.error("Use of deprecated option ".concat(Q,". Use ").concat(k," instead")),j[k]=j[Q])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(F){var k=typeof F=="string"?F:F[0],Q=typeof F=="string"?F:F[1];typeof j[k]<"u"&&(typeof j.styles[Q]>"u"&&(j.styles[Q]=j[k]),console.error("Use of deprecated option: "+k+", use the style "+Q+" instead."))});for(var V=0,W=["styles","bodyStyles","headStyles","footStyles"];V<W.length;V++){var ie=W[V];A(j[ie]||{})}for(var B=j.columnStyles||{},R=0,M=Object.keys(B);R<M.length;R++){var Z=M[R];A(B[Z]||{})}},P=0,C=[T,v,O];P<C.length;P++){var E=C[P];D(E)}}g.default=x;function A(N){N.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),N.minCellHeight||(N.minCellHeight=N.rowHeight)):N.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),N.cellWidth||(N.cellWidth=N.columnWidth))}},260:function(m,g,x){Object.defineProperty(g,"__esModule",{value:!0}),g.Column=g.Cell=g.Row=g.Table=void 0;var A=x(796),N=x(172),T=x(420),v=function(){function C(E,j){this.pageNumber=1,this.pageCount=1,this.id=E.id,this.settings=E.settings,this.styles=E.styles,this.hooks=E.hooks,this.columns=j.columns,this.head=j.head,this.body=j.body,this.foot=j.foot}return C.prototype.getHeadHeight=function(E){return this.head.reduce(function(j,V){return j+V.getMaxCellHeight(E)},0)},C.prototype.getFootHeight=function(E){return this.foot.reduce(function(j,V){return j+V.getMaxCellHeight(E)},0)},C.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},C.prototype.callCellHooks=function(E,j,V,W,ie,B){for(var R=0,M=j;R<M.length;R++){var Z=M[R],F=new N.CellHookData(E,this,V,W,ie,B),k=Z(F)===!1;if(V.text=Array.isArray(V.text)?V.text:[V.text],k)return!1}return!0},C.prototype.callEndPageHooks=function(E,j){E.applyStyles(E.userStyles);for(var V=0,W=this.hooks.didDrawPage;V<W.length;V++){var ie=W[V];ie(new N.HookData(E,this,j))}},C.prototype.callWillDrawPageHooks=function(E,j){for(var V=0,W=this.hooks.willDrawPage;V<W.length;V++){var ie=W[V];ie(new N.HookData(E,this,j))}},C.prototype.getWidth=function(E){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var j=this.columns.reduce(function(W,ie){return W+ie.wrappedWidth},0);return j}else{var V=this.settings.margin;return E-V.left-V.right}},C}();g.Table=v;var O=function(){function C(E,j,V,W,ie){ie===void 0&&(ie=!1),this.height=0,this.raw=E,E instanceof A.HtmlRowInput&&(this.raw=E._element,this.element=E._element),this.index=j,this.section=V,this.cells=W,this.spansMultiplePages=ie}return C.prototype.getMaxCellHeight=function(E){var j=this;return E.reduce(function(V,W){var ie;return Math.max(V,((ie=j.cells[W.index])===null||ie===void 0?void 0:ie.height)||0)},0)},C.prototype.hasRowSpan=function(E){var j=this;return E.filter(function(V){var W=j.cells[V.index];return W?W.rowSpan>1:!1}).length>0},C.prototype.canEntireRowFit=function(E,j){return this.getMaxCellHeight(j)<=E},C.prototype.getMinimumRowHeight=function(E,j){var V=this;return E.reduce(function(W,ie){var B=V.cells[ie.index];if(!B)return 0;var R=j.getLineHeight(B.styles.fontSize),M=B.padding("vertical"),Z=M+R;return Z>W?Z:W},0)},C}();g.Row=O;var D=function(){function C(E,j,V){var W,ie;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=j,this.section=V,this.raw=E;var B=E;E!=null&&typeof E=="object"&&!Array.isArray(E)?(this.rowSpan=E.rowSpan||1,this.colSpan=E.colSpan||1,B=(ie=(W=E.content)!==null&&W!==void 0?W:E.title)!==null&&ie!==void 0?ie:E,E._element&&(this.raw=E._element)):(this.rowSpan=1,this.colSpan=1);var R=B!=null?""+B:"",M=/\r\n|\r|\n/g;this.text=R.split(M)}return C.prototype.getTextPos=function(){var E;if(this.styles.valign==="top")E=this.y+this.padding("top");else if(this.styles.valign==="bottom")E=this.y+this.height-this.padding("bottom");else{var j=this.height-this.padding("vertical");E=this.y+j/2+this.padding("top")}var V;if(this.styles.halign==="right")V=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var W=this.width-this.padding("horizontal");V=this.x+W/2+this.padding("left")}else V=this.x+this.padding("left");return{x:V,y:E}},C.prototype.getContentHeight=function(E,j){j===void 0&&(j=1.15);var V=Array.isArray(this.text)?this.text.length:1,W=this.styles.fontSize/E*j,ie=V*W+this.padding("vertical");return Math.max(ie,this.styles.minCellHeight)},C.prototype.padding=function(E){var j=(0,T.parseSpacing)(this.styles.cellPadding,0);return E==="vertical"?j.top+j.bottom:E==="horizontal"?j.left+j.right:j[E]},C}();g.Cell=D;var P=function(){function C(E,j,V){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=E,this.raw=j,this.index=V}return C.prototype.getMaxCustomCellWidth=function(E){for(var j=0,V=0,W=E.allRows();V<W.length;V++){var ie=W[V],B=ie.cells[this.index];B&&typeof B.styles.cellWidth=="number"&&(j=Math.max(j,B.styles.cellWidth))}return j},C}();g.Column=P},356:function(m,g){Object.defineProperty(g,"__esModule",{value:!0}),g.assign=void 0;function x(A,N,T,v,O){if(A==null)throw new TypeError("Cannot convert undefined or null to object");for(var D=Object(A),P=1;P<arguments.length;P++){var C=arguments[P];if(C!=null)for(var E in C)Object.prototype.hasOwnProperty.call(C,E)&&(D[E]=C[E])}return D}g.assign=x},972:function(m,g,x){Object.defineProperty(g,"__esModule",{value:!0}),g.createTable=void 0;var A=x(744),N=x(260),T=x(324),v=x(796),O=x(356);function D(ie,B){var R=new A.DocHandler(ie),M=P(B,R.scaleFactor()),Z=new N.Table(B,M);return(0,T.calculateWidths)(R,Z),R.applyStyles(R.userStyles),Z}g.createTable=D;function P(ie,B){var R=ie.content,M=V(R.columns);if(R.head.length===0){var Z=E(M,"head");Z&&R.head.push(Z)}if(R.foot.length===0){var Z=E(M,"foot");Z&&R.foot.push(Z)}var F=ie.settings.theme,k=ie.styles;return{columns:M,head:C("head",R.head,M,k,F,B),body:C("body",R.body,M,k,F,B),foot:C("foot",R.foot,M,k,F,B)}}function C(ie,B,R,M,Z,F){var k={},Q=B.map(function(J,G){for(var Y=0,z={},X=0,te=0,ge=0,ue=R;ge<ue.length;ge++){var L=ue[ge];if(k[L.index]==null||k[L.index].left===0)if(te===0){var q=void 0;Array.isArray(J)?q=J[L.index-X-Y]:q=J[L.dataKey];var ee={};typeof q=="object"&&!Array.isArray(q)&&(ee=(q==null?void 0:q.styles)||{});var fe=W(ie,L,G,Z,M,F,ee),ae=new N.Cell(q,fe,ie);z[L.dataKey]=ae,z[L.index]=ae,te=ae.colSpan-1,k[L.index]={left:ae.rowSpan-1,times:te}}else te--,X++;else k[L.index].left--,te=k[L.index].times,Y++}return new N.Row(J,G,ie,z)});return Q}function E(ie,B){var R={};return ie.forEach(function(M){if(M.raw!=null){var Z=j(B,M.raw);Z!=null&&(R[M.dataKey]=Z)}}),Object.keys(R).length>0?R:null}function j(ie,B){if(ie==="head"){if(typeof B=="object")return B.header||B.title||null;if(typeof B=="string"||typeof B=="number")return B}else if(ie==="foot"&&typeof B=="object")return B.footer;return null}function V(ie){return ie.map(function(B,R){var M,Z,F;return typeof B=="object"?F=(Z=(M=B.dataKey)!==null&&M!==void 0?M:B.key)!==null&&Z!==void 0?Z:R:F=R,new N.Column(F,B,R)})}function W(ie,B,R,M,Z,F,k){var Q=(0,v.getTheme)(M),J;ie==="head"?J=Z.headStyles:ie==="body"?J=Z.bodyStyles:ie==="foot"&&(J=Z.footStyles);var G=(0,O.assign)({},Q.table,Q[ie],Z.styles,J),Y=Z.columnStyles[B.dataKey]||Z.columnStyles[B.index]||{},z=ie==="body"?Y:{},X=ie==="body"&&R%2===0?(0,O.assign)({},Q.alternateRow,Z.alternateRowStyles):{},te=(0,v.defaultStyles)(F),ge=(0,O.assign)({},te,G,X,z);return(0,O.assign)(ge,k)}},664:function(m,g,x){Object.defineProperty(g,"__esModule",{value:!0}),g.addPage=g.drawTable=void 0;var A=x(420),N=x(260),T=x(744),v=x(356),O=x(136),D=x(224);function P(Y,z){var X=z.settings,te=X.startY,ge=X.margin,ue={x:ge.left,y:te},L=z.getHeadHeight(z.columns)+z.getFootHeight(z.columns),q=te+ge.bottom+L;if(X.pageBreak==="avoid"){var ee=z.body,fe=ee.reduce(function(we,xe){return we+xe.height},0);q+=fe}var ae=new T.DocHandler(Y);(X.pageBreak==="always"||X.startY!=null&&q>ae.pageSize().height)&&(G(ae),ue.y=ge.top),z.callWillDrawPageHooks(ae,ue);var Ee=(0,v.assign)({},ue);z.startPageNumber=ae.pageNumber(),X.horizontalPageBreak?C(ae,z,Ee,ue):(ae.applyStyles(ae.userStyles),(X.showHead==="firstPage"||X.showHead==="everyPage")&&z.head.forEach(function(we){return Z(ae,z,we,ue,z.columns)}),ae.applyStyles(ae.userStyles),z.body.forEach(function(we,xe){var Me=xe===z.body.length-1;M(ae,z,we,Me,Ee,ue,z.columns)}),ae.applyStyles(ae.userStyles),(X.showFoot==="lastPage"||X.showFoot==="everyPage")&&z.foot.forEach(function(we){return Z(ae,z,we,ue,z.columns)})),(0,A.addTableBorder)(ae,z,Ee,ue),z.callEndPageHooks(ae,ue),z.finalY=ue.y,Y.lastAutoTable=z,Y.previousAutoTable=z,Y.autoTable&&(Y.autoTable.previous=z),ae.applyStyles(ae.userStyles)}g.drawTable=P;function C(Y,z,X,te){var ge=(0,D.calculateAllColumnsCanFitInPage)(Y,z),ue=z.settings;if(ue.horizontalPageBreakBehaviour==="afterAllRows")ge.forEach(function(fe,ae){Y.applyStyles(Y.userStyles),ae>0?J(Y,z,X,te,fe.columns,!0):E(Y,z,te,fe.columns),j(Y,z,X,te,fe.columns),W(Y,z,te,fe.columns)});else for(var L=-1,q=ge[0],ee=function(){var fe=L;if(q){Y.applyStyles(Y.userStyles);var ae=q.columns;L>=0?J(Y,z,X,te,ae,!0):E(Y,z,te,ae),fe=V(Y,z,L+1,te,ae),W(Y,z,te,ae)}var Ee=fe-L;ge.slice(1).forEach(function(we){Y.applyStyles(Y.userStyles),J(Y,z,X,te,we.columns,!0),V(Y,z,L+1,te,we.columns,Ee),W(Y,z,te,we.columns)}),L=fe};L<z.body.length-1;)ee()}function E(Y,z,X,te){var ge=z.settings;Y.applyStyles(Y.userStyles),(ge.showHead==="firstPage"||ge.showHead==="everyPage")&&z.head.forEach(function(ue){return Z(Y,z,ue,X,te)})}function j(Y,z,X,te,ge){Y.applyStyles(Y.userStyles),z.body.forEach(function(ue,L){var q=L===z.body.length-1;M(Y,z,ue,q,X,te,ge)})}function V(Y,z,X,te,ge,ue){Y.applyStyles(Y.userStyles),ue=ue??z.body.length;var L=Math.min(X+ue,z.body.length),q=-1;return z.body.slice(X,L).forEach(function(ee,fe){var ae=X+fe===z.body.length-1,Ee=Q(Y,z,ae,te);ee.canEntireRowFit(Ee,ge)&&(Z(Y,z,ee,te,ge),q=X+fe)}),q}function W(Y,z,X,te){var ge=z.settings;Y.applyStyles(Y.userStyles),(ge.showFoot==="lastPage"||ge.showFoot==="everyPage")&&z.foot.forEach(function(ue){return Z(Y,z,ue,X,te)})}function ie(Y,z,X){var te=X.getLineHeight(Y.styles.fontSize),ge=Y.padding("vertical"),ue=Math.floor((z-ge)/te);return Math.max(0,ue)}function B(Y,z,X,te){var ge={};Y.spansMultiplePages=!0,Y.height=0;for(var ue=0,L=0,q=X.columns;L<q.length;L++){var ee=q[L],fe=Y.cells[ee.index];if(fe){Array.isArray(fe.text)||(fe.text=[fe.text]);var ae=new N.Cell(fe.raw,fe.styles,fe.section);ae=(0,v.assign)(ae,fe),ae.text=[];var Ee=ie(fe,z,te);fe.text.length>Ee&&(ae.text=fe.text.splice(Ee,fe.text.length));var we=te.scaleFactor(),xe=te.getLineHeightFactor();fe.contentHeight=fe.getContentHeight(we,xe),fe.contentHeight>=z&&(fe.contentHeight=z,ae.styles.minCellHeight-=z),fe.contentHeight>Y.height&&(Y.height=fe.contentHeight),ae.contentHeight=ae.getContentHeight(we,xe),ae.contentHeight>ue&&(ue=ae.contentHeight),ge[ee.index]=ae}}var Me=new N.Row(Y.raw,-1,Y.section,ge,!0);Me.height=ue;for(var _e=0,Qe=X.columns;_e<Qe.length;_e++){var ee=Qe[_e],ae=Me.cells[ee.index];ae&&(ae.height=Me.height);var fe=Y.cells[ee.index];fe&&(fe.height=Y.height)}return Me}function R(Y,z,X,te){var ge=Y.pageSize().height,ue=te.settings.margin,L=ue.top+ue.bottom,q=ge-L;z.section==="body"&&(q-=te.getHeadHeight(te.columns)+te.getFootHeight(te.columns));var ee=z.getMinimumRowHeight(te.columns,Y),fe=ee<X;if(ee>q)return console.error("Will not be able to print row ".concat(z.index," correctly since it's minimum height is larger than page height")),!0;if(!fe)return!1;var ae=z.hasRowSpan(te.columns),Ee=z.getMaxCellHeight(te.columns)>q;return Ee?(ae&&console.error("The content of row ".concat(z.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(ae||te.settings.rowPageBreak==="avoid")}function M(Y,z,X,te,ge,ue,L){var q=Q(Y,z,te,ue);if(X.canEntireRowFit(q,L))Z(Y,z,X,ue,L);else if(R(Y,X,q,z)){var ee=B(X,q,z,Y);Z(Y,z,X,ue,L),J(Y,z,ge,ue,L),M(Y,z,ee,te,ge,ue,L)}else J(Y,z,ge,ue,L),M(Y,z,X,te,ge,ue,L)}function Z(Y,z,X,te,ge){te.x=z.settings.margin.left;for(var ue=0,L=ge;ue<L.length;ue++){var q=L[ue],ee=X.cells[q.index];if(!ee){te.x+=q.width;continue}Y.applyStyles(ee.styles),ee.x=te.x,ee.y=te.y;var fe=z.callCellHooks(Y,z.hooks.willDrawCell,ee,X,q,te);if(fe===!1){te.x+=q.width;continue}F(Y,ee,te);var ae=ee.getTextPos();(0,O.default)(ee.text,ae.x,ae.y,{halign:ee.styles.halign,valign:ee.styles.valign,maxWidth:Math.ceil(ee.width-ee.padding("left")-ee.padding("right"))},Y.getDocument()),z.callCellHooks(Y,z.hooks.didDrawCell,ee,X,q,te),te.x+=q.width}te.y+=X.height}function F(Y,z,X){var te=z.styles;if(Y.getDocument().setFillColor(Y.getDocument().getFillColor()),typeof te.lineWidth=="number"){var ge=(0,A.getFillStyle)(te.lineWidth,te.fillColor);ge&&Y.rect(z.x,X.y,z.width,z.height,ge)}else typeof te.lineWidth=="object"&&(te.fillColor&&Y.rect(z.x,X.y,z.width,z.height,"F"),k(Y,z,X,te.lineWidth))}function k(Y,z,X,te){var ge,ue,L,q;te.top&&(ge=X.x,ue=X.y,L=X.x+z.width,q=X.y,te.right&&(L+=.5*te.right),te.left&&(ge-=.5*te.left),ee(te.top,ge,ue,L,q)),te.bottom&&(ge=X.x,ue=X.y+z.height,L=X.x+z.width,q=X.y+z.height,te.right&&(L+=.5*te.right),te.left&&(ge-=.5*te.left),ee(te.bottom,ge,ue,L,q)),te.left&&(ge=X.x,ue=X.y,L=X.x,q=X.y+z.height,te.top&&(ue-=.5*te.top),te.bottom&&(q+=.5*te.bottom),ee(te.left,ge,ue,L,q)),te.right&&(ge=X.x+z.width,ue=X.y,L=X.x+z.width,q=X.y+z.height,te.top&&(ue-=.5*te.top),te.bottom&&(q+=.5*te.bottom),ee(te.right,ge,ue,L,q));function ee(fe,ae,Ee,we,xe){Y.getDocument().setLineWidth(fe),Y.getDocument().line(ae,Ee,we,xe,"S")}}function Q(Y,z,X,te){var ge=z.settings.margin.bottom,ue=z.settings.showFoot;return(ue==="everyPage"||ue==="lastPage"&&X)&&(ge+=z.getFootHeight(z.columns)),Y.pageSize().height-te.y-ge}function J(Y,z,X,te,ge,ue){ge===void 0&&(ge=[]),ue===void 0&&(ue=!1),Y.applyStyles(Y.userStyles),z.settings.showFoot==="everyPage"&&!ue&&z.foot.forEach(function(q){return Z(Y,z,q,te,ge)}),z.callEndPageHooks(Y,te);var L=z.settings.margin;(0,A.addTableBorder)(Y,z,X,te),G(Y),z.pageNumber++,z.pageCount++,te.x=L.left,te.y=L.top,X.y=L.top,z.callWillDrawPageHooks(Y,te),z.settings.showHead==="everyPage"&&(z.head.forEach(function(q){return Z(Y,z,q,te,ge)}),Y.applyStyles(Y.userStyles))}g.addPage=J;function G(Y){var z=Y.pageNumber();Y.setPage(z+1);var X=Y.pageNumber();return X===z?(Y.addPage(),!0):!1}},224:function(m,g,x){Object.defineProperty(g,"__esModule",{value:!0}),g.calculateAllColumnsCanFitInPage=void 0;var A=x(420);function N(v,O,D){var P;D===void 0&&(D={});var C=(0,A.getPageAvailableWidth)(v,O),E=new Map,j=[],V=[],W=[];O.settings.horizontalPageBreakRepeat,Array.isArray(O.settings.horizontalPageBreakRepeat)?W=O.settings.horizontalPageBreakRepeat:(typeof O.settings.horizontalPageBreakRepeat=="string"||typeof O.settings.horizontalPageBreakRepeat=="number")&&(W=[O.settings.horizontalPageBreakRepeat]),W.forEach(function(M){var Z=O.columns.find(function(F){return F.dataKey===M||F.index===M});Z&&!E.has(Z.index)&&(E.set(Z.index,!0),j.push(Z.index),V.push(O.columns[Z.index]),C-=Z.wrappedWidth)});for(var ie=!0,B=(P=D==null?void 0:D.start)!==null&&P!==void 0?P:0;B<O.columns.length;){if(E.has(B)){B++;continue}var R=O.columns[B].wrappedWidth;if(ie||C>=R)ie=!1,j.push(B),V.push(O.columns[B]),C-=R;else break;B++}return{colIndexes:j,columns:V,lastIndex:B-1}}function T(v,O){for(var D=[],P=0;P<O.columns.length;P++){var C=N(v,O,{start:P});C.columns.length&&(D.push(C),P=C.lastIndex)}return D}g.calculateAllColumnsCanFitInPage=T},324:function(m,g,x){Object.defineProperty(g,"__esModule",{value:!0}),g.ellipsize=g.resizeColumns=g.calculateWidths=void 0;var A=x(420);function N(j,V){T(j,V);var W=[],ie=0;V.columns.forEach(function(R){var M=R.getMaxCustomCellWidth(V);M?R.width=M:(R.width=R.wrappedWidth,W.push(R)),ie+=R.width});var B=V.getWidth(j.pageSize().width)-ie;B&&(B=v(W,B,function(R){return Math.max(R.minReadableWidth,R.minWidth)})),B&&(B=v(W,B,function(R){return R.minWidth})),B=Math.abs(B),!V.settings.horizontalPageBreak&&B>.1/j.scaleFactor()&&(B=B<1?B:Math.round(B),console.warn("Of the table content, ".concat(B," units width could not fit page"))),D(V),P(V,j),O(V)}g.calculateWidths=N;function T(j,V){var W=j.scaleFactor(),ie=V.settings.horizontalPageBreak,B=(0,A.getPageAvailableWidth)(j,V);V.allRows().forEach(function(R){for(var M=0,Z=V.columns;M<Z.length;M++){var F=Z[M],k=R.cells[F.index];if(k){var Q=V.hooks.didParseCell;V.callCellHooks(j,Q,k,R,F,null);var J=k.padding("horizontal");k.contentWidth=(0,A.getStringWidth)(k.text,k.styles,j)+J;var G=(0,A.getStringWidth)(k.text.join(" ").split(/[^\S\u00A0]+/),k.styles,j);if(k.minReadableWidth=G+k.padding("horizontal"),typeof k.styles.cellWidth=="number")k.minWidth=k.styles.cellWidth,k.wrappedWidth=k.styles.cellWidth;else if(k.styles.cellWidth==="wrap"||ie===!0)k.contentWidth>B?(k.minWidth=B,k.wrappedWidth=B):(k.minWidth=k.contentWidth,k.wrappedWidth=k.contentWidth);else{var Y=10/W;k.minWidth=k.styles.minCellWidth||Y,k.wrappedWidth=k.contentWidth,k.minWidth>k.wrappedWidth&&(k.wrappedWidth=k.minWidth)}}}}),V.allRows().forEach(function(R){for(var M=0,Z=V.columns;M<Z.length;M++){var F=Z[M],k=R.cells[F.index];if(k&&k.colSpan===1)F.wrappedWidth=Math.max(F.wrappedWidth,k.wrappedWidth),F.minWidth=Math.max(F.minWidth,k.minWidth),F.minReadableWidth=Math.max(F.minReadableWidth,k.minReadableWidth);else{var Q=V.styles.columnStyles[F.dataKey]||V.styles.columnStyles[F.index]||{},J=Q.cellWidth||Q.minCellWidth;J&&typeof J=="number"&&(F.minWidth=J,F.wrappedWidth=J)}k&&(k.colSpan>1&&!F.minWidth&&(F.minWidth=k.minWidth),k.colSpan>1&&!F.wrappedWidth&&(F.wrappedWidth=k.minWidth))}})}function v(j,V,W){for(var ie=V,B=j.reduce(function(Y,z){return Y+z.wrappedWidth},0),R=0;R<j.length;R++){var M=j[R],Z=M.wrappedWidth/B,F=ie*Z,k=M.width+F,Q=W(M),J=k<Q?Q:k;V-=J-M.width,M.width=J}if(V=Math.round(V*1e10)/1e10,V){var G=j.filter(function(Y){return V<0?Y.width>W(Y):!0});G.length&&(V=v(G,V,W))}return V}g.resizeColumns=v;function O(j){for(var V={},W=1,ie=j.allRows(),B=0;B<ie.length;B++)for(var R=ie[B],M=0,Z=j.columns;M<Z.length;M++){var F=Z[M],k=V[F.index];if(W>1)W--,delete R.cells[F.index];else if(k)k.cell.height+=R.height,W=k.cell.colSpan,delete R.cells[F.index],k.left--,k.left<=1&&delete V[F.index];else{var Q=R.cells[F.index];if(!Q)continue;if(Q.height=R.height,Q.rowSpan>1){var J=ie.length-B,G=Q.rowSpan>J?J:Q.rowSpan;V[F.index]={cell:Q,left:G,row:R}}}}}function D(j){for(var V=j.allRows(),W=0;W<V.length;W++)for(var ie=V[W],B=null,R=0,M=0,Z=0;Z<j.columns.length;Z++){var F=j.columns[Z];if(M-=1,M>1&&j.columns[Z+1])R+=F.width,delete ie.cells[F.index];else if(B){var k=B;delete ie.cells[F.index],B=null,k.width=F.width+R}else{var k=ie.cells[F.index];if(!k)continue;if(M=k.colSpan,R=0,k.colSpan>1){B=k,R+=F.width;continue}k.width=F.width+R}}}function P(j,V){for(var W={count:0,height:0},ie=0,B=j.allRows();ie<B.length;ie++){for(var R=B[ie],M=0,Z=j.columns;M<Z.length;M++){var F=Z[M],k=R.cells[F.index];if(k){V.applyStyles(k.styles,!0);var Q=k.width-k.padding("horizontal");if(k.styles.overflow==="linebreak")k.text=V.splitTextToSize(k.text,Q+1/V.scaleFactor(),{fontSize:k.styles.fontSize});else if(k.styles.overflow==="ellipsize")k.text=C(k.text,Q,k.styles,V,"...");else if(k.styles.overflow==="hidden")k.text=C(k.text,Q,k.styles,V,"");else if(typeof k.styles.overflow=="function"){var J=k.styles.overflow(k.text,Q);typeof J=="string"?k.text=[J]:k.text=J}k.contentHeight=k.getContentHeight(V.scaleFactor(),V.getLineHeightFactor());var G=k.contentHeight/k.rowSpan;k.rowSpan>1&&W.count*W.height<G*k.rowSpan?W={height:G,count:k.rowSpan}:W&&W.count>0&&W.height>G&&(G=W.height),G>R.height&&(R.height=G)}}W.count--}}function C(j,V,W,ie,B){return j.map(function(R){return E(R,V,W,ie,B)})}g.ellipsize=C;function E(j,V,W,ie,B){var R=1e4*ie.scaleFactor();if(V=Math.ceil(V*R)/R,V>=(0,A.getStringWidth)(j,W,ie))return j;for(;V<(0,A.getStringWidth)(j+B,W,ie)&&!(j.length<=1);)j=j.substring(0,j.length-1);return j.trim()+B}},964:function(m){if(typeof n>"u"){var g=new Error("Cannot find module 'undefined'");throw g.code="MODULE_NOT_FOUND",g}m.exports=n}},o={};function l(m){var g=o[m];if(g!==void 0)return g.exports;var x=o[m]={exports:{}};return r[m].call(x.exports,x,x.exports,l),x.exports}var f={};return function(){var m=f;Object.defineProperty(m,"__esModule",{value:!0}),m.Cell=m.Column=m.Row=m.Table=m.CellHookData=m.__drawTable=m.__createTable=m.applyPlugin=void 0;var g=l(340),x=l(776),A=l(664),N=l(972),T=l(260);Object.defineProperty(m,"Table",{enumerable:!0,get:function(){return T.Table}});var v=l(172);Object.defineProperty(m,"CellHookData",{enumerable:!0,get:function(){return v.CellHookData}});var O=l(260);Object.defineProperty(m,"Cell",{enumerable:!0,get:function(){return O.Cell}}),Object.defineProperty(m,"Column",{enumerable:!0,get:function(){return O.Column}}),Object.defineProperty(m,"Row",{enumerable:!0,get:function(){return O.Row}});function D(V){(0,g.default)(V)}m.applyPlugin=D;function P(V,W){var ie=(0,x.parseInput)(V,W),B=(0,N.createTable)(V,ie);(0,A.drawTable)(V,B)}function C(V,W){var ie=(0,x.parseInput)(V,W);return(0,N.createTable)(V,ie)}m.__createTable=C;function E(V,W){(0,A.drawTable)(V,W)}m.__drawTable=E;try{var j=l(964);j.jsPDF&&(j=j.jsPDF),D(j)}catch{}m.default=P}(),f}()})})(qA);const WA=e=>{const t=String(e??"");return/[",\n]/.test(t)?`"${t.replace(/"/g,'""')}"`:t},Ei=(e,t,n)=>{const o=[e.join(","),...t.map(m=>m.map(WA).join(","))].join(`
`),l=new Blob([o],{type:"text/csv;charset=utf-8;"}),f=document.createElement("a");if(f.download!==void 0){const m=URL.createObjectURL(l);f.setAttribute("href",m),f.setAttribute("download",`${n}.csv`),f.style.visibility="hidden",document.body.appendChild(f),f.click(),document.body.removeChild(f),URL.revokeObjectURL(m)}},Xd=({status:e})=>{const t={[tt.WAITING_FOR_PACKAGING]:"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300",[tt.PACKAGED_AND_WAITING_FOR_ASSIGNMENT]:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300",[tt.ASSIGNED_TO_COURIER]:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300",[tt.OUT_FOR_DELIVERY]:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900/30 dark:text-cyan-300",[tt.DELIVERED]:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",[tt.DELIVERY_FAILED]:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"};return a.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ${t[e]}`,children:e})},yl=({shipments:e,onSelect:t,priceColumnTitle:n="Price",showPackageValue:r=!1,showClientFee:o=!1,showCourierCommission:l=!1,showNetProfit:f=!1,showEditableFees:m=!1,updateShipmentFees:g})=>{const{currentUser:x,tierSettings:A,users:N}=Sn(),{t:T}=bl(),[v,O]=me.useState(null),[D,P]=me.useState(""),[C,E]=me.useState(new Date),[j,V]=me.useState({key:null,direction:"ascending"});me.useEffect(()=>{const z=setInterval(()=>E(new Date),6e4);return()=>clearInterval(z)},[]);const W=z=>{const X=Number(z.price)||0;if((x==null?void 0:x.id)===z.clientId&&(x!=null&&x.partnerTier)){const te=A.find(ge=>ge.tierName===x.partnerTier);if(te&&te.discountPercentage>0){const ge=X*(te.discountPercentage/100);return X-ge}}return X},ie=z=>![tt.DELIVERED,tt.DELIVERY_FAILED].includes(z),B=(z,X)=>{if(!ie(z.status)||!m||!g)return;O({shipmentId:z.id,field:X});const te=X==="clientFee"?z.clientFlatRateFee:z.courierCommission;P(String(te||0))},R=z=>{P(z.target.value)},M=z=>{if(v&&g){const X=parseFloat(D);if(!isNaN(X)){const te=v.field==="clientFee"?{clientFlatRateFee:X}:{courierCommission:X};g(z,te)}}O(null)},Z=(z,X)=>{z.key==="Enter"?M(X):z.key==="Escape"&&O(null)},F=z=>{if(!z.creationDate)return null;const X=new Date(z.creationDate);return Math.abs(C.getTime()-X.getTime())/(1e3*60*60*24)},k=z=>{if([tt.DELIVERED,tt.DELIVERY_FAILED].includes(z.status))return!1;const X=F(z);return X!==null&&X>2.5},Q=z=>{if([tt.DELIVERED,tt.DELIVERY_FAILED].includes(z.status))return!1;const X=F(z);return X!==null&&X>=3},J=me.useMemo(()=>{let z=[...e];return j.key!==null&&z.sort((X,te)=>{const ge=F(X)??-1,ue=F(te)??-1;return ge<ue?j.direction==="ascending"?-1:1:ge>ue?j.direction==="ascending"?1:-1:0}),z},[e,j]),G=z=>{let X="ascending";j.key===z&&j.direction==="ascending"&&(X="descending"),V({key:z,direction:X})},Y=(z,X,te)=>{if((v==null?void 0:v.shipmentId)===z.id&&(v==null?void 0:v.field)===X)return a.jsx("input",{type:"number",value:D,onChange:R,onBlur:()=>M(z.id),onKeyDown:L=>Z(L,z.id),className:"w-20 p-1 border rounded bg-background",autoFocus:!0});const ue=Number(te)||0;return a.jsxs("span",{onClick:()=>B(z,X),className:`flex items-center gap-1 ${ie(z.status)&&m?"cursor-pointer hover:text-primary":""}`,children:[ue.toFixed(2),ie(z.status)&&m&&a.jsx(Ms,{className:"w-3 h-3 text-muted-foreground"})]})};return a.jsxs("div",{className:"overflow-x-auto",children:[a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"bg-secondary",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-xs font-medium text-muted-foreground uppercase",children:"Shipment"}),a.jsx("th",{className:"px-4 py-3 text-xs font-medium text-muted-foreground uppercase",children:"Date"}),a.jsx("th",{className:"px-4 py-3 text-xs font-medium text-muted-foreground uppercase",children:"Status"}),a.jsx("th",{className:"px-4 py-3 text-xs font-medium text-muted-foreground uppercase cursor-pointer",onClick:()=>G("daysInPhase"),children:"Duration"}),r&&a.jsx("th",{className:"px-4 py-3 text-xs font-medium text-muted-foreground uppercase",children:n}),o&&a.jsx("th",{className:"px-4 py-3 text-xs font-medium text-muted-foreground uppercase",children:"Client Fee"}),l&&a.jsx("th",{className:"px-4 py-3 text-xs font-medium text-muted-foreground uppercase",children:"Courier Comm."}),f&&a.jsx("th",{className:"px-4 py-3 text-xs font-medium text-muted-foreground uppercase",children:"Net Profit"})]})}),a.jsx("tbody",{className:"divide-y divide-border",children:J.map(z=>{const X=Number(z.clientFlatRateFee)||0,te=Number(z.courierCommission)||0,ge=X-te,ue=F(z),L=Number(z.price)||0,q=W(z),ee=k(z),fe=Q(z);return a.jsxs("tr",{onClick:()=>t==null?void 0:t(z),className:`
                                    ${t?"cursor-pointer":""} 
                                    ${fe?"bg-red-50 dark:bg-red-950/20 hover:bg-red-100 dark:hover:bg-red-950/30":ee?"bg-orange-50 dark:bg-orange-950/20 hover:bg-orange-100 dark:hover:bg-orange-950/30":"hover:bg-accent"}
                                `,children:[a.jsxs("td",{className:"px-4 py-3",children:[a.jsx("p",{className:"font-mono text-sm font-semibold text-foreground",children:z.id}),a.jsx("p",{className:"text-xs text-muted-foreground",children:z.recipientName})]}),a.jsx("td",{className:"px-4 py-3 text-sm text-muted-foreground",children:new Date(z.creationDate).toLocaleDateString()}),a.jsx("td",{className:"px-4 py-3",children:a.jsx(Xd,{status:z.status})}),a.jsx("td",{className:"px-4 py-3 text-sm",children:ue!==null&&a.jsxs("div",{className:`flex items-center gap-2 ${fe?"text-red-600 dark:text-red-400 font-semibold":ee?"text-orange-600 dark:text-orange-400 font-semibold":"text-muted-foreground"}`,children:[a.jsx(du,{className:"w-4 h-4"}),a.jsxs("span",{className:"font-mono",children:[ue.toFixed(1)," days"]}),fe&&a.jsx("span",{className:"text-xs bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200 px-1 rounded",children:"OVERDUE"}),ee&&!fe&&a.jsx("span",{className:"text-xs bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200 px-1 rounded",children:"WARNING"})]})}),r&&a.jsx("td",{className:"px-4 py-3 font-mono font-semibold text-primary",children:a.jsxs("div",{children:[(z.paymentMethod==="Transfer"?0:q).toFixed(2),q<L&&(x==null?void 0:x.id)===z.clientId&&a.jsx("div",{className:"text-xs text-muted-foreground line-through",children:L.toFixed(2)})]})}),o&&a.jsx("td",{className:"px-4 py-3 font-mono text-green-600 dark:text-green-400",children:Y(z,"clientFee",z.clientFlatRateFee)}),l&&a.jsx("td",{className:"px-4 py-3 font-mono text-red-600 dark:text-red-400",children:Y(z,"courierCommission",z.courierCommission)}),f&&a.jsx("td",{className:`px-4 py-3 font-mono font-bold ${ge>=0?"text-foreground":"text-red-600 dark:text-red-400"}`,children:(Number(ge)||0).toFixed(2)})]},z.id)})})]}),e.length===0&&a.jsxs("div",{className:"text-center py-16 text-muted-foreground",children:[a.jsx("p",{className:"font-semibold",children:"No Shipments Found"}),a.jsx("p",{className:"text-sm",children:"There are no shipments matching the current criteria."})]})]})},YA=e=>{if([tt.DELIVERED,tt.DELIVERY_FAILED].includes(e.status))return!1;const t=new Date,n=new Date(e.creationDate);return Math.abs(t.getTime()-n.getTime())/(1e3*60*60*24)>2.5},XA=({onSelectShipment:e})=>{const{currentUser:t,shipments:n,users:r,updateShipmentFees:o,getCourierName:l,hasPermission:f}=Sn(),[m,g]=me.useState(""),[x,A]=me.useState("all"),[N,T]=me.useState("all"),[v,O]=me.useState(""),[D,P]=me.useState(!1),C=r.filter(M=>(M.roles||[]).includes(zt.CLIENT)),E=f(Ut.VIEW_ALL_SHIPMENTS),j=f(Ut.VIEW_OWN_SHIPMENTS),V=f(Ut.VIEW_ADMIN_FINANCIALS),W=t==null?void 0:t.roles.includes(zt.ASSIGNING_USER),ie=t==null?void 0:t.roles.includes(zt.SUPER_USER);if(!t||!E&&!j)return a.jsx("div",{className:"p-8 text-center",children:"Access Denied."});const B=me.useMemo(()=>{let M=E?n:n.filter(Z=>Z.clientId===t.id);if(v&&(M=M.filter(Z=>Z.creationDate.startsWith(v))),m.trim()){const Z=m.trim().toLowerCase();M=M.filter(F=>F.id.toLowerCase().includes(Z)||F.recipientName.toLowerCase().includes(Z))}return N!=="all"&&(M=M.filter(Z=>Z.status===N)),D&&(M=M.filter(YA)),E&&x!=="all"&&(M=M.filter(Z=>Z.clientId===x)),M.sort((Z,F)=>new Date(F.creationDate).getTime()-new Date(Z.creationDate).getTime())},[t,n,v,m,x,N,E,D]),R=()=>{if(!t)return;const M=B;if(E){const Z=["ID","Client","Recipient","Recipient Phone","Date","Status","Total COD (EGP)","Package Value (EGP)"];ie||Z.push("Client Fee (EGP)");const F=M.map(k=>{const Q=Number(k.clientFlatRateFee)||0;Number(k.courierCommission);const J=Number(k.price)||0,G=Number(k.packageValue)||0,Y=[k.id,k.clientName,k.recipientName,k.recipientPhone,new Date(k.creationDate).toLocaleDateString(),k.status,(Number(J)||0).toFixed(2),(Number(G)||0).toFixed(2)];return ie||Y.push((Number(Q)||0).toFixed(2)),Y});Ei(Z,F,"All_Shipments_Report")}else if(j){const Z=["ID","Recipient","Date","Status","Price (EGP)"],F=M.map(k=>[k.id,k.recipientName,new Date(k.creationDate).toLocaleDateString(),k.status,(Number(k.price)||0).toFixed(2)]);Ei(Z,F,`Client_Shipments_${t.name.replace(/\s/g,"_")}`)}};return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"flex justify-between items-center mb-4",children:a.jsx("h2",{className:"text-2xl font-bold text-foreground",children:E?"All Shipments":"My Shipments"})}),a.jsxs("div",{className:"mb-6 card flex flex-col lg:flex-row gap-4 items-center flex-wrap",children:[a.jsx("div",{className:"flex-grow w-full lg:w-auto",children:a.jsx("input",{type:"text",placeholder:E?"Search by Shipment ID or Recipient...":"Search by ID or Recipient...",value:m,onChange:M=>g(M.target.value),className:"w-full px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background"})}),E&&a.jsx("div",{className:"flex-grow w-full lg:w-auto",children:a.jsxs("select",{value:x,onChange:M=>A(M.target.value==="all"?"all":Number(M.target.value)),className:"w-full px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background",children:[a.jsx("option",{value:"all",children:"All Clients"}),C.map(M=>a.jsx("option",{value:M.id,children:M.name},M.id))]})}),a.jsx("div",{className:"flex-grow w-full lg:w-auto",children:a.jsxs("select",{value:N,onChange:M=>T(M.target.value),className:"w-full px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background",children:[a.jsx("option",{value:"all",children:"All Statuses"}),Object.values(tt).map(M=>a.jsx("option",{value:M,children:M},M))]})}),a.jsxs("div",{className:"flex items-center gap-2 w-full lg:w-auto",children:[a.jsx("input",{type:"date",value:v,onChange:M=>O(M.target.value),className:"w-full px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background","aria-label":"Filter by creation date"}),v&&a.jsx("button",{onClick:()=>O(""),className:"px-4 py-2 text-sm font-semibold text-muted-foreground rounded-lg hover:bg-accent transition","aria-label":"Clear date filter",children:"Clear"})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",id:"overdue-filter",checked:D,onChange:M=>P(M.target.checked),className:"h-4 w-4 rounded border-border text-primary focus:ring-primary"}),a.jsx("label",{htmlFor:"overdue-filter",className:"ml-2 text-sm font-medium text-foreground",children:"Show Overdue Only"})]}),a.jsx("div",{className:"lg:ml-auto w-full lg:w-auto",children:a.jsxs("button",{onClick:R,className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition",children:[a.jsx(Ki,{className:"w-5 h-5"}),"Export as CSV"]})})]}),a.jsx("div",{className:"card overflow-hidden",children:a.jsx(yl,{shipments:B,onSelect:e,showPackageValue:W,priceColumnTitle:W?"Total COD":"Price",showClientFee:!ie,showCourierCommission:!1,showNetProfit:!1,showEditableFees:V,updateShipmentFees:V?o:void 0})})]})};var Lv={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(e,t){((n,r)=>{e.exports=r()})(eo,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},o,l=!r.document&&!!r.postMessage,f=r.IS_PAPA_WORKER||!1,m={},g=0,x={};function A(R){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(M){var Z=W(M);Z.chunkSize=parseInt(Z.chunkSize),M.step||M.chunk||(Z.chunkSize=null),this._handle=new D(Z),(this._handle.streamer=this)._config=Z}).call(this,R),this.parseChunk=function(M,Z){var F=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<F){let Q=this._config.newline;Q||(k=this._config.quoteChar||'"',Q=this._handle.guessLineEndings(M,k)),M=[...M.split(Q).slice(F)].join(Q)}this.isFirstChunk&&B(this._config.beforeFirstChunk)&&(k=this._config.beforeFirstChunk(M))!==void 0&&(M=k),this.isFirstChunk=!1,this._halted=!1;var F=this._partialLine+M,k=(this._partialLine="",this._handle.parse(F,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(M=k.meta.cursor,F=(this._finished||(this._partialLine=F.substring(M-this._baseIndex),this._baseIndex=M),k&&k.data&&(this._rowCount+=k.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),f)r.postMessage({results:k,workerId:x.WORKER_ID,finished:F});else if(B(this._config.chunk)&&!Z){if(this._config.chunk(k,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=k=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(k.data),this._completeResults.errors=this._completeResults.errors.concat(k.errors),this._completeResults.meta=k.meta),this._completed||!F||!B(this._config.complete)||k&&k.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),F||k&&k.meta.paused||this._nextChunk(),k}this._halted=!0},this._sendError=function(M){B(this._config.error)?this._config.error(M):f&&this._config.error&&r.postMessage({workerId:x.WORKER_ID,error:M,finished:!1})}}function N(R){var M;(R=R||{}).chunkSize||(R.chunkSize=x.RemoteChunkSize),A.call(this,R),this._nextChunk=l?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(Z){this._input=Z,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(M=new XMLHttpRequest,this._config.withCredentials&&(M.withCredentials=this._config.withCredentials),l||(M.onload=ie(this._chunkLoaded,this),M.onerror=ie(this._chunkError,this)),M.open(this._config.downloadRequestBody?"POST":"GET",this._input,!l),this._config.downloadRequestHeaders){var Z,F=this._config.downloadRequestHeaders;for(Z in F)M.setRequestHeader(Z,F[Z])}var k;this._config.chunkSize&&(k=this._start+this._config.chunkSize-1,M.setRequestHeader("Range","bytes="+this._start+"-"+k));try{M.send(this._config.downloadRequestBody)}catch(Q){this._chunkError(Q.message)}l&&M.status===0&&this._chunkError()}},this._chunkLoaded=function(){M.readyState===4&&(M.status<200||400<=M.status?this._chunkError():(this._start+=this._config.chunkSize||M.responseText.length,this._finished=!this._config.chunkSize||this._start>=(Z=>(Z=Z.getResponseHeader("Content-Range"))!==null?parseInt(Z.substring(Z.lastIndexOf("/")+1)):-1)(M),this.parseChunk(M.responseText)))},this._chunkError=function(Z){Z=M.statusText||Z,this._sendError(new Error(Z))}}function T(R){(R=R||{}).chunkSize||(R.chunkSize=x.LocalChunkSize),A.call(this,R);var M,Z,F=typeof FileReader<"u";this.stream=function(k){this._input=k,Z=k.slice||k.webkitSlice||k.mozSlice,F?((M=new FileReader).onload=ie(this._chunkLoaded,this),M.onerror=ie(this._chunkError,this)):M=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var k=this._input,Q=(this._config.chunkSize&&(Q=Math.min(this._start+this._config.chunkSize,this._input.size),k=Z.call(k,this._start,Q)),M.readAsText(k,this._config.encoding));F||this._chunkLoaded({target:{result:Q}})},this._chunkLoaded=function(k){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(k.target.result)},this._chunkError=function(){this._sendError(M.error)}}function v(R){var M;A.call(this,R=R||{}),this.stream=function(Z){return M=Z,this._nextChunk()},this._nextChunk=function(){var Z,F;if(!this._finished)return Z=this._config.chunkSize,M=Z?(F=M.substring(0,Z),M.substring(Z)):(F=M,""),this._finished=!M,this.parseChunk(F)}}function O(R){A.call(this,R=R||{});var M=[],Z=!0,F=!1;this.pause=function(){A.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){A.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(k){this._input=k,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){F&&M.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),M.length?this.parseChunk(M.shift()):Z=!0},this._streamData=ie(function(k){try{M.push(typeof k=="string"?k:k.toString(this._config.encoding)),Z&&(Z=!1,this._checkIsFinished(),this.parseChunk(M.shift()))}catch(Q){this._streamError(Q)}},this),this._streamError=ie(function(k){this._streamCleanUp(),this._sendError(k)},this),this._streamEnd=ie(function(){this._streamCleanUp(),F=!0,this._streamData("")},this),this._streamCleanUp=ie(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function D(R){var M,Z,F,k,Q=Math.pow(2,53),J=-Q,G=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,Y=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,z=this,X=0,te=0,ge=!1,ue=!1,L=[],q={data:[],errors:[],meta:{}};function ee(we){return R.skipEmptyLines==="greedy"?we.join("").trim()==="":we.length===1&&we[0].length===0}function fe(){if(q&&F&&(Ee("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+x.DefaultDelimiter+"'"),F=!1),R.skipEmptyLines&&(q.data=q.data.filter(function(_e){return!ee(_e)})),ae()){let _e=function(Qe,Be){B(R.transformHeader)&&(Qe=R.transformHeader(Qe,Be)),L.push(Qe)};if(q)if(Array.isArray(q.data[0])){for(var we=0;ae()&&we<q.data.length;we++)q.data[we].forEach(_e);q.data.splice(0,1)}else q.data.forEach(_e)}function xe(_e,Qe){for(var Be=R.header?{}:[],ft=0;ft<_e.length;ft++){var ke=ft,he=_e[ft],he=((ot,ze)=>(Pe=>(R.dynamicTypingFunction&&R.dynamicTyping[Pe]===void 0&&(R.dynamicTyping[Pe]=R.dynamicTypingFunction(Pe)),(R.dynamicTyping[Pe]||R.dynamicTyping)===!0))(ot)?ze==="true"||ze==="TRUE"||ze!=="false"&&ze!=="FALSE"&&((Pe=>{if(G.test(Pe)&&(Pe=parseFloat(Pe),J<Pe&&Pe<Q))return 1})(ze)?parseFloat(ze):Y.test(ze)?new Date(ze):ze===""?null:ze):ze)(ke=R.header?ft>=L.length?"__parsed_extra":L[ft]:ke,he=R.transform?R.transform(he,ke):he);ke==="__parsed_extra"?(Be[ke]=Be[ke]||[],Be[ke].push(he)):Be[ke]=he}return R.header&&(ft>L.length?Ee("FieldMismatch","TooManyFields","Too many fields: expected "+L.length+" fields but parsed "+ft,te+Qe):ft<L.length&&Ee("FieldMismatch","TooFewFields","Too few fields: expected "+L.length+" fields but parsed "+ft,te+Qe)),Be}var Me;q&&(R.header||R.dynamicTyping||R.transform)&&(Me=1,!q.data.length||Array.isArray(q.data[0])?(q.data=q.data.map(xe),Me=q.data.length):q.data=xe(q.data,0),R.header&&q.meta&&(q.meta.fields=L),te+=Me)}function ae(){return R.header&&L.length===0}function Ee(we,xe,Me,_e){we={type:we,code:xe,message:Me},_e!==void 0&&(we.row=_e),q.errors.push(we)}B(R.step)&&(k=R.step,R.step=function(we){q=we,ae()?fe():(fe(),q.data.length!==0&&(X+=we.data.length,R.preview&&X>R.preview?Z.abort():(q.data=q.data[0],k(q,z))))}),this.parse=function(we,xe,Me){var _e=R.quoteChar||'"',_e=(R.newline||(R.newline=this.guessLineEndings(we,_e)),F=!1,R.delimiter?B(R.delimiter)&&(R.delimiter=R.delimiter(we),q.meta.delimiter=R.delimiter):((_e=((Qe,Be,ft,ke,he)=>{var ot,ze,Pe,ct;he=he||[",","	","|",";",x.RECORD_SEP,x.UNIT_SEP];for(var We=0;We<he.length;We++){for(var mt,Ue=he[We],it=0,Oe=0,Ze=0,pt=(Pe=void 0,new C({comments:ke,delimiter:Ue,newline:Be,preview:10}).parse(Qe)),St=0;St<pt.data.length;St++)ft&&ee(pt.data[St])?Ze++:(mt=pt.data[St].length,Oe+=mt,Pe===void 0?Pe=mt:0<mt&&(it+=Math.abs(mt-Pe),Pe=mt));0<pt.data.length&&(Oe/=pt.data.length-Ze),(ze===void 0||it<=ze)&&(ct===void 0||ct<Oe)&&1.99<Oe&&(ze=it,ot=Ue,ct=Oe)}return{successful:!!(R.delimiter=ot),bestDelimiter:ot}})(we,R.newline,R.skipEmptyLines,R.comments,R.delimitersToGuess)).successful?R.delimiter=_e.bestDelimiter:(F=!0,R.delimiter=x.DefaultDelimiter),q.meta.delimiter=R.delimiter),W(R));return R.preview&&R.header&&_e.preview++,M=we,Z=new C(_e),q=Z.parse(M,xe,Me),fe(),ge?{meta:{paused:!0}}:q||{meta:{paused:!1}}},this.paused=function(){return ge},this.pause=function(){ge=!0,Z.abort(),M=B(R.chunk)?"":M.substring(Z.getCharIndex())},this.resume=function(){z.streamer._halted?(ge=!1,z.streamer.parseChunk(M,!0)):setTimeout(z.resume,3)},this.aborted=function(){return ue},this.abort=function(){ue=!0,Z.abort(),q.meta.aborted=!0,B(R.complete)&&R.complete(q),M=""},this.guessLineEndings=function(Qe,_e){Qe=Qe.substring(0,1048576);var _e=new RegExp(P(_e)+"([^]*?)"+P(_e),"gm"),Me=(Qe=Qe.replace(_e,"")).split("\r"),_e=Qe.split(`
`),Qe=1<_e.length&&_e[0].length<Me[0].length;if(Me.length===1||Qe)return`
`;for(var Be=0,ft=0;ft<Me.length;ft++)Me[ft][0]===`
`&&Be++;return Be>=Me.length/2?`\r
`:"\r"}}function P(R){return R.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function C(R){var M=(R=R||{}).delimiter,Z=R.newline,F=R.comments,k=R.step,Q=R.preview,J=R.fastMode,G=null,Y=!1,z=R.quoteChar==null?'"':R.quoteChar,X=z;if(R.escapeChar!==void 0&&(X=R.escapeChar),(typeof M!="string"||-1<x.BAD_DELIMITERS.indexOf(M))&&(M=","),F===M)throw new Error("Comment character same as delimiter");F===!0?F="#":(typeof F!="string"||-1<x.BAD_DELIMITERS.indexOf(F))&&(F=!1),Z!==`
`&&Z!=="\r"&&Z!==`\r
`&&(Z=`
`);var te=0,ge=!1;this.parse=function(ue,L,q){if(typeof ue!="string")throw new Error("Input must be a string");var ee=ue.length,fe=M.length,ae=Z.length,Ee=F.length,we=B(k),xe=[],Me=[],_e=[],Qe=te=0;if(!ue)return it();if(J||J!==!1&&ue.indexOf(z)===-1){for(var Be=ue.split(Z),ft=0;ft<Be.length;ft++){if(_e=Be[ft],te+=_e.length,ft!==Be.length-1)te+=Z.length;else if(q)return it();if(!F||_e.substring(0,Ee)!==F){if(we){if(xe=[],ct(_e.split(M)),Oe(),ge)return it()}else ct(_e.split(M));if(Q&&Q<=ft)return xe=xe.slice(0,Q),it(!0)}}return it()}for(var ke=ue.indexOf(M,te),he=ue.indexOf(Z,te),ot=new RegExp(P(X)+P(z),"g"),ze=ue.indexOf(z,te);;)if(ue[te]===z)for(ze=te,te++;;){if((ze=ue.indexOf(z,ze+1))===-1)return q||Me.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:xe.length,index:te}),mt();if(ze===ee-1)return mt(ue.substring(te,ze).replace(ot,z));if(z===X&&ue[ze+1]===X)ze++;else if(z===X||ze===0||ue[ze-1]!==X){ke!==-1&&ke<ze+1&&(ke=ue.indexOf(M,ze+1));var Pe=We((he=he!==-1&&he<ze+1?ue.indexOf(Z,ze+1):he)===-1?ke:Math.min(ke,he));if(ue.substr(ze+1+Pe,fe)===M){_e.push(ue.substring(te,ze).replace(ot,z)),ue[te=ze+1+Pe+fe]!==z&&(ze=ue.indexOf(z,te)),ke=ue.indexOf(M,te),he=ue.indexOf(Z,te);break}if(Pe=We(he),ue.substring(ze+1+Pe,ze+1+Pe+ae)===Z){if(_e.push(ue.substring(te,ze).replace(ot,z)),Ue(ze+1+Pe+ae),ke=ue.indexOf(M,te),ze=ue.indexOf(z,te),we&&(Oe(),ge))return it();if(Q&&xe.length>=Q)return it(!0);break}Me.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:xe.length,index:te}),ze++}}else if(F&&_e.length===0&&ue.substring(te,te+Ee)===F){if(he===-1)return it();te=he+ae,he=ue.indexOf(Z,te),ke=ue.indexOf(M,te)}else if(ke!==-1&&(ke<he||he===-1))_e.push(ue.substring(te,ke)),te=ke+fe,ke=ue.indexOf(M,te);else{if(he===-1)break;if(_e.push(ue.substring(te,he)),Ue(he+ae),we&&(Oe(),ge))return it();if(Q&&xe.length>=Q)return it(!0)}return mt();function ct(Ze){xe.push(Ze),Qe=te}function We(Ze){var pt=0;return pt=Ze!==-1&&(Ze=ue.substring(ze+1,Ze))&&Ze.trim()===""?Ze.length:pt}function mt(Ze){return q||(Ze===void 0&&(Ze=ue.substring(te)),_e.push(Ze),te=ee,ct(_e),we&&Oe()),it()}function Ue(Ze){te=Ze,ct(_e),_e=[],he=ue.indexOf(Z,te)}function it(Ze){if(R.header&&!L&&xe.length&&!Y){var pt=xe[0],St=Object.create(null),yt=new Set(pt);let qt=!1;for(let xt=0;xt<pt.length;xt++){let hn=pt[xt];if(St[hn=B(R.transformHeader)?R.transformHeader(hn,xt):hn]){let Tt,gt=St[hn];for(;Tt=hn+"_"+gt,gt++,yt.has(Tt););yt.add(Tt),pt[xt]=Tt,St[hn]++,qt=!0,(G=G===null?{}:G)[Tt]=hn}else St[hn]=1,pt[xt]=hn;yt.add(hn)}qt&&console.warn("Duplicate headers found and renamed."),Y=!0}return{data:xe,errors:Me,meta:{delimiter:M,linebreak:Z,aborted:ge,truncated:!!Ze,cursor:Qe+(L||0),renamedHeaders:G}}}function Oe(){k(it()),xe=[],Me=[]}},this.abort=function(){ge=!0},this.getCharIndex=function(){return te}}function E(R){var M=R.data,Z=m[M.workerId],F=!1;if(M.error)Z.userError(M.error,M.file);else if(M.results&&M.results.data){var k={abort:function(){F=!0,j(M.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:V,resume:V};if(B(Z.userStep)){for(var Q=0;Q<M.results.data.length&&(Z.userStep({data:M.results.data[Q],errors:M.results.errors,meta:M.results.meta},k),!F);Q++);delete M.results}else B(Z.userChunk)&&(Z.userChunk(M.results,k,M.file),delete M.results)}M.finished&&!F&&j(M.workerId,M.results)}function j(R,M){var Z=m[R];B(Z.userComplete)&&Z.userComplete(M),Z.terminate(),delete m[R]}function V(){throw new Error("Not implemented.")}function W(R){if(typeof R!="object"||R===null)return R;var M,Z=Array.isArray(R)?[]:{};for(M in R)Z[M]=W(R[M]);return Z}function ie(R,M){return function(){R.apply(M,arguments)}}function B(R){return typeof R=="function"}return x.parse=function(R,M){var Z=(M=M||{}).dynamicTyping||!1;if(B(Z)&&(M.dynamicTypingFunction=Z,Z={}),M.dynamicTyping=Z,M.transform=!!B(M.transform)&&M.transform,!M.worker||!x.WORKERS_SUPPORTED)return Z=null,x.NODE_STREAM_INPUT,typeof R=="string"?(R=(F=>F.charCodeAt(0)!==65279?F:F.slice(1))(R),Z=new(M.download?N:v)(M)):R.readable===!0&&B(R.read)&&B(R.on)?Z=new O(M):(r.File&&R instanceof File||R instanceof Object)&&(Z=new T(M)),Z.stream(R);(Z=(()=>{var F;return!!x.WORKERS_SUPPORTED&&(F=(()=>{var k=r.URL||r.webkitURL||null,Q=n.toString();return x.BLOB_URL||(x.BLOB_URL=k.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",Q,")();"],{type:"text/javascript"})))})(),(F=new r.Worker(F)).onmessage=E,F.id=g++,m[F.id]=F)})()).userStep=M.step,Z.userChunk=M.chunk,Z.userComplete=M.complete,Z.userError=M.error,M.step=B(M.step),M.chunk=B(M.chunk),M.complete=B(M.complete),M.error=B(M.error),delete M.worker,Z.postMessage({input:R,config:M,workerId:Z.id})},x.unparse=function(R,M){var Z=!1,F=!0,k=",",Q=`\r
`,J='"',G=J+J,Y=!1,z=null,X=!1,te=((()=>{if(typeof M=="object"){if(typeof M.delimiter!="string"||x.BAD_DELIMITERS.filter(function(L){return M.delimiter.indexOf(L)!==-1}).length||(k=M.delimiter),typeof M.quotes!="boolean"&&typeof M.quotes!="function"&&!Array.isArray(M.quotes)||(Z=M.quotes),typeof M.skipEmptyLines!="boolean"&&typeof M.skipEmptyLines!="string"||(Y=M.skipEmptyLines),typeof M.newline=="string"&&(Q=M.newline),typeof M.quoteChar=="string"&&(J=M.quoteChar),typeof M.header=="boolean"&&(F=M.header),Array.isArray(M.columns)){if(M.columns.length===0)throw new Error("Option columns is empty");z=M.columns}M.escapeChar!==void 0&&(G=M.escapeChar+J),M.escapeFormulae instanceof RegExp?X=M.escapeFormulae:typeof M.escapeFormulae=="boolean"&&M.escapeFormulae&&(X=/^[=+\-@\t\r].*$/)}})(),new RegExp(P(J),"g"));if(typeof R=="string"&&(R=JSON.parse(R)),Array.isArray(R)){if(!R.length||Array.isArray(R[0]))return ge(null,R,Y);if(typeof R[0]=="object")return ge(z||Object.keys(R[0]),R,Y)}else if(typeof R=="object")return typeof R.data=="string"&&(R.data=JSON.parse(R.data)),Array.isArray(R.data)&&(R.fields||(R.fields=R.meta&&R.meta.fields||z),R.fields||(R.fields=Array.isArray(R.data[0])?R.fields:typeof R.data[0]=="object"?Object.keys(R.data[0]):[]),Array.isArray(R.data[0])||typeof R.data[0]=="object"||(R.data=[R.data])),ge(R.fields||[],R.data||[],Y);throw new Error("Unable to serialize unrecognized input");function ge(L,q,ee){var fe="",ae=(typeof L=="string"&&(L=JSON.parse(L)),typeof q=="string"&&(q=JSON.parse(q)),Array.isArray(L)&&0<L.length),Ee=!Array.isArray(q[0]);if(ae&&F){for(var we=0;we<L.length;we++)0<we&&(fe+=k),fe+=ue(L[we],we);0<q.length&&(fe+=Q)}for(var xe=0;xe<q.length;xe++){var Me=(ae?L:q[xe]).length,_e=!1,Qe=ae?Object.keys(q[xe]).length===0:q[xe].length===0;if(ee&&!ae&&(_e=ee==="greedy"?q[xe].join("").trim()==="":q[xe].length===1&&q[xe][0].length===0),ee==="greedy"&&ae){for(var Be=[],ft=0;ft<Me;ft++){var ke=Ee?L[ft]:ft;Be.push(q[xe][ke])}_e=Be.join("").trim()===""}if(!_e){for(var he=0;he<Me;he++){0<he&&!Qe&&(fe+=k);var ot=ae&&Ee?L[he]:he;fe+=ue(q[xe][ot],he)}xe<q.length-1&&(!ee||0<Me&&!Qe)&&(fe+=Q)}}return fe}function ue(L,q){var ee,fe;return L==null?"":L.constructor===Date?JSON.stringify(L).slice(1,25):(fe=!1,X&&typeof L=="string"&&X.test(L)&&(L="'"+L,fe=!0),ee=L.toString().replace(te,G),(fe=fe||Z===!0||typeof Z=="function"&&Z(L,q)||Array.isArray(Z)&&Z[q]||((ae,Ee)=>{for(var we=0;we<Ee.length;we++)if(-1<ae.indexOf(Ee[we]))return!0;return!1})(ee,x.BAD_DELIMITERS)||-1<ee.indexOf(k)||ee.charAt(0)===" "||ee.charAt(ee.length-1)===" ")?J+ee+J:ee)}},x.RECORD_SEP="",x.UNIT_SEP="",x.BYTE_ORDER_MARK="\uFEFF",x.BAD_DELIMITERS=["\r",`
`,'"',x.BYTE_ORDER_MARK],x.WORKERS_SUPPORTED=!l&&!!r.Worker,x.NODE_STREAM_INPUT=1,x.LocalChunkSize=10485760,x.RemoteChunkSize=5242880,x.DefaultDelimiter=",",x.Parser=C,x.ParserHandle=D,x.NetworkStreamer=N,x.FileStreamer=T,x.StringStreamer=v,x.ReadableStreamStreamer=O,r.jQuery&&((o=r.jQuery).fn.parse=function(R){var M=R.config||{},Z=[];return this.each(function(Q){if(!(o(this).prop("tagName").toUpperCase()==="INPUT"&&o(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var J=0;J<this.files.length;J++)Z.push({file:this.files[J],inputElem:this,instanceConfig:o.extend({},M)})}),F(),this;function F(){if(Z.length===0)B(R.complete)&&R.complete();else{var Q,J,G,Y,z=Z[0];if(B(R.before)){var X=R.before(z.file,z.inputElem);if(typeof X=="object"){if(X.action==="abort")return Q="AbortError",J=z.file,G=z.inputElem,Y=X.reason,void(B(R.error)&&R.error({name:Q},J,G,Y));if(X.action==="skip")return void k();typeof X.config=="object"&&(z.instanceConfig=o.extend(z.instanceConfig,X.config))}else if(X==="skip")return void k()}var te=z.instanceConfig.complete;z.instanceConfig.complete=function(ge){B(te)&&te(ge,z.file,z.inputElem),k()},x.parse(z.file,z.instanceConfig)}}function k(){Z.splice(0,1),F()}}),f&&(r.onmessage=function(R){R=R.data,x.WORKER_ID===void 0&&R&&(x.WORKER_ID=R.workerId),typeof R.input=="string"?r.postMessage({workerId:x.WORKER_ID,results:x.parse(R.input,R.config),finished:!0}):(r.File&&R.input instanceof File||R.input instanceof Object)&&(R=x.parse(R.input,R.config))&&r.postMessage({workerId:x.WORKER_ID,results:R,finished:!0})}),(N.prototype=Object.create(A.prototype)).constructor=N,(T.prototype=Object.create(A.prototype)).constructor=T,(v.prototype=Object.create(v.prototype)).constructor=v,(O.prototype=Object.create(A.prototype)).constructor=O,x})})(Lv);var ZA=Lv.exports;const jx=Ph(ZA),QA=()=>{const{currentUser:e,users:t,addShipment:n,addToast:r,calculatePriorityPrice:o,hasPermission:l,tierSettings:f}=Sn(),{t:m}=bl(),[g,x]=me.useState("single"),A=l(Ut.CREATE_SHIPMENTS_FOR_OTHERS),N=me.useMemo(()=>t.filter(Ue=>Ue.roles.includes(zt.CLIENT)),[t]),[T,v]=me.useState(A?"":String(e==null?void 0:e.id)),[O,D]=me.useState(""),[P,C]=me.useState(""),[E,j]=me.useState({street:"",city:"Cairo",zone:Rr.GreaterCairo.Cairo[0],details:""}),[V,W]=me.useState(""),[ie,B]=me.useState(Rn.COD),[R,M]=me.useState(an.STANDARD),[Z,F]=me.useState(""),[k,Q]=me.useState(""),[J,G]=me.useState(""),[Y,z]=me.useState(!1),[X,te]=me.useState(A?"":String(e==null?void 0:e.id)),[ge,ue]=me.useState(null),[L,q]=me.useState([]),[ee,fe]=me.useState([]);me.useEffect(()=>{ie===Rn.TRANSFER&&F("0")},[ie]);const ae=Ue=>/^01\d{9}$/.test(Ue)||/^1\d{9}$/.test(Ue),Ee=Ue=>Ue.length===10&&Ue.startsWith("1")?"0"+Ue:Ue,we=me.useMemo(()=>A?N.find(Ue=>Ue.id===parseInt(T)):e,[A,T,N,e]),xe=parseFloat(Z)||0,{feeBeforeDiscount:Me,discountPercentage:_e,discountAmount:Qe,finalFee:Be}=me.useMemo(()=>{if(!we)return{feeBeforeDiscount:0,discountPercentage:0,discountAmount:0,finalFee:0};const Ue=o(we.flatRateFee||0,R,we),it=we.partnerTier?f.find(St=>St.tierName===we.partnerTier):null,Oe=it?it.discountPercentage:0,Ze=Ue*(Oe/100),pt=Ue-Ze;return{feeBeforeDiscount:Ue,discountPercentage:Oe,discountAmount:Ze,finalFee:pt}},[we,R,f,o]),ft=me.useMemo(()=>{if(ie===Rn.TRANSFER){const Ue=parseFloat(J)||0;return Y?Ue+Be:Ue}return xe+Be},[ie,Be,xe,J,Y]),ke=Ue=>{if(Ue.preventDefault(),!we){r(A?"Please select a client.":"User not found.","error");return}if(!we.address||!we.address.street){r(`${we.name} does not have a complete default address in their profile.`,"error");return}if(!ae(P)){r("Phone number must be 11 digits starting with 01 or 10 digits starting with 1","error");return}const it=Ee(P),Oe={clientId:we.id,clientName:we.name,recipientName:O,recipientPhone:it,fromAddress:we.address,toAddress:E,packageDescription:V,isLargeOrder:!1,price:ft,paymentMethod:ie,priority:R,packageValue:xe,clientFlatRateFee:Be,amountReceived:ie===Rn.TRANSFER?parseFloat(k)||0:void 0,amountToCollect:ie===Rn.TRANSFER?parseFloat(J)||0:void 0};n(Oe),r("Shipment created successfully!","success"),A&&v(""),D(""),C(""),j({street:"",city:"Cairo",zone:Rr.GreaterCairo.Cairo[0],details:""}),W(""),B(Rn.COD),M(an.STANDARD),F(""),Q(""),G("")},he=Ue=>{var Ze,pt;const it=Ue.target.value,Oe=(pt=(Ze=Ue.target.options[Ue.target.selectedIndex])==null?void 0:Ze.parentElement)==null?void 0:pt.getAttribute("label");j(St=>({...St,zone:it,city:Oe==="Cairo"?"Cairo":Oe==="Giza"?"Giza":"Cairo"}))};Object.values(Rr.GreaterCairo.Cairo).concat(Object.values(Rr.GreaterCairo.Giza));const ot=Ue=>{Ue.target.files&&(ue(Ue.target.files[0]),q([]),fe([]))},ze=()=>{if(!ge){r("Please select a file to upload.","error");return}jx.parse(ge,{header:!0,skipEmptyLines:!0,complete:Ue=>{const Oe=Ue.data.map(Ze=>{let pt=String(Ze["Recipient Phone"]||"").replace(/\D/g,"");pt.length===10&&pt.startsWith("1")&&(pt="0"+pt);const St=parseFloat(Ze["Amount to Collect"])||0,yt=String(Ze["Shipping Fee Included"]).toLowerCase()==="true";return{recipientName:Ze["Recipient Name"],recipientPhone:pt,toAddress:{street:Ze["Recipient Street"],city:Ze.City||"Cairo",zone:Ze.Zone,details:Ze["Address Details"]||""},packageDescription:Ze["Package Description"],paymentMethod:Ze["Payment Method"],priority:Ze.Priority,packageValue:parseFloat(Ze["Package Value"]),amountToCollect:St,csvShippingFeeIncluded:yt}});q(Oe),Pe(Oe)}})},Pe=Ue=>{const it=Ue.map(Oe=>{const Ze=[],pt=[Rn.COD,Rn.TRANSFER],St=["Cairo","Giza"],yt=[...Rr.GreaterCairo.Cairo,...Rr.GreaterCairo.Giza];if(Oe.recipientName||Ze.push("Recipient Name is required."),!Oe.recipientPhone)Ze.push("Recipient Phone is required.");else{const qt=Oe.recipientPhone;/^01\d{9}$/.test(qt)||Ze.push("Phone must be 11 digits starting with 01 or 10 digits starting with 1 (e.g., 01000909899 or 1000909899).")}return Oe.toAddress.street||Ze.push("Recipient Street is required."),St.includes(Oe.toAddress.city)||Ze.push("City must be Cairo or Giza."),yt.includes(Oe.toAddress.zone)||Ze.push("Invalid Zone for selected city."),pt.includes(Oe.paymentMethod)||Ze.push("Invalid Payment Method. Must be COD or Transfer."),Object.values(an).includes(Oe.priority)||Ze.push("Invalid Priority."),(isNaN(Oe.packageValue)||Oe.paymentMethod===Rn.COD&&Oe.packageValue<=0)&&Ze.push("Invalid Package Value for COD."),{isValid:Ze.length===0,errors:Ze}});fe(it)},ct=()=>{const Ue=t.find(Oe=>Oe.id===parseInt(X));if(!Ue){r("Please select a client to upload for.","error");return}if(!Ue.address){r(`Client ${Ue.name} does not have a default address.`,"error");return}const it=L.filter((Oe,Ze)=>{var pt;return(pt=ee[Ze])==null?void 0:pt.isValid});if(it.length===0){r("No valid shipments to upload.","error");return}it.forEach(Oe=>{const Ze=Ue.flatRateFee||0,pt=o(Ze,Oe.priority,Ue);let St,yt=0;if(Oe.paymentMethod===Rn.TRANSFER){const hn=Oe.amountToCollect||0;yt=Oe.csvShippingFeeIncluded?hn+pt:hn,St=yt}else St=(Oe.packageValue||0)+pt;const{csvShippingFeeIncluded:qt,...xt}=Oe;n({...xt,isLargeOrder:!1,price:St,clientFlatRateFee:pt,clientId:Ue.id,clientName:Ue.name,fromAddress:Ue.address,amountToCollect:Oe.paymentMethod===Rn.TRANSFER?yt:void 0})}),r(`${it.length} shipments uploaded successfully for ${Ue.name}!`,"success"),ue(null),q([]),fe([])},We=()=>{const Ue=["Recipient Name","Recipient Phone","Recipient Street","City","Zone","Address Details","Package Description","Payment Method","Priority","Package Value","Amount to Collect","Shipping Fee Included"],it=(e==null?void 0:e.flatRateFee)||75;e&&o(it,an.STANDARD,e),e?o(it,an.URGENT,e):it*1.5,e?o(it,an.EXPRESS,e):it*2,Rr.GreaterCairo.Cairo.join(" | "),Rr.GreaterCairo.Giza.join(" | ");const Oe=[Ue,["Ahmed Hassan","01123456789","15 Tahrir Square","Cairo","Nasr City","Apartment 3, Floor 2","Electronics - Mobile Phone","COD","Standard","800.00","875.00","TRUE"],["Fatma Ali","1234567890","25 Nile Corniche","Cairo","Heliopolis","Villa 12, Ground Floor","Books and Stationery","Transfer","Urgent","300.00","350.00","TRUE"],["Mohamed Sayed","01987654321","45 New Cairo St","Cairo","New Cairo","Flat 7, Floor 4","Clothing - Jacket","COD","Express","250.00","375.00","TRUE"],["Nour Ibrahim","1555666777","78 5th Settlement Rd","Cairo","5th Settlement","Building 5, Floor 1","Home Appliances","Transfer","Standard","1200.00","0.00","FALSE"],["Omar Khaled","01444555666","12 3rd Settlement Ave","Cairo","3rd Settlement","Apartment 15, Floor 8","Sports Equipment","COD","Urgent","600.00","687.50","TRUE"],["Layla Ahmed","1333444555","33 1st Settlement Blvd","Cairo","1st Settlement","Villa 3, Second Floor","Baby Products","Transfer","Express","400.00","500.00","TRUE"],["Youssef Mahmoud","01222333444","56 Rehab City St","Cairo","Rehab City","Building 22, Floor 3","Electronics - Laptop","COD","Standard","2500.00","2575.00","TRUE"],["Maha Mostafa","1111222333","89 Madinty Blvd","Cairo","Madinty","Apartment 8, Floor 6","Beauty Products","Transfer","Urgent","150.00","225.00","TRUE"],["Karim Fathy","01999888777","67 El Shorouk Ave","Cairo","El Shorouk","Villa 7, Ground Floor","Automotive Parts","COD","Express","350.00","475.00","TRUE"],["Sara Nabil","1888777666","44 El Obour City","Cairo","El Obour","Building 11, Floor 2","Toys and Games","Transfer","Standard","180.00","0.00","FALSE"],["Tamer Adel","01777666555","23 Maadi St","Cairo","Maadi","Apartment 19, Floor 5","Health Supplements","COD","Urgent","320.00","407.50","TRUE"],["Dina Essam","1666555444","78 Zahraa El Maadi","Cairo","Zahraa El Maadi","Villa 14, First Floor","Kitchen Appliances","Transfer","Express","900.00","1025.00","TRUE"],["Hany Salah","01555444333","90 Katameya Heights","Cairo","Katameya","Building 8, Floor 4","Computer Accessories","COD","Standard","220.00","295.00","TRUE"],["Rania Gamal","1444333222","34 Mokattam Hills","Cairo","Mokattam","Apartment 6, Floor 3","Fashion Accessories","Transfer","Urgent","280.00","350.00","TRUE"],["Sherif Wael","01333222111","67 Downtown Cairo","Cairo","Downtown Cairo","Villa 9, Second Floor","Office Supplies","COD","Express","160.00","285.00","TRUE"],["Noha Tarek","1222111000","45 Garden City","Cairo","Garden City","Building 13, Floor 7","Pet Supplies","Transfer","Standard","130.00","0.00","FALSE"],["Amr Hosny","01111000999","89 Zamalek St","Cairo","Zamalek","Apartment 21, Floor 6","Music Instruments","COD","Urgent","750.00","837.50","TRUE"],["Eman Farid","1000999888","12 Shubra St","Cairo","Shubra","Building 4, Floor 1","Household Items","Transfer","Express","95.00","170.00","TRUE"],["Mahmoud Reda","01999888111","56 Abbassia Sq","Cairo","Abbassia","Apartment 11, Floor 5","Garden Tools","COD","Standard","180.00","255.00","TRUE"],["Yasmin Fouad","1888777000","78 Ain Shams","Cairo","Ain Shams","Villa 2, Ground Floor","Craft Supplies","Transfer","Urgent","140.00","215.00","TRUE"],["Ahmed Samir","01777666000","23 El Marg","Cairo","El Marg","Building 7, Floor 2","Electrical Tools","COD","Express","290.00","415.00","TRUE"],["Mariam Said","1666555000","45 Matariya","Cairo","Matariya","Apartment 14, Floor 4","Educational Books","Transfer","Standard","110.00","0.00","FALSE"],["Hassan Omar","01555444000","67 Helwan","Cairo","Helwan","Villa 6, First Floor","Medical Equipment","COD","Urgent","850.00","937.50","TRUE"],["Nadine Adham","1444333000","89 15th of May City","Cairo","15th of May City","Building 9, Floor 3","Art Supplies","Transfer","Express","200.00","275.00","TRUE"],["Khaled Ashraf","01333222000","12 New Capital","Cairo","New Administrative Capital","Apartment 25, Floor 8","Furniture","COD","Standard","1500.00","1575.00","TRUE"],["Nadia Youssef","1222111999","34 Mohandessin","Giza","Mohandessin","Building 16, Floor 6","Jewelry","Transfer","Urgent","600.00","675.00","TRUE"],["Bassam Kamal","01111000888","56 Dokki St","Giza","Dokki","Apartment 12, Floor 4","Shoes","COD","Express","320.00","445.00","TRUE"],["Reem Mansour","1000999777","78 Agouza","Giza","Agouza","Villa 8, Second Floor","Perfumes","Transfer","Standard","250.00","0.00","FALSE"],["Tarek Zaki","01999888000","90 Haram St","Giza","Haram","Building 3, Floor 1","Souvenirs","COD","Urgent","120.00","207.50","TRUE"],["Salma Nasser","1888777999","23 Faisal St","Giza","Faisal","Apartment 17, Floor 7","Mobile Accessories","Transfer","Express","85.00","160.00","TRUE"],["Mostafa Galal","01777666999","45 Giza Square","Giza","Giza Square","Villa 11, Ground Floor","Board Games","COD","Standard","95.00","170.00","TRUE"],["Hala Magdy","1666555999","67 Imbaba","Giza","Imbaba","Building 12, Floor 5","Skincare Products","Transfer","Urgent","170.00","245.00","TRUE"],["Waleed Saad","01555444999","89 Boulak El Dakrour","Giza","Boulak El Dakrour","Apartment 20, Floor 2","Phone Cases","COD","Express","45.00","170.00","TRUE"],["Dalia Fahmy","1444333999","12 Warraq","Giza","Warraq","Villa 4, First Floor","Fitness Equipment","Transfer","Standard","400.00","0.00","FALSE"],["Ayman Helmy","01333222999","34 6th October","Giza","6th of October City","Building 18, Floor 3","Video Games","COD","Urgent","280.00","367.50","TRUE"],["Ghada Sameh","1222111888","56 Sheikh Zayed","Giza","Sheikh Zayed","Apartment 9, Floor 6","Handbags","Transfer","Express","350.00","425.00","TRUE"],["Ragab Mohsen","01111000777","78 Hadayek October","Giza","Hadayek October","Villa 15, Second Floor","Tools","COD","Standard","190.00","265.00","TRUE"],["Mona Abdel","1000999666","90 Mansoureya","Giza","Mansoureya","Building 6, Floor 4","Cosmetics","Transfer","Urgent","130.00","205.00","TRUE"],["Islam Rizk","01999888666","23 Nazlet El Semman","Giza","Nazlet El Semman","Apartment 13, Floor 1","Camera Equipment","COD","Express","650.00","775.00","TRUE"],["Nesma Lotfy","1888777888","45 Maryoteya","Giza","Maryoteya","Villa 10, Ground Floor","Travel Accessories","Transfer","Standard","220.00","0.00","FALSE"],["Adel Farouk","01777666888","67 Bahariya Oasis Road","Giza","Bahariya Oasis Road","Building 14, Floor 5","Camping Gear","COD","Urgent","380.00","467.50","TRUE"]],Ze=jx.unparse(Oe),pt=new Blob([Ze],{type:"text/csv;charset=utf-8;"}),St=document.createElement("a");St.href=URL.createObjectURL(pt),St.setAttribute("download","bulk_upload_template.csv"),document.body.appendChild(St),St.click(),document.body.removeChild(St)},mt=ee.length>0&&ee.every(Ue=>Ue.isValid);return a.jsxs("div",{className:"card max-w-6xl mx-auto",children:[a.jsx("h2",{className:"text-2xl font-bold text-foreground mb-6",children:m("createShipments")}),a.jsx("div",{className:"border-b border-border mb-6",children:a.jsxs("nav",{className:"-mb-px flex space-x-6",children:[a.jsx("button",{onClick:()=>x("single"),className:`py-3 px-1 border-b-2 font-semibold text-sm ${g==="single"?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground hover:border-border"}`,children:m("createSingleShipment")}),a.jsx("button",{onClick:()=>x("bulk"),className:`py-3 px-1 border-b-2 font-semibold text-sm ${g==="bulk"?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground hover:border-border"}`,children:m("bulkUploadShipments")})]})}),g==="single"&&a.jsxs("form",{onSubmit:ke,className:"space-y-6",children:[A&&a.jsxs("div",{className:"p-4 bg-secondary rounded-lg",children:[a.jsx("label",{className:"block text-sm font-medium text-foreground mb-1",children:m("createShipmentForClient")}),a.jsxs("select",{value:T,onChange:Ue=>v(Ue.target.value),className:"w-full px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary text-foreground bg-background",required:!0,children:[a.jsx("option",{value:"",disabled:!0,children:m("selectClient")}),N.map(Ue=>a.jsx("option",{value:Ue.id,children:Ue.name},Ue.id))]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-foreground mb-1",children:m("recipientName")}),a.jsx("input",{type:"text",value:O,onChange:Ue=>D(Ue.target.value),className:"w-full px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary text-foreground bg-background",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-foreground mb-1",children:m("recipientPhone")}),a.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:P,onChange:Ue=>{const it=Ue.target.value.replace(/[^0-9]/g,"");it.length<=11&&C(it)},className:`w-full px-4 py-2 border rounded-lg focus:ring-primary focus:border-primary text-foreground bg-background ${P.length>0&&!ae(P)?"border-red-500":"border-border"}`,placeholder:"01000909899 or 1000909899",required:!0}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"11 digits starting with 01 or 10 digits starting with 1"}),P.length>0&&!ae(P)&&a.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Phone must be 11 digits starting with 01 or 10 digits starting with 1"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Recipient Street Address"}),a.jsx("input",{type:"text",value:E.street,onChange:Ue=>j(it=>({...it,street:Ue.target.value})),className:"w-full px-4 py-2 border border-border rounded-lg text-foreground bg-background",required:!0})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Zone"}),a.jsxs("select",{value:E.zone,onChange:he,className:"w-full px-4 py-2 border border-border rounded-lg text-foreground bg-background",children:[a.jsx("optgroup",{label:"Cairo",children:Rr.GreaterCairo.Cairo.map(Ue=>a.jsx("option",{value:Ue,children:Ue},Ue))}),a.jsx("optgroup",{label:"Giza",children:Rr.GreaterCairo.Giza.map(Ue=>a.jsx("option",{value:Ue,children:Ue},Ue))})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Address Details (Apt, Floor, etc.)"}),a.jsx("input",{type:"text",value:E.details,onChange:Ue=>j(it=>({...it,details:Ue.target.value})),className:"w-full px-4 py-2 border border-border rounded-lg text-foreground bg-background"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Package Description"}),a.jsx("textarea",{value:V,onChange:Ue=>W(Ue.target.value),className:"w-full px-4 py-2 border border-border rounded-lg text-foreground bg-background",rows:2,required:!0})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Payment Method"}),a.jsxs("select",{value:ie,onChange:Ue=>B(Ue.target.value),className:"w-full px-4 py-2 border border-border rounded-lg text-foreground bg-background",children:[a.jsx("option",{value:Rn.COD,children:"Cash on Delivery (COD)"}),a.jsx("option",{value:Rn.TRANSFER,children:"InstaPay (Pre-paid)"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Priority"}),a.jsx("select",{value:R,onChange:Ue=>M(Ue.target.value),className:"w-full px-4 py-2 border border-border rounded-lg text-foreground bg-background",children:Object.values(an).map(Ue=>a.jsx("option",{value:Ue,children:Ue},Ue))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Package Value (EGP)"}),a.jsx("input",{type:"number",step:"0.01",value:Z,onChange:Ue=>F(Ue.target.value),disabled:ie===Rn.TRANSFER,className:"w-full px-4 py-2 border border-border rounded-lg text-foreground bg-background",required:!0})]})]}),ie===Rn.TRANSFER&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Amount Received from Client"}),a.jsx("input",{type:"number",step:"0.01",value:k,onChange:Ue=>Q(Ue.target.value),className:"w-full px-4 py-2 border border-border rounded-lg text-foreground bg-background",placeholder:"e.g., 500",required:!0}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"The amount you already collected."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Amount to Collect from Recipient"}),a.jsx("input",{type:"number",step:"0.01",value:J,onChange:Ue=>G(Ue.target.value),className:"w-full px-4 py-2 border border-border rounded-lg text-foreground bg-background",placeholder:"e.g., 200",required:!0}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Amount courier will collect (0 if none)."})]})]}),a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded-lg",children:[a.jsx("input",{type:"checkbox",id:"includeShippingFee",checked:Y,onChange:Ue=>z(Ue.target.checked),className:"w-4 h-4 text-primary bg-background border-border rounded focus:ring-primary focus:ring-2"}),a.jsxs("label",{htmlFor:"includeShippingFee",className:"text-sm font-medium text-foreground cursor-pointer",children:["Include shipping fee (",(Number(Be)||0).toFixed(2)," EGP) in total amount to collect"]})]})]}),a.jsxs("div",{className:"p-4 bg-secondary rounded-lg space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Base Shipping Fee:"}),a.jsxs("span",{className:"font-semibold text-foreground",children:[(Number(Me)||0).toFixed(2)," EGP"]})]}),Qe>0&&a.jsxs("div",{className:"flex justify-between text-sm text-green-600 dark:text-green-400",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Partner Discount "}),a.jsxs("span",{className:"font-semibold",children:["(",we==null?void 0:we.partnerTier," - ",_e,"%)"]})]}),a.jsxs("span",{className:"font-semibold",children:["- ",(Number(Qe)||0).toFixed(2)," EGP"]})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground font-bold",children:"Final Shipping Fee:"}),a.jsxs("span",{className:"font-bold text-foreground",children:[(Number(Be)||0).toFixed(2)," EGP"]})]}),a.jsxs("div",{className:"flex justify-between text-sm pt-2 border-t border-border",children:[a.jsx("span",{className:"text-muted-foreground",children:"Package Value:"}),a.jsxs("span",{className:"font-semibold text-foreground",children:[(Number(xe)||0).toFixed(2)," EGP"]})]}),a.jsxs("div",{className:"flex justify-between text-lg font-bold border-t border-border pt-2 mt-2",children:[a.jsx("span",{className:"text-foreground",children:ie===Rn.TRANSFER?"Total to Collect from Recipient:":"Total to Collect (COD):"}),a.jsxs("span",{className:"text-primary",children:[(Number(ft)||0).toFixed(2)," EGP"]})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{type:"submit",className:"flex items-center gap-2 px-6 py-3 bg-primary text-primary-foreground font-bold rounded-lg hover:bg-primary/90 transition shadow-lg",children:[a.jsx(fl,{}),"Create Shipment"]})})]}),g==="bulk"&&a.jsxs("div",{className:"space-y-6",children:[A&&a.jsxs("div",{className:"p-4 bg-secondary rounded-lg",children:[a.jsx("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Upload Shipments For Client"}),a.jsxs("select",{value:X,onChange:Ue=>te(Ue.target.value),className:"w-full px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary text-foreground bg-background",required:!0,children:[a.jsx("option",{value:"",disabled:!0,children:"Select a client..."}),N.map(Ue=>a.jsx("option",{value:Ue.id,children:Ue.name},Ue.id))]})]}),a.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4 p-4 border-2 border-dashed border-border rounded-lg",children:[a.jsx("input",{type:"file",accept:".csv",onChange:ot,className:"text-sm text-foreground file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primary/10 file:text-primary hover:file:bg-primary/20"}),a.jsxs("button",{onClick:We,className:"w-full md:w-auto flex items-center justify-center gap-2 px-4 py-2 bg-secondary text-secondary-foreground font-semibold rounded-lg hover:bg-accent transition text-sm",children:[a.jsx(cv,{className:"w-4 h-4"})," Download Template"]}),a.jsxs("button",{onClick:ze,disabled:!ge,className:"w-full md:w-auto flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition text-sm disabled:bg-muted",children:[a.jsx(uv,{className:"w-4 h-4"})," Verify File"]})]}),ee.length>0&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"p-4 bg-secondary rounded-lg",children:[a.jsx("h3",{className:"font-bold text-lg text-foreground",children:"Verification Results"}),a.jsxs("p",{className:"text-foreground",children:[L.length," rows found. ",L.length-ee.filter(Ue=>!Ue.isValid).length," valid shipments."]})]}),a.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2",children:L.map((Ue,it)=>a.jsx("div",{className:`p-3 rounded-lg border ${ee[it].isValid?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-700":"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-700"}`,children:a.jsxs("div",{className:"flex items-start gap-3",children:[ee[it].isValid?a.jsx(Ls,{className:"w-5 h-5 text-green-600 dark:text-green-400 mt-0.5"}):a.jsx(vu,{className:"w-5 h-5 text-red-600 dark:text-red-400 mt-0.5"}),a.jsxs("div",{children:[a.jsxs("p",{className:"font-semibold text-foreground",children:[Ue.recipientName," - ",Ue.toAddress.zone]}),!ee[it].isValid&&a.jsx("ul",{className:"list-disc list-inside text-sm text-red-700 dark:text-red-300 mt-1",children:ee[it].errors.map((Oe,Ze)=>a.jsx("li",{children:Oe},Ze))})]})]})},it))}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{onClick:ct,disabled:!mt,className:"flex items-center gap-2 px-6 py-3 bg-primary text-primary-foreground font-bold rounded-lg hover:bg-primary/90 transition shadow-lg disabled:bg-muted",children:[a.jsx(fl,{}),"Upload Valid Shipments"]})})]})]})]})},dr=({isOpen:e,onClose:t,title:n,children:r,size:o="2xl",wrapperClassName:l=""})=>e?a.jsx("div",{className:`fixed inset-0 bg-black/60 z-50 flex justify-center items-center p-4 ${l}`,children:a.jsxs("div",{className:`card w-full max-w-${o} max-h-[90vh] flex flex-col p-0`,children:[a.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-border modal-header",children:[a.jsx("h3",{className:"text-xl font-bold text-foreground",children:n}),a.jsx("button",{onClick:t,className:"text-muted-foreground hover:text-foreground transition",children:a.jsx(vu,{className:"w-7 h-7"})})]}),a.jsx("div",{className:"p-6 overflow-y-auto",children:r})]})}):null;function KA({setLabelShipment:e}){const{shipments:t,users:n,assignShipmentToCourier:r,canCourierReceiveAssignment:o,addToast:l,inventoryItems:f,updateShipmentPackaging:m,getCourierName:g,autoAssignShipments:x,bulkPackageShipments:A,bulkAssignShipments:N,updateShipmentStatus:T,bulkUpdateShipmentStatus:v,revertShipmentStatus:O}=Sn(),[D,P]=me.useState("packaging"),[C,E]=me.useState(""),[j,V]=me.useState("all"),[W,ie]=me.useState(""),[B,R]=me.useState("all"),[M,Z]=me.useState(!1),[F,k]=me.useState(!1),[Q,J]=me.useState("single"),[G,Y]=me.useState(null),[z,X]=me.useState(""),[te,ge]=me.useState(null),[ue,L]=me.useState([]),[q,ee]=me.useState([]),[fe,ae]=me.useState([]),[Ee,we]=me.useState(""),[xe,Me]=me.useState({}),_e=n.filter(Te=>(Te.roles||[]).includes(zt.COURIER)),Qe=f.filter(Te=>Te.name.toLowerCase().includes("box")),Be=f.find(Te=>Te.name.toLowerCase().includes("label")),ft=f.filter(Te=>!Te.name.toLowerCase().includes("box")&&!Te.name.toLowerCase().includes("label")&&!Te.name.toLowerCase().includes("bubble")),ke=me.useMemo(()=>{const Te=new Set;return Object.values(Rr).forEach(lt=>{Array.isArray(lt)?lt.forEach(It=>Te.add(It)):Object.values(lt).forEach(It=>It.forEach(Pt=>Te.add(Pt)))}),Array.from(Te).sort()},[]),he=t.filter(Te=>Te.status===tt.WAITING_FOR_PACKAGING).filter(Te=>!C||Te.creationDate.startsWith(C)).filter(Te=>!W.trim()||Te.id.toLowerCase().includes(W.trim().toLowerCase())),ot=t.filter(Te=>Te.status===tt.PACKAGED_AND_WAITING_FOR_ASSIGNMENT).filter(Te=>!C||Te.creationDate.startsWith(C)).filter(Te=>j==="all"||Te.toAddress.zone===j).filter(Te=>!W.trim()||Te.id.toLowerCase().includes(W.trim().toLowerCase())),ze=t.filter(Te=>Te.status===tt.ASSIGNED_TO_COURIER).filter(Te=>!C||Te.creationDate.startsWith(C)).filter(Te=>!W.trim()||Te.id.toLowerCase().includes(W.trim().toLowerCase())).filter(Te=>B==="all"||Te.courierId===parseInt(B)),Pe=(Te,lt)=>{if(J(Te),Y(lt||null),X(""),Te==="bulk"){const It={};f.forEach(Pt=>{Pt.id.startsWith("inv_")&&(It[Pt.id]=0)}),Me(It)}else ge(null);k(!0)},ct=()=>{const Te=Object.entries(xe).filter(([It])=>It.startsWith("inv_box_")).reduce((It,[,Pt])=>It+Number(Pt),0);if(Te!==ue.length){l(`Box count (${Te}) must match selected shipments (${ue.length}).`,"error");return}const lt={...xe};if(Be)lt[Be.id]=(lt[Be.id]||0)+ue.length;else{l("Shipping Label item not found in inventory.","error");return}A(ue,lt,z),L([]),k(!1)},We=()=>{if(Q==="bulk"){ct();return}const Te=[];if(Be)Te.push({inventoryItemId:Be.id,itemName:Be.name,quantityUsed:1});else{l("Shipping Label is out of stock.","error");return}if(te){const lt=Qe.find(It=>It.id===te);lt&&Te.push({inventoryItemId:lt.id,itemName:lt.name,quantityUsed:1})}else{l("Please select a box size.","error");return}G&&m(G.id,Te,z),k(!1)},mt=async(Te,lt)=>{if(!lt){l("Please select a courier","error");return}await r(Te,parseInt(lt))},Ue=async()=>{Z(!0),await x(),Z(!1)},it=()=>{if(q.length===0||!Ee){l("Please select shipments and a courier.","error");return}const Te=parseInt(Ee);if(!o(Te)){l("Selected courier is restricted.","error");return}N(q,Te),ee([]),we("")},Oe=(Te,lt)=>{v(Te,lt),lt===tt.OUT_FOR_DELIVERY&&ae([])},Ze=(Te,lt)=>{({package:L,assign:ee,delivery:ae})[lt](Pt=>Pt.includes(Te)?Pt.filter(Yn=>Yn!==Te):[...Pt,Te])},pt=Te=>{const lt={package:he,assign:ot,delivery:ze},It={package:ue,assign:q,delivery:fe},Pt={package:L,assign:ee,delivery:ae}[Te];Pt(It[Te].length===lt[Te].length?[]:lt[Te].map(Yn=>Yn.id))},St=(Te,lt)=>{Me(It=>({...It,[Te]:Math.max(0,lt)}))},yt=()=>{let Te=[],lt="Shipment_Report",It=["ID","Client","Recipient","Phone","Zone","Status","Creation Date"];switch(D){case"packaging":Te=he,lt="Waiting_for_Packaging";break;case"assignment":Te=ot,lt="Waiting_for_Assignment";break;case"delivery":Te=ze,lt="Waiting_for_Out_for_Delivery",It.push("Courier");break}if(Te.length===0){l("No data to export for the current view.","info");return}const Pt=Te.map(Yn=>{const kn=[Yn.id,Yn.clientName,Yn.recipientName,Yn.recipientPhone,Yn.toAddress.zone,Yn.status,new Date(Yn.creationDate).toLocaleString()];return D!=="packaging"&&kn.push(g(Yn.courierId)),kn});Ei(It,Pt,lt)},qt=()=>{let Te=[];switch(D){case"packaging":Te=he;break;case"assignment":Te=ot;break;case"delivery":Te=ze;break}if(Te.length===0){l("No shipments available to print labels for.","info");return}Te.forEach((lt,It)=>{setTimeout(()=>{e(lt)},It*100)}),l(`Preparing to print ${Te.length} labels...`,"success")},xt=me.useMemo(()=>Object.entries(xe).filter(([Te])=>Te.startsWith("inv_box_")).reduce((Te,[,lt])=>Te+Number(lt),0),[xe]),hn=({label:Te,count:lt,isActive:It,onClick:Pt})=>a.jsxs("button",{onClick:Pt,className:`flex items-center gap-2 py-3 px-4 font-semibold text-sm border-b-2 transition-colors ${It?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground hover:border-border"}`,children:[Te,a.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-bold ${It?"bg-primary text-white":"bg-secondary text-secondary-foreground"}`,children:lt})]}),Tt=({shipment:Te,children:lt,onSelect:It,isSelected:Pt,showCheckbox:Yn=!0})=>a.jsxs("div",{className:"bg-secondary border border-border rounded-lg p-4 flex flex-col justify-between",children:[a.jsxs("div",{className:"flex gap-3",children:[Yn&&a.jsx("input",{type:"checkbox",checked:Pt,onChange:It,className:"mt-1 h-4 w-4 rounded"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-mono text-sm text-muted-foreground",children:Te.id}),a.jsx("p",{className:"font-semibold text-foreground",children:Te.recipientName}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:[Te.toAddress.street,", ",Te.toAddress.zone]}),Te.courierId&&a.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Courier: ",a.jsx("span",{className:"font-semibold",children:g(Te.courierId)})]})]})]}),a.jsx("div",{className:"mt-4",children:lt})]}),gt=({count:Te,children:lt})=>a.jsxs("div",{className:"sticky top-[81px] z-10 bg-primary/10 border border-primary/20 p-3 rounded-lg shadow flex flex-col sm:flex-row items-center justify-between gap-3",children:[a.jsxs("div",{className:"font-semibold text-primary",children:[Te," shipments selected"]}),lt]});return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Packaging & Assignment"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"Prepare shipments for delivery and assign them to couriers."})]}),a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"p-4 border-b border-border flex flex-col md:flex-row justify-between items-center gap-4 flex-wrap",children:[a.jsxs("div",{className:"flex border-b border-border -m-4 mb-0 overflow-x-auto",children:[a.jsx(hn,{label:"Waiting for Packaging",count:he.length,isActive:D==="packaging",onClick:()=>P("packaging")}),a.jsx(hn,{label:"Waiting for Assignment",count:ot.length,isActive:D==="assignment",onClick:()=>P("assignment")}),a.jsx(hn,{label:"Waiting for Out for Delivery",count:ze.length,isActive:D==="delivery",onClick:()=>P("delivery")})]}),a.jsxs("div",{className:"flex items-center gap-2 w-full md:w-auto flex-wrap justify-end",children:[a.jsx("input",{type:"text",placeholder:"Search by Shipment ID...",value:W,onChange:Te=>ie(Te.target.value),className:"w-full sm:w-auto px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background"}),D==="assignment"&&a.jsxs("select",{value:j,onChange:Te=>V(Te.target.value),className:"w-full sm:w-auto px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background",children:[a.jsx("option",{value:"all",children:"All Zones"}),ke.map(Te=>a.jsx("option",{value:Te,children:Te},Te))]}),D==="delivery"&&a.jsxs("select",{value:B,onChange:Te=>R(Te.target.value),className:"w-full sm:w-auto px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background",children:[a.jsx("option",{value:"all",children:"All Couriers"}),_e.map(Te=>a.jsx("option",{value:Te.id,children:Te.name},Te.id))]}),a.jsx("input",{type:"date",value:C,onChange:Te=>E(Te.target.value),className:"w-full sm:w-auto px-4 py-2 border border-border rounded-lg","aria-label":"Filter by creation date"}),C&&a.jsx("button",{onClick:()=>E(""),className:"px-4 py-2 text-sm font-semibold text-muted-foreground rounded-lg hover:bg-accent","aria-label":"Clear date filter",children:"Clear"}),a.jsxs("button",{onClick:qt,className:"w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition",children:[a.jsx(Vc,{className:"w-5 h-5"}),"Print All Labels"]}),a.jsxs("button",{onClick:yt,className:"w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition",children:[a.jsx(Ki,{className:"w-5 h-5"}),"Export CSV"]})]})]}),D==="packaging"&&a.jsxs("div",{className:"p-4 space-y-4",children:[ue.length>0&&a.jsx(gt,{count:ue.length,children:a.jsxs("button",{onClick:()=>Pe("bulk"),className:"w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-2 bg-primary text-primary-foreground font-semibold rounded-lg hover:bg-primary/90 transition",children:[a.jsx(ic,{className:"w-5 h-5"})," Package Selected"]})}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("input",{type:"checkbox",onChange:()=>pt("package"),checked:ue.length===he.length&&he.length>0,className:"h-4 w-4 rounded"}),a.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Select all"})]}),he.length>0?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:he.map(Te=>a.jsx(Tt,{shipment:Te,onSelect:()=>Ze(Te.id,"package"),isSelected:ue.includes(Te.id),children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:()=>e(Te),className:"p-3 bg-secondary text-secondary-foreground font-semibold rounded-lg hover:bg-accent transition",title:"Print Label",children:a.jsx(Vc,{className:"w-5 h-5"})}),a.jsxs("button",{onClick:()=>Pe("single",Te),className:"flex-grow w-full flex items-center justify-center gap-2 px-4 py-2 bg-primary text-primary-foreground font-semibold rounded-lg hover:bg-primary/90 transition",children:[a.jsx(ic,{className:"w-5 h-5"})," Package Shipment"]})]})},Te.id))}):a.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"No shipments are waiting for packaging."})]}),D==="assignment"&&a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 p-4 rounded-lg flex flex-col sm:flex-row justify-between items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-blue-800 dark:text-blue-200",children:"Auto-Assignment"}),a.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[ot.length," shipments are packaged and ready to be assigned."]})]}),a.jsxs("button",{onClick:Ue,disabled:M||ot.length===0,className:"w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 disabled:bg-muted",children:[a.jsx(Wi,{className:"w-5 h-5"})," ",M?"Assigning...":"Auto-Assign All"]})]}),q.length>0&&a.jsx(gt,{count:q.length,children:a.jsxs("div",{className:"flex w-full sm:w-auto gap-2",children:[a.jsxs("select",{value:Ee,onChange:Te=>we(Te.target.value),className:"flex-grow w-full px-3 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background",children:[a.jsx("option",{value:"",disabled:!0,children:"Select courier..."}),_e.filter(Te=>o(Te.id)).map(Te=>a.jsx("option",{value:Te.id,children:Te.name},Te.id))]}),a.jsx("button",{onClick:it,className:"flex-shrink-0 flex items-center justify-center gap-2 px-4 py-2 bg-primary text-primary-foreground font-semibold rounded-lg hover:bg-primary/90",children:"Assign"})]})}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("input",{type:"checkbox",onChange:()=>pt("assign"),checked:q.length===ot.length&&ot.length>0,className:"h-4 w-4 rounded"}),a.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Select all"})]}),ot.length>0?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:ot.map(Te=>a.jsx(Tt,{shipment:Te,onSelect:()=>Ze(Te.id,"assign"),isSelected:q.includes(Te.id),children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:()=>e(Te),className:"p-3 bg-secondary text-secondary-foreground font-semibold rounded-lg hover:bg-accent transition",title:"Print Label",children:a.jsx(Vc,{className:"w-5 h-5"})}),a.jsxs("select",{defaultValue:"",onChange:lt=>mt(Te.id,lt.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background",children:[a.jsx("option",{value:"",disabled:!0,children:"Assign to courier..."}),_e.filter(lt=>(lt.zones||[]).includes(Te.toAddress.zone)&&o(lt.id)).map(lt=>a.jsx("option",{value:lt.id,children:lt.name},lt.id))]}),a.jsx("button",{onClick:()=>O(Te.id),className:"p-3 bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300 font-semibold rounded-lg hover:bg-yellow-200 dark:hover:bg-yellow-900/50 transition",title:"Revert to Waiting for Packaging",children:a.jsx(Rh,{className:"w-5 h-5 transform -scale-x-100"})})]})},Te.id))}):a.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"No shipments are waiting for assignment."})]}),D==="delivery"&&a.jsxs("div",{className:"p-4 space-y-4",children:[fe.length>0&&a.jsx(gt,{count:fe.length,children:a.jsx("button",{onClick:()=>Oe(fe,tt.OUT_FOR_DELIVERY),className:"w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-2 bg-cyan-600 text-white font-semibold rounded-lg hover:bg-cyan-700 transition",children:"Mark Selected as Out for Delivery"})}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("input",{type:"checkbox",onChange:()=>pt("delivery"),checked:fe.length===ze.length&&ze.length>0,className:"h-4 w-4 rounded"}),a.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Select all"})]}),ze.length>0?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:ze.map(Te=>a.jsx(Tt,{shipment:Te,onSelect:()=>Ze(Te.id,"delivery"),isSelected:fe.includes(Te.id),children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:()=>e(Te),className:"p-3 bg-secondary text-secondary-foreground font-semibold rounded-lg hover:bg-accent transition",title:"Print Label",children:a.jsx(Vc,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>T(Te.id,tt.OUT_FOR_DELIVERY),className:"flex-grow w-full flex items-center justify-center gap-2 px-4 py-2 bg-cyan-600 text-white font-semibold rounded-lg hover:bg-cyan-700 transition",children:"Mark Out for Delivery"}),a.jsx("button",{onClick:()=>O(Te.id),className:"p-3 bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300 font-semibold rounded-lg hover:bg-yellow-200 dark:hover:bg-yellow-900/50 transition",title:"Revert to Waiting for Assignment",children:a.jsx(Rh,{className:"w-5 h-5 transform -scale-x-100"})})]})},Te.id))}):a.jsx("div",{className:"text-center py-12 text-muted-foreground",children:'No shipments are waiting to be marked as "Out for Delivery".'})]})]}),a.jsxs(dr,{isOpen:F,onClose:()=>k(!1),title:Q==="bulk"?"Package Selected Shipments (Mixed Batch)":"Package Shipment",children:[Q==="single"?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Shipping Label"}),a.jsx("input",{type:"text",value:"1 x Shipping Label (Required)",disabled:!0,className:"w-full p-2 bg-secondary border border-border rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Box Size"}),a.jsx("div",{className:"grid grid-cols-3 gap-2",children:Qe.map(Te=>a.jsxs("button",{type:"button",onClick:()=>ge(Te.id),className:`p-3 border-2 rounded-lg text-center ${te===Te.id?"border-primary bg-primary/10":"border-border hover:border-primary/50"}`,children:[a.jsx("span",{className:"font-semibold text-foreground",children:Te.name.replace(" Cardboard Box","")}),a.jsxs("span",{className:"text-xs block text-muted-foreground",children:[Te.quantity," in stock"]})]},Te.id))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Packaging Notes (Optional)"}),a.jsx("textarea",{value:z,onChange:Te=>X(Te.target.value),className:"w-full p-2 border border-border rounded-lg bg-background",rows:3})]})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Enter the total quantity of each material used for the ",a.jsx("strong",{children:ue.length})," selected shipments. Labels will be added automatically."]}),a.jsx("div",{className:"max-h-64 overflow-y-auto space-y-3 p-3 bg-secondary border rounded-lg",children:[...Qe,...ft].map(Te=>a.jsxs("div",{className:"grid grid-cols-3 items-center gap-4",children:[a.jsx("label",{htmlFor:Te.id,className:"font-medium text-foreground text-sm",children:Te.name}),a.jsx("input",{id:Te.id,type:"number",value:xe[Te.id]||0,onChange:lt=>St(Te.id,parseInt(lt.target.value)),className:"w-full p-2 border border-border rounded-md bg-background",min:"0"}),a.jsxs("span",{className:"text-xs text-muted-foreground",children:["In Stock: ",Te.quantity]})]},Te.id))}),a.jsxs("div",{className:`p-3 rounded-lg text-sm font-semibold text-center ${xt===ue.length?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"}`,children:["Total Boxes Entered: ",xt," / ",ue.length," Shipments Selected"]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Packaging Notes (Optional)"}),a.jsx("textarea",{value:z,onChange:Te=>X(Te.target.value),className:"w-full p-2 border border-border rounded-lg bg-background",rows:3,placeholder:"These notes will be applied to all selected shipments."})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t mt-4",children:[a.jsx("button",{onClick:()=>k(!1),className:"px-4 py-2 bg-secondary text-secondary-foreground rounded-lg hover:bg-accent font-semibold",children:"Cancel"}),a.jsx("button",{onClick:We,disabled:Q==="bulk"&&xt!==ue.length,className:"px-4 py-2 bg-primary text-primary-foreground font-semibold rounded-lg hover:bg-primary/90 disabled:bg-muted",children:"Confirm Packaging"})]})]})]})}var Et;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Et||(Et={}));var Ix=new Map([[Et.QR_CODE,"QR_CODE"],[Et.AZTEC,"AZTEC"],[Et.CODABAR,"CODABAR"],[Et.CODE_39,"CODE_39"],[Et.CODE_93,"CODE_93"],[Et.CODE_128,"CODE_128"],[Et.DATA_MATRIX,"DATA_MATRIX"],[Et.MAXICODE,"MAXICODE"],[Et.ITF,"ITF"],[Et.EAN_13,"EAN_13"],[Et.EAN_8,"EAN_8"],[Et.PDF_417,"PDF_417"],[Et.RSS_14,"RSS_14"],[Et.RSS_EXPANDED,"RSS_EXPANDED"],[Et.UPC_A,"UPC_A"],[Et.UPC_E,"UPC_E"],[Et.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Dx;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(Dx||(Dx={}));function JA(e){return Object.values(Et).includes(e)}var gl;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(gl||(gl={}));var cs=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[gl.SCAN_TYPE_CAMERA,gl.SCAN_TYPE_FILE],e}(),Mv=function(){function e(t,n){this.format=t,this.formatName=n}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!Ix.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,Ix.get(t))},e}(),Rx=function(){function e(){}return e.createFromText=function(t){var n={text:t};return{decodedText:t,result:n}},e.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},e}(),km;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(km||(km={}));var kv=function(){function e(){}return e.createFrom=function(t){return{errorMessage:t,type:km.UNKWOWN_ERROR}},e}(),Pv=function(){function e(t){this.verbose=t}return e.prototype.log=function(t){this.verbose&&console.log(t)},e.prototype.warn=function(t){this.verbose&&console.warn(t)},e.prototype.logError=function(t,n){(this.verbose||n===!0)&&console.error(t)},e.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},e}();function Ss(e){return typeof e>"u"||e===null}function $A(e,t,n){return e>n?n:e<t?t:e}var qc=function(){function e(){}return e.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},e.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),qn=function(){function e(){}return e.scanningStatus=function(){return"Scanning"},e.idleStatus=function(){return"Idle"},e.errorStatus=function(){return"Error"},e.permissionStatus=function(){return"Permission"},e.noCameraFoundErrorStatus=function(){return"No Cameras"},e.lastMatch=function(t){return"Last Match: ".concat(t)},e.codeScannerTitle=function(){return"Code Scanner"},e.cameraPermissionTitle=function(){return"Request Camera Permissions"},e.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},e.noCameraFound=function(){return"No camera found"},e.scanButtonStopScanningText=function(){return"Stop Scanning"},e.scanButtonStartScanningText=function(){return"Start Scanning"},e.torchOnButton=function(){return"Switch On Torch"},e.torchOffButton=function(){return"Switch Off Torch"},e.torchOnFailedMessage=function(){return"Failed to turn on torch"},e.torchOffFailedMessage=function(){return"Failed to turn off torch"},e.scanButtonScanningStarting=function(){return"Launching Camera..."},e.textIfCameraScanSelected=function(){return"Scan an Image File"},e.textIfFileScanSelected=function(){return"Scan using camera directly"},e.selectCamera=function(){return"Select Camera"},e.fileSelectionChooseImage=function(){return"Choose Image"},e.fileSelectionChooseAnother=function(){return"Choose Another"},e.fileSelectionNoImageSelected=function(){return"No image choosen"},e.anonymousCameraPrefix=function(){return"Anonymous Camera"},e.dragAndDropMessage=function(){return"Or drop an image to scan"},e.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},e.zoom=function(){return"zoom"},e.loadingImage=function(){return"Loading image..."},e.cameraScanAltText=function(){return"Camera based scan"},e.fileScanAltText=function(){return"Fule based scan"},e}(),Ox=function(){function e(){}return e.poweredBy=function(){return"Powered by "},e.reportIssues=function(){return"Report issues"},e}(),Fv=function(){function e(){}return e.isMediaStreamConstraintsValid=function(t,n){if(typeof t!="object"){var r=typeof t;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var o=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],l=new Set(o),f=Object.keys(t),m=0,g=f;m<g.length;m++){var x=g[m];if(l.has(x))return n.logError("".concat(x," is not supported videoConstaints."),!0),!1}return!0},e}(),Pm={exports:{}};(function(e,t){(function(n,r){r(t)})(eo,function(n){function r($){return $==null}var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,i){$.__proto__=i}||function($,i){for(var s in i)i.hasOwnProperty(s)&&($[s]=i[s])};function l($,i){o($,i);function s(){this.constructor=$}$.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)}function f($,i){var s=Object.setPrototypeOf;s?s($,i):$.__proto__=i}function m($,i){i===void 0&&(i=$.constructor);var s=Error.captureStackTrace;s&&s($,i)}var g=function($){l(i,$);function i(s){var c=this.constructor,u=$.call(this,s)||this;return Object.defineProperty(u,"name",{value:c.name,enumerable:!1}),f(u,c.prototype),m(u),u}return i}(Error);class x extends g{constructor(i=void 0){super(i),this.message=i}getKind(){return this.constructor.kind}}x.kind="Exception";class A extends x{}A.kind="ArgumentException";class N extends x{}N.kind="IllegalArgumentException";class T{constructor(i){if(this.binarizer=i,i===null)throw new N("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(i,s){return this.binarizer.getBlackRow(i,s)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(i,s,c,u){const d=this.binarizer.getLuminanceSource().crop(i,s,c,u);return new T(this.binarizer.createBinarizer(d))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new T(this.binarizer.createBinarizer(i))}rotateCounterClockwise45(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new T(this.binarizer.createBinarizer(i))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class v extends x{static getChecksumInstance(){return new v}}v.kind="ChecksumException";class O{constructor(i){this.source=i}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class D{static arraycopy(i,s,c,u,d){for(;d--;)c[u++]=i[s++]}static currentTimeMillis(){return Date.now()}}class P extends x{}P.kind="IndexOutOfBoundsException";class C extends P{constructor(i=void 0,s=void 0){super(s),this.index=i,this.message=s}}C.kind="ArrayIndexOutOfBoundsException";class E{static fill(i,s){for(let c=0,u=i.length;c<u;c++)i[c]=s}static fillWithin(i,s,c,u){E.rangeCheck(i.length,s,c);for(let d=s;d<c;d++)i[d]=u}static rangeCheck(i,s,c){if(s>c)throw new N("fromIndex("+s+") > toIndex("+c+")");if(s<0)throw new C(s);if(c>i)throw new C(c)}static asList(...i){return i}static create(i,s,c){return Array.from({length:i}).map(d=>Array.from({length:s}).fill(c))}static createInt32Array(i,s,c){return Array.from({length:i}).map(d=>Int32Array.from({length:s}).fill(c))}static equals(i,s){if(!i||!s||!i.length||!s.length||i.length!==s.length)return!1;for(let c=0,u=i.length;c<u;c++)if(i[c]!==s[c])return!1;return!0}static hashCode(i){if(i===null)return 0;let s=1;for(const c of i)s=31*s+c;return s}static fillUint8Array(i,s){for(let c=0;c!==i.length;c++)i[c]=s}static copyOf(i,s){return i.slice(0,s)}static copyOfUint8Array(i,s){if(i.length<=s){const c=new Uint8Array(s);return c.set(i),c}return i.slice(0,s)}static copyOfRange(i,s,c){const u=c-s,d=new Int32Array(u);return D.arraycopy(i,s,d,0,u),d}static binarySearch(i,s,c){c===void 0&&(c=E.numberComparator);let u=0,d=i.length-1;for(;u<=d;){const h=d+u>>1,b=c(s,i[h]);if(b>0)u=h+1;else if(b<0)d=h-1;else return h}return-u-1}static numberComparator(i,s){return i-s}}class j{static numberOfTrailingZeros(i){let s;if(i===0)return 32;let c=31;return s=i<<16,s!==0&&(c-=16,i=s),s=i<<8,s!==0&&(c-=8,i=s),s=i<<4,s!==0&&(c-=4,i=s),s=i<<2,s!==0&&(c-=2,i=s),c-(i<<1>>>31)}static numberOfLeadingZeros(i){if(i===0)return 32;let s=1;return i>>>16||(s+=16,i<<=16),i>>>24||(s+=8,i<<=8),i>>>28||(s+=4,i<<=4),i>>>30||(s+=2,i<<=2),s-=i>>>31,s}static toHexString(i){return i.toString(16)}static toBinaryString(i){return String(parseInt(String(i),2))}static bitCount(i){return i=i-(i>>>1&1431655765),i=(i&858993459)+(i>>>2&858993459),i=i+(i>>>4)&252645135,i=i+(i>>>8),i=i+(i>>>16),i&63}static truncDivision(i,s){return Math.trunc(i/s)}static parseInt(i,s=void 0){return parseInt(i,s)}}j.MIN_VALUE_32_BITS=-2147483648,j.MAX_VALUE=Number.MAX_SAFE_INTEGER;class V{constructor(i,s){i===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=i,s==null?this.bits=V.makeArray(i):this.bits=s)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(i){if(i>this.bits.length*32){const s=V.makeArray(i);D.arraycopy(this.bits,0,s,0,this.bits.length),this.bits=s}}get(i){return(this.bits[Math.floor(i/32)]&1<<(i&31))!==0}set(i){this.bits[Math.floor(i/32)]|=1<<(i&31)}flip(i){this.bits[Math.floor(i/32)]^=1<<(i&31)}getNextSet(i){const s=this.size;if(i>=s)return s;const c=this.bits;let u=Math.floor(i/32),d=c[u];d&=~((1<<(i&31))-1);const h=c.length;for(;d===0;){if(++u===h)return s;d=c[u]}const b=u*32+j.numberOfTrailingZeros(d);return b>s?s:b}getNextUnset(i){const s=this.size;if(i>=s)return s;const c=this.bits;let u=Math.floor(i/32),d=~c[u];d&=~((1<<(i&31))-1);const h=c.length;for(;d===0;){if(++u===h)return s;d=~c[u]}const b=u*32+j.numberOfTrailingZeros(d);return b>s?s:b}setBulk(i,s){this.bits[Math.floor(i/32)]=s}setRange(i,s){if(s<i||i<0||s>this.size)throw new N;if(s===i)return;s--;const c=Math.floor(i/32),u=Math.floor(s/32),d=this.bits;for(let h=c;h<=u;h++){const b=h>c?0:i&31,_=(2<<(h<u?31:s&31))-(1<<b);d[h]|=_}}clear(){const i=this.bits.length,s=this.bits;for(let c=0;c<i;c++)s[c]=0}isRange(i,s,c){if(s<i||i<0||s>this.size)throw new N;if(s===i)return!0;s--;const u=Math.floor(i/32),d=Math.floor(s/32),h=this.bits;for(let b=u;b<=d;b++){const w=b>u?0:i&31,H=(2<<(b<d?31:s&31))-(1<<w)&4294967295;if((h[b]&H)!==(c?H:0))return!1}return!0}appendBit(i){this.ensureCapacity(this.size+1),i&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(i,s){if(s<0||s>32)throw new N("Num bits must be between 0 and 32");this.ensureCapacity(this.size+s);for(let c=s;c>0;c--)this.appendBit((i>>c-1&1)===1)}appendBitArray(i){const s=i.size;this.ensureCapacity(this.size+s);for(let c=0;c<s;c++)this.appendBit(i.get(c))}xor(i){if(this.size!==i.size)throw new N("Sizes don't match");const s=this.bits;for(let c=0,u=s.length;c<u;c++)s[c]^=i.bits[c]}toBytes(i,s,c,u){for(let d=0;d<u;d++){let h=0;for(let b=0;b<8;b++)this.get(i)&&(h|=1<<7-b),i++;s[c+d]=h}}getBitArray(){return this.bits}reverse(){const i=new Int32Array(this.bits.length),s=Math.floor((this.size-1)/32),c=s+1,u=this.bits;for(let d=0;d<c;d++){let h=u[d];h=h>>1&1431655765|(h&1431655765)<<1,h=h>>2&858993459|(h&858993459)<<2,h=h>>4&252645135|(h&252645135)<<4,h=h>>8&16711935|(h&16711935)<<8,h=h>>16&65535|(h&65535)<<16,i[s-d]=h}if(this.size!==c*32){const d=c*32-this.size;let h=i[0]>>>d;for(let b=1;b<c;b++){const w=i[b];h|=w<<32-d,i[b-1]=h,h=w>>>d}i[c-1]=h}this.bits=i}static makeArray(i){return new Int32Array(Math.floor((i+31)/32))}equals(i){if(!(i instanceof V))return!1;const s=i;return this.size===s.size&&E.equals(this.bits,s.bits)}hashCode(){return 31*this.size+E.hashCode(this.bits)}toString(){let i="";for(let s=0,c=this.size;s<c;s++)s&7||(i+=" "),i+=this.get(s)?"X":".";return i}clone(){return new V(this.size,this.bits.slice())}}var W;(function($){$[$.OTHER=0]="OTHER",$[$.PURE_BARCODE=1]="PURE_BARCODE",$[$.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",$[$.TRY_HARDER=3]="TRY_HARDER",$[$.CHARACTER_SET=4]="CHARACTER_SET",$[$.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",$[$.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",$[$.ASSUME_GS1=7]="ASSUME_GS1",$[$.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",$[$.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",$[$.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(W||(W={}));var ie=W;class B extends x{static getFormatInstance(){return new B}}B.kind="FormatException";var R;(function($){$[$.Cp437=0]="Cp437",$[$.ISO8859_1=1]="ISO8859_1",$[$.ISO8859_2=2]="ISO8859_2",$[$.ISO8859_3=3]="ISO8859_3",$[$.ISO8859_4=4]="ISO8859_4",$[$.ISO8859_5=5]="ISO8859_5",$[$.ISO8859_6=6]="ISO8859_6",$[$.ISO8859_7=7]="ISO8859_7",$[$.ISO8859_8=8]="ISO8859_8",$[$.ISO8859_9=9]="ISO8859_9",$[$.ISO8859_10=10]="ISO8859_10",$[$.ISO8859_11=11]="ISO8859_11",$[$.ISO8859_13=12]="ISO8859_13",$[$.ISO8859_14=13]="ISO8859_14",$[$.ISO8859_15=14]="ISO8859_15",$[$.ISO8859_16=15]="ISO8859_16",$[$.SJIS=16]="SJIS",$[$.Cp1250=17]="Cp1250",$[$.Cp1251=18]="Cp1251",$[$.Cp1252=19]="Cp1252",$[$.Cp1256=20]="Cp1256",$[$.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",$[$.UTF8=22]="UTF8",$[$.ASCII=23]="ASCII",$[$.Big5=24]="Big5",$[$.GB18030=25]="GB18030",$[$.EUC_KR=26]="EUC_KR"})(R||(R={}));class M{constructor(i,s,c,...u){this.valueIdentifier=i,this.name=c,typeof s=="number"?this.values=Int32Array.from([s]):this.values=s,this.otherEncodingNames=u,M.VALUE_IDENTIFIER_TO_ECI.set(i,this),M.NAME_TO_ECI.set(c,this);const d=this.values;for(let h=0,b=d.length;h!==b;h++){const w=d[h];M.VALUES_TO_ECI.set(w,this)}for(const h of u)M.NAME_TO_ECI.set(h,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(i){if(i<0||i>=900)throw new B("incorect value");const s=M.VALUES_TO_ECI.get(i);if(s===void 0)throw new B("incorect value");return s}static getCharacterSetECIByName(i){const s=M.NAME_TO_ECI.get(i);if(s===void 0)throw new B("incorect value");return s}equals(i){if(!(i instanceof M))return!1;const s=i;return this.getName()===s.getName()}}M.VALUE_IDENTIFIER_TO_ECI=new Map,M.VALUES_TO_ECI=new Map,M.NAME_TO_ECI=new Map,M.Cp437=new M(R.Cp437,Int32Array.from([0,2]),"Cp437"),M.ISO8859_1=new M(R.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),M.ISO8859_2=new M(R.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),M.ISO8859_3=new M(R.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),M.ISO8859_4=new M(R.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),M.ISO8859_5=new M(R.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),M.ISO8859_6=new M(R.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),M.ISO8859_7=new M(R.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),M.ISO8859_8=new M(R.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),M.ISO8859_9=new M(R.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),M.ISO8859_10=new M(R.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),M.ISO8859_11=new M(R.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),M.ISO8859_13=new M(R.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),M.ISO8859_14=new M(R.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),M.ISO8859_15=new M(R.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),M.ISO8859_16=new M(R.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),M.SJIS=new M(R.SJIS,20,"SJIS","Shift_JIS"),M.Cp1250=new M(R.Cp1250,21,"Cp1250","windows-1250"),M.Cp1251=new M(R.Cp1251,22,"Cp1251","windows-1251"),M.Cp1252=new M(R.Cp1252,23,"Cp1252","windows-1252"),M.Cp1256=new M(R.Cp1256,24,"Cp1256","windows-1256"),M.UnicodeBigUnmarked=new M(R.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),M.UTF8=new M(R.UTF8,26,"UTF8","UTF-8"),M.ASCII=new M(R.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),M.Big5=new M(R.Big5,28,"Big5"),M.GB18030=new M(R.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),M.EUC_KR=new M(R.EUC_KR,30,"EUC_KR","EUC-KR");class Z extends x{}Z.kind="UnsupportedOperationException";class F{static decode(i,s){const c=this.encodingName(s);return this.customDecoder?this.customDecoder(i,c):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(c)?this.decodeFallback(i,c):new TextDecoder(c).decode(i)}static shouldDecodeOnFallback(i){return!F.isBrowser()&&i==="ISO-8859-1"}static encode(i,s){const c=this.encodingName(s);return this.customEncoder?this.customEncoder(i,c):typeof TextEncoder>"u"?this.encodeFallback(i):new TextEncoder().encode(i)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(i){return typeof i=="string"?i:i.getName()}static encodingCharacterSet(i){return i instanceof M?i:M.getCharacterSetECIByName(i)}static decodeFallback(i,s){const c=this.encodingCharacterSet(s);if(F.isDecodeFallbackSupported(c)){let u="";for(let d=0,h=i.length;d<h;d++){let b=i[d].toString(16);b.length<2&&(b="0"+b),u+="%"+b}return decodeURIComponent(u)}if(c.equals(M.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(i.buffer));throw new Z(`Encoding ${this.encodingName(s)} not supported by fallback.`)}static isDecodeFallbackSupported(i){return i.equals(M.UTF8)||i.equals(M.ISO8859_1)||i.equals(M.ASCII)}static encodeFallback(i){const c=btoa(unescape(encodeURIComponent(i))).split(""),u=[];for(let d=0;d<c.length;d++)u.push(c[d].charCodeAt(0));return new Uint8Array(u)}}class k{static castAsNonUtf8Char(i,s=null){const c=s?s.getName():this.ISO88591;return F.decode(new Uint8Array([i]),c)}static guessEncoding(i,s){if(s!=null&&s.get(ie.CHARACTER_SET)!==void 0)return s.get(ie.CHARACTER_SET).toString();const c=i.length;let u=!0,d=!0,h=!0,b=0,w=0,_=0,H=0,K=0,oe=0,ye=0,Ae=0,Ce=0,Re=0,Xe=0;const st=i.length>3&&i[0]===239&&i[1]===187&&i[2]===191;for(let ht=0;ht<c&&(u||d||h);ht++){const ut=i[ht]&255;h&&(b>0?ut&128?b--:h=!1:ut&128&&(ut&64?(b++,ut&32?(b++,ut&16?(b++,ut&8?h=!1:H++):_++):w++):h=!1)),u&&(ut>127&&ut<160?u=!1:ut>159&&(ut<192||ut===215||ut===247)&&Xe++),d&&(K>0?ut<64||ut===127||ut>252?d=!1:K--:ut===128||ut===160||ut>239?d=!1:ut>160&&ut<224?(oe++,Ae=0,ye++,ye>Ce&&(Ce=ye)):ut>127?(K++,ye=0,Ae++,Ae>Re&&(Re=Ae)):(ye=0,Ae=0))}return h&&b>0&&(h=!1),d&&K>0&&(d=!1),h&&(st||w+_+H>0)?k.UTF8:d&&(k.ASSUME_SHIFT_JIS||Ce>=3||Re>=3)?k.SHIFT_JIS:u&&d?Ce===2&&oe===2||Xe*10>=c?k.SHIFT_JIS:k.ISO88591:u?k.ISO88591:d?k.SHIFT_JIS:h?k.UTF8:k.PLATFORM_DEFAULT_ENCODING}static format(i,...s){let c=-1;function u(h,b,w,_,H,K){if(h==="%%")return"%";if(s[++c]===void 0)return;h=_?parseInt(_.substr(1)):void 0;let oe=H?parseInt(H.substr(1)):void 0,ye;switch(K){case"s":ye=s[c];break;case"c":ye=s[c][0];break;case"f":ye=parseFloat(s[c]).toFixed(h);break;case"p":ye=parseFloat(s[c]).toPrecision(h);break;case"e":ye=parseFloat(s[c]).toExponential(h);break;case"x":ye=parseInt(s[c]).toString(oe||16);break;case"d":ye=parseFloat(parseInt(s[c],oe||10).toPrecision(h)).toFixed(0);break}ye=typeof ye=="object"?JSON.stringify(ye):(+ye).toString(oe);let Ae=parseInt(w),Ce=w&&w[0]+""=="0"?"0":" ";for(;ye.length<Ae;)ye=b!==void 0?ye+Ce:Ce+ye;return ye}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(d,u)}static getBytes(i,s){return F.encode(i,s)}static getCharCode(i,s=0){return i.charCodeAt(s)}static getCharAt(i){return String.fromCharCode(i)}}k.SHIFT_JIS=M.SJIS.getName(),k.GB2312="GB2312",k.ISO88591=M.ISO8859_1.getName(),k.EUC_JP="EUC_JP",k.UTF8=M.UTF8.getName(),k.PLATFORM_DEFAULT_ENCODING=k.UTF8,k.ASSUME_SHIFT_JIS=!1;class Q{constructor(i=""){this.value=i}enableDecoding(i){return this.encoding=i,this}append(i){return typeof i=="string"?this.value+=i.toString():this.encoding?this.value+=k.castAsNonUtf8Char(i,this.encoding):this.value+=String.fromCharCode(i),this}appendChars(i,s,c){for(let u=s;s<s+c;u++)this.append(i[u]);return this}length(){return this.value.length}charAt(i){return this.value.charAt(i)}deleteCharAt(i){this.value=this.value.substr(0,i)+this.value.substring(i+1)}setCharAt(i,s){this.value=this.value.substr(0,i)+s+this.value.substr(i+1)}substring(i,s){return this.value.substring(i,s)}setLengthToZero(){this.value=""}toString(){return this.value}insert(i,s){this.value=this.value.substr(0,i)+s+this.value.substr(i+s.length)}}class J{constructor(i,s,c,u){if(this.width=i,this.height=s,this.rowSize=c,this.bits=u,s==null&&(s=i),this.height=s,i<1||s<1)throw new N("Both dimensions must be greater than 0");c==null&&(c=Math.floor((i+31)/32)),this.rowSize=c,u==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(i){const s=i.length,c=i[0].length,u=new J(c,s);for(let d=0;d<s;d++){const h=i[d];for(let b=0;b<c;b++)h[b]&&u.set(b,d)}return u}static parseFromString(i,s,c){if(i===null)throw new N("stringRepresentation cannot be null");const u=new Array(i.length);let d=0,h=0,b=-1,w=0,_=0;for(;_<i.length;)if(i.charAt(_)===`
`||i.charAt(_)==="\r"){if(d>h){if(b===-1)b=d-h;else if(d-h!==b)throw new N("row lengths do not match");h=d,w++}_++}else if(i.substring(_,_+s.length)===s)_+=s.length,u[d]=!0,d++;else if(i.substring(_,_+c.length)===c)_+=c.length,u[d]=!1,d++;else throw new N("illegal character encountered: "+i.substring(_));if(d>h){if(b===-1)b=d-h;else if(d-h!==b)throw new N("row lengths do not match");w++}const H=new J(b,w);for(let K=0;K<d;K++)u[K]&&H.set(Math.floor(K%b),Math.floor(K/b));return H}get(i,s){const c=s*this.rowSize+Math.floor(i/32);return(this.bits[c]>>>(i&31)&1)!==0}set(i,s){const c=s*this.rowSize+Math.floor(i/32);this.bits[c]|=1<<(i&31)&4294967295}unset(i,s){const c=s*this.rowSize+Math.floor(i/32);this.bits[c]&=~(1<<(i&31)&4294967295)}flip(i,s){const c=s*this.rowSize+Math.floor(i/32);this.bits[c]^=1<<(i&31)&4294967295}xor(i){if(this.width!==i.getWidth()||this.height!==i.getHeight()||this.rowSize!==i.getRowSize())throw new N("input matrix dimensions do not match");const s=new V(Math.floor(this.width/32)+1),c=this.rowSize,u=this.bits;for(let d=0,h=this.height;d<h;d++){const b=d*c,w=i.getRow(d,s).getBitArray();for(let _=0;_<c;_++)u[b+_]^=w[_]}}clear(){const i=this.bits,s=i.length;for(let c=0;c<s;c++)i[c]=0}setRegion(i,s,c,u){if(s<0||i<0)throw new N("Left and top must be nonnegative");if(u<1||c<1)throw new N("Height and width must be at least 1");const d=i+c,h=s+u;if(h>this.height||d>this.width)throw new N("The region must fit inside the matrix");const b=this.rowSize,w=this.bits;for(let _=s;_<h;_++){const H=_*b;for(let K=i;K<d;K++)w[H+Math.floor(K/32)]|=1<<(K&31)&4294967295}}getRow(i,s){s==null||s.getSize()<this.width?s=new V(this.width):s.clear();const c=this.rowSize,u=this.bits,d=i*c;for(let h=0;h<c;h++)s.setBulk(h*32,u[d+h]);return s}setRow(i,s){D.arraycopy(s.getBitArray(),0,this.bits,i*this.rowSize,this.rowSize)}rotate180(){const i=this.getWidth(),s=this.getHeight();let c=new V(i),u=new V(i);for(let d=0,h=Math.floor((s+1)/2);d<h;d++)c=this.getRow(d,c),u=this.getRow(s-1-d,u),c.reverse(),u.reverse(),this.setRow(d,u),this.setRow(s-1-d,c)}getEnclosingRectangle(){const i=this.width,s=this.height,c=this.rowSize,u=this.bits;let d=i,h=s,b=-1,w=-1;for(let _=0;_<s;_++)for(let H=0;H<c;H++){const K=u[_*c+H];if(K!==0){if(_<h&&(h=_),_>w&&(w=_),H*32<d){let oe=0;for(;!(K<<31-oe&4294967295);)oe++;H*32+oe<d&&(d=H*32+oe)}if(H*32+31>b){let oe=31;for(;!(K>>>oe);)oe--;H*32+oe>b&&(b=H*32+oe)}}}return b<d||w<h?null:Int32Array.from([d,h,b-d+1,w-h+1])}getTopLeftOnBit(){const i=this.rowSize,s=this.bits;let c=0;for(;c<s.length&&s[c]===0;)c++;if(c===s.length)return null;const u=c/i;let d=c%i*32;const h=s[c];let b=0;for(;!(h<<31-b&4294967295);)b++;return d+=b,Int32Array.from([d,u])}getBottomRightOnBit(){const i=this.rowSize,s=this.bits;let c=s.length-1;for(;c>=0&&s[c]===0;)c--;if(c<0)return null;const u=Math.floor(c/i);let d=Math.floor(c%i)*32;const h=s[c];let b=31;for(;!(h>>>b);)b--;return d+=b,Int32Array.from([d,u])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(i){if(!(i instanceof J))return!1;const s=i;return this.width===s.width&&this.height===s.height&&this.rowSize===s.rowSize&&E.equals(this.bits,s.bits)}hashCode(){let i=this.width;return i=31*i+this.width,i=31*i+this.height,i=31*i+this.rowSize,i=31*i+E.hashCode(this.bits),i}toString(i="X ",s="  ",c=`
`){return this.buildToString(i,s,c)}buildToString(i,s,c){let u=new Q;for(let d=0,h=this.height;d<h;d++){for(let b=0,w=this.width;b<w;b++)u.append(this.get(b,d)?i:s);u.append(c)}return u.toString()}clone(){return new J(this.width,this.height,this.rowSize,this.bits.slice())}}class G extends x{static getNotFoundInstance(){return new G}}G.kind="NotFoundException";class Y extends O{constructor(i){super(i),this.luminances=Y.EMPTY,this.buckets=new Int32Array(Y.LUMINANCE_BUCKETS)}getBlackRow(i,s){const c=this.getLuminanceSource(),u=c.getWidth();s==null||s.getSize()<u?s=new V(u):s.clear(),this.initArrays(u);const d=c.getRow(i,this.luminances),h=this.buckets;for(let w=0;w<u;w++)h[(d[w]&255)>>Y.LUMINANCE_SHIFT]++;const b=Y.estimateBlackPoint(h);if(u<3)for(let w=0;w<u;w++)(d[w]&255)<b&&s.set(w);else{let w=d[0]&255,_=d[1]&255;for(let H=1;H<u-1;H++){const K=d[H+1]&255;(_*4-w-K)/2<b&&s.set(H),w=_,_=K}}return s}getBlackMatrix(){const i=this.getLuminanceSource(),s=i.getWidth(),c=i.getHeight(),u=new J(s,c);this.initArrays(s);const d=this.buckets;for(let w=1;w<5;w++){const _=Math.floor(c*w/5),H=i.getRow(_,this.luminances),K=Math.floor(s*4/5);for(let oe=Math.floor(s/5);oe<K;oe++){const ye=H[oe]&255;d[ye>>Y.LUMINANCE_SHIFT]++}}const h=Y.estimateBlackPoint(d),b=i.getMatrix();for(let w=0;w<c;w++){const _=w*s;for(let H=0;H<s;H++)(b[_+H]&255)<h&&u.set(H,w)}return u}createBinarizer(i){return new Y(i)}initArrays(i){this.luminances.length<i&&(this.luminances=new Uint8ClampedArray(i));const s=this.buckets;for(let c=0;c<Y.LUMINANCE_BUCKETS;c++)s[c]=0}static estimateBlackPoint(i){const s=i.length;let c=0,u=0,d=0;for(let H=0;H<s;H++)i[H]>d&&(u=H,d=i[H]),i[H]>c&&(c=i[H]);let h=0,b=0;for(let H=0;H<s;H++){const K=H-u,oe=i[H]*K*K;oe>b&&(h=H,b=oe)}if(u>h){const H=u;u=h,h=H}if(h-u<=s/16)throw new G;let w=h-1,_=-1;for(let H=h-1;H>u;H--){const K=H-u,oe=K*K*(h-H)*(c-i[H]);oe>_&&(w=H,_=oe)}return w<<Y.LUMINANCE_SHIFT}}Y.LUMINANCE_BITS=5,Y.LUMINANCE_SHIFT=8-Y.LUMINANCE_BITS,Y.LUMINANCE_BUCKETS=1<<Y.LUMINANCE_BITS,Y.EMPTY=Uint8ClampedArray.from([0]);class z extends Y{constructor(i){super(i),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const i=this.getLuminanceSource(),s=i.getWidth(),c=i.getHeight();if(s>=z.MINIMUM_DIMENSION&&c>=z.MINIMUM_DIMENSION){const u=i.getMatrix();let d=s>>z.BLOCK_SIZE_POWER;s&z.BLOCK_SIZE_MASK&&d++;let h=c>>z.BLOCK_SIZE_POWER;c&z.BLOCK_SIZE_MASK&&h++;const b=z.calculateBlackPoints(u,d,h,s,c),w=new J(s,c);z.calculateThresholdForBlock(u,d,h,s,c,b,w),this.matrix=w}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(i){return new z(i)}static calculateThresholdForBlock(i,s,c,u,d,h,b){const w=d-z.BLOCK_SIZE,_=u-z.BLOCK_SIZE;for(let H=0;H<c;H++){let K=H<<z.BLOCK_SIZE_POWER;K>w&&(K=w);const oe=z.cap(H,2,c-3);for(let ye=0;ye<s;ye++){let Ae=ye<<z.BLOCK_SIZE_POWER;Ae>_&&(Ae=_);const Ce=z.cap(ye,2,s-3);let Re=0;for(let st=-2;st<=2;st++){const ht=h[oe+st];Re+=ht[Ce-2]+ht[Ce-1]+ht[Ce]+ht[Ce+1]+ht[Ce+2]}const Xe=Re/25;z.thresholdBlock(i,Ae,K,Xe,u,b)}}}static cap(i,s,c){return i<s?s:i>c?c:i}static thresholdBlock(i,s,c,u,d,h){for(let b=0,w=c*d+s;b<z.BLOCK_SIZE;b++,w+=d)for(let _=0;_<z.BLOCK_SIZE;_++)(i[w+_]&255)<=u&&h.set(s+_,c+b)}static calculateBlackPoints(i,s,c,u,d){const h=d-z.BLOCK_SIZE,b=u-z.BLOCK_SIZE,w=new Array(c);for(let _=0;_<c;_++){w[_]=new Int32Array(s);let H=_<<z.BLOCK_SIZE_POWER;H>h&&(H=h);for(let K=0;K<s;K++){let oe=K<<z.BLOCK_SIZE_POWER;oe>b&&(oe=b);let ye=0,Ae=255,Ce=0;for(let Xe=0,st=H*u+oe;Xe<z.BLOCK_SIZE;Xe++,st+=u){for(let ht=0;ht<z.BLOCK_SIZE;ht++){const ut=i[st+ht]&255;ye+=ut,ut<Ae&&(Ae=ut),ut>Ce&&(Ce=ut)}if(Ce-Ae>z.MIN_DYNAMIC_RANGE)for(Xe++,st+=u;Xe<z.BLOCK_SIZE;Xe++,st+=u)for(let ht=0;ht<z.BLOCK_SIZE;ht++)ye+=i[st+ht]&255}let Re=ye>>z.BLOCK_SIZE_POWER*2;if(Ce-Ae<=z.MIN_DYNAMIC_RANGE&&(Re=Ae/2,_>0&&K>0)){const Xe=(w[_-1][K]+2*w[_][K-1]+w[_-1][K-1])/4;Ae<Xe&&(Re=Xe)}w[_][K]=Re}}return w}}z.BLOCK_SIZE_POWER=3,z.BLOCK_SIZE=1<<z.BLOCK_SIZE_POWER,z.BLOCK_SIZE_MASK=z.BLOCK_SIZE-1,z.MINIMUM_DIMENSION=z.BLOCK_SIZE*5,z.MIN_DYNAMIC_RANGE=24;class X{constructor(i,s){this.width=i,this.height=s}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(i,s,c,u){throw new Z("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Z("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Z("This luminance source does not support rotation by 45 degrees.")}toString(){const i=new Uint8ClampedArray(this.width);let s=new Q;for(let c=0;c<this.height;c++){const u=this.getRow(c,i);for(let d=0;d<this.width;d++){const h=u[d]&255;let b;h<64?b="#":h<128?b="+":h<192?b=".":b=" ",s.append(b)}s.append(`
`)}return s.toString()}}class te extends X{constructor(i){super(i.getWidth(),i.getHeight()),this.delegate=i}getRow(i,s){const c=this.delegate.getRow(i,s),u=this.getWidth();for(let d=0;d<u;d++)c[d]=255-(c[d]&255);return c}getMatrix(){const i=this.delegate.getMatrix(),s=this.getWidth()*this.getHeight(),c=new Uint8ClampedArray(s);for(let u=0;u<s;u++)c[u]=255-(i[u]&255);return c}isCropSupported(){return this.delegate.isCropSupported()}crop(i,s,c,u){return new te(this.delegate.crop(i,s,c,u))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new te(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new te(this.delegate.rotateCounterClockwise45())}}class ge extends X{constructor(i){super(i.width,i.height),this.canvas=i,this.tempCanvasElement=null,this.buffer=ge.makeBufferFromCanvasImageData(i)}static makeBufferFromCanvasImageData(i){const s=i.getContext("2d").getImageData(0,0,i.width,i.height);return ge.toGrayscaleBuffer(s.data,i.width,i.height)}static toGrayscaleBuffer(i,s,c){const u=new Uint8ClampedArray(s*c);for(let d=0,h=0,b=i.length;d<b;d+=4,h++){let w;if(i[d+3]===0)w=255;else{const H=i[d],K=i[d+1],oe=i[d+2];w=306*H+601*K+117*oe+512>>10}u[h]=w}return u}getRow(i,s){if(i<0||i>=this.getHeight())throw new N("Requested row is outside the image: "+i);const c=this.getWidth(),u=i*c;return s===null?s=this.buffer.slice(u,u+c):(s.length<c&&(s=new Uint8ClampedArray(c)),s.set(this.buffer.slice(u,u+c))),s}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(i,s,c,u){return super.crop(i,s,c,u),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const i=this.canvas.ownerDocument.createElement("canvas");i.width=this.canvas.width,i.height=this.canvas.height,this.tempCanvasElement=i}return this.tempCanvasElement}rotate(i){const s=this.getTempCanvasElement(),c=s.getContext("2d"),u=i*ge.DEGREE_TO_RADIANS,d=this.canvas.width,h=this.canvas.height,b=Math.ceil(Math.abs(Math.cos(u))*d+Math.abs(Math.sin(u))*h),w=Math.ceil(Math.abs(Math.sin(u))*d+Math.abs(Math.cos(u))*h);return s.width=b,s.height=w,c.translate(b/2,w/2),c.rotate(u),c.drawImage(this.canvas,d/-2,h/-2),this.buffer=ge.makeBufferFromCanvasImageData(s),this}invert(){return new te(this)}}ge.DEGREE_TO_RADIANS=Math.PI/180;class ue{constructor(i,s,c){this.deviceId=i,this.label=s,this.kind="videoinput",this.groupId=c||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var L=(globalThis||eo||self||window||void 0)&&(globalThis||eo||self||window||void 0).__awaiter||function($,i,s,c){function u(d){return d instanceof s?d:new s(function(h){h(d)})}return new(s||(s=Promise))(function(d,h){function b(H){try{_(c.next(H))}catch(K){h(K)}}function w(H){try{_(c.throw(H))}catch(K){h(K)}}function _(H){H.done?d(H.value):u(H.value).then(b,w)}_((c=c.apply($,i||[])).next())})};class q{constructor(i,s=500,c){this.reader=i,this.timeBetweenScansMillis=s,this._hints=c,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(i){this._timeBetweenDecodingAttempts=i<0?0:i}set hints(i){this._hints=i||null}get hints(){return this._hints}listVideoInputDevices(){return L(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const i=yield navigator.mediaDevices.enumerateDevices(),s=[];for(const c of i){const u=c.kind==="video"?"videoinput":c.kind;if(u!=="videoinput")continue;const d=c.deviceId||c.id,h=c.label||`Video device ${s.length+1}`,b=c.groupId,w={deviceId:d,label:h,kind:u,groupId:b};s.push(w)}return s})}getVideoInputDevices(){return L(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(s=>new ue(s.deviceId,s.label))})}findDeviceById(i){return L(this,void 0,void 0,function*(){const s=yield this.listVideoInputDevices();return s?s.find(c=>c.deviceId===i):null})}decodeFromInputVideoDevice(i,s){return L(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(i,s)})}decodeOnceFromVideoDevice(i,s){return L(this,void 0,void 0,function*(){this.reset();let c;i?c={deviceId:{exact:i}}:c={facingMode:"environment"};const u={video:c};return yield this.decodeOnceFromConstraints(u,s)})}decodeOnceFromConstraints(i,s){return L(this,void 0,void 0,function*(){const c=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeOnceFromStream(c,s)})}decodeOnceFromStream(i,s){return L(this,void 0,void 0,function*(){this.reset();const c=yield this.attachStreamToVideo(i,s);return yield this.decodeOnce(c)})}decodeFromInputVideoDeviceContinuously(i,s,c){return L(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(i,s,c)})}decodeFromVideoDevice(i,s,c){return L(this,void 0,void 0,function*(){let u;i?u={deviceId:{exact:i}}:u={facingMode:"environment"};const d={video:u};return yield this.decodeFromConstraints(d,s,c)})}decodeFromConstraints(i,s,c){return L(this,void 0,void 0,function*(){const u=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeFromStream(u,s,c)})}decodeFromStream(i,s,c){return L(this,void 0,void 0,function*(){this.reset();const u=yield this.attachStreamToVideo(i,s);return yield this.decodeContinuously(u,c)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(i,s){return L(this,void 0,void 0,function*(){const c=this.prepareVideoElement(s);return this.addVideoSource(c,i),this.videoElement=c,this.stream=i,yield this.playVideoOnLoadAsync(c),c})}playVideoOnLoadAsync(i){return new Promise((s,c)=>this.playVideoOnLoad(i,()=>s()))}playVideoOnLoad(i,s){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(i),i.addEventListener("ended",this.videoEndedListener),i.addEventListener("canplay",this.videoCanPlayListener),i.addEventListener("playing",s),this.tryPlayVideo(i)}isVideoPlaying(i){return i.currentTime>0&&!i.paused&&!i.ended&&i.readyState>2}tryPlayVideo(i){return L(this,void 0,void 0,function*(){if(this.isVideoPlaying(i)){console.warn("Trying to play video that is already playing.");return}try{yield i.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(i,s){const c=document.getElementById(i);if(!c)throw new A(`element with id '${i}' not found`);if(c.nodeName.toLowerCase()!==s.toLowerCase())throw new A(`element with id '${i}' must be an ${s} element`);return c}decodeFromImage(i,s){if(!i&&!s)throw new A("either imageElement with a src set or an url must be provided");return s&&!i?this.decodeFromImageUrl(s):this.decodeFromImageElement(i)}decodeFromVideo(i,s){if(!i&&!s)throw new A("Either an element with a src set or an URL must be provided");return s&&!i?this.decodeFromVideoUrl(s):this.decodeFromVideoElement(i)}decodeFromVideoContinuously(i,s,c){if(i===void 0&&s===void 0)throw new A("Either an element with a src set or an URL must be provided");return s&&!i?this.decodeFromVideoUrlContinuously(s,c):this.decodeFromVideoElementContinuously(i,c)}decodeFromImageElement(i){if(!i)throw new A("An image element must be provided.");this.reset();const s=this.prepareImageElement(i);this.imageElement=s;let c;return this.isImageLoaded(s)?c=this.decodeOnce(s,!1,!0):c=this._decodeOnLoadImage(s),c}decodeFromVideoElement(i){const s=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideo(s)}decodeFromVideoElementContinuously(i,s){const c=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideoContinuously(c,s)}_decodeFromVideoElementSetup(i){if(!i)throw new A("A video element must be provided.");this.reset();const s=this.prepareVideoElement(i);return this.videoElement=s,s}decodeFromImageUrl(i){if(!i)throw new A("An URL must be provided.");this.reset();const s=this.prepareImageElement();this.imageElement=s;const c=this._decodeOnLoadImage(s);return s.src=i,c}decodeFromVideoUrl(i){if(!i)throw new A("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),c=this.decodeFromVideoElement(s);return s.src=i,c}decodeFromVideoUrlContinuously(i,s){if(!i)throw new A("An URL must be provided.");this.reset();const c=this.prepareVideoElement(),u=this.decodeFromVideoElementContinuously(c,s);return c.src=i,u}_decodeOnLoadImage(i){return new Promise((s,c)=>{this.imageLoadedListener=()=>this.decodeOnce(i,!1,!0).then(s,c),i.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(i){return L(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(i),yield this.decodeOnce(i)})}_decodeOnLoadVideoContinuously(i,s){return L(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(i),this.decodeContinuously(i,s)})}isImageLoaded(i){return!(!i.complete||i.naturalWidth===0)}prepareImageElement(i){let s;return typeof i>"u"&&(s=document.createElement("img"),s.width=200,s.height=200),typeof i=="string"&&(s=this.getMediaElement(i,"img")),i instanceof HTMLImageElement&&(s=i),s}prepareVideoElement(i){let s;return!i&&typeof document<"u"&&(s=document.createElement("video"),s.width=200,s.height=200),typeof i=="string"&&(s=this.getMediaElement(i,"video")),i instanceof HTMLVideoElement&&(s=i),s.setAttribute("autoplay","true"),s.setAttribute("muted","true"),s.setAttribute("playsinline","true"),s}decodeOnce(i,s=!0,c=!0){this._stopAsyncDecode=!1;const u=(d,h)=>{if(this._stopAsyncDecode){h(new G("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const b=this.decode(i);d(b)}catch(b){const w=s&&b instanceof G,H=(b instanceof v||b instanceof B)&&c;if(w||H)return setTimeout(u,this._timeBetweenDecodingAttempts,d,h);h(b)}};return new Promise((d,h)=>u(d,h))}decodeContinuously(i,s){this._stopContinuousDecode=!1;const c=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const u=this.decode(i);s(u,null),setTimeout(c,this.timeBetweenScansMillis)}catch(u){s(null,u);const d=u instanceof v||u instanceof B,h=u instanceof G;(d||h)&&setTimeout(c,this._timeBetweenDecodingAttempts)}};c()}decode(i){const s=this.createBinaryBitmap(i);return this.decodeBitmap(s)}_isHTMLVideoElement(i){return i.videoWidth!==0}drawFrameOnCanvas(i,s,c){s||(s={sx:0,sy:0,sWidth:i.videoWidth,sHeight:i.videoHeight,dx:0,dy:0,dWidth:i.videoWidth,dHeight:i.videoHeight}),c||(c=this.captureCanvasContext),c.drawImage(i,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}drawImageOnCanvas(i,s,c=this.captureCanvasContext){s||(s={sx:0,sy:0,sWidth:i.naturalWidth,sHeight:i.naturalHeight,dx:0,dy:0,dWidth:i.naturalWidth,dHeight:i.naturalHeight}),c||(c=this.captureCanvasContext),c.drawImage(i,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}createBinaryBitmap(i){this.getCaptureCanvasContext(i),this._isHTMLVideoElement(i)?this.drawFrameOnCanvas(i):this.drawImageOnCanvas(i);const s=this.getCaptureCanvas(i),c=new ge(s),u=new z(c);return new T(u)}getCaptureCanvasContext(i){if(!this.captureCanvasContext){const c=this.getCaptureCanvas(i).getContext("2d");this.captureCanvasContext=c}return this.captureCanvasContext}getCaptureCanvas(i){if(!this.captureCanvas){const s=this.createCaptureCanvas(i);this.captureCanvas=s}return this.captureCanvas}decodeBitmap(i){return this.reader.decode(i,this._hints)}createCaptureCanvas(i){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const s=document.createElement("canvas");let c,u;return typeof i<"u"&&(i instanceof HTMLVideoElement?(c=i.videoWidth,u=i.videoHeight):i instanceof HTMLImageElement&&(c=i.naturalWidth||i.width,u=i.naturalHeight||i.height)),s.style.width=c+"px",s.style.height=u+"px",s.width=c,s.height=u,s}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(i=>i.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(i,s){try{i.srcObject=s}catch{i.src=URL.createObjectURL(s)}}cleanVideoSource(i){try{i.srcObject=null}catch{i.src=""}this.videoElement.removeAttribute("src")}}class ee{constructor(i,s,c=s==null?0:8*s.length,u,d,h=D.currentTimeMillis()){this.text=i,this.rawBytes=s,this.numBits=c,this.resultPoints=u,this.format=d,this.timestamp=h,this.text=i,this.rawBytes=s,c==null?this.numBits=s==null?0:8*s.length:this.numBits=c,this.resultPoints=u,this.format=d,this.resultMetadata=null,h==null?this.timestamp=D.currentTimeMillis():this.timestamp=h}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(i,s){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(i,s)}putAllMetadata(i){i!==null&&(this.resultMetadata===null?this.resultMetadata=i:this.resultMetadata=new Map(i))}addResultPoints(i){const s=this.resultPoints;if(s===null)this.resultPoints=i;else if(i!==null&&i.length>0){const c=new Array(s.length+i.length);D.arraycopy(s,0,c,0,s.length),D.arraycopy(i,0,c,s.length,i.length),this.resultPoints=c}}getTimestamp(){return this.timestamp}toString(){return this.text}}var fe;(function($){$[$.AZTEC=0]="AZTEC",$[$.CODABAR=1]="CODABAR",$[$.CODE_39=2]="CODE_39",$[$.CODE_93=3]="CODE_93",$[$.CODE_128=4]="CODE_128",$[$.DATA_MATRIX=5]="DATA_MATRIX",$[$.EAN_8=6]="EAN_8",$[$.EAN_13=7]="EAN_13",$[$.ITF=8]="ITF",$[$.MAXICODE=9]="MAXICODE",$[$.PDF_417=10]="PDF_417",$[$.QR_CODE=11]="QR_CODE",$[$.RSS_14=12]="RSS_14",$[$.RSS_EXPANDED=13]="RSS_EXPANDED",$[$.UPC_A=14]="UPC_A",$[$.UPC_E=15]="UPC_E",$[$.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(fe||(fe={}));var ae=fe,Ee;(function($){$[$.OTHER=0]="OTHER",$[$.ORIENTATION=1]="ORIENTATION",$[$.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",$[$.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",$[$.ISSUE_NUMBER=4]="ISSUE_NUMBER",$[$.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",$[$.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",$[$.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",$[$.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",$[$.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",$[$.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Ee||(Ee={}));var we=Ee;class xe{constructor(i,s,c,u,d=-1,h=-1){this.rawBytes=i,this.text=s,this.byteSegments=c,this.ecLevel=u,this.structuredAppendSequenceNumber=d,this.structuredAppendParity=h,this.numBits=i==null?0:8*i.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(i){this.numBits=i}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(i){this.errorsCorrected=i}getErasures(){return this.erasures}setErasures(i){this.erasures=i}getOther(){return this.other}setOther(i){this.other=i}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Me{exp(i){return this.expTable[i]}log(i){if(i===0)throw new N;return this.logTable[i]}static addOrSubtract(i,s){return i^s}}class _e{constructor(i,s){if(s.length===0)throw new N;this.field=i;const c=s.length;if(c>1&&s[0]===0){let u=1;for(;u<c&&s[u]===0;)u++;u===c?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(c-u),D.arraycopy(s,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);const s=this.coefficients;let c;if(i===1){c=0;for(let h=0,b=s.length;h!==b;h++){const w=s[h];c=Me.addOrSubtract(c,w)}return c}c=s[0];const u=s.length,d=this.field;for(let h=1;h<u;h++)c=Me.addOrSubtract(d.multiply(i,c),s[h]);return c}addOrSubtract(i){if(!this.field.equals(i.field))throw new N("GenericGFPolys do not have same GenericGF field");if(this.isZero())return i;if(i.isZero())return this;let s=this.coefficients,c=i.coefficients;if(s.length>c.length){const h=s;s=c,c=h}let u=new Int32Array(c.length);const d=c.length-s.length;D.arraycopy(c,0,u,0,d);for(let h=d;h<c.length;h++)u[h]=Me.addOrSubtract(s[h-d],c[h]);return new _e(this.field,u)}multiply(i){if(!this.field.equals(i.field))throw new N("GenericGFPolys do not have same GenericGF field");if(this.isZero()||i.isZero())return this.field.getZero();const s=this.coefficients,c=s.length,u=i.coefficients,d=u.length,h=new Int32Array(c+d-1),b=this.field;for(let w=0;w<c;w++){const _=s[w];for(let H=0;H<d;H++)h[w+H]=Me.addOrSubtract(h[w+H],b.multiply(_,u[H]))}return new _e(b,h)}multiplyScalar(i){if(i===0)return this.field.getZero();if(i===1)return this;const s=this.coefficients.length,c=this.field,u=new Int32Array(s),d=this.coefficients;for(let h=0;h<s;h++)u[h]=c.multiply(d[h],i);return new _e(c,u)}multiplyByMonomial(i,s){if(i<0)throw new N;if(s===0)return this.field.getZero();const c=this.coefficients,u=c.length,d=new Int32Array(u+i),h=this.field;for(let b=0;b<u;b++)d[b]=h.multiply(c[b],s);return new _e(h,d)}divide(i){if(!this.field.equals(i.field))throw new N("GenericGFPolys do not have same GenericGF field");if(i.isZero())throw new N("Divide by 0");const s=this.field;let c=s.getZero(),u=this;const d=i.getCoefficient(i.getDegree()),h=s.inverse(d);for(;u.getDegree()>=i.getDegree()&&!u.isZero();){const b=u.getDegree()-i.getDegree(),w=s.multiply(u.getCoefficient(u.getDegree()),h),_=i.multiplyByMonomial(b,w),H=s.buildMonomial(b,w);c=c.addOrSubtract(H),u=u.addOrSubtract(_)}return[c,u]}toString(){let i="";for(let s=this.getDegree();s>=0;s--){let c=this.getCoefficient(s);if(c!==0){if(c<0?(i+=" - ",c=-c):i.length>0&&(i+=" + "),s===0||c!==1){const u=this.field.log(c);u===0?i+="1":u===1?i+="a":(i+="a^",i+=u)}s!==0&&(s===1?i+="x":(i+="x^",i+=s))}}return i}}class Qe extends x{}Qe.kind="ArithmeticException";class Be extends Me{constructor(i,s,c){super(),this.primitive=i,this.size=s,this.generatorBase=c;const u=new Int32Array(s);let d=1;for(let b=0;b<s;b++)u[b]=d,d*=2,d>=s&&(d^=i,d&=s-1);this.expTable=u;const h=new Int32Array(s);for(let b=0;b<s-1;b++)h[u[b]]=b;this.logTable=h,this.zero=new _e(this,Int32Array.from([0])),this.one=new _e(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,s){if(i<0)throw new N;if(s===0)return this.zero;const c=new Int32Array(i+1);return c[0]=s,new _e(this,c)}inverse(i){if(i===0)throw new Qe;return this.expTable[this.size-this.logTable[i]-1]}multiply(i,s){return i===0||s===0?0:this.expTable[(this.logTable[i]+this.logTable[s])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+j.toHexString(this.primitive)+","+this.size+")"}equals(i){return i===this}}Be.AZTEC_DATA_12=new Be(4201,4096,1),Be.AZTEC_DATA_10=new Be(1033,1024,1),Be.AZTEC_DATA_6=new Be(67,64,1),Be.AZTEC_PARAM=new Be(19,16,1),Be.QR_CODE_FIELD_256=new Be(285,256,0),Be.DATA_MATRIX_FIELD_256=new Be(301,256,1),Be.AZTEC_DATA_8=Be.DATA_MATRIX_FIELD_256,Be.MAXICODE_FIELD_64=Be.AZTEC_DATA_6;class ft extends x{}ft.kind="ReedSolomonException";class ke extends x{}ke.kind="IllegalStateException";class he{constructor(i){this.field=i}decode(i,s){const c=this.field,u=new _e(c,i),d=new Int32Array(s);let h=!0;for(let ye=0;ye<s;ye++){const Ae=u.evaluateAt(c.exp(ye+c.getGeneratorBase()));d[d.length-1-ye]=Ae,Ae!==0&&(h=!1)}if(h)return;const b=new _e(c,d),w=this.runEuclideanAlgorithm(c.buildMonomial(s,1),b,s),_=w[0],H=w[1],K=this.findErrorLocations(_),oe=this.findErrorMagnitudes(H,K);for(let ye=0;ye<K.length;ye++){const Ae=i.length-1-c.log(K[ye]);if(Ae<0)throw new ft("Bad error location");i[Ae]=Be.addOrSubtract(i[Ae],oe[ye])}}runEuclideanAlgorithm(i,s,c){if(i.getDegree()<s.getDegree()){const ye=i;i=s,s=ye}const u=this.field;let d=i,h=s,b=u.getZero(),w=u.getOne();for(;h.getDegree()>=(c/2|0);){let ye=d,Ae=b;if(d=h,b=w,d.isZero())throw new ft("r_{i-1} was zero");h=ye;let Ce=u.getZero();const Re=d.getCoefficient(d.getDegree()),Xe=u.inverse(Re);for(;h.getDegree()>=d.getDegree()&&!h.isZero();){const st=h.getDegree()-d.getDegree(),ht=u.multiply(h.getCoefficient(h.getDegree()),Xe);Ce=Ce.addOrSubtract(u.buildMonomial(st,ht)),h=h.addOrSubtract(d.multiplyByMonomial(st,ht))}if(w=Ce.multiply(b).addOrSubtract(Ae),h.getDegree()>=d.getDegree())throw new ke("Division algorithm failed to reduce polynomial?")}const _=w.getCoefficient(0);if(_===0)throw new ft("sigmaTilde(0) was zero");const H=u.inverse(_),K=w.multiplyScalar(H),oe=h.multiplyScalar(H);return[K,oe]}findErrorLocations(i){const s=i.getDegree();if(s===1)return Int32Array.from([i.getCoefficient(1)]);const c=new Int32Array(s);let u=0;const d=this.field;for(let h=1;h<d.getSize()&&u<s;h++)i.evaluateAt(h)===0&&(c[u]=d.inverse(h),u++);if(u!==s)throw new ft("Error locator degree does not match number of roots");return c}findErrorMagnitudes(i,s){const c=s.length,u=new Int32Array(c),d=this.field;for(let h=0;h<c;h++){const b=d.inverse(s[h]);let w=1;for(let _=0;_<c;_++)if(h!==_){const H=d.multiply(s[_],b),K=H&1?H&-2:H|1;w=d.multiply(w,K)}u[h]=d.multiply(i.evaluateAt(b),d.inverse(w)),d.getGeneratorBase()!==0&&(u[h]=d.multiply(u[h],b))}return u}}var ot;(function($){$[$.UPPER=0]="UPPER",$[$.LOWER=1]="LOWER",$[$.MIXED=2]="MIXED",$[$.DIGIT=3]="DIGIT",$[$.PUNCT=4]="PUNCT",$[$.BINARY=5]="BINARY"})(ot||(ot={}));class ze{decode(i){this.ddata=i;let s=i.getBits(),c=this.extractBits(s),u=this.correctBits(c),d=ze.convertBoolArrayToByteArray(u),h=ze.getEncodedData(u),b=new xe(d,h,null,null);return b.setNumBits(u.length),b}static highLevelDecode(i){return this.getEncodedData(i)}static getEncodedData(i){let s=i.length,c=ot.UPPER,u=ot.UPPER,d="",h=0;for(;h<s;)if(u===ot.BINARY){if(s-h<5)break;let b=ze.readCode(i,h,5);if(h+=5,b===0){if(s-h<11)break;b=ze.readCode(i,h,11)+31,h+=11}for(let w=0;w<b;w++){if(s-h<8){h=s;break}const _=ze.readCode(i,h,8);d+=k.castAsNonUtf8Char(_),h+=8}u=c}else{let b=u===ot.DIGIT?4:5;if(s-h<b)break;let w=ze.readCode(i,h,b);h+=b;let _=ze.getCharacter(u,w);_.startsWith("CTRL_")?(c=u,u=ze.getTable(_.charAt(5)),_.charAt(6)==="L"&&(c=u)):(d+=_,u=c)}return d}static getTable(i){switch(i){case"L":return ot.LOWER;case"P":return ot.PUNCT;case"M":return ot.MIXED;case"D":return ot.DIGIT;case"B":return ot.BINARY;case"U":default:return ot.UPPER}}static getCharacter(i,s){switch(i){case ot.UPPER:return ze.UPPER_TABLE[s];case ot.LOWER:return ze.LOWER_TABLE[s];case ot.MIXED:return ze.MIXED_TABLE[s];case ot.PUNCT:return ze.PUNCT_TABLE[s];case ot.DIGIT:return ze.DIGIT_TABLE[s];default:throw new ke("Bad table")}}correctBits(i){let s,c;this.ddata.getNbLayers()<=2?(c=6,s=Be.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(c=8,s=Be.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(c=10,s=Be.AZTEC_DATA_10):(c=12,s=Be.AZTEC_DATA_12);let u=this.ddata.getNbDatablocks(),d=i.length/c;if(d<u)throw new B;let h=i.length%c,b=new Int32Array(d);for(let oe=0;oe<d;oe++,h+=c)b[oe]=ze.readCode(i,h,c);try{new he(s).decode(b,d-u)}catch(oe){throw new B(oe)}let w=(1<<c)-1,_=0;for(let oe=0;oe<u;oe++){let ye=b[oe];if(ye===0||ye===w)throw new B;(ye===1||ye===w-1)&&_++}let H=new Array(u*c-_),K=0;for(let oe=0;oe<u;oe++){let ye=b[oe];if(ye===1||ye===w-1)H.fill(ye>1,K,K+c-1),K+=c-1;else for(let Ae=c-1;Ae>=0;--Ae)H[K++]=(ye&1<<Ae)!==0}return H}extractBits(i){let s=this.ddata.isCompact(),c=this.ddata.getNbLayers(),u=(s?11:14)+c*4,d=new Int32Array(u),h=new Array(this.totalBitsInLayer(c,s));if(s)for(let b=0;b<d.length;b++)d[b]=b;else{let b=u+1+2*j.truncDivision(j.truncDivision(u,2)-1,15),w=u/2,_=j.truncDivision(b,2);for(let H=0;H<w;H++){let K=H+j.truncDivision(H,15);d[w-H-1]=_-K-1,d[w+H]=_+K+1}}for(let b=0,w=0;b<c;b++){let _=(c-b)*4+(s?9:12),H=b*2,K=u-1-H;for(let oe=0;oe<_;oe++){let ye=oe*2;for(let Ae=0;Ae<2;Ae++)h[w+ye+Ae]=i.get(d[H+Ae],d[H+oe]),h[w+2*_+ye+Ae]=i.get(d[H+oe],d[K-Ae]),h[w+4*_+ye+Ae]=i.get(d[K-Ae],d[K-oe]),h[w+6*_+ye+Ae]=i.get(d[K-oe],d[H+Ae])}w+=_*8}return h}static readCode(i,s,c){let u=0;for(let d=s;d<s+c;d++)u<<=1,i[d]&&(u|=1);return u}static readByte(i,s){let c=i.length-s;return c>=8?ze.readCode(i,s,8):ze.readCode(i,s,c)<<8-c}static convertBoolArrayToByteArray(i){let s=new Uint8Array((i.length+7)/8);for(let c=0;c<s.length;c++)s[c]=ze.readByte(i,8*c);return s}totalBitsInLayer(i,s){return((s?88:112)+16*i)*i}}ze.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],ze.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],ze.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],ze.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],ze.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Pe{constructor(){}static round(i){return i===NaN?0:i<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:i>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:i+(i<0?-.5:.5)|0}static distance(i,s,c,u){const d=i-c,h=s-u;return Math.sqrt(d*d+h*h)}static sum(i){let s=0;for(let c=0,u=i.length;c!==u;c++){const d=i[c];s+=d}return s}}class ct{static floatToIntBits(i){return i}}ct.MAX_VALUE=Number.MAX_SAFE_INTEGER;class We{constructor(i,s){this.x=i,this.y=s}getX(){return this.x}getY(){return this.y}equals(i){if(i instanceof We){const s=i;return this.x===s.x&&this.y===s.y}return!1}hashCode(){return 31*ct.floatToIntBits(this.x)+ct.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(i){const s=this.distance(i[0],i[1]),c=this.distance(i[1],i[2]),u=this.distance(i[0],i[2]);let d,h,b;if(c>=s&&c>=u?(h=i[0],d=i[1],b=i[2]):u>=c&&u>=s?(h=i[1],d=i[0],b=i[2]):(h=i[2],d=i[0],b=i[1]),this.crossProductZ(d,h,b)<0){const w=d;d=b,b=w}i[0]=d,i[1]=h,i[2]=b}static distance(i,s){return Pe.distance(i.x,i.y,s.x,s.y)}static crossProductZ(i,s,c){const u=s.x,d=s.y;return(c.x-u)*(i.y-d)-(c.y-d)*(i.x-u)}}class mt{constructor(i,s){this.bits=i,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class Ue extends mt{constructor(i,s,c,u,d){super(i,s),this.compact=c,this.nbDatablocks=u,this.nbLayers=d}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class it{constructor(i,s,c,u){this.image=i,this.height=i.getHeight(),this.width=i.getWidth(),s==null&&(s=it.INIT_SIZE),c==null&&(c=i.getWidth()/2|0),u==null&&(u=i.getHeight()/2|0);const d=s/2|0;if(this.leftInit=c-d,this.rightInit=c+d,this.upInit=u-d,this.downInit=u+d,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new G}detect(){let i=this.leftInit,s=this.rightInit,c=this.upInit,u=this.downInit,d=!1,h=!0,b=!1,w=!1,_=!1,H=!1,K=!1;const oe=this.width,ye=this.height;for(;h;){h=!1;let Ae=!0;for(;(Ae||!w)&&s<oe;)Ae=this.containsBlackPoint(c,u,s,!1),Ae?(s++,h=!0,w=!0):w||s++;if(s>=oe){d=!0;break}let Ce=!0;for(;(Ce||!_)&&u<ye;)Ce=this.containsBlackPoint(i,s,u,!0),Ce?(u++,h=!0,_=!0):_||u++;if(u>=ye){d=!0;break}let Re=!0;for(;(Re||!H)&&i>=0;)Re=this.containsBlackPoint(c,u,i,!1),Re?(i--,h=!0,H=!0):H||i--;if(i<0){d=!0;break}let Xe=!0;for(;(Xe||!K)&&c>=0;)Xe=this.containsBlackPoint(i,s,c,!0),Xe?(c--,h=!0,K=!0):K||c--;if(c<0){d=!0;break}h&&(b=!0)}if(!d&&b){const Ae=s-i;let Ce=null;for(let ht=1;Ce===null&&ht<Ae;ht++)Ce=this.getBlackPointOnSegment(i,u-ht,i+ht,u);if(Ce==null)throw new G;let Re=null;for(let ht=1;Re===null&&ht<Ae;ht++)Re=this.getBlackPointOnSegment(i,c+ht,i+ht,c);if(Re==null)throw new G;let Xe=null;for(let ht=1;Xe===null&&ht<Ae;ht++)Xe=this.getBlackPointOnSegment(s,c+ht,s-ht,c);if(Xe==null)throw new G;let st=null;for(let ht=1;st===null&&ht<Ae;ht++)st=this.getBlackPointOnSegment(s,u-ht,s-ht,u);if(st==null)throw new G;return this.centerEdges(st,Ce,Xe,Re)}else throw new G}getBlackPointOnSegment(i,s,c,u){const d=Pe.round(Pe.distance(i,s,c,u)),h=(c-i)/d,b=(u-s)/d,w=this.image;for(let _=0;_<d;_++){const H=Pe.round(i+_*h),K=Pe.round(s+_*b);if(w.get(H,K))return new We(H,K)}return null}centerEdges(i,s,c,u){const d=i.getX(),h=i.getY(),b=s.getX(),w=s.getY(),_=c.getX(),H=c.getY(),K=u.getX(),oe=u.getY(),ye=it.CORR;return d<this.width/2?[new We(K-ye,oe+ye),new We(b+ye,w+ye),new We(_-ye,H-ye),new We(d+ye,h-ye)]:[new We(K+ye,oe+ye),new We(b+ye,w-ye),new We(_-ye,H+ye),new We(d-ye,h-ye)]}containsBlackPoint(i,s,c,u){const d=this.image;if(u){for(let h=i;h<=s;h++)if(d.get(h,c))return!0}else for(let h=i;h<=s;h++)if(d.get(c,h))return!0;return!1}}it.INIT_SIZE=10,it.CORR=1;class Oe{static checkAndNudgePoints(i,s){const c=i.getWidth(),u=i.getHeight();let d=!0;for(let h=0;h<s.length&&d;h+=2){const b=Math.floor(s[h]),w=Math.floor(s[h+1]);if(b<-1||b>c||w<-1||w>u)throw new G;d=!1,b===-1?(s[h]=0,d=!0):b===c&&(s[h]=c-1,d=!0),w===-1?(s[h+1]=0,d=!0):w===u&&(s[h+1]=u-1,d=!0)}d=!0;for(let h=s.length-2;h>=0&&d;h-=2){const b=Math.floor(s[h]),w=Math.floor(s[h+1]);if(b<-1||b>c||w<-1||w>u)throw new G;d=!1,b===-1?(s[h]=0,d=!0):b===c&&(s[h]=c-1,d=!0),w===-1?(s[h+1]=0,d=!0):w===u&&(s[h+1]=u-1,d=!0)}}}class Ze{constructor(i,s,c,u,d,h,b,w,_){this.a11=i,this.a21=s,this.a31=c,this.a12=u,this.a22=d,this.a32=h,this.a13=b,this.a23=w,this.a33=_}static quadrilateralToQuadrilateral(i,s,c,u,d,h,b,w,_,H,K,oe,ye,Ae,Ce,Re){const Xe=Ze.quadrilateralToSquare(i,s,c,u,d,h,b,w);return Ze.squareToQuadrilateral(_,H,K,oe,ye,Ae,Ce,Re).times(Xe)}transformPoints(i){const s=i.length,c=this.a11,u=this.a12,d=this.a13,h=this.a21,b=this.a22,w=this.a23,_=this.a31,H=this.a32,K=this.a33;for(let oe=0;oe<s;oe+=2){const ye=i[oe],Ae=i[oe+1],Ce=d*ye+w*Ae+K;i[oe]=(c*ye+h*Ae+_)/Ce,i[oe+1]=(u*ye+b*Ae+H)/Ce}}transformPointsWithValues(i,s){const c=this.a11,u=this.a12,d=this.a13,h=this.a21,b=this.a22,w=this.a23,_=this.a31,H=this.a32,K=this.a33,oe=i.length;for(let ye=0;ye<oe;ye++){const Ae=i[ye],Ce=s[ye],Re=d*Ae+w*Ce+K;i[ye]=(c*Ae+h*Ce+_)/Re,s[ye]=(u*Ae+b*Ce+H)/Re}}static squareToQuadrilateral(i,s,c,u,d,h,b,w){const _=i-c+d-b,H=s-u+h-w;if(_===0&&H===0)return new Ze(c-i,d-c,i,u-s,h-u,s,0,0,1);{const K=c-d,oe=b-d,ye=u-h,Ae=w-h,Ce=K*Ae-oe*ye,Re=(_*Ae-oe*H)/Ce,Xe=(K*H-_*ye)/Ce;return new Ze(c-i+Re*c,b-i+Xe*b,i,u-s+Re*u,w-s+Xe*w,s,Re,Xe,1)}}static quadrilateralToSquare(i,s,c,u,d,h,b,w){return Ze.squareToQuadrilateral(i,s,c,u,d,h,b,w).buildAdjoint()}buildAdjoint(){return new Ze(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(i){return new Ze(this.a11*i.a11+this.a21*i.a12+this.a31*i.a13,this.a11*i.a21+this.a21*i.a22+this.a31*i.a23,this.a11*i.a31+this.a21*i.a32+this.a31*i.a33,this.a12*i.a11+this.a22*i.a12+this.a32*i.a13,this.a12*i.a21+this.a22*i.a22+this.a32*i.a23,this.a12*i.a31+this.a22*i.a32+this.a32*i.a33,this.a13*i.a11+this.a23*i.a12+this.a33*i.a13,this.a13*i.a21+this.a23*i.a22+this.a33*i.a23,this.a13*i.a31+this.a23*i.a32+this.a33*i.a33)}}class pt extends Oe{sampleGrid(i,s,c,u,d,h,b,w,_,H,K,oe,ye,Ae,Ce,Re,Xe,st,ht){const ut=Ze.quadrilateralToQuadrilateral(u,d,h,b,w,_,H,K,oe,ye,Ae,Ce,Re,Xe,st,ht);return this.sampleGridWithTransform(i,s,c,ut)}sampleGridWithTransform(i,s,c,u){if(s<=0||c<=0)throw new G;const d=new J(s,c),h=new Float32Array(2*s);for(let b=0;b<c;b++){const w=h.length,_=b+.5;for(let H=0;H<w;H+=2)h[H]=H/2+.5,h[H+1]=_;u.transformPoints(h),Oe.checkAndNudgePoints(i,h);try{for(let H=0;H<w;H+=2)i.get(Math.floor(h[H]),Math.floor(h[H+1]))&&d.set(H/2,b)}catch{throw new G}}return d}}class St{static setGridSampler(i){St.gridSampler=i}static getInstance(){return St.gridSampler}}St.gridSampler=new pt;class yt{constructor(i,s){this.x=i,this.y=s}toResultPoint(){return new We(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class qt{constructor(i){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=i}detect(){return this.detectMirror(!1)}detectMirror(i){let s=this.getMatrixCenter(),c=this.getBullsEyeCorners(s);if(i){let h=c[0];c[0]=c[2],c[2]=h}this.extractParameters(c);let u=this.sampleGrid(this.image,c[this.shift%4],c[(this.shift+1)%4],c[(this.shift+2)%4],c[(this.shift+3)%4]),d=this.getMatrixCornerPoints(c);return new Ue(u,d,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(i){if(!this.isValidPoint(i[0])||!this.isValidPoint(i[1])||!this.isValidPoint(i[2])||!this.isValidPoint(i[3]))throw new G;let s=2*this.nbCenterLayers,c=new Int32Array([this.sampleLine(i[0],i[1],s),this.sampleLine(i[1],i[2],s),this.sampleLine(i[2],i[3],s),this.sampleLine(i[3],i[0],s)]);this.shift=this.getRotation(c,s);let u=0;for(let h=0;h<4;h++){let b=c[(this.shift+h)%4];this.compact?(u<<=7,u+=b>>1&127):(u<<=10,u+=(b>>2&992)+(b>>1&31))}let d=this.getCorrectedParameterData(u,this.compact);this.compact?(this.nbLayers=(d>>6)+1,this.nbDataBlocks=(d&63)+1):(this.nbLayers=(d>>11)+1,this.nbDataBlocks=(d&2047)+1)}getRotation(i,s){let c=0;i.forEach((u,d,h)=>{let b=(u>>s-2<<1)+(u&1);c=(c<<3)+b}),c=((c&1)<<11)+(c>>1);for(let u=0;u<4;u++)if(j.bitCount(c^this.EXPECTED_CORNER_BITS[u])<=2)return u;throw new G}getCorrectedParameterData(i,s){let c,u;s?(c=7,u=2):(c=10,u=4);let d=c-u,h=new Int32Array(c);for(let w=c-1;w>=0;--w)h[w]=i&15,i>>=4;try{new he(Be.AZTEC_PARAM).decode(h,d)}catch{throw new G}let b=0;for(let w=0;w<u;w++)b=(b<<4)+h[w];return b}getBullsEyeCorners(i){let s=i,c=i,u=i,d=i,h=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let K=this.getFirstDifferent(s,h,1,-1),oe=this.getFirstDifferent(c,h,1,1),ye=this.getFirstDifferent(u,h,-1,1),Ae=this.getFirstDifferent(d,h,-1,-1);if(this.nbCenterLayers>2){let Ce=this.distancePoint(Ae,K)*this.nbCenterLayers/(this.distancePoint(d,s)*(this.nbCenterLayers+2));if(Ce<.75||Ce>1.25||!this.isWhiteOrBlackRectangle(K,oe,ye,Ae))break}s=K,c=oe,u=ye,d=Ae,h=!h}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new G;this.compact=this.nbCenterLayers===5;let b=new We(s.getX()+.5,s.getY()-.5),w=new We(c.getX()+.5,c.getY()+.5),_=new We(u.getX()-.5,u.getY()+.5),H=new We(d.getX()-.5,d.getY()-.5);return this.expandSquare([b,w,_,H],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let i,s,c,u;try{let b=new it(this.image).detect();i=b[0],s=b[1],c=b[2],u=b[3]}catch{let w=this.image.getWidth()/2,_=this.image.getHeight()/2;i=this.getFirstDifferent(new yt(w+7,_-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new yt(w+7,_+7),!1,1,1).toResultPoint(),c=this.getFirstDifferent(new yt(w-7,_+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new yt(w-7,_-7),!1,-1,-1).toResultPoint()}let d=Pe.round((i.getX()+u.getX()+s.getX()+c.getX())/4),h=Pe.round((i.getY()+u.getY()+s.getY()+c.getY())/4);try{let b=new it(this.image,15,d,h).detect();i=b[0],s=b[1],c=b[2],u=b[3]}catch{i=this.getFirstDifferent(new yt(d+7,h-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new yt(d+7,h+7),!1,1,1).toResultPoint(),c=this.getFirstDifferent(new yt(d-7,h+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new yt(d-7,h-7),!1,-1,-1).toResultPoint()}return d=Pe.round((i.getX()+u.getX()+s.getX()+c.getX())/4),h=Pe.round((i.getY()+u.getY()+s.getY()+c.getY())/4),new yt(d,h)}getMatrixCornerPoints(i){return this.expandSquare(i,2*this.nbCenterLayers,this.getDimension())}sampleGrid(i,s,c,u,d){let h=St.getInstance(),b=this.getDimension(),w=b/2-this.nbCenterLayers,_=b/2+this.nbCenterLayers;return h.sampleGrid(i,b,b,w,w,_,w,_,_,w,_,s.getX(),s.getY(),c.getX(),c.getY(),u.getX(),u.getY(),d.getX(),d.getY())}sampleLine(i,s,c){let u=0,d=this.distanceResultPoint(i,s),h=d/c,b=i.getX(),w=i.getY(),_=h*(s.getX()-i.getX())/d,H=h*(s.getY()-i.getY())/d;for(let K=0;K<c;K++)this.image.get(Pe.round(b+K*_),Pe.round(w+K*H))&&(u|=1<<c-K-1);return u}isWhiteOrBlackRectangle(i,s,c,u){let d=3;i=new yt(i.getX()-d,i.getY()+d),s=new yt(s.getX()-d,s.getY()-d),c=new yt(c.getX()+d,c.getY()-d),u=new yt(u.getX()+d,u.getY()+d);let h=this.getColor(u,i);if(h===0)return!1;let b=this.getColor(i,s);return b!==h||(b=this.getColor(s,c),b!==h)?!1:(b=this.getColor(c,u),b===h)}getColor(i,s){let c=this.distancePoint(i,s),u=(s.getX()-i.getX())/c,d=(s.getY()-i.getY())/c,h=0,b=i.getX(),w=i.getY(),_=this.image.get(i.getX(),i.getY()),H=Math.ceil(c);for(let oe=0;oe<H;oe++)b+=u,w+=d,this.image.get(Pe.round(b),Pe.round(w))!==_&&h++;let K=h/c;return K>.1&&K<.9?0:K<=.1===_?1:-1}getFirstDifferent(i,s,c,u){let d=i.getX()+c,h=i.getY()+u;for(;this.isValid(d,h)&&this.image.get(d,h)===s;)d+=c,h+=u;for(d-=c,h-=u;this.isValid(d,h)&&this.image.get(d,h)===s;)d+=c;for(d-=c;this.isValid(d,h)&&this.image.get(d,h)===s;)h+=u;return h-=u,new yt(d,h)}expandSquare(i,s,c){let u=c/(2*s),d=i[0].getX()-i[2].getX(),h=i[0].getY()-i[2].getY(),b=(i[0].getX()+i[2].getX())/2,w=(i[0].getY()+i[2].getY())/2,_=new We(b+u*d,w+u*h),H=new We(b-u*d,w-u*h);d=i[1].getX()-i[3].getX(),h=i[1].getY()-i[3].getY(),b=(i[1].getX()+i[3].getX())/2,w=(i[1].getY()+i[3].getY())/2;let K=new We(b+u*d,w+u*h),oe=new We(b-u*d,w-u*h);return[_,K,H,oe]}isValid(i,s){return i>=0&&i<this.image.getWidth()&&s>0&&s<this.image.getHeight()}isValidPoint(i){let s=Pe.round(i.getX()),c=Pe.round(i.getY());return this.isValid(s,c)}distancePoint(i,s){return Pe.distance(i.getX(),i.getY(),s.getX(),s.getY())}distanceResultPoint(i,s){return Pe.distance(i.getX(),i.getY(),s.getX(),s.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(j.truncDivision(this.nbLayers-4,8)+1)+15}}class xt{decode(i,s=null){let c=null,u=new qt(i.getBlackMatrix()),d=null,h=null;try{let H=u.detectMirror(!1);d=H.getPoints(),this.reportFoundResultPoints(s,d),h=new ze().decode(H)}catch(H){c=H}if(h==null)try{let H=u.detectMirror(!0);d=H.getPoints(),this.reportFoundResultPoints(s,d),h=new ze().decode(H)}catch(H){throw c??H}let b=new ee(h.getText(),h.getRawBytes(),h.getNumBits(),d,ae.AZTEC,D.currentTimeMillis()),w=h.getByteSegments();w!=null&&b.putMetadata(we.BYTE_SEGMENTS,w);let _=h.getECLevel();return _!=null&&b.putMetadata(we.ERROR_CORRECTION_LEVEL,_),b}reportFoundResultPoints(i,s){if(i!=null){let c=i.get(ie.NEED_RESULT_POINT_CALLBACK);c!=null&&s.forEach((u,d,h)=>{c.foundPossibleResultPoint(u)})}}reset(){}}class hn extends q{constructor(i=500){super(new xt,i)}}class Tt{decode(i,s){try{return this.doDecode(i,s)}catch{if(s&&s.get(ie.TRY_HARDER)===!0&&i.isRotateSupported()){const d=i.rotateCounterClockwise(),h=this.doDecode(d,s),b=h.getResultMetadata();let w=270;b!==null&&b.get(we.ORIENTATION)===!0&&(w=w+b.get(we.ORIENTATION)%360),h.putMetadata(we.ORIENTATION,w);const _=h.getResultPoints();if(_!==null){const H=d.getHeight();for(let K=0;K<_.length;K++)_[K]=new We(H-_[K].getY()-1,_[K].getX())}return h}else throw new G}}reset(){}doDecode(i,s){const c=i.getWidth(),u=i.getHeight();let d=new V(c);const h=s&&s.get(ie.TRY_HARDER)===!0,b=Math.max(1,u>>(h?8:5));let w;h?w=u:w=15;const _=Math.trunc(u/2);for(let H=0;H<w;H++){const K=Math.trunc((H+1)/2),oe=(H&1)===0,ye=_+b*(oe?K:-K);if(ye<0||ye>=u)break;try{d=i.getBlackRow(ye,d)}catch{continue}for(let Ae=0;Ae<2;Ae++){if(Ae===1&&(d.reverse(),s&&s.get(ie.NEED_RESULT_POINT_CALLBACK)===!0)){const Ce=new Map;s.forEach((Re,Xe)=>Ce.set(Xe,Re)),Ce.delete(ie.NEED_RESULT_POINT_CALLBACK),s=Ce}try{const Ce=this.decodeRow(ye,d,s);if(Ae===1){Ce.putMetadata(we.ORIENTATION,180);const Re=Ce.getResultPoints();Re!==null&&(Re[0]=new We(c-Re[0].getX()-1,Re[0].getY()),Re[1]=new We(c-Re[1].getX()-1,Re[1].getY()))}return Ce}catch{}}}throw new G}static recordPattern(i,s,c){const u=c.length;for(let _=0;_<u;_++)c[_]=0;const d=i.getSize();if(s>=d)throw new G;let h=!i.get(s),b=0,w=s;for(;w<d;){if(i.get(w)!==h)c[b]++;else{if(++b===u)break;c[b]=1,h=!h}w++}if(!(b===u||b===u-1&&w===d))throw new G}static recordPatternInReverse(i,s,c){let u=c.length,d=i.get(s);for(;s>0&&u>=0;)i.get(--s)!==d&&(u--,d=!d);if(u>=0)throw new G;Tt.recordPattern(i,s+1,c)}static patternMatchVariance(i,s,c){const u=i.length;let d=0,h=0;for(let _=0;_<u;_++)d+=i[_],h+=s[_];if(d<h)return Number.POSITIVE_INFINITY;const b=d/h;c*=b;let w=0;for(let _=0;_<u;_++){const H=i[_],K=s[_]*b,oe=H>K?H-K:K-H;if(oe>c)return Number.POSITIVE_INFINITY;w+=oe}return w/d}}class gt extends Tt{static findStartPattern(i){const s=i.getSize(),c=i.getNextSet(0);let u=0,d=Int32Array.from([0,0,0,0,0,0]),h=c,b=!1;const w=6;for(let _=c;_<s;_++)if(i.get(_)!==b)d[u]++;else{if(u===w-1){let H=gt.MAX_AVG_VARIANCE,K=-1;for(let oe=gt.CODE_START_A;oe<=gt.CODE_START_C;oe++){const ye=Tt.patternMatchVariance(d,gt.CODE_PATTERNS[oe],gt.MAX_INDIVIDUAL_VARIANCE);ye<H&&(H=ye,K=oe)}if(K>=0&&i.isRange(Math.max(0,h-(_-h)/2),h,!1))return Int32Array.from([h,_,K]);h+=d[0]+d[1],d=d.slice(2,d.length-1),d[u-1]=0,d[u]=0,u--}else u++;d[u]=1,b=!b}throw new G}static decodeCode(i,s,c){Tt.recordPattern(i,c,s);let u=gt.MAX_AVG_VARIANCE,d=-1;for(let h=0;h<gt.CODE_PATTERNS.length;h++){const b=gt.CODE_PATTERNS[h],w=this.patternMatchVariance(s,b,gt.MAX_INDIVIDUAL_VARIANCE);w<u&&(u=w,d=h)}if(d>=0)return d;throw new G}decodeRow(i,s,c){const u=c&&c.get(ie.ASSUME_GS1)===!0,d=gt.findStartPattern(s),h=d[2];let b=0;const w=new Uint8Array(20);w[b++]=h;let _;switch(h){case gt.CODE_START_A:_=gt.CODE_CODE_A;break;case gt.CODE_START_B:_=gt.CODE_CODE_B;break;case gt.CODE_START_C:_=gt.CODE_CODE_C;break;default:throw new B}let H=!1,K=!1,oe="",ye=d[0],Ae=d[1];const Ce=Int32Array.from([0,0,0,0,0,0]);let Re=0,Xe=0,st=h,ht=0,ut=!0,cn=!1,Zt=!1;for(;!H;){const Ba=K;switch(K=!1,Re=Xe,Xe=gt.decodeCode(s,Ce,Ae),w[b++]=Xe,Xe!==gt.CODE_STOP&&(ut=!0),Xe!==gt.CODE_STOP&&(ht++,st+=ht*Xe),ye=Ae,Ae+=Ce.reduce((ra,ia)=>ra+ia,0),Xe){case gt.CODE_START_A:case gt.CODE_START_B:case gt.CODE_START_C:throw new B}switch(_){case gt.CODE_CODE_A:if(Xe<64)Zt===cn?oe+=String.fromCharCode(32+Xe):oe+=String.fromCharCode(32+Xe+128),Zt=!1;else if(Xe<96)Zt===cn?oe+=String.fromCharCode(Xe-64):oe+=String.fromCharCode(Xe+64),Zt=!1;else switch(Xe!==gt.CODE_STOP&&(ut=!1),Xe){case gt.CODE_FNC_1:u&&(oe.length===0?oe+="]C1":oe+="");break;case gt.CODE_FNC_2:case gt.CODE_FNC_3:break;case gt.CODE_FNC_4_A:!cn&&Zt?(cn=!0,Zt=!1):cn&&Zt?(cn=!1,Zt=!1):Zt=!0;break;case gt.CODE_SHIFT:K=!0,_=gt.CODE_CODE_B;break;case gt.CODE_CODE_B:_=gt.CODE_CODE_B;break;case gt.CODE_CODE_C:_=gt.CODE_CODE_C;break;case gt.CODE_STOP:H=!0;break}break;case gt.CODE_CODE_B:if(Xe<96)Zt===cn?oe+=String.fromCharCode(32+Xe):oe+=String.fromCharCode(32+Xe+128),Zt=!1;else switch(Xe!==gt.CODE_STOP&&(ut=!1),Xe){case gt.CODE_FNC_1:u&&(oe.length===0?oe+="]C1":oe+="");break;case gt.CODE_FNC_2:case gt.CODE_FNC_3:break;case gt.CODE_FNC_4_B:!cn&&Zt?(cn=!0,Zt=!1):cn&&Zt?(cn=!1,Zt=!1):Zt=!0;break;case gt.CODE_SHIFT:K=!0,_=gt.CODE_CODE_A;break;case gt.CODE_CODE_A:_=gt.CODE_CODE_A;break;case gt.CODE_CODE_C:_=gt.CODE_CODE_C;break;case gt.CODE_STOP:H=!0;break}break;case gt.CODE_CODE_C:if(Xe<100)Xe<10&&(oe+="0"),oe+=Xe;else switch(Xe!==gt.CODE_STOP&&(ut=!1),Xe){case gt.CODE_FNC_1:u&&(oe.length===0?oe+="]C1":oe+="");break;case gt.CODE_CODE_A:_=gt.CODE_CODE_A;break;case gt.CODE_CODE_B:_=gt.CODE_CODE_B;break;case gt.CODE_STOP:H=!0;break}break}Ba&&(_=_===gt.CODE_CODE_A?gt.CODE_CODE_B:gt.CODE_CODE_A)}const jr=Ae-ye;if(Ae=s.getNextUnset(Ae),!s.isRange(Ae,Math.min(s.getSize(),Ae+(Ae-ye)/2),!1))throw new G;if(st-=ht*Re,st%103!==Re)throw new v;const ii=oe.length;if(ii===0)throw new G;ii>0&&ut&&(_===gt.CODE_CODE_C?oe=oe.substring(0,ii-2):oe=oe.substring(0,ii-1));const Sr=(d[1]+d[0])/2,Nn=ye+jr/2,pr=w.length,Br=new Uint8Array(pr);for(let Ba=0;Ba<pr;Ba++)Br[Ba]=w[Ba];const qi=[new We(Sr,i),new We(Nn,i)];return new ee(oe,Br,0,qi,ae.CODE_128,new Date().getTime())}}gt.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],gt.MAX_AVG_VARIANCE=.25,gt.MAX_INDIVIDUAL_VARIANCE=.7,gt.CODE_SHIFT=98,gt.CODE_CODE_C=99,gt.CODE_CODE_B=100,gt.CODE_CODE_A=101,gt.CODE_FNC_1=102,gt.CODE_FNC_2=97,gt.CODE_FNC_3=96,gt.CODE_FNC_4_A=101,gt.CODE_FNC_4_B=100,gt.CODE_START_A=103,gt.CODE_START_B=104,gt.CODE_START_C=105,gt.CODE_STOP=106;class Te extends Tt{constructor(i=!1,s=!1){super(),this.usingCheckDigit=i,this.extendedMode=s,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(i,s,c){let u=this.counters;u.fill(0),this.decodeRowResult="";let d=Te.findAsteriskPattern(s,u),h=s.getNextSet(d[1]),b=s.getSize(),w,_;do{Te.recordPattern(s,h,u);let Ce=Te.toNarrowWidePattern(u);if(Ce<0)throw new G;w=Te.patternToChar(Ce),this.decodeRowResult+=w,_=h;for(let Re of u)h+=Re;h=s.getNextSet(h)}while(w!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let H=0;for(let Ce of u)H+=Ce;let K=h-_-H;if(h!==b&&K*2<H)throw new G;if(this.usingCheckDigit){let Ce=this.decodeRowResult.length-1,Re=0;for(let Xe=0;Xe<Ce;Xe++)Re+=Te.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Xe));if(this.decodeRowResult.charAt(Ce)!==Te.ALPHABET_STRING.charAt(Re%43))throw new v;this.decodeRowResult=this.decodeRowResult.substring(0,Ce)}if(this.decodeRowResult.length===0)throw new G;let oe;this.extendedMode?oe=Te.decodeExtended(this.decodeRowResult):oe=this.decodeRowResult;let ye=(d[1]+d[0])/2,Ae=_+H/2;return new ee(oe,null,0,[new We(ye,i),new We(Ae,i)],ae.CODE_39,new Date().getTime())}static findAsteriskPattern(i,s){let c=i.getSize(),u=i.getNextSet(0),d=0,h=u,b=!1,w=s.length;for(let _=u;_<c;_++)if(i.get(_)!==b)s[d]++;else{if(d===w-1){if(this.toNarrowWidePattern(s)===Te.ASTERISK_ENCODING&&i.isRange(Math.max(0,h-Math.floor((_-h)/2)),h,!1))return[h,_];h+=s[0]+s[1],s.copyWithin(0,2,2+d-1),s[d-1]=0,s[d]=0,d--}else d++;s[d]=1,b=!b}throw new G}static toNarrowWidePattern(i){let s=i.length,c=0,u;do{let d=2147483647;for(let w of i)w<d&&w>c&&(d=w);c=d,u=0;let h=0,b=0;for(let w=0;w<s;w++){let _=i[w];_>c&&(b|=1<<s-1-w,u++,h+=_)}if(u===3){for(let w=0;w<s&&u>0;w++){let _=i[w];if(_>c&&(u--,_*2>=h))return-1}return b}}while(u>3);return-1}static patternToChar(i){for(let s=0;s<Te.CHARACTER_ENCODINGS.length;s++)if(Te.CHARACTER_ENCODINGS[s]===i)return Te.ALPHABET_STRING.charAt(s);if(i===Te.ASTERISK_ENCODING)return"*";throw new G}static decodeExtended(i){let s=i.length,c="";for(let u=0;u<s;u++){let d=i.charAt(u);if(d==="+"||d==="$"||d==="%"||d==="/"){let h=i.charAt(u+1),b="\0";switch(d){case"+":if(h>="A"&&h<="Z")b=String.fromCharCode(h.charCodeAt(0)+32);else throw new B;break;case"$":if(h>="A"&&h<="Z")b=String.fromCharCode(h.charCodeAt(0)-64);else throw new B;break;case"%":if(h>="A"&&h<="E")b=String.fromCharCode(h.charCodeAt(0)-38);else if(h>="F"&&h<="J")b=String.fromCharCode(h.charCodeAt(0)-11);else if(h>="K"&&h<="O")b=String.fromCharCode(h.charCodeAt(0)+16);else if(h>="P"&&h<="T")b=String.fromCharCode(h.charCodeAt(0)+43);else if(h==="U")b="\0";else if(h==="V")b="@";else if(h==="W")b="`";else if(h==="X"||h==="Y"||h==="Z")b="";else throw new B;break;case"/":if(h>="A"&&h<="O")b=String.fromCharCode(h.charCodeAt(0)-32);else if(h==="Z")b=":";else throw new B;break}c+=b,u++}else c+=d}return c}}Te.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Te.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Te.ASTERISK_ENCODING=148;class lt extends Tt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(i,s,c){let u=this.decodeStart(s),d=this.decodeEnd(s),h=new Q;lt.decodeMiddle(s,u[1],d[0],h);let b=h.toString(),w=null;c!=null&&(w=c.get(ie.ALLOWED_LENGTHS)),w==null&&(w=lt.DEFAULT_ALLOWED_LENGTHS);let _=b.length,H=!1,K=0;for(let Ae of w){if(_===Ae){H=!0;break}Ae>K&&(K=Ae)}if(!H&&_>K&&(H=!0),!H)throw new B;const oe=[new We(u[1],i),new We(d[0],i)];return new ee(b,null,0,oe,ae.ITF,new Date().getTime())}static decodeMiddle(i,s,c,u){let d=new Int32Array(10),h=new Int32Array(5),b=new Int32Array(5);for(d.fill(0),h.fill(0),b.fill(0);s<c;){Tt.recordPattern(i,s,d);for(let _=0;_<5;_++){let H=2*_;h[_]=d[H],b[_]=d[H+1]}let w=lt.decodeDigit(h);u.append(w.toString()),w=this.decodeDigit(b),u.append(w.toString()),d.forEach(function(_){s+=_})}}decodeStart(i){let s=lt.skipWhiteSpace(i),c=lt.findGuardPattern(i,s,lt.START_PATTERN);return this.narrowLineWidth=(c[1]-c[0])/4,this.validateQuietZone(i,c[0]),c}validateQuietZone(i,s){let c=this.narrowLineWidth*10;c=c<s?c:s;for(let u=s-1;c>0&&u>=0&&!i.get(u);u--)c--;if(c!==0)throw new G}static skipWhiteSpace(i){const s=i.getSize(),c=i.getNextSet(0);if(c===s)throw new G;return c}decodeEnd(i){i.reverse();try{let s=lt.skipWhiteSpace(i),c;try{c=lt.findGuardPattern(i,s,lt.END_PATTERN_REVERSED[0])}catch(d){d instanceof G&&(c=lt.findGuardPattern(i,s,lt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(i,c[0]);let u=c[0];return c[0]=i.getSize()-c[1],c[1]=i.getSize()-u,c}finally{i.reverse()}}static findGuardPattern(i,s,c){let u=c.length,d=new Int32Array(u),h=i.getSize(),b=!1,w=0,_=s;d.fill(0);for(let H=s;H<h;H++)if(i.get(H)!==b)d[w]++;else{if(w===u-1){if(Tt.patternMatchVariance(d,c,lt.MAX_INDIVIDUAL_VARIANCE)<lt.MAX_AVG_VARIANCE)return[_,H];_+=d[0]+d[1],D.arraycopy(d,2,d,0,w-1),d[w-1]=0,d[w]=0,w--}else w++;d[w]=1,b=!b}throw new G}static decodeDigit(i){let s=lt.MAX_AVG_VARIANCE,c=-1,u=lt.PATTERNS.length;for(let d=0;d<u;d++){let h=lt.PATTERNS[d],b=Tt.patternMatchVariance(i,h,lt.MAX_INDIVIDUAL_VARIANCE);b<s?(s=b,c=d):b===s&&(c=-1)}if(c>=0)return c%10;throw new G}}lt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],lt.MAX_AVG_VARIANCE=.38,lt.MAX_INDIVIDUAL_VARIANCE=.5,lt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],lt.START_PATTERN=Int32Array.from([1,1,1,1]),lt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class It extends Tt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(i){let s=!1,c,u=0,d=Int32Array.from([0,0,0]);for(;!s;){d=Int32Array.from([0,0,0]),c=It.findGuardPattern(i,u,!1,this.START_END_PATTERN,d);let h=c[0];u=c[1];let b=h-(u-h);b>=0&&(s=i.isRange(b,h,!1))}return c}static checkChecksum(i){return It.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let s=i.length;if(s===0)return!1;let c=parseInt(i.charAt(s-1),10);return It.getStandardUPCEANChecksum(i.substring(0,s-1))===c}static getStandardUPCEANChecksum(i){let s=i.length,c=0;for(let u=s-1;u>=0;u-=2){let d=i.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new B;c+=d}c*=3;for(let u=s-2;u>=0;u-=2){let d=i.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new B;c+=d}return(1e3-c)%10}static decodeEnd(i,s){return It.findGuardPattern(i,s,!1,It.START_END_PATTERN,new Int32Array(It.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(i,s,c,u){return this.findGuardPattern(i,s,c,u,new Int32Array(u.length))}static findGuardPattern(i,s,c,u,d){let h=i.getSize();s=c?i.getNextUnset(s):i.getNextSet(s);let b=0,w=s,_=u.length,H=c;for(let K=s;K<h;K++)if(i.get(K)!==H)d[b]++;else{if(b===_-1){if(Tt.patternMatchVariance(d,u,It.MAX_INDIVIDUAL_VARIANCE)<It.MAX_AVG_VARIANCE)return Int32Array.from([w,K]);w+=d[0]+d[1];let oe=d.slice(2,d.length-1);for(let ye=0;ye<b-1;ye++)d[ye]=oe[ye];d[b-1]=0,d[b]=0,b--}else b++;d[b]=1,H=!H}throw new G}static decodeDigit(i,s,c,u){this.recordPattern(i,c,s);let d=this.MAX_AVG_VARIANCE,h=-1,b=u.length;for(let w=0;w<b;w++){let _=u[w],H=Tt.patternMatchVariance(s,_,It.MAX_INDIVIDUAL_VARIANCE);H<d&&(d=H,h=w)}if(h>=0)return h;throw new G}}It.MAX_AVG_VARIANCE=.48,It.MAX_INDIVIDUAL_VARIANCE=.7,It.START_END_PATTERN=Int32Array.from([1,1,1]),It.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),It.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),It.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Pt{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,s,c){let u=this.decodeRowStringBuffer,d=this.decodeMiddle(s,c,u),h=u.toString(),b=Pt.parseExtensionString(h),w=[new We((c[0]+c[1])/2,i),new We(d,i)],_=new ee(h,null,0,w,ae.UPC_EAN_EXTENSION,new Date().getTime());return b!=null&&_.putAllMetadata(b),_}decodeMiddle(i,s,c){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=i.getSize(),h=s[1],b=0;for(let _=0;_<5&&h<d;_++){let H=It.decodeDigit(i,u,h,It.L_AND_G_PATTERNS);c+=String.fromCharCode(48+H%10);for(let K of u)h+=K;H>=10&&(b|=1<<4-_),_!==4&&(h=i.getNextSet(h),h=i.getNextUnset(h))}if(c.length!==5)throw new G;let w=this.determineCheckDigit(b);if(Pt.extensionChecksum(c.toString())!==w)throw new G;return h}static extensionChecksum(i){let s=i.length,c=0;for(let u=s-2;u>=0;u-=2)c+=i.charAt(u).charCodeAt(0)-48;c*=3;for(let u=s-1;u>=0;u-=2)c+=i.charAt(u).charCodeAt(0)-48;return c*=3,c%10}determineCheckDigit(i){for(let s=0;s<10;s++)if(i===this.CHECK_DIGIT_ENCODINGS[s])return s;throw new G}static parseExtensionString(i){if(i.length!==5)return null;let s=Pt.parseExtension5String(i);return s==null?null:new Map([[we.SUGGESTED_PRICE,s]])}static parseExtension5String(i){let s;switch(i.charAt(0)){case"0":s="£";break;case"5":s="$";break;case"9":switch(i){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}s="";break;default:s="";break}let c=parseInt(i.substring(1)),u=(c/100).toString(),d=c%100,h=d<10?"0"+d:d.toString();return s+u+"."+h}}class Yn{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,s,c){let u=this.decodeRowStringBuffer,d=this.decodeMiddle(s,c,u),h=u.toString(),b=Yn.parseExtensionString(h),w=[new We((c[0]+c[1])/2,i),new We(d,i)],_=new ee(h,null,0,w,ae.UPC_EAN_EXTENSION,new Date().getTime());return b!=null&&_.putAllMetadata(b),_}decodeMiddle(i,s,c){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=i.getSize(),h=s[1],b=0;for(let w=0;w<2&&h<d;w++){let _=It.decodeDigit(i,u,h,It.L_AND_G_PATTERNS);c+=String.fromCharCode(48+_%10);for(let H of u)h+=H;_>=10&&(b|=1<<1-w),w!==1&&(h=i.getNextSet(h),h=i.getNextUnset(h))}if(c.length!==2)throw new G;if(parseInt(c.toString())%4!==b)throw new G;return h}static parseExtensionString(i){return i.length!==2?null:new Map([[we.ISSUE_NUMBER,parseInt(i)]])}}class kn{static decodeRow(i,s,c){let u=It.findGuardPattern(s,c,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Pt().decodeRow(i,s,u)}catch{return new Yn().decodeRow(i,s,u)}}}kn.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class en extends It{constructor(){super(),this.decodeRowStringBuffer="",en.L_AND_G_PATTERNS=en.L_PATTERNS.map(i=>Int32Array.from(i));for(let i=10;i<20;i++){let s=en.L_PATTERNS[i-10],c=new Int32Array(s.length);for(let u=0;u<s.length;u++)c[u]=s[s.length-u-1];en.L_AND_G_PATTERNS[i]=c}}decodeRow(i,s,c){let u=en.findStartGuardPattern(s),d=c==null?null:c.get(ie.NEED_RESULT_POINT_CALLBACK);if(d!=null){const ut=new We((u[0]+u[1])/2,i);d.foundPossibleResultPoint(ut)}let h=this.decodeMiddle(s,u,this.decodeRowStringBuffer),b=h.rowOffset,w=h.resultString;if(d!=null){const ut=new We(b,i);d.foundPossibleResultPoint(ut)}let _=this.decodeEnd(s,b);if(d!=null){const ut=new We((_[0]+_[1])/2,i);d.foundPossibleResultPoint(ut)}let H=_[1],K=H+(H-_[0]);if(K>=s.getSize()||!s.isRange(H,K,!1))throw new G;let oe=w.toString();if(oe.length<8)throw new B;if(!en.checkChecksum(oe))throw new v;let ye=(u[1]+u[0])/2,Ae=(_[1]+_[0])/2,Ce=this.getBarcodeFormat(),Re=[new We(ye,i),new We(Ae,i)],Xe=new ee(oe,null,0,Re,Ce,new Date().getTime()),st=0;try{let ut=kn.decodeRow(i,s,_[1]);Xe.putMetadata(we.UPC_EAN_EXTENSION,ut.getText()),Xe.putAllMetadata(ut.getResultMetadata()),Xe.addResultPoints(ut.getResultPoints()),st=ut.getText().length}catch{}let ht=c==null?null:c.get(ie.ALLOWED_EAN_EXTENSIONS);if(ht!=null){let ut=!1;for(let cn in ht)if(st.toString()===cn){ut=!0;break}if(!ut)throw new G}return Xe}decodeEnd(i,s){return en.findGuardPattern(i,s,!1,en.START_END_PATTERN,new Int32Array(en.START_END_PATTERN.length).fill(0))}static checkChecksum(i){return en.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let s=i.length;if(s===0)return!1;let c=parseInt(i.charAt(s-1),10);return en.getStandardUPCEANChecksum(i.substring(0,s-1))===c}static getStandardUPCEANChecksum(i){let s=i.length,c=0;for(let u=s-1;u>=0;u-=2){let d=i.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new B;c+=d}c*=3;for(let u=s-2;u>=0;u-=2){let d=i.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new B;c+=d}return(1e3-c)%10}}class $r extends en{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,s,c){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=i.getSize(),h=s[1],b=0;for(let _=0;_<6&&h<d;_++){let H=en.decodeDigit(i,u,h,en.L_AND_G_PATTERNS);c+=String.fromCharCode(48+H%10);for(let K of u)h+=K;H>=10&&(b|=1<<5-_)}c=$r.determineFirstDigit(c,b),h=en.findGuardPattern(i,h,!0,en.MIDDLE_PATTERN,new Int32Array(en.MIDDLE_PATTERN.length).fill(0))[1];for(let _=0;_<6&&h<d;_++){let H=en.decodeDigit(i,u,h,en.L_PATTERNS);c+=String.fromCharCode(48+H);for(let K of u)h+=K}return{rowOffset:h,resultString:c}}getBarcodeFormat(){return ae.EAN_13}static determineFirstDigit(i,s){for(let c=0;c<10;c++)if(s===this.FIRST_DIGIT_ENCODINGS[c])return i=String.fromCharCode(48+c)+i,i;throw new G}}$r.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class $n extends en{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,s,c){const u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=i.getSize(),h=s[1];for(let w=0;w<4&&h<d;w++){let _=en.decodeDigit(i,u,h,en.L_PATTERNS);c+=String.fromCharCode(48+_);for(let H of u)h+=H}h=en.findGuardPattern(i,h,!0,en.MIDDLE_PATTERN,new Int32Array(en.MIDDLE_PATTERN.length).fill(0))[1];for(let w=0;w<4&&h<d;w++){let _=en.decodeDigit(i,u,h,en.L_PATTERNS);c+=String.fromCharCode(48+_);for(let H of u)h+=H}return{rowOffset:h,resultString:c}}getBarcodeFormat(){return ae.EAN_8}}class Wt extends en{constructor(){super(...arguments),this.ean13Reader=new $r}getBarcodeFormat(){return ae.UPC_A}decode(i,s){return this.maybeReturnResult(this.ean13Reader.decode(i))}decodeRow(i,s,c){return this.maybeReturnResult(this.ean13Reader.decodeRow(i,s,c))}decodeMiddle(i,s,c){return this.ean13Reader.decodeMiddle(i,s,c)}maybeReturnResult(i){let s=i.getText();if(s.charAt(0)==="0"){let c=new ee(s.substring(1),null,null,i.getResultPoints(),ae.UPC_A);return i.getResultMetadata()!=null&&c.putAllMetadata(i.getResultMetadata()),c}else throw new G}reset(){this.ean13Reader.reset()}}class nn extends en{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(i,s,c){const u=this.decodeMiddleCounters.map(_=>_);u[0]=0,u[1]=0,u[2]=0,u[3]=0;const d=i.getSize();let h=s[1],b=0;for(let _=0;_<6&&h<d;_++){const H=nn.decodeDigit(i,u,h,nn.L_AND_G_PATTERNS);c+=String.fromCharCode(48+H%10);for(let K of u)h+=K;H>=10&&(b|=1<<5-_)}let w=nn.determineNumSysAndCheckDigit(c,b);return{rowOffset:h,resultString:w}}decodeEnd(i,s){return nn.findGuardPatternWithoutCounters(i,s,!0,nn.MIDDLE_END_PATTERN)}checkChecksum(i){return en.checkChecksum(nn.convertUPCEtoUPCA(i))}static determineNumSysAndCheckDigit(i,s){for(let c=0;c<=1;c++)for(let u=0;u<10;u++)if(s===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[c][u]){let d=String.fromCharCode(48+c),h=String.fromCharCode(48+u);return d+i+h}throw G.getNotFoundInstance()}getBarcodeFormat(){return ae.UPC_E}static convertUPCEtoUPCA(i){const s=i.slice(1,7).split("").map(d=>d.charCodeAt(0)),c=new Q;c.append(i.charAt(0));let u=s[5];switch(u){case 0:case 1:case 2:c.appendChars(s,0,2),c.append(u),c.append("0000"),c.appendChars(s,2,3);break;case 3:c.appendChars(s,0,3),c.append("00000"),c.appendChars(s,3,2);break;case 4:c.appendChars(s,0,4),c.append("00000"),c.append(s[4]);break;default:c.appendChars(s,0,5),c.append("0000"),c.append(u);break}return i.length>=8&&c.append(i.charAt(7)),c.toString()}}nn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),nn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class ma extends Tt{constructor(i){super();let s=i==null?null:i.get(ie.POSSIBLE_FORMATS),c=[];r(s)?(c.push(new $r),c.push(new Wt),c.push(new $n),c.push(new nn)):(s.indexOf(ae.EAN_13)>-1&&c.push(new $r),s.indexOf(ae.UPC_A)>-1&&c.push(new Wt),s.indexOf(ae.EAN_8)>-1&&c.push(new $n),s.indexOf(ae.UPC_E)>-1&&c.push(new nn)),this.readers=c}decodeRow(i,s,c){for(let u of this.readers)try{const d=u.decodeRow(i,s,c),h=d.getBarcodeFormat()===ae.EAN_13&&d.getText().charAt(0)==="0",b=c==null?null:c.get(ie.POSSIBLE_FORMATS),w=b==null||b.includes(ae.UPC_A);if(h&&w){const _=d.getRawBytes(),H=new ee(d.getText().substring(1),_,_?_.length:null,d.getResultPoints(),ae.UPC_A);return H.putAllMetadata(d.getResultMetadata()),H}return d}catch{}throw new G}reset(){for(let i of this.readers)i.reset()}}class yn extends Tt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(i,s){for(let c=0;c<s.length;c++)if(Tt.patternMatchVariance(i,s[c],yn.MAX_INDIVIDUAL_VARIANCE)<yn.MAX_AVG_VARIANCE)return c;throw new G}static count(i){return Pe.sum(new Int32Array(i))}static increment(i,s){let c=0,u=s[0];for(let d=1;d<i.length;d++)s[d]>u&&(u=s[d],c=d);i[c]++}static decrement(i,s){let c=0,u=s[0];for(let d=1;d<i.length;d++)s[d]<u&&(u=s[d],c=d);i[c]--}static isFinderPattern(i){let s=i[0]+i[1],c=s+i[2]+i[3],u=s/c;if(u>=yn.MIN_FINDER_PATTERN_RATIO&&u<=yn.MAX_FINDER_PATTERN_RATIO){let d=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;for(let b of i)b>h&&(h=b),b<d&&(d=b);return h<10*d}return!1}}yn.MAX_AVG_VARIANCE=.2,yn.MAX_INDIVIDUAL_VARIANCE=.45,yn.MIN_FINDER_PATTERN_RATIO=9.5/12,yn.MAX_FINDER_PATTERN_RATIO=12.5/14;class ei{constructor(i,s){this.value=i,this.checksumPortion=s}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(i){if(!(i instanceof ei))return!1;const s=i;return this.value===s.value&&this.checksumPortion===s.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class vi{constructor(i,s,c,u,d){this.value=i,this.startEnd=s,this.value=i,this.startEnd=s,this.resultPoints=new Array,this.resultPoints.push(new We(c,d)),this.resultPoints.push(new We(u,d))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(i){if(!(i instanceof vi))return!1;const s=i;return this.value===s.value}hashCode(){return this.value}}class Dt{constructor(){}static getRSSvalue(i,s,c){let u=0;for(let w of i)u+=w;let d=0,h=0,b=i.length;for(let w=0;w<b-1;w++){let _;for(_=1,h|=1<<w;_<i[w];_++,h&=~(1<<w)){let H=Dt.combins(u-_-1,b-w-2);if(c&&h===0&&u-_-(b-w-1)>=b-w-1&&(H-=Dt.combins(u-_-(b-w),b-w-2)),b-w-1>1){let K=0;for(let oe=u-_-(b-w-2);oe>s;oe--)K+=Dt.combins(u-_-oe-1,b-w-3);H-=K*(b-1-w)}else u-_>s&&H--;d+=H}u-=_}return d}static combins(i,s){let c,u;i-s>s?(u=s,c=i-s):(u=i-s,c=s);let d=1,h=1;for(let b=i;b>c;b--)d*=b,h<=u&&(d/=h,h++);for(;h<=u;)d/=h,h++;return d}}class zi{static buildBitArray(i){let s=i.length*2-1;i[i.length-1].getRightChar()==null&&(s-=1);let c=12*s,u=new V(c),d=0,b=i[0].getRightChar().getValue();for(let w=11;w>=0;--w)b&1<<w&&u.set(d),d++;for(let w=1;w<i.length;++w){let _=i[w],H=_.getLeftChar().getValue();for(let K=11;K>=0;--K)H&1<<K&&u.set(d),d++;if(_.getRightChar()!=null){let K=_.getRightChar().getValue();for(let oe=11;oe>=0;--oe)K&1<<oe&&u.set(d),d++}}return u}}class Wr{constructor(i,s){s?this.decodedInformation=null:(this.finished=i,this.decodedInformation=s)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Yr{constructor(i){this.newPosition=i}getNewPosition(){return this.newPosition}}class vn extends Yr{constructor(i,s){super(i),this.value=s}getValue(){return this.value}isFNC1(){return this.value===vn.FNC1}}vn.FNC1="$";class Pn extends Yr{constructor(i,s,c){super(i),c?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=s}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Xn extends Yr{constructor(i,s,c){if(super(i),s<0||s>10||c<0||c>10)throw new B;this.firstDigit=s,this.secondDigit=c}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Xn.FNC1}isSecondDigitFNC1(){return this.secondDigit===Xn.FNC1}isAnyFNC1(){return this.firstDigit===Xn.FNC1||this.secondDigit===Xn.FNC1}}Xn.FNC1=10;class wt{constructor(){}static parseFieldsInGeneralPurpose(i){if(!i)return null;if(i.length<2)throw new G;let s=i.substring(0,2);for(let d of wt.TWO_DIGIT_DATA_LENGTH)if(d[0]===s)return d[1]===wt.VARIABLE_LENGTH?wt.processVariableAI(2,d[2],i):wt.processFixedAI(2,d[1],i);if(i.length<3)throw new G;let c=i.substring(0,3);for(let d of wt.THREE_DIGIT_DATA_LENGTH)if(d[0]===c)return d[1]===wt.VARIABLE_LENGTH?wt.processVariableAI(3,d[2],i):wt.processFixedAI(3,d[1],i);for(let d of wt.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(d[0]===c)return d[1]===wt.VARIABLE_LENGTH?wt.processVariableAI(4,d[2],i):wt.processFixedAI(4,d[1],i);if(i.length<4)throw new G;let u=i.substring(0,4);for(let d of wt.FOUR_DIGIT_DATA_LENGTH)if(d[0]===u)return d[1]===wt.VARIABLE_LENGTH?wt.processVariableAI(4,d[2],i):wt.processFixedAI(4,d[1],i);throw new G}static processFixedAI(i,s,c){if(c.length<i)throw new G;let u=c.substring(0,i);if(c.length<i+s)throw new G;let d=c.substring(i,i+s),h=c.substring(i+s),b="("+u+")"+d,w=wt.parseFieldsInGeneralPurpose(h);return w==null?b:b+w}static processVariableAI(i,s,c){let u=c.substring(0,i),d;c.length<i+s?d=c.length:d=i+s;let h=c.substring(i,d),b=c.substring(d),w="("+u+")"+h,_=wt.parseFieldsInGeneralPurpose(b);return _==null?w:w+_}}wt.VARIABLE_LENGTH=[],wt.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",wt.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",wt.VARIABLE_LENGTH,20],["22",wt.VARIABLE_LENGTH,29],["30",wt.VARIABLE_LENGTH,8],["37",wt.VARIABLE_LENGTH,8],["90",wt.VARIABLE_LENGTH,30],["91",wt.VARIABLE_LENGTH,30],["92",wt.VARIABLE_LENGTH,30],["93",wt.VARIABLE_LENGTH,30],["94",wt.VARIABLE_LENGTH,30],["95",wt.VARIABLE_LENGTH,30],["96",wt.VARIABLE_LENGTH,30],["97",wt.VARIABLE_LENGTH,3],["98",wt.VARIABLE_LENGTH,30],["99",wt.VARIABLE_LENGTH,30]],wt.THREE_DIGIT_DATA_LENGTH=[["240",wt.VARIABLE_LENGTH,30],["241",wt.VARIABLE_LENGTH,30],["242",wt.VARIABLE_LENGTH,6],["250",wt.VARIABLE_LENGTH,30],["251",wt.VARIABLE_LENGTH,30],["253",wt.VARIABLE_LENGTH,17],["254",wt.VARIABLE_LENGTH,20],["400",wt.VARIABLE_LENGTH,30],["401",wt.VARIABLE_LENGTH,30],["402",17],["403",wt.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",wt.VARIABLE_LENGTH,20],["421",wt.VARIABLE_LENGTH,15],["422",3],["423",wt.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],wt.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",wt.VARIABLE_LENGTH,15],["391",wt.VARIABLE_LENGTH,18],["392",wt.VARIABLE_LENGTH,15],["393",wt.VARIABLE_LENGTH,18],["703",wt.VARIABLE_LENGTH,30]],wt.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",wt.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",wt.VARIABLE_LENGTH,20],["8003",wt.VARIABLE_LENGTH,30],["8004",wt.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",wt.VARIABLE_LENGTH,30],["8008",wt.VARIABLE_LENGTH,12],["8018",18],["8020",wt.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",wt.VARIABLE_LENGTH,70],["8200",wt.VARIABLE_LENGTH,70]];class ui{constructor(i){this.buffer=new Q,this.information=i}decodeAllCodes(i,s){let c=s,u=null;do{let d=this.decodeGeneralPurposeField(c,u),h=wt.parseFieldsInGeneralPurpose(d.getNewString());if(h!=null&&i.append(h),d.isRemaining()?u=""+d.getRemainingValue():u=null,c===d.getNewPosition())break;c=d.getNewPosition()}while(!0);return i.toString()}isStillNumeric(i){if(i+7>this.information.getSize())return i+4<=this.information.getSize();for(let s=i;s<i+3;++s)if(this.information.get(s))return!0;return this.information.get(i+3)}decodeNumeric(i){if(i+7>this.information.getSize()){let d=this.extractNumericValueFromBitArray(i,4);return d===0?new Xn(this.information.getSize(),Xn.FNC1,Xn.FNC1):new Xn(this.information.getSize(),d-1,Xn.FNC1)}let s=this.extractNumericValueFromBitArray(i,7),c=(s-8)/11,u=(s-8)%11;return new Xn(i+7,c,u)}extractNumericValueFromBitArray(i,s){return ui.extractNumericValueFromBitArray(this.information,i,s)}static extractNumericValueFromBitArray(i,s,c){let u=0;for(let d=0;d<c;++d)i.get(s+d)&&(u|=1<<c-d-1);return u}decodeGeneralPurposeField(i,s){this.buffer.setLengthToZero(),s!=null&&this.buffer.append(s),this.current.setPosition(i);let c=this.parseBlocks();return c!=null&&c.isRemaining()?new Pn(this.current.getPosition(),this.buffer.toString(),c.getRemainingValue()):new Pn(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let i,s;do{let c=this.current.getPosition();if(this.current.isAlpha()?(s=this.parseAlphaBlock(),i=s.isFinished()):this.current.isIsoIec646()?(s=this.parseIsoIec646Block(),i=s.isFinished()):(s=this.parseNumericBlock(),i=s.isFinished()),!(c!==this.current.getPosition())&&!i)break}while(!i);return s.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let i=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFirstDigitFNC1()){let s;return i.isSecondDigitFNC1()?s=new Pn(this.current.getPosition(),this.buffer.toString()):s=new Pn(this.current.getPosition(),this.buffer.toString(),i.getSecondDigit()),new Wr(!0,s)}if(this.buffer.append(i.getFirstDigit()),i.isSecondDigitFNC1()){let s=new Pn(this.current.getPosition(),this.buffer.toString());return new Wr(!0,s)}this.buffer.append(i.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Wr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let i=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let s=new Pn(this.current.getPosition(),this.buffer.toString());return new Wr(!0,s)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Wr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let i=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let s=new Pn(this.current.getPosition(),this.buffer.toString());return new Wr(!0,s)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Wr(!1)}isStillIsoIec646(i){if(i+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(i,5);if(s>=5&&s<16)return!0;if(i+7>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(i,7);if(c>=64&&c<116)return!0;if(i+8>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(i,8);return u>=232&&u<253}decodeIsoIec646(i){let s=this.extractNumericValueFromBitArray(i,5);if(s===15)return new vn(i+5,vn.FNC1);if(s>=5&&s<15)return new vn(i+5,"0"+(s-5));let c=this.extractNumericValueFromBitArray(i,7);if(c>=64&&c<90)return new vn(i+7,""+(c+1));if(c>=90&&c<116)return new vn(i+7,""+(c+7));let u=this.extractNumericValueFromBitArray(i,8),d;switch(u){case 232:d="!";break;case 233:d='"';break;case 234:d="%";break;case 235:d="&";break;case 236:d="'";break;case 237:d="(";break;case 238:d=")";break;case 239:d="*";break;case 240:d="+";break;case 241:d=",";break;case 242:d="-";break;case 243:d=".";break;case 244:d="/";break;case 245:d=":";break;case 246:d=";";break;case 247:d="<";break;case 248:d="=";break;case 249:d=">";break;case 250:d="?";break;case 251:d="_";break;case 252:d=" ";break;default:throw new B}return new vn(i+8,d)}isStillAlpha(i){if(i+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(i,5);if(s>=5&&s<16)return!0;if(i+6>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(i,6);return c>=16&&c<63}decodeAlphanumeric(i){let s=this.extractNumericValueFromBitArray(i,5);if(s===15)return new vn(i+5,vn.FNC1);if(s>=5&&s<15)return new vn(i+5,"0"+(s-5));let c=this.extractNumericValueFromBitArray(i,6);if(c>=32&&c<58)return new vn(i+6,""+(c+33));let u;switch(c){case 58:u="*";break;case 59:u=",";break;case 60:u="-";break;case 61:u=".";break;case 62:u="/";break;default:throw new ke("Decoding invalid alphanumeric value: "+c)}return new vn(i+6,u)}isAlphaTo646ToAlphaLatch(i){if(i+1>this.information.getSize())return!1;for(let s=0;s<5&&s+i<this.information.getSize();++s)if(s===2){if(!this.information.get(i+2))return!1}else if(this.information.get(i+s))return!1;return!0}isAlphaOr646ToNumericLatch(i){if(i+3>this.information.getSize())return!1;for(let s=i;s<i+3;++s)if(this.information.get(s))return!1;return!0}isNumericToAlphaNumericLatch(i){if(i+1>this.information.getSize())return!1;for(let s=0;s<4&&s+i<this.information.getSize();++s)if(this.information.get(i+s))return!1;return!0}}class Ti{constructor(i){this.information=i,this.generalDecoder=new ui(i)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class er extends Ti{constructor(i){super(i)}encodeCompressedGtin(i,s){i.append("(01)");let c=i.length();i.append("9"),this.encodeCompressedGtinWithoutAI(i,s,c)}encodeCompressedGtinWithoutAI(i,s,c){for(let u=0;u<4;++u){let d=this.getGeneralDecoder().extractNumericValueFromBitArray(s+10*u,10);d/100===0&&i.append("0"),d/10===0&&i.append("0"),i.append(d)}er.appendCheckDigit(i,c)}static appendCheckDigit(i,s){let c=0;for(let u=0;u<13;u++){let d=i.charAt(u+s).charCodeAt(0)-48;c+=u&1?d:3*d}c=10-c%10,c===10&&(c=0),i.append(c)}}er.GTIN_SIZE=40;class ti extends er{constructor(i){super(i)}parseInformation(){let i=new Q;i.append("(01)");let s=i.length(),c=this.getGeneralDecoder().extractNumericValueFromBitArray(ti.HEADER_SIZE,4);return i.append(c),this.encodeCompressedGtinWithoutAI(i,ti.HEADER_SIZE+4,s),this.getGeneralDecoder().decodeAllCodes(i,ti.HEADER_SIZE+44)}}ti.HEADER_SIZE=4;class _i extends Ti{constructor(i){super(i)}parseInformation(){let i=new Q;return this.getGeneralDecoder().decodeAllCodes(i,_i.HEADER_SIZE)}}_i.HEADER_SIZE=5;class di extends er{constructor(i){super(i)}encodeCompressedWeight(i,s,c){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(s,c);this.addWeightCode(i,u);let d=this.checkWeight(u),h=1e5;for(let b=0;b<5;++b)d/h===0&&i.append("0"),h/=10;i.append(d)}}class Tr extends di{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()!=Tr.HEADER_SIZE+di.GTIN_SIZE+Tr.WEIGHT_SIZE)throw new G;let i=new Q;return this.encodeCompressedGtin(i,Tr.HEADER_SIZE),this.encodeCompressedWeight(i,Tr.HEADER_SIZE+di.GTIN_SIZE,Tr.WEIGHT_SIZE),i.toString()}}Tr.HEADER_SIZE=5,Tr.WEIGHT_SIZE=15;class ms extends Tr{constructor(i){super(i)}addWeightCode(i,s){i.append("(3103)")}checkWeight(i){return i}}class Bs extends Tr{constructor(i){super(i)}addWeightCode(i,s){s<1e4?i.append("(3202)"):i.append("(3203)")}checkWeight(i){return i<1e4?i:i-1e4}}class fi extends er{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<fi.HEADER_SIZE+er.GTIN_SIZE)throw new G;let i=new Q;this.encodeCompressedGtin(i,fi.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(fi.HEADER_SIZE+er.GTIN_SIZE,fi.LAST_DIGIT_SIZE);i.append("(392"),i.append(s),i.append(")");let c=this.getGeneralDecoder().decodeGeneralPurposeField(fi.HEADER_SIZE+er.GTIN_SIZE+fi.LAST_DIGIT_SIZE,null);return i.append(c.getNewString()),i.toString()}}fi.HEADER_SIZE=8,fi.LAST_DIGIT_SIZE=2;class vr extends er{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<vr.HEADER_SIZE+er.GTIN_SIZE)throw new G;let i=new Q;this.encodeCompressedGtin(i,vr.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(vr.HEADER_SIZE+er.GTIN_SIZE,vr.LAST_DIGIT_SIZE);i.append("(393"),i.append(s),i.append(")");let c=this.getGeneralDecoder().extractNumericValueFromBitArray(vr.HEADER_SIZE+er.GTIN_SIZE+vr.LAST_DIGIT_SIZE,vr.FIRST_THREE_DIGITS_SIZE);c/100==0&&i.append("0"),c/10==0&&i.append("0"),i.append(c);let u=this.getGeneralDecoder().decodeGeneralPurposeField(vr.HEADER_SIZE+er.GTIN_SIZE+vr.LAST_DIGIT_SIZE+vr.FIRST_THREE_DIGITS_SIZE,null);return i.append(u.getNewString()),i.toString()}}vr.HEADER_SIZE=8,vr.LAST_DIGIT_SIZE=2,vr.FIRST_THREE_DIGITS_SIZE=10;class In extends di{constructor(i,s,c){super(i),this.dateCode=c,this.firstAIdigits=s}parseInformation(){if(this.getInformation().getSize()!=In.HEADER_SIZE+In.GTIN_SIZE+In.WEIGHT_SIZE+In.DATE_SIZE)throw new G;let i=new Q;return this.encodeCompressedGtin(i,In.HEADER_SIZE),this.encodeCompressedWeight(i,In.HEADER_SIZE+In.GTIN_SIZE,In.WEIGHT_SIZE),this.encodeCompressedDate(i,In.HEADER_SIZE+In.GTIN_SIZE+In.WEIGHT_SIZE),i.toString()}encodeCompressedDate(i,s){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(s,In.DATE_SIZE);if(c==38400)return;i.append("("),i.append(this.dateCode),i.append(")");let u=c%32;c/=32;let d=c%12+1;c/=12;let h=c;h/10==0&&i.append("0"),i.append(h),d/10==0&&i.append("0"),i.append(d),u/10==0&&i.append("0"),i.append(u)}addWeightCode(i,s){i.append("("),i.append(this.firstAIdigits),i.append(s/1e5),i.append(")")}checkWeight(i){return i%1e5}}In.HEADER_SIZE=8,In.WEIGHT_SIZE=20,In.DATE_SIZE=16;function po($){try{if($.get(1))return new ti($);if(!$.get(2))return new _i($);switch(ui.extractNumericValueFromBitArray($,1,4)){case 4:return new ms($);case 5:return new Bs($)}switch(ui.extractNumericValueFromBitArray($,1,5)){case 12:return new fi($);case 13:return new vr($)}switch(ui.extractNumericValueFromBitArray($,1,7)){case 56:return new In($,"310","11");case 57:return new In($,"320","11");case 58:return new In($,"310","13");case 59:return new In($,"320","13");case 60:return new In($,"310","15");case 61:return new In($,"320","15");case 62:return new In($,"310","17");case 63:return new In($,"320","17")}}catch(i){throw console.log(i),new ke("unknown decoder: "+$)}}class $i{constructor(i,s,c,u){this.leftchar=i,this.rightchar=s,this.finderpattern=c,this.maybeLast=u}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(i,s){return i instanceof $i?$i.equalsOrNull(i.leftchar,s.leftchar)&&$i.equalsOrNull(i.rightchar,s.rightchar)&&$i.equalsOrNull(i.finderpattern,s.finderpattern):!1}static equalsOrNull(i,s){return i===null?s===null:$i.equals(i,s)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Ve{constructor(i,s,c){this.pairs=i,this.rowNumber=s,this.wasReversed=c}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(i){return this.checkEqualitity(this,i)}toString(){return"{ "+this.pairs+" }"}equals(i,s){return i instanceof Ve?this.checkEqualitity(i,s)&&i.wasReversed===s.wasReversed:!1}checkEqualitity(i,s){if(!i||!s)return;let c;return i.forEach((u,d)=>{s.forEach(h=>{u.getLeftChar().getValue()===h.getLeftChar().getValue()&&u.getRightChar().getValue()===h.getRightChar().getValue()&&u.getFinderPatter().getValue()===h.getFinderPatter().getValue()&&(c=!0)})}),c}}class Ne extends yn{constructor(i){super(...arguments),this.pairs=new Array(Ne.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=i===!0}decodeRow(i,s,c){this.pairs.length=0,this.startFromEven=!1;try{return Ne.constructResult(this.decodeRow2pairs(i,s))}catch(u){this.verbose&&console.log(u)}return this.pairs.length=0,this.startFromEven=!0,Ne.constructResult(this.decodeRow2pairs(i,s))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(i,s){let c=!1;for(;!c;)try{this.pairs.push(this.retrieveNextPair(s,this.pairs,i))}catch(d){if(d instanceof G){if(!this.pairs.length)throw new G;c=!0}}if(this.checkChecksum())return this.pairs;let u;if(this.rows.length?u=!0:u=!1,this.storeRow(i,!1),u){let d=this.checkRowsBoolean(!1);if(d!=null||(d=this.checkRowsBoolean(!0),d!=null))return d}throw new G}checkRowsBoolean(i){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,i&&(this.rows=this.rows.reverse());let s=null;try{s=this.checkRows(new Array,0)}catch(c){this.verbose&&console.log(c)}return i&&(this.rows=this.rows.reverse()),s}checkRows(i,s){for(let c=s;c<this.rows.length;c++){let u=this.rows[c];this.pairs.length=0;for(let h of i)this.pairs.push(h.getPairs());if(this.pairs.push(u.getPairs()),!Ne.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let d=new Array(i);d.push(u);try{return this.checkRows(d,c+1)}catch(h){this.verbose&&console.log(h)}}throw new G}static isValidSequence(i){for(let s of Ne.FINDER_PATTERN_SEQUENCES){if(i.length>s.length)continue;let c=!0;for(let u=0;u<i.length;u++)if(i[u].getFinderPattern().getValue()!=s[u]){c=!1;break}if(c)return!0}return!1}storeRow(i,s){let c=0,u=!1,d=!1;for(;c<this.rows.length;){let h=this.rows[c];if(h.getRowNumber()>i){d=h.isEquivalent(this.pairs);break}u=h.isEquivalent(this.pairs),c++}d||u||Ne.isPartialRow(this.pairs,this.rows)||(this.rows.push(c,new Ve(this.pairs,i,s)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(i,s){for(let c of s)if(c.getPairs().length!==i.length){for(let u of c.getPairs())for(let d of i)if($i.equals(u,d))break}}static isPartialRow(i,s){for(let c of s){let u=!0;for(let d of i){let h=!1;for(let b of c.getPairs())if(d.equals(b)){h=!0;break}if(!h){u=!1;break}}if(u)return!0}return!1}getRows(){return this.rows}static constructResult(i){let s=zi.buildBitArray(i),u=po(s).parseInformation(),d=i[0].getFinderPattern().getResultPoints(),h=i[i.length-1].getFinderPattern().getResultPoints(),b=[d[0],d[1],h[0],h[1]];return new ee(u,null,null,b,ae.RSS_EXPANDED,null)}checkChecksum(){let i=this.pairs.get(0),s=i.getLeftChar(),c=i.getRightChar();if(c==null)return!1;let u=c.getChecksumPortion(),d=2;for(let b=1;b<this.pairs.size();++b){let w=this.pairs.get(b);u+=w.getLeftChar().getChecksumPortion(),d++;let _=w.getRightChar();_!=null&&(u+=_.getChecksumPortion(),d++)}return u%=211,211*(d-4)+u==s.getValue()}static getNextSecondBar(i,s){let c;return i.get(s)?(c=i.getNextUnset(s),c=i.getNextSet(c)):(c=i.getNextSet(s),c=i.getNextUnset(c)),c}retrieveNextPair(i,s,c){let u=s.length%2==0;this.startFromEven&&(u=!u);let d,h=!0,b=-1;do this.findNextPair(i,s,b),d=this.parseFoundFinderPattern(i,c,u),d==null?b=Ne.getNextSecondBar(i,this.startEnd[0]):h=!1;while(h);let w=this.decodeDataCharacter(i,d,u,!0);if(!this.isEmptyPair(s)&&s[s.length-1].mustBeLast())throw new G;let _;try{_=this.decodeDataCharacter(i,d,u,!1)}catch(H){_=null,this.verbose&&console.log(H)}return new $i(w,_,d,!0)}isEmptyPair(i){return i.length===0}findNextPair(i,s,c){let u=this.getDecodeFinderCounters();u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=i.getSize(),h;c>=0?h=c:this.isEmptyPair(s)?h=0:h=s[s.length-1].getFinderPattern().getStartEnd()[1];let b=s.length%2!=0;this.startFromEven&&(b=!b);let w=!1;for(;h<d&&(w=!i.get(h),!!w);)h++;let _=0,H=h;for(let K=h;K<d;K++)if(i.get(K)!=w)u[_]++;else{if(_==3){if(b&&Ne.reverseCounters(u),Ne.isFinderPattern(u)){this.startEnd[0]=H,this.startEnd[1]=K;return}b&&Ne.reverseCounters(u),H+=u[0]+u[1],u[0]=u[2],u[1]=u[3],u[2]=0,u[3]=0,_--}else _++;u[_]=1,w=!w}throw new G}static reverseCounters(i){let s=i.length;for(let c=0;c<s/2;++c){let u=i[c];i[c]=i[s-c-1],i[s-c-1]=u}}parseFoundFinderPattern(i,s,c){let u,d,h;if(c){let _=this.startEnd[0]-1;for(;_>=0&&!i.get(_);)_--;_++,u=this.startEnd[0]-_,d=_,h=this.startEnd[1]}else d=this.startEnd[0],h=i.getNextUnset(this.startEnd[1]+1),u=h-this.startEnd[1];let b=this.getDecodeFinderCounters();D.arraycopy(b,0,b,1,b.length-1),b[0]=u;let w;try{w=this.parseFinderValue(b,Ne.FINDER_PATTERNS)}catch{return null}return new vi(w,[d,h],d,h,s)}decodeDataCharacter(i,s,c,u){let d=this.getDataCharacterCounters();for(let Nn=0;Nn<d.length;Nn++)d[Nn]=0;if(u)Ne.recordPatternInReverse(i,s.getStartEnd()[0],d);else{Ne.recordPattern(i,s.getStartEnd()[1],d);for(let Nn=0,pr=d.length-1;Nn<pr;Nn++,pr--){let Br=d[Nn];d[Nn]=d[pr],d[pr]=Br}}let h=17,b=Pe.sum(new Int32Array(d))/h,w=(s.getStartEnd()[1]-s.getStartEnd()[0])/15;if(Math.abs(b-w)/w>.3)throw new G;let _=this.getOddCounts(),H=this.getEvenCounts(),K=this.getOddRoundingErrors(),oe=this.getEvenRoundingErrors();for(let Nn=0;Nn<d.length;Nn++){let pr=1*d[Nn]/b,Br=pr+.5;if(Br<1){if(pr<.3)throw new G;Br=1}else if(Br>8){if(pr>8.7)throw new G;Br=8}let qi=Nn/2;Nn&1?(H[qi]=Br,oe[qi]=pr-Br):(_[qi]=Br,K[qi]=pr-Br)}this.adjustOddEvenCounts(h);let ye=4*s.getValue()+(c?0:2)+(u?0:1)-1,Ae=0,Ce=0;for(let Nn=_.length-1;Nn>=0;Nn--){if(Ne.isNotA1left(s,c,u)){let pr=Ne.WEIGHTS[ye][2*Nn];Ce+=_[Nn]*pr}Ae+=_[Nn]}let Re=0;for(let Nn=H.length-1;Nn>=0;Nn--)if(Ne.isNotA1left(s,c,u)){let pr=Ne.WEIGHTS[ye][2*Nn+1];Re+=H[Nn]*pr}let Xe=Ce+Re;if(Ae&1||Ae>13||Ae<4)throw new G;let st=(13-Ae)/2,ht=Ne.SYMBOL_WIDEST[st],ut=9-ht,cn=Dt.getRSSvalue(_,ht,!0),Zt=Dt.getRSSvalue(H,ut,!1),jr=Ne.EVEN_TOTAL_SUBSET[st],ii=Ne.GSUM[st],Sr=cn*jr+Zt+ii;return new ei(Sr,Xe)}static isNotA1left(i,s,c){return!(i.getValue()==0&&s&&c)}adjustOddEvenCounts(i){let s=Pe.sum(new Int32Array(this.getOddCounts())),c=Pe.sum(new Int32Array(this.getEvenCounts())),u=!1,d=!1;s>13?d=!0:s<4&&(u=!0);let h=!1,b=!1;c>13?b=!0:c<4&&(h=!0);let w=s+c-i,_=(s&1)==1,H=(c&1)==0;if(w==1)if(_){if(H)throw new G;d=!0}else{if(!H)throw new G;b=!0}else if(w==-1)if(_){if(H)throw new G;u=!0}else{if(!H)throw new G;h=!0}else if(w==0){if(_){if(!H)throw new G;s<c?(u=!0,b=!0):(d=!0,h=!0)}else if(H)throw new G}else throw new G;if(u){if(d)throw new G;Ne.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&Ne.decrement(this.getOddCounts(),this.getOddRoundingErrors()),h){if(b)throw new G;Ne.increment(this.getEvenCounts(),this.getOddRoundingErrors())}b&&Ne.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ne.SYMBOL_WIDEST=[7,5,4,3,1],Ne.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Ne.GSUM=[0,348,1388,2948,3988],Ne.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Ne.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Ne.FINDER_PAT_A=0,Ne.FINDER_PAT_B=1,Ne.FINDER_PAT_C=2,Ne.FINDER_PAT_D=3,Ne.FINDER_PAT_E=4,Ne.FINDER_PAT_F=5,Ne.FINDER_PATTERN_SEQUENCES=[[Ne.FINDER_PAT_A,Ne.FINDER_PAT_A],[Ne.FINDER_PAT_A,Ne.FINDER_PAT_B,Ne.FINDER_PAT_B],[Ne.FINDER_PAT_A,Ne.FINDER_PAT_C,Ne.FINDER_PAT_B,Ne.FINDER_PAT_D],[Ne.FINDER_PAT_A,Ne.FINDER_PAT_E,Ne.FINDER_PAT_B,Ne.FINDER_PAT_D,Ne.FINDER_PAT_C],[Ne.FINDER_PAT_A,Ne.FINDER_PAT_E,Ne.FINDER_PAT_B,Ne.FINDER_PAT_D,Ne.FINDER_PAT_D,Ne.FINDER_PAT_F],[Ne.FINDER_PAT_A,Ne.FINDER_PAT_E,Ne.FINDER_PAT_B,Ne.FINDER_PAT_D,Ne.FINDER_PAT_E,Ne.FINDER_PAT_F,Ne.FINDER_PAT_F],[Ne.FINDER_PAT_A,Ne.FINDER_PAT_A,Ne.FINDER_PAT_B,Ne.FINDER_PAT_B,Ne.FINDER_PAT_C,Ne.FINDER_PAT_C,Ne.FINDER_PAT_D,Ne.FINDER_PAT_D],[Ne.FINDER_PAT_A,Ne.FINDER_PAT_A,Ne.FINDER_PAT_B,Ne.FINDER_PAT_B,Ne.FINDER_PAT_C,Ne.FINDER_PAT_C,Ne.FINDER_PAT_D,Ne.FINDER_PAT_E,Ne.FINDER_PAT_E],[Ne.FINDER_PAT_A,Ne.FINDER_PAT_A,Ne.FINDER_PAT_B,Ne.FINDER_PAT_B,Ne.FINDER_PAT_C,Ne.FINDER_PAT_C,Ne.FINDER_PAT_D,Ne.FINDER_PAT_E,Ne.FINDER_PAT_F,Ne.FINDER_PAT_F],[Ne.FINDER_PAT_A,Ne.FINDER_PAT_A,Ne.FINDER_PAT_B,Ne.FINDER_PAT_B,Ne.FINDER_PAT_C,Ne.FINDER_PAT_D,Ne.FINDER_PAT_D,Ne.FINDER_PAT_E,Ne.FINDER_PAT_E,Ne.FINDER_PAT_F,Ne.FINDER_PAT_F]],Ne.MAX_PAIRS=11;class bt extends ei{constructor(i,s,c){super(i,s),this.count=0,this.finderPattern=c}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Ft extends yn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(i,s,c){const u=this.decodePair(s,!1,i,c);Ft.addOrTally(this.possibleLeftPairs,u),s.reverse();let d=this.decodePair(s,!0,i,c);Ft.addOrTally(this.possibleRightPairs,d),s.reverse();for(let h of this.possibleLeftPairs)if(h.getCount()>1){for(let b of this.possibleRightPairs)if(b.getCount()>1&&Ft.checkChecksum(h,b))return Ft.constructResult(h,b)}throw new G}static addOrTally(i,s){if(s==null)return;let c=!1;for(let u of i)if(u.getValue()===s.getValue()){u.incrementCount(),c=!0;break}c||i.push(s)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(i,s){let c=4537077*i.getValue()+s.getValue(),u=new String(c).toString(),d=new Q;for(let _=13-u.length;_>0;_--)d.append("0");d.append(u);let h=0;for(let _=0;_<13;_++){let H=d.charAt(_).charCodeAt(0)-48;h+=_&1?H:3*H}h=10-h%10,h===10&&(h=0),d.append(h.toString());let b=i.getFinderPattern().getResultPoints(),w=s.getFinderPattern().getResultPoints();return new ee(d.toString(),null,0,[b[0],b[1],w[0],w[1]],ae.RSS_14,new Date().getTime())}static checkChecksum(i,s){let c=(i.getChecksumPortion()+16*s.getChecksumPortion())%79,u=9*i.getFinderPattern().getValue()+s.getFinderPattern().getValue();return u>72&&u--,u>8&&u--,c===u}decodePair(i,s,c,u){try{let d=this.findFinderPattern(i,s),h=this.parseFoundFinderPattern(i,c,s,d),b=u==null?null:u.get(ie.NEED_RESULT_POINT_CALLBACK);if(b!=null){let H=(d[0]+d[1])/2;s&&(H=i.getSize()-1-H),b.foundPossibleResultPoint(new We(H,c))}let w=this.decodeDataCharacter(i,h,!0),_=this.decodeDataCharacter(i,h,!1);return new bt(1597*w.getValue()+_.getValue(),w.getChecksumPortion()+4*_.getChecksumPortion(),h)}catch{return null}}decodeDataCharacter(i,s,c){let u=this.getDataCharacterCounters();for(let Re=0;Re<u.length;Re++)u[Re]=0;if(c)Tt.recordPatternInReverse(i,s.getStartEnd()[0],u);else{Tt.recordPattern(i,s.getStartEnd()[1]+1,u);for(let Re=0,Xe=u.length-1;Re<Xe;Re++,Xe--){let st=u[Re];u[Re]=u[Xe],u[Xe]=st}}let d=c?16:15,h=Pe.sum(new Int32Array(u))/d,b=this.getOddCounts(),w=this.getEvenCounts(),_=this.getOddRoundingErrors(),H=this.getEvenRoundingErrors();for(let Re=0;Re<u.length;Re++){let Xe=u[Re]/h,st=Math.floor(Xe+.5);st<1?st=1:st>8&&(st=8);let ht=Math.floor(Re/2);Re&1?(w[ht]=st,H[ht]=Xe-st):(b[ht]=st,_[ht]=Xe-st)}this.adjustOddEvenCounts(c,d);let K=0,oe=0;for(let Re=b.length-1;Re>=0;Re--)oe*=9,oe+=b[Re],K+=b[Re];let ye=0,Ae=0;for(let Re=w.length-1;Re>=0;Re--)ye*=9,ye+=w[Re],Ae+=w[Re];let Ce=oe+3*ye;if(c){if(K&1||K>12||K<4)throw new G;let Re=(12-K)/2,Xe=Ft.OUTSIDE_ODD_WIDEST[Re],st=9-Xe,ht=Dt.getRSSvalue(b,Xe,!1),ut=Dt.getRSSvalue(w,st,!0),cn=Ft.OUTSIDE_EVEN_TOTAL_SUBSET[Re],Zt=Ft.OUTSIDE_GSUM[Re];return new ei(ht*cn+ut+Zt,Ce)}else{if(Ae&1||Ae>10||Ae<4)throw new G;let Re=(10-Ae)/2,Xe=Ft.INSIDE_ODD_WIDEST[Re],st=9-Xe,ht=Dt.getRSSvalue(b,Xe,!0),ut=Dt.getRSSvalue(w,st,!1),cn=Ft.INSIDE_ODD_TOTAL_SUBSET[Re],Zt=Ft.INSIDE_GSUM[Re];return new ei(ut*cn+ht+Zt,Ce)}}findFinderPattern(i,s){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=i.getSize(),d=!1,h=0;for(;h<u&&(d=!i.get(h),s!==d);)h++;let b=0,w=h;for(let _=h;_<u;_++)if(i.get(_)!==d)c[b]++;else{if(b===3){if(yn.isFinderPattern(c))return[w,_];w+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,b--}else b++;c[b]=1,d=!d}throw new G}parseFoundFinderPattern(i,s,c,u){let d=i.get(u[0]),h=u[0]-1;for(;h>=0&&d!==i.get(h);)h--;h++;const b=u[0]-h,w=this.getDecodeFinderCounters(),_=new Int32Array(w.length);D.arraycopy(w,0,_,1,w.length-1),_[0]=b;const H=this.parseFinderValue(_,Ft.FINDER_PATTERNS);let K=h,oe=u[1];return c&&(K=i.getSize()-1-K,oe=i.getSize()-1-oe),new vi(H,[h,u[1]],K,oe,s)}adjustOddEvenCounts(i,s){let c=Pe.sum(new Int32Array(this.getOddCounts())),u=Pe.sum(new Int32Array(this.getEvenCounts())),d=!1,h=!1,b=!1,w=!1;i?(c>12?h=!0:c<4&&(d=!0),u>12?w=!0:u<4&&(b=!0)):(c>11?h=!0:c<5&&(d=!0),u>10?w=!0:u<4&&(b=!0));let _=c+u-s,H=(c&1)===(i?1:0),K=(u&1)===1;if(_===1)if(H){if(K)throw new G;h=!0}else{if(!K)throw new G;w=!0}else if(_===-1)if(H){if(K)throw new G;d=!0}else{if(!K)throw new G;b=!0}else if(_===0){if(H){if(!K)throw new G;c<u?(d=!0,w=!0):(h=!0,b=!0)}else if(K)throw new G}else throw new G;if(d){if(h)throw new G;yn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(h&&yn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),b){if(w)throw new G;yn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}w&&yn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ft.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Ft.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Ft.OUTSIDE_GSUM=[0,161,961,2015,2715],Ft.INSIDE_GSUM=[0,336,1036,1516],Ft.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Ft.INSIDE_ODD_WIDEST=[2,4,6,8],Ft.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Mr extends Tt{constructor(i,s){super(),this.readers=[],this.verbose=s===!0;const c=i?i.get(ie.POSSIBLE_FORMATS):null,u=i&&i.get(ie.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;c?((c.includes(ae.EAN_13)||c.includes(ae.UPC_A)||c.includes(ae.EAN_8)||c.includes(ae.UPC_E))&&this.readers.push(new ma(i)),c.includes(ae.CODE_39)&&this.readers.push(new Te(u)),c.includes(ae.CODE_128)&&this.readers.push(new gt),c.includes(ae.ITF)&&this.readers.push(new lt),c.includes(ae.RSS_14)&&this.readers.push(new Ft),c.includes(ae.RSS_EXPANDED)&&this.readers.push(new Ne(this.verbose))):(this.readers.push(new ma(i)),this.readers.push(new Te),this.readers.push(new ma(i)),this.readers.push(new gt),this.readers.push(new lt),this.readers.push(new Ft),this.readers.push(new Ne(this.verbose)))}decodeRow(i,s,c){for(let u=0;u<this.readers.length;u++)try{return this.readers[u].decodeRow(i,s,c)}catch{}throw new G}reset(){this.readers.forEach(i=>i.reset())}}class ga extends q{constructor(i=500,s){super(new Mr(s),i,s)}}class $t{constructor(i,s,c){this.ecCodewords=i,this.ecBlocks=[s],c&&this.ecBlocks.push(c)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class on{constructor(i,s){this.count=i,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Yt{constructor(i,s,c,u,d,h){this.versionNumber=i,this.symbolSizeRows=s,this.symbolSizeColumns=c,this.dataRegionSizeRows=u,this.dataRegionSizeColumns=d,this.ecBlocks=h;let b=0;const w=h.getECCodewords(),_=h.getECBlocks();for(let H of _)b+=H.getCount()*(H.getDataCodewords()+w);this.totalCodewords=b}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(i,s){if(i&1||s&1)throw new B;for(let c of Yt.VERSIONS)if(c.symbolSizeRows===i&&c.symbolSizeColumns===s)return c;throw new B}toString(){return""+this.versionNumber}static buildVersions(){return[new Yt(1,10,10,8,8,new $t(5,new on(1,3))),new Yt(2,12,12,10,10,new $t(7,new on(1,5))),new Yt(3,14,14,12,12,new $t(10,new on(1,8))),new Yt(4,16,16,14,14,new $t(12,new on(1,12))),new Yt(5,18,18,16,16,new $t(14,new on(1,18))),new Yt(6,20,20,18,18,new $t(18,new on(1,22))),new Yt(7,22,22,20,20,new $t(20,new on(1,30))),new Yt(8,24,24,22,22,new $t(24,new on(1,36))),new Yt(9,26,26,24,24,new $t(28,new on(1,44))),new Yt(10,32,32,14,14,new $t(36,new on(1,62))),new Yt(11,36,36,16,16,new $t(42,new on(1,86))),new Yt(12,40,40,18,18,new $t(48,new on(1,114))),new Yt(13,44,44,20,20,new $t(56,new on(1,144))),new Yt(14,48,48,22,22,new $t(68,new on(1,174))),new Yt(15,52,52,24,24,new $t(42,new on(2,102))),new Yt(16,64,64,14,14,new $t(56,new on(2,140))),new Yt(17,72,72,16,16,new $t(36,new on(4,92))),new Yt(18,80,80,18,18,new $t(48,new on(4,114))),new Yt(19,88,88,20,20,new $t(56,new on(4,144))),new Yt(20,96,96,22,22,new $t(68,new on(4,174))),new Yt(21,104,104,24,24,new $t(56,new on(6,136))),new Yt(22,120,120,18,18,new $t(68,new on(6,175))),new Yt(23,132,132,20,20,new $t(62,new on(8,163))),new Yt(24,144,144,22,22,new $t(62,new on(8,156),new on(2,155))),new Yt(25,8,18,6,16,new $t(7,new on(1,5))),new Yt(26,8,32,6,14,new $t(11,new on(1,10))),new Yt(27,12,26,10,24,new $t(14,new on(1,16))),new Yt(28,12,36,10,16,new $t(18,new on(1,22))),new Yt(29,16,36,14,16,new $t(24,new on(1,32))),new Yt(30,16,48,14,22,new $t(28,new on(1,49)))]}}Yt.VERSIONS=Yt.buildVersions();class ea{constructor(i){const s=i.getHeight();if(s<8||s>144||s&1)throw new B;this.version=ea.readVersion(i),this.mappingBitMatrix=this.extractDataRegion(i),this.readMappingMatrix=new J(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(i){const s=i.getHeight(),c=i.getWidth();return Yt.getVersionForDimensions(s,c)}readCodewords(){const i=new Int8Array(this.version.getTotalCodewords());let s=0,c=4,u=0;const d=this.mappingBitMatrix.getHeight(),h=this.mappingBitMatrix.getWidth();let b=!1,w=!1,_=!1,H=!1;do if(c===d&&u===0&&!b)i[s++]=this.readCorner1(d,h)&255,c-=2,u+=2,b=!0;else if(c===d-2&&u===0&&h&3&&!w)i[s++]=this.readCorner2(d,h)&255,c-=2,u+=2,w=!0;else if(c===d+4&&u===2&&!(h&7)&&!_)i[s++]=this.readCorner3(d,h)&255,c-=2,u+=2,_=!0;else if(c===d-2&&u===0&&(h&7)===4&&!H)i[s++]=this.readCorner4(d,h)&255,c-=2,u+=2,H=!0;else{do c<d&&u>=0&&!this.readMappingMatrix.get(u,c)&&(i[s++]=this.readUtah(c,u,d,h)&255),c-=2,u+=2;while(c>=0&&u<h);c+=1,u+=3;do c>=0&&u<h&&!this.readMappingMatrix.get(u,c)&&(i[s++]=this.readUtah(c,u,d,h)&255),c+=2,u-=2;while(c<d&&u>=0);c+=3,u+=1}while(c<d||u<h);if(s!==this.version.getTotalCodewords())throw new B;return i}readModule(i,s,c,u){return i<0&&(i+=c,s+=4-(c+4&7)),s<0&&(s+=u,i+=4-(u+4&7)),this.readMappingMatrix.set(s,i),this.mappingBitMatrix.get(s,i)}readUtah(i,s,c,u){let d=0;return this.readModule(i-2,s-2,c,u)&&(d|=1),d<<=1,this.readModule(i-2,s-1,c,u)&&(d|=1),d<<=1,this.readModule(i-1,s-2,c,u)&&(d|=1),d<<=1,this.readModule(i-1,s-1,c,u)&&(d|=1),d<<=1,this.readModule(i-1,s,c,u)&&(d|=1),d<<=1,this.readModule(i,s-2,c,u)&&(d|=1),d<<=1,this.readModule(i,s-1,c,u)&&(d|=1),d<<=1,this.readModule(i,s,c,u)&&(d|=1),d}readCorner1(i,s){let c=0;return this.readModule(i-1,0,i,s)&&(c|=1),c<<=1,this.readModule(i-1,1,i,s)&&(c|=1),c<<=1,this.readModule(i-1,2,i,s)&&(c|=1),c<<=1,this.readModule(0,s-2,i,s)&&(c|=1),c<<=1,this.readModule(0,s-1,i,s)&&(c|=1),c<<=1,this.readModule(1,s-1,i,s)&&(c|=1),c<<=1,this.readModule(2,s-1,i,s)&&(c|=1),c<<=1,this.readModule(3,s-1,i,s)&&(c|=1),c}readCorner2(i,s){let c=0;return this.readModule(i-3,0,i,s)&&(c|=1),c<<=1,this.readModule(i-2,0,i,s)&&(c|=1),c<<=1,this.readModule(i-1,0,i,s)&&(c|=1),c<<=1,this.readModule(0,s-4,i,s)&&(c|=1),c<<=1,this.readModule(0,s-3,i,s)&&(c|=1),c<<=1,this.readModule(0,s-2,i,s)&&(c|=1),c<<=1,this.readModule(0,s-1,i,s)&&(c|=1),c<<=1,this.readModule(1,s-1,i,s)&&(c|=1),c}readCorner3(i,s){let c=0;return this.readModule(i-1,0,i,s)&&(c|=1),c<<=1,this.readModule(i-1,s-1,i,s)&&(c|=1),c<<=1,this.readModule(0,s-3,i,s)&&(c|=1),c<<=1,this.readModule(0,s-2,i,s)&&(c|=1),c<<=1,this.readModule(0,s-1,i,s)&&(c|=1),c<<=1,this.readModule(1,s-3,i,s)&&(c|=1),c<<=1,this.readModule(1,s-2,i,s)&&(c|=1),c<<=1,this.readModule(1,s-1,i,s)&&(c|=1),c}readCorner4(i,s){let c=0;return this.readModule(i-3,0,i,s)&&(c|=1),c<<=1,this.readModule(i-2,0,i,s)&&(c|=1),c<<=1,this.readModule(i-1,0,i,s)&&(c|=1),c<<=1,this.readModule(0,s-2,i,s)&&(c|=1),c<<=1,this.readModule(0,s-1,i,s)&&(c|=1),c<<=1,this.readModule(1,s-1,i,s)&&(c|=1),c<<=1,this.readModule(2,s-1,i,s)&&(c|=1),c<<=1,this.readModule(3,s-1,i,s)&&(c|=1),c}extractDataRegion(i){const s=this.version.getSymbolSizeRows(),c=this.version.getSymbolSizeColumns();if(i.getHeight()!==s)throw new N("Dimension of bitMatrix must match the version size");const u=this.version.getDataRegionSizeRows(),d=this.version.getDataRegionSizeColumns(),h=s/u|0,b=c/d|0,w=h*u,_=b*d,H=new J(_,w);for(let K=0;K<h;++K){const oe=K*u;for(let ye=0;ye<b;++ye){const Ae=ye*d;for(let Ce=0;Ce<u;++Ce){const Re=K*(u+2)+1+Ce,Xe=oe+Ce;for(let st=0;st<d;++st){const ht=ye*(d+2)+1+st;if(i.get(ht,Re)){const ut=Ae+st;H.set(ut,Xe)}}}}}return H}}class En{constructor(i,s){this.numDataCodewords=i,this.codewords=s}static getDataBlocks(i,s){const c=s.getECBlocks();let u=0;const d=c.getECBlocks();for(let Ce of d)u+=Ce.getCount();const h=new Array(u);let b=0;for(let Ce of d)for(let Re=0;Re<Ce.getCount();Re++){const Xe=Ce.getDataCodewords(),st=c.getECCodewords()+Xe;h[b++]=new En(Xe,new Uint8Array(st))}const _=h[0].codewords.length-c.getECCodewords(),H=_-1;let K=0;for(let Ce=0;Ce<H;Ce++)for(let Re=0;Re<b;Re++)h[Re].codewords[Ce]=i[K++];const oe=s.getVersionNumber()===24,ye=oe?8:b;for(let Ce=0;Ce<ye;Ce++)h[Ce].codewords[_-1]=i[K++];const Ae=h[0].codewords.length;for(let Ce=_;Ce<Ae;Ce++)for(let Re=0;Re<b;Re++){const Xe=oe?(Re+8)%b:Re,st=oe&&Xe>7?Ce-1:Ce;h[Xe].codewords[st]=i[K++]}if(K!==i.length)throw new N;return h}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class La{constructor(i){this.bytes=i,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(i){if(i<1||i>32||i>this.available())throw new N(""+i);let s=0,c=this.bitOffset,u=this.byteOffset;const d=this.bytes;if(c>0){const h=8-c,b=i<h?i:h,w=h-b,_=255>>8-b<<w;s=(d[u]&_)>>w,i-=b,c+=b,c===8&&(c=0,u++)}if(i>0){for(;i>=8;)s=s<<8|d[u]&255,u++,i-=8;if(i>0){const h=8-i,b=255>>h<<h;s=s<<i|(d[u]&b)>>h,c+=i}}return this.bitOffset=c,this.byteOffset=u,s}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var ir;(function($){$[$.PAD_ENCODE=0]="PAD_ENCODE",$[$.ASCII_ENCODE=1]="ASCII_ENCODE",$[$.C40_ENCODE=2]="C40_ENCODE",$[$.TEXT_ENCODE=3]="TEXT_ENCODE",$[$.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",$[$.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",$[$.BASE256_ENCODE=6]="BASE256_ENCODE"})(ir||(ir={}));class Hi{static decode(i){const s=new La(i),c=new Q,u=new Q,d=new Array;let h=ir.ASCII_ENCODE;do if(h===ir.ASCII_ENCODE)h=this.decodeAsciiSegment(s,c,u);else{switch(h){case ir.C40_ENCODE:this.decodeC40Segment(s,c);break;case ir.TEXT_ENCODE:this.decodeTextSegment(s,c);break;case ir.ANSIX12_ENCODE:this.decodeAnsiX12Segment(s,c);break;case ir.EDIFACT_ENCODE:this.decodeEdifactSegment(s,c);break;case ir.BASE256_ENCODE:this.decodeBase256Segment(s,c,d);break;default:throw new B}h=ir.ASCII_ENCODE}while(h!==ir.PAD_ENCODE&&s.available()>0);return u.length()>0&&c.append(u.toString()),new xe(i,c.toString(),d.length===0?null:d,null)}static decodeAsciiSegment(i,s,c){let u=!1;do{let d=i.readBits(8);if(d===0)throw new B;if(d<=128)return u&&(d+=128),s.append(String.fromCharCode(d-1)),ir.ASCII_ENCODE;if(d===129)return ir.PAD_ENCODE;if(d<=229){const h=d-130;h<10&&s.append("0"),s.append(""+h)}else switch(d){case 230:return ir.C40_ENCODE;case 231:return ir.BASE256_ENCODE;case 232:s.append("");break;case 233:case 234:break;case 235:u=!0;break;case 236:s.append("[)>05"),c.insert(0,"");break;case 237:s.append("[)>06"),c.insert(0,"");break;case 238:return ir.ANSIX12_ENCODE;case 239:return ir.TEXT_ENCODE;case 240:return ir.EDIFACT_ENCODE;case 241:break;default:if(d!==254||i.available()!==0)throw new B;break}}while(i.available()>0);return ir.ASCII_ENCODE}static decodeC40Segment(i,s){let c=!1;const u=[];let d=0;do{if(i.available()===8)return;const h=i.readBits(8);if(h===254)return;this.parseTwoBytes(h,i.readBits(8),u);for(let b=0;b<3;b++){const w=u[b];switch(d){case 0:if(w<3)d=w+1;else if(w<this.C40_BASIC_SET_CHARS.length){const _=this.C40_BASIC_SET_CHARS[w];c?(s.append(String.fromCharCode(_.charCodeAt(0)+128)),c=!1):s.append(_)}else throw new B;break;case 1:c?(s.append(String.fromCharCode(w+128)),c=!1):s.append(String.fromCharCode(w)),d=0;break;case 2:if(w<this.C40_SHIFT2_SET_CHARS.length){const _=this.C40_SHIFT2_SET_CHARS[w];c?(s.append(String.fromCharCode(_.charCodeAt(0)+128)),c=!1):s.append(_)}else switch(w){case 27:s.append("");break;case 30:c=!0;break;default:throw new B}d=0;break;case 3:c?(s.append(String.fromCharCode(w+224)),c=!1):s.append(String.fromCharCode(w+96)),d=0;break;default:throw new B}}}while(i.available()>0)}static decodeTextSegment(i,s){let c=!1,u=[],d=0;do{if(i.available()===8)return;const h=i.readBits(8);if(h===254)return;this.parseTwoBytes(h,i.readBits(8),u);for(let b=0;b<3;b++){const w=u[b];switch(d){case 0:if(w<3)d=w+1;else if(w<this.TEXT_BASIC_SET_CHARS.length){const _=this.TEXT_BASIC_SET_CHARS[w];c?(s.append(String.fromCharCode(_.charCodeAt(0)+128)),c=!1):s.append(_)}else throw new B;break;case 1:c?(s.append(String.fromCharCode(w+128)),c=!1):s.append(String.fromCharCode(w)),d=0;break;case 2:if(w<this.TEXT_SHIFT2_SET_CHARS.length){const _=this.TEXT_SHIFT2_SET_CHARS[w];c?(s.append(String.fromCharCode(_.charCodeAt(0)+128)),c=!1):s.append(_)}else switch(w){case 27:s.append("");break;case 30:c=!0;break;default:throw new B}d=0;break;case 3:if(w<this.TEXT_SHIFT3_SET_CHARS.length){const _=this.TEXT_SHIFT3_SET_CHARS[w];c?(s.append(String.fromCharCode(_.charCodeAt(0)+128)),c=!1):s.append(_),d=0}else throw new B;break;default:throw new B}}}while(i.available()>0)}static decodeAnsiX12Segment(i,s){const c=[];do{if(i.available()===8)return;const u=i.readBits(8);if(u===254)return;this.parseTwoBytes(u,i.readBits(8),c);for(let d=0;d<3;d++){const h=c[d];switch(h){case 0:s.append("\r");break;case 1:s.append("*");break;case 2:s.append(">");break;case 3:s.append(" ");break;default:if(h<14)s.append(String.fromCharCode(h+44));else if(h<40)s.append(String.fromCharCode(h+51));else throw new B;break}}}while(i.available()>0)}static parseTwoBytes(i,s,c){let u=(i<<8)+s-1,d=Math.floor(u/1600);c[0]=d,u-=d*1600,d=Math.floor(u/40),c[1]=d,c[2]=u-d*40}static decodeEdifactSegment(i,s){do{if(i.available()<=16)return;for(let c=0;c<4;c++){let u=i.readBits(6);if(u===31){const d=8-i.getBitOffset();d!==8&&i.readBits(d);return}u&32||(u|=64),s.append(String.fromCharCode(u))}}while(i.available()>0)}static decodeBase256Segment(i,s,c){let u=1+i.getByteOffset();const d=this.unrandomize255State(i.readBits(8),u++);let h;if(d===0?h=i.available()/8|0:d<250?h=d:h=250*(d-249)+this.unrandomize255State(i.readBits(8),u++),h<0)throw new B;const b=new Uint8Array(h);for(let w=0;w<h;w++){if(i.available()<8)throw new B;b[w]=this.unrandomize255State(i.readBits(8),u++)}c.push(b);try{s.append(F.decode(b,k.ISO88591))}catch(w){throw new ke("Platform does not support required encoding: "+w.message)}}static unrandomize255State(i,s){const c=149*s%255+1,u=i-c;return u>=0?u:u+256}}Hi.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Hi.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Hi.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Hi.TEXT_SHIFT2_SET_CHARS=Hi.C40_SHIFT2_SET_CHARS,Hi.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Us{constructor(){this.rsDecoder=new he(Be.DATA_MATRIX_FIELD_256)}decode(i){const s=new ea(i),c=s.getVersion(),u=s.readCodewords(),d=En.getDataBlocks(u,c);let h=0;for(let _ of d)h+=_.getNumDataCodewords();const b=new Uint8Array(h),w=d.length;for(let _=0;_<w;_++){const H=d[_],K=H.getCodewords(),oe=H.getNumDataCodewords();this.correctErrors(K,oe);for(let ye=0;ye<oe;ye++)b[ye*w+_]=K[ye]}return Hi.decode(b)}correctErrors(i,s){const c=new Int32Array(i);try{this.rsDecoder.decode(c,i.length-s)}catch{throw new v}for(let u=0;u<s;u++)i[u]=c[u]}}class Mt{constructor(i){this.image=i,this.rectangleDetector=new it(this.image)}detect(){const i=this.rectangleDetector.detect();let s=this.detectSolid1(i);if(s=this.detectSolid2(s),s[3]=this.correctTopRight(s),!s[3])throw new G;s=this.shiftToModuleCenter(s);const c=s[0],u=s[1],d=s[2],h=s[3];let b=this.transitionsBetween(c,h)+1,w=this.transitionsBetween(d,h)+1;(b&1)===1&&(b+=1),(w&1)===1&&(w+=1),4*b<7*w&&4*w<7*b&&(b=w=Math.max(b,w));let _=Mt.sampleGrid(this.image,c,u,d,h,b,w);return new mt(_,[c,u,d,h])}static shiftPoint(i,s,c){let u=(s.getX()-i.getX())/(c+1),d=(s.getY()-i.getY())/(c+1);return new We(i.getX()+u,i.getY()+d)}static moveAway(i,s,c){let u=i.getX(),d=i.getY();return u<s?u-=1:u+=1,d<c?d-=1:d+=1,new We(u,d)}detectSolid1(i){let s=i[0],c=i[1],u=i[3],d=i[2],h=this.transitionsBetween(s,c),b=this.transitionsBetween(c,u),w=this.transitionsBetween(u,d),_=this.transitionsBetween(d,s),H=h,K=[d,s,c,u];return H>b&&(H=b,K[0]=s,K[1]=c,K[2]=u,K[3]=d),H>w&&(H=w,K[0]=c,K[1]=u,K[2]=d,K[3]=s),H>_&&(K[0]=u,K[1]=d,K[2]=s,K[3]=c),K}detectSolid2(i){let s=i[0],c=i[1],u=i[2],d=i[3],h=this.transitionsBetween(s,d),b=Mt.shiftPoint(c,u,(h+1)*4),w=Mt.shiftPoint(u,c,(h+1)*4),_=this.transitionsBetween(b,s),H=this.transitionsBetween(w,d);return _<H?(i[0]=s,i[1]=c,i[2]=u,i[3]=d):(i[0]=c,i[1]=u,i[2]=d,i[3]=s),i}correctTopRight(i){let s=i[0],c=i[1],u=i[2],d=i[3],h=this.transitionsBetween(s,d),b=this.transitionsBetween(c,d),w=Mt.shiftPoint(s,c,(b+1)*4),_=Mt.shiftPoint(u,c,(h+1)*4);h=this.transitionsBetween(w,d),b=this.transitionsBetween(_,d);let H=new We(d.getX()+(u.getX()-c.getX())/(h+1),d.getY()+(u.getY()-c.getY())/(h+1)),K=new We(d.getX()+(s.getX()-c.getX())/(b+1),d.getY()+(s.getY()-c.getY())/(b+1));if(!this.isValid(H))return this.isValid(K)?K:null;if(!this.isValid(K))return H;let oe=this.transitionsBetween(w,H)+this.transitionsBetween(_,H),ye=this.transitionsBetween(w,K)+this.transitionsBetween(_,K);return oe>ye?H:K}shiftToModuleCenter(i){let s=i[0],c=i[1],u=i[2],d=i[3],h=this.transitionsBetween(s,d)+1,b=this.transitionsBetween(u,d)+1,w=Mt.shiftPoint(s,c,b*4),_=Mt.shiftPoint(u,c,h*4);h=this.transitionsBetween(w,d)+1,b=this.transitionsBetween(_,d)+1,(h&1)===1&&(h+=1),(b&1)===1&&(b+=1);let H=(s.getX()+c.getX()+u.getX()+d.getX())/4,K=(s.getY()+c.getY()+u.getY()+d.getY())/4;s=Mt.moveAway(s,H,K),c=Mt.moveAway(c,H,K),u=Mt.moveAway(u,H,K),d=Mt.moveAway(d,H,K);let oe,ye;return w=Mt.shiftPoint(s,c,b*4),w=Mt.shiftPoint(w,d,h*4),oe=Mt.shiftPoint(c,s,b*4),oe=Mt.shiftPoint(oe,u,h*4),_=Mt.shiftPoint(u,d,b*4),_=Mt.shiftPoint(_,c,h*4),ye=Mt.shiftPoint(d,u,b*4),ye=Mt.shiftPoint(ye,s,h*4),[w,oe,_,ye]}isValid(i){return i.getX()>=0&&i.getX()<this.image.getWidth()&&i.getY()>0&&i.getY()<this.image.getHeight()}static sampleGrid(i,s,c,u,d,h,b){return St.getInstance().sampleGrid(i,h,b,.5,.5,h-.5,.5,h-.5,b-.5,.5,b-.5,s.getX(),s.getY(),d.getX(),d.getY(),u.getX(),u.getY(),c.getX(),c.getY())}transitionsBetween(i,s){let c=Math.trunc(i.getX()),u=Math.trunc(i.getY()),d=Math.trunc(s.getX()),h=Math.trunc(s.getY()),b=Math.abs(h-u)>Math.abs(d-c);if(b){let Ce=c;c=u,u=Ce,Ce=d,d=h,h=Ce}let w=Math.abs(d-c),_=Math.abs(h-u),H=-w/2,K=u<h?1:-1,oe=c<d?1:-1,ye=0,Ae=this.image.get(b?u:c,b?c:u);for(let Ce=c,Re=u;Ce!==d;Ce+=oe){let Xe=this.image.get(b?Re:Ce,b?Ce:Re);if(Xe!==Ae&&(ye++,Ae=Xe),H+=_,H>0){if(Re===h)break;Re+=K,H-=w}}return ye}}class mn{constructor(){this.decoder=new Us}decode(i,s=null){let c,u;if(s!=null&&s.has(ie.PURE_BARCODE)){const _=mn.extractPureBits(i.getBlackMatrix());c=this.decoder.decode(_),u=mn.NO_POINTS}else{const _=new Mt(i.getBlackMatrix()).detect();c=this.decoder.decode(_.getBits()),u=_.getPoints()}const d=c.getRawBytes(),h=new ee(c.getText(),d,8*d.length,u,ae.DATA_MATRIX,D.currentTimeMillis()),b=c.getByteSegments();b!=null&&h.putMetadata(we.BYTE_SEGMENTS,b);const w=c.getECLevel();return w!=null&&h.putMetadata(we.ERROR_CORRECTION_LEVEL,w),h}reset(){}static extractPureBits(i){const s=i.getTopLeftOnBit(),c=i.getBottomRightOnBit();if(s==null||c==null)throw new G;const u=this.moduleSize(s,i);let d=s[1];const h=c[1];let b=s[0];const _=(c[0]-b+1)/u,H=(h-d+1)/u;if(_<=0||H<=0)throw new G;const K=u/2;d+=K,b+=K;const oe=new J(_,H);for(let ye=0;ye<H;ye++){const Ae=d+ye*u;for(let Ce=0;Ce<_;Ce++)i.get(b+Ce*u,Ae)&&oe.set(Ce,ye)}return oe}static moduleSize(i,s){const c=s.getWidth();let u=i[0];const d=i[1];for(;u<c&&s.get(u,d);)u++;if(u===c)throw new G;const h=u-i[0];if(h===0)throw new G;return h}}mn.NO_POINTS=[];class xo extends q{constructor(i=500){super(new mn,i)}}var kr;(function($){$[$.L=0]="L",$[$.M=1]="M",$[$.Q=2]="Q",$[$.H=3]="H"})(kr||(kr={}));class Dn{constructor(i,s,c){this.value=i,this.stringValue=s,this.bits=c,Dn.FOR_BITS.set(c,this),Dn.FOR_VALUE.set(i,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(i){switch(i){case"L":return Dn.L;case"M":return Dn.M;case"Q":return Dn.Q;case"H":return Dn.H;default:throw new A(i+"not available")}}toString(){return this.stringValue}equals(i){if(!(i instanceof Dn))return!1;const s=i;return this.value===s.value}static forBits(i){if(i<0||i>=Dn.FOR_BITS.size)throw new N;return Dn.FOR_BITS.get(i)}}Dn.FOR_BITS=new Map,Dn.FOR_VALUE=new Map,Dn.L=new Dn(kr.L,"L",1),Dn.M=new Dn(kr.M,"M",0),Dn.Q=new Dn(kr.Q,"Q",3),Dn.H=new Dn(kr.H,"H",2);class Pr{constructor(i){this.errorCorrectionLevel=Dn.forBits(i>>3&3),this.dataMask=i&7}static numBitsDiffering(i,s){return j.bitCount(i^s)}static decodeFormatInformation(i,s){const c=Pr.doDecodeFormatInformation(i,s);return c!==null?c:Pr.doDecodeFormatInformation(i^Pr.FORMAT_INFO_MASK_QR,s^Pr.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(i,s){let c=Number.MAX_SAFE_INTEGER,u=0;for(const d of Pr.FORMAT_INFO_DECODE_LOOKUP){const h=d[0];if(h===i||h===s)return new Pr(d[1]);let b=Pr.numBitsDiffering(i,h);b<c&&(u=d[1],c=b),i!==s&&(b=Pr.numBitsDiffering(s,h),b<c&&(u=d[1],c=b))}return c<=3?new Pr(u):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(i){if(!(i instanceof Pr))return!1;const s=i;return this.errorCorrectionLevel===s.errorCorrectionLevel&&this.dataMask===s.dataMask}}Pr.FORMAT_INFO_MASK_QR=21522,Pr.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class He{constructor(i,...s){this.ecCodewordsPerBlock=i,this.ecBlocks=s}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let i=0;const s=this.ecBlocks;for(const c of s)i+=c.getCount();return i}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class pe{constructor(i,s){this.count=i,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ot{constructor(i,s,...c){this.versionNumber=i,this.alignmentPatternCenters=s,this.ecBlocks=c;let u=0;const d=c[0].getECCodewordsPerBlock(),h=c[0].getECBlocks();for(const b of h)u+=b.getCount()*(b.getDataCodewords()+d);this.totalCodewords=u}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(i){return this.ecBlocks[i.getValue()]}static getProvisionalVersionForDimension(i){if(i%4!==1)throw new B;try{return this.getVersionForNumber((i-17)/4)}catch{throw new B}}static getVersionForNumber(i){if(i<1||i>40)throw new N;return Ot.VERSIONS[i-1]}static decodeVersionInformation(i){let s=Number.MAX_SAFE_INTEGER,c=0;for(let u=0;u<Ot.VERSION_DECODE_INFO.length;u++){const d=Ot.VERSION_DECODE_INFO[u];if(d===i)return Ot.getVersionForNumber(u+7);const h=Pr.numBitsDiffering(i,d);h<s&&(c=u+7,s=h)}return s<=3?Ot.getVersionForNumber(c):null}buildFunctionPattern(){const i=this.getDimensionForVersion(),s=new J(i);s.setRegion(0,0,9,9),s.setRegion(i-8,0,8,9),s.setRegion(0,i-8,9,8);const c=this.alignmentPatternCenters.length;for(let u=0;u<c;u++){const d=this.alignmentPatternCenters[u]-2;for(let h=0;h<c;h++)u===0&&(h===0||h===c-1)||u===c-1&&h===0||s.setRegion(this.alignmentPatternCenters[h]-2,d,5,5)}return s.setRegion(6,9,1,i-17),s.setRegion(9,6,i-17,1),this.versionNumber>6&&(s.setRegion(i-11,0,3,6),s.setRegion(0,i-11,6,3)),s}toString(){return""+this.versionNumber}}Ot.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Ot.VERSIONS=[new Ot(1,new Int32Array(0),new He(7,new pe(1,19)),new He(10,new pe(1,16)),new He(13,new pe(1,13)),new He(17,new pe(1,9))),new Ot(2,Int32Array.from([6,18]),new He(10,new pe(1,34)),new He(16,new pe(1,28)),new He(22,new pe(1,22)),new He(28,new pe(1,16))),new Ot(3,Int32Array.from([6,22]),new He(15,new pe(1,55)),new He(26,new pe(1,44)),new He(18,new pe(2,17)),new He(22,new pe(2,13))),new Ot(4,Int32Array.from([6,26]),new He(20,new pe(1,80)),new He(18,new pe(2,32)),new He(26,new pe(2,24)),new He(16,new pe(4,9))),new Ot(5,Int32Array.from([6,30]),new He(26,new pe(1,108)),new He(24,new pe(2,43)),new He(18,new pe(2,15),new pe(2,16)),new He(22,new pe(2,11),new pe(2,12))),new Ot(6,Int32Array.from([6,34]),new He(18,new pe(2,68)),new He(16,new pe(4,27)),new He(24,new pe(4,19)),new He(28,new pe(4,15))),new Ot(7,Int32Array.from([6,22,38]),new He(20,new pe(2,78)),new He(18,new pe(4,31)),new He(18,new pe(2,14),new pe(4,15)),new He(26,new pe(4,13),new pe(1,14))),new Ot(8,Int32Array.from([6,24,42]),new He(24,new pe(2,97)),new He(22,new pe(2,38),new pe(2,39)),new He(22,new pe(4,18),new pe(2,19)),new He(26,new pe(4,14),new pe(2,15))),new Ot(9,Int32Array.from([6,26,46]),new He(30,new pe(2,116)),new He(22,new pe(3,36),new pe(2,37)),new He(20,new pe(4,16),new pe(4,17)),new He(24,new pe(4,12),new pe(4,13))),new Ot(10,Int32Array.from([6,28,50]),new He(18,new pe(2,68),new pe(2,69)),new He(26,new pe(4,43),new pe(1,44)),new He(24,new pe(6,19),new pe(2,20)),new He(28,new pe(6,15),new pe(2,16))),new Ot(11,Int32Array.from([6,30,54]),new He(20,new pe(4,81)),new He(30,new pe(1,50),new pe(4,51)),new He(28,new pe(4,22),new pe(4,23)),new He(24,new pe(3,12),new pe(8,13))),new Ot(12,Int32Array.from([6,32,58]),new He(24,new pe(2,92),new pe(2,93)),new He(22,new pe(6,36),new pe(2,37)),new He(26,new pe(4,20),new pe(6,21)),new He(28,new pe(7,14),new pe(4,15))),new Ot(13,Int32Array.from([6,34,62]),new He(26,new pe(4,107)),new He(22,new pe(8,37),new pe(1,38)),new He(24,new pe(8,20),new pe(4,21)),new He(22,new pe(12,11),new pe(4,12))),new Ot(14,Int32Array.from([6,26,46,66]),new He(30,new pe(3,115),new pe(1,116)),new He(24,new pe(4,40),new pe(5,41)),new He(20,new pe(11,16),new pe(5,17)),new He(24,new pe(11,12),new pe(5,13))),new Ot(15,Int32Array.from([6,26,48,70]),new He(22,new pe(5,87),new pe(1,88)),new He(24,new pe(5,41),new pe(5,42)),new He(30,new pe(5,24),new pe(7,25)),new He(24,new pe(11,12),new pe(7,13))),new Ot(16,Int32Array.from([6,26,50,74]),new He(24,new pe(5,98),new pe(1,99)),new He(28,new pe(7,45),new pe(3,46)),new He(24,new pe(15,19),new pe(2,20)),new He(30,new pe(3,15),new pe(13,16))),new Ot(17,Int32Array.from([6,30,54,78]),new He(28,new pe(1,107),new pe(5,108)),new He(28,new pe(10,46),new pe(1,47)),new He(28,new pe(1,22),new pe(15,23)),new He(28,new pe(2,14),new pe(17,15))),new Ot(18,Int32Array.from([6,30,56,82]),new He(30,new pe(5,120),new pe(1,121)),new He(26,new pe(9,43),new pe(4,44)),new He(28,new pe(17,22),new pe(1,23)),new He(28,new pe(2,14),new pe(19,15))),new Ot(19,Int32Array.from([6,30,58,86]),new He(28,new pe(3,113),new pe(4,114)),new He(26,new pe(3,44),new pe(11,45)),new He(26,new pe(17,21),new pe(4,22)),new He(26,new pe(9,13),new pe(16,14))),new Ot(20,Int32Array.from([6,34,62,90]),new He(28,new pe(3,107),new pe(5,108)),new He(26,new pe(3,41),new pe(13,42)),new He(30,new pe(15,24),new pe(5,25)),new He(28,new pe(15,15),new pe(10,16))),new Ot(21,Int32Array.from([6,28,50,72,94]),new He(28,new pe(4,116),new pe(4,117)),new He(26,new pe(17,42)),new He(28,new pe(17,22),new pe(6,23)),new He(30,new pe(19,16),new pe(6,17))),new Ot(22,Int32Array.from([6,26,50,74,98]),new He(28,new pe(2,111),new pe(7,112)),new He(28,new pe(17,46)),new He(30,new pe(7,24),new pe(16,25)),new He(24,new pe(34,13))),new Ot(23,Int32Array.from([6,30,54,78,102]),new He(30,new pe(4,121),new pe(5,122)),new He(28,new pe(4,47),new pe(14,48)),new He(30,new pe(11,24),new pe(14,25)),new He(30,new pe(16,15),new pe(14,16))),new Ot(24,Int32Array.from([6,28,54,80,106]),new He(30,new pe(6,117),new pe(4,118)),new He(28,new pe(6,45),new pe(14,46)),new He(30,new pe(11,24),new pe(16,25)),new He(30,new pe(30,16),new pe(2,17))),new Ot(25,Int32Array.from([6,32,58,84,110]),new He(26,new pe(8,106),new pe(4,107)),new He(28,new pe(8,47),new pe(13,48)),new He(30,new pe(7,24),new pe(22,25)),new He(30,new pe(22,15),new pe(13,16))),new Ot(26,Int32Array.from([6,30,58,86,114]),new He(28,new pe(10,114),new pe(2,115)),new He(28,new pe(19,46),new pe(4,47)),new He(28,new pe(28,22),new pe(6,23)),new He(30,new pe(33,16),new pe(4,17))),new Ot(27,Int32Array.from([6,34,62,90,118]),new He(30,new pe(8,122),new pe(4,123)),new He(28,new pe(22,45),new pe(3,46)),new He(30,new pe(8,23),new pe(26,24)),new He(30,new pe(12,15),new pe(28,16))),new Ot(28,Int32Array.from([6,26,50,74,98,122]),new He(30,new pe(3,117),new pe(10,118)),new He(28,new pe(3,45),new pe(23,46)),new He(30,new pe(4,24),new pe(31,25)),new He(30,new pe(11,15),new pe(31,16))),new Ot(29,Int32Array.from([6,30,54,78,102,126]),new He(30,new pe(7,116),new pe(7,117)),new He(28,new pe(21,45),new pe(7,46)),new He(30,new pe(1,23),new pe(37,24)),new He(30,new pe(19,15),new pe(26,16))),new Ot(30,Int32Array.from([6,26,52,78,104,130]),new He(30,new pe(5,115),new pe(10,116)),new He(28,new pe(19,47),new pe(10,48)),new He(30,new pe(15,24),new pe(25,25)),new He(30,new pe(23,15),new pe(25,16))),new Ot(31,Int32Array.from([6,30,56,82,108,134]),new He(30,new pe(13,115),new pe(3,116)),new He(28,new pe(2,46),new pe(29,47)),new He(30,new pe(42,24),new pe(1,25)),new He(30,new pe(23,15),new pe(28,16))),new Ot(32,Int32Array.from([6,34,60,86,112,138]),new He(30,new pe(17,115)),new He(28,new pe(10,46),new pe(23,47)),new He(30,new pe(10,24),new pe(35,25)),new He(30,new pe(19,15),new pe(35,16))),new Ot(33,Int32Array.from([6,30,58,86,114,142]),new He(30,new pe(17,115),new pe(1,116)),new He(28,new pe(14,46),new pe(21,47)),new He(30,new pe(29,24),new pe(19,25)),new He(30,new pe(11,15),new pe(46,16))),new Ot(34,Int32Array.from([6,34,62,90,118,146]),new He(30,new pe(13,115),new pe(6,116)),new He(28,new pe(14,46),new pe(23,47)),new He(30,new pe(44,24),new pe(7,25)),new He(30,new pe(59,16),new pe(1,17))),new Ot(35,Int32Array.from([6,30,54,78,102,126,150]),new He(30,new pe(12,121),new pe(7,122)),new He(28,new pe(12,47),new pe(26,48)),new He(30,new pe(39,24),new pe(14,25)),new He(30,new pe(22,15),new pe(41,16))),new Ot(36,Int32Array.from([6,24,50,76,102,128,154]),new He(30,new pe(6,121),new pe(14,122)),new He(28,new pe(6,47),new pe(34,48)),new He(30,new pe(46,24),new pe(10,25)),new He(30,new pe(2,15),new pe(64,16))),new Ot(37,Int32Array.from([6,28,54,80,106,132,158]),new He(30,new pe(17,122),new pe(4,123)),new He(28,new pe(29,46),new pe(14,47)),new He(30,new pe(49,24),new pe(10,25)),new He(30,new pe(24,15),new pe(46,16))),new Ot(38,Int32Array.from([6,32,58,84,110,136,162]),new He(30,new pe(4,122),new pe(18,123)),new He(28,new pe(13,46),new pe(32,47)),new He(30,new pe(48,24),new pe(14,25)),new He(30,new pe(42,15),new pe(32,16))),new Ot(39,Int32Array.from([6,26,54,82,110,138,166]),new He(30,new pe(20,117),new pe(4,118)),new He(28,new pe(40,47),new pe(7,48)),new He(30,new pe(43,24),new pe(22,25)),new He(30,new pe(10,15),new pe(67,16))),new Ot(40,Int32Array.from([6,30,58,86,114,142,170]),new He(30,new pe(19,118),new pe(6,119)),new He(28,new pe(18,47),new pe(31,48)),new He(30,new pe(34,24),new pe(34,25)),new He(30,new pe(20,15),new pe(61,16)))];var wr;(function($){$[$.DATA_MASK_000=0]="DATA_MASK_000",$[$.DATA_MASK_001=1]="DATA_MASK_001",$[$.DATA_MASK_010=2]="DATA_MASK_010",$[$.DATA_MASK_011=3]="DATA_MASK_011",$[$.DATA_MASK_100=4]="DATA_MASK_100",$[$.DATA_MASK_101=5]="DATA_MASK_101",$[$.DATA_MASK_110=6]="DATA_MASK_110",$[$.DATA_MASK_111=7]="DATA_MASK_111"})(wr||(wr={}));class ji{constructor(i,s){this.value=i,this.isMasked=s}unmaskBitMatrix(i,s){for(let c=0;c<s;c++)for(let u=0;u<s;u++)this.isMasked(c,u)&&i.flip(u,c)}}ji.values=new Map([[wr.DATA_MASK_000,new ji(wr.DATA_MASK_000,($,i)=>($+i&1)===0)],[wr.DATA_MASK_001,new ji(wr.DATA_MASK_001,($,i)=>($&1)===0)],[wr.DATA_MASK_010,new ji(wr.DATA_MASK_010,($,i)=>i%3===0)],[wr.DATA_MASK_011,new ji(wr.DATA_MASK_011,($,i)=>($+i)%3===0)],[wr.DATA_MASK_100,new ji(wr.DATA_MASK_100,($,i)=>(Math.floor($/2)+Math.floor(i/3)&1)===0)],[wr.DATA_MASK_101,new ji(wr.DATA_MASK_101,($,i)=>$*i%6===0)],[wr.DATA_MASK_110,new ji(wr.DATA_MASK_110,($,i)=>$*i%6<3)],[wr.DATA_MASK_111,new ji(wr.DATA_MASK_111,($,i)=>($+i+$*i%3&1)===0)]]);class vl{constructor(i){const s=i.getHeight();if(s<21||(s&3)!==1)throw new B;this.bitMatrix=i}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let i=0;for(let d=0;d<6;d++)i=this.copyBit(d,8,i);i=this.copyBit(7,8,i),i=this.copyBit(8,8,i),i=this.copyBit(8,7,i);for(let d=5;d>=0;d--)i=this.copyBit(8,d,i);const s=this.bitMatrix.getHeight();let c=0;const u=s-7;for(let d=s-1;d>=u;d--)c=this.copyBit(8,d,c);for(let d=s-8;d<s;d++)c=this.copyBit(d,8,c);if(this.parsedFormatInfo=Pr.decodeFormatInformation(i,c),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new B}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const i=this.bitMatrix.getHeight(),s=Math.floor((i-17)/4);if(s<=6)return Ot.getVersionForNumber(s);let c=0;const u=i-11;for(let h=5;h>=0;h--)for(let b=i-9;b>=u;b--)c=this.copyBit(b,h,c);let d=Ot.decodeVersionInformation(c);if(d!==null&&d.getDimensionForVersion()===i)return this.parsedVersion=d,d;c=0;for(let h=5;h>=0;h--)for(let b=i-9;b>=u;b--)c=this.copyBit(h,b,c);if(d=Ot.decodeVersionInformation(c),d!==null&&d.getDimensionForVersion()===i)return this.parsedVersion=d,d;throw new B}copyBit(i,s,c){return(this.isMirror?this.bitMatrix.get(s,i):this.bitMatrix.get(i,s))?c<<1|1:c<<1}readCodewords(){const i=this.readFormatInformation(),s=this.readVersion(),c=ji.values.get(i.getDataMask()),u=this.bitMatrix.getHeight();c.unmaskBitMatrix(this.bitMatrix,u);const d=s.buildFunctionPattern();let h=!0;const b=new Uint8Array(s.getTotalCodewords());let w=0,_=0,H=0;for(let K=u-1;K>0;K-=2){K===6&&K--;for(let oe=0;oe<u;oe++){const ye=h?u-1-oe:oe;for(let Ae=0;Ae<2;Ae++)d.get(K-Ae,ye)||(H++,_<<=1,this.bitMatrix.get(K-Ae,ye)&&(_|=1),H===8&&(b[w++]=_,H=0,_=0))}h=!h}if(w!==s.getTotalCodewords())throw new B;return b}remask(){if(this.parsedFormatInfo===null)return;const i=ji.values[this.parsedFormatInfo.getDataMask()],s=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,s)}setMirror(i){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=i}mirror(){const i=this.bitMatrix;for(let s=0,c=i.getWidth();s<c;s++)for(let u=s+1,d=i.getHeight();u<d;u++)i.get(s,u)!==i.get(u,s)&&(i.flip(u,s),i.flip(s,u))}}class wl{constructor(i,s){this.numDataCodewords=i,this.codewords=s}static getDataBlocks(i,s,c){if(i.length!==s.getTotalCodewords())throw new N;const u=s.getECBlocksForLevel(c);let d=0;const h=u.getECBlocks();for(const Ae of h)d+=Ae.getCount();const b=new Array(d);let w=0;for(const Ae of h)for(let Ce=0;Ce<Ae.getCount();Ce++){const Re=Ae.getDataCodewords(),Xe=u.getECCodewordsPerBlock()+Re;b[w++]=new wl(Re,new Uint8Array(Xe))}const _=b[0].codewords.length;let H=b.length-1;for(;H>=0&&b[H].codewords.length!==_;)H--;H++;const K=_-u.getECCodewordsPerBlock();let oe=0;for(let Ae=0;Ae<K;Ae++)for(let Ce=0;Ce<w;Ce++)b[Ce].codewords[Ae]=i[oe++];for(let Ae=H;Ae<w;Ae++)b[Ae].codewords[K]=i[oe++];const ye=b[0].codewords.length;for(let Ae=K;Ae<ye;Ae++)for(let Ce=0;Ce<w;Ce++){const Re=Ce<H?Ae:Ae+1;b[Ce].codewords[Re]=i[oe++]}return b}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Ii;(function($){$[$.TERMINATOR=0]="TERMINATOR",$[$.NUMERIC=1]="NUMERIC",$[$.ALPHANUMERIC=2]="ALPHANUMERIC",$[$.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",$[$.BYTE=4]="BYTE",$[$.ECI=5]="ECI",$[$.KANJI=6]="KANJI",$[$.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",$[$.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",$[$.HANZI=9]="HANZI"})(Ii||(Ii={}));class Bt{constructor(i,s,c,u){this.value=i,this.stringValue=s,this.characterCountBitsForVersions=c,this.bits=u,Bt.FOR_BITS.set(u,this),Bt.FOR_VALUE.set(i,this)}static forBits(i){const s=Bt.FOR_BITS.get(i);if(s===void 0)throw new N;return s}getCharacterCountBits(i){const s=i.getVersionNumber();let c;return s<=9?c=0:s<=26?c=1:c=2,this.characterCountBitsForVersions[c]}getValue(){return this.value}getBits(){return this.bits}equals(i){if(!(i instanceof Bt))return!1;const s=i;return this.value===s.value}toString(){return this.stringValue}}Bt.FOR_BITS=new Map,Bt.FOR_VALUE=new Map,Bt.TERMINATOR=new Bt(Ii.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Bt.NUMERIC=new Bt(Ii.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Bt.ALPHANUMERIC=new Bt(Ii.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Bt.STRUCTURED_APPEND=new Bt(Ii.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Bt.BYTE=new Bt(Ii.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Bt.ECI=new Bt(Ii.ECI,"ECI",Int32Array.from([0,0,0]),7),Bt.KANJI=new Bt(Ii.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Bt.FNC1_FIRST_POSITION=new Bt(Ii.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Bt.FNC1_SECOND_POSITION=new Bt(Ii.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Bt.HANZI=new Bt(Ii.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Tn{static decode(i,s,c,u){const d=new La(i);let h=new Q;const b=new Array;let w=-1,_=-1;try{let H=null,K=!1,oe;do{if(d.available()<4)oe=Bt.TERMINATOR;else{const ye=d.readBits(4);oe=Bt.forBits(ye)}switch(oe){case Bt.TERMINATOR:break;case Bt.FNC1_FIRST_POSITION:case Bt.FNC1_SECOND_POSITION:K=!0;break;case Bt.STRUCTURED_APPEND:if(d.available()<16)throw new B;w=d.readBits(8),_=d.readBits(8);break;case Bt.ECI:const ye=Tn.parseECIValue(d);if(H=M.getCharacterSetECIByValue(ye),H===null)throw new B;break;case Bt.HANZI:const Ae=d.readBits(4),Ce=d.readBits(oe.getCharacterCountBits(s));Ae===Tn.GB2312_SUBSET&&Tn.decodeHanziSegment(d,h,Ce);break;default:const Re=d.readBits(oe.getCharacterCountBits(s));switch(oe){case Bt.NUMERIC:Tn.decodeNumericSegment(d,h,Re);break;case Bt.ALPHANUMERIC:Tn.decodeAlphanumericSegment(d,h,Re,K);break;case Bt.BYTE:Tn.decodeByteSegment(d,h,Re,H,b,u);break;case Bt.KANJI:Tn.decodeKanjiSegment(d,h,Re);break;default:throw new B}break}}while(oe!==Bt.TERMINATOR)}catch{throw new B}return new xe(i,h.toString(),b.length===0?null:b,c===null?null:c.toString(),w,_)}static decodeHanziSegment(i,s,c){if(c*13>i.available())throw new B;const u=new Uint8Array(2*c);let d=0;for(;c>0;){const h=i.readBits(13);let b=h/96<<8&4294967295|h%96;b<959?b+=41377:b+=42657,u[d]=b>>8&255,u[d+1]=b&255,d+=2,c--}try{s.append(F.decode(u,k.GB2312))}catch(h){throw new B(h)}}static decodeKanjiSegment(i,s,c){if(c*13>i.available())throw new B;const u=new Uint8Array(2*c);let d=0;for(;c>0;){const h=i.readBits(13);let b=h/192<<8&4294967295|h%192;b<7936?b+=33088:b+=49472,u[d]=b>>8,u[d+1]=b,d+=2,c--}try{s.append(F.decode(u,k.SHIFT_JIS))}catch(h){throw new B(h)}}static decodeByteSegment(i,s,c,u,d,h){if(8*c>i.available())throw new B;const b=new Uint8Array(c);for(let _=0;_<c;_++)b[_]=i.readBits(8);let w;u===null?w=k.guessEncoding(b,h):w=u.getName();try{s.append(F.decode(b,w))}catch(_){throw new B(_)}d.push(b)}static toAlphaNumericChar(i){if(i>=Tn.ALPHANUMERIC_CHARS.length)throw new B;return Tn.ALPHANUMERIC_CHARS[i]}static decodeAlphanumericSegment(i,s,c,u){const d=s.length();for(;c>1;){if(i.available()<11)throw new B;const h=i.readBits(11);s.append(Tn.toAlphaNumericChar(Math.floor(h/45))),s.append(Tn.toAlphaNumericChar(h%45)),c-=2}if(c===1){if(i.available()<6)throw new B;s.append(Tn.toAlphaNumericChar(i.readBits(6)))}if(u)for(let h=d;h<s.length();h++)s.charAt(h)==="%"&&(h<s.length()-1&&s.charAt(h+1)==="%"?s.deleteCharAt(h+1):s.setCharAt(h,""))}static decodeNumericSegment(i,s,c){for(;c>=3;){if(i.available()<10)throw new B;const u=i.readBits(10);if(u>=1e3)throw new B;s.append(Tn.toAlphaNumericChar(Math.floor(u/100))),s.append(Tn.toAlphaNumericChar(Math.floor(u/10)%10)),s.append(Tn.toAlphaNumericChar(u%10)),c-=3}if(c===2){if(i.available()<7)throw new B;const u=i.readBits(7);if(u>=100)throw new B;s.append(Tn.toAlphaNumericChar(Math.floor(u/10))),s.append(Tn.toAlphaNumericChar(u%10))}else if(c===1){if(i.available()<4)throw new B;const u=i.readBits(4);if(u>=10)throw new B;s.append(Tn.toAlphaNumericChar(u))}}static parseECIValue(i){const s=i.readBits(8);if(!(s&128))return s&127;if((s&192)===128){const c=i.readBits(8);return(s&63)<<8&4294967295|c}if((s&224)===192){const c=i.readBits(16);return(s&31)<<16&4294967295|c}throw new B}}Tn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Tn.GB2312_SUBSET=1;class zs{constructor(i){this.mirrored=i}isMirrored(){return this.mirrored}applyMirroredCorrection(i){if(!this.mirrored||i===null||i.length<3)return;const s=i[0];i[0]=i[2],i[2]=s}}class bo{constructor(){this.rsDecoder=new he(Be.QR_CODE_FIELD_256)}decodeBooleanArray(i,s){return this.decodeBitMatrix(J.parseFromBooleanArray(i),s)}decodeBitMatrix(i,s){const c=new vl(i);let u=null;try{return this.decodeBitMatrixParser(c,s)}catch(d){u=d}try{c.remask(),c.setMirror(!0),c.readVersion(),c.readFormatInformation(),c.mirror();const d=this.decodeBitMatrixParser(c,s);return d.setOther(new zs(!0)),d}catch(d){throw u!==null?u:d}}decodeBitMatrixParser(i,s){const c=i.readVersion(),u=i.readFormatInformation().getErrorCorrectionLevel(),d=i.readCodewords(),h=wl.getDataBlocks(d,c,u);let b=0;for(const H of h)b+=H.getNumDataCodewords();const w=new Uint8Array(b);let _=0;for(const H of h){const K=H.getCodewords(),oe=H.getNumDataCodewords();this.correctErrors(K,oe);for(let ye=0;ye<oe;ye++)w[_++]=K[ye]}return Tn.decode(w,c,u,s)}correctErrors(i,s){const c=new Int32Array(i);try{this.rsDecoder.decode(c,i.length-s)}catch{throw new v}for(let u=0;u<s;u++)i[u]=c[u]}}class yo extends We{constructor(i,s,c){super(i,s),this.estimatedModuleSize=c}aboutEquals(i,s,c){if(Math.abs(s-this.getY())<=i&&Math.abs(c-this.getX())<=i){const u=Math.abs(i-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(i,s,c){const u=(this.getX()+s)/2,d=(this.getY()+i)/2,h=(this.estimatedModuleSize+c)/2;return new yo(u,d,h)}}class Fr{constructor(i,s,c,u,d,h,b){this.image=i,this.startX=s,this.startY=c,this.width=u,this.height=d,this.moduleSize=h,this.resultPointCallback=b,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const i=this.startX,s=this.height,c=this.width,u=i+c,d=this.startY+s/2,h=new Int32Array(3),b=this.image;for(let w=0;w<s;w++){const _=d+(w&1?-Math.floor((w+1)/2):Math.floor((w+1)/2));h[0]=0,h[1]=0,h[2]=0;let H=i;for(;H<u&&!b.get(H,_);)H++;let K=0;for(;H<u;){if(b.get(H,_))if(K===1)h[1]++;else if(K===2){if(this.foundPatternCross(h)){const oe=this.handlePossibleCenter(h,_,H);if(oe!==null)return oe}h[0]=h[2],h[1]=1,h[2]=0,K=1}else h[++K]++;else K===1&&K++,h[K]++;H++}if(this.foundPatternCross(h)){const oe=this.handlePossibleCenter(h,_,u);if(oe!==null)return oe}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new G}static centerFromEnd(i,s){return s-i[2]-i[1]/2}foundPatternCross(i){const s=this.moduleSize,c=s/2;for(let u=0;u<3;u++)if(Math.abs(s-i[u])>=c)return!1;return!0}crossCheckVertical(i,s,c,u){const d=this.image,h=d.getHeight(),b=this.crossCheckStateCount;b[0]=0,b[1]=0,b[2]=0;let w=i;for(;w>=0&&d.get(s,w)&&b[1]<=c;)b[1]++,w--;if(w<0||b[1]>c)return NaN;for(;w>=0&&!d.get(s,w)&&b[0]<=c;)b[0]++,w--;if(b[0]>c)return NaN;for(w=i+1;w<h&&d.get(s,w)&&b[1]<=c;)b[1]++,w++;if(w===h||b[1]>c)return NaN;for(;w<h&&!d.get(s,w)&&b[2]<=c;)b[2]++,w++;if(b[2]>c)return NaN;const _=b[0]+b[1]+b[2];return 5*Math.abs(_-u)>=2*u?NaN:this.foundPatternCross(b)?Fr.centerFromEnd(b,w):NaN}handlePossibleCenter(i,s,c){const u=i[0]+i[1]+i[2],d=Fr.centerFromEnd(i,c),h=this.crossCheckVertical(s,d,2*i[1],u);if(!isNaN(h)){const b=(i[0]+i[1]+i[2])/3;for(const _ of this.possibleCenters)if(_.aboutEquals(b,h,d))return _.combineEstimate(h,d,b);const w=new yo(d,h,b);this.possibleCenters.push(w),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(w)}return null}}class Nl extends We{constructor(i,s,c,u){super(i,s),this.estimatedModuleSize=c,this.count=u,u===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(i,s,c){if(Math.abs(s-this.getY())<=i&&Math.abs(c-this.getX())<=i){const u=Math.abs(i-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(i,s,c){const u=this.count+1,d=(this.count*this.getX()+s)/u,h=(this.count*this.getY()+i)/u,b=(this.count*this.estimatedModuleSize+c)/u;return new Nl(d,h,b,u)}}class uc{constructor(i){this.bottomLeft=i[0],this.topLeft=i[1],this.topRight=i[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class jt{constructor(i,s){this.image=i,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=s}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(i){const s=i!=null&&i.get(ie.TRY_HARDER)!==void 0,c=i!=null&&i.get(ie.PURE_BARCODE)!==void 0,u=this.image,d=u.getHeight(),h=u.getWidth();let b=Math.floor(3*d/(4*jt.MAX_MODULES));(b<jt.MIN_SKIP||s)&&(b=jt.MIN_SKIP);let w=!1;const _=new Int32Array(5);for(let K=b-1;K<d&&!w;K+=b){_[0]=0,_[1]=0,_[2]=0,_[3]=0,_[4]=0;let oe=0;for(let ye=0;ye<h;ye++)if(u.get(ye,K))(oe&1)===1&&oe++,_[oe]++;else if(oe&1)_[oe]++;else if(oe===4)if(jt.foundPatternCross(_)){if(this.handlePossibleCenter(_,K,ye,c)===!0)if(b=2,this.hasSkipped===!0)w=this.haveMultiplyConfirmedCenters();else{const Ce=this.findRowSkip();Ce>_[2]&&(K+=Ce-_[2]-b,ye=h-1)}else{_[0]=_[2],_[1]=_[3],_[2]=_[4],_[3]=1,_[4]=0,oe=3;continue}oe=0,_[0]=0,_[1]=0,_[2]=0,_[3]=0,_[4]=0}else _[0]=_[2],_[1]=_[3],_[2]=_[4],_[3]=1,_[4]=0,oe=3;else _[++oe]++;jt.foundPatternCross(_)&&this.handlePossibleCenter(_,K,h,c)===!0&&(b=_[0],this.hasSkipped&&(w=this.haveMultiplyConfirmedCenters()))}const H=this.selectBestPatterns();return We.orderBestPatterns(H),new uc(H)}static centerFromEnd(i,s){return s-i[4]-i[3]-i[2]/2}static foundPatternCross(i){let s=0;for(let d=0;d<5;d++){const h=i[d];if(h===0)return!1;s+=h}if(s<7)return!1;const c=s/7,u=c/2;return Math.abs(c-i[0])<u&&Math.abs(c-i[1])<u&&Math.abs(3*c-i[2])<3*u&&Math.abs(c-i[3])<u&&Math.abs(c-i[4])<u}getCrossCheckStateCount(){const i=this.crossCheckStateCount;return i[0]=0,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i}crossCheckDiagonal(i,s,c,u){const d=this.getCrossCheckStateCount();let h=0;const b=this.image;for(;i>=h&&s>=h&&b.get(s-h,i-h);)d[2]++,h++;if(i<h||s<h)return!1;for(;i>=h&&s>=h&&!b.get(s-h,i-h)&&d[1]<=c;)d[1]++,h++;if(i<h||s<h||d[1]>c)return!1;for(;i>=h&&s>=h&&b.get(s-h,i-h)&&d[0]<=c;)d[0]++,h++;if(d[0]>c)return!1;const w=b.getHeight(),_=b.getWidth();for(h=1;i+h<w&&s+h<_&&b.get(s+h,i+h);)d[2]++,h++;if(i+h>=w||s+h>=_)return!1;for(;i+h<w&&s+h<_&&!b.get(s+h,i+h)&&d[3]<c;)d[3]++,h++;if(i+h>=w||s+h>=_||d[3]>=c)return!1;for(;i+h<w&&s+h<_&&b.get(s+h,i+h)&&d[4]<c;)d[4]++,h++;if(d[4]>=c)return!1;const H=d[0]+d[1]+d[2]+d[3]+d[4];return Math.abs(H-u)<2*u&&jt.foundPatternCross(d)}crossCheckVertical(i,s,c,u){const d=this.image,h=d.getHeight(),b=this.getCrossCheckStateCount();let w=i;for(;w>=0&&d.get(s,w);)b[2]++,w--;if(w<0)return NaN;for(;w>=0&&!d.get(s,w)&&b[1]<=c;)b[1]++,w--;if(w<0||b[1]>c)return NaN;for(;w>=0&&d.get(s,w)&&b[0]<=c;)b[0]++,w--;if(b[0]>c)return NaN;for(w=i+1;w<h&&d.get(s,w);)b[2]++,w++;if(w===h)return NaN;for(;w<h&&!d.get(s,w)&&b[3]<c;)b[3]++,w++;if(w===h||b[3]>=c)return NaN;for(;w<h&&d.get(s,w)&&b[4]<c;)b[4]++,w++;if(b[4]>=c)return NaN;const _=b[0]+b[1]+b[2]+b[3]+b[4];return 5*Math.abs(_-u)>=2*u?NaN:jt.foundPatternCross(b)?jt.centerFromEnd(b,w):NaN}crossCheckHorizontal(i,s,c,u){const d=this.image,h=d.getWidth(),b=this.getCrossCheckStateCount();let w=i;for(;w>=0&&d.get(w,s);)b[2]++,w--;if(w<0)return NaN;for(;w>=0&&!d.get(w,s)&&b[1]<=c;)b[1]++,w--;if(w<0||b[1]>c)return NaN;for(;w>=0&&d.get(w,s)&&b[0]<=c;)b[0]++,w--;if(b[0]>c)return NaN;for(w=i+1;w<h&&d.get(w,s);)b[2]++,w++;if(w===h)return NaN;for(;w<h&&!d.get(w,s)&&b[3]<c;)b[3]++,w++;if(w===h||b[3]>=c)return NaN;for(;w<h&&d.get(w,s)&&b[4]<c;)b[4]++,w++;if(b[4]>=c)return NaN;const _=b[0]+b[1]+b[2]+b[3]+b[4];return 5*Math.abs(_-u)>=u?NaN:jt.foundPatternCross(b)?jt.centerFromEnd(b,w):NaN}handlePossibleCenter(i,s,c,u){const d=i[0]+i[1]+i[2]+i[3]+i[4];let h=jt.centerFromEnd(i,c),b=this.crossCheckVertical(s,Math.floor(h),i[2],d);if(!isNaN(b)&&(h=this.crossCheckHorizontal(Math.floor(h),Math.floor(b),i[2],d),!isNaN(h)&&(!u||this.crossCheckDiagonal(Math.floor(b),Math.floor(h),i[2],d)))){const w=d/7;let _=!1;const H=this.possibleCenters;for(let K=0,oe=H.length;K<oe;K++){const ye=H[K];if(ye.aboutEquals(w,b,h)){H[K]=ye.combineEstimate(b,h,w),_=!0;break}}if(!_){const K=new Nl(h,b,w);H.push(K),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(K)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let s=null;for(const c of this.possibleCenters)if(c.getCount()>=jt.CENTER_QUORUM)if(s==null)s=c;else return this.hasSkipped=!0,Math.floor((Math.abs(s.getX()-c.getX())-Math.abs(s.getY()-c.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let i=0,s=0;const c=this.possibleCenters.length;for(const h of this.possibleCenters)h.getCount()>=jt.CENTER_QUORUM&&(i++,s+=h.getEstimatedModuleSize());if(i<3)return!1;const u=s/c;let d=0;for(const h of this.possibleCenters)d+=Math.abs(h.getEstimatedModuleSize()-u);return d<=.05*s}selectBestPatterns(){const i=this.possibleCenters.length;if(i<3)throw new G;const s=this.possibleCenters;let c;if(i>3){let u=0,d=0;for(const w of this.possibleCenters){const _=w.getEstimatedModuleSize();u+=_,d+=_*_}c=u/i;let h=Math.sqrt(d/i-c*c);s.sort((w,_)=>{const H=Math.abs(_.getEstimatedModuleSize()-c),K=Math.abs(w.getEstimatedModuleSize()-c);return H<K?-1:H>K?1:0});const b=Math.max(.2*c,h);for(let w=0;w<s.length&&s.length>3;w++){const _=s[w];Math.abs(_.getEstimatedModuleSize()-c)>b&&(s.splice(w,1),w--)}}if(s.length>3){let u=0;for(const d of s)u+=d.getEstimatedModuleSize();c=u/s.length,s.sort((d,h)=>{if(h.getCount()===d.getCount()){const b=Math.abs(h.getEstimatedModuleSize()-c),w=Math.abs(d.getEstimatedModuleSize()-c);return b<w?1:b>w?-1:0}else return h.getCount()-d.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]}}jt.CENTER_QUORUM=2,jt.MIN_SKIP=3,jt.MAX_MODULES=57;class Hs{constructor(i){this.image=i}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(i){this.resultPointCallback=i==null?null:i.get(ie.NEED_RESULT_POINT_CALLBACK);const c=new jt(this.image,this.resultPointCallback).find(i);return this.processFinderPatternInfo(c)}processFinderPatternInfo(i){const s=i.getTopLeft(),c=i.getTopRight(),u=i.getBottomLeft(),d=this.calculateModuleSize(s,c,u);if(d<1)throw new G("No pattern found in proccess finder.");const h=Hs.computeDimension(s,c,u,d),b=Ot.getProvisionalVersionForDimension(h),w=b.getDimensionForVersion()-7;let _=null;if(b.getAlignmentPatternCenters().length>0){const ye=c.getX()-s.getX()+u.getX(),Ae=c.getY()-s.getY()+u.getY(),Ce=1-3/w,Re=Math.floor(s.getX()+Ce*(ye-s.getX())),Xe=Math.floor(s.getY()+Ce*(Ae-s.getY()));for(let st=4;st<=16;st<<=1)try{_=this.findAlignmentInRegion(d,Re,Xe,st);break}catch(ht){if(!(ht instanceof G))throw ht}}const H=Hs.createTransform(s,c,u,_,h),K=Hs.sampleGrid(this.image,H,h);let oe;return _===null?oe=[u,s,c]:oe=[u,s,c,_],new mt(K,oe)}static createTransform(i,s,c,u,d){const h=d-3.5;let b,w,_,H;return u!==null?(b=u.getX(),w=u.getY(),_=h-3,H=_):(b=s.getX()-i.getX()+c.getX(),w=s.getY()-i.getY()+c.getY(),_=h,H=h),Ze.quadrilateralToQuadrilateral(3.5,3.5,h,3.5,_,H,3.5,h,i.getX(),i.getY(),s.getX(),s.getY(),b,w,c.getX(),c.getY())}static sampleGrid(i,s,c){return St.getInstance().sampleGridWithTransform(i,c,c,s)}static computeDimension(i,s,c,u){const d=Pe.round(We.distance(i,s)/u),h=Pe.round(We.distance(i,c)/u);let b=Math.floor((d+h)/2)+7;switch(b&3){case 0:b++;break;case 2:b--;break;case 3:throw new G("Dimensions could be not found.")}return b}calculateModuleSize(i,s,c){return(this.calculateModuleSizeOneWay(i,s)+this.calculateModuleSizeOneWay(i,c))/2}calculateModuleSizeOneWay(i,s){const c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(s.getX()),Math.floor(s.getY())),u=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(i.getX()),Math.floor(i.getY()));return isNaN(c)?u/7:isNaN(u)?c/7:(c+u)/14}sizeOfBlackWhiteBlackRunBothWays(i,s,c,u){let d=this.sizeOfBlackWhiteBlackRun(i,s,c,u),h=1,b=i-(c-i);b<0?(h=i/(i-b),b=0):b>=this.image.getWidth()&&(h=(this.image.getWidth()-1-i)/(b-i),b=this.image.getWidth()-1);let w=Math.floor(s-(u-s)*h);return h=1,w<0?(h=s/(s-w),w=0):w>=this.image.getHeight()&&(h=(this.image.getHeight()-1-s)/(w-s),w=this.image.getHeight()-1),b=Math.floor(i+(b-i)*h),d+=this.sizeOfBlackWhiteBlackRun(i,s,b,w),d-1}sizeOfBlackWhiteBlackRun(i,s,c,u){const d=Math.abs(u-s)>Math.abs(c-i);if(d){let ye=i;i=s,s=ye,ye=c,c=u,u=ye}const h=Math.abs(c-i),b=Math.abs(u-s);let w=-h/2;const _=i<c?1:-1,H=s<u?1:-1;let K=0;const oe=c+_;for(let ye=i,Ae=s;ye!==oe;ye+=_){const Ce=d?Ae:ye,Re=d?ye:Ae;if(K===1===this.image.get(Ce,Re)){if(K===2)return Pe.distance(ye,Ae,i,s);K++}if(w+=b,w>0){if(Ae===u)break;Ae+=H,w-=h}}return K===2?Pe.distance(c+_,u,i,s):NaN}findAlignmentInRegion(i,s,c,u){const d=Math.floor(u*i),h=Math.max(0,s-d),b=Math.min(this.image.getWidth()-1,s+d);if(b-h<i*3)throw new G("Alignment top exceeds estimated module size.");const w=Math.max(0,c-d),_=Math.min(this.image.getHeight()-1,c+d);if(_-w<i*3)throw new G("Alignment bottom exceeds estimated module size.");return new Fr(this.image,h,w,b-h,_-w,i,this.resultPointCallback).find()}}class Ma{constructor(){this.decoder=new bo}getDecoder(){return this.decoder}decode(i,s){let c,u;if(s!=null&&s.get(ie.PURE_BARCODE)!==void 0){const w=Ma.extractPureBits(i.getBlackMatrix());c=this.decoder.decodeBitMatrix(w,s),u=Ma.NO_POINTS}else{const w=new Hs(i.getBlackMatrix()).detect(s);c=this.decoder.decodeBitMatrix(w.getBits(),s),u=w.getPoints()}c.getOther()instanceof zs&&c.getOther().applyMirroredCorrection(u);const d=new ee(c.getText(),c.getRawBytes(),void 0,u,ae.QR_CODE,void 0),h=c.getByteSegments();h!==null&&d.putMetadata(we.BYTE_SEGMENTS,h);const b=c.getECLevel();return b!==null&&d.putMetadata(we.ERROR_CORRECTION_LEVEL,b),c.hasStructuredAppend()&&(d.putMetadata(we.STRUCTURED_APPEND_SEQUENCE,c.getStructuredAppendSequenceNumber()),d.putMetadata(we.STRUCTURED_APPEND_PARITY,c.getStructuredAppendParity())),d}reset(){}static extractPureBits(i){const s=i.getTopLeftOnBit(),c=i.getBottomRightOnBit();if(s===null||c===null)throw new G;const u=this.moduleSize(s,i);let d=s[1],h=c[1],b=s[0],w=c[0];if(b>=w||d>=h)throw new G;if(h-d!==w-b&&(w=b+(h-d),w>=i.getWidth()))throw new G;const _=Math.round((w-b+1)/u),H=Math.round((h-d+1)/u);if(_<=0||H<=0)throw new G;if(H!==_)throw new G;const K=Math.floor(u/2);d+=K,b+=K;const oe=b+Math.floor((_-1)*u)-w;if(oe>0){if(oe>K)throw new G;b-=oe}const ye=d+Math.floor((H-1)*u)-h;if(ye>0){if(ye>K)throw new G;d-=ye}const Ae=new J(_,H);for(let Ce=0;Ce<H;Ce++){const Re=d+Math.floor(Ce*u);for(let Xe=0;Xe<_;Xe++)i.get(b+Math.floor(Xe*u),Re)&&Ae.set(Xe,Ce)}return Ae}static moduleSize(i,s){const c=s.getHeight(),u=s.getWidth();let d=i[0],h=i[1],b=!0,w=0;for(;d<u&&h<c;){if(b!==s.get(d,h)){if(++w===5)break;b=!b}d++,h++}if(d===u||h===c)throw new G;return(d-i[0])/7}}Ma.NO_POINTS=new Array;class Lt{PDF417Common(){}static getBitCountSum(i){return Pe.sum(i)}static toIntArray(i){if(i==null||!i.length)return Lt.EMPTY_INT_ARRAY;const s=new Int32Array(i.length);let c=0;for(const u of i)s[c++]=u;return s}static getCodeword(i){const s=E.binarySearch(Lt.SYMBOL_TABLE,i&262143);return s<0?-1:(Lt.CODEWORD_TABLE[s]-1)%Lt.NUMBER_OF_CODEWORDS}}Lt.NUMBER_OF_CODEWORDS=929,Lt.MAX_CODEWORDS_IN_BARCODE=Lt.NUMBER_OF_CODEWORDS-1,Lt.MIN_ROWS_IN_BARCODE=3,Lt.MAX_ROWS_IN_BARCODE=90,Lt.MODULES_IN_CODEWORD=17,Lt.MODULES_IN_STOP_PATTERN=18,Lt.BARS_IN_MODULE=8,Lt.EMPTY_INT_ARRAY=new Int32Array([]),Lt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Lt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class dc{constructor(i,s){this.bits=i,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class tn{static detectMultiple(i,s,c){let u=i.getBlackMatrix(),d=tn.detect(c,u);return d.length||(u=u.clone(),u.rotate180(),d=tn.detect(c,u)),new dc(u,d)}static detect(i,s){const c=new Array;let u=0,d=0,h=!1;for(;u<s.getHeight();){const b=tn.findVertices(s,u,d);if(b[0]==null&&b[3]==null){if(!h)break;h=!1,d=0;for(const w of c)w[1]!=null&&(u=Math.trunc(Math.max(u,w[1].getY()))),w[3]!=null&&(u=Math.max(u,Math.trunc(w[3].getY())));u+=tn.ROW_STEP;continue}if(h=!0,c.push(b),!i)break;b[2]!=null?(d=Math.trunc(b[2].getX()),u=Math.trunc(b[2].getY())):(d=Math.trunc(b[4].getX()),u=Math.trunc(b[4].getY()))}return c}static findVertices(i,s,c){const u=i.getHeight(),d=i.getWidth(),h=new Array(8);return tn.copyToResult(h,tn.findRowsWithPattern(i,u,d,s,c,tn.START_PATTERN),tn.INDEXES_START_PATTERN),h[4]!=null&&(c=Math.trunc(h[4].getX()),s=Math.trunc(h[4].getY())),tn.copyToResult(h,tn.findRowsWithPattern(i,u,d,s,c,tn.STOP_PATTERN),tn.INDEXES_STOP_PATTERN),h}static copyToResult(i,s,c){for(let u=0;u<c.length;u++)i[c[u]]=s[u]}static findRowsWithPattern(i,s,c,u,d,h){const b=new Array(4);let w=!1;const _=new Int32Array(h.length);for(;u<s;u+=tn.ROW_STEP){let K=tn.findGuardPattern(i,d,u,c,!1,h,_);if(K!=null){for(;u>0;){const oe=tn.findGuardPattern(i,d,--u,c,!1,h,_);if(oe!=null)K=oe;else{u++;break}}b[0]=new We(K[0],u),b[1]=new We(K[1],u),w=!0;break}}let H=u+1;if(w){let K=0,oe=Int32Array.from([Math.trunc(b[0].getX()),Math.trunc(b[1].getX())]);for(;H<s;H++){const ye=tn.findGuardPattern(i,oe[0],H,c,!1,h,_);if(ye!=null&&Math.abs(oe[0]-ye[0])<tn.MAX_PATTERN_DRIFT&&Math.abs(oe[1]-ye[1])<tn.MAX_PATTERN_DRIFT)oe=ye,K=0;else{if(K>tn.SKIPPED_ROW_COUNT_MAX)break;K++}}H-=K+1,b[2]=new We(oe[0],H),b[3]=new We(oe[1],H)}return H-u<tn.BARCODE_MIN_HEIGHT&&E.fill(b,null),b}static findGuardPattern(i,s,c,u,d,h,b){E.fillWithin(b,0,b.length,0);let w=s,_=0;for(;i.get(w,c)&&w>0&&_++<tn.MAX_PIXEL_DRIFT;)w--;let H=w,K=0,oe=h.length;for(let ye=d;H<u;H++)if(i.get(H,c)!==ye)b[K]++;else{if(K===oe-1){if(tn.patternMatchVariance(b,h,tn.MAX_INDIVIDUAL_VARIANCE)<tn.MAX_AVG_VARIANCE)return new Int32Array([w,H]);w+=b[0]+b[1],D.arraycopy(b,2,b,0,K-1),b[K-1]=0,b[K]=0,K--}else K++;b[K]=1,ye=!ye}return K===oe-1&&tn.patternMatchVariance(b,h,tn.MAX_INDIVIDUAL_VARIANCE)<tn.MAX_AVG_VARIANCE?new Int32Array([w,H-1]):null}static patternMatchVariance(i,s,c){let u=i.length,d=0,h=0;for(let _=0;_<u;_++)d+=i[_],h+=s[_];if(d<h)return 1/0;let b=d/h;c*=b;let w=0;for(let _=0;_<u;_++){let H=i[_],K=s[_]*b,oe=H>K?H-K:K-H;if(oe>c)return 1/0;w+=oe}return w/d}}tn.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),tn.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),tn.MAX_AVG_VARIANCE=.42,tn.MAX_INDIVIDUAL_VARIANCE=.8,tn.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),tn.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),tn.MAX_PIXEL_DRIFT=3,tn.MAX_PATTERN_DRIFT=5,tn.SKIPPED_ROW_COUNT_MAX=25,tn.ROW_STEP=5,tn.BARCODE_MIN_HEIGHT=10;class hr{constructor(i,s){if(s.length===0)throw new N;this.field=i;let c=s.length;if(c>1&&s[0]===0){let u=1;for(;u<c&&s[u]===0;)u++;u===c?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(c-u),D.arraycopy(s,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);if(i===1){let u=0;for(let d of this.coefficients)u=this.field.add(u,d);return u}let s=this.coefficients[0],c=this.coefficients.length;for(let u=1;u<c;u++)s=this.field.add(this.field.multiply(i,s),this.coefficients[u]);return s}add(i){if(!this.field.equals(i.field))throw new N("ModulusPolys do not have same ModulusGF field");if(this.isZero())return i;if(i.isZero())return this;let s=this.coefficients,c=i.coefficients;if(s.length>c.length){let h=s;s=c,c=h}let u=new Int32Array(c.length),d=c.length-s.length;D.arraycopy(c,0,u,0,d);for(let h=d;h<c.length;h++)u[h]=this.field.add(s[h-d],c[h]);return new hr(this.field,u)}subtract(i){if(!this.field.equals(i.field))throw new N("ModulusPolys do not have same ModulusGF field");return i.isZero()?this:this.add(i.negative())}multiply(i){return i instanceof hr?this.multiplyOther(i):this.multiplyScalar(i)}multiplyOther(i){if(!this.field.equals(i.field))throw new N("ModulusPolys do not have same ModulusGF field");if(this.isZero()||i.isZero())return new hr(this.field,new Int32Array([0]));let s=this.coefficients,c=s.length,u=i.coefficients,d=u.length,h=new Int32Array(c+d-1);for(let b=0;b<c;b++){let w=s[b];for(let _=0;_<d;_++)h[b+_]=this.field.add(h[b+_],this.field.multiply(w,u[_]))}return new hr(this.field,h)}negative(){let i=this.coefficients.length,s=new Int32Array(i);for(let c=0;c<i;c++)s[c]=this.field.subtract(0,this.coefficients[c]);return new hr(this.field,s)}multiplyScalar(i){if(i===0)return new hr(this.field,new Int32Array([0]));if(i===1)return this;let s=this.coefficients.length,c=new Int32Array(s);for(let u=0;u<s;u++)c[u]=this.field.multiply(this.coefficients[u],i);return new hr(this.field,c)}multiplyByMonomial(i,s){if(i<0)throw new N;if(s===0)return new hr(this.field,new Int32Array([0]));let c=this.coefficients.length,u=new Int32Array(c+i);for(let d=0;d<c;d++)u[d]=this.field.multiply(this.coefficients[d],s);return new hr(this.field,u)}toString(){let i=new Q;for(let s=this.getDegree();s>=0;s--){let c=this.getCoefficient(s);c!==0&&(c<0?(i.append(" - "),c=-c):i.length()>0&&i.append(" + "),(s===0||c!==1)&&i.append(c),s!==0&&(s===1?i.append("x"):(i.append("x^"),i.append(s))))}return i.toString()}}class Al{add(i,s){return(i+s)%this.modulus}subtract(i,s){return(this.modulus+i-s)%this.modulus}exp(i){return this.expTable[i]}log(i){if(i===0)throw new N;return this.logTable[i]}inverse(i){if(i===0)throw new Qe;return this.expTable[this.modulus-this.logTable[i]-1]}multiply(i,s){return i===0||s===0?0:this.expTable[(this.logTable[i]+this.logTable[s])%(this.modulus-1)]}getSize(){return this.modulus}equals(i){return i===this}}class Sl extends Al{constructor(i,s){super(),this.modulus=i,this.expTable=new Int32Array(i),this.logTable=new Int32Array(i);let c=1;for(let u=0;u<i;u++)this.expTable[u]=c,c=c*s%i;for(let u=0;u<i-1;u++)this.logTable[this.expTable[u]]=u;this.zero=new hr(this,new Int32Array([0])),this.one=new hr(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,s){if(i<0)throw new N;if(s===0)return this.zero;let c=new Int32Array(i+1);return c[0]=s,new hr(this,c)}}Sl.PDF417_GF=new Sl(Lt.NUMBER_OF_CODEWORDS,3);class fc{constructor(){this.field=Sl.PDF417_GF}decode(i,s,c){let u=new hr(this.field,i),d=new Int32Array(s),h=!1;for(let Ae=s;Ae>0;Ae--){let Ce=u.evaluateAt(this.field.exp(Ae));d[s-Ae]=Ce,Ce!==0&&(h=!0)}if(!h)return 0;let b=this.field.getOne();if(c!=null)for(const Ae of c){let Ce=this.field.exp(i.length-1-Ae),Re=new hr(this.field,new Int32Array([this.field.subtract(0,Ce),1]));b=b.multiply(Re)}let w=new hr(this.field,d),_=this.runEuclideanAlgorithm(this.field.buildMonomial(s,1),w,s),H=_[0],K=_[1],oe=this.findErrorLocations(H),ye=this.findErrorMagnitudes(K,H,oe);for(let Ae=0;Ae<oe.length;Ae++){let Ce=i.length-1-this.field.log(oe[Ae]);if(Ce<0)throw v.getChecksumInstance();i[Ce]=this.field.subtract(i[Ce],ye[Ae])}return oe.length}runEuclideanAlgorithm(i,s,c){if(i.getDegree()<s.getDegree()){let oe=i;i=s,s=oe}let u=i,d=s,h=this.field.getZero(),b=this.field.getOne();for(;d.getDegree()>=Math.round(c/2);){let oe=u,ye=h;if(u=d,h=b,u.isZero())throw v.getChecksumInstance();d=oe;let Ae=this.field.getZero(),Ce=u.getCoefficient(u.getDegree()),Re=this.field.inverse(Ce);for(;d.getDegree()>=u.getDegree()&&!d.isZero();){let Xe=d.getDegree()-u.getDegree(),st=this.field.multiply(d.getCoefficient(d.getDegree()),Re);Ae=Ae.add(this.field.buildMonomial(Xe,st)),d=d.subtract(u.multiplyByMonomial(Xe,st))}b=Ae.multiply(h).subtract(ye).negative()}let w=b.getCoefficient(0);if(w===0)throw v.getChecksumInstance();let _=this.field.inverse(w),H=b.multiply(_),K=d.multiply(_);return[H,K]}findErrorLocations(i){let s=i.getDegree(),c=new Int32Array(s),u=0;for(let d=1;d<this.field.getSize()&&u<s;d++)i.evaluateAt(d)===0&&(c[u]=this.field.inverse(d),u++);if(u!==s)throw v.getChecksumInstance();return c}findErrorMagnitudes(i,s,c){let u=s.getDegree(),d=new Int32Array(u);for(let _=1;_<=u;_++)d[u-_]=this.field.multiply(_,s.getCoefficient(_));let h=new hr(this.field,d),b=c.length,w=new Int32Array(b);for(let _=0;_<b;_++){let H=this.field.inverse(c[_]),K=this.field.subtract(0,i.evaluateAt(H)),oe=this.field.inverse(h.evaluateAt(H));w[_]=this.field.multiply(K,oe)}return w}}class $a{constructor(i,s,c,u,d){i instanceof $a?this.constructor_2(i):this.constructor_1(i,s,c,u,d)}constructor_1(i,s,c,u,d){const h=s==null||c==null,b=u==null||d==null;if(h&&b)throw new G;h?(s=new We(0,u.getY()),c=new We(0,d.getY())):b&&(u=new We(i.getWidth()-1,s.getY()),d=new We(i.getWidth()-1,c.getY())),this.image=i,this.topLeft=s,this.bottomLeft=c,this.topRight=u,this.bottomRight=d,this.minX=Math.trunc(Math.min(s.getX(),c.getX())),this.maxX=Math.trunc(Math.max(u.getX(),d.getX())),this.minY=Math.trunc(Math.min(s.getY(),u.getY())),this.maxY=Math.trunc(Math.max(c.getY(),d.getY()))}constructor_2(i){this.image=i.image,this.topLeft=i.getTopLeft(),this.bottomLeft=i.getBottomLeft(),this.topRight=i.getTopRight(),this.bottomRight=i.getBottomRight(),this.minX=i.getMinX(),this.maxX=i.getMaxX(),this.minY=i.getMinY(),this.maxY=i.getMaxY()}static merge(i,s){return i==null?s:s==null?i:new $a(i.image,i.topLeft,i.bottomLeft,s.topRight,s.bottomRight)}addMissingRows(i,s,c){let u=this.topLeft,d=this.bottomLeft,h=this.topRight,b=this.bottomRight;if(i>0){let w=c?this.topLeft:this.topRight,_=Math.trunc(w.getY()-i);_<0&&(_=0);let H=new We(w.getX(),_);c?u=H:h=H}if(s>0){let w=c?this.bottomLeft:this.bottomRight,_=Math.trunc(w.getY()+s);_>=this.image.getHeight()&&(_=this.image.getHeight()-1);let H=new We(w.getX(),_);c?d=H:b=H}return new $a(this.image,u,d,h,b)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Cl{constructor(i,s,c,u){this.columnCount=i,this.errorCorrectionLevel=u,this.rowCountUpperPart=s,this.rowCountLowerPart=c,this.rowCount=s+c}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class pa{constructor(){this.buffer=""}static form(i,s){let c=-1;function u(h,b,w,_,H,K){if(h==="%%")return"%";if(s[++c]===void 0)return;h=_?parseInt(_.substr(1)):void 0;let oe=H?parseInt(H.substr(1)):void 0,ye;switch(K){case"s":ye=s[c];break;case"c":ye=s[c][0];break;case"f":ye=parseFloat(s[c]).toFixed(h);break;case"p":ye=parseFloat(s[c]).toPrecision(h);break;case"e":ye=parseFloat(s[c]).toExponential(h);break;case"x":ye=parseInt(s[c]).toString(oe||16);break;case"d":ye=parseFloat(parseInt(s[c],oe||10).toPrecision(h)).toFixed(0);break}ye=typeof ye=="object"?JSON.stringify(ye):(+ye).toString(oe);let Ae=parseInt(w),Ce=w&&w[0]+""=="0"?"0":" ";for(;ye.length<Ae;)ye=b!==void 0?ye+Ce:Ce+ye;return ye}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(d,u)}format(i,...s){this.buffer+=pa.form(i,s)}toString(){return this.buffer}}class ta{constructor(i){this.boundingBox=new $a(i),this.codewords=new Array(i.getMaxY()-i.getMinY()+1)}getCodewordNearby(i){let s=this.getCodeword(i);if(s!=null)return s;for(let c=1;c<ta.MAX_NEARBY_DISTANCE;c++){let u=this.imageRowToCodewordIndex(i)-c;if(u>=0&&(s=this.codewords[u],s!=null)||(u=this.imageRowToCodewordIndex(i)+c,u<this.codewords.length&&(s=this.codewords[u],s!=null)))return s}return null}imageRowToCodewordIndex(i){return i-this.boundingBox.getMinY()}setCodeword(i,s){this.codewords[this.imageRowToCodewordIndex(i)]=s}getCodeword(i){return this.codewords[this.imageRowToCodewordIndex(i)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const i=new pa;let s=0;for(const c of this.codewords){if(c==null){i.format("%3d:    |   %n",s++);continue}i.format("%3d: %3d|%3d%n",s++,c.getRowNumber(),c.getValue())}return i.toString()}}ta.MAX_NEARBY_DISTANCE=5;class Vs{constructor(){this.values=new Map}setValue(i){i=Math.trunc(i);let s=this.values.get(i);s==null&&(s=0),s++,this.values.set(i,s)}getValue(){let i=-1,s=new Array;for(const[c,u]of this.values.entries()){const d={getKey:()=>c,getValue:()=>u};d.getValue()>i?(i=d.getValue(),s=[],s.push(d.getKey())):d.getValue()===i&&s.push(d.getKey())}return Lt.toIntArray(s)}getConfidence(i){return this.values.get(i)}}class gs extends ta{constructor(i,s){super(i),this._isLeft=s}setRowNumbers(){for(let i of this.getCodewords())i!=null&&i.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(i){let s=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(s,i);let c=this.getBoundingBox(),u=this._isLeft?c.getTopLeft():c.getTopRight(),d=this._isLeft?c.getBottomLeft():c.getBottomRight(),h=this.imageRowToCodewordIndex(Math.trunc(u.getY())),b=this.imageRowToCodewordIndex(Math.trunc(d.getY())),w=-1,_=1,H=0;for(let K=h;K<b;K++){if(s[K]==null)continue;let oe=s[K],ye=oe.getRowNumber()-w;if(ye===0)H++;else if(ye===1)_=Math.max(_,H),H=1,w=oe.getRowNumber();else if(ye<0||oe.getRowNumber()>=i.getRowCount()||ye>K)s[K]=null;else{let Ae;_>2?Ae=(_-2)*ye:Ae=ye;let Ce=Ae>=K;for(let Re=1;Re<=Ae&&!Ce;Re++)Ce=s[K-Re]!=null;Ce?s[K]=null:(w=oe.getRowNumber(),H=1)}}}getRowHeights(){let i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);let s=new Int32Array(i.getRowCount());for(let c of this.getCodewords())if(c!=null){let u=c.getRowNumber();if(u>=s.length)continue;s[u]++}return s}adjustIncompleteIndicatorColumnRowNumbers(i){let s=this.getBoundingBox(),c=this._isLeft?s.getTopLeft():s.getTopRight(),u=this._isLeft?s.getBottomLeft():s.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(c.getY())),h=this.imageRowToCodewordIndex(Math.trunc(u.getY())),b=this.getCodewords(),w=-1;for(let _=d;_<h;_++){if(b[_]==null)continue;let H=b[_];H.setRowNumberAsRowIndicatorColumn();let K=H.getRowNumber()-w;K===0||(K===1?w=H.getRowNumber():H.getRowNumber()>=i.getRowCount()?b[_]=null:w=H.getRowNumber())}}getBarcodeMetadata(){let i=this.getCodewords(),s=new Vs,c=new Vs,u=new Vs,d=new Vs;for(let b of i){if(b==null)continue;b.setRowNumberAsRowIndicatorColumn();let w=b.getValue()%30,_=b.getRowNumber();switch(this._isLeft||(_+=2),_%3){case 0:c.setValue(w*3+1);break;case 1:d.setValue(w/3),u.setValue(w%3);break;case 2:s.setValue(w+1);break}}if(s.getValue().length===0||c.getValue().length===0||u.getValue().length===0||d.getValue().length===0||s.getValue()[0]<1||c.getValue()[0]+u.getValue()[0]<Lt.MIN_ROWS_IN_BARCODE||c.getValue()[0]+u.getValue()[0]>Lt.MAX_ROWS_IN_BARCODE)return null;let h=new Cl(s.getValue()[0],c.getValue()[0],u.getValue()[0],d.getValue()[0]);return this.removeIncorrectCodewords(i,h),h}removeIncorrectCodewords(i,s){for(let c=0;c<i.length;c++){let u=i[c];if(i[c]==null)continue;let d=u.getValue()%30,h=u.getRowNumber();if(h>s.getRowCount()){i[c]=null;continue}switch(this._isLeft||(h+=2),h%3){case 0:d*3+1!==s.getRowCountUpperPart()&&(i[c]=null);break;case 1:(Math.trunc(d/3)!==s.getErrorCorrectionLevel()||d%3!==s.getRowCountLowerPart())&&(i[c]=null);break;case 2:d+1!==s.getColumnCount()&&(i[c]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class es{constructor(i,s){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=i,this.barcodeColumnCount=i.getColumnCount(),this.boundingBox=s,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let i=Lt.MAX_CODEWORDS_IN_BARCODE,s;do s=i,i=this.adjustRowNumbersAndGetCount();while(i>0&&i<s);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(i){i!=null&&i.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let i=this.adjustRowNumbersByRow();if(i===0)return 0;for(let s=1;s<this.barcodeColumnCount+1;s++){let c=this.detectionResultColumns[s].getCodewords();for(let u=0;u<c.length;u++)c[u]!=null&&(c[u].hasValidRowNumber()||this.adjustRowNumbers(s,u,c))}return i}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let i=this.detectionResultColumns[0].getCodewords(),s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let c=0;c<i.length;c++)if(i[c]!=null&&s[c]!=null&&i[c].getRowNumber()===s[c].getRowNumber())for(let u=1;u<=this.barcodeColumnCount;u++){let d=this.detectionResultColumns[u].getCodewords()[c];d!=null&&(d.setRowNumber(i[c].getRowNumber()),d.hasValidRowNumber()||(this.detectionResultColumns[u].getCodewords()[c]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let i=0,s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let c=0;c<s.length;c++){if(s[c]==null)continue;let u=s[c].getRowNumber(),d=0;for(let h=this.barcodeColumnCount+1;h>0&&d<this.ADJUST_ROW_NUMBER_SKIP;h--){let b=this.detectionResultColumns[h].getCodewords()[c];b!=null&&(d=es.adjustRowNumberIfValid(u,d,b),b.hasValidRowNumber()||i++)}}return i}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let i=0,s=this.detectionResultColumns[0].getCodewords();for(let c=0;c<s.length;c++){if(s[c]==null)continue;let u=s[c].getRowNumber(),d=0;for(let h=1;h<this.barcodeColumnCount+1&&d<this.ADJUST_ROW_NUMBER_SKIP;h++){let b=this.detectionResultColumns[h].getCodewords()[c];b!=null&&(d=es.adjustRowNumberIfValid(u,d,b),b.hasValidRowNumber()||i++)}}return i}static adjustRowNumberIfValid(i,s,c){return c==null||c.hasValidRowNumber()||(c.isValidRowNumber(i)?(c.setRowNumber(i),s=0):++s),s}adjustRowNumbers(i,s,c){if(!this.detectionResultColumns[i-1])return;let u=c[s],d=this.detectionResultColumns[i-1].getCodewords(),h=d;this.detectionResultColumns[i+1]!=null&&(h=this.detectionResultColumns[i+1].getCodewords());let b=new Array(14);b[2]=d[s],b[3]=h[s],s>0&&(b[0]=c[s-1],b[4]=d[s-1],b[5]=h[s-1]),s>1&&(b[8]=c[s-2],b[10]=d[s-2],b[11]=h[s-2]),s<c.length-1&&(b[1]=c[s+1],b[6]=d[s+1],b[7]=h[s+1]),s<c.length-2&&(b[9]=c[s+2],b[12]=d[s+2],b[13]=h[s+2]);for(let w of b)if(es.adjustRowNumber(u,w))return}static adjustRowNumber(i,s){return s==null?!1:s.hasValidRowNumber()&&s.getBucket()===i.getBucket()?(i.setRowNumber(s.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(i){this.boundingBox=i}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(i,s){this.detectionResultColumns[i]=s}getDetectionResultColumn(i){return this.detectionResultColumns[i]}toString(){let i=this.detectionResultColumns[0];i==null&&(i=this.detectionResultColumns[this.barcodeColumnCount+1]);let s=new pa;for(let c=0;c<i.getCodewords().length;c++){s.format("CW %3d:",c);for(let u=0;u<this.barcodeColumnCount+2;u++){if(this.detectionResultColumns[u]==null){s.format("    |   ");continue}let d=this.detectionResultColumns[u].getCodewords()[c];if(d==null){s.format("    |   ");continue}s.format(" %3d|%3d",d.getRowNumber(),d.getValue())}s.format("%n")}return s.toString()}}class ka{constructor(i,s,c,u){this.rowNumber=ka.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(i),this.endX=Math.trunc(s),this.bucket=Math.trunc(c),this.value=Math.trunc(u)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(i){return i!==ka.BARCODE_ROW_UNKNOWN&&this.bucket===i%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(i){this.rowNumber=i}toString(){return this.rowNumber+"|"+this.value}}ka.BARCODE_ROW_UNKNOWN=-1;class ni{static initialize(){for(let i=0;i<Lt.SYMBOL_TABLE.length;i++){let s=Lt.SYMBOL_TABLE[i],c=s&1;for(let u=0;u<Lt.BARS_IN_MODULE;u++){let d=0;for(;(s&1)===c;)d+=1,s>>=1;c=s&1,ni.RATIOS_TABLE[i]||(ni.RATIOS_TABLE[i]=new Array(Lt.BARS_IN_MODULE)),ni.RATIOS_TABLE[i][Lt.BARS_IN_MODULE-u-1]=Math.fround(d/Lt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(i){let s=ni.getDecodedCodewordValue(ni.sampleBitCounts(i));return s!==-1?s:ni.getClosestDecodedValue(i)}static sampleBitCounts(i){let s=Pe.sum(i),c=new Int32Array(Lt.BARS_IN_MODULE),u=0,d=0;for(let h=0;h<Lt.MODULES_IN_CODEWORD;h++){let b=s/(2*Lt.MODULES_IN_CODEWORD)+h*s/Lt.MODULES_IN_CODEWORD;d+i[u]<=b&&(d+=i[u],u++),c[u]++}return c}static getDecodedCodewordValue(i){let s=ni.getBitValue(i);return Lt.getCodeword(s)===-1?-1:s}static getBitValue(i){let s=0;for(let c=0;c<i.length;c++)for(let u=0;u<i[c];u++)s=s<<1|(c%2===0?1:0);return Math.trunc(s)}static getClosestDecodedValue(i){let s=Pe.sum(i),c=new Array(Lt.BARS_IN_MODULE);if(s>1)for(let h=0;h<c.length;h++)c[h]=Math.fround(i[h]/s);let u=ct.MAX_VALUE,d=-1;this.bSymbolTableReady||ni.initialize();for(let h=0;h<ni.RATIOS_TABLE.length;h++){let b=0,w=ni.RATIOS_TABLE[h];for(let _=0;_<Lt.BARS_IN_MODULE;_++){let H=Math.fround(w[_]-c[_]);if(b+=Math.fround(H*H),b>=u)break}b<u&&(u=b,d=Lt.SYMBOL_TABLE[h])}return d}}ni.bSymbolTableReady=!1,ni.RATIOS_TABLE=new Array(Lt.SYMBOL_TABLE.length).map($=>new Array(Lt.BARS_IN_MODULE));class El{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(i){this.segmentIndex=i}getFileId(){return this.fileId}setFileId(i){this.fileId=i}getOptionalData(){return this.optionalData}setOptionalData(i){this.optionalData=i}isLastSegment(){return this.lastSegment}setLastSegment(i){this.lastSegment=i}getSegmentCount(){return this.segmentCount}setSegmentCount(i){this.segmentCount=i}getSender(){return this.sender||null}setSender(i){this.sender=i}getAddressee(){return this.addressee||null}setAddressee(i){this.addressee=i}getFileName(){return this.fileName}setFileName(i){this.fileName=i}getFileSize(){return this.fileSize}setFileSize(i){this.fileSize=i}getChecksum(){return this.checksum}setChecksum(i){this.checksum=i}getTimestamp(){return this.timestamp}setTimestamp(i){this.timestamp=i}}class Tl{static parseLong(i,s=void 0){return parseInt(i,s)}}class _l extends x{}_l.kind="NullPointerException";class Pa{writeBytes(i){this.writeBytesOffset(i,0,i.length)}writeBytesOffset(i,s,c){if(i==null)throw new _l;if(s<0||s>i.length||c<0||s+c>i.length||s+c<0)throw new P;if(c===0)return;for(let u=0;u<c;u++)this.write(i[s+u])}flush(){}close(){}}class ts extends x{}class wu extends Pa{constructor(i=32){if(super(),this.count=0,i<0)throw new N("Negative initial size: "+i);this.buf=new Uint8Array(i)}ensureCapacity(i){i-this.buf.length>0&&this.grow(i)}grow(i){let c=this.buf.length<<1;if(c-i<0&&(c=i),c<0){if(i<0)throw new ts;c=j.MAX_VALUE}this.buf=E.copyOfUint8Array(this.buf,c)}write(i){this.ensureCapacity(this.count+1),this.buf[this.count]=i,this.count+=1}writeBytesOffset(i,s,c){if(s<0||s>i.length||c<0||s+c-i.length>0)throw new P;this.ensureCapacity(this.count+c),D.arraycopy(i,s,this.buf,this.count,c),this.count+=c}writeTo(i){i.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return E.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(i){return i?typeof i=="string"?this.toString_string(i):this.toString_number(i):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(i){return new String(this.buf).toString()}toString_number(i){return new String(this.buf).toString()}close(){}}var gn;(function($){$[$.ALPHA=0]="ALPHA",$[$.LOWER=1]="LOWER",$[$.MIXED=2]="MIXED",$[$.PUNCT=3]="PUNCT",$[$.ALPHA_SHIFT=4]="ALPHA_SHIFT",$[$.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(gn||(gn={}));function na(){if(typeof window<"u")return window.BigInt||null;if(typeof eo<"u")return eo.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let ps;function Di($){if(typeof ps>"u"&&(ps=na()),ps===null)throw new Error("BigInt is not supported!");return ps($)}function Nu(){let $=[];$[0]=Di(1);let i=Di(900);$[1]=i;for(let s=2;s<16;s++)$[s]=$[s-1]*i;return $}class Ye{static decode(i,s){let c=new Q(""),u=M.ISO8859_1;c.enableDecoding(u);let d=1,h=i[d++],b=new El;for(;d<i[0];){switch(h){case Ye.TEXT_COMPACTION_MODE_LATCH:d=Ye.textCompaction(i,d,c);break;case Ye.BYTE_COMPACTION_MODE_LATCH:case Ye.BYTE_COMPACTION_MODE_LATCH_6:d=Ye.byteCompaction(h,i,u,d,c);break;case Ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(i[d++]);break;case Ye.NUMERIC_COMPACTION_MODE_LATCH:d=Ye.numericCompaction(i,d,c);break;case Ye.ECI_CHARSET:M.getCharacterSetECIByValue(i[d++]);break;case Ye.ECI_GENERAL_PURPOSE:d+=2;break;case Ye.ECI_USER_DEFINED:d++;break;case Ye.BEGIN_MACRO_PDF417_CONTROL_BLOCK:d=Ye.decodeMacroBlock(i,d,b);break;case Ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Ye.MACRO_PDF417_TERMINATOR:throw new B;default:d--,d=Ye.textCompaction(i,d,c);break}if(d<i.length)h=i[d++];else throw B.getFormatInstance()}if(c.length()===0)throw B.getFormatInstance();let w=new xe(null,c.toString(),null,s);return w.setOther(b),w}static decodeMacroBlock(i,s,c){if(s+Ye.NUMBER_OF_SEQUENCE_CODEWORDS>i[0])throw B.getFormatInstance();let u=new Int32Array(Ye.NUMBER_OF_SEQUENCE_CODEWORDS);for(let b=0;b<Ye.NUMBER_OF_SEQUENCE_CODEWORDS;b++,s++)u[b]=i[s];c.setSegmentIndex(j.parseInt(Ye.decodeBase900toBase10(u,Ye.NUMBER_OF_SEQUENCE_CODEWORDS)));let d=new Q;s=Ye.textCompaction(i,s,d),c.setFileId(d.toString());let h=-1;for(i[s]===Ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(h=s+1);s<i[0];)switch(i[s]){case Ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(s++,i[s]){case Ye.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let b=new Q;s=Ye.textCompaction(i,s+1,b),c.setFileName(b.toString());break;case Ye.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let w=new Q;s=Ye.textCompaction(i,s+1,w),c.setSender(w.toString());break;case Ye.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let _=new Q;s=Ye.textCompaction(i,s+1,_),c.setAddressee(_.toString());break;case Ye.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let H=new Q;s=Ye.numericCompaction(i,s+1,H),c.setSegmentCount(j.parseInt(H.toString()));break;case Ye.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let K=new Q;s=Ye.numericCompaction(i,s+1,K),c.setTimestamp(Tl.parseLong(K.toString()));break;case Ye.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let oe=new Q;s=Ye.numericCompaction(i,s+1,oe),c.setChecksum(j.parseInt(oe.toString()));break;case Ye.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let ye=new Q;s=Ye.numericCompaction(i,s+1,ye),c.setFileSize(Tl.parseLong(ye.toString()));break;default:throw B.getFormatInstance()}break;case Ye.MACRO_PDF417_TERMINATOR:s++,c.setLastSegment(!0);break;default:throw B.getFormatInstance()}if(h!==-1){let b=s-h;c.isLastSegment()&&b--,c.setOptionalData(E.copyOfRange(i,h,h+b))}return s}static textCompaction(i,s,c){let u=new Int32Array((i[0]-s)*2),d=new Int32Array((i[0]-s)*2),h=0,b=!1;for(;s<i[0]&&!b;){let w=i[s++];if(w<Ye.TEXT_COMPACTION_MODE_LATCH)u[h]=w/30,u[h+1]=w%30,h+=2;else switch(w){case Ye.TEXT_COMPACTION_MODE_LATCH:u[h++]=Ye.TEXT_COMPACTION_MODE_LATCH;break;case Ye.BYTE_COMPACTION_MODE_LATCH:case Ye.BYTE_COMPACTION_MODE_LATCH_6:case Ye.NUMERIC_COMPACTION_MODE_LATCH:case Ye.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Ye.MACRO_PDF417_TERMINATOR:s--,b=!0;break;case Ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u[h]=Ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,w=i[s++],d[h]=w,h++;break}}return Ye.decodeTextCompaction(u,d,h,c),s}static decodeTextCompaction(i,s,c,u){let d=gn.ALPHA,h=gn.ALPHA,b=0;for(;b<c;){let w=i[b],_="";switch(d){case gn.ALPHA:if(w<26)_=String.fromCharCode(65+w);else switch(w){case 26:_=" ";break;case Ye.LL:d=gn.LOWER;break;case Ye.ML:d=gn.MIXED;break;case Ye.PS:h=d,d=gn.PUNCT_SHIFT;break;case Ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[b]);break;case Ye.TEXT_COMPACTION_MODE_LATCH:d=gn.ALPHA;break}break;case gn.LOWER:if(w<26)_=String.fromCharCode(97+w);else switch(w){case 26:_=" ";break;case Ye.AS:h=d,d=gn.ALPHA_SHIFT;break;case Ye.ML:d=gn.MIXED;break;case Ye.PS:h=d,d=gn.PUNCT_SHIFT;break;case Ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[b]);break;case Ye.TEXT_COMPACTION_MODE_LATCH:d=gn.ALPHA;break}break;case gn.MIXED:if(w<Ye.PL)_=Ye.MIXED_CHARS[w];else switch(w){case Ye.PL:d=gn.PUNCT;break;case 26:_=" ";break;case Ye.LL:d=gn.LOWER;break;case Ye.AL:d=gn.ALPHA;break;case Ye.PS:h=d,d=gn.PUNCT_SHIFT;break;case Ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[b]);break;case Ye.TEXT_COMPACTION_MODE_LATCH:d=gn.ALPHA;break}break;case gn.PUNCT:if(w<Ye.PAL)_=Ye.PUNCT_CHARS[w];else switch(w){case Ye.PAL:d=gn.ALPHA;break;case Ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[b]);break;case Ye.TEXT_COMPACTION_MODE_LATCH:d=gn.ALPHA;break}break;case gn.ALPHA_SHIFT:if(d=h,w<26)_=String.fromCharCode(65+w);else switch(w){case 26:_=" ";break;case Ye.TEXT_COMPACTION_MODE_LATCH:d=gn.ALPHA;break}break;case gn.PUNCT_SHIFT:if(d=h,w<Ye.PAL)_=Ye.PUNCT_CHARS[w];else switch(w){case Ye.PAL:d=gn.ALPHA;break;case Ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[b]);break;case Ye.TEXT_COMPACTION_MODE_LATCH:d=gn.ALPHA;break}break}_!==""&&u.append(_),b++}}static byteCompaction(i,s,c,u,d){let h=new wu,b=0,w=0,_=!1;switch(i){case Ye.BYTE_COMPACTION_MODE_LATCH:let H=new Int32Array(6),K=s[u++];for(;u<s[0]&&!_;)switch(H[b++]=K,w=900*w+K,K=s[u++],K){case Ye.TEXT_COMPACTION_MODE_LATCH:case Ye.BYTE_COMPACTION_MODE_LATCH:case Ye.NUMERIC_COMPACTION_MODE_LATCH:case Ye.BYTE_COMPACTION_MODE_LATCH_6:case Ye.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Ye.MACRO_PDF417_TERMINATOR:u--,_=!0;break;default:if(b%5===0&&b>0){for(let oe=0;oe<6;++oe)h.write(Number(Di(w)>>Di(8*(5-oe))));w=0,b=0}break}u===s[0]&&K<Ye.TEXT_COMPACTION_MODE_LATCH&&(H[b++]=K);for(let oe=0;oe<b;oe++)h.write(H[oe]);break;case Ye.BYTE_COMPACTION_MODE_LATCH_6:for(;u<s[0]&&!_;){let oe=s[u++];if(oe<Ye.TEXT_COMPACTION_MODE_LATCH)b++,w=900*w+oe;else switch(oe){case Ye.TEXT_COMPACTION_MODE_LATCH:case Ye.BYTE_COMPACTION_MODE_LATCH:case Ye.NUMERIC_COMPACTION_MODE_LATCH:case Ye.BYTE_COMPACTION_MODE_LATCH_6:case Ye.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Ye.MACRO_PDF417_TERMINATOR:u--,_=!0;break}if(b%5===0&&b>0){for(let ye=0;ye<6;++ye)h.write(Number(Di(w)>>Di(8*(5-ye))));w=0,b=0}}break}return d.append(F.decode(h.toByteArray(),c)),u}static numericCompaction(i,s,c){let u=0,d=!1,h=new Int32Array(Ye.MAX_NUMERIC_CODEWORDS);for(;s<i[0]&&!d;){let b=i[s++];if(s===i[0]&&(d=!0),b<Ye.TEXT_COMPACTION_MODE_LATCH)h[u]=b,u++;else switch(b){case Ye.TEXT_COMPACTION_MODE_LATCH:case Ye.BYTE_COMPACTION_MODE_LATCH:case Ye.BYTE_COMPACTION_MODE_LATCH_6:case Ye.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Ye.MACRO_PDF417_TERMINATOR:s--,d=!0;break}(u%Ye.MAX_NUMERIC_CODEWORDS===0||b===Ye.NUMERIC_COMPACTION_MODE_LATCH||d)&&u>0&&(c.append(Ye.decodeBase900toBase10(h,u)),u=0)}return s}static decodeBase900toBase10(i,s){let c=Di(0);for(let d=0;d<s;d++)c+=Ye.EXP900[s-d-1]*Di(i[d]);let u=c.toString();if(u.charAt(0)!=="1")throw new B;return u.substring(1)}}Ye.TEXT_COMPACTION_MODE_LATCH=900,Ye.BYTE_COMPACTION_MODE_LATCH=901,Ye.NUMERIC_COMPACTION_MODE_LATCH=902,Ye.BYTE_COMPACTION_MODE_LATCH_6=924,Ye.ECI_USER_DEFINED=925,Ye.ECI_GENERAL_PURPOSE=926,Ye.ECI_CHARSET=927,Ye.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,Ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,Ye.MACRO_PDF417_TERMINATOR=922,Ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,Ye.MAX_NUMERIC_CODEWORDS=15,Ye.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,Ye.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,Ye.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,Ye.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,Ye.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,Ye.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,Ye.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,Ye.PL=25,Ye.LL=27,Ye.AS=27,Ye.ML=28,Ye.AL=28,Ye.PS=29,Ye.PAL=29,Ye.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,Ye.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",Ye.EXP900=na()?Nu():[],Ye.NUMBER_OF_SEQUENCE_CODEWORDS=2;class sn{constructor(){}static decode(i,s,c,u,d,h,b){let w=new $a(i,s,c,u,d),_=null,H=null,K;for(let Ae=!0;;Ae=!1){if(s!=null&&(_=sn.getRowIndicatorColumn(i,w,s,!0,h,b)),u!=null&&(H=sn.getRowIndicatorColumn(i,w,u,!1,h,b)),K=sn.merge(_,H),K==null)throw G.getNotFoundInstance();let Ce=K.getBoundingBox();if(Ae&&Ce!=null&&(Ce.getMinY()<w.getMinY()||Ce.getMaxY()>w.getMaxY()))w=Ce;else break}K.setBoundingBox(w);let oe=K.getBarcodeColumnCount()+1;K.setDetectionResultColumn(0,_),K.setDetectionResultColumn(oe,H);let ye=_!=null;for(let Ae=1;Ae<=oe;Ae++){let Ce=ye?Ae:oe-Ae;if(K.getDetectionResultColumn(Ce)!==void 0)continue;let Re;Ce===0||Ce===oe?Re=new gs(w,Ce===0):Re=new ta(w),K.setDetectionResultColumn(Ce,Re);let Xe=-1,st=Xe;for(let ht=w.getMinY();ht<=w.getMaxY();ht++){if(Xe=sn.getStartColumn(K,Ce,ht,ye),Xe<0||Xe>w.getMaxX()){if(st===-1)continue;Xe=st}let ut=sn.detectCodeword(i,w.getMinX(),w.getMaxX(),ye,Xe,ht,h,b);ut!=null&&(Re.setCodeword(ht,ut),st=Xe,h=Math.min(h,ut.getWidth()),b=Math.max(b,ut.getWidth()))}}return sn.createDecoderResult(K)}static merge(i,s){if(i==null&&s==null)return null;let c=sn.getBarcodeMetadata(i,s);if(c==null)return null;let u=$a.merge(sn.adjustBoundingBox(i),sn.adjustBoundingBox(s));return new es(c,u)}static adjustBoundingBox(i){if(i==null)return null;let s=i.getRowHeights();if(s==null)return null;let c=sn.getMax(s),u=0;for(let b of s)if(u+=c-b,b>0)break;let d=i.getCodewords();for(let b=0;u>0&&d[b]==null;b++)u--;let h=0;for(let b=s.length-1;b>=0&&(h+=c-s[b],!(s[b]>0));b--);for(let b=d.length-1;h>0&&d[b]==null;b--)h--;return i.getBoundingBox().addMissingRows(u,h,i.isLeft())}static getMax(i){let s=-1;for(let c of i)s=Math.max(s,c);return s}static getBarcodeMetadata(i,s){let c;if(i==null||(c=i.getBarcodeMetadata())==null)return s==null?null:s.getBarcodeMetadata();let u;return s==null||(u=s.getBarcodeMetadata())==null?c:c.getColumnCount()!==u.getColumnCount()&&c.getErrorCorrectionLevel()!==u.getErrorCorrectionLevel()&&c.getRowCount()!==u.getRowCount()?null:c}static getRowIndicatorColumn(i,s,c,u,d,h){let b=new gs(s,u);for(let w=0;w<2;w++){let _=w===0?1:-1,H=Math.trunc(Math.trunc(c.getX()));for(let K=Math.trunc(Math.trunc(c.getY()));K<=s.getMaxY()&&K>=s.getMinY();K+=_){let oe=sn.detectCodeword(i,0,i.getWidth(),u,H,K,d,h);oe!=null&&(b.setCodeword(K,oe),u?H=oe.getStartX():H=oe.getEndX())}}return b}static adjustCodewordCount(i,s){let c=s[0][1],u=c.getValue(),d=i.getBarcodeColumnCount()*i.getBarcodeRowCount()-sn.getNumberOfECCodeWords(i.getBarcodeECLevel());if(u.length===0){if(d<1||d>Lt.MAX_CODEWORDS_IN_BARCODE)throw G.getNotFoundInstance();c.setValue(d)}else u[0]!==d&&c.setValue(d)}static createDecoderResult(i){let s=sn.createBarcodeMatrix(i);sn.adjustCodewordCount(i,s);let c=new Array,u=new Int32Array(i.getBarcodeRowCount()*i.getBarcodeColumnCount()),d=[],h=new Array;for(let w=0;w<i.getBarcodeRowCount();w++)for(let _=0;_<i.getBarcodeColumnCount();_++){let H=s[w][_+1].getValue(),K=w*i.getBarcodeColumnCount()+_;H.length===0?c.push(K):H.length===1?u[K]=H[0]:(h.push(K),d.push(H))}let b=new Array(d.length);for(let w=0;w<b.length;w++)b[w]=d[w];return sn.createDecoderResultFromAmbiguousValues(i.getBarcodeECLevel(),u,Lt.toIntArray(c),Lt.toIntArray(h),b)}static createDecoderResultFromAmbiguousValues(i,s,c,u,d){let h=new Int32Array(u.length),b=100;for(;b-- >0;){for(let w=0;w<h.length;w++)s[u[w]]=d[w][h[w]];try{return sn.decodeCodewords(s,i,c)}catch(w){if(!(w instanceof v))throw w}if(h.length===0)throw v.getChecksumInstance();for(let w=0;w<h.length;w++)if(h[w]<d[w].length-1){h[w]++;break}else if(h[w]=0,w===h.length-1)throw v.getChecksumInstance()}throw v.getChecksumInstance()}static createBarcodeMatrix(i){let s=Array.from({length:i.getBarcodeRowCount()},()=>new Array(i.getBarcodeColumnCount()+2));for(let u=0;u<s.length;u++)for(let d=0;d<s[u].length;d++)s[u][d]=new Vs;let c=0;for(let u of i.getDetectionResultColumns()){if(u!=null){for(let d of u.getCodewords())if(d!=null){let h=d.getRowNumber();if(h>=0){if(h>=s.length)continue;s[h][c].setValue(d.getValue())}}}c++}return s}static isValidBarcodeColumn(i,s){return s>=0&&s<=i.getBarcodeColumnCount()+1}static getStartColumn(i,s,c,u){let d=u?1:-1,h=null;if(sn.isValidBarcodeColumn(i,s-d)&&(h=i.getDetectionResultColumn(s-d).getCodeword(c)),h!=null)return u?h.getEndX():h.getStartX();if(h=i.getDetectionResultColumn(s).getCodewordNearby(c),h!=null)return u?h.getStartX():h.getEndX();if(sn.isValidBarcodeColumn(i,s-d)&&(h=i.getDetectionResultColumn(s-d).getCodewordNearby(c)),h!=null)return u?h.getEndX():h.getStartX();let b=0;for(;sn.isValidBarcodeColumn(i,s-d);){s-=d;for(let w of i.getDetectionResultColumn(s).getCodewords())if(w!=null)return(u?w.getEndX():w.getStartX())+d*b*(w.getEndX()-w.getStartX());b++}return u?i.getBoundingBox().getMinX():i.getBoundingBox().getMaxX()}static detectCodeword(i,s,c,u,d,h,b,w){d=sn.adjustCodewordStartColumn(i,s,c,u,d,h);let _=sn.getModuleBitCount(i,s,c,u,d,h);if(_==null)return null;let H,K=Pe.sum(_);if(u)H=d+K;else{for(let Ae=0;Ae<_.length/2;Ae++){let Ce=_[Ae];_[Ae]=_[_.length-1-Ae],_[_.length-1-Ae]=Ce}H=d,d=H-K}if(!sn.checkCodewordSkew(K,b,w))return null;let oe=ni.getDecodedValue(_),ye=Lt.getCodeword(oe);return ye===-1?null:new ka(d,H,sn.getCodewordBucketNumber(oe),ye)}static getModuleBitCount(i,s,c,u,d,h){let b=d,w=new Int32Array(8),_=0,H=u?1:-1,K=u;for(;(u?b<c:b>=s)&&_<w.length;)i.get(b,h)===K?(w[_]++,b+=H):(_++,K=!K);return _===w.length||b===(u?c:s)&&_===w.length-1?w:null}static getNumberOfECCodeWords(i){return 2<<i}static adjustCodewordStartColumn(i,s,c,u,d,h){let b=d,w=u?-1:1;for(let _=0;_<2;_++){for(;(u?b>=s:b<c)&&u===i.get(b,h);){if(Math.abs(d-b)>sn.CODEWORD_SKEW_SIZE)return d;b+=w}w=-w,u=!u}return b}static checkCodewordSkew(i,s,c){return s-sn.CODEWORD_SKEW_SIZE<=i&&i<=c+sn.CODEWORD_SKEW_SIZE}static decodeCodewords(i,s,c){if(i.length===0)throw B.getFormatInstance();let u=1<<s+1,d=sn.correctErrors(i,c,u);sn.verifyCodewordCount(i,u);let h=Ye.decode(i,""+s);return h.setErrorsCorrected(d),h.setErasures(c.length),h}static correctErrors(i,s,c){if(s!=null&&s.length>c/2+sn.MAX_ERRORS||c<0||c>sn.MAX_EC_CODEWORDS)throw v.getChecksumInstance();return sn.errorCorrection.decode(i,c,s)}static verifyCodewordCount(i,s){if(i.length<4)throw B.getFormatInstance();let c=i[0];if(c>i.length)throw B.getFormatInstance();if(c===0)if(s<i.length)i[0]=i.length-s;else throw B.getFormatInstance()}static getBitCountForCodeword(i){let s=new Int32Array(8),c=0,u=s.length-1;for(;!((i&1)!==c&&(c=i&1,u--,u<0));)s[u]++,i>>=1;return s}static getCodewordBucketNumber(i){return i instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(i):this.getCodewordBucketNumber_number(i)}static getCodewordBucketNumber_number(i){return sn.getCodewordBucketNumber(sn.getBitCountForCodeword(i))}static getCodewordBucketNumber_Int32Array(i){return(i[0]-i[2]+i[4]-i[6]+9)%9}static toString(i){let s=new pa;for(let c=0;c<i.length;c++){s.format("Row %2d: ",c);for(let u=0;u<i[c].length;u++){let d=i[c][u];d.getValue().length===0?s.format("        ",null):s.format("%4d(%2d)",d.getValue()[0],d.getConfidence(d.getValue()[0]))}s.format("%n")}return s.toString()}}sn.CODEWORD_SKEW_SIZE=2,sn.MAX_ERRORS=3,sn.MAX_EC_CODEWORDS=512,sn.errorCorrection=new fc;class Nr{decode(i,s=null){let c=Nr.decode(i,s,!1);if(c==null||c.length===0||c[0]==null)throw G.getNotFoundInstance();return c[0]}decodeMultiple(i,s=null){try{return Nr.decode(i,s,!0)}catch(c){throw c instanceof B||c instanceof v?G.getNotFoundInstance():c}}static decode(i,s,c){const u=new Array,d=tn.detectMultiple(i,s,c);for(const h of d.getPoints()){const b=sn.decode(d.getBits(),h[4],h[5],h[6],h[7],Nr.getMinCodewordWidth(h),Nr.getMaxCodewordWidth(h)),w=new ee(b.getText(),b.getRawBytes(),void 0,h,ae.PDF_417);w.putMetadata(we.ERROR_CORRECTION_LEVEL,b.getECLevel());const _=b.getOther();_!=null&&w.putMetadata(we.PDF417_EXTRA_METADATA,_),u.push(w)}return u.map(h=>h)}static getMaxWidth(i,s){return i==null||s==null?0:Math.trunc(Math.abs(i.getX()-s.getX()))}static getMinWidth(i,s){return i==null||s==null?j.MAX_VALUE:Math.trunc(Math.abs(i.getX()-s.getX()))}static getMaxCodewordWidth(i){return Math.floor(Math.max(Math.max(Nr.getMaxWidth(i[0],i[4]),Nr.getMaxWidth(i[6],i[2])*Lt.MODULES_IN_CODEWORD/Lt.MODULES_IN_STOP_PATTERN),Math.max(Nr.getMaxWidth(i[1],i[5]),Nr.getMaxWidth(i[7],i[3])*Lt.MODULES_IN_CODEWORD/Lt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(i){return Math.floor(Math.min(Math.min(Nr.getMinWidth(i[0],i[4]),Nr.getMinWidth(i[6],i[2])*Lt.MODULES_IN_CODEWORD/Lt.MODULES_IN_STOP_PATTERN),Math.min(Nr.getMinWidth(i[1],i[5]),Nr.getMinWidth(i[7],i[3])*Lt.MODULES_IN_CODEWORD/Lt.MODULES_IN_STOP_PATTERN)))}reset(){}}class xs extends x{}xs.kind="ReaderException";class jl{constructor(i,s){this.verbose=i===!0,s&&this.setHints(s)}decode(i,s){return s&&this.setHints(s),this.decodeInternal(i)}decodeWithState(i){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(i)}setHints(i){this.hints=i;const s=!r(i)&&i.get(ie.TRY_HARDER)===!0,c=r(i)?null:i.get(ie.POSSIBLE_FORMATS),u=new Array;if(!r(c)){const d=c.some(h=>h===ae.UPC_A||h===ae.UPC_E||h===ae.EAN_13||h===ae.EAN_8||h===ae.CODABAR||h===ae.CODE_39||h===ae.CODE_93||h===ae.CODE_128||h===ae.ITF||h===ae.RSS_14||h===ae.RSS_EXPANDED);d&&!s&&u.push(new Mr(i,this.verbose)),c.includes(ae.QR_CODE)&&u.push(new Ma),c.includes(ae.DATA_MATRIX)&&u.push(new mn),c.includes(ae.AZTEC)&&u.push(new xt),c.includes(ae.PDF_417)&&u.push(new Nr),d&&s&&u.push(new Mr(i,this.verbose))}u.length===0&&(s||u.push(new Mr(i,this.verbose)),u.push(new Ma),u.push(new mn),u.push(new xt),u.push(new Nr),s&&u.push(new Mr(i,this.verbose))),this.readers=u}reset(){if(this.readers!==null)for(const i of this.readers)i.reset()}decodeInternal(i){if(this.readers===null)throw new xs("No readers where selected, nothing can be read.");for(const s of this.readers)try{return s.decode(i,this.hints)}catch(c){if(c instanceof xs)continue}throw new G("No MultiFormat Readers were able to detect the code.")}}class vo extends q{constructor(i=null,s=500){const c=new jl;c.setHints(i),super(c,s)}decodeBitmap(i){return this.reader.decodeWithState(i)}}class Il extends q{constructor(i=500){super(new Nr,i)}}class Dl extends q{constructor(i=500){super(new Ma,i)}}var wo;(function($){$[$.ERROR_CORRECTION=0]="ERROR_CORRECTION",$[$.CHARACTER_SET=1]="CHARACTER_SET",$[$.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",$[$.MIN_SIZE=3]="MIN_SIZE",$[$.MAX_SIZE=4]="MAX_SIZE",$[$.MARGIN=5]="MARGIN",$[$.PDF417_COMPACT=6]="PDF417_COMPACT",$[$.PDF417_COMPACTION=7]="PDF417_COMPACTION",$[$.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",$[$.AZTEC_LAYERS=9]="AZTEC_LAYERS",$[$.QR_VERSION=10]="QR_VERSION"})(wo||(wo={}));var Ar=wo;class bs{constructor(i){this.field=i,this.cachedGenerators=[],this.cachedGenerators.push(new _e(i,Int32Array.from([1])))}buildGenerator(i){const s=this.cachedGenerators;if(i>=s.length){let c=s[s.length-1];const u=this.field;for(let d=s.length;d<=i;d++){const h=c.multiply(new _e(u,Int32Array.from([1,u.exp(d-1+u.getGeneratorBase())])));s.push(h),c=h}}return s[i]}encode(i,s){if(s===0)throw new N("No error correction bytes");const c=i.length-s;if(c<=0)throw new N("No data bytes provided");const u=this.buildGenerator(s),d=new Int32Array(c);D.arraycopy(i,0,d,0,c);let h=new _e(this.field,d);h=h.multiplyByMonomial(s,1);const w=h.divide(u)[1].getCoefficients(),_=s-w.length;for(let H=0;H<_;H++)i[c+H]=0;D.arraycopy(w,0,i,c+_,w.length)}}class Fn{constructor(){}static applyMaskPenaltyRule1(i){return Fn.applyMaskPenaltyRule1Internal(i,!0)+Fn.applyMaskPenaltyRule1Internal(i,!1)}static applyMaskPenaltyRule2(i){let s=0;const c=i.getArray(),u=i.getWidth(),d=i.getHeight();for(let h=0;h<d-1;h++){const b=c[h];for(let w=0;w<u-1;w++){const _=b[w];_===b[w+1]&&_===c[h+1][w]&&_===c[h+1][w+1]&&s++}}return Fn.N2*s}static applyMaskPenaltyRule3(i){let s=0;const c=i.getArray(),u=i.getWidth(),d=i.getHeight();for(let h=0;h<d;h++)for(let b=0;b<u;b++){const w=c[h];b+6<u&&w[b]===1&&w[b+1]===0&&w[b+2]===1&&w[b+3]===1&&w[b+4]===1&&w[b+5]===0&&w[b+6]===1&&(Fn.isWhiteHorizontal(w,b-4,b)||Fn.isWhiteHorizontal(w,b+7,b+11))&&s++,h+6<d&&c[h][b]===1&&c[h+1][b]===0&&c[h+2][b]===1&&c[h+3][b]===1&&c[h+4][b]===1&&c[h+5][b]===0&&c[h+6][b]===1&&(Fn.isWhiteVertical(c,b,h-4,h)||Fn.isWhiteVertical(c,b,h+7,h+11))&&s++}return s*Fn.N3}static isWhiteHorizontal(i,s,c){s=Math.max(s,0),c=Math.min(c,i.length);for(let u=s;u<c;u++)if(i[u]===1)return!1;return!0}static isWhiteVertical(i,s,c,u){c=Math.max(c,0),u=Math.min(u,i.length);for(let d=c;d<u;d++)if(i[d][s]===1)return!1;return!0}static applyMaskPenaltyRule4(i){let s=0;const c=i.getArray(),u=i.getWidth(),d=i.getHeight();for(let w=0;w<d;w++){const _=c[w];for(let H=0;H<u;H++)_[H]===1&&s++}const h=i.getHeight()*i.getWidth();return Math.floor(Math.abs(s*2-h)*10/h)*Fn.N4}static getDataMaskBit(i,s,c){let u,d;switch(i){case 0:u=c+s&1;break;case 1:u=c&1;break;case 2:u=s%3;break;case 3:u=(c+s)%3;break;case 4:u=Math.floor(c/2)+Math.floor(s/3)&1;break;case 5:d=c*s,u=(d&1)+d%3;break;case 6:d=c*s,u=(d&1)+d%3&1;break;case 7:d=c*s,u=d%3+(c+s&1)&1;break;default:throw new N("Invalid mask pattern: "+i)}return u===0}static applyMaskPenaltyRule1Internal(i,s){let c=0;const u=s?i.getHeight():i.getWidth(),d=s?i.getWidth():i.getHeight(),h=i.getArray();for(let b=0;b<u;b++){let w=0,_=-1;for(let H=0;H<d;H++){const K=s?h[b][H]:h[H][b];K===_?w++:(w>=5&&(c+=Fn.N1+(w-5)),w=1,_=K)}w>=5&&(c+=Fn.N1+(w-5))}return c}}Fn.N1=3,Fn.N2=3,Fn.N3=40,Fn.N4=10;class ys{constructor(i,s){this.width=i,this.height=s;const c=new Array(s);for(let u=0;u!==s;u++)c[u]=new Uint8Array(i);this.bytes=c}getHeight(){return this.height}getWidth(){return this.width}get(i,s){return this.bytes[s][i]}getArray(){return this.bytes}setNumber(i,s,c){this.bytes[s][i]=c}setBoolean(i,s,c){this.bytes[s][i]=c?1:0}clear(i){for(const s of this.bytes)E.fill(s,i)}equals(i){if(!(i instanceof ys))return!1;const s=i;if(this.width!==s.width||this.height!==s.height)return!1;for(let c=0,u=this.height;c<u;++c){const d=this.bytes[c],h=s.bytes[c];for(let b=0,w=this.width;b<w;++b)if(d[b]!==h[b])return!1}return!0}toString(){const i=new Q;for(let s=0,c=this.height;s<c;++s){const u=this.bytes[s];for(let d=0,h=this.width;d<h;++d)switch(u[d]){case 0:i.append(" 0");break;case 1:i.append(" 1");break;default:i.append("  ");break}i.append(`
`)}return i.toString()}}class Ri{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const i=new Q;return i.append(`<<
`),i.append(" mode: "),i.append(this.mode?this.mode.toString():"null"),i.append(`
 ecLevel: `),i.append(this.ecLevel?this.ecLevel.toString():"null"),i.append(`
 version: `),i.append(this.version?this.version.toString():"null"),i.append(`
 maskPattern: `),i.append(this.maskPattern.toString()),this.matrix?(i.append(`
 matrix:
`),i.append(this.matrix.toString())):i.append(`
 matrix: null
`),i.append(`>>
`),i.toString()}setMode(i){this.mode=i}setECLevel(i){this.ecLevel=i}setVersion(i){this.version=i}setMaskPattern(i){this.maskPattern=i}setMatrix(i){this.matrix=i}static isValidMaskPattern(i){return i>=0&&i<Ri.NUM_MASK_PATTERNS}}Ri.NUM_MASK_PATTERNS=8;class _n extends x{}_n.kind="WriterException";class S{constructor(){}static clearMatrix(i){i.clear(255)}static buildMatrix(i,s,c,u,d){S.clearMatrix(d),S.embedBasicPatterns(c,d),S.embedTypeInfo(s,u,d),S.maybeEmbedVersionInfo(c,d),S.embedDataBits(i,u,d)}static embedBasicPatterns(i,s){S.embedPositionDetectionPatternsAndSeparators(s),S.embedDarkDotAtLeftBottomCorner(s),S.maybeEmbedPositionAdjustmentPatterns(i,s),S.embedTimingPatterns(s)}static embedTypeInfo(i,s,c){const u=new V;S.makeTypeInfoBits(i,s,u);for(let d=0,h=u.getSize();d<h;++d){const b=u.get(u.getSize()-1-d),w=S.TYPE_INFO_COORDINATES[d],_=w[0],H=w[1];if(c.setBoolean(_,H,b),d<8){const K=c.getWidth()-d-1;c.setBoolean(K,8,b)}else{const oe=c.getHeight()-7+(d-8);c.setBoolean(8,oe,b)}}}static maybeEmbedVersionInfo(i,s){if(i.getVersionNumber()<7)return;const c=new V;S.makeVersionInfoBits(i,c);let u=6*3-1;for(let d=0;d<6;++d)for(let h=0;h<3;++h){const b=c.get(u);u--,s.setBoolean(d,s.getHeight()-11+h,b),s.setBoolean(s.getHeight()-11+h,d,b)}}static embedDataBits(i,s,c){let u=0,d=-1,h=c.getWidth()-1,b=c.getHeight()-1;for(;h>0;){for(h===6&&(h-=1);b>=0&&b<c.getHeight();){for(let w=0;w<2;++w){const _=h-w;if(!S.isEmpty(c.get(_,b)))continue;let H;u<i.getSize()?(H=i.get(u),++u):H=!1,s!==255&&Fn.getDataMaskBit(s,_,b)&&(H=!H),c.setBoolean(_,b,H)}b+=d}d=-d,b+=d,h-=2}if(u!==i.getSize())throw new _n("Not all bits consumed: "+u+"/"+i.getSize())}static findMSBSet(i){return 32-j.numberOfLeadingZeros(i)}static calculateBCHCode(i,s){if(s===0)throw new N("0 polynomial");const c=S.findMSBSet(s);for(i<<=c-1;S.findMSBSet(i)>=c;)i^=s<<S.findMSBSet(i)-c;return i}static makeTypeInfoBits(i,s,c){if(!Ri.isValidMaskPattern(s))throw new _n("Invalid mask pattern");const u=i.getBits()<<3|s;c.appendBits(u,5);const d=S.calculateBCHCode(u,S.TYPE_INFO_POLY);c.appendBits(d,10);const h=new V;if(h.appendBits(S.TYPE_INFO_MASK_PATTERN,15),c.xor(h),c.getSize()!==15)throw new _n("should not happen but we got: "+c.getSize())}static makeVersionInfoBits(i,s){s.appendBits(i.getVersionNumber(),6);const c=S.calculateBCHCode(i.getVersionNumber(),S.VERSION_INFO_POLY);if(s.appendBits(c,12),s.getSize()!==18)throw new _n("should not happen but we got: "+s.getSize())}static isEmpty(i){return i===255}static embedTimingPatterns(i){for(let s=8;s<i.getWidth()-8;++s){const c=(s+1)%2;S.isEmpty(i.get(s,6))&&i.setNumber(s,6,c),S.isEmpty(i.get(6,s))&&i.setNumber(6,s,c)}}static embedDarkDotAtLeftBottomCorner(i){if(i.get(8,i.getHeight()-8)===0)throw new _n;i.setNumber(8,i.getHeight()-8,1)}static embedHorizontalSeparationPattern(i,s,c){for(let u=0;u<8;++u){if(!S.isEmpty(c.get(i+u,s)))throw new _n;c.setNumber(i+u,s,0)}}static embedVerticalSeparationPattern(i,s,c){for(let u=0;u<7;++u){if(!S.isEmpty(c.get(i,s+u)))throw new _n;c.setNumber(i,s+u,0)}}static embedPositionAdjustmentPattern(i,s,c){for(let u=0;u<5;++u){const d=S.POSITION_ADJUSTMENT_PATTERN[u];for(let h=0;h<5;++h)c.setNumber(i+h,s+u,d[h])}}static embedPositionDetectionPattern(i,s,c){for(let u=0;u<7;++u){const d=S.POSITION_DETECTION_PATTERN[u];for(let h=0;h<7;++h)c.setNumber(i+h,s+u,d[h])}}static embedPositionDetectionPatternsAndSeparators(i){const s=S.POSITION_DETECTION_PATTERN[0].length;S.embedPositionDetectionPattern(0,0,i),S.embedPositionDetectionPattern(i.getWidth()-s,0,i),S.embedPositionDetectionPattern(0,i.getWidth()-s,i);const c=8;S.embedHorizontalSeparationPattern(0,c-1,i),S.embedHorizontalSeparationPattern(i.getWidth()-c,c-1,i),S.embedHorizontalSeparationPattern(0,i.getWidth()-c,i);const u=7;S.embedVerticalSeparationPattern(u,0,i),S.embedVerticalSeparationPattern(i.getHeight()-u-1,0,i),S.embedVerticalSeparationPattern(u,i.getHeight()-u,i)}static maybeEmbedPositionAdjustmentPatterns(i,s){if(i.getVersionNumber()<2)return;const c=i.getVersionNumber()-1,u=S.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[c];for(let d=0,h=u.length;d!==h;d++){const b=u[d];if(b>=0)for(let w=0;w!==h;w++){const _=u[w];_>=0&&S.isEmpty(s.get(_,b))&&S.embedPositionAdjustmentPattern(_-2,b-2,s)}}}}S.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),S.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),S.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),S.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),S.VERSION_INFO_POLY=7973,S.TYPE_INFO_POLY=1335,S.TYPE_INFO_MASK_PATTERN=21522;class re{constructor(i,s){this.dataBytes=i,this.errorCorrectionBytes=s}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class be{constructor(){}static calculateMaskPenalty(i){return Fn.applyMaskPenaltyRule1(i)+Fn.applyMaskPenaltyRule2(i)+Fn.applyMaskPenaltyRule3(i)+Fn.applyMaskPenaltyRule4(i)}static encode(i,s,c=null){let u=be.DEFAULT_BYTE_MODE_ENCODING;const d=c!==null&&c.get(Ar.CHARACTER_SET)!==void 0;d&&(u=c.get(Ar.CHARACTER_SET).toString());const h=this.chooseMode(i,u),b=new V;if(h===Bt.BYTE&&(d||be.DEFAULT_BYTE_MODE_ENCODING!==u)){const ht=M.getCharacterSetECIByName(u);ht!==void 0&&this.appendECI(ht,b)}this.appendModeInfo(h,b);const w=new V;this.appendBytes(i,h,w,u);let _;if(c!==null&&c.get(Ar.QR_VERSION)!==void 0){const ht=Number.parseInt(c.get(Ar.QR_VERSION).toString(),10);_=Ot.getVersionForNumber(ht);const ut=this.calculateBitsNeeded(h,b,w,_);if(!this.willFit(ut,_,s))throw new _n("Data too big for requested version")}else _=this.recommendVersion(s,h,b,w);const H=new V;H.appendBitArray(b);const K=h===Bt.BYTE?w.getSizeInBytes():i.length;this.appendLengthInfo(K,_,h,H),H.appendBitArray(w);const oe=_.getECBlocksForLevel(s),ye=_.getTotalCodewords()-oe.getTotalECCodewords();this.terminateBits(ye,H);const Ae=this.interleaveWithECBytes(H,_.getTotalCodewords(),ye,oe.getNumBlocks()),Ce=new Ri;Ce.setECLevel(s),Ce.setMode(h),Ce.setVersion(_);const Re=_.getDimensionForVersion(),Xe=new ys(Re,Re),st=this.chooseMaskPattern(Ae,s,_,Xe);return Ce.setMaskPattern(st),S.buildMatrix(Ae,s,_,st,Xe),Ce.setMatrix(Xe),Ce}static recommendVersion(i,s,c,u){const d=this.calculateBitsNeeded(s,c,u,Ot.getVersionForNumber(1)),h=this.chooseVersion(d,i),b=this.calculateBitsNeeded(s,c,u,h);return this.chooseVersion(b,i)}static calculateBitsNeeded(i,s,c,u){return s.getSize()+i.getCharacterCountBits(u)+c.getSize()}static getAlphanumericCode(i){return i<be.ALPHANUMERIC_TABLE.length?be.ALPHANUMERIC_TABLE[i]:-1}static chooseMode(i,s=null){if(M.SJIS.getName()===s&&this.isOnlyDoubleByteKanji(i))return Bt.KANJI;let c=!1,u=!1;for(let d=0,h=i.length;d<h;++d){const b=i.charAt(d);if(be.isDigit(b))c=!0;else if(this.getAlphanumericCode(b.charCodeAt(0))!==-1)u=!0;else return Bt.BYTE}return u?Bt.ALPHANUMERIC:c?Bt.NUMERIC:Bt.BYTE}static isOnlyDoubleByteKanji(i){let s;try{s=F.encode(i,M.SJIS)}catch{return!1}const c=s.length;if(c%2!==0)return!1;for(let u=0;u<c;u+=2){const d=s[u]&255;if((d<129||d>159)&&(d<224||d>235))return!1}return!0}static chooseMaskPattern(i,s,c,u){let d=Number.MAX_SAFE_INTEGER,h=-1;for(let b=0;b<Ri.NUM_MASK_PATTERNS;b++){S.buildMatrix(i,s,c,b,u);let w=this.calculateMaskPenalty(u);w<d&&(d=w,h=b)}return h}static chooseVersion(i,s){for(let c=1;c<=40;c++){const u=Ot.getVersionForNumber(c);if(be.willFit(i,u,s))return u}throw new _n("Data too big")}static willFit(i,s,c){const u=s.getTotalCodewords(),h=s.getECBlocksForLevel(c).getTotalECCodewords(),b=u-h,w=(i+7)/8;return b>=w}static terminateBits(i,s){const c=i*8;if(s.getSize()>c)throw new _n("data bits cannot fit in the QR Code"+s.getSize()+" > "+c);for(let h=0;h<4&&s.getSize()<c;++h)s.appendBit(!1);const u=s.getSize()&7;if(u>0)for(let h=u;h<8;h++)s.appendBit(!1);const d=i-s.getSizeInBytes();for(let h=0;h<d;++h)s.appendBits(h&1?17:236,8);if(s.getSize()!==c)throw new _n("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(i,s,c,u,d,h){if(u>=c)throw new _n("Block ID too large");const b=i%c,w=c-b,_=Math.floor(i/c),H=_+1,K=Math.floor(s/c),oe=K+1,ye=_-K,Ae=H-oe;if(ye!==Ae)throw new _n("EC bytes mismatch");if(c!==w+b)throw new _n("RS blocks mismatch");if(i!==(K+ye)*w+(oe+Ae)*b)throw new _n("Total bytes mismatch");u<w?(d[0]=K,h[0]=ye):(d[0]=oe,h[0]=Ae)}static interleaveWithECBytes(i,s,c,u){if(i.getSizeInBytes()!==c)throw new _n("Number of bits and data bytes does not match");let d=0,h=0,b=0;const w=new Array;for(let H=0;H<u;++H){const K=new Int32Array(1),oe=new Int32Array(1);be.getNumDataBytesAndNumECBytesForBlockID(s,c,u,H,K,oe);const ye=K[0],Ae=new Uint8Array(ye);i.toBytes(8*d,Ae,0,ye);const Ce=be.generateECBytes(Ae,oe[0]);w.push(new re(Ae,Ce)),h=Math.max(h,ye),b=Math.max(b,Ce.length),d+=K[0]}if(c!==d)throw new _n("Data bytes does not match offset");const _=new V;for(let H=0;H<h;++H)for(const K of w){const oe=K.getDataBytes();H<oe.length&&_.appendBits(oe[H],8)}for(let H=0;H<b;++H)for(const K of w){const oe=K.getErrorCorrectionBytes();H<oe.length&&_.appendBits(oe[H],8)}if(s!==_.getSizeInBytes())throw new _n("Interleaving error: "+s+" and "+_.getSizeInBytes()+" differ.");return _}static generateECBytes(i,s){const c=i.length,u=new Int32Array(c+s);for(let h=0;h<c;h++)u[h]=i[h]&255;new bs(Be.QR_CODE_FIELD_256).encode(u,s);const d=new Uint8Array(s);for(let h=0;h<s;h++)d[h]=u[c+h];return d}static appendModeInfo(i,s){s.appendBits(i.getBits(),4)}static appendLengthInfo(i,s,c,u){const d=c.getCharacterCountBits(s);if(i>=1<<d)throw new _n(i+" is bigger than "+((1<<d)-1));u.appendBits(i,d)}static appendBytes(i,s,c,u){switch(s){case Bt.NUMERIC:be.appendNumericBytes(i,c);break;case Bt.ALPHANUMERIC:be.appendAlphanumericBytes(i,c);break;case Bt.BYTE:be.append8BitBytes(i,c,u);break;case Bt.KANJI:be.appendKanjiBytes(i,c);break;default:throw new _n("Invalid mode: "+s)}}static getDigit(i){return i.charCodeAt(0)-48}static isDigit(i){const s=be.getDigit(i);return s>=0&&s<=9}static appendNumericBytes(i,s){const c=i.length;let u=0;for(;u<c;){const d=be.getDigit(i.charAt(u));if(u+2<c){const h=be.getDigit(i.charAt(u+1)),b=be.getDigit(i.charAt(u+2));s.appendBits(d*100+h*10+b,10),u+=3}else if(u+1<c){const h=be.getDigit(i.charAt(u+1));s.appendBits(d*10+h,7),u+=2}else s.appendBits(d,4),u++}}static appendAlphanumericBytes(i,s){const c=i.length;let u=0;for(;u<c;){const d=be.getAlphanumericCode(i.charCodeAt(u));if(d===-1)throw new _n;if(u+1<c){const h=be.getAlphanumericCode(i.charCodeAt(u+1));if(h===-1)throw new _n;s.appendBits(d*45+h,11),u+=2}else s.appendBits(d,6),u++}}static append8BitBytes(i,s,c){let u;try{u=F.encode(i,c)}catch(d){throw new _n(d)}for(let d=0,h=u.length;d!==h;d++){const b=u[d];s.appendBits(b,8)}}static appendKanjiBytes(i,s){let c;try{c=F.encode(i,M.SJIS)}catch(d){throw new _n(d)}const u=c.length;for(let d=0;d<u;d+=2){const h=c[d]&255,b=c[d+1]&255,w=h<<8&4294967295|b;let _=-1;if(w>=33088&&w<=40956?_=w-33088:w>=57408&&w<=60351&&(_=w-49472),_===-1)throw new _n("Invalid byte sequence");const H=(_>>8)*192+(_&255);s.appendBits(H,13)}}static appendECI(i,s){s.appendBits(Bt.ECI.getBits(),4),s.appendBits(i.getValue(),8)}}be.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),be.DEFAULT_BYTE_MODE_ENCODING=M.UTF8.getName();class Se{write(i,s,c,u=null){if(i.length===0)throw new N("Found empty contents");if(s<0||c<0)throw new N("Requested dimensions are too small: "+s+"x"+c);let d=Dn.L,h=Se.QUIET_ZONE_SIZE;u!==null&&(u.get(Ar.ERROR_CORRECTION)!==void 0&&(d=Dn.fromString(u.get(Ar.ERROR_CORRECTION).toString())),u.get(Ar.MARGIN)!==void 0&&(h=Number.parseInt(u.get(Ar.MARGIN).toString(),10)));const b=be.encode(i,d,u);return this.renderResult(b,s,c,h)}writeToDom(i,s,c,u,d=null){typeof i=="string"&&(i=document.querySelector(i));const h=this.write(s,c,u,d);i&&i.appendChild(h)}renderResult(i,s,c,u){const d=i.getMatrix();if(d===null)throw new ke;const h=d.getWidth(),b=d.getHeight(),w=h+u*2,_=b+u*2,H=Math.max(s,w),K=Math.max(c,_),oe=Math.min(Math.floor(H/w),Math.floor(K/_)),ye=Math.floor((H-h*oe)/2),Ae=Math.floor((K-b*oe)/2),Ce=this.createSVGElement(H,K);for(let Re=0,Xe=Ae;Re<b;Re++,Xe+=oe)for(let st=0,ht=ye;st<h;st++,ht+=oe)if(d.get(st,Re)===1){const ut=this.createSvgRectElement(ht,Xe,oe,oe);Ce.appendChild(ut)}return Ce}createSVGElement(i,s){const c=document.createElementNS(Se.SVG_NS,"svg");return c.setAttributeNS(null,"height",i.toString()),c.setAttributeNS(null,"width",s.toString()),c}createSvgRectElement(i,s,c,u){const d=document.createElementNS(Se.SVG_NS,"rect");return d.setAttributeNS(null,"x",i.toString()),d.setAttributeNS(null,"y",s.toString()),d.setAttributeNS(null,"height",c.toString()),d.setAttributeNS(null,"width",u.toString()),d.setAttributeNS(null,"fill","#000000"),d}}Se.QUIET_ZONE_SIZE=4,Se.SVG_NS="http://www.w3.org/2000/svg";class Fe{encode(i,s,c,u,d){if(i.length===0)throw new N("Found empty contents");if(s!==ae.QR_CODE)throw new N("Can only encode QR_CODE, but got "+s);if(c<0||u<0)throw new N(`Requested dimensions are too small: ${c}x${u}`);let h=Dn.L,b=Fe.QUIET_ZONE_SIZE;d!==null&&(d.get(Ar.ERROR_CORRECTION)!==void 0&&(h=Dn.fromString(d.get(Ar.ERROR_CORRECTION).toString())),d.get(Ar.MARGIN)!==void 0&&(b=Number.parseInt(d.get(Ar.MARGIN).toString(),10)));const w=be.encode(i,h,d);return Fe.renderResult(w,c,u,b)}static renderResult(i,s,c,u){const d=i.getMatrix();if(d===null)throw new ke;const h=d.getWidth(),b=d.getHeight(),w=h+u*2,_=b+u*2,H=Math.max(s,w),K=Math.max(c,_),oe=Math.min(Math.floor(H/w),Math.floor(K/_)),ye=Math.floor((H-h*oe)/2),Ae=Math.floor((K-b*oe)/2),Ce=new J(H,K);for(let Re=0,Xe=Ae;Re<b;Re++,Xe+=oe)for(let st=0,ht=ye;st<h;st++,ht+=oe)d.get(st,Re)===1&&Ce.setRegion(ht,Xe,oe,oe);return Ce}}Fe.QUIET_ZONE_SIZE=4;class Je{encode(i,s,c,u,d){let h;switch(s){case ae.QR_CODE:h=new Fe;break;default:throw new N("No encoder available for format "+s)}return h.encode(i,s,c,u,d)}}class rt extends X{constructor(i,s,c,u,d,h,b,w){if(super(h,b),this.yuvData=i,this.dataWidth=s,this.dataHeight=c,this.left=u,this.top=d,u+h>s||d+b>c)throw new N("Crop rectangle does not fit within image data.");w&&this.reverseHorizontal(h,b)}getRow(i,s){if(i<0||i>=this.getHeight())throw new N("Requested row is outside the image: "+i);const c=this.getWidth();(s==null||s.length<c)&&(s=new Uint8ClampedArray(c));const u=(i+this.top)*this.dataWidth+this.left;return D.arraycopy(this.yuvData,u,s,0,c),s}getMatrix(){const i=this.getWidth(),s=this.getHeight();if(i===this.dataWidth&&s===this.dataHeight)return this.yuvData;const c=i*s,u=new Uint8ClampedArray(c);let d=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return D.arraycopy(this.yuvData,d,u,0,c),u;for(let h=0;h<s;h++){const b=h*i;D.arraycopy(this.yuvData,d,u,b,i),d+=this.dataWidth}return u}isCropSupported(){return!0}crop(i,s,c,u){return new rt(this.yuvData,this.dataWidth,this.dataHeight,this.left+i,this.top+s,c,u,!1)}renderThumbnail(){const i=this.getWidth()/rt.THUMBNAIL_SCALE_FACTOR,s=this.getHeight()/rt.THUMBNAIL_SCALE_FACTOR,c=new Int32Array(i*s),u=this.yuvData;let d=this.top*this.dataWidth+this.left;for(let h=0;h<s;h++){const b=h*i;for(let w=0;w<i;w++){const _=u[d+w*rt.THUMBNAIL_SCALE_FACTOR]&255;c[b+w]=4278190080|_*65793}d+=this.dataWidth*rt.THUMBNAIL_SCALE_FACTOR}return c}getThumbnailWidth(){return this.getWidth()/rt.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/rt.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(i,s){const c=this.yuvData;for(let u=0,d=this.top*this.dataWidth+this.left;u<s;u++,d+=this.dataWidth){const h=d+i/2;for(let b=d,w=d+i-1;b<h;b++,w--){const _=c[b];c[b]=c[w],c[w]=_}}}invert(){return new te(this)}}rt.THUMBNAIL_SCALE_FACTOR=2;class At extends X{constructor(i,s,c,u,d,h,b){if(super(s,c),this.dataWidth=u,this.dataHeight=d,this.left=h,this.top=b,i.BYTES_PER_ELEMENT===4){const w=s*c,_=new Uint8ClampedArray(w);for(let H=0;H<w;H++){const K=i[H],oe=K>>16&255,ye=K>>7&510,Ae=K&255;_[H]=(oe+ye+Ae)/4&255}this.luminances=_}else this.luminances=i;if(u===void 0&&(this.dataWidth=s),d===void 0&&(this.dataHeight=c),h===void 0&&(this.left=0),b===void 0&&(this.top=0),this.left+s>this.dataWidth||this.top+c>this.dataHeight)throw new N("Crop rectangle does not fit within image data.")}getRow(i,s){if(i<0||i>=this.getHeight())throw new N("Requested row is outside the image: "+i);const c=this.getWidth();(s==null||s.length<c)&&(s=new Uint8ClampedArray(c));const u=(i+this.top)*this.dataWidth+this.left;return D.arraycopy(this.luminances,u,s,0,c),s}getMatrix(){const i=this.getWidth(),s=this.getHeight();if(i===this.dataWidth&&s===this.dataHeight)return this.luminances;const c=i*s,u=new Uint8ClampedArray(c);let d=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return D.arraycopy(this.luminances,d,u,0,c),u;for(let h=0;h<s;h++){const b=h*i;D.arraycopy(this.luminances,d,u,b,i),d+=this.dataWidth}return u}isCropSupported(){return!0}crop(i,s,c,u){return new At(this.luminances,c,u,this.dataWidth,this.dataHeight,this.left+i,this.top+s)}invert(){return new te(this)}}class kt extends M{static forName(i){return this.getCharacterSetECIByName(i)}}class Kt{}Kt.ISO_8859_1=M.ISO8859_1;class Jt{isCompact(){return this.compact}setCompact(i){this.compact=i}getSize(){return this.size}setSize(i){this.size=i}getLayers(){return this.layers}setLayers(i){this.layers=i}getCodeWords(){return this.codeWords}setCodeWords(i){this.codeWords=i}getMatrix(){return this.matrix}setMatrix(i){this.matrix=i}}class pn{static singletonList(i){return[i]}static min(i,s){return i.sort(s)[0]}}class lr{constructor(i){this.previous=i}getPrevious(){return this.previous}}class Un extends lr{constructor(i,s,c){super(i),this.value=s,this.bitCount=c}appendTo(i,s){i.appendBits(this.value,this.bitCount)}add(i,s){return new Un(this,i,s)}addBinaryShift(i,s){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Un(this,i,s)}toString(){let i=this.value&(1<<this.bitCount)-1;return i|=1<<this.bitCount,"<"+j.toBinaryString(i|1<<this.bitCount).substring(1)+">"}}class mr extends Un{constructor(i,s,c){super(i,0,0),this.binaryShiftStart=s,this.binaryShiftByteCount=c}appendTo(i,s){for(let c=0;c<this.binaryShiftByteCount;c++)(c===0||c===31&&this.binaryShiftByteCount<=62)&&(i.appendBits(31,5),this.binaryShiftByteCount>62?i.appendBits(this.binaryShiftByteCount-31,16):c===0?i.appendBits(Math.min(this.binaryShiftByteCount,31),5):i.appendBits(this.binaryShiftByteCount-31,5)),i.appendBits(s[this.binaryShiftStart+c],8)}addBinaryShift(i,s){return new mr(this,i,s)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function hi($,i,s){return new mr($,i,s)}function gr($,i,s){return new Un($,i,s)}const xa=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],_r=0,Vi=1,wi=2,No=3,Oi=4,Ao=new Un(null,0,0),qs=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Rl($){for(let i of $)E.fill(i,-1);return $[_r][Oi]=0,$[Vi][Oi]=0,$[Vi][_r]=28,$[No][Oi]=0,$[wi][Oi]=0,$[wi][_r]=15,$}const Gs=Rl(E.createInt32Array(6,6));class Zn{constructor(i,s,c,u){this.token=i,this.mode=s,this.binaryShiftByteCount=c,this.bitCount=u}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(i,s){let c=this.bitCount,u=this.token;if(i!==this.mode){let h=qs[this.mode][i];u=gr(u,h&65535,h>>16),c+=h>>16}let d=i===wi?4:5;return u=gr(u,s,d),new Zn(u,i,0,c+d)}shiftAndAppend(i,s){let c=this.token,u=this.mode===wi?4:5;return c=gr(c,Gs[this.mode][i],u),c=gr(c,s,5),new Zn(c,this.mode,0,this.bitCount+u+5)}addBinaryShiftChar(i){let s=this.token,c=this.mode,u=this.bitCount;if(this.mode===Oi||this.mode===wi){let b=qs[c][_r];s=gr(s,b&65535,b>>16),u+=b>>16,c=_r}let d=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,h=new Zn(s,c,this.binaryShiftByteCount+1,u+d);return h.binaryShiftByteCount===2078&&(h=h.endBinaryShift(i+1)),h}endBinaryShift(i){if(this.binaryShiftByteCount===0)return this;let s=this.token;return s=hi(s,i-this.binaryShiftByteCount,this.binaryShiftByteCount),new Zn(s,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(i){let s=this.bitCount+(qs[this.mode][i.mode]>>16);return this.binaryShiftByteCount<i.binaryShiftByteCount?s+=Zn.calculateBinaryShiftCost(i)-Zn.calculateBinaryShiftCost(this):this.binaryShiftByteCount>i.binaryShiftByteCount&&i.binaryShiftByteCount>0&&(s+=10),s<=i.bitCount}toBitArray(i){let s=[];for(let u=this.endBinaryShift(i.length).token;u!==null;u=u.getPrevious())s.unshift(u);let c=new V;for(const u of s)u.appendTo(c,i);return c}toString(){return k.format("%s bits=%d bytes=%d",xa[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(i){return i.binaryShiftByteCount>62?21:i.binaryShiftByteCount>31?20:i.binaryShiftByteCount>0?10:0}}Zn.INITIAL_STATE=new Zn(Ao,_r,0,0);function So($){const i=k.getCharCode(" "),s=k.getCharCode("."),c=k.getCharCode(",");$[_r][i]=1;const u=k.getCharCode("Z"),d=k.getCharCode("A");for(let oe=d;oe<=u;oe++)$[_r][oe]=oe-d+2;$[Vi][i]=1;const h=k.getCharCode("z"),b=k.getCharCode("a");for(let oe=b;oe<=h;oe++)$[Vi][oe]=oe-b+2;$[wi][i]=1;const w=k.getCharCode("9"),_=k.getCharCode("0");for(let oe=_;oe<=w;oe++)$[wi][oe]=oe-_+2;$[wi][c]=12,$[wi][s]=13;const H=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let oe=0;oe<H.length;oe++)$[No][k.getCharCode(H[oe])]=oe;const K=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let oe=0;oe<K.length;oe++)k.getCharCode(K[oe])>0&&($[Oi][k.getCharCode(K[oe])]=oe);return $}const vs=So(E.createInt32Array(5,256));class Fa{constructor(i){this.text=i}encode(){const i=k.getCharCode(" "),s=k.getCharCode(`
`);let c=pn.singletonList(Zn.INITIAL_STATE);for(let d=0;d<this.text.length;d++){let h,b=d+1<this.text.length?this.text[d+1]:0;switch(this.text[d]){case k.getCharCode("\r"):h=b===s?2:0;break;case k.getCharCode("."):h=b===i?3:0;break;case k.getCharCode(","):h=b===i?4:0;break;case k.getCharCode(":"):h=b===i?5:0;break;default:h=0}h>0?(c=Fa.updateStateListForPair(c,d,h),d++):c=this.updateStateListForChar(c,d)}return pn.min(c,(d,h)=>d.getBitCount()-h.getBitCount()).toBitArray(this.text)}updateStateListForChar(i,s){const c=[];for(let u of i)this.updateStateForChar(u,s,c);return Fa.simplifyStates(c)}updateStateForChar(i,s,c){let u=this.text[s]&255,d=vs[i.getMode()][u]>0,h=null;for(let b=0;b<=Oi;b++){let w=vs[b][u];if(w>0){if(h==null&&(h=i.endBinaryShift(s)),!d||b===i.getMode()||b===wi){const _=h.latchAndAppend(b,w);c.push(_)}if(!d&&Gs[i.getMode()][b]>=0){const _=h.shiftAndAppend(b,w);c.push(_)}}}if(i.getBinaryShiftByteCount()>0||vs[i.getMode()][u]===0){let b=i.addBinaryShiftChar(s);c.push(b)}}static updateStateListForPair(i,s,c){const u=[];for(let d of i)this.updateStateForPair(d,s,c,u);return this.simplifyStates(u)}static updateStateForPair(i,s,c,u){let d=i.endBinaryShift(s);if(u.push(d.latchAndAppend(Oi,c)),i.getMode()!==Oi&&u.push(d.shiftAndAppend(Oi,c)),c===3||c===4){let h=d.latchAndAppend(wi,16-c).latchAndAppend(wi,1);u.push(h)}if(i.getBinaryShiftByteCount()>0){let h=i.addBinaryShiftChar(s).addBinaryShiftChar(s+1);u.push(h)}}static simplifyStates(i){let s=[];for(const c of i){let u=!0;for(const d of s){if(d.isBetterThanOrEqualTo(c)){u=!1;break}c.isBetterThanOrEqualTo(d)&&(s=s.filter(h=>h!==d))}u&&s.push(c)}return s}}class dn{constructor(){}static encodeBytes(i){return dn.encode(i,dn.DEFAULT_EC_PERCENT,dn.DEFAULT_AZTEC_LAYERS)}static encode(i,s,c){let u=new Fa(i).encode(),d=j.truncDivision(u.getSize()*s,100)+11,h=u.getSize()+d,b,w,_,H,K;if(c!==dn.DEFAULT_AZTEC_LAYERS){if(b=c<0,w=Math.abs(c),w>(b?dn.MAX_NB_BITS_COMPACT:dn.MAX_NB_BITS))throw new N(k.format("Illegal value %s for layers",c));_=dn.totalBitsInLayer(w,b),H=dn.WORD_SIZE[w];let ut=_-_%H;if(K=dn.stuffBits(u,H),K.getSize()+d>ut)throw new N("Data to large for user specified layer");if(b&&K.getSize()>H*64)throw new N("Data to large for user specified layer")}else{H=0,K=null;for(let ut=0;;ut++){if(ut>dn.MAX_NB_BITS)throw new N("Data too large for an Aztec code");if(b=ut<=3,w=b?ut+1:ut,_=dn.totalBitsInLayer(w,b),h>_)continue;(K==null||H!==dn.WORD_SIZE[w])&&(H=dn.WORD_SIZE[w],K=dn.stuffBits(u,H));let cn=_-_%H;if(!(b&&K.getSize()>H*64)&&K.getSize()+d<=cn)break}}let oe=dn.generateCheckWords(K,_,H),ye=K.getSize()/H,Ae=dn.generateModeMessage(b,w,ye),Ce=(b?11:14)+w*4,Re=new Int32Array(Ce),Xe;if(b){Xe=Ce;for(let ut=0;ut<Re.length;ut++)Re[ut]=ut}else{Xe=Ce+1+2*j.truncDivision(j.truncDivision(Ce,2)-1,15);let ut=j.truncDivision(Ce,2),cn=j.truncDivision(Xe,2);for(let Zt=0;Zt<ut;Zt++){let jr=Zt+j.truncDivision(Zt,15);Re[ut-Zt-1]=cn-jr-1,Re[ut+Zt]=cn+jr+1}}let st=new J(Xe);for(let ut=0,cn=0;ut<w;ut++){let Zt=(w-ut)*4+(b?9:12);for(let jr=0;jr<Zt;jr++){let ii=jr*2;for(let Sr=0;Sr<2;Sr++)oe.get(cn+ii+Sr)&&st.set(Re[ut*2+Sr],Re[ut*2+jr]),oe.get(cn+Zt*2+ii+Sr)&&st.set(Re[ut*2+jr],Re[Ce-1-ut*2-Sr]),oe.get(cn+Zt*4+ii+Sr)&&st.set(Re[Ce-1-ut*2-Sr],Re[Ce-1-ut*2-jr]),oe.get(cn+Zt*6+ii+Sr)&&st.set(Re[Ce-1-ut*2-jr],Re[ut*2+Sr])}cn+=Zt*8}if(dn.drawModeMessage(st,b,Xe,Ae),b)dn.drawBullsEye(st,j.truncDivision(Xe,2),5);else{dn.drawBullsEye(st,j.truncDivision(Xe,2),7);for(let ut=0,cn=0;ut<j.truncDivision(Ce,2)-1;ut+=15,cn+=16)for(let Zt=j.truncDivision(Xe,2)&1;Zt<Xe;Zt+=2)st.set(j.truncDivision(Xe,2)-cn,Zt),st.set(j.truncDivision(Xe,2)+cn,Zt),st.set(Zt,j.truncDivision(Xe,2)-cn),st.set(Zt,j.truncDivision(Xe,2)+cn)}let ht=new Jt;return ht.setCompact(b),ht.setSize(Xe),ht.setLayers(w),ht.setCodeWords(ye),ht.setMatrix(st),ht}static drawBullsEye(i,s,c){for(let u=0;u<c;u+=2)for(let d=s-u;d<=s+u;d++)i.set(d,s-u),i.set(d,s+u),i.set(s-u,d),i.set(s+u,d);i.set(s-c,s-c),i.set(s-c+1,s-c),i.set(s-c,s-c+1),i.set(s+c,s-c),i.set(s+c,s-c+1),i.set(s+c,s+c-1)}static generateModeMessage(i,s,c){let u=new V;return i?(u.appendBits(s-1,2),u.appendBits(c-1,6),u=dn.generateCheckWords(u,28,4)):(u.appendBits(s-1,5),u.appendBits(c-1,11),u=dn.generateCheckWords(u,40,4)),u}static drawModeMessage(i,s,c,u){let d=j.truncDivision(c,2);if(s)for(let h=0;h<7;h++){let b=d-3+h;u.get(h)&&i.set(b,d-5),u.get(h+7)&&i.set(d+5,b),u.get(20-h)&&i.set(b,d+5),u.get(27-h)&&i.set(d-5,b)}else for(let h=0;h<10;h++){let b=d-5+h+j.truncDivision(h,5);u.get(h)&&i.set(b,d-7),u.get(h+10)&&i.set(d+7,b),u.get(29-h)&&i.set(b,d+7),u.get(39-h)&&i.set(d-7,b)}}static generateCheckWords(i,s,c){let u=i.getSize()/c,d=new bs(dn.getGF(c)),h=j.truncDivision(s,c),b=dn.bitsToWords(i,c,h);d.encode(b,h-u);let w=s%c,_=new V;_.appendBits(0,w);for(const H of Array.from(b))_.appendBits(H,c);return _}static bitsToWords(i,s,c){let u=new Int32Array(c),d,h;for(d=0,h=i.getSize()/s;d<h;d++){let b=0;for(let w=0;w<s;w++)b|=i.get(d*s+w)?1<<s-w-1:0;u[d]=b}return u}static getGF(i){switch(i){case 4:return Be.AZTEC_PARAM;case 6:return Be.AZTEC_DATA_6;case 8:return Be.AZTEC_DATA_8;case 10:return Be.AZTEC_DATA_10;case 12:return Be.AZTEC_DATA_12;default:throw new N("Unsupported word size "+i)}}static stuffBits(i,s){let c=new V,u=i.getSize(),d=(1<<s)-2;for(let h=0;h<u;h+=s){let b=0;for(let w=0;w<s;w++)(h+w>=u||i.get(h+w))&&(b|=1<<s-1-w);(b&d)===d?(c.appendBits(b&d,s),h--):b&d?c.appendBits(b,s):(c.appendBits(b|1,s),h--)}return c}static totalBitsInLayer(i,s){return((s?88:112)+16*i)*i}}dn.DEFAULT_EC_PERCENT=33,dn.DEFAULT_AZTEC_LAYERS=0,dn.MAX_NB_BITS=32,dn.MAX_NB_BITS_COMPACT=4,dn.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class ri{encode(i,s,c,u){return this.encodeWithHints(i,s,c,u,null)}encodeWithHints(i,s,c,u,d){let h=Kt.ISO_8859_1,b=dn.DEFAULT_EC_PERCENT,w=dn.DEFAULT_AZTEC_LAYERS;return d!=null&&(d.has(Ar.CHARACTER_SET)&&(h=kt.forName(d.get(Ar.CHARACTER_SET).toString())),d.has(Ar.ERROR_CORRECTION)&&(b=j.parseInt(d.get(Ar.ERROR_CORRECTION).toString())),d.has(Ar.AZTEC_LAYERS)&&(w=j.parseInt(d.get(Ar.AZTEC_LAYERS).toString()))),ri.encodeLayers(i,s,c,u,h,b,w)}static encodeLayers(i,s,c,u,d,h,b){if(s!==ae.AZTEC)throw new N("Can only encode AZTEC, but got "+s);let w=dn.encode(k.getBytes(i,d),h,b);return ri.renderResult(w,c,u)}static renderResult(i,s,c){let u=i.getMatrix();if(u==null)throw new ke;let d=u.getWidth(),h=u.getHeight(),b=Math.max(s,d),w=Math.max(c,h),_=Math.min(b/d,w/h),H=(b-d*_)/2,K=(w-h*_)/2,oe=new J(b,w);for(let ye=0,Ae=K;ye<h;ye++,Ae+=_)for(let Ce=0,Re=H;Ce<d;Ce++,Re+=_)u.get(Ce,ye)&&oe.setRegion(Re,Ae,_,_);return oe}}n.AbstractExpandedDecoder=Ti,n.ArgumentException=A,n.ArithmeticException=Qe,n.AztecCode=Jt,n.AztecCodeReader=xt,n.AztecCodeWriter=ri,n.AztecDecoder=ze,n.AztecDetector=qt,n.AztecDetectorResult=Ue,n.AztecEncoder=dn,n.AztecHighLevelEncoder=Fa,n.AztecPoint=yt,n.BarcodeFormat=ae,n.Binarizer=O,n.BinaryBitmap=T,n.BitArray=V,n.BitMatrix=J,n.BitSource=La,n.BrowserAztecCodeReader=hn,n.BrowserBarcodeReader=ga,n.BrowserCodeReader=q,n.BrowserDatamatrixCodeReader=xo,n.BrowserMultiFormatReader=vo,n.BrowserPDF417Reader=Il,n.BrowserQRCodeReader=Dl,n.BrowserQRCodeSvgWriter=Se,n.CharacterSetECI=M,n.ChecksumException=v,n.Code128Reader=gt,n.Code39Reader=Te,n.DataMatrixDecodedBitStreamParser=Hi,n.DataMatrixReader=mn,n.DecodeHintType=ie,n.DecoderResult=xe,n.DefaultGridSampler=pt,n.DetectorResult=mt,n.EAN13Reader=$r,n.EncodeHintType=Ar,n.Exception=x,n.FormatException=B,n.GenericGF=Be,n.GenericGFPoly=_e,n.GlobalHistogramBinarizer=Y,n.GridSampler=Oe,n.GridSamplerInstance=St,n.HTMLCanvasElementLuminanceSource=ge,n.HybridBinarizer=z,n.ITFReader=lt,n.IllegalArgumentException=N,n.IllegalStateException=ke,n.InvertedLuminanceSource=te,n.LuminanceSource=X,n.MathUtils=Pe,n.MultiFormatOneDReader=Mr,n.MultiFormatReader=jl,n.MultiFormatWriter=Je,n.NotFoundException=G,n.OneDReader=Tt,n.PDF417DecodedBitStreamParser=Ye,n.PDF417DecoderErrorCorrection=fc,n.PDF417Reader=Nr,n.PDF417ResultMetadata=El,n.PerspectiveTransform=Ze,n.PlanarYUVLuminanceSource=rt,n.QRCodeByteMatrix=ys,n.QRCodeDataMask=ji,n.QRCodeDecodedBitStreamParser=Tn,n.QRCodeDecoderErrorCorrectionLevel=Dn,n.QRCodeDecoderFormatInformation=Pr,n.QRCodeEncoder=be,n.QRCodeEncoderQRCode=Ri,n.QRCodeMaskUtil=Fn,n.QRCodeMatrixUtil=S,n.QRCodeMode=Bt,n.QRCodeReader=Ma,n.QRCodeVersion=Ot,n.QRCodeWriter=Fe,n.RGBLuminanceSource=At,n.RSS14Reader=Ft,n.RSSExpandedReader=Ne,n.ReaderException=xs,n.ReedSolomonDecoder=he,n.ReedSolomonEncoder=bs,n.ReedSolomonException=ft,n.Result=ee,n.ResultMetadataType=we,n.ResultPoint=We,n.StringUtils=k,n.UnsupportedOperationException=Z,n.VideoInputDevice=ue,n.WhiteRectangleDetector=it,n.WriterException=_n,n.ZXingArrays=E,n.ZXingCharset=kt,n.ZXingInteger=j,n.ZXingStandardCharsets=Kt,n.ZXingStringBuilder=Q,n.ZXingStringEncoding=F,n.ZXingSystem=D,n.createAbstractExpandedDecoder=po,Object.defineProperty(n,"__esModule",{value:!0})})})(Pm,Pm.exports);var cr=Pm.exports;const eS=Ph(cr),tS=j3({__proto__:null,default:eS},[cr]);var Lx=function(){function e(t,n,r){if(this.formatMap=new Map([[Et.QR_CODE,cr.BarcodeFormat.QR_CODE],[Et.AZTEC,cr.BarcodeFormat.AZTEC],[Et.CODABAR,cr.BarcodeFormat.CODABAR],[Et.CODE_39,cr.BarcodeFormat.CODE_39],[Et.CODE_93,cr.BarcodeFormat.CODE_93],[Et.CODE_128,cr.BarcodeFormat.CODE_128],[Et.DATA_MATRIX,cr.BarcodeFormat.DATA_MATRIX],[Et.MAXICODE,cr.BarcodeFormat.MAXICODE],[Et.ITF,cr.BarcodeFormat.ITF],[Et.EAN_13,cr.BarcodeFormat.EAN_13],[Et.EAN_8,cr.BarcodeFormat.EAN_8],[Et.PDF_417,cr.BarcodeFormat.PDF_417],[Et.RSS_14,cr.BarcodeFormat.RSS_14],[Et.RSS_EXPANDED,cr.BarcodeFormat.RSS_EXPANDED],[Et.UPC_A,cr.BarcodeFormat.UPC_A],[Et.UPC_E,cr.BarcodeFormat.UPC_E],[Et.UPC_EAN_EXTENSION,cr.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!tS)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=r;var o=this.createZXingFormats(t),l=new Map;l.set(cr.DecodeHintType.POSSIBLE_FORMATS,o),l.set(cr.DecodeHintType.TRY_HARDER,!1),this.hints=l}return e.prototype.decodeAsync=function(t){var n=this;return new Promise(function(r,o){try{r(n.decode(t))}catch(l){o(l)}})},e.prototype.decode=function(t){var n=new cr.MultiFormatReader(this.verbose,this.hints),r=new cr.HTMLCanvasElementLuminanceSource(t),o=new cr.BinaryBitmap(new cr.HybridBinarizer(r)),l=n.decode(o);return{text:l.text,format:Mv.create(this.toHtml5QrcodeSupportedFormats(l.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,r,o){t.set(n,r)}),t},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createZXingFormats=function(t){for(var n=[],r=0,o=t;r<o.length;r++){var l=o[r];this.formatMap.has(l)?n.push(this.formatMap.get(l)):this.logger.logError("".concat(l," is not supported by")+"ZXingHtml5QrcodeShim")}return n},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),nS=function(e,t,n,r){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function m(A){try{x(r.next(A))}catch(N){f(N)}}function g(A){try{x(r.throw(A))}catch(N){f(N)}}function x(A){A.done?l(A.value):o(A.value).then(m,g)}x((r=r.apply(e,t||[])).next())})},rS=function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,o,l,f;return f={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function m(x){return function(A){return g([x,A])}}function g(x){if(r)throw new TypeError("Generator is already executing.");for(;f&&(f=0,x[0]&&(n=0)),n;)try{if(r=1,o&&(l=x[0]&2?o.return:x[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,x[1])).done)return l;switch(o=0,l&&(x=[x[0]&2,l.value]),x[0]){case 0:case 1:l=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,o=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!l||x[1]>l[0]&&x[1]<l[3])){n.label=x[1];break}if(x[0]===6&&n.label<l[1]){n.label=l[1],l=x;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(x);break}l[2]&&n.ops.pop(),n.trys.pop();continue}x=t.call(e,n)}catch(A){x=[6,A],o=0}finally{r=l=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},Mx=function(){function e(t,n,r){if(this.formatMap=new Map([[Et.QR_CODE,"qr_code"],[Et.AZTEC,"aztec"],[Et.CODABAR,"codabar"],[Et.CODE_39,"code_39"],[Et.CODE_93,"code_93"],[Et.CODE_128,"code_128"],[Et.DATA_MATRIX,"data_matrix"],[Et.ITF,"itf"],[Et.EAN_13,"ean_13"],[Et.EAN_8,"ean_8"],[Et.PDF_417,"pdf417"],[Et.UPC_A,"upc_a"],[Et.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var o=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(o),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},e.prototype.decodeAsync=function(t){return nS(this,void 0,void 0,function(){var n,r;return rS(this,function(o){switch(o.label){case 0:return[4,this.detector.detect(t)];case 1:if(n=o.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return r=this.selectLargestBarcode(n),[2,{text:r.rawValue,format:Mv.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(t){for(var n=null,r=0,o=0,l=t;o<l.length;o++){var f=l[o],m=f.boundingBox.width*f.boundingBox.height;m>r&&(r=m,n=f)}if(!n)throw"No largest barcode found";return n},e.prototype.createBarcodeDetectorFormats=function(t){for(var n=[],r=0,o=t;r<o.length;r++){var l=o[r];this.formatMap.has(l)?n.push(this.formatMap.get(l)):this.logger.warn("".concat(l," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,r,o){t.set(n,r)}),t},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),kx=function(e,t,n,r){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function m(A){try{x(r.next(A))}catch(N){f(N)}}function g(A){try{x(r.throw(A))}catch(N){f(N)}}function x(A){A.done?l(A.value):o(A.value).then(m,g)}x((r=r.apply(e,t||[])).next())})},Px=function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,o,l,f;return f={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function m(x){return function(A){return g([x,A])}}function g(x){if(r)throw new TypeError("Generator is already executing.");for(;f&&(f=0,x[0]&&(n=0)),n;)try{if(r=1,o&&(l=x[0]&2?o.return:x[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,x[1])).done)return l;switch(o=0,l&&(x=[x[0]&2,l.value]),x[0]){case 0:case 1:l=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,o=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!l||x[1]>l[0]&&x[1]<l[3])){n.label=x[1];break}if(x[0]===6&&n.label<l[1]){n.label=l[1],l=x;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(x);break}l[2]&&n.ops.pop(),n.trys.pop();continue}x=t.call(e,n)}catch(A){x=[6,A],o=0}finally{r=l=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},iS=function(){function e(t,n,r,o){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,n&&Mx.isSupported()?(this.primaryDecoder=new Mx(t,r,o),this.secondaryDecoder=new Lx(t,r,o)):this.primaryDecoder=new Lx(t,r,o)}return e.prototype.decodeAsync=function(t){return kx(this,void 0,void 0,function(){var n;return Px(this,function(r){switch(r.label){case 0:n=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(t){return kx(this,void 0,void 0,function(){var n,r;return Px(this,function(o){switch(o.label){case 0:n=performance.now(),o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,o.sent()];case 3:if(r=o.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw r;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(t){if(this.verbose){var n=performance.now()-t;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,n=0,r=this.executionResults;n<r.length;n++){var o=r[n];t+=o}var l=t/this.executionResults.length;console.log("".concat(l," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}(),Qg=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Lh=function(e,t,n,r){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function m(A){try{x(r.next(A))}catch(N){f(N)}}function g(A){try{x(r.throw(A))}catch(N){f(N)}}function x(A){A.done?l(A.value):o(A.value).then(m,g)}x((r=r.apply(e,t||[])).next())})},Mh=function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,o,l,f;return f={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function m(x){return function(A){return g([x,A])}}function g(x){if(r)throw new TypeError("Generator is already executing.");for(;f&&(f=0,x[0]&&(n=0)),n;)try{if(r=1,o&&(l=x[0]&2?o.return:x[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,x[1])).done)return l;switch(o=0,l&&(x=[x[0]&2,l.value]),x[0]){case 0:case 1:l=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,o=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!l||x[1]>l[0]&&x[1]<l[3])){n.label=x[1];break}if(x[0]===6&&n.label<l[1]){n.label=l[1],l=x;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(x);break}l[2]&&n.ops.pop(),n.trys.pop();continue}x=t.call(e,n)}catch(A){x=[6,A],o=0}finally{r=l=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},Bv=function(){function e(t,n){this.name=t,this.track=n}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(t){var n={};n[this.name]=t;var r={advanced:[n]};return this.track.applyConstraints(r)},e.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var n=t[this.name];return n}return null},e}(),aS=function(e){Qg(t,e);function t(n,r){return e.call(this,n,r)||this}return t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(n){var r={};r[this.name]=n;var o={advanced:[r]};return this.track.applyConstraints(o)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),r=n[this.name];return{min:r.min,max:r.max,step:r.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t}(Bv),sS=function(e){Qg(t,e);function t(n){return e.call(this,"zoom",n)||this}return t}(aS),oS=function(e){Qg(t,e);function t(n){return e.call(this,"torch",n)||this}return t}(Bv),lS=function(){function e(t){this.track=t}return e.prototype.zoomFeature=function(){return new sS(this.track)},e.prototype.torchFeature=function(){return new oS(this.track)},e}(),cS=function(){function e(t,n,r){this.isClosed=!1,this.parentElement=t,this.mediaStream=n,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return e.prototype.createVideoElement=function(t){var n=document.createElement("video");return n.style.width="".concat(t,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},e.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var r=t.surface.clientWidth,o=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(r,o),t.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,n,r,o){return Lh(this,void 0,void 0,function(){var l,f;return Mh(this,function(m){switch(m.label){case 0:return l=new e(t,n,o),r.aspectRatio?(f={aspectRatio:r.aspectRatio},[4,l.getFirstTrackOrFail().applyConstraints(f)]):[3,2];case 1:m.sent(),m.label=2;case 2:return l.setupSurface(),[2,l]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(t){this.failIfClosed();var n=this,r=function(){setTimeout(t,200),n.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(t){return Lh(this,void 0,void 0,function(){return Mh(this,function(n){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(n,r){var o=t.mediaStream.getVideoTracks(),l=o.length,f=0;t.mediaStream.getVideoTracks().forEach(function(m){t.mediaStream.removeTrack(m),m.stop(),++f,f>=l&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),n())})})},e.prototype.getCapabilities=function(){return new lS(this.getFirstTrackOrFail())},e}(),uS=function(){function e(t){this.mediaStream=t}return e.prototype.render=function(t,n,r){return Lh(this,void 0,void 0,function(){return Mh(this,function(o){return[2,cS.create(t,this.mediaStream,n,r)]})})},e.create=function(t){return Lh(this,void 0,void 0,function(){var n,r;return Mh(this,function(o){switch(o.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return r=o.sent(),[2,new e(r)]}})})},e}(),Fx=function(e,t,n,r){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function m(A){try{x(r.next(A))}catch(N){f(N)}}function g(A){try{x(r.throw(A))}catch(N){f(N)}}function x(A){A.done?l(A.value):o(A.value).then(m,g)}x((r=r.apply(e,t||[])).next())})},Bx=function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,o,l,f;return f={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function m(x){return function(A){return g([x,A])}}function g(x){if(r)throw new TypeError("Generator is already executing.");for(;f&&(f=0,x[0]&&(n=0)),n;)try{if(r=1,o&&(l=x[0]&2?o.return:x[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,x[1])).done)return l;switch(o=0,l&&(x=[x[0]&2,l.value]),x[0]){case 0:case 1:l=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,o=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!l||x[1]>l[0]&&x[1]<l[3])){n.label=x[1];break}if(x[0]===6&&n.label<l[1]){n.label=l[1],l=x;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(x);break}l[2]&&n.ops.pop(),n.trys.pop();continue}x=t.call(e,n)}catch(A){x=[6,A],o=0}finally{r=l=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},dS=function(){function e(){}return e.failIfNotSupported=function(){return Fx(this,void 0,void 0,function(){return Bx(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(t){return Fx(this,void 0,void 0,function(){return Bx(this,function(n){return[2,uS.create(t)]})})},e}(),fS=function(e,t,n,r){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function m(A){try{x(r.next(A))}catch(N){f(N)}}function g(A){try{x(r.throw(A))}catch(N){f(N)}}function x(A){A.done?l(A.value):o(A.value).then(m,g)}x((r=r.apply(e,t||[])).next())})},hS=function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,o,l,f;return f={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function m(x){return function(A){return g([x,A])}}function g(x){if(r)throw new TypeError("Generator is already executing.");for(;f&&(f=0,x[0]&&(n=0)),n;)try{if(r=1,o&&(l=x[0]&2?o.return:x[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,x[1])).done)return l;switch(o=0,l&&(x=[x[0]&2,l.value]),x[0]){case 0:case 1:l=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,o=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!l||x[1]>l[0]&&x[1]<l[3])){n.label=x[1];break}if(x[0]===6&&n.label<l[1]){n.label=l[1],l=x;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(x);break}l[2]&&n.ops.pop(),n.trys.pop();continue}x=t.call(e,n)}catch(A){x=[6,A],o=0}finally{r=l=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},mS=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=qc.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=qc.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var t=location.host.split(":")[0];return t==="127.0.0.1"||t==="localhost"},e.getCamerasFromMediaDevices=function(){return fS(this,void 0,void 0,function(){var t,n,r,o,l,f,m;return hS(this,function(g){switch(g.label){case 0:return t=function(x){for(var A=x.getVideoTracks(),N=0,T=A;N<T.length;N++){var v=T[N];v.enabled=!1,v.stop(),x.removeTrack(v)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=g.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=g.sent(),o=[],l=0,f=r;l<f.length;l++)m=f[l],m.kind==="videoinput"&&o.push({id:m.deviceId,label:m.label});return t(n),[2,o]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,n){var r=function(l){for(var f=[],m=0,g=l;m<g.length;m++){var x=g[m];x.kind==="video"&&f.push({id:x.id,label:x.label})}t(f)},o=MediaStreamTrack;o.getSources(r)})},e}(),Er;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(Er||(Er={}));var gS=function(){function e(){this.state=Er.NOT_STARTED,this.onGoingTransactionNewState=Er.UNKNOWN}return e.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},e.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===Er.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Er.UNKNOWN,this.directTransition(t)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===Er.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Er.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Er.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(t){switch(this.state){case Er.UNKNOWN:throw"Transition from unknown is not allowed";case Er.NOT_STARTED:this.failIfNewStateIs(t,[Er.PAUSED]);break;case Er.SCANNING:break;case Er.PAUSED:break}},e.prototype.failIfNewStateIs=function(t,n){for(var r=0,o=n;r<o.length;r++){var l=o[r];if(t===l)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},e}(),pS=function(){function e(t){this.stateManager=t}return e.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},e.prototype.directTransition=function(t){this.stateManager.directTransition(t)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===Er.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==Er.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Er.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===Er.PAUSED},e}(),xS=function(){function e(){}return e.create=function(){return new pS(new gS)},e}(),bS=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Aa=function(e){bS(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(cs),yS=function(){function e(t,n){this.logger=n,this.fps=Aa.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=Aa.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Fv.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!Ss(this.qrbox)},e.create=function(t,n){return new e(t,n)},e}(),Ux=function(){function e(t,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1;var r;typeof n=="boolean"?this.verbose=n===!0:n&&(r=n,this.verbose=r.verbose===!0,r.experimentalFeatures),this.logger=new Pv(this.verbose),this.qrcode=new iS(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(r),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=xS.create()}return e.prototype.start=function(t,n,r,o){var l=this;if(!t)throw"cameraIdOrConfig is required";if(!r||typeof r!="function")throw"qrCodeSuccessCallback is required and should be a function.";var f;o?f=o:f=this.verbose?this.logger.log:function(){};var m=yS.create(n,this.logger);this.clearElement();var g=!1;m.videoConstraints&&(m.isMediaStreamConstraintsValid()?g=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var x=g,A=document.getElementById(this.elementId);A.clientWidth?A.clientWidth:Aa.DEFAULT_WIDTH,A.style.position="relative",this.shouldScan=!0,this.element=A;var N=this,T=this.stateManagerProxy.startTransition(Er.SCANNING);return new Promise(function(v,O){var D=x?m.videoConstraints:N.createVideoConstraints(t);if(!D){T.cancel(),O("videoConstraints should be defined");return}var P={};(!x||m.aspectRatio)&&(P.aspectRatio=m.aspectRatio);var C={onRenderSurfaceReady:function(E,j){N.setupUi(E,j,m),N.isScanning=!0,N.foreverScan(m,r,f)}};dS.failIfNotSupported().then(function(E){E.create(D).then(function(j){return j.render(l.element,P,C).then(function(V){N.renderedCamera=V,T.execute(),v(null)}).catch(function(V){T.cancel(),O(V)})}).catch(function(j){T.cancel(),O(qc.errorGettingUserMedia(j))})}).catch(function(E){T.cancel(),O(qc.cameraStreamingNotSupported())})})},e.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Er.PAUSED),this.showPausedState(),(Ss(t)||t!==!0)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,n=function(){t.stateManagerProxy.directTransition(Er.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(Er.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(t.element){var l=document.getElementById(Aa.SHADED_REGION_ELEMENT_ID);l&&t.element.removeChild(l)}},o=this;return this.renderedCamera.close().then(function(){return o.renderedCamera=null,o.element&&(o.element.removeChild(o.canvasElement),o.canvasElement=null),r(),o.qrRegion&&(o.qrRegion=null),o.context&&(o.context=null),n.execute(),o.hidePausedState(),o.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(t,n){return this.scanFileV2(t,n).then(function(r){return r.decodedText})},e.prototype.scanFileV2=function(t,n){var r=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Ss(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(o,l){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(t);var f=new Image;f.onload=function(){var m=f.width,g=f.height,x=document.getElementById(r.elementId),A=x.clientWidth?x.clientWidth:Aa.DEFAULT_WIDTH,N=Math.max(x.clientHeight?x.clientHeight:g,Aa.FILE_SCAN_MIN_HEIGHT),T=r.computeCanvasDrawConfig(m,g,A,N);if(n){var v=r.createCanvasElement(A,N,"qr-canvas-visible");v.style.display="inline-block",x.appendChild(v);var O=v.getContext("2d");if(!O)throw"Unable to get 2d context from canvas";O.canvas.width=A,O.canvas.height=N,O.drawImage(f,0,0,m,g,T.x,T.y,T.width,T.height)}var D=Aa.FILE_SCAN_HIDDEN_CANVAS_PADDING,P=Math.max(f.width,T.width),C=Math.max(f.height,T.height),E=P+2*D,j=C+2*D,V=r.createCanvasElement(E,j);x.appendChild(V);var W=V.getContext("2d");if(!W)throw"Unable to get 2d context from canvas";W.canvas.width=E,W.canvas.height=j,W.drawImage(f,0,0,m,g,D,D,P,C);try{r.qrcode.decodeRobustlyAsync(V).then(function(ie){o(Rx.createFromQrcodeResult(ie))}).catch(l)}catch(ie){l("QR code parse error, error = ".concat(ie))}},f.onerror=l,f.onabort=l,f.onstalled=l,f.onsuspend=l,f.src=URL.createObjectURL(t)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return mS.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(t){if(t){if(!Fv.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(t){var n=[Et.QR_CODE,Et.AZTEC,Et.CODABAR,Et.CODE_39,Et.CODE_93,Et.CODE_128,Et.DATA_MATRIX,Et.MAXICODE,Et.ITF,Et.EAN_13,Et.EAN_8,Et.PDF_417,Et.RSS_14,Et.RSS_EXPANDED,Et.UPC_A,Et.UPC_E,Et.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return n;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],o=0,l=t.formatsToSupport;o<l.length;o++){var f=l[o];JA(f)?r.push(f):this.logger.warn("Invalid format: ".concat(f," passed in config, ignoring."))}if(r.length===0)throw"None of formatsToSupport match supported values.";return r},e.prototype.getUseBarCodeDetectorIfSupported=function(t){if(Ss(t))return!0;if(!Ss(t.useBarCodeDetectorIfSupported))return t.useBarCodeDetectorIfSupported!==!1;if(Ss(t.experimentalFeatures))return!0;var n=t.experimentalFeatures;return Ss(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(t,n,r){var o=this,l=r.qrbox;this.validateQrboxConfig(l);var f=this.toQrdimensions(t,n,l),m=function(x){if(x<Aa.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Aa.MIN_QR_BOX_SIZE,"px.")},g=function(x){return x>t&&(o.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),x=t),x};m(f.width),m(f.height),f.width=g(f.width)},e.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(t,n,r){if(typeof r=="number")return{width:r,height:r};if(typeof r=="function")try{return r(t,n)}catch(o){throw new Error("qrbox config was passed as a function but it failed with unknown error"+o)}return r},e.prototype.setupUi=function(t,n,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(t,n,r);var o=Ss(r.qrbox)?{width:t,height:n}:r.qrbox;this.validateQrboxConfig(o);var l=this.toQrdimensions(t,n,o);l.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var f=r.isShadedBoxEnabled()&&l.height<=n,m={x:0,y:0,width:t,height:n},g=f?this.getShadedRegionBounds(t,n,l):m,x=this.createCanvasElement(g.width,g.height),A={willReadFrequently:!0},N=x.getContext("2d",A);N.canvas.width=g.width,N.canvas.height=g.height,this.element.append(x),f&&this.possiblyInsertShadingElement(this.element,t,n,l),this.createScannerPausedUiElement(this.element),this.qrRegion=g,this.context=N,this.canvasElement=x},e.prototype.createScannerPausedUiElement=function(t){var n=document.createElement("div");n.innerText=qc.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",t.appendChild(n),this.scannerPausedUiElement=n},e.prototype.scanContext=function(t,n){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(o){return t(o.text,Rx.createFromQrcodeResult(o)),r.possiblyUpdateShaders(!0),!0}).catch(function(o){r.possiblyUpdateShaders(!1);var l=qc.codeParseError(o);return n(l,kv.createFrom(l)),!1})},e.prototype.foreverScan=function(t,n,r){var o=this;if(this.shouldScan&&this.renderedCamera){var l=this.renderedCamera.getSurface(),f=l.videoWidth/l.clientWidth,m=l.videoHeight/l.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var g=this.qrRegion.width*f,x=this.qrRegion.height*m,A=this.qrRegion.x*f,N=this.qrRegion.y*m;this.context.drawImage(l,A,N,g,x,0,0,this.qrRegion.width,this.qrRegion.height);var T=function(){o.foreverScanTimeout=setTimeout(function(){o.foreverScan(t,n,r)},o.getTimeoutFps(t.fps))};this.scanContext(n,r).then(function(v){!v&&t.disableFlip!==!0?(o.context.translate(o.context.canvas.width,0),o.context.scale(-1,1),o.scanContext(n,r).finally(function(){T()})):T()}).catch(function(v){o.logger.logError("Error happend while scanning context",v),T()})}},e.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var n="facingMode",r="deviceId",o={user:!0,environment:!0},l="exact",f=function(O){if(O in o)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(O,"'")},m=Object.keys(t);if(m.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(m.length," keys");var g=Object.keys(t)[0];if(g!==n&&g!==r)throw"Only '".concat(n,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(g===n){var x=t.facingMode;if(typeof x=="string"){if(f(x))return{facingMode:x}}else if(typeof x=="object")if(l in x){if(f(x["".concat(l)]))return{facingMode:{exact:x["".concat(l)]}}}else throw"'facingMode' should be string or object with"+" ".concat(l," as key.");else{var A=typeof x;throw"Invalid type of 'facingMode' = ".concat(A)}}else{var N=t.deviceId;if(typeof N=="string")return{deviceId:N};if(typeof N=="object"){if(l in N)return{deviceId:{exact:N["".concat(l)]}};throw"'deviceId' should be string or object with"+" ".concat(l," as key.")}else{var T=typeof N;throw"Invalid type of 'deviceId' = ".concat(T)}}}var v=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(v)},e.prototype.computeCanvasDrawConfig=function(t,n,r,o){if(t<=r&&n<=o){var l=(r-t)/2,f=(o-n)/2;return{x:l,y:f,width:t,height:n}}else{var m=t,g=n;return t>r&&(n=r/t*n,t=r),n>o&&(t=o/n*t,n=o),this.logger.log("Image downsampled from "+"".concat(m,"X").concat(g)+" to ".concat(t,"X").concat(n,".")),this.computeCanvasDrawConfig(t,n,r,o)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},e.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=t?Aa.BORDER_SHADER_MATCH_COLOR:Aa.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(t,n,r){var o=t,l=n,f=document.createElement("canvas");return f.style.width="".concat(o,"px"),f.style.height="".concat(l,"px"),f.style.display="none",f.id=Ss(r)?"qr-canvas":r,f},e.prototype.getShadedRegionBounds=function(t,n,r){if(r.width>t||r.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-r.width)/2,y:(n-r.height)/2,width:r.width,height:r.height}},e.prototype.possiblyInsertShadingElement=function(t,n,r,o){if(!(n-o.width<1||r-o.height<1)){var l=document.createElement("div");l.style.position="absolute";var f=(n-o.width)/2,m=(r-o.height)/2;if(l.style.borderLeft="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderRight="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderTop="".concat(m,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderBottom="".concat(m,"px solid rgba(0, 0, 0, 0.48)"),l.style.boxSizing="border-box",l.style.top="0px",l.style.bottom="0px",l.style.left="0px",l.style.right="0px",l.id="".concat(Aa.SHADED_REGION_ELEMENT_ID),n-o.width<11||r-o.height<11)this.hasBorderShaders=!1;else{var g=5,x=40;this.insertShaderBorders(l,x,g,-g,null,0,!0),this.insertShaderBorders(l,x,g,-g,null,0,!1),this.insertShaderBorders(l,x,g,null,-g,0,!0),this.insertShaderBorders(l,x,g,null,-g,0,!1),this.insertShaderBorders(l,g,x+g,-g,null,-g,!0),this.insertShaderBorders(l,g,x+g,null,-g,-g,!0),this.insertShaderBorders(l,g,x+g,-g,null,-g,!1),this.insertShaderBorders(l,g,x+g,null,-g,-g,!1),this.hasBorderShaders=!0}t.append(l)}},e.prototype.insertShaderBorders=function(t,n,r,o,l,f,m){var g=document.createElement("div");g.style.position="absolute",g.style.backgroundColor=Aa.BORDER_SHADER_DEFAULT_COLOR,g.style.width="".concat(n,"px"),g.style.height="".concat(r,"px"),o!==null&&(g.style.top="".concat(o,"px")),l!==null&&(g.style.bottom="".concat(l,"px")),m?g.style.left="".concat(f,"px"):g.style.right="".concat(f,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(g),t.appendChild(g)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(t){return 1e3/t},e}(),Kg="data:image/svg+xml;base64,",vS=Kg+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",wS=Kg+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",zx=Kg+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",NS="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",Hx=function(){function e(){}return e.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},e}(),AS=function(){function e(){this.data=Hx.createDefault();var t=localStorage.getItem(e.LOCAL_STORAGE_KEY);t?this.data=JSON.parse(t):this.reset()}return e.prototype.hasCameraPermissions=function(){return this.data.hasPermission},e.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},e.prototype.setHasPermission=function(t){this.data.hasPermission=t,this.flush()},e.prototype.setLastUsedCameraId=function(t){this.data.lastUsedCameraId=t,this.flush()},e.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},e.prototype.reset=function(){this.data=Hx.createDefault(),this.flush()},e.prototype.flush=function(){localStorage.setItem(e.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},e.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",e}(),SS=function(){function e(){this.infoDiv=document.createElement("div")}return e.prototype.renderInto=function(t){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=Ox.poweredBy();var n=document.createElement("a");n.innerText="ScanApp",n.href="https://scanapp.org",n.target="new",n.style.color="white",this.infoDiv.appendChild(n);var r=document.createElement("br"),o=document.createElement("br");this.infoDiv.appendChild(r),this.infoDiv.appendChild(o);var l=document.createElement("a");l.innerText=Ox.reportIssues(),l.href="https://github.com/mebjas/html5-qrcode/issues",l.target="new",l.style.color="white",this.infoDiv.appendChild(l),t.appendChild(this.infoDiv)},e.prototype.show=function(){this.infoDiv.style.display="block"},e.prototype.hide=function(){this.infoDiv.style.display="none"},e}(),CS=function(){function e(t,n){this.isShowingInfoIcon=!0,this.onTapIn=t,this.onTapOut=n,this.infoIcon=document.createElement("img")}return e.prototype.renderInto=function(t){var n=this;this.infoIcon.alt="Info icon",this.infoIcon.src=zx,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(r){return n.onHoverIn()},this.infoIcon.onmouseout=function(r){return n.onHoverOut()},this.infoIcon.onclick=function(r){return n.onClick()},t.appendChild(this.infoIcon)},e.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},e.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},e.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=NS,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=zx,this.infoIcon.style.opacity="0.6")},e}(),ES=function(){function e(){var t=this;this.infoDiv=new SS,this.infoIcon=new CS(function(){t.infoDiv.show()},function(){t.infoDiv.hide()})}return e.prototype.renderInto=function(t){this.infoDiv.renderInto(t),this.infoIcon.renderInto(t)},e}(),TS=function(e,t,n,r){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function m(A){try{x(r.next(A))}catch(N){f(N)}}function g(A){try{x(r.throw(A))}catch(N){f(N)}}function x(A){A.done?l(A.value):o(A.value).then(m,g)}x((r=r.apply(e,t||[])).next())})},_S=function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,o,l,f;return f={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function m(x){return function(A){return g([x,A])}}function g(x){if(r)throw new TypeError("Generator is already executing.");for(;f&&(f=0,x[0]&&(n=0)),n;)try{if(r=1,o&&(l=x[0]&2?o.return:x[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,x[1])).done)return l;switch(o=0,l&&(x=[x[0]&2,l.value]),x[0]){case 0:case 1:l=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,o=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!l||x[1]>l[0]&&x[1]<l[3])){n.label=x[1];break}if(x[0]===6&&n.label<l[1]){n.label=l[1],l=x;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(x);break}l[2]&&n.ops.pop(),n.trys.pop();continue}x=t.call(e,n)}catch(A){x=[6,A],o=0}finally{r=l=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},Vx=function(){function e(){}return e.hasPermissions=function(){return TS(this,void 0,void 0,function(){var t,n,r,o;return _S(this,function(l){switch(l.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(t=l.sent(),n=0,r=t;n<r.length;n++)if(o=r[n],o.kind==="videoinput"&&o.label)return[2,!0];return[2,!1]}})})},e}(),ko=function(){function e(t){this.supportedScanTypes=this.validateAndReturnScanTypes(t)}return e.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},e.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},e.prototype.isCameraScanRequired=function(){for(var t=0,n=this.supportedScanTypes;t<n.length;t++){var r=n[t];if(e.isCameraScanType(r))return!0}return!1},e.isCameraScanType=function(t){return t===gl.SCAN_TYPE_CAMERA},e.isFileScanType=function(t){return t===gl.SCAN_TYPE_FILE},e.prototype.validateAndReturnScanTypes=function(t){if(!t||t.length===0)return cs.DEFAULT_SUPPORTED_SCAN_TYPE;var n=cs.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(t.length>n)throw"Max ".concat(n," values expected for ")+"supportedScanTypes";for(var r=0,o=t;r<o.length;r++){var l=o[r];if(!cs.DEFAULT_SUPPORTED_SCAN_TYPE.includes(l))throw"Unsupported scan type ".concat(l)}return t},e}(),Ta=function(){function e(){}return e.ALL_ELEMENT_CLASS="html5-qrcode-element",e.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",e.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",e.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",e.TORCH_BUTTON_ID="html5-qrcode-button-torch",e.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",e.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",e.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",e.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",e.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",e.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",e}(),oo=function(){function e(){}return e.createElement=function(t,n){var r=document.createElement(t);return r.id=n,r.classList.add(Ta.ALL_ELEMENT_CLASS),t==="button"&&r.setAttribute("type","button"),r},e}(),Uv=function(e,t,n,r){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function m(A){try{x(r.next(A))}catch(N){f(N)}}function g(A){try{x(r.throw(A))}catch(N){f(N)}}function x(A){A.done?l(A.value):o(A.value).then(m,g)}x((r=r.apply(e,t||[])).next())})},zv=function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,o,l,f;return f={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function m(x){return function(A){return g([x,A])}}function g(x){if(r)throw new TypeError("Generator is already executing.");for(;f&&(f=0,x[0]&&(n=0)),n;)try{if(r=1,o&&(l=x[0]&2?o.return:x[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,x[1])).done)return l;switch(o=0,l&&(x=[x[0]&2,l.value]),x[0]){case 0:case 1:l=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,o=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!l||x[1]>l[0]&&x[1]<l[3])){n.label=x[1];break}if(x[0]===6&&n.label<l[1]){n.label=l[1],l=x;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(x);break}l[2]&&n.ops.pop(),n.trys.pop();continue}x=t.call(e,n)}catch(A){x=[6,A],o=0}finally{r=l=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},qx=function(){function e(t,n,r){this.isTorchOn=!1,this.torchCapability=t,this.buttonController=n,this.onTorchActionFailureCallback=r}return e.prototype.isTorchEnabled=function(){return this.isTorchOn},e.prototype.flipState=function(){return Uv(this,void 0,void 0,function(){var t,n;return zv(this,function(r){switch(r.label){case 0:this.buttonController.disable(),t=!this.isTorchOn,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.torchCapability.apply(t)];case 2:return r.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),t),[3,4];case 3:return n=r.sent(),this.propagateFailure(t,n),this.buttonController.enable(),[3,4];case 4:return[2]}})})},e.prototype.updateUiBasedOnLatestSettings=function(t,n){t===n?(this.buttonController.setText(n?qn.torchOffButton():qn.torchOnButton()),this.isTorchOn=n):this.propagateFailure(n),this.buttonController.enable()},e.prototype.propagateFailure=function(t,n){var r=t?qn.torchOnFailedMessage():qn.torchOffFailedMessage();n&&(r+="; Error = "+n),this.onTorchActionFailureCallback(r)},e.prototype.reset=function(){this.isTorchOn=!1},e}(),jS=function(){function e(t,n){this.onTorchActionFailureCallback=n,this.torchButton=oo.createElement("button",Ta.TORCH_BUTTON_ID),this.torchController=new qx(t,this,n)}return e.prototype.render=function(t,n){var r=this;this.torchButton.innerText=qn.torchOnButton(),this.torchButton.style.display=n.display,this.torchButton.style.marginLeft=n.marginLeft;var o=this;this.torchButton.addEventListener("click",function(l){return Uv(r,void 0,void 0,function(){return zv(this,function(f){switch(f.label){case 0:return[4,o.torchController.flipState()];case 1:return f.sent(),o.torchController.isTorchEnabled()?(o.torchButton.classList.remove(Ta.TORCH_BUTTON_CLASS_TORCH_OFF),o.torchButton.classList.add(Ta.TORCH_BUTTON_CLASS_TORCH_ON)):(o.torchButton.classList.remove(Ta.TORCH_BUTTON_CLASS_TORCH_ON),o.torchButton.classList.add(Ta.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),t.appendChild(this.torchButton)},e.prototype.updateTorchCapability=function(t){this.torchController=new qx(t,this,this.onTorchActionFailureCallback)},e.prototype.getTorchButton=function(){return this.torchButton},e.prototype.hide=function(){this.torchButton.style.display="none"},e.prototype.show=function(){this.torchButton.style.display="inline-block"},e.prototype.disable=function(){this.torchButton.disabled=!0},e.prototype.enable=function(){this.torchButton.disabled=!1},e.prototype.setText=function(t){this.torchButton.innerText=t},e.prototype.reset=function(){this.torchButton.innerText=qn.torchOnButton(),this.torchController.reset()},e.create=function(t,n,r,o){var l=new e(n,o);return l.render(t,r),l},e}(),IS=function(){function e(t,n,r){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=n?"block":"none",t.appendChild(this.fileBasedScanRegion);var o=document.createElement("label");o.setAttribute("for",this.getFileScanInputId()),o.style.display="inline-block",this.fileBasedScanRegion.appendChild(o),this.fileSelectionButton=oo.createElement("button",Ta.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(m){o.click()}),o.append(this.fileSelectionButton),this.fileScanInput=oo.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",o.appendChild(this.fileScanInput);var l=this;this.fileScanInput.addEventListener("change",function(m){if(!(m==null||m.target==null)){var g=m.target;if(!(g.files&&g.files.length===0)){var x=g.files,A=x[0],N=A.name;l.setImageNameToButton(N),r(A)}}});var f=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(f),this.fileBasedScanRegion.addEventListener("dragenter",function(m){l.fileBasedScanRegion.style.border=l.fileBasedScanRegionActiveBorder(),m.stopPropagation(),m.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(m){l.fileBasedScanRegion.style.border=l.fileBasedScanRegionDefaultBorder(),m.stopPropagation(),m.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(m){l.fileBasedScanRegion.style.border=l.fileBasedScanRegionActiveBorder(),m.stopPropagation(),m.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(m){m.stopPropagation(),m.preventDefault(),l.fileBasedScanRegion.style.border=l.fileBasedScanRegionDefaultBorder();var g=m.dataTransfer;if(g){var x=g.files;if(!x||x.length===0)return;for(var A=!1,N=0;N<x.length;++N){var T=x.item(N);if(T){var v=/image.*/;if(T.type.match(v)){A=!0;var O=T.name;l.setImageNameToButton(O),r(T),f.innerText=qn.dragAndDropMessage();break}}}A||(f.innerText=qn.dragAndDropMessageOnlyImages())}})}return e.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},e.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},e.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},e.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},e.prototype.createFileBasedScanRegion=function(){var t=document.createElement("div");return t.style.textAlign="center",t.style.margin="auto",t.style.width="80%",t.style.maxWidth="600px",t.style.border=this.fileBasedScanRegionDefaultBorder(),t.style.padding="10px",t.style.marginBottom="10px",t},e.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},e.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},e.prototype.createDragAndDropMessage=function(){var t=document.createElement("div");return t.innerText=qn.dragAndDropMessage(),t.style.fontWeight="400",t},e.prototype.setImageNameToButton=function(t){var n=20;if(t.length>n){var r=t.substring(0,8),o=t.length,l=t.substring(o-8,o);t="".concat(r,"....").concat(l)}var f=qn.fileSelectionChooseAnother()+" - "+t;this.fileSelectionButton.innerText=f},e.prototype.setInitialValueToButton=function(){var t=qn.fileSelectionChooseImage()+" - "+qn.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=t},e.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},e.create=function(t,n,r){var o=new e(t,n,r);return o},e}(),DS=function(){function e(t){this.selectElement=oo.createElement("select",Ta.CAMERA_SELECTION_SELECT_ID),this.cameras=t,this.options=[]}return e.prototype.render=function(t){var n=document.createElement("span");n.style.marginRight="10px";var r=this.cameras.length;if(r===0)throw new Error("No cameras found");if(r===1)n.style.display="none";else{var o=qn.selectCamera();n.innerText="".concat(o," (").concat(this.cameras.length,")  ")}for(var l=1,f=0,m=this.cameras;f<m.length;f++){var g=m[f],x=g.id,A=g.label==null?x:g.label;(!A||A==="")&&(A=[qn.anonymousCameraPrefix(),l++].join(" "));var N=document.createElement("option");N.value=x,N.innerText=A,this.options.push(N),this.selectElement.appendChild(N)}n.appendChild(this.selectElement),t.appendChild(n)},e.prototype.disable=function(){this.selectElement.disabled=!0},e.prototype.isDisabled=function(){return this.selectElement.disabled===!0},e.prototype.enable=function(){this.selectElement.disabled=!1},e.prototype.getValue=function(){return this.selectElement.value},e.prototype.hasValue=function(t){for(var n=0,r=this.options;n<r.length;n++){var o=r[n];if(o.value===t)return!0}return!1},e.prototype.setValue=function(t){if(!this.hasValue(t))throw new Error("".concat(t," is not present in the camera list."));this.selectElement.value=t},e.prototype.hasSingleItem=function(){return this.cameras.length===1},e.prototype.numCameras=function(){return this.cameras.length},e.create=function(t,n){var r=new e(n);return r.render(t),r},e}(),RS=function(){function e(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=oo.createElement("input",Ta.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return e.prototype.render=function(t,n){this.zoomElementContainer.style.display=n?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",t.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var r=qn.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(r),this.rangeText.style.marginRight="10px";var o=this;this.rangeInput.addEventListener("input",function(){return o.onValueChange()}),this.rangeInput.addEventListener("change",function(){return o.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},e.prototype.onValueChange=function(){var t=qn.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(t),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},e.prototype.setValues=function(t,n,r,o){this.rangeInput.min=t.toString(),this.rangeInput.max=n.toString(),this.rangeInput.step=o.toString(),this.rangeInput.value=r.toString(),this.onValueChange()},e.prototype.show=function(){this.zoomElementContainer.style.display="block"},e.prototype.hide=function(){this.zoomElementContainer.style.display="none"},e.prototype.setOnCameraZoomValueChangeCallback=function(t){this.onChangeCallback=t},e.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},e.create=function(t,n){var r=new e;return r.render(t,n),r},e}(),Sa;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Sa||(Sa={}));function OS(e){return{fps:e.fps,qrbox:e.qrbox,aspectRatio:e.aspectRatio,disableFlip:e.disableFlip,videoConstraints:e.videoConstraints}}function LS(e,t){return{formatsToSupport:e.formatsToSupport,useBarCodeDetectorIfSupported:e.useBarCodeDetectorIfSupported,experimentalFeatures:e.experimentalFeatures,verbose:t}}var MS=function(){function e(t,n,r){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=t,this.config=this.createConfig(n),this.verbose=r===!0,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.scanTypeSelector=new ko(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new Pv(this.verbose),this.persistedDataManager=new AS,n.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return e.prototype.render=function(t,n){var r=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(l,f){if(t)t(l,f);else{if(r.lastMatchFound===l)return;r.lastMatchFound=l,r.setHeaderMessage(qn.lastMatch(l),Sa.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(l,f){n&&n(l,f)};var o=document.getElementById(this.elementId);if(!o)throw"HTML Element with id=".concat(this.elementId," not found");o.innerHTML="",this.createBasicLayout(o),this.html5Qrcode=new Ux(this.getScanRegionId(),LS(this.config,this.verbose))},e.prototype.pause=function(t){(Ss(t)||t!==!0)&&(t=!1),this.getHtml5QrcodeOrFail().pause(t)},e.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},e.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},e.prototype.clear=function(){var t=this,n=function(){var r=document.getElementById(t.elementId);r&&(r.innerHTML="",t.resetBasicLayout(r))};return this.html5Qrcode?new Promise(function(r,o){if(!t.html5Qrcode){r();return}t.html5Qrcode.isScanning?t.html5Qrcode.stop().then(function(l){if(!t.html5Qrcode){r();return}t.html5Qrcode.clear(),n(),r()}).catch(function(l){t.verbose&&t.logger.logError("Unable to stop qrcode scanner",l),o(l)}):(t.html5Qrcode.clear(),n(),r())}):Promise.resolve()},e.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},e.prototype.applyVideoConstraints=function(t){return this.getHtml5QrcodeOrFail().applyVideoConstraints(t)},e.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},e.prototype.createConfig=function(t){return t?(t.fps||(t.fps=cs.SCAN_DEFAULT_FPS),t.rememberLastUsedCamera!==!cs.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(t.rememberLastUsedCamera=cs.DEFAULT_REMEMBER_LAST_CAMERA_USED),t.supportedScanTypes||(t.supportedScanTypes=cs.DEFAULT_SUPPORTED_SCAN_TYPE),t):{fps:cs.SCAN_DEFAULT_FPS,rememberLastUsedCamera:cs.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:cs.DEFAULT_SUPPORTED_SCAN_TYPE}},e.prototype.createBasicLayout=function(t){t.style.position="relative",t.style.padding="0px",t.style.border="1px solid silver",this.createHeader(t);var n=document.createElement("div"),r=this.getScanRegionId();n.id=r,n.style.width="100%",n.style.minHeight="100px",n.style.textAlign="center",t.appendChild(n),ko.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var o=document.createElement("div"),l=this.getDashboardId();o.id=l,o.style.width="100%",t.appendChild(o),this.setupInitialDashboard(o)},e.prototype.resetBasicLayout=function(t){t.style.border="none"},e.prototype.setupInitialDashboard=function(t){this.createSection(t),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},e.prototype.createHeader=function(t){var n=document.createElement("div");n.style.textAlign="left",n.style.margin="0px",t.appendChild(n);var r=new ES;r.renderInto(n);var o=document.createElement("div");o.id=this.getHeaderMessageContainerId(),o.style.display="none",o.style.textAlign="center",o.style.fontSize="14px",o.style.padding="2px 10px",o.style.margin="4px",o.style.borderTop="1px solid #f6f6f6",n.appendChild(o)},e.prototype.createSection=function(t){var n=document.createElement("div");n.id=this.getDashboardSectionId(),n.style.width="100%",n.style.padding="10px 0px 10px 0px",n.style.textAlign="left",t.appendChild(n)},e.prototype.createCameraListUi=function(t,n,r){var o=this;o.showHideScanTypeSwapLink(!1),o.setHeaderMessage(qn.cameraPermissionRequesting());var l=function(){r||o.createPermissionButton(t,n)};Ux.getCameras().then(function(f){o.persistedDataManager.setHasPermission(!0),o.showHideScanTypeSwapLink(!0),o.resetHeaderMessage(),f&&f.length>0?(t.removeChild(n),o.renderCameraSelection(f)):(o.setHeaderMessage(qn.noCameraFound(),Sa.STATUS_WARNING),l())}).catch(function(f){o.persistedDataManager.setHasPermission(!1),r?r.disabled=!1:l(),o.setHeaderMessage(f,Sa.STATUS_WARNING),o.showHideScanTypeSwapLink(!0)})},e.prototype.createPermissionButton=function(t,n){var r=this,o=oo.createElement("button",this.getCameraPermissionButtonId());o.innerText=qn.cameraPermissionTitle(),o.addEventListener("click",function(){o.disabled=!0,r.createCameraListUi(t,n,o)}),n.appendChild(o)},e.prototype.createPermissionsUi=function(t,n){var r=this;if(ko.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){Vx.hasPermissions().then(function(o){o?r.createCameraListUi(t,n):(r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(t,n))}).catch(function(o){r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(t,n)});return}this.createPermissionButton(t,n)},e.prototype.createSectionControlPanel=function(){var t=document.getElementById(this.getDashboardSectionId()),n=document.createElement("div");t.appendChild(n);var r=document.createElement("div");r.id=this.getDashboardSectionCameraScanRegionId(),r.style.display=ko.isCameraScanType(this.currentScanType)?"block":"none",n.appendChild(r);var o=document.createElement("div");o.style.textAlign="center",r.appendChild(o),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(r,o),this.renderFileScanUi(n)},e.prototype.renderFileScanUi=function(t){var n=ko.isFileScanType(this.currentScanType),r=this,o=function(l){if(!r.html5Qrcode)throw"html5Qrcode not defined";ko.isFileScanType(r.currentScanType)&&(r.setHeaderMessage(qn.loadingImage()),r.html5Qrcode.scanFileV2(l,!0).then(function(f){r.resetHeaderMessage(),r.qrCodeSuccessCallback(f.decodedText,f)}).catch(function(f){r.setHeaderMessage(f,Sa.STATUS_WARNING),r.qrCodeErrorCallback(f,kv.createFrom(f))}))};this.fileSelectionUi=IS.create(t,n,o)},e.prototype.renderCameraSelection=function(t){var n=this,r=this,o=document.getElementById(this.getDashboardSectionCameraScanRegionId());o.style.textAlign="center";var l=RS.create(o,!1),f=function(D){var P=D.zoomFeature();if(P.isSupported()){l.setOnCameraZoomValueChangeCallback(function(E){P.apply(E)});var C=1;n.config.defaultZoomValueIfSupported&&(C=n.config.defaultZoomValueIfSupported),C=$A(C,P.min(),P.max()),l.setValues(P.min(),P.max(),C,P.step()),l.show()}},m=DS.create(o,t),g=document.createElement("span"),x=oo.createElement("button",Ta.CAMERA_START_BUTTON_ID);x.innerText=qn.scanButtonStartScanningText(),g.appendChild(x);var A=oo.createElement("button",Ta.CAMERA_STOP_BUTTON_ID);A.innerText=qn.scanButtonStopScanningText(),A.style.display="none",A.disabled=!0,g.appendChild(A);var N,T=function(D){if(!D.torchFeature().isSupported()){N&&N.hide();return}N?N.updateTorchCapability(D.torchFeature()):N=jS.create(g,D.torchFeature(),{display:"none",marginLeft:"5px"},function(P){r.setHeaderMessage(P,Sa.STATUS_WARNING)}),N.show()};o.appendChild(g);var v=function(D){D||(x.style.display="none"),x.innerText=qn.scanButtonStartScanningText(),x.style.opacity="1",x.disabled=!1,D&&(x.style.display="inline-block")};if(x.addEventListener("click",function(D){x.innerText=qn.scanButtonScanningStarting(),m.disable(),x.disabled=!0,x.style.opacity="0.5",n.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!1),r.resetHeaderMessage();var P=m.getValue();r.persistedDataManager.setLastUsedCameraId(P),r.html5Qrcode.start(P,OS(r.config),r.qrCodeSuccessCallback,r.qrCodeErrorCallback).then(function(C){A.disabled=!1,A.style.display="inline-block",v(!1);var E=r.html5Qrcode.getRunningTrackCameraCapabilities();n.config.showTorchButtonIfSupported===!0&&T(E),n.config.showZoomSliderIfSupported===!0&&f(E)}).catch(function(C){r.showHideScanTypeSwapLink(!0),m.enable(),v(!0),r.setHeaderMessage(C,Sa.STATUS_WARNING)})}),m.hasSingleItem()&&x.click(),A.addEventListener("click",function(D){if(!r.html5Qrcode)throw"html5Qrcode not defined";A.disabled=!0,r.html5Qrcode.stop().then(function(P){n.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!0),m.enable(),x.disabled=!1,A.style.display="none",x.style.display="inline-block",N&&(N.reset(),N.hide()),l.removeOnCameraZoomValueChangeCallback(),l.hide(),r.insertCameraScanImageToScanRegion()}).catch(function(P){A.disabled=!1,r.setHeaderMessage(P,Sa.STATUS_WARNING)})}),r.persistedDataManager.getLastUsedCameraId()){var O=r.persistedDataManager.getLastUsedCameraId();m.hasValue(O)?(m.setValue(O),x.click()):r.persistedDataManager.resetLastUsedCameraId()}},e.prototype.createSectionSwap=function(){var t=this,n=qn.textIfCameraScanSelected(),r=qn.textIfFileScanSelected(),o=document.getElementById(this.getDashboardSectionId()),l=document.createElement("div");l.style.textAlign="center";var f=oo.createElement("span",this.getDashboardSectionSwapLinkId());f.style.textDecoration="underline",f.style.cursor="pointer",f.innerText=ko.isCameraScanType(this.currentScanType)?n:r,f.addEventListener("click",function(){if(!t.sectionSwapAllowed){t.verbose&&t.logger.logError("Section swap called when not allowed");return}t.resetHeaderMessage(),t.fileSelectionUi.resetValue(),t.sectionSwapAllowed=!1,ko.isCameraScanType(t.currentScanType)?(t.clearScanRegion(),t.getCameraScanRegion().style.display="none",t.fileSelectionUi.show(),f.innerText=r,t.currentScanType=gl.SCAN_TYPE_FILE,t.insertFileScanImageToScanRegion()):(t.clearScanRegion(),t.getCameraScanRegion().style.display="block",t.fileSelectionUi.hide(),f.innerText=n,t.currentScanType=gl.SCAN_TYPE_CAMERA,t.insertCameraScanImageToScanRegion(),t.startCameraScanIfPermissionExistsOnSwap()),t.sectionSwapAllowed=!0}),l.appendChild(f),o.appendChild(l)},e.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var t=this,n=this;if(this.persistedDataManager.hasCameraPermissions()){Vx.hasPermissions().then(function(r){if(r){var o=document.getElementById(n.getCameraPermissionButtonId());if(!o)throw t.logger.logError("Permission button not found, fail;"),"Permission button not found";o.click()}else n.persistedDataManager.setHasPermission(!1)}).catch(function(r){n.persistedDataManager.setHasPermission(!1)});return}},e.prototype.resetHeaderMessage=function(){var t=document.getElementById(this.getHeaderMessageContainerId());t.style.display="none"},e.prototype.setHeaderMessage=function(t,n){n||(n=Sa.STATUS_DEFAULT);var r=this.getHeaderMessageDiv();switch(r.innerText=t,r.style.display="block",n){case Sa.STATUS_SUCCESS:r.style.background="rgba(106, 175, 80, 0.26)",r.style.color="#477735";break;case Sa.STATUS_WARNING:r.style.background="rgba(203, 36, 49, 0.14)",r.style.color="#cb2431";break;case Sa.STATUS_DEFAULT:default:r.style.background="rgba(0, 0, 0, 0)",r.style.color="rgb(17, 17, 17)";break}},e.prototype.showHideScanTypeSwapLink=function(t){this.scanTypeSelector.hasMoreThanOneScanType()&&(t!==!0&&(t=!1),this.sectionSwapAllowed=t,this.getDashboardSectionSwapLink().style.display=t?"inline-block":"none")},e.prototype.insertCameraScanImageToScanRegion=function(){var t=this,n=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){n.innerHTML="<br>",n.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(r){n.innerHTML="<br>",n.appendChild(t.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=vS,this.cameraScanImage.alt=qn.cameraScanAltText()},e.prototype.insertFileScanImageToScanRegion=function(){var t=this,n=document.getElementById(this.getScanRegionId());if(this.fileScanImage){n.innerHTML="<br>",n.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(r){n.innerHTML="<br>",n.appendChild(t.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=wS,this.fileScanImage.alt=qn.fileScanAltText()},e.prototype.clearScanRegion=function(){var t=document.getElementById(this.getScanRegionId());t.innerHTML=""},e.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},e.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},e.prototype.getDashboardSectionSwapLinkId=function(){return Ta.SCAN_TYPE_CHANGE_ANCHOR_ID},e.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},e.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},e.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},e.prototype.getCameraPermissionButtonId=function(){return Ta.CAMERA_PERMISSION_BUTTON_ID},e.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},e.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},e.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},e}();const kS=({onScanSuccess:e})=>(me.useEffect(()=>{const t=new MS("reader",{fps:10,qrbox:{width:250,height:250}},!1),n=o=>{t.clear(),e(o)},r=o=>{};return t.render(n,r),()=>{t&&t.getState()!==Er.NOT_STARTED&&t.clear().catch(o=>{console.error("Failed to clear html5-qrcode-scanner.",o)})}},[e]),a.jsx("div",{id:"reader",className:"w-full"})),PS=({setActiveView:e})=>{const{currentUser:t,shipments:n,users:r,updateShipmentStatus:o,addToast:l,sendDeliveryVerificationCode:f,verifyDelivery:m}=Sn(),[g,x]=me.useState(!1),[A,N]=me.useState(null),[T,v]=me.useState(!1),[O,D]=me.useState(null),[P,C]=me.useState("Recipient Unreachable"),[E,j]=me.useState(null),V=me.useRef({}),[W,ie]=me.useState(null),[B,R]=me.useState("send"),[M,Z]=me.useState(""),[F,k]=me.useState(!1),[Q,J]=me.useState(""),[G,Y]=me.useState("all"),[z,X]=me.useState(""),te=me.useMemo(()=>r.filter(Oe=>(Oe.roles||[]).includes(zt.CLIENT)),[r]),[ge,ue]=me.useState(!1),[L,q]=me.useState(null),ee=me.useRef(null),fe=me.useRef(null);if(!t)return null;const ae=me.useMemo(()=>{let Oe=n.filter(Ze=>Ze.courierId===t.id&&![tt.DELIVERED,tt.DELIVERY_FAILED].includes(Ze.status));if(Q){const Ze=Q.toLowerCase();Oe=Oe.filter(pt=>pt.id.toLowerCase().includes(Ze)||pt.recipientName.toLowerCase().includes(Ze)||pt.toAddress.street.toLowerCase().includes(Ze)||pt.toAddress.zone.toLowerCase().includes(Ze))}return G!=="all"&&(Oe=Oe.filter(Ze=>Ze.clientId===G)),z&&(Oe=Oe.filter(Ze=>Ze.creationDate.startsWith(z))),Oe},[n,t.id,Q,G,z]),Ee=ae.filter(Oe=>Oe.paymentMethod===Rn.COD).reduce((Oe,Ze)=>Oe+(Number(Ze.price)||0),0),we=n.filter(Oe=>Oe.courierId===t.id&&Oe.status===tt.DELIVERED),xe=we.filter(Oe=>Oe.paymentMethod===Rn.COD).reduce((Oe,Ze)=>Oe+(Number(Ze.price)||0),0),Me=ae.length,_e=(Oe,Ze)=>{o(Oe,Ze)},Qe=me.useCallback(()=>{L&&L.getTracks().forEach(Oe=>Oe.stop()),q(null),ue(!1)},[L]),Be=async()=>{Qe();try{const Oe=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});ee.current&&(ee.current.srcObject=Oe),q(Oe),ue(!0)}catch(Oe){console.error("Error accessing camera:",Oe),l("Could not access camera. Please check permissions.","error")}},ft=()=>{if(ee.current&&fe.current){const Oe=ee.current,Ze=fe.current;Ze.width=Oe.videoWidth,Ze.height=Oe.videoHeight;const pt=Ze.getContext("2d");if(pt){pt.drawImage(Oe,0,0,Ze.width,Ze.height);const St=Ze.toDataURL("image/jpeg",.9);j(St),Qe()}}},ke=()=>{j(null),Be()};me.useEffect(()=>{T||Qe()},[T,Qe]);const he=Oe=>{D(Oe),C("Recipient Unreachable"),j(null),v(!0)},ot=()=>{O&&P&&(o(O.id,tt.DELIVERY_FAILED,{failureReason:P,failurePhoto:E}),v(!1),D(null))},ze=Oe=>{ie(Oe),R("send"),Z(""),k(!1)},Pe=()=>{ie(null)},ct=async()=>{if(!W)return;k(!0),await f(W.id)&&R("verify"),k(!1)},We=async()=>{if(!W||M.length!==6)return;k(!0),await m(W.id,M)&&Pe(),k(!1)},mt=me.useCallback(Oe=>{if(x(!1),ae.find(pt=>pt.id===Oe)){l(`Scanned: ${Oe}. Task is ready.`,"success");const pt=V.current[Oe];pt&&(pt.scrollIntoView({behavior:"smooth",block:"center"}),N(Oe),setTimeout(()=>N(null),3e3))}else l(`Scanned code ${Oe} not found in your current tasks.`,"error")},[ae,l]),Ue={[tt.ASSIGNED_TO_COURIER]:{label:"Start Delivery",nextStatus:tt.OUT_FOR_DELIVERY},[tt.OUT_FOR_DELIVERY]:null},it=({task:Oe})=>a.jsxs("div",{className:"card p-5 flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-mono text-sm text-muted-foreground",children:Oe.id}),a.jsxs("p",{className:"text-lg font-bold text-foreground",children:["Deliver to: ",Oe.recipientName]}),a.jsxs("p",{className:"text-muted-foreground",children:[Oe.toAddress.street,", ",Oe.toAddress.zone]}),a.jsxs("p",{className:"text-sm font-semibold text-foreground mt-1",children:["Payment: ",Oe.paymentMethod," (",(Number(Oe.price)||0)>0?`${(Number(Oe.price)||0).toFixed(2)} EGP`:"Pre-Paid",")"]})]}),a.jsxs("div",{className:"flex flex-col md:flex-row items-stretch md:items-center gap-3 w-full md:w-auto",children:[a.jsx("div",{className:"flex-grow",children:a.jsx(Xd,{status:Oe.status})}),a.jsxs(a.Fragment,{children:[Ue[Oe.status]&&a.jsx("button",{onClick:()=>_e(Oe.id,Ue[Oe.status].nextStatus),className:"px-4 py-2 bg-primary text-primary-foreground font-semibold rounded-lg hover:bg-primary/90 transition w-full md:w-auto",children:Ue[Oe.status].label}),Oe.status===tt.OUT_FOR_DELIVERY&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>ze(Oe),className:"px-4 py-2 bg-green-500 text-white font-semibold rounded-lg hover:bg-green-600 transition w-full md:w-auto",children:"Verify & Deliver"}),a.jsx("button",{onClick:()=>he(Oe),className:"px-4 py-2 bg-red-500 text-white font-semibold rounded-lg hover:bg-red-600 transition w-full md:w-auto",children:"Delivery Failed"})]})]})]})]});return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"My Delivery Tasks"}),a.jsxs("button",{onClick:()=>x(!0),className:"flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground font-semibold rounded-lg hover:bg-primary/90 transition",children:[a.jsx(I6,{className:"w-5 h-5"}),"Scan Package"]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(Rt,{title:"Cash to Collect",value:`${(Number(Ee)||0).toFixed(2)} EGP`,icon:a.jsx(ua,{className:"w-7 h-7"}),color:"#f97316",subtitle:`${ae.filter(Oe=>Oe.paymentMethod===Rn.COD).length} COD packages`}),a.jsx(Rt,{title:"Total COD Collected",value:`${(Number(xe)||0).toFixed(2)} EGP`,icon:a.jsx(uu,{className:"w-7 h-7"}),color:"#16a34a",subtitle:`From ${we.filter(Oe=>Oe.paymentMethod===Rn.COD).length} completed deliveries`,onClick:()=>e("completed-orders")}),a.jsx(Rt,{title:"Pending Deliveries",value:Me,icon:a.jsx(Xi,{className:"w-7 h-7"}),color:"#3b82f6",subtitle:"Currently assigned"}),a.jsx(Rt,{title:"Total Deliveries",value:we.length,icon:a.jsx(Ls,{className:"w-7 h-7"}),color:"#8b5cf6",subtitle:"All time completed",onClick:()=>e("completed-orders")})]}),a.jsxs("div",{className:"card p-4 flex flex-col md:flex-row gap-4 flex-wrap",children:[a.jsx("input",{type:"text",placeholder:"Search by ID, recipient, address...",value:Q,onChange:Oe=>J(Oe.target.value),className:"flex-grow px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background"}),a.jsxs("select",{value:G,onChange:Oe=>Y(Oe.target.value==="all"?"all":Number(Oe.target.value)),className:"w-full md:w-auto px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background",children:[a.jsx("option",{value:"all",children:"Filter by Client"}),te.map(Oe=>a.jsx("option",{value:Oe.id,children:Oe.name},Oe.id))]}),a.jsx("input",{type:"date",value:z,onChange:Oe=>X(Oe.target.value),className:"w-full md:w-auto px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary","aria-label":"Filter by creation date"})]}),a.jsxs("div",{className:"space-y-4",children:[ae.length===0&&a.jsx("p",{className:"text-muted-foreground card p-4",children:"You have no active tasks matching the current filters."}),ae.map(Oe=>a.jsx("div",{ref:Ze=>{V.current[Oe.id]=Ze},className:`rounded-xl transition-all duration-500 ${A===Oe.id?"ring-4 ring-primary ring-offset-2":""}`,children:a.jsx(it,{task:Oe})},Oe.id))]}),a.jsx(dr,{isOpen:g,onClose:()=>x(!1),title:"Scan Package Barcode",children:a.jsx("div",{className:"w-full h-96 flex justify-center items-center",children:g&&a.jsx(kS,{onScanSuccess:mt})})}),a.jsx(dr,{isOpen:T,onClose:()=>v(!1),title:"Delivery Failed - Please Provide Reason",children:O&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-secondary p-4 rounded-lg",children:[a.jsxs("p",{className:"font-semibold text-foreground",children:["Shipment: ",O.id]}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["To: ",O.recipientName]}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:[O.toAddress.street,", ",O.toAddress.zone]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Reason for delivery failure *"}),a.jsxs("select",{value:P,onChange:Oe=>C(Oe.target.value),className:"w-full px-3 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background",children:[a.jsx("option",{value:"Recipient Unreachable",children:"Recipient Unreachable"}),a.jsx("option",{value:"Cancelled by Client",children:"Cancelled by Client"}),a.jsx("option",{value:"Order Lost",children:"Order Lost"}),a.jsx("option",{value:"Damaged Package",children:"Damaged Package"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Evidence Photo (Optional)"}),a.jsxs("div",{className:"w-full p-4 bg-secondary rounded-lg",children:[!ge&&!E&&a.jsxs("button",{type:"button",onClick:Be,className:"w-full flex flex-col items-center justify-center p-6 border-2 border-dashed border-border rounded-lg text-muted-foreground hover:bg-accent hover:border-primary transition",children:[a.jsx(R6,{className:"w-10 h-10 mb-2"}),a.jsx("span",{className:"font-semibold",children:"Take Photo"})]}),ge&&a.jsxs("div",{className:"space-y-3",children:[a.jsx("video",{ref:ee,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full rounded-lg bg-slate-900 aspect-video object-cover"}),a.jsx("canvas",{ref:fe,className:"hidden"}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{type:"button",onClick:ft,className:"flex-1 px-4 py-2 bg-primary text-primary-foreground font-semibold rounded-lg hover:bg-primary/90",children:"Capture"}),a.jsx("button",{type:"button",onClick:Qe,className:"px-4 py-2 bg-secondary text-secondary-foreground font-semibold rounded-lg hover:bg-accent",children:"Cancel"})]})]}),!ge&&E&&a.jsxs("div",{className:"space-y-3 text-center",children:[a.jsx("img",{src:E,alt:"Failure preview",className:"rounded-lg max-h-64 mx-auto"}),a.jsx("button",{type:"button",onClick:ke,className:"px-4 py-2 bg-foreground text-background font-semibold rounded-lg hover:bg-foreground/90",children:"Retake Photo"})]})]})]}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx("button",{onClick:()=>v(!1),className:"px-4 py-2 bg-secondary text-secondary-foreground rounded-lg hover:bg-accent",children:"Cancel"}),a.jsx("button",{onClick:ot,disabled:!P,className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 disabled:bg-muted disabled:cursor-not-allowed",children:"Mark as Failed"})]})]})}),a.jsx(dr,{isOpen:!!W,onClose:Pe,title:"Confirm Delivery with Recipient",children:W&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-secondary p-4 rounded-lg",children:[a.jsxs("p",{className:"font-semibold text-foreground",children:["Shipment: ",W.id]}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Recipient: ",W.recipientName]}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Phone: ",W.recipientPhone]})]}),B==="send"?a.jsxs("div",{children:[a.jsx("p",{className:"mb-4",children:"Click below to send a 6-digit verification code to the recipient's phone number."}),a.jsx("button",{onClick:ct,disabled:F,className:"w-full px-4 py-2 bg-primary text-primary-foreground font-semibold rounded-lg hover:bg-primary/90 disabled:bg-muted",children:F?"Sending...":"Send Code to Recipient"})]}):a.jsxs("div",{children:[a.jsx("p",{className:"mb-2",children:"Enter the 6-digit code received by the recipient."}),a.jsx("input",{type:"text",value:M,onChange:Oe=>Z(Oe.target.value),maxLength:6,placeholder:"123456",className:"w-full text-center tracking-[1em] font-mono text-2xl px-4 py-2 border border-border rounded-lg bg-background"}),a.jsx("button",{onClick:We,disabled:F||M.length!==6,className:"w-full mt-4 px-4 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 disabled:bg-muted",children:F?"Verifying...":"Confirm Delivery"})]})]})})]})},FS=()=>{const{users:e,addUser:t,updateUser:n,removeUser:r,resetPassword:o,currentUser:l,hasPermission:f,updateClientTaxCard:m,getTaxCardNumber:g,addToast:x,customRoles:A,updateClientTier:N}=Sn(),[T,v]=me.useState(null),[O,D]=me.useState(null),[P,C]=me.useState({}),[E,j]=me.useState(""),[V,W]=me.useState({[an.STANDARD]:100,[an.URGENT]:150,[an.EXPRESS]:200}),[ie,B]=me.useState(null),[R,M]=me.useState(""),[Z,F]=me.useState("all"),k=me.useMemo(()=>e.filter(xe=>{const Me=R.trim()===""||xe.name.toLowerCase().includes(R.toLowerCase())||xe.email.toLowerCase().includes(R.toLowerCase())||xe.publicId.toLowerCase().includes(R.toLowerCase()),_e=Z==="all"||(xe.roles||[]).some(Qe=>Qe===Z);return Me&&_e}),[e,R,Z]);if(!l||!f(Ut.MANAGE_USERS))return a.jsx("div",{className:"flex items-center justify-center h-96",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:"Access Denied"}),a.jsx("p",{className:"text-muted-foreground",children:"You do not have permission to manage users."})]})});const Q=()=>{var xe,Me;return(xe=l==null?void 0:l.roles)!=null&&xe.includes(zt.ADMIN)?A:(Me=l==null?void 0:l.roles)!=null&&Me.includes(zt.SUPER_USER)?A.filter(_e=>_e.name!==zt.ADMIN):[]},J=xe=>xe==="Cairo"?Rr.GreaterCairo.Cairo:xe==="Giza"?Rr.GreaterCairo.Giza:xe==="Alexandria"?Rr.Alexandria:xe==="Other"?Rr.Other:[],G=Q(),Y=(xe,Me)=>{var ke,he,ot,ze;if((xe==="taxCard"||xe==="priorityPricing"||xe==="tier"||xe==="address")&&!((ke=l==null?void 0:l.roles)!=null&&ke.includes(zt.ADMIN))&&!((he=l==null?void 0:l.roles)!=null&&he.includes(zt.SUPER_USER))){x("Only administrators and super users can manage client settings","error");return}const _e=(ot=Me==null?void 0:Me.roles)==null?void 0:ot.includes(zt.ADMIN),Qe=(ze=l==null?void 0:l.roles)==null?void 0:ze.includes(zt.SUPER_USER);if((xe==="edit"||xe==="delete"||xe==="reset")&&_e&&Qe){x("Super users cannot modify administrator accounts","error");return}v(xe),D(Me||null);const Be=A.find(Pe=>Pe.name===zt.CLIENT),ft={street:"",city:"Cairo",zone:Rr.GreaterCairo.Cairo[0],details:""};if(C(Me?{...Me,address:Me.address||ft}:{roles:Be?[Be.name]:[],zones:[],flatRateFee:75,address:ft,priorityMultipliers:{[an.STANDARD]:1,[an.URGENT]:1.5,[an.EXPRESS]:2}}),xe==="taxCard"&&Me&&j(g(Me.id)||""),xe==="priorityPricing"&&Me){const Pe=Me.priorityMultipliers||{[an.STANDARD]:1,[an.URGENT]:1.5,[an.EXPRESS]:2};W({[an.STANDARD]:Pe[an.STANDARD]*100,[an.URGENT]:Pe[an.URGENT]*100,[an.EXPRESS]:Pe[an.EXPRESS]*100})}xe==="tier"&&Me&&B(Me.partnerTier||null)},z=()=>{v(null),D(null),C({})},X=xe=>{const{name:Me,value:_e}=xe.target;C(Qe=>({...Qe,[Me]:_e}))},te=xe=>{const{name:Me,value:_e}=xe.target;C(Qe=>{const ft={...Qe.address||{street:"",city:"Cairo",zone:"",details:""},[Me]:_e};if(Me==="city"){const ke=J(_e);ft.zone=ke[0]||""}return{...Qe,address:ft}})},ge=(xe,Me)=>{C(_e=>{const Qe=_e.roles||[];return Me?{..._e,roles:[...Qe,xe]}:{..._e,roles:Qe.filter(Be=>Be!==xe)}})},ue=(xe,Me)=>{C(_e=>{const Qe=_e.zones||[];return Me?{..._e,zones:[...Qe,xe]}:{..._e,zones:Qe.filter(Be=>Be!==xe)}})},L=xe=>{if(xe.preventDefault(),T==="add")t(P);else if(T==="edit"&&O)n(O.id,P);else if(T==="address"&&O)n(O.id,{address:P.address});else if(T==="reset"&&O&&P.password)o(O.id,P.password);else if(T==="taxCard"&&O){ee();return}else if(T==="priorityPricing"&&O){fe();return}else if(T==="tier"&&O){q();return}z()},q=()=>{O&&(N(O.id,ie),x(`Tier updated for ${O.name}`,"success"),z())},ee=()=>{var Me,_e;if(!O)return;if(!((Me=l==null?void 0:l.roles)!=null&&Me.includes(zt.ADMIN))&&!((_e=l==null?void 0:l.roles)!=null&&_e.includes(zt.SUPER_USER))){x("Only administrators and super users can manage tax card numbers","error"),z();return}if(E&&!/^\d{3}-\d{3}-\d{3}$/.test(E)){x("Tax card number must be in format XXX-XXX-XXX","error");return}m(O.id,E),x(`Tax card number updated for ${O.name}`,"success"),z()},fe=()=>{var Me,_e;if(!O)return;if(!((Me=l==null?void 0:l.roles)!=null&&Me.includes(zt.ADMIN))&&!((_e=l==null?void 0:l.roles)!=null&&_e.includes(zt.SUPER_USER))){x("Only administrators and super users can manage priority pricing","error"),z();return}const xe={[an.STANDARD]:V[an.STANDARD]/100,[an.URGENT]:V[an.URGENT]/100,[an.EXPRESS]:V[an.EXPRESS]/100};if(xe[an.STANDARD]<=0||xe[an.URGENT]<=0||xe[an.EXPRESS]<=0){x("All priority percentages must be positive numbers","error");return}n(O.id,{priorityMultipliers:xe}),x(`Priority pricing updated for ${O.name}`,"success"),z()},ae=()=>{O&&r(O.id),z()},Ee=()=>{const xe=["Public ID","Name","Email","Roles","Zones","Wallet Balance (EGP)"],Me=k.map(_e=>{var Qe;return[_e.publicId,_e.name,_e.email,(_e.roles||[]).join(", "),((Qe=_e.zones)==null?void 0:Qe.join(", "))||"N/A",_e.walletBalance!=null?(Number(_e.walletBalance)||0).toFixed(2):"N/A"]});Ei(xe,Me,"User_List_Export")},we=()=>{var xe,Me,_e,Qe,Be,ft,ke;if(T==="delete"&&O)return a.jsxs("div",{children:[a.jsxs("p",{children:["Are you sure you want to delete the user ",a.jsx("strong",{children:O.name}),"? This action cannot be undone."]}),a.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[a.jsx("button",{onClick:z,className:"px-4 py-2 bg-secondary rounded-lg font-semibold",children:"Cancel"}),a.jsx("button",{onClick:ae,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-semibold",children:"Delete User"})]})]});if(T==="reset"&&O)return a.jsxs("form",{onSubmit:L,className:"space-y-4",children:[a.jsxs("p",{children:["Resetting password for ",a.jsx("strong",{children:O.name}),"."]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"reset-password",className:"block text-sm font-medium text-muted-foreground mb-1",children:"New Password"}),a.jsx("input",{id:"reset-password",type:"password",name:"password",onChange:X,className:"w-full px-4 py-2 border border-border rounded-lg bg-background",required:!0})]}),a.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[a.jsx("button",{type:"button",onClick:z,className:"px-4 py-2 bg-secondary rounded-lg font-semibold",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg font-semibold",children:"Reset Password"})]})]});if(T==="address"&&O){const he=J(((xe=P.address)==null?void 0:xe.city)||"Cairo");return a.jsxs("form",{onSubmit:L,className:"space-y-4",children:[a.jsxs("p",{children:["Editing default pickup address for ",a.jsx("strong",{children:O.name}),"."]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"address-street",className:"block text-sm font-medium text-muted-foreground mb-1",children:"Street Address"}),a.jsx("input",{id:"address-street",type:"text",name:"street",value:((Me=P.address)==null?void 0:Me.street)||"",onChange:te,className:"w-full p-2 border border-border rounded bg-background"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"address-city",className:"block text-sm font-medium text-muted-foreground mb-1",children:"City"}),a.jsxs("select",{id:"address-city",name:"city",value:((_e=P.address)==null?void 0:_e.city)||"Cairo",onChange:te,className:"w-full p-2 border border-border rounded bg-background",children:[a.jsx("option",{value:"Cairo",children:"Cairo"}),a.jsx("option",{value:"Giza",children:"Giza"}),a.jsx("option",{value:"Alexandria",children:"Alexandria"}),a.jsx("option",{value:"Other",children:"Other"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"address-zone",className:"block text-sm font-medium text-muted-foreground mb-1",children:"Zone"}),a.jsx("select",{id:"address-zone",name:"zone",value:((Qe=P.address)==null?void 0:Qe.zone)||"",onChange:te,className:"w-full p-2 border border-border rounded bg-background",children:he.map(ot=>a.jsx("option",{value:ot,children:ot},ot))})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"address-details",className:"block text-sm font-medium text-muted-foreground mb-1",children:"Address Details (Apt, Floor)"}),a.jsx("input",{id:"address-details",type:"text",name:"details",value:((Be=P.address)==null?void 0:Be.details)||"",onChange:te,className:"w-full p-2 border border-border rounded bg-background"})]}),a.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[a.jsx("button",{type:"button",onClick:z,className:"px-4 py-2 bg-secondary rounded-lg font-semibold",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg font-semibold",children:"Save Address"})]})]})}if(T==="tier"&&O)return a.jsxs("form",{onSubmit:L,className:"space-y-4",children:[a.jsxs("p",{children:["Manually assign a partner tier for ",a.jsx("strong",{children:O.name}),"."]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"partner-tier",className:"block text-sm font-medium text-muted-foreground mb-1",children:"Partner Tier"}),a.jsxs("select",{id:"partner-tier",value:ie||"auto",onChange:he=>B(he.target.value==="auto"?null:he.target.value),className:"w-full px-4 py-2 border border-border rounded-lg bg-background",children:[a.jsx("option",{value:"auto",children:"Automatic (Based on shipments)"}),Object.values(Yi).map(he=>a.jsx("option",{value:he,children:he},he))]}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Manual assignment overrides the automatic tier calculation."})]}),a.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[a.jsx("button",{type:"button",onClick:z,className:"px-4 py-2 bg-secondary rounded-lg font-semibold",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg font-semibold",children:"Save Tier"})]})]});if(T==="priorityPricing"&&O){const he=(ot,ze)=>{W(Pe=>({...Pe,[ot]:parseFloat(ze)||0}))};return a.jsxs("form",{onSubmit:L,className:"space-y-4",children:[a.jsxs("p",{children:["Set custom priority fee percentages for ",a.jsx("strong",{children:O.name})," (e.g., 100 for standard rate, 150 for a 1.5x fee)."]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"priority-standard",className:"block text-sm font-medium text-muted-foreground mb-1",children:[an.STANDARD," (%)"]}),a.jsx("input",{id:"priority-standard",type:"number",min:"0",value:V[an.STANDARD],onChange:ot=>he(an.STANDARD,ot.target.value),className:"w-full p-2 border border-border rounded bg-background"})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"priority-urgent",className:"block text-sm font-medium text-muted-foreground mb-1",children:[an.URGENT," (%)"]}),a.jsx("input",{id:"priority-urgent",type:"number",min:"0",value:V[an.URGENT],onChange:ot=>he(an.URGENT,ot.target.value),className:"w-full p-2 border border-border rounded bg-background"})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"priority-express",className:"block text-sm font-medium text-muted-foreground mb-1",children:[an.EXPRESS," (%)"]}),a.jsx("input",{id:"priority-express",type:"number",min:"0",value:V[an.EXPRESS],onChange:ot=>he(an.EXPRESS,ot.target.value),className:"w-full p-2 border border-border rounded bg-background"})]}),a.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[a.jsx("button",{type:"button",onClick:z,className:"px-4 py-2 bg-secondary rounded-lg font-semibold",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg font-semibold",children:"Save Pricing"})]})]})}if(T==="add"||T==="edit"){const he=(P.roles||[]).includes(zt.COURIER),ot=(P.roles||[]).includes(zt.CLIENT);return a.jsxs("form",{onSubmit:L,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"user-name",className:"block text-sm font-medium text-muted-foreground mb-1",children:"Full Name"}),a.jsx("input",{id:"user-name",type:"text",name:"name",value:P.name||"",onChange:X,className:"w-full px-4 py-2 border border-border rounded-lg bg-background",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"user-email",className:"block text-sm font-medium text-muted-foreground mb-1",children:"Email"}),a.jsx("input",{id:"user-email",type:"email",name:"email",value:P.email||"",onChange:X,className:"w-full px-4 py-2 border border-border rounded-lg bg-background",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"user-phone",className:"block text-sm font-medium text-muted-foreground mb-1",children:"Phone Number"}),a.jsx("input",{id:"user-phone",type:"tel",name:"phone",value:P.phone||"",onChange:X,className:"w-full px-4 py-2 border border-border rounded-lg bg-background",placeholder:"01xxxxxxxxx"})]}),T==="add"&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"user-password",className:"block text-sm font-medium text-muted-foreground mb-1",children:"Password"}),a.jsx("input",{id:"user-password",type:"password",name:"password",onChange:X,className:"w-full px-4 py-2 border border-border rounded-lg bg-background",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-2",children:"Roles"}),a.jsx("div",{className:"grid grid-cols-2 gap-3 p-3 bg-secondary rounded-lg",children:G.map(ze=>a.jsxs("label",{htmlFor:`role-${ze.id}`,className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{id:`role-${ze.id}`,type:"checkbox",checked:(P.roles||[]).includes(ze.name),onChange:Pe=>ge(ze.name,Pe.target.checked),className:"h-4 w-4 rounded border-border text-primary focus:ring-primary"}),a.jsx("span",{children:ze.name})]},ze.id))})]}),he&&a.jsxs("div",{className:"p-4 border border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-900/10 rounded-lg space-y-4",children:[a.jsx("h4",{className:"font-semibold text-blue-800 dark:text-blue-300",children:"Courier Settings"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-2",children:"Assigned Zones"}),a.jsx("div",{className:"max-h-48 overflow-y-auto space-y-2 p-2 bg-background rounded",children:Object.entries(Rr.GreaterCairo).map(([ze,Pe])=>a.jsxs("div",{children:[a.jsx("h5",{className:"font-semibold text-muted-foreground mt-2 px-1",children:ze}),a.jsx("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 p-1",children:Pe.map(ct=>a.jsxs("label",{className:"flex items-center gap-2 text-sm text-foreground cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:(P.zones||[]).includes(ct),onChange:We=>ue(ct,We.target.checked),className:"h-4 w-4 rounded border-border text-primary focus:ring-primary"}),a.jsx("span",{children:ct})]},ct))})]},ze))})]}),T==="add"&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"user-referrer",className:"block text-sm font-medium text-muted-foreground mb-1",children:"Referred By (Optional)"}),a.jsxs("select",{id:"user-referrer",name:"referrerId",value:P.referrerId||"",onChange:X,className:"w-full px-4 py-2 border border-border rounded-lg bg-background",children:[a.jsx("option",{value:"",children:"No Referrer"}),e.filter(ze=>(ze.roles||[]).includes(zt.COURIER)).map(ze=>a.jsx("option",{value:ze.id,children:ze.name},ze.id))]})]})]}),ot&&a.jsxs("div",{className:"p-4 border border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/10 rounded-lg space-y-4",children:[a.jsx("h4",{className:"font-semibold text-green-800 dark:text-green-300",children:"Client Settings"}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"client-flat-rate",className:"block text-sm font-medium text-muted-foreground mb-1",children:"Flat Rate Fee (EGP)"}),a.jsx("input",{id:"client-flat-rate",type:"number",step:"0.01",min:"0",name:"flatRateFee",value:P.flatRateFee??"",onChange:ze=>C(Pe=>({...Pe,flatRateFee:parseFloat(ze.target.value)||0})),className:"w-full px-4 py-2 border border-border rounded-lg bg-background"})]})]}),(((ft=P.roles)==null?void 0:ft.includes(zt.ADMIN))||((ke=l.roles)==null?void 0:ke.includes(zt.ADMIN)))&&P.referrerId&&a.jsxs("div",{className:"p-4 border border-purple-200 dark:border-purple-800 bg-purple-50 dark:bg-purple-900/10 rounded-lg space-y-4",children:[a.jsx("h4",{className:"font-semibold text-purple-800 dark:text-purple-300",children:"Referral Settings (for Referrer)"}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"referral-commission",className:"block text-sm font-medium text-muted-foreground mb-1",children:"Referral Commission (EGP per delivery)"}),a.jsx("input",{id:"referral-commission",type:"number",step:"0.01",min:"0",name:"referralCommission",value:P.referralCommission??"",onChange:ze=>C(Pe=>({...Pe,referralCommission:parseFloat(ze.target.value)||0})),className:"w-full px-4 py-2 border border-border rounded-lg bg-background"}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"This commission is paid to the referring courier for each successful delivery made by this new courier."})]})]}),a.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[a.jsx("button",{type:"button",onClick:z,className:"px-4 py-2 bg-secondary text-secondary-foreground rounded-lg font-semibold",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg font-semibold",children:T==="add"?"Create User":"Save Changes"})]})]})}return null};return a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"p-5 border-b border-border flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-foreground",children:"User Management"}),a.jsx("p",{className:"text-muted-foreground mt-1 text-sm",children:"Create, edit, and manage all users in the system."})]}),a.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[a.jsxs("button",{onClick:Ee,className:"w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition",children:[a.jsx(Ki,{className:"w-5 h-5"}),a.jsx("span",{className:"hidden sm:inline",children:"Export"})]}),a.jsxs("button",{onClick:()=>Y("add"),className:"w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-2 bg-primary text-primary-foreground font-semibold rounded-lg hover:bg-primary/90 transition",children:[a.jsx(fl,{className:"w-5 h-5"}),"New User"]})]})]}),a.jsxs("div",{className:"p-4 bg-secondary border-b border-border flex flex-col md:flex-row gap-4",children:[a.jsx("input",{id:"user-search",type:"text",placeholder:"Search by name, email, or ID...",value:R,onChange:xe=>M(xe.target.value),className:"w-full md:w-1/3 px-4 py-2 border border-border rounded-lg bg-background"}),a.jsxs("select",{id:"role-filter",value:Z,onChange:xe=>F(xe.target.value),className:"w-full md:w-1/3 px-4 py-2 border border-border rounded-lg bg-background",children:[a.jsx("option",{value:"all",children:"Filter by Role"}),A.map(xe=>a.jsx("option",{value:xe.name,children:xe.name},xe.id))]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"User"}),a.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Roles"}),a.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider hidden md:table-cell",children:"Details"}),a.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-border",children:k.map(xe=>{var Me;return a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-secondary flex items-center justify-center",children:a.jsx(Gg,{className:"w-6 h-6 text-muted-foreground"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-foreground",children:xe.name}),a.jsx("p",{className:"text-sm text-muted-foreground",children:xe.email}),a.jsx("p",{className:"font-mono text-xs text-muted-foreground/70 mt-1",children:xe.publicId})]})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("div",{className:"flex flex-wrap gap-1",children:(xe.roles||[]).map(_e=>a.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300",children:_e},_e))})}),a.jsxs("td",{className:"px-6 py-4 text-sm text-muted-foreground hidden md:table-cell",children:[(xe.roles||[]).includes(zt.COURIER)&&`Zones: ${((Me=xe.zones)==null?void 0:Me.join(", "))||"N/A"}`,(xe.roles||[]).includes(zt.CLIENT)&&`Fee: ${(Number(xe.flatRateFee)||0).toFixed(2)} EGP`]}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[f(Ut.EDIT_USER_PROFILE)&&a.jsx("button",{onClick:()=>Y("edit",xe),title:"Edit User",className:"p-2 text-muted-foreground hover:text-primary hover:bg-secondary rounded-md",children:a.jsx(Ms,{})}),a.jsx("button",{onClick:()=>Y("reset",xe),title:"Reset Password",className:"p-2 text-muted-foreground hover:text-orange-500 hover:bg-secondary rounded-md",children:a.jsx(sv,{})}),a.jsx("button",{onClick:()=>Y("delete",xe),title:"Delete User",className:"p-2 text-muted-foreground hover:text-red-500 hover:bg-secondary rounded-md",children:a.jsx(Yd,{})}),(xe.roles||[]).includes(zt.CLIENT)&&f(Ut.EDIT_CLIENT_ADDRESS)&&a.jsx("button",{onClick:()=>Y("address",xe),title:"Edit Default Address",className:"p-2 text-muted-foreground hover:text-blue-500 hover:bg-secondary rounded-md",children:a.jsx(ov,{className:"w-5 h-5"})}),(xe.roles||[]).includes(zt.CLIENT)&&a.jsx("button",{onClick:()=>Y("priorityPricing",xe),title:"Set Priority Pricing",className:"p-2 text-muted-foreground hover:text-green-500 hover:bg-secondary rounded-md",children:a.jsx(ua,{className:"w-5 h-5"})}),(xe.roles||[]).includes(zt.CLIENT)&&a.jsx("button",{onClick:()=>Y("tier",xe),title:"Manage Tier",className:"p-2 text-muted-foreground hover:text-yellow-500 hover:bg-secondary rounded-md",children:a.jsx(Wg,{className:"w-5 h-5"})})]})})]},xe.id)})})]})}),a.jsx(dr,{isOpen:!!T,onClose:z,title:T==="add"?"Create New User":T==="address"?`Edit Address for ${O==null?void 0:O.name}`:`Manage ${O==null?void 0:O.name}`,size:"2xl",children:we()})]})},BS=()=>{const{currentUser:e,clientTransactions:t,requestClientPayout:n,addToast:r}=Sn(),{t:o}=bl(),[l,f]=me.useState(!1),[m,g]=me.useState("");if(!e)return null;const x=t.filter(P=>P.userId===e.id),N=x.filter(P=>P.type===qo.WITHDRAWAL_REQUEST&&P.status==="Pending").reduce((P,C)=>P+(Number(C.amount)||0),0),T=Number(e.walletBalance)||0,v=()=>{const P=parseFloat(m);if(isNaN(P)||P<=0){r("Please enter a valid positive amount.","error");return}if(P>T){r("Payout amount cannot exceed your available balance.","error");return}n(e.id,P),r("Payout requested successfully!","success"),f(!1),g("")},O=P=>{switch(P){case"Pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case"Processed":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";case"Failed":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";default:return"bg-secondary text-secondary-foreground"}},D=P=>{switch(P){case qo.DEPOSIT:return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";case qo.PAYMENT:return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";case qo.WITHDRAWAL_REQUEST:return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300";case qo.WITHDRAWAL_PROCESSED:return"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300";default:return"bg-secondary text-secondary-foreground"}};return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-foreground",children:o("wallet.title")}),a.jsx("p",{className:"text-muted-foreground mt-1",children:o("wallet.description")||"Your wallet is credited with the value of your delivered packages. You can use this balance to pay for future shipping fees."})]}),a.jsx("button",{onClick:()=>f(!0),disabled:T<=0,className:"w-full sm:w-auto px-6 py-3 bg-green-600 text-white font-semibold rounded-lg shadow-sm hover:bg-green-700 transition disabled:bg-muted disabled:cursor-not-allowed",children:o("wallet.requestPayout")})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx(Rt,{title:o("wallet.availableBalance"),value:`${(Number(T)||0).toFixed(2)} EGP`,icon:a.jsx(ua,{className:"w-7 h-7"}),color:"#22c55e"}),a.jsx(Rt,{title:o("wallet.pendingPayouts"),value:`${(Number(-N)||0).toFixed(2)} EGP`,icon:a.jsx(du,{className:"w-7 h-7"}),color:"#3b82f6"})]}),a.jsxs("div",{className:"card overflow-hidden",children:[a.jsx("div",{className:"p-5 border-b border-border",children:a.jsx("h2",{className:"text-xl font-bold text-foreground",children:o("wallet.transactionHistory")})}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"bg-secondary",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Date"}),a.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Description"}),a.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Type"}),a.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider text-right",children:"Amount"})]})}),a.jsxs("tbody",{className:"divide-y divide-border",children:[x.sort((P,C)=>new Date(C.date).getTime()-new Date(P.date).getTime()).map(P=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 text-muted-foreground whitespace-nowrap",children:new Date(P.date).toLocaleString()}),a.jsx("td",{className:"px-6 py-4 text-foreground",children:P.description}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${D(P.type)}`,children:P.type}),P.status&&a.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${O(P.status)}`,children:P.status})]})}),a.jsxs("td",{className:`px-6 py-4 font-semibold text-right ${P.amount>=0?"text-green-600":"text-red-600"}`,children:[(Number(P.amount)||0).toFixed(2)," EGP"]})]},P.id)),x.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:4,className:"text-center py-8 text-muted-foreground",children:"No transactions yet."})})]})]})})]}),a.jsx(dr,{isOpen:l,onClose:()=>f(!1),title:"Request a Payout",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("p",{className:"text-foreground",children:["Your current available balance is ",a.jsxs("strong",{className:"text-green-600",children:[(Number(T)||0).toFixed(2)," EGP"]}),"."]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"payout-amount",className:"block text-sm font-medium text-foreground mb-1",children:"Amount to withdraw (EGP)"}),a.jsx("input",{id:"payout-amount",type:"number",value:m,onChange:P=>g(P.target.value),placeholder:`Max ${(Number(T)||0).toFixed(2)}`,className:"w-full px-4 py-2 border border-border rounded-lg",min:"0.01",step:"0.01",max:T})]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"An administrator will review and process your request. Once processed, the funds will be transferred to you."}),a.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[a.jsx("button",{onClick:()=>f(!1),className:"px-4 py-2 bg-secondary text-secondary-foreground rounded-lg font-semibold",children:"Cancel"}),a.jsx("button",{onClick:v,className:"px-4 py-2 bg-green-600 text-white rounded-lg font-semibold",children:"Confirm Request"})]})]})})]})},US=()=>{const{currentUser:e,shipments:t,getTaxCardNumber:n}=Sn();if(!e)return null;const r=t.filter(D=>D.status===tt.DELIVERED&&D.deliveryDate),o=(e.roles||[]).includes(zt.CLIENT),l=o?r.filter(D=>D.clientId===e.id):r,f=l.reduce((D,P)=>D+(P.clientFlatRateFee||0),0),m=l.length,g=l.filter(D=>D.paymentMethod===Rn.COD).reduce((D,P)=>D+P.price,0),x=o&&e.id?n(e.id):"",A={},N=new Date;for(let D=29;D>=0;D--){const P=new Date(N);P.setDate(N.getDate()-D);const C=P.toISOString().split("T")[0];A[C]=0}l.forEach(D=>{if(D.deliveryDate){const P=D.deliveryDate.split("T")[0];A.hasOwnProperty(P)&&(A[P]+=D.clientFlatRateFee||0)}});const T=Object.entries(A).map(([D,P])=>({date:new Date(D).getDate().toString(),revenue:P})),v=Math.max(...T.map(D=>D.revenue),1),O=()=>{const D=["Shipment ID","Delivery Date","Client","Payment Method","Revenue (EGP)"],P=l.sort((C,E)=>new Date(E.deliveryDate).getTime()-new Date(C.deliveryDate).getTime()).map(C=>[C.id,new Date(C.deliveryDate).toLocaleDateString(),C.clientName,C.paymentMethod,(Number(C.clientFlatRateFee)||0).toFixed(2)]);Ei(D,P,"Financial_Report")};return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"My Financials"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:o?"Your order history and financial summary.":"An overview of the company's financial performance."})]}),a.jsxs("button",{onClick:O,className:"w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition",children:[a.jsx(Ki,{className:"w-5 h-5"}),"Export as CSV"]})]}),o&&x&&a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 p-4 rounded-xl",children:[a.jsx("h3",{className:"text-lg font-semibold text-blue-900 dark:text-blue-200 mb-2",children:"Tax Information"}),a.jsxs("p",{className:"text-blue-800 dark:text-blue-300",children:["Tax Card Number: ",a.jsx("span",{className:"font-mono font-bold",children:x})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[a.jsx(Rt,{title:"Total Revenue",value:`${(Number(f)||0).toFixed(2)} EGP`,icon:a.jsx(sl,{className:"w-7 h-7"}),color:"#16a34a"}),a.jsx(Rt,{title:"Shipments Delivered",value:m,icon:a.jsx(Ls,{className:"w-7 h-7"}),color:"#3b82f6"}),a.jsx(Rt,{title:"COD Collected",value:`${(Number(g)||0).toFixed(2)} EGP`,icon:a.jsx(ua,{className:"w-7 h-7"}),color:"#f97316"})]}),a.jsxs("div",{className:"card",children:[a.jsx("h2",{className:"text-xl font-bold text-foreground mb-4",children:"Daily Revenue (Last 30 Days)"}),a.jsx("div",{className:"h-64 flex items-end gap-2 border-l border-b border-border pl-4 pb-4",children:T.map(({date:D,revenue:P})=>a.jsxs("div",{className:"flex-1 h-full flex flex-col justify-end items-center group",children:[a.jsx("div",{className:"w-full bg-primary/60 hover:bg-primary/80 transition-colors rounded-t-md",style:{height:`${P/v*100}%`},title:`Day ${D}: ${(Number(P)||0).toFixed(2)} EGP`}),a.jsx("span",{className:"text-xs text-muted-foreground mt-1",children:D})]},D))})]}),a.jsxs("div",{className:"card overflow-hidden",children:[a.jsx("div",{className:"p-5",children:a.jsx("h2",{className:"text-xl font-bold text-foreground",children:"All Transactions"})}),a.jsx("div",{className:"overflow-x-auto hidden lg:block",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"bg-secondary",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Shipment ID"}),a.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Delivery Date"}),a.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Client"}),a.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Payment Method"}),a.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider text-right",children:"Revenue"})]})}),a.jsx("tbody",{className:"divide-y divide-border",children:l.sort((D,P)=>new Date(P.deliveryDate).getTime()-new Date(D.deliveryDate).getTime()).map(D=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 font-mono text-sm text-muted-foreground",children:D.id}),a.jsx("td",{className:"px-6 py-4 text-foreground",children:new Date(D.deliveryDate).toLocaleDateString()}),a.jsx("td",{className:"px-6 py-4 text-muted-foreground",children:D.clientName}),a.jsx("td",{className:"px-6 py-4 text-muted-foreground",children:D.paymentMethod}),a.jsxs("td",{className:"px-6 py-4 font-semibold text-foreground text-right",children:[(Number(D.clientFlatRateFee)||0).toFixed(2)," EGP"]})]},D.id))})]})}),a.jsx("div",{className:"lg:hidden p-4 space-y-4 bg-secondary",children:l.sort((D,P)=>new Date(P.deliveryDate).getTime()-new Date(D.deliveryDate).getTime()).map(D=>a.jsxs("div",{className:"responsive-card !bg-card",children:[a.jsxs("div",{className:"responsive-card-header",children:[a.jsx("span",{className:"font-mono text-sm text-muted-foreground",children:D.id}),a.jsxs("span",{className:"font-semibold text-foreground",children:[(Number(D.clientFlatRateFee)||0).toFixed(2)," EGP"]})]}),a.jsxs("div",{className:"responsive-card-item",children:[a.jsx("span",{className:"responsive-card-label",children:"Client"}),a.jsx("span",{className:"responsive-card-value",children:D.clientName})]}),a.jsxs("div",{className:"responsive-card-item",children:[a.jsx("span",{className:"responsive-card-label",children:"Date"}),a.jsx("span",{className:"responsive-card-value",children:new Date(D.deliveryDate).toLocaleDateString()})]}),a.jsxs("div",{className:"responsive-card-item",children:[a.jsx("span",{className:"responsive-card-label",children:"Payment"}),a.jsx("span",{className:"responsive-card-value",children:D.paymentMethod})]})]},D.id))}),l.length===0&&a.jsxs("div",{className:"text-center py-16 text-muted-foreground",children:[a.jsx("p",{className:"font-semibold",children:"No Delivered Shipments"}),a.jsx("p",{className:"text-sm",children:"There are no financial transactions to display yet."})]})]})]})},zS=({setActiveView:e})=>{const{currentUser:t,getAdminFinancials:n,getClientFinancials:r,hasPermission:o,updateClientFlatRate:l,setShipmentFilter:f,shipments:m}=Sn(),[g,x]=me.useState(!1),[A,N]=me.useState(null),[T,v]=me.useState(!1),[O,D]=me.useState(0),P=me.useMemo(()=>A?m.filter(F=>F.clientId===A.clientId):[],[m,A]);if(!t||!o(Ut.VIEW_ADMIN_FINANCIALS))return a.jsx("div",{className:"flex items-center justify-center h-96",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Access Denied"}),a.jsx("p",{className:"text-slate-600",children:"Only users with appropriate permissions can access financial data."})]})});const C=n(),E=r(),j={cashToCollect:(C==null?void 0:C.cashToCollect)||0,totalCODCollected:(C==null?void 0:C.totalCODCollected)||0,undeliveredPackagesValue:(C==null?void 0:C.undeliveredPackagesValue)||0,totalFees:(C==null?void 0:C.totalFees)||0,totalRevenue:(C==null?void 0:C.totalRevenue)||0,totalCommission:(C==null?void 0:C.totalCommission)||0,netRevenue:(C==null?void 0:C.netRevenue)||0,totalOrders:(C==null?void 0:C.totalOrders)||0,totalCollectedMoney:(C==null?void 0:C.totalCollectedMoney)||0,uncollectedTransferFees:(C==null?void 0:C.uncollectedTransferFees)||0,totalOwedToCouriers:(C==null?void 0:C.totalOwedToCouriers)||0},V=F=>{N(F),D(F.flatRateFee),x(!0)},W=F=>{N(F),v(!0)},ie=F=>{F.preventDefault(),A&&O>=0&&(l(A.clientId,O),x(!1))},B=F=>{f(()=>F),e("total-shipments")},R=()=>{const F=["Metric","Value"],k=[["Cash to Collect (In Transit COD)",`${j.cashToCollect.toFixed(2)} EGP`],["Total COD Collected (Delivered)",`${j.totalCODCollected.toFixed(2)} EGP`],["Undelivered Packages Value",`${j.undeliveredPackagesValue.toFixed(2)} EGP`],["Potential Fees from Pending Orders",`${j.totalFees.toFixed(2)} EGP`],["Total Revenue (Shipping Fees)",`${j.totalRevenue.toFixed(2)} EGP`],["Total Commission (Paid to Couriers)",`${j.totalCommission.toFixed(2)} EGP`],["Net Profit (Revenue - Commission)",`${j.netRevenue.toFixed(2)} EGP`],["Total Delivered Orders",j.totalOrders.toString()]];Ei(F,k,"Admin_Financial_Report")},M=()=>{const F=["Client Name","Total Orders","Order Sum (EGP)","Flat Rate Fee (EGP)"],k=E.map(Q=>[Q.clientName,Q.totalOrders.toString(),(Number(Q.orderSum)||0).toFixed(2),(Number(Q.flatRateFee)||0).toFixed(2)]);Ei(F,k,"Client_Financial_Summary")},Z=F=>{switch(F){case Yi.GOLD:return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case Yi.SILVER:return"bg-gray-100 text-gray-800 dark:bg-gray-700/30 dark:text-gray-300";case Yi.BRONZE:return"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300";default:return"bg-secondary text-secondary-foreground"}};return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Admin Financial Dashboard"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"Enhanced financial overview with detailed tracking metrics."})]}),a.jsx("div",{className:"flex gap-2 w-full sm:w-auto",children:a.jsxs("button",{onClick:R,className:"flex-1 sm:flex-none flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition",children:[a.jsx(Ki,{className:"w-5 h-5"}),a.jsx("span",{className:"hidden sm:inline",children:"Export Report"})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(Rt,{title:"Cash to Collect",value:`${j.cashToCollect.toFixed(2)} EGP`,icon:a.jsx(ua,{className:"w-7 h-7"}),color:"#f59e0b",subtitle:"COD for packages out for delivery",onClick:()=>B(F=>F.paymentMethod===Rn.COD&&[tt.OUT_FOR_DELIVERY].includes(F.status))}),a.jsx(Rt,{title:"Total COD Collected",value:`${j.totalCODCollected.toFixed(2)} EGP`,icon:a.jsx(ua,{className:"w-7 h-7"}),color:"#16a34a",subtitle:"From delivered packages",onClick:()=>B(F=>F.paymentMethod===Rn.COD&&F.status===tt.DELIVERED)}),a.jsx(Rt,{title:"Undelivered Packages",value:`${j.undeliveredPackagesValue.toFixed(2)} EGP`,icon:a.jsx(Xi,{className:"w-7 h-7"}),color:"#f59e0b",subtitle:"Value of pending deliveries",onClick:()=>B(F=>![tt.DELIVERED,tt.DELIVERY_FAILED].includes(F.status))}),a.jsx(Rt,{title:"Uncollected Transfer Fees",value:`${j.uncollectedTransferFees.toFixed(2)} EGP`,icon:a.jsx(vu,{className:"w-7 h-7"}),color:"#ef4444",subtitle:"Shipping fees for pending transfers",onClick:()=>B(F=>F.paymentMethod===Rn.TRANSFER&&![tt.DELIVERED,tt.DELIVERY_FAILED].includes(F.status))})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(Rt,{title:"Total Revenue",value:`${j.totalRevenue.toFixed(2)} EGP`,icon:a.jsx(ua,{className:"w-7 h-7"}),color:"#16a34a",subtitle:"Shipping fees earned",onClick:()=>B(F=>F.status===tt.DELIVERED||F.status===tt.DELIVERY_FAILED)}),a.jsx(Rt,{title:"Total Commission",value:`${j.totalCommission.toFixed(2)} EGP`,icon:a.jsx(Wi,{className:"w-7 h-7"}),color:"#f97316",subtitle:"Paid to couriers",onClick:()=>B(F=>F.status===tt.DELIVERED)}),a.jsx(Rt,{title:"Net Profit",value:`${j.netRevenue.toFixed(2)} EGP`,icon:a.jsx(Ls,{className:"w-7 h-7"}),color:"#3b82f6",subtitle:"Revenue - Commission",onClick:()=>B(F=>F.status===tt.DELIVERED||F.status===tt.DELIVERY_FAILED)}),a.jsx(Rt,{title:"Total Owed to Couriers",value:`${j.totalOwedToCouriers.toFixed(2)} EGP`,icon:a.jsx(Wi,{className:"w-7 h-7"}),color:"#8b5cf6",subtitle:"Current balance across all couriers",onClick:()=>e("courier-performance")})]}),a.jsxs("div",{className:"card overflow-hidden",children:[a.jsxs("div",{className:"p-5 border-b border-border flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-foreground",children:"Client Financial Summary"}),a.jsx("p",{className:"text-muted-foreground mt-1 text-sm",children:"Revenue breakdown by client with adjustable flat rates."})]}),a.jsxs("button",{onClick:M,className:"w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition",children:[a.jsx(Ki,{className:"w-5 h-5"}),a.jsx("span",{className:"hidden sm:inline",children:"Export CSV"})]})]}),a.jsx("div",{className:"overflow-x-auto hidden lg:block",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"bg-secondary border-b border-border",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Client"}),a.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Total Orders"}),a.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Order Sum"}),a.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Flat Rate Fee"}),a.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Partner Tier"}),a.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-border",children:E.map(F=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 font-semibold text-foreground",children:F.clientName}),a.jsx("td",{className:"px-6 py-4 text-muted-foreground",children:a.jsx("button",{onClick:()=>W(F),className:"text-primary hover:underline",children:F.totalOrders})}),a.jsxs("td",{className:"px-6 py-4 text-muted-foreground",children:[(Number(F.orderSum)||0).toFixed(2)," EGP"]}),a.jsxs("td",{className:"px-6 py-4 font-semibold text-primary",children:[(Number(F.flatRateFee)||0).toFixed(2)," EGP"]}),a.jsx("td",{className:"px-6 py-4",children:F.partnerTier?a.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${Z(F.partnerTier)}`,children:F.partnerTier}):a.jsx("span",{className:"text-muted-foreground text-xs",children:"Not Assigned"})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("button",{onClick:()=>V(F),className:"p-2 text-muted-foreground hover:text-primary hover:bg-accent rounded-md",title:"Edit Flat Rate",children:a.jsx(Ms,{className:"w-4 h-4"})})})]},F.clientId))})]})}),a.jsx("div",{className:"lg:hidden p-4 space-y-4 bg-secondary",children:E.map(F=>a.jsxs("div",{className:"responsive-card !bg-card",children:[a.jsxs("div",{className:"responsive-card-header",children:[a.jsx("span",{className:"font-semibold text-foreground",children:F.clientName}),a.jsx("button",{onClick:()=>V(F),className:"p-2 text-muted-foreground hover:text-primary hover:bg-accent rounded-md -mr-2 -mt-2",title:"Edit Flat Rate",children:a.jsx(Ms,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"responsive-card-item",children:[a.jsx("span",{className:"responsive-card-label",children:"Flat Rate"}),a.jsxs("span",{className:"responsive-card-value font-semibold text-primary",children:[(Number(F.flatRateFee)||0).toFixed(2)," EGP"]})]}),a.jsxs("div",{className:"responsive-card-item",children:[a.jsx("span",{className:"responsive-card-label",children:"Partner Tier"}),a.jsx("span",{className:"responsive-card-value",children:F.partnerTier?a.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${Z(F.partnerTier)}`,children:F.partnerTier}):"N/A"})]}),a.jsxs("div",{className:"responsive-card-item",children:[a.jsx("span",{className:"responsive-card-label",children:"Total Orders"}),a.jsx("button",{onClick:()=>W(F),className:"responsive-card-value text-primary hover:underline",children:F.totalOrders})]}),a.jsxs("div",{className:"responsive-card-item",children:[a.jsx("span",{className:"responsive-card-label",children:"Order Sum"}),a.jsxs("span",{className:"responsive-card-value",children:[(Number(F.orderSum)||0).toFixed(2)," EGP"]})]})]},F.clientId))}),E.length===0&&a.jsxs("div",{className:"text-center py-16 text-muted-foreground",children:[a.jsx("p",{className:"font-semibold",children:"No Client Data"}),a.jsx("p",{className:"text-sm",children:"No client financial information is available yet."})]})]}),a.jsx(dr,{isOpen:g,onClose:()=>x(!1),title:`Update Flat Rate for ${A==null?void 0:A.clientName}`,children:a.jsxs("form",{onSubmit:ie,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Flat Rate Fee (EGP)"}),a.jsx("input",{type:"number",step:"0.01",min:"0",value:O,onChange:F=>D(parseFloat(F.target.value)||0),className:"w-full px-4 py-2 border border-border rounded-lg bg-background",required:!0}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"This fee is charged per package but not visible to the client."})]}),a.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>x(!1),className:"px-4 py-2 bg-secondary text-secondary-foreground rounded-lg font-semibold",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg font-semibold",children:"Update Rate"})]})]})}),a.jsx(dr,{isOpen:T,onClose:()=>v(!1),title:`Shipments for ${A==null?void 0:A.clientName}`,size:"4xl",children:a.jsx("div",{className:"max-h-[70vh] overflow-y-auto",children:a.jsx(yl,{shipments:P})})})]})},HS=()=>{const{notifications:e,notificationStatus:t,resendNotification:n}=Sn(),r={sending:{text:"Sending...",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300"},sent:{text:"Sent",color:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300"},failed:{text:"Not Sent",color:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"}},o=e.sort((l,f)=>new Date(f.date).getTime()-new Date(l.date).getTime());return a.jsxs("div",{className:"card overflow-hidden",children:[a.jsxs("div",{className:"p-5 border-b border-border",children:[a.jsx("h2",{className:"text-xl font-bold text-foreground",children:"Notifications Log"}),a.jsx("p",{className:"text-muted-foreground mt-1 text-sm",children:"A log of all system-generated notifications. Emails can be sent manually from this screen."})]}),a.jsx("div",{className:"overflow-x-auto hidden lg:block",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"bg-secondary",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Date"}),a.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Channel"}),a.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Recipient"}),a.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Subject"}),a.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Shipment ID"}),a.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Action"})]})}),a.jsx("tbody",{className:"divide-y divide-border",children:o.map(l=>{const f=t[l.id]||(l.sent?"sent":"failed");return a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 text-sm whitespace-nowrap text-muted-foreground",children:new Date(l.date).toLocaleString()}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[l.channel===Fl.SMS?a.jsx(vm,{className:"w-5 h-5 text-blue-500"}):a.jsx(Nm,{className:"w-5 h-5 text-muted-foreground"}),a.jsx("span",{className:"text-sm",children:l.channel})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${r[f].color}`,children:r[f].text})}),a.jsx("td",{className:"px-6 py-4 text-sm text-foreground",children:l.recipient}),a.jsx("td",{className:"px-6 py-4 text-sm text-foreground",children:l.channel===Fl.EMAIL?l.message.split(`

`)[0]:l.message}),a.jsx("td",{className:"px-6 py-4 font-mono text-sm text-muted-foreground",children:l.shipmentId}),a.jsx("td",{className:"px-6 py-4",children:l.channel===Fl.EMAIL&&a.jsxs("button",{onClick:()=>n(l.id),disabled:f==="sending",className:"flex items-center gap-2 px-3 py-1 bg-primary text-primary-foreground text-xs font-semibold rounded-lg hover:bg-primary/90 transition disabled:bg-muted",children:[a.jsx(Rh,{className:"w-4 h-4 transform -scale-x-100"}),f==="sent"?"Resend":"Send"]})})]},l.id)})})]})}),a.jsx("div",{className:"lg:hidden p-4 space-y-4 bg-secondary",children:o.map(l=>{const f=t[l.id]||(l.sent?"sent":"failed");return a.jsxs("div",{className:"responsive-card",children:[a.jsxs("div",{className:"responsive-card-header",children:[a.jsx("span",{className:"font-mono text-sm text-foreground",children:l.shipmentId}),a.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${r[f].color}`,children:r[f].text})]}),a.jsxs("div",{className:"text-sm",children:[a.jsx("p",{className:"font-semibold",children:l.channel===Fl.EMAIL?l.message.split(`

`)[0]:l.message}),a.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[l.channel===Fl.SMS?a.jsx(vm,{className:"w-4 h-4 text-blue-500"}):a.jsx(Nm,{className:"w-4 h-4"}),"To: ",l.recipient]}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(l.date).toLocaleString()})]}),l.channel===Fl.EMAIL&&a.jsxs("button",{onClick:()=>n(l.id),disabled:f==="sending",className:"mt-2 w-full flex items-center justify-center gap-2 px-3 py-2 bg-primary text-primary-foreground text-sm font-semibold rounded-lg hover:bg-primary/90 transition disabled:bg-muted",children:[a.jsx(Rh,{className:"w-4 h-4 transform -scale-x-100"}),f==="sent"?"Resend":"Send"]})]},l.id)})}),e.length===0&&a.jsxs("div",{className:"text-center py-16 text-muted-foreground",children:[a.jsx("p",{className:"font-semibold",children:"No Notifications Found"}),a.jsx("p",{className:"text-sm",children:"No notifications have been generated yet."})]})]})},VS=()=>{var N,T,v,O,D;const{currentUser:e,updateUser:t}=Sn(),{t:n}=bl(),[r,o]=me.useState(!1),[l,f]=me.useState({}),m=P=>P==="Cairo"?Rr.GreaterCairo.Cairo:P==="Giza"?Rr.GreaterCairo.Giza:P==="Alexandria"?Rr.Alexandria:P==="Other"?Rr.Other:[];if(me.useEffect(()=>{e&&f({name:e.name,phone:e.phone||"",address:e.address||{street:"",city:"Cairo",zone:Rr.GreaterCairo.Cairo[0],details:""}})},[e]),!e)return null;const g=P=>{const{name:C,value:E}=P.target;if(C.startsWith("address.")){const j=C.split(".")[1];let V={...l.address,[j]:E};if(j==="city"){const ie=m(E),B=ie.length>0?ie[0]:"";V.zone=B}f(W=>({...W,address:V}))}else f(j=>({...j,[C]:E}))},x=()=>{t(e.id,l),o(!1)},A=m(((N=l.address)==null?void 0:N.city)||"Cairo");return a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsxs("div",{className:"flex justify-between items-start mb-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-foreground",children:n("myProfile")}),a.jsx("p",{className:"text-muted-foreground mt-1",children:n("viewEditPersonalInfo")})]}),r?a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>o(!1),className:"px-4 py-2 bg-secondary text-secondary-foreground rounded-lg hover:bg-accent font-semibold",children:n("cancel")}),a.jsx("button",{onClick:x,className:"px-4 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700",children:n("saveChanges")})]}):a.jsxs("button",{onClick:()=>o(!0),className:"flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground font-semibold rounded-lg hover:bg-primary/90 transition",children:[a.jsx(Ms,{className:"w-5 h-5"}),n("editProfile")]})]}),a.jsxs("div",{className:"card p-8 space-y-8",children:[a.jsxs("div",{className:"border-b border-border pb-8",children:[a.jsx("h2",{className:"text-lg font-bold text-foreground mb-4",children:n("personalInformation")}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:n("fullName")}),r?a.jsx("input",{type:"text",name:"name",value:l.name||"",onChange:g,className:"w-full px-4 py-2 border border-border rounded-lg"}):a.jsx("p",{className:"text-lg text-foreground p-2",children:e.name})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:n("emailAddress")}),a.jsx("p",{className:"text-lg text-muted-foreground p-2 bg-secondary rounded-lg",children:e.email})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:n("phoneNumber")}),r?a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"tel",name:"phone",value:l.phone||"",onChange:g,className:"w-full px-4 py-2 border border-border rounded-lg",placeholder:"01xxxxxxxxx"}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:n("phoneExample")})]}):a.jsx("p",{className:"text-lg text-foreground p-2",children:e.phone||n("notSet")})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:n("role")}),a.jsx("p",{className:"text-lg text-muted-foreground p-2 bg-secondary rounded-lg",children:(e.roles||[]).join(" & ")})]})]})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-bold text-foreground mb-4",children:"Default Pickup Address"}),r?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Street Address"}),a.jsx("input",{type:"text",name:"address.street",value:((T=l.address)==null?void 0:T.street)||"",onChange:g,className:"w-full px-4 py-2 border border-border rounded-lg"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"City"}),a.jsxs("select",{name:"address.city",value:((v=l.address)==null?void 0:v.city)||"Cairo",onChange:g,className:"w-full px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary",children:[a.jsx("option",{value:"Cairo",children:"Cairo"}),a.jsx("option",{value:"Giza",children:"Giza"}),a.jsx("option",{value:"Alexandria",children:"Alexandria"}),a.jsx("option",{value:"Other",children:"Other Governorates"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Zone"}),a.jsx("select",{name:"address.zone",value:((O=l.address)==null?void 0:O.zone)||"",onChange:g,className:"w-full px-4 py-2 border border-border rounded-lg",children:A.map(P=>a.jsx("option",{value:P,children:P},P))})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Apartment, Suite, etc."}),a.jsx("input",{type:"text",name:"address.details",value:((D=l.address)==null?void 0:D.details)||"",onChange:g,className:"w-full px-4 py-2 border border-border rounded-lg"})]})]}):e.address?a.jsxs("div",{className:"text-lg text-foreground p-4 bg-secondary rounded-lg",children:[a.jsx("p",{className:"font-semibold",children:e.address.street}),a.jsx("p",{children:e.address.details}),a.jsxs("p",{children:[e.address.city,", ",e.address.zone]})]}):a.jsx("p",{className:"text-muted-foreground",children:"Please set your default address."})]})]})]})},qS=({onSelectShipment:e,setActiveView:t})=>{const{users:n,shipments:r,clientTransactions:o,processClientPayout:l,declineClientPayout:f,addToast:m}=Sn(),{t:g}=bl(),[x,A]=me.useState("summary"),[N,T]=me.useState({key:"shipmentCount",direction:"desc"}),[v,O]=me.useState(null),[D,P]=me.useState("all"),[C,E]=me.useState("all"),[j,V]=me.useState(""),[W,ie]=me.useState(""),[B,R]=me.useState(""),[M,Z]=me.useState("all"),F=me.useMemo(()=>{let q=n.filter(ee=>(ee.roles||[]).includes(zt.CLIENT)).map(ee=>{const fe=r.filter(Ee=>Ee.clientId===ee.id),ae=o.filter(Ee=>Ee.userId===ee.id&&Ee.type===qo.WITHDRAWAL_REQUEST&&Ee.status==="Pending");return{id:ee.id,publicId:ee.publicId,name:ee.name,partnerTier:ee.partnerTier,manualTierAssignment:ee.manualTierAssignment,walletBalance:ee.walletBalance||0,shipmentCount:fe.length,flatRateFee:ee.flatRateFee||0,payoutRequestCount:ae.length}});return D!=="all"&&(q=q.filter(ee=>ee.id===parseInt(D))),C!=="all"&&(q=q.filter(ee=>ee.partnerTier===C)),q.sort((ee,fe)=>{const ae=ee[N.key],Ee=fe[N.key];if(ae==null)return 1;if(Ee==null)return-1;if(N.key==="partnerTier"){const we={[Yi.GOLD]:3,[Yi.SILVER]:2,[Yi.BRONZE]:1},xe=we[ee.partnerTier]||0,Me=we[fe.partnerTier]||0;return xe<Me?N.direction==="asc"?-1:1:xe>Me?N.direction==="asc"?1:-1:0}return ae<Ee?N.direction==="asc"?-1:1:ae>Ee?N.direction==="asc"?1:-1:0})},[n,r,o,N,D,C]),k=me.useMemo(()=>o.filter(L=>L.type===qo.WITHDRAWAL_REQUEST&&L.status==="Pending").map(L=>{const q=n.find(ee=>ee.id===L.userId);return{...L,clientName:(q==null?void 0:q.name)||"Unknown Client",clientEmail:(q==null?void 0:q.email)||"N/A"}}).filter(L=>j.trim()?L.clientName.toLowerCase().includes(j.toLowerCase().trim()):!0).sort((L,q)=>new Date(q.date).getTime()-new Date(L.date).getTime()),[o,n,j]),Q=me.useMemo(()=>{if(!v)return[];let L=r.filter(q=>q.clientId===v.id);if(W&&(L=L.filter(q=>q.creationDate.startsWith(W))),B.trim()){const q=B.trim().toLowerCase();L=L.filter(ee=>ee.id.toLowerCase().includes(q)||ee.recipientName.toLowerCase().includes(q))}return M!=="all"&&(L=L.filter(q=>q.status===M)),L.sort((q,ee)=>new Date(ee.creationDate).getTime()-new Date(q.creationDate).getTime())},[r,v,W,B,M]),J=L=>{const q=N.key===L&&N.direction==="asc"?"desc":"asc";T({key:L,direction:q})},G=L=>{const q=n.find(ee=>ee.id===L);q&&O(q)},Y=L=>{l(L),m("Payout processed successfully","success")},z=L=>{confirm("Are you sure you want to decline this payout request?")&&(f(L),m("Payout declined successfully","success"))},X=()=>{const L=["Client Name","Client ID","Total Shipments","Wallet Balance (EGP)","Flat Rate (EGP)","Partner Tier","Pending Payouts"],q=F.map(ee=>[ee.name,ee.publicId,ee.shipmentCount,(Number(ee.walletBalance)||0).toFixed(2),(Number(ee.flatRateFee)||0).toFixed(2),ee.partnerTier||"N/A",ee.payoutRequestCount]);Ei(L,q,"Client_Analytics_Summary")},te=()=>{const L=["Date","Client Name","Client Email","Amount (EGP)","Description"],q=k.map(ee=>[new Date(ee.date).toLocaleString(),ee.clientName,ee.clientEmail,Math.abs(Number(ee.amount)||0).toFixed(2),ee.description]);Ei(L,q,"Pending_Client_Payouts")},ge=L=>{switch(L){case Yi.GOLD:return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case Yi.SILVER:return"bg-gray-100 text-gray-800 dark:bg-gray-700/30 dark:text-gray-300";case Yi.BRONZE:return"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300";default:return"bg-secondary text-secondary-foreground"}},ue=({title:L,sortKey:q})=>a.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase cursor-pointer",onClick:()=>J(q),children:a.jsxs("div",{className:"flex items-center gap-1",children:[L,N.key===q&&a.jsx(j6,{className:`w-4 h-4 transition-transform ${N.direction==="desc"?"rotate-180":""}`})]})});return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-foreground",children:g("clientAnalytics.title")}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"Overview of client shipment volumes and pending payouts."})]}),a.jsxs("button",{onClick:x==="summary"?X:te,className:"w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition",children:[a.jsx(Ki,{className:"w-5 h-5"}),"Export CSV"]})]}),a.jsx("div",{className:"border-b border-border",children:a.jsxs("nav",{className:"-mb-px flex space-x-6",children:[a.jsx("button",{onClick:()=>A("summary"),className:`py-3 px-1 border-b-2 font-semibold text-sm ${x==="summary"?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground hover:border-border"}`,children:"Client Summary"}),a.jsxs("button",{onClick:()=>A("payouts"),className:`py-3 px-1 border-b-2 font-semibold text-sm ${x==="payouts"?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground hover:border-border"}`,children:["Pending Payouts",k.length>0&&a.jsx("span",{className:"ml-2 bg-yellow-400 text-yellow-900 text-xs font-bold px-2 py-0.5 rounded-full",children:k.length})]})]})}),x==="summary"&&a.jsxs("div",{className:"card overflow-hidden",children:[a.jsxs("div",{className:"p-4 border-b border-border flex flex-col sm:flex-row gap-4",children:[a.jsxs("select",{value:D,onChange:L=>P(L.target.value),className:"w-full md:w-1/3 px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background",children:[a.jsx("option",{value:"all",children:"Filter by Client"}),n.filter(L=>L.roles.includes(zt.CLIENT)).map(L=>a.jsxs("option",{value:L.id,children:[L.name," (",L.publicId,")"]},L.id))]}),a.jsxs("select",{value:C,onChange:L=>E(L.target.value),className:"w-full md:w-1/3 px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background",children:[a.jsx("option",{value:"all",children:"Filter by Tier"}),Object.values(Yi).map(L=>a.jsx("option",{value:L,children:L},L)),a.jsx("option",{value:"",children:"Not Assigned"})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"bg-secondary",children:a.jsxs("tr",{children:[a.jsx(ue,{title:"Client",sortKey:"name"}),a.jsx(ue,{title:"ID",sortKey:"publicId"}),a.jsx(ue,{title:"Total Shipments",sortKey:"shipmentCount"}),a.jsx(ue,{title:"Wallet Balance",sortKey:"walletBalance"}),a.jsx(ue,{title:"Partner Tier",sortKey:"partnerTier"}),a.jsx(ue,{title:"Flat Rate",sortKey:"flatRateFee"}),a.jsx(ue,{title:"Pending Payouts",sortKey:"payoutRequestCount"}),a.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-border",children:F.map(L=>a.jsxs("tr",{children:[a.jsx("td",{className:"p-4 font-semibold",children:a.jsx("button",{onClick:()=>t("users"),className:"text-primary hover:underline",children:L.name})}),a.jsx("td",{className:"p-4 font-mono text-xs text-muted-foreground",children:L.publicId}),a.jsx("td",{className:"p-4 text-muted-foreground font-mono",children:L.shipmentCount}),a.jsxs("td",{className:"p-4 text-green-600 dark:text-green-400 font-semibold font-mono",children:[(Number(L.walletBalance)||0).toFixed(2)," EGP"]}),a.jsx("td",{className:"p-4",children:a.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${ge(L.partnerTier)}`,children:L.partnerTier||"N/A"})}),a.jsxs("td",{className:"p-4 text-primary font-semibold",children:[(Number(L.flatRateFee)||0).toFixed(2)," EGP"]}),a.jsx("td",{className:"p-4 text-blue-600 font-semibold",children:L.payoutRequestCount}),a.jsx("td",{className:"p-4",children:a.jsx("button",{onClick:()=>G(L.id),className:"px-3 py-1.5 bg-primary text-primary-foreground font-semibold rounded-lg hover:bg-primary/90 text-sm",children:"View Shipments"})})]},L.id))})]})})]}),x==="payouts"&&a.jsxs("div",{className:"card overflow-hidden",children:[a.jsx("div",{className:"p-4 border-b border-border",children:a.jsx("input",{type:"text",placeholder:"Filter by client name...",value:j,onChange:L=>V(L.target.value),className:"w-full md:w-1/3 px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background"})}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"bg-secondary",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Date"}),a.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Client"}),a.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Amount"}),a.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Actions"})]})}),a.jsxs("tbody",{className:"divide-y divide-border",children:[k.map(L=>a.jsxs("tr",{children:[a.jsx("td",{className:"p-4 text-sm text-muted-foreground",children:new Date(L.date).toLocaleString()}),a.jsxs("td",{className:"p-4",children:[a.jsx("p",{className:"font-semibold",children:L.clientName}),a.jsx("p",{className:"text-xs text-muted-foreground",children:L.clientEmail})]}),a.jsxs("td",{className:"p-4 font-bold text-red-600",children:["-",Math.abs(Number(L.amount)||0).toFixed(2)," EGP"]}),a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>Y(L.id),className:"px-3 py-1.5 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 text-sm",children:"Process"}),a.jsx("button",{onClick:()=>z(L.id),className:"px-3 py-1.5 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700 text-sm",children:"Decline"})]})})]},L.id)),k.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:4,className:"text-center py-12 text-muted-foreground",children:"No pending payouts."})})]})]})})]}),a.jsx(dr,{isOpen:!!v,onClose:()=>O(null),title:`Shipments for ${v==null?void 0:v.name}`,size:"4xl",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"mb-4 bg-secondary p-3 rounded-lg flex flex-col sm:flex-row gap-4 items-center flex-wrap",children:[a.jsx("input",{type:"text",placeholder:"Search ID or Recipient...",value:B,onChange:L=>R(L.target.value),className:"flex-grow w-full sm:w-auto px-3 py-2 border border-border rounded-lg bg-background"}),a.jsxs("select",{value:M,onChange:L=>Z(L.target.value),className:"w-full sm:w-auto px-3 py-2 border border-border rounded-lg bg-background",children:[a.jsx("option",{value:"all",children:"All Statuses"}),Object.values(tt).map(L=>a.jsx("option",{value:L,children:L},L))]}),a.jsx("input",{type:"date",value:W,onChange:L=>ie(L.target.value),className:"w-full sm:w-auto px-3 py-2 border border-border rounded-lg bg-background"})]}),a.jsx("div",{className:"max-h-[60vh] overflow-y-auto",children:a.jsx(yl,{shipments:Q,onSelect:L=>{e(L),O(null)}})})]})})]})},GS=({courierStats:e})=>{const t=Number(e.deliveriesCompleted)||0,n=Number(e.deliveriesFailed)||0,r=Number(e.totalEarnings)||0,o=t+n>0?t/(t+n)*100:100,l=t>0?r/t:0;return a.jsxs("div",{className:"card p-6",children:[a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Earnings"}),a.jsxs("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[(Number(e.totalEarnings)||0).toFixed(2)," EGP"]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"Current Balance"}),a.jsxs("div",{className:"text-2xl font-bold text-foreground",children:[(Number(e.currentBalance)||0).toFixed(2)," EGP"]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"Pending Payouts"}),a.jsxs("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[(Number(e.pendingEarnings)||0).toFixed(2)," EGP"]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg. Per Delivery"}),a.jsxs("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:[(Number(l)||0).toFixed(2)," EGP"]})]})]}),a.jsxs("div",{className:"mt-4 pt-4 border-t border-border flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Performance:"}),a.jsxs("div",{className:"flex items-center",title:`Rating: ${e.performanceRating}`,children:[[...Array(5)].map((f,m)=>a.jsx("span",{className:`text-xl ${m<Math.floor(e.performanceRating)?"text-yellow-400":"text-gray-300 dark:text-gray-600"}`,children:"⭐"},m)),a.jsxs("span",{className:"ml-1 text-sm font-medium",children:["(",e.performanceRating,"/5.0)"]})]})]}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:["Success Rate: ",a.jsxs("span",{className:"font-bold text-foreground",children:[(Number(o)||0).toFixed(1),"%"]})]}),e.isRestricted&&a.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300 rounded-full text-xs font-medium",children:"🚫 Restricted"})]})]})},WS=({transactions:e})=>{const t={[Xl.PENDING]:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300",[Xl.PROCESSED]:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",[Xl.FAILED]:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"};return a.jsxs("div",{className:"card overflow-hidden",children:[a.jsx("div",{className:"p-5 border-b border-border",children:a.jsx("h2",{className:"text-xl font-bold text-foreground",children:"Transaction History"})}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"bg-secondary",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase",children:"Date"}),a.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase",children:"Description"}),a.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase",children:"Type"}),a.jsx("th",{className:"px-6 py-3 text-xs font-medium text-muted-foreground uppercase text-right",children:"Amount (EGP)"})]})}),a.jsxs("tbody",{className:"divide-y divide-border",children:[e.map(n=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 text-sm text-muted-foreground whitespace-nowrap",children:new Date(n.timestamp).toLocaleDateString()}),a.jsxs("td",{className:"px-6 py-4 text-sm text-foreground",children:[n.description,n.transferEvidencePath&&a.jsxs("a",{href:`/${n.transferEvidencePath}`,target:"_blank",rel:"noopener noreferrer",className:"ml-2 inline-flex items-center gap-1 text-xs text-primary hover:underline",children:[a.jsx(cv,{className:"w-4 h-4"})," View Proof"]})]}),a.jsxs("td",{className:"px-6 py-4 text-sm",children:[a.jsx("span",{className:`px-2 py-1 font-semibold text-xs rounded-full ${n.amount>=0?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300":"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300"}`,children:n.type}),(n.type===dl.WITHDRAWAL_REQUEST||n.type===dl.WITHDRAWAL_PROCESSED)&&a.jsx("span",{className:`ml-2 px-2 py-1 font-semibold text-xs rounded-full ${t[n.status]}`,children:n.status})]}),a.jsx("td",{className:`px-6 py-4 text-right font-bold ${n.amount>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:(Number(n.amount)||0).toFixed(2)})]},n.id)),e.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:4,className:"text-center py-8 text-muted-foreground",children:"No transactions recorded."})})]})]})})]})},YS=()=>{const{currentUser:e,courierStats:t,courierTransactions:n,requestCourierPayout:r,addToast:o}=Sn(),[l,f]=me.useState(!1),[m,g]=me.useState(""),[x,A]=me.useState("Cash");if(!e)return null;const N=t.find(D=>D.courierId===e.id),T=n.filter(D=>D.courierId===e.id).sort((D,P)=>new Date(P.timestamp).getTime()-new Date(D.timestamp).getTime()),v=T.some(D=>D.type===dl.WITHDRAWAL_REQUEST&&D.status===Xl.PENDING),O=()=>{if(!N)return;const D=parseFloat(m);if(isNaN(D)||D<=0){o("Please enter a valid positive amount.","error");return}if(D>N.currentBalance){o("Payout amount cannot exceed your current balance.","error");return}r(e.id,D,x),o("Payout requested successfully!","success"),f(!1),g("")};return N?a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"My Earnings"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"Your performance and financial summary."})]}),a.jsx("button",{onClick:()=>f(!0),disabled:N.currentBalance<=0||v,className:"px-6 py-3 bg-green-600 text-white font-semibold rounded-lg shadow-sm hover:bg-green-700 transition disabled:bg-muted disabled:cursor-not-allowed",title:v?"You already have a pending payout request":"",children:"Request Payout"})]}),a.jsx(GS,{courierStats:N}),a.jsx(WS,{transactions:T}),a.jsx(dr,{isOpen:l,onClose:()=>f(!1),title:"Request a Payout",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("p",{children:["Your current balance is ",a.jsxs("strong",{className:"text-green-600 dark:text-green-400",children:[(Number(N.currentBalance)||0).toFixed(2)," EGP"]}),"."]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Payment Method"}),a.jsxs("select",{value:x,onChange:D=>A(D.target.value),className:"w-full px-4 py-2 border border-border rounded-lg bg-background",children:[a.jsx("option",{value:"Cash",children:"Cash"}),a.jsx("option",{value:"Bank Transfer",children:"Bank Transfer"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"payout-amount",className:"block text-sm font-medium text-muted-foreground mb-1",children:"Amount to withdraw (EGP)"}),a.jsx("input",{id:"payout-amount",type:"number",value:m,onChange:D=>g(D.target.value),placeholder:`Max ${(Number(N.currentBalance)||0).toFixed(2)}`,className:"w-full px-4 py-2 border border-border rounded-lg bg-background",min:"0.01",step:"0.01",max:N.currentBalance})]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Once confirmed, an administrator will process your request. The funds will then be deducted from your balance and transferred to you."}),a.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[a.jsx("button",{onClick:()=>f(!1),className:"px-4 py-2 bg-secondary rounded-lg font-semibold",children:"Cancel"}),a.jsx("button",{onClick:O,className:"px-4 py-2 bg-green-600 text-white rounded-lg font-semibold",children:"Confirm Request"})]})]})})]}):a.jsx("div",{className:"text-center p-8 card",children:"Could not load your financial data."})},XS=({onSelectShipment:e})=>{const{users:t,shipments:n,courierStats:r,courierTransactions:o,updateCourierSettings:l,applyManualPenalty:f,processCourierPayout:m,declineCourierPayout:g,getAdminFinancials:x}=Sn(),[A,N]=me.useState(null),[T,v]=me.useState(!1),[O,D]=me.useState(""),[P,C]=me.useState({key:"name",direction:"asc"}),[E,j]=me.useState(null),[V,W]=me.useState(""),ie=x(),B=me.useMemo(()=>{let J=t.filter(G=>(G.roles||[]).includes(zt.COURIER)).map(G=>{const Y=r.find(L=>L.courierId===G.id),z=o.filter(L=>L.courierId===G.id&&L.type===dl.WITHDRAWAL_REQUEST&&L.status===Xl.PENDING),X=n.filter(L=>L.courierId===G.id&&[tt.OUT_FOR_DELIVERY,tt.ASSIGNED_TO_COURIER].includes(L.status)).length,te=n.filter(L=>L.courierId===G.id).length,ge=n.filter(L=>L.courierId===G.id&&L.status===tt.DELIVERED).length,ue=n.filter(L=>L.courierId===G.id&&L.status===tt.DELIVERY_FAILED).length;return{user:G,stats:Y,pendingPayouts:z,pendingCount:X,totalAssigned:te,totalCompleted:ge,totalFailed:ue}});return O.trim()&&(J=J.filter(({user:G})=>G.name.toLowerCase().includes(O.trim().toLowerCase()))),J.sort((G,Y)=>{var ge,ue;const z=P.key,X=z in G.user?G.user[z]:(ge=G.stats)==null?void 0:ge[z],te=z in Y.user?Y.user[z]:(ue=Y.stats)==null?void 0:ue[z];return X==null?1:te==null?-1:X<te?P.direction==="asc"?-1:1:X>te?P.direction==="asc"?1:-1:0})},[t,r,o,n,O,P]),R=J=>{const G=P.key===J&&P.direction==="asc"?"desc":"asc";C({key:J,direction:G})},M=()=>{const J=["Courier Name","Email","Phone","Status","Total Assigned","Completed","Failed","Pending","Total Earnings (EGP)","Current Balance (EGP)","Commission Type","Commission Value"],G=B.map(({user:Y,stats:z,totalAssigned:X,totalCompleted:te,totalFailed:ge,pendingCount:ue})=>[Y.name,Y.email,Y.phone||"N/A",z!=null&&z.isRestricted?"Restricted":"Active",X,te,ge,ue,(Number(z==null?void 0:z.totalEarnings)||0).toFixed(2),(Number(z==null?void 0:z.currentBalance)||0).toFixed(2),(z==null?void 0:z.commissionType)||"N/A",(z==null?void 0:z.commissionValue)||"N/A"]);Ei(J,G,"Courier_Performance_Report")},Z=J=>{const G=r.find(Y=>Y.courierId===J);G&&(N(G),v(!0))},F=()=>{v(!1),N(null)},k=(J,G,Y)=>{let z=[];Y==="delivered"?(z=n.filter(X=>X.courierId===J&&X.status===tt.DELIVERED),W(`Delivered Shipments for ${G}`)):Y==="pending"?(z=n.filter(X=>X.courierId===J&&[tt.OUT_FOR_DELIVERY,tt.ASSIGNED_TO_COURIER].includes(X.status)),W(`Pending Shipments for ${G}`)):Y==="assigned"&&(z=n.filter(X=>X.courierId===J),W(`All Assigned Shipments for ${G}`)),j(z)},Q=J=>{e(J),j(null)};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Courier Performance"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage courier financials, restrictions, and view performance metrics."})]}),a.jsxs("button",{onClick:M,className:"w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition",children:[a.jsx(Ki,{className:"w-5 h-5"}),"Export CSV"]})]}),a.jsx(Rt,{title:"Total Owed to Couriers",value:`${(Number(ie.totalOwedToCouriers)||0).toFixed(2)} EGP`,icon:a.jsx(Wi,{className:"w-7 h-7"}),color:"#8b5cf6",subtitle:"Sum of all courier current balances"}),a.jsxs("div",{className:"card overflow-hidden",children:[a.jsx("div",{className:"p-4 border-b border-border",children:a.jsx("input",{type:"text",placeholder:"Filter couriers by name...",value:O,onChange:J=>D(J.target.value),className:"w-full md:w-1/3 px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background"})}),a.jsx("div",{className:"overflow-x-auto hidden lg:block",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"bg-secondary",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase cursor-pointer",onClick:()=>R("name"),children:"Courier"}),a.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase text-center cursor-pointer",onClick:()=>R("totalAssigned"),children:"Assigned"}),a.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase text-center cursor-pointer",onClick:()=>R("totalCompleted"),children:"Completed"}),a.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase text-center cursor-pointer",onClick:()=>R("totalFailed"),children:"Failed"}),a.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase text-center cursor-pointer",onClick:()=>R("pendingCount"),children:"Pending"}),a.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase cursor-pointer",onClick:()=>R("currentBalance"),children:"Earnings (Balance)"}),a.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Commission"}),a.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Status"}),a.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-border",children:B.map(({user:J,stats:G,pendingPayouts:Y,pendingCount:z,totalAssigned:X,totalCompleted:te,totalFailed:ge})=>a.jsxs("tr",{children:[a.jsxs("td",{className:"p-4 font-semibold",children:[J.name,a.jsx("p",{className:"font-mono text-xs text-muted-foreground mt-1",children:J.publicId})]}),a.jsx("td",{className:"p-4 font-mono text-center",children:a.jsx("button",{onClick:()=>k(J.id,J.name,"assigned"),className:"font-mono text-muted-foreground hover:underline disabled:text-muted-foreground/50 disabled:no-underline",disabled:X===0,children:X})}),a.jsx("td",{className:"p-4 font-mono text-center",children:a.jsx("button",{onClick:()=>k(J.id,J.name,"delivered"),className:"font-mono text-green-600 hover:underline disabled:text-muted-foreground/50 disabled:no-underline",disabled:te===0,children:te})}),a.jsx("td",{className:"p-4 font-mono text-center text-red-600",children:ge}),a.jsx("td",{className:"p-4 font-mono text-center",children:a.jsx("button",{onClick:()=>k(J.id,J.name,"pending"),className:"font-mono text-blue-600 hover:underline disabled:text-muted-foreground/50 disabled:no-underline",disabled:z===0,children:z})}),a.jsx("td",{className:"p-4 font-mono text-sm",children:G?`${(Number(G.totalEarnings)||0).toFixed(2)} / ${(Number(G.currentBalance)||0).toFixed(2)}`:"N/A"}),a.jsx("td",{className:"p-4 text-sm",children:(G==null?void 0:G.commissionType)==="flat"?`${G.commissionValue} EGP`:`${G==null?void 0:G.commissionValue}%`}),a.jsxs("td",{className:"p-4",children:[G!=null&&G.isRestricted?a.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300",children:"Restricted"}):a.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",children:"Active"}),Y.length>0&&a.jsx("div",{className:"mt-1",children:a.jsxs("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300",children:[Y.length," Payout",Y.length>1?"s":""," Pending"]})})]}),a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>Z(J.id),className:"px-3 py-1.5 bg-primary text-primary-foreground font-semibold rounded-lg hover:bg-primary/90 text-sm",children:"Manage"}),Y.length>0&&a.jsx("button",{onClick:()=>Z(J.id),className:"px-3 py-1.5 bg-yellow-500 hover:bg-yellow-600 text-white font-semibold rounded-lg text-sm",title:`${Y.length} payout request${Y.length>1?"s":""} pending approval`,children:"Review Payouts"})]})})]},J.id))})]})}),a.jsx("div",{className:"lg:hidden p-4 space-y-4 bg-secondary",children:B.map(({user:J,stats:G,pendingPayouts:Y,pendingCount:z,totalAssigned:X,totalCompleted:te,totalFailed:ge})=>a.jsxs("div",{className:"responsive-card",children:[a.jsxs("div",{className:"responsive-card-header",children:[a.jsx("span",{className:"font-semibold text-foreground",children:J.name}),a.jsxs("div",{className:"flex items-center gap-2",children:[G!=null&&G.isRestricted?a.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300",children:"Restricted"}):a.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",children:"Active"}),Y.length>0&&a.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300",children:"Payout"})]})]}),a.jsx("p",{className:"font-mono text-xs text-muted-foreground",children:J.publicId}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-2",children:[a.jsx("div",{className:"text-center",children:a.jsxs("button",{onClick:()=>k(J.id,J.name,"assigned"),disabled:X===0,className:"disabled:opacity-50",children:[a.jsx("div",{className:"font-bold text-lg text-foreground",children:X}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Assigned"})]})}),a.jsx("div",{className:"text-center",children:a.jsxs("button",{onClick:()=>k(J.id,J.name,"delivered"),disabled:te===0,className:"disabled:opacity-50",children:[a.jsx("div",{className:"font-bold text-lg text-green-600",children:te}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Completed"})]})}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"font-bold text-lg text-red-600",children:ge}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Failed"})]}),a.jsx("div",{className:"text-center",children:a.jsxs("button",{onClick:()=>k(J.id,J.name,"pending"),disabled:z===0,className:"disabled:opacity-50",children:[a.jsx("div",{className:"font-bold text-lg text-blue-600",children:z}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Pending"})]})})]}),a.jsxs("div",{className:"responsive-card-item",children:[a.jsx("span",{className:"responsive-card-label",children:"Earnings (Balance)"}),a.jsx("span",{className:"responsive-card-value font-mono",children:G?`${(Number(G.currentBalance)||0).toFixed(2)} EGP`:"N/A"})]}),a.jsxs("div",{className:"responsive-card-item",children:[a.jsx("span",{className:"responsive-card-label",children:"Commission"}),a.jsx("span",{className:"responsive-card-value",children:(G==null?void 0:G.commissionType)==="flat"?`${G.commissionValue} EGP`:`${G==null?void 0:G.commissionValue}%`})]}),a.jsx("button",{onClick:()=>Z(J.id),className:"mt-3 w-full px-3 py-2 bg-primary text-primary-foreground font-semibold rounded-lg hover:bg-primary/90 text-sm",children:"Manage Courier"})]},J.id))})]}),A&&T&&a.jsx(ZS,{isOpen:T,onClose:F,courierStats:A,courierUser:t.find(J=>J.id===A.courierId),payoutRequests:o.filter(J=>J.courierId===A.courierId&&J.type===dl.WITHDRAWAL_REQUEST&&J.status===Xl.PENDING),users:t,courierTransactions:o,onUpdateSettings:l,onApplyPenalty:f,onProcessPayout:m,onDeclinePayout:g}),a.jsx(dr,{isOpen:!!E,onClose:()=>j(null),title:V,size:"4xl",children:E&&a.jsx("div",{className:"max-h-[70vh] overflow-y-auto",children:a.jsx(yl,{shipments:E,onSelect:Q})})})]})},ZS=({isOpen:e,onClose:t,courierStats:n,courierUser:r,payoutRequests:o,users:l,courierTransactions:f,onUpdateSettings:m,onApplyPenalty:g,onProcessPayout:x,onDeclinePayout:A})=>{var Z,F,k;const{shipments:N,addToast:T}=Sn(),[v,O]=me.useState({commissionType:n.commissionType,commissionValue:n.commissionValue}),[D,P]=me.useState(0),[C,E]=me.useState(""),[j,V]=me.useState({}),W=(Q,J)=>{var Y;const G=(Y=Q.target.files)==null?void 0:Y[0];if(G){const z=new FileReader;z.onloadend=()=>{V(X=>({...X,[J]:z.result}))},z.readAsDataURL(G)}};me.useEffect(()=>{O({commissionType:n.commissionType,commissionValue:n.commissionValue})},[n]),me.useEffect(()=>{if(o.length===0&&e){const Q=setTimeout(()=>{t()},5e3);return()=>clearTimeout(Q)}},[o.length,e,t]);const ie=()=>{m(r.id,v),t()},B=()=>{D>0&&C&&(g(r.id,D,C),P(0),E(""),t())},R=Q=>{if(Q.paymentMethod==="Bank Transfer"&&!j[Q.id]){T("Please upload proof of transfer for this payout.","error");return}confirm(`Are you sure you want to approve this payout of ${Math.abs(Q.amount).toFixed(2)} EGP for ${r.name}?`)&&(x(Q.id,Math.abs(Q.amount),j[Q.id]),T("Payout processed successfully! The request has been removed from pending payouts.","success"))},M=Q=>{confirm(`Are you sure you want to decline this payout request of ${Math.abs(Q.amount).toFixed(2)} EGP for ${r.name}?`)&&(A(Q.id),T("Payout declined successfully! The request has been removed from pending payouts.","success"))};return a.jsx(dr,{isOpen:e,onClose:t,title:`Manage ${r.name}`,size:"2xl",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"p-4 bg-secondary rounded-lg",children:[a.jsx("h3",{className:"font-bold text-foreground mb-3",children:"Commission Settings"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Type"}),a.jsxs("select",{value:v.commissionType,onChange:Q=>O(J=>({...J,commissionType:Q.target.value})),className:"w-full p-2 border border-border rounded-md bg-background",children:[a.jsx("option",{value:"flat",children:"Flat Rate"}),a.jsx("option",{value:"percentage",children:"Percentage"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Value"}),a.jsx("input",{type:"number",value:v.commissionValue,onChange:Q=>O(J=>({...J,commissionValue:parseFloat(Q.target.value)})),className:"w-full p-2 border border-border rounded-md bg-background"})]})]}),a.jsx("button",{onClick:ie,className:"mt-4 w-full bg-primary text-primary-foreground py-2 rounded-lg font-semibold",children:"Save Settings"})]}),a.jsxs("div",{className:"p-4 bg-secondary rounded-lg",children:[a.jsx("h3",{className:"font-bold text-foreground mb-3",children:"Apply Manual Penalty"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Amount (EGP)"}),a.jsx("input",{type:"number",value:D,onChange:Q=>P(parseFloat(Q.target.value)),className:"w-full p-2 border border-border rounded-md bg-background"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Reason"}),a.jsx("input",{type:"text",value:C,onChange:Q=>E(Q.target.value),className:"w-full p-2 border border-border rounded-md bg-background"})]})]}),a.jsx("button",{onClick:B,className:"mt-4 w-full bg-red-500 text-white py-2 rounded-lg font-semibold",children:"Apply Penalty"})]}),o.length>0&&a.jsxs("div",{className:"p-4 bg-secondary rounded-lg",children:[a.jsx("h3",{className:"font-bold text-foreground mb-3",children:"Pending Payout Requests"}),a.jsx("div",{className:"space-y-3",children:o.map(Q=>a.jsxs("div",{className:"bg-background p-3 rounded-lg border border-border",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"font-semibold text-foreground",children:[(Number(-Q.amount)||0).toFixed(2)," EGP"]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(Q.timestamp).toLocaleString()}),a.jsx("p",{className:"text-xs text-muted-foreground",children:Q.paymentMethod})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>M(Q),className:"px-3 py-1 bg-red-500 hover:bg-red-600 text-white text-xs font-semibold rounded transition-colors",title:"Decline this payout request",children:"Decline"}),a.jsx("button",{onClick:()=>R(Q),className:"px-3 py-1 bg-green-500 hover:bg-green-600 text-white text-xs font-semibold rounded transition-colors",title:"Approve and process this payout",children:"Approve"})]})]}),Q.paymentMethod==="Bank Transfer"&&a.jsxs("div",{className:"mt-2 pt-2 border-t border-border",children:[a.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Proof of Transfer"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"file",accept:"image/*",onChange:J=>W(J,Q.id),className:"w-full text-xs"}),j[Q.id]&&a.jsx(uv,{className:"w-4 h-4 text-green-500"})]})]})]},Q.id))})]}),a.jsxs("div",{className:"p-4 bg-secondary rounded-lg",children:[a.jsx("h3",{className:"font-bold text-foreground mb-3",children:"Referral Management"}),a.jsxs("div",{className:"space-y-3",children:[r.referrerId&&a.jsxs("div",{className:"bg-background p-3 rounded-lg border border-border",children:[a.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Referred By"}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-foreground",children:((Z=l.find(Q=>Q.id===r.referrerId))==null?void 0:Z.name)||"Unknown User"}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["ID: ",((F=l.find(Q=>Q.id===r.referrerId))==null?void 0:F.publicId)||"N/A"]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-sm font-medium text-green-600",children:[(Number((k=l.find(Q=>Q.id===r.referrerId))==null?void 0:k.referralCommission)||0).toFixed(2)," EGP"]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"per delivery"})]})]})]}),(()=>{const Q=l.filter(J=>J.referrerId===r.id&&J.roles.includes(zt.COURIER));return Q.length>0?a.jsxs("div",{className:"bg-background p-3 rounded-lg border border-border",children:[a.jsxs("h4",{className:"text-sm font-medium text-muted-foreground mb-2",children:["Referrals Made (",Q.length,")"]}),a.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:Q.map(J=>a.jsxs("div",{className:"flex items-center justify-between py-1",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-foreground",children:J.name}),a.jsx("p",{className:"text-xs text-muted-foreground",children:J.publicId})]}),a.jsx("div",{className:"text-right",children:a.jsxs("p",{className:"text-xs text-green-600",children:[f.filter(G=>{var Y;return G.courierId===r.id&&G.type===dl.REFERRAL_BONUS&&((Y=G.description)==null?void 0:Y.includes(J.name))}).length," bonuses earned"]})})]},J.id))})]}):a.jsx("div",{className:"bg-background p-3 rounded-lg border border-border text-center",children:a.jsx("p",{className:"text-sm text-muted-foreground",children:"No referrals made yet"})})})(),(()=>{const Q=f.filter(J=>J.courierId===r.id&&J.type===dl.REFERRAL_BONUS).reduce((J,G)=>J+(Number(G.amount)||0),0);return a.jsx("div",{className:"bg-background p-3 rounded-lg border border-border",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Total Referral Earnings"}),a.jsxs("p",{className:"text-lg font-bold text-green-600",children:[(Number(Q)||0).toFixed(2)," EGP"]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Commission Rate"}),a.jsxs("p",{className:"text-sm font-medium text-foreground",children:[(Number(r.referralCommission)||0).toFixed(2)," EGP/delivery"]})]})]})})})()]})]})]})})},QS=({onSelectShipment:e})=>{const{shipments:t,hasPermission:n,getCourierName:r,updateShipmentFees:o}=Sn(),[l,f]=me.useState(""),[m,g]=me.useState("all"),[x,A]=me.useState(""),N=n(Ut.VIEW_ADMIN_FINANCIALS),T=P=>{if([tt.DELIVERED,tt.DELIVERY_FAILED].includes(P.status))return!1;const C=new Date(Date.now()-2.5*24*60*60*1e3);return new Date(P.creationDate)<C},v=me.useMemo(()=>{const P=t.length,C=t.filter(W=>W.status===tt.DELIVERED).length,E=t.filter(W=>W.status===tt.DELIVERY_FAILED).length,j=t.filter(W=>W.status===tt.OUT_FOR_DELIVERY).length,V=t.filter(T).length;return{total:P,delivered:C,failed:E,outForDelivery:j,overdue:V}},[t]),O=me.useMemo(()=>{let P=[...t];if(x&&(P=P.filter(C=>C.creationDate.startsWith(x))),l.trim()){const C=l.trim().toLowerCase();P=P.filter(E=>E.id.toLowerCase().includes(C)||E.recipientName.toLowerCase().includes(C)||E.clientName.toLowerCase().includes(C))}return m!=="all"&&(m==="Overdue"?P=P.filter(T):P=P.filter(C=>C.status===m)),P.sort((C,E)=>new Date(E.creationDate).getTime()-new Date(C.creationDate).getTime())},[t,x,l,m]),D=()=>{const P=["ID","Client","Recipient","Date","Status","Courier","Total COD (EGP)","Package Value (EGP)"];N&&P.push("Client Fee (EGP)","Courier Commission (EGP)","Net Profit (EGP)");const C=O.map(E=>{const j=Number(E.price)||0,V=Number(E.packageValue)||0,W=[E.id,E.clientName,E.recipientName,new Date(E.creationDate).toLocaleDateString(),E.status,r(E.courierId),(Number(j)||0).toFixed(2),(Number(V)||0).toFixed(2)];if(N){const ie=Number(E.clientFlatRateFee)||0,B=Number(E.courierCommission)||0;let R=0;E.courierId&&E.clientFlatRateFee&&E.courierCommission&&(R=ie-B),W.push((Number(ie)||0).toFixed(2),(Number(B)||0).toFixed(2),(Number(R)||0).toFixed(2))}return W});Ei(P,C,"Total_Shipments_Report")};return a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Shipments Overview"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[a.jsx(Rt,{title:"Total Shipments",value:v.total,icon:a.jsx(Xi,{}),color:"#3b82f6"}),a.jsx(Rt,{title:"Delivered",value:v.delivered,icon:a.jsx(Ls,{}),color:"#16a34a"}),a.jsx(Rt,{title:"Out for Delivery",value:v.outForDelivery,icon:a.jsx(Wi,{}),color:"#06b6d4"}),a.jsx(Rt,{title:"Failed",value:v.failed,icon:a.jsx(vu,{}),color:"#ef4444"}),a.jsx(Rt,{title:"Overdue",value:v.overdue,icon:a.jsx(du,{}),color:"#f97316"})]}),a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"p-4 border-b border-border flex flex-col lg:flex-row gap-4 items-center flex-wrap",children:[a.jsx("input",{type:"text",placeholder:"Search ID, Recipient, Client...",value:l,onChange:P=>f(P.target.value),className:"flex-grow w-full lg:w-auto px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background"}),a.jsxs("select",{value:m,onChange:P=>g(P.target.value),className:"w-full lg:w-auto px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background",children:[a.jsx("option",{value:"all",children:"All Statuses"}),a.jsx("option",{value:"Overdue",children:"Overdue"}),Object.values(tt).map(P=>a.jsx("option",{value:P,children:P},P))]}),a.jsx("input",{type:"date",value:x,onChange:P=>A(P.target.value),className:"w-full lg:w-auto px-4 py-2 border border-border rounded-lg","aria-label":"Filter by creation date"}),a.jsxs("button",{onClick:D,className:"w-full lg:w-auto flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition",children:[a.jsx(Ki,{className:"w-5 h-5"}),"Export CSV"]})]}),a.jsx(yl,{shipments:O,onSelect:e,showPackageValue:!0,priceColumnTitle:"Total COD",showClientFee:N,showCourierCommission:N,showNetProfit:N,showEditableFees:N,updateShipmentFees:N?o:void 0})]})]})},KS={0:"bwbwwwbbw",1:"bbwbwwwbw",2:"bwbbwwwbw",3:"bbbbwwwbw",4:"bwbwbbwbw",5:"bbwbwbbwbw",6:"bwbbwbbwbw",7:"bwbwwwbbwbw",8:"bbwbwwbbw",9:"bwbbwwbbw",A:"bbwbwwwbbw",B:"bwbbwwwbbw",C:"bbbbwwwbbw",D:"bwbwbbwbbw",E:"bbwbwbbwbbw",F:"bwbbwbbwbbw",G:"bwbwwwbbbwbw",H:"bbwbwwwbbbwbw",I:"bwbbwwwbbbwbw",J:"bwbwbbwbbbwbw",K:"bbwbwwwbwbw",L:"bwbbwwwbwbw",M:"bbbbwwwbwbw",N:"bwbwbbwbwbw",O:"bbwbwbbwbwbw",P:"bwbbwbbwbwbw",Q:"bwbwwwbbwbwbw",R:"bbwbwwbbwbw",S:"bwbbwwbbwbw",T:"bwbwbbwbbwbw",U:"bbwbbwbwwwbw",V:"bwwbbwbwwwbw",W:"bbwbbwbbwwwbw",X:"bwwbwbwbbwbw",Y:"bbwbwbwbbwbw",Z:"bwwbwbwbbwbw","-":"bwwbwbwwwbw",".":"bbwbwbwwwbw"," ":"bwwbbwbwwwbw",$:"bwwbwwbwwbwbw","/":"bwwbwwbwbwwbw","+":"bwwbwbwwbwwbw","%":"bwbwwbwwbwwbw","*":"bwwbwbbwbwwwbw"},JS=e=>{const t=`*${e.toUpperCase().replace(/[^A-Z0-9-]/g,"")}*`;let n="",r=0;const o=1.5,l=o*2.5;for(const f of t){const m=KS[f];if(m){for(let g=0;g<m.length;g++){const x=g%2===0,N=m[g]==="B"||m[g]==="w"?l:o;x&&(n+=`M${r},0 V60 `),r+=N}r+=o}}return a.jsx("svg",{x:"0px",y:"0px",viewBox:`0 0 ${r} 60`,className:"w-full h-12",children:a.jsx("path",{d:n,stroke:"#000000",strokeWidth:o})})},$S=({shipment:e})=>{const t=e.clientFlatRateFee||e.price-e.packageValue,n=e.id.split("-").slice(2).join("-");return a.jsx("div",{className:"bg-white p-8 border-4 border-dashed border-slate-300 w-full printable-label-container",children:a.jsxs("div",{className:"printable-label",style:{fontFamily:"sans-serif",color:"black"},children:[a.jsxs("header",{className:"flex justify-between items-center pb-4 border-b-2 border-black",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("img",{src:"/shuhna-logo-main.png",alt:"Shuhna Express Logo",className:"w-12 h-12 object-contain"}),a.jsx("div",{children:a.jsx("h1",{className:"text-2xl font-extrabold text-black",children:"Shuhna Express"})})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-sm",children:["Date: ",new Date(e.creationDate).toLocaleDateString()]}),a.jsx("p",{className:"text-sm",children:"Shipment ID:"}),a.jsx("p",{className:"font-bold font-mono text-lg",children:e.id})]})]}),a.jsxs("main",{className:"grid grid-cols-2 gap-8 my-8",children:[a.jsxs("div",{className:"pr-8 border-r-2 border-dashed border-slate-400",children:[a.jsx("h2",{className:"text-xs font-bold uppercase text-slate-600 mb-2",children:"FROM"}),a.jsx("p",{className:"font-bold text-lg",children:e.clientName}),a.jsxs("p",{children:[e.fromAddress.street,", ",e.fromAddress.details]}),a.jsxs("p",{children:[e.fromAddress.city,", ",e.fromAddress.zone]})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xs font-bold uppercase text-slate-600 mb-2",children:"TO"}),a.jsx("p",{className:"font-bold text-xl",children:e.recipientName}),a.jsxs("p",{className:"text-lg",children:[e.toAddress.street,", ",e.toAddress.details]}),a.jsxs("p",{className:"text-lg",children:[e.toAddress.city,", ",e.toAddress.zone]}),a.jsxs("p",{className:"font-bold text-lg mt-2",children:["Phone: ",e.recipientPhone]})]})]}),a.jsx("footer",{className:"border-t-2 border-black pt-4",children:a.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs uppercase font-bold text-slate-600",children:"Payment Details"}),a.jsx("p",{className:"text-2xl font-bold",children:e.paymentMethod}),a.jsxs("div",{className:"mt-2",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{children:"Package Value:"})," ",a.jsxs("span",{children:[(Number(e.packageValue)||0).toFixed(2)," EGP"]})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{children:"Shipping Fee:"})," ",a.jsxs("span",{children:[(Number(t)||0).toFixed(2)," EGP"]})]}),e.paymentMethod===Rn.COD&&a.jsxs("div",{className:"flex justify-between text-xl font-extrabold mt-1 border-t border-black pt-1",children:[a.jsx("span",{children:"COD Amount:"})," ",a.jsxs("span",{className:"text-green-600",children:[(Number(e.price)||0).toFixed(2)," EGP"]})]}),e.paymentMethod===Rn.TRANSFER&&e.amountToCollect&&a.jsxs("div",{className:"flex justify-between text-xl font-extrabold mt-1 border-t border-black pt-1",children:[a.jsx("span",{children:"Collect:"})," ",a.jsxs("span",{className:"text-orange-600",children:[(Number(e.amountToCollect)||0).toFixed(2)," EGP"]})]}),e.paymentMethod===Rn.WALLET&&a.jsxs("div",{className:"flex justify-between text-xl font-extrabold mt-1 border-t border-black pt-1",children:[a.jsx("span",{children:"Paid by Wallet"})," ",a.jsx("span",{className:"text-blue-600",children:"✓"})]})]}),a.jsx("p",{className:"text-xs uppercase font-bold text-slate-600 mt-4",children:"Package"}),a.jsxs("p",{children:[e.packageDescription,e.isLargeOrder&&" (Large Order)"]})]}),a.jsxs("div",{className:"text-center",children:[JS(n),a.jsx("p",{className:"font-mono tracking-widest text-sm mt-1",children:e.id})]})]})})]})})},e8=e=>e.replace(/_/g," ").replace(/\b\w/g,t=>t.toUpperCase()),t8=()=>{const{customRoles:e,users:t,hasPermission:n,addRole:r,updateRole:o,deleteRole:l,addToast:f}=Sn(),[m,g]=me.useState(!1),[x,A]=me.useState("add"),[N,T]=me.useState(null),[v,O]=me.useState(null);if(!n(Ut.MANAGE_ROLES))return a.jsxs("div",{className:"text-center p-8",children:[a.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Access Denied"}),a.jsx("p",{className:"text-muted-foreground",children:"You do not have permission to manage roles."})]});const D=(W,ie)=>{A(W),T(ie||null),g(!0)},P=()=>{g(!1),T(null)},C=W=>{if(W.isSystemRole){f("System roles cannot be deleted.","error");return}O(W)},E=()=>{v&&(l(v.id),O(null))},j=me.useMemo(()=>e.filter(W=>W.isSystemRole).length,[e]),V=e.length-j;return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-3xl font-bold text-foreground",children:"Role Management"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"Define roles and manage their permissions across the application."})]}),a.jsxs("button",{onClick:()=>D("add"),className:"w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-3 bg-primary text-primary-foreground font-semibold rounded-lg hover:bg-primary/90 transition shadow-sm",children:[a.jsx(fl,{className:"w-5 h-5"}),"Create New Role"]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsx(Rt,{title:"Total Roles",value:e.length,icon:a.jsx(Hc,{}),color:"#3b82f6"}),a.jsx(Rt,{title:"Custom Roles",value:V,icon:a.jsx(Ms,{}),color:"#16a34a"}),a.jsx(Rt,{title:"System Roles",value:j,icon:a.jsx(ax,{}),color:"#f97316"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(W=>{const ie=t.filter(B=>(B.roles||[]).includes(W.name)).length;return a.jsxs("div",{className:"card flex flex-col hover:shadow-lg hover:-translate-y-1 transition-all duration-300",children:[a.jsxs("div",{className:"p-5",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsx("h3",{className:"text-lg font-bold text-foreground",children:W.name}),W.isSystemRole&&a.jsx("span",{title:"System Role",children:a.jsx(ax,{className:"w-5 h-5 text-muted-foreground"})})]}),a.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"A system-defined role with a set of permissions for core functionalities."})]}),a.jsxs("div",{className:"p-5 border-y border-border bg-secondary flex-grow grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-primary",children:ie}),a.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase",children:"Users"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-primary",children:W.permissions.length}),a.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase",children:"Permissions"})]})]}),a.jsxs("div",{className:"p-3 flex items-center justify-end gap-2",children:[a.jsxs("button",{onClick:()=>D("edit",W),className:"flex items-center gap-2 px-4 py-2 bg-secondary text-secondary-foreground font-semibold rounded-lg hover:bg-accent transition text-sm",children:[a.jsx(Ms,{className:"w-4 h-4"}),"Edit"]}),a.jsxs("button",{onClick:()=>C(W),disabled:W.isSystemRole,className:"flex items-center gap-2 px-4 py-2 bg-red-500/10 text-red-700 dark:text-red-400 font-semibold rounded-lg hover:bg-red-500/20 transition text-sm disabled:bg-muted disabled:text-muted-foreground disabled:cursor-not-allowed",children:[a.jsx(Yd,{className:"w-4 h-4"}),"Delete"]})]})]},W.id)})}),m&&a.jsx(n8,{isOpen:m,onClose:P,mode:x,role:N,addRole:r,updateRole:o}),a.jsx(dr,{isOpen:!!v,onClose:()=>O(null),title:"Confirm Deletion",children:v&&a.jsxs("div",{children:[a.jsxs("p",{children:["Are you sure you want to delete the role ",a.jsx("strong",{children:v.name}),"?"]}),a.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Users with this role will lose their permissions. This action cannot be undone."}),a.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[a.jsx("button",{onClick:()=>O(null),className:"px-4 py-2 bg-secondary rounded-lg font-semibold",children:"Cancel"}),a.jsx("button",{onClick:E,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-semibold",children:"Delete Role"})]})]})})]})},n8=({isOpen:e,onClose:t,mode:n,role:r,addRole:o,updateRole:l})=>{const[f,m]=me.useState((r==null?void 0:r.name)||""),[g,x]=me.useState((r==null?void 0:r.permissions)||[]),[A,N]=me.useState({}),T=me.useMemo(()=>Object.values(Ut).reduce((C,E)=>{const j=E.split("_")[0];return C[j]||(C[j]=[]),C[j].push(E),C},{}),[]),v=C=>{N(E=>({...E,[C]:!E[C]}))},O=(C,E)=>{const j=T[C];x(E?V=>[...new Set([...V,...j])]:V=>V.filter(W=>!j.includes(W)))},D=C=>{if(C.preventDefault(),n==="add")o({name:f,permissions:g,isSystemRole:!1}).then(t);else if(r){const E={name:f,permissions:g};l(r.id,E).then(t)}},P=({checked:C,onChange:E})=>a.jsx("button",{type:"button",onClick:()=>E(!C),className:`relative inline-flex items-center h-6 rounded-full w-11 transition-colors ${C?"bg-primary":"bg-muted"}`,children:a.jsx("span",{className:`inline-block w-4 h-4 transform bg-white rounded-full transition-transform ${C?"translate-x-6":"translate-x-1"}`})});return a.jsx(dr,{isOpen:e,onClose:t,title:n==="add"?"Create New Role":`Edit Role: ${r==null?void 0:r.name}`,size:"4xl",children:a.jsxs("form",{onSubmit:D,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Role Name"}),a.jsx("input",{type:"text",value:f,onChange:C=>m(C.target.value),className:"w-full px-4 py-2 border border-border rounded-lg bg-background",required:!0,disabled:r==null?void 0:r.isSystemRole}),(r==null?void 0:r.isSystemRole)&&a.jsx("p",{className:"text-xs text-muted-foreground mt-2 p-2 bg-secondary rounded",children:"Permissions for system roles can be modified, but the role name is fixed."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-2",children:"Permissions"}),a.jsx("div",{className:"space-y-2 max-h-[60vh] overflow-y-auto p-4 bg-secondary rounded-lg border border-border",children:Object.entries(T).map(([C,E])=>{const j=E.every(V=>g.includes(V));return a.jsxs("div",{className:"bg-background border border-border rounded-lg overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>v(C),className:"w-full flex justify-between items-center p-4",children:[a.jsx("h4",{className:"font-semibold text-foreground capitalize",children:C}),a.jsx(T6,{className:`w-5 h-5 text-muted-foreground transition-transform ${A[C]?"rotate-180":""}`})]}),A[C]&&a.jsxs("div",{className:"p-4 border-t border-border",children:[a.jsx("div",{className:"pb-3 mb-3 border-b border-border",children:a.jsxs("label",{className:"flex items-center gap-3 w-full cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:j,onChange:V=>O(C,V.target.checked),className:"h-4 w-4 rounded border-border text-primary focus:ring-primary"}),a.jsx("span",{className:"text-sm font-semibold text-muted-foreground",children:"Select All"})]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4",children:E.map(V=>a.jsxs("label",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-foreground",children:e8(V)}),a.jsx(P,{checked:g.includes(V),onChange:W=>{x(W?ie=>[...new Set([...ie,V])]:ie=>ie.filter(B=>B!==V))}})]},V))})]})]},C)})})]}),a.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[a.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 bg-secondary text-secondary-foreground rounded-lg font-semibold hover:bg-accent transition",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-6 py-2 bg-primary text-primary-foreground rounded-lg font-semibold hover:bg-primary/90 transition",children:n==="add"?"Create Role":"Save Changes"})]})]})})},r8=({onSelectShipment:e})=>{const{currentUser:t,shipments:n,users:r}=Sn(),[o,l]=me.useState(""),[f,m]=me.useState("all"),[g,x]=me.useState(""),A=me.useMemo(()=>r.filter(v=>v.roles.includes(zt.CLIENT)),[r]),N=me.useMemo(()=>{if(!t)return[];let v=n.filter(O=>O.courierId===t.id&&O.status===tt.DELIVERED);if(g){const O=new Date(g);v=v.filter(D=>D.deliveryDate?new Date(D.deliveryDate).toDateString()===O.toDateString():!1)}if(f!=="all"&&(v=v.filter(O=>O.clientId===f)),o.trim()!==""){const O=o.trim().toLowerCase();v=v.filter(D=>D.id.toLowerCase().includes(O)||D.recipientName.toLowerCase().includes(O))}return v.sort((O,D)=>new Date(D.deliveryDate||0).getTime()-new Date(O.deliveryDate||0).getTime())},[t,n,g,o,f]),T=()=>{const v=["ID","Client","Recipient","Delivery Date","Status","Price (EGP)","Commission (EGP)"],O=N.map(D=>[D.id,D.clientName,D.recipientName,D.deliveryDate?new Date(D.deliveryDate).toLocaleDateString():"N/A",D.status,(Number(D.price)||0).toFixed(2),(Number(D.courierCommission)||0).toFixed(2)]);Ei(v,O,"My_Completed_Shipments")};return t?a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"My Completed Orders"}),a.jsxs("div",{className:"mb-6 card p-4 flex flex-col lg:flex-row gap-4 items-center flex-wrap",children:[a.jsx("div",{className:"flex-grow w-full lg:w-auto",children:a.jsx("input",{type:"text",placeholder:"Search by ID or Recipient...",value:o,onChange:v=>l(v.target.value),className:"w-full px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background"})}),a.jsx("div",{className:"flex-grow w-full lg:w-auto",children:a.jsxs("select",{value:f,onChange:v=>m(v.target.value==="all"?"all":Number(v.target.value)),className:"w-full px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background",children:[a.jsx("option",{value:"all",children:"All Clients"}),A.map(v=>a.jsx("option",{value:v.id,children:v.name},v.id))]})}),a.jsxs("div",{className:"flex items-center gap-2 w-full lg:w-auto",children:[a.jsx("input",{type:"date",value:g,onChange:v=>x(v.target.value),className:"w-full px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background","aria-label":"Filter by delivery date"}),g&&a.jsx("button",{onClick:()=>x(""),className:"px-4 py-2 text-sm font-semibold text-muted-foreground rounded-lg hover:bg-accent transition","aria-label":"Clear date filter",children:"Clear"})]}),a.jsx("div",{className:"lg:ml-auto w-full lg:w-auto",children:a.jsxs("button",{onClick:T,className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition",children:[a.jsx(Ki,{className:"w-5 h-5"}),"Export as CSV"]})})]}),a.jsx("div",{className:"card overflow-hidden",children:a.jsx(yl,{shipments:N,onSelect:e})})]}):null},i8=()=>{const{inventoryItems:e,updateInventoryItem:t,addInventoryItem:n,deleteInventoryItem:r,hasPermission:o}=Sn(),[l,f]=me.useState(!1),[m,g]=me.useState("add"),[x,A]=me.useState(null),[N,T]=me.useState(null),[v,O]=me.useState({name:"",quantity:0,unit:"units",minStock:10,unitPrice:0}),[D,P]=me.useState(""),[C,E]=me.useState(!1),j=o(Ut.MANAGE_INVENTORY),V=o(Ut.DELETE_INVENTORY_ITEM),W=o(Ut.VIEW_ADMIN_FINANCIALS),{totalInventoryValue:ie,totalItems:B,lowStockCount:R}=me.useMemo(()=>{const X=W?e.reduce((ge,ue)=>ge+Number(ue.quantity)*(Number(ue.unitPrice)||0),0):0,te=e.filter(ge=>ge.minStock&&ge.quantity<=ge.minStock).length;return{totalInventoryValue:X,totalItems:e.length,lowStockCount:te}},[e,W]),M=me.useMemo(()=>e.filter(X=>{const te=X.name.toLowerCase().includes(D.toLowerCase());return C?te&&X.minStock&&X.quantity<=X.minStock:te}),[e,D,C]);if(!j)return a.jsxs("div",{className:"text-center p-8",children:[a.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Access Denied"}),a.jsx("p",{className:"text-muted-foreground",children:"You do not have permission to manage inventory."})]});const Z=(X,te)=>{g(X),T(te||null),O(te?{name:te.name,quantity:te.quantity,unit:te.unit,minStock:te.minStock||10,unitPrice:te.unitPrice||0}:{name:"",quantity:0,unit:"units",minStock:10,unitPrice:0}),f(!0)},F=()=>{f(!1),T(null)},k=X=>{A(X)},Q=()=>{x&&(r(x.id),A(null))},J=X=>{const{name:te,value:ge}=X.target;O(ue=>({...ue,[te]:["quantity","minStock","unitPrice"].includes(te)?parseFloat(ge)||0:ge}))},G=X=>{X.preventDefault();const te={name:v.name,quantity:v.quantity,unit:v.unit,minStock:v.minStock,unitPrice:v.unitPrice};m==="add"?n(te):N&&t(N.id,te),F()},Y=()=>{const X=["ID","Item Name","Quantity","Unit","Last Updated"];W&&X.push("Min Stock","Unit Price (EGP)","Total Value (EGP)");const te=M.map(ge=>{const ue=[ge.id,ge.name,ge.quantity,ge.unit,new Date(ge.lastUpdated).toLocaleString()];return W&&ue.push(ge.minStock||0,(Number(ge.unitPrice)||0).toFixed(2),((Number(ge.quantity)||0)*(Number(ge.unitPrice)||0)).toFixed(2)),ue});Ei(X,te,"Inventory_Report")},z=({item:X})=>{if(!X.minStock)return a.jsxs("div",{className:"font-mono text-foreground",children:[X.quantity," ",a.jsx("span",{className:"text-muted-foreground",children:X.unit})]});const te=X.minStock||1,ge=Math.min(X.quantity/(te*2)*100,100);let ue="bg-green-500";return X.quantity<=te?ue="bg-red-500":X.quantity<=te*1.5&&(ue="bg-yellow-500"),a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-baseline mb-1",children:[a.jsx("span",{className:"font-mono text-foreground font-semibold",children:X.quantity}),a.jsxs("span",{className:"text-xs text-muted-foreground",children:["min: ",X.minStock]})]}),a.jsx("div",{className:"w-full bg-secondary rounded-full h-1.5",children:a.jsx("div",{className:`${ue} h-1.5 rounded-full`,style:{width:`${ge}%`}})})]})};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Inventory Dashboard"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"At-a-glance overview of your stock levels and value."})]}),a.jsxs("button",{onClick:()=>Z("add"),className:"w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-3 bg-primary text-primary-foreground font-semibold rounded-lg hover:bg-primary/90 transition shadow-sm",children:[a.jsx(fl,{}),"Add New Item"]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[W&&a.jsx(Rt,{title:"Total Inventory Value",value:`${(Number(ie)||0).toFixed(2)} EGP`,icon:a.jsx(ua,{}),color:"#3b82f6"}),a.jsx(Rt,{title:"Items in Stock",value:B,icon:a.jsx(ic,{}),color:"#10b981"}),a.jsx("div",{onClick:()=>E(X=>!X),className:`rounded-xl transition-all duration-300 ${C?"ring-2 ring-red-500 ring-offset-2":""}`,children:a.jsx(Rt,{title:"Low Stock Items",value:R,icon:a.jsx(vu,{}),color:"#ef4444",onClick:()=>{},subtitle:"Click to filter"})})]}),a.jsxs("div",{className:"card overflow-hidden",children:[a.jsxs("div",{className:"p-4 border-b border-border flex flex-col sm:flex-row justify-between items-center gap-4",children:[a.jsx("input",{type:"text",placeholder:"Search inventory items...",value:D,onChange:X=>P(X.target.value),className:"w-full md:w-1/3 px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background"}),a.jsxs("button",{onClick:Y,className:"w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-2 bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300 font-semibold rounded-lg hover:bg-green-200 dark:hover:bg-green-900/50 transition",children:[a.jsx(Ki,{className:"w-5 h-5"}),a.jsx("span",{children:"Export CSV"})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"bg-secondary",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Item Name"}),a.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase w-48",children:"Stock Level"}),W&&a.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Unit Price"}),W&&a.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Total Value"}),a.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Last Updated"}),a.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-border",children:M.map(X=>a.jsxs("tr",{children:[a.jsx("td",{className:"p-4 font-semibold text-foreground",children:X.name}),a.jsx("td",{className:"p-4",children:a.jsx(z,{item:X})}),W&&a.jsx("td",{className:"p-4 font-mono text-green-600 dark:text-green-400",children:(Number(X.unitPrice)||0).toFixed(2)}),W&&a.jsx("td",{className:"p-4 font-mono font-semibold text-foreground",children:(Number(X.quantity)*(Number(X.unitPrice)||0)).toFixed(2)}),a.jsx("td",{className:"p-4 text-sm text-muted-foreground",children:new Date(X.lastUpdated).toLocaleString()}),a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>Z("edit",X),className:"p-2 text-muted-foreground hover:text-primary hover:bg-accent rounded-md",children:a.jsx(Ms,{})}),V&&a.jsx("button",{onClick:()=>k(X),className:"p-2 text-muted-foreground hover:text-red-500 hover:bg-accent rounded-md",children:a.jsx(Yd,{})})]})})]},X.id))})]})}),M.length===0&&a.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"No inventory items match your search."})]}),a.jsx(dr,{isOpen:l,onClose:F,title:m==="add"?"Add New Inventory Item":"Edit Inventory Item",children:a.jsxs("form",{onSubmit:G,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Item Name"}),a.jsx("input",{type:"text",name:"name",value:v.name,onChange:J,className:"w-full px-4 py-2 border border-border rounded-lg bg-background",required:!0})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Quantity"}),a.jsx("input",{type:"number",name:"quantity",value:v.quantity,onChange:J,className:"w-full px-4 py-2 border border-border rounded-lg bg-background",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Unit"}),a.jsx("input",{type:"text",name:"unit",placeholder:"e.g., sheets, boxes",value:v.unit,onChange:J,className:"w-full px-4 py-2 border border-border rounded-lg bg-background",required:!0})]})]}),a.jsx("div",{className:"p-4 border-t border-border mt-4 space-y-4",children:a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Minimum Stock"}),a.jsx("input",{type:"number",name:"minStock",value:v.minStock,onChange:J,className:"w-full px-4 py-2 border border-border rounded-lg bg-background",required:!0})]}),W&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Unit Price (EGP)"}),a.jsx("input",{type:"number",step:"0.01",name:"unitPrice",value:v.unitPrice,onChange:J,className:"w-full px-4 py-2 border border-border rounded-lg bg-background",required:!0})]})]})}),a.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[a.jsx("button",{type:"button",onClick:F,className:"px-4 py-2 bg-secondary text-secondary-foreground rounded-lg font-semibold",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg font-semibold",children:"Save Item"})]})]})}),a.jsx(dr,{isOpen:!!x,onClose:()=>A(null),title:"Confirm Deletion",children:x&&a.jsxs("div",{children:[a.jsxs("p",{children:["Are you sure you want to delete ",a.jsx("strong",{children:x.name}),"?"]}),a.jsx("p",{className:"text-sm text-red-600 mt-2",children:"This cannot be undone."}),a.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[a.jsx("button",{onClick:()=>A(null),className:"px-4 py-2 bg-secondary rounded-lg font-semibold",children:"Cancel"}),a.jsx("button",{onClick:Q,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-semibold",children:"Delete Item"})]})]})})]})},a8=()=>{var ge;const{assets:e,users:t,hasPermission:n,addAsset:r,updateAsset:o,assignAsset:l,deleteAsset:f}=Sn(),[m,g]=me.useState(!1),[x,A]=me.useState("add"),[N,T]=me.useState(null),[v,O]=me.useState(null),[D,P]=me.useState({type:Qf.DEVICE,name:"",identifier:""}),[C,E]=me.useState(null),[j,V]=me.useState(""),[W,ie]=me.useState("all"),[B,R]=me.useState("all");if(!n(Ut.MANAGE_ASSETS))return a.jsxs("div",{className:"text-center p-8",children:[a.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Access Denied"}),a.jsx("p",{className:"text-muted-foreground",children:"You do not have permission to manage assets."})]});const M=t.filter(ue=>ue.roles.includes(zt.COURIER)||ue.roles.includes(zt.ADMIN)||ue.roles.includes(zt.SUPER_USER)),Z=ue=>{var L;return ue?((L=t.find(q=>q.id===ue))==null?void 0:L.name)||"Unknown User":"Unassigned"},F=ue=>{if(!ue.purchasePrice||!ue.purchaseDate||!ue.usefulLifeMonths||ue.usefulLifeMonths<=0)return null;const L=new Date(ue.purchaseDate),q=new Date,ee=(q.getFullYear()-L.getFullYear())*12+(q.getMonth()-L.getMonth());if(ee>=ue.usefulLifeMonths)return 0;const ae=ue.purchasePrice/ue.usefulLifeMonths*ee;return ue.purchasePrice-ae},k=me.useMemo(()=>e.filter(ue=>{var fe;const L=j.trim()===""||ue.name.toLowerCase().includes(j.toLowerCase())||((fe=ue.identifier)==null?void 0:fe.toLowerCase().includes(j.toLowerCase())),q=W==="all"||ue.status===W,ee=B==="all"||B==="unassigned"&&!ue.assignedToUserId||ue.assignedToUserId===Number(B);return L&&q&&ee}),[e,j,W,B]),Q=(ue,L)=>{A(ue),T(L||null),L?(P({...L}),E(L.assignedToUserId?String(L.assignedToUserId):null)):P({type:Qf.DEVICE,name:"",identifier:""}),g(!0)},J=()=>{g(!1),T(null)},G=ue=>{O(ue)},Y=()=>{v&&(f(v.id),O(null))},z=ue=>{const{name:L,value:q}=ue.target,ee=["purchasePrice","usefulLifeMonths"].includes(L);P(fe=>({...fe,[L]:ee?parseFloat(q)||0:q}))},X=ue=>{ue.preventDefault(),x==="add"?r(D):x==="edit"&&N?o(N.id,D):x==="assign"&&N&&l(N.id,C?parseInt(C):null),J()},te=()=>{const ue=["ID","Name","Type","Identifier","Status","Assigned To","Assignment Date","Current Value (EGP)"],L=k.map(q=>{const ee=F(q);return[q.id,q.name,q.type,q.identifier||"N/A",q.status,Z(q.assignedToUserId),q.assignmentDate?new Date(q.assignmentDate).toLocaleDateString():"N/A",ee!==null?(Number(ee)||0).toFixed(2):"N/A"]});Ei(ue,L,"Asset_Report")};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Asset Management"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage and assign company assets like vehicles and devices."})]}),a.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[a.jsxs("button",{onClick:te,className:"flex-1 sm:flex-none flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition",children:[a.jsx(Ki,{className:"w-5 h-5"}),a.jsx("span",{className:"hidden sm:inline",children:"Export"})]}),a.jsxs("button",{onClick:()=>Q("add"),className:"flex-1 sm:flex-none flex items-center justify-center gap-2 px-4 py-2 bg-primary text-primary-foreground font-semibold rounded-lg hover:bg-primary/90 transition",children:[a.jsx(fl,{}),"Add Asset"]})]})]}),a.jsxs("div",{className:"card p-4 flex flex-col md:flex-row gap-4 flex-wrap",children:[a.jsx("input",{type:"text",placeholder:"Search by name or identifier...",value:j,onChange:ue=>V(ue.target.value),className:"flex-grow px-4 py-2 border border-border rounded-lg bg-background"}),a.jsxs("select",{value:W,onChange:ue=>ie(ue.target.value),className:"w-full md:w-auto px-4 py-2 border border-border rounded-lg bg-background",children:[a.jsx("option",{value:"all",children:"All Statuses"}),Object.values(Ed).map(ue=>a.jsx("option",{value:ue,children:ue},ue))]}),a.jsxs("select",{value:B,onChange:ue=>R(ue.target.value),className:"w-full md:w-auto px-4 py-2 border border-border rounded-lg bg-background",children:[a.jsx("option",{value:"all",children:"All Users"}),a.jsx("option",{value:"unassigned",children:"Unassigned"}),M.map(ue=>a.jsx("option",{value:ue.id,children:ue.name},ue.id))]})]}),a.jsx("div",{className:"card overflow-hidden",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"bg-secondary",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Asset"}),a.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Type"}),a.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Current Value"}),a.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Status"}),a.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Assigned To"}),a.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-border",children:k.map(ue=>{const L=F(ue);return a.jsxs("tr",{children:[a.jsxs("td",{className:"p-4",children:[a.jsx("p",{className:"font-semibold text-foreground",children:ue.name}),a.jsx("p",{className:"text-sm text-muted-foreground font-mono",children:ue.identifier})]}),a.jsx("td",{className:"p-4 text-sm text-muted-foreground",children:ue.type}),a.jsx("td",{className:"p-4 font-mono text-sm font-semibold text-foreground",children:L!==null?`${L.toFixed(2)} EGP`:"N/A"}),a.jsx("td",{className:"p-4",children:a.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${ue.status===Ed.AVAILABLE?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"}`,children:ue.status})}),a.jsx("td",{className:"p-4 text-sm text-muted-foreground",children:Z(ue.assignedToUserId)}),a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>Q("edit",ue),className:"p-2 text-muted-foreground hover:text-primary hover:bg-accent rounded-md",children:a.jsx(Ms,{})}),a.jsx("button",{onClick:()=>Q("assign",ue),className:"p-2 text-muted-foreground hover:text-green-500 hover:bg-accent rounded-md",children:a.jsx(Gg,{})}),n(Ut.DELETE_ASSET)&&a.jsx("button",{onClick:()=>G(ue),className:"p-2 text-muted-foreground hover:text-red-500 hover:bg-accent rounded-md",children:a.jsx(Yd,{})})]})})]},ue.id)})})]})}),a.jsx(dr,{isOpen:m,onClose:J,title:x==="add"?"Add New Asset":x==="edit"?"Edit Asset":"Assign Asset",children:a.jsxs("form",{onSubmit:X,className:"space-y-4",children:[x!=="assign"?a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Asset Name"}),a.jsx("input",{type:"text",name:"name",value:D.name||"",onChange:z,className:"w-full p-2 border border-border rounded-md bg-background",required:!0})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Asset Type"}),a.jsx("select",{name:"type",value:D.type,onChange:z,className:"w-full p-2 border border-border rounded-md bg-background",children:Object.values(Qf).map(ue=>a.jsx("option",{value:ue,children:ue},ue))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Identifier"}),a.jsx("input",{type:"text",name:"identifier",value:D.identifier||"",onChange:z,className:"w-full p-2 border border-border rounded-md bg-background",placeholder:"e.g., License Plate, S/N"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-border",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Purchase Price (EGP)"}),a.jsx("input",{type:"number",step:"0.01",name:"purchasePrice",value:D.purchasePrice||"",onChange:z,className:"w-full p-2 border border-border rounded-md bg-background"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Purchase Date"}),a.jsx("input",{type:"date",name:"purchaseDate",value:((ge=D.purchaseDate)==null?void 0:ge.split("T")[0])||"",onChange:z,className:"w-full p-2 border border-border rounded-md bg-background"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Useful Life (in months)"}),a.jsx("input",{type:"number",name:"usefulLifeMonths",value:D.usefulLifeMonths||"",onChange:z,className:"w-full p-2 border border-border rounded-md bg-background"})]})]}):a.jsxs("div",{children:[a.jsxs("p",{className:"mb-2",children:["Assign ",a.jsx("strong",{children:N==null?void 0:N.name})," to:"]}),a.jsxs("select",{value:C||"",onChange:ue=>E(ue.target.value),className:"w-full p-2 border border-border rounded-md bg-background",children:[a.jsx("option",{value:"",children:"Unassigned"}),M.map(ue=>a.jsx("option",{value:ue.id,children:ue.name},ue.id))]})]}),a.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[a.jsx("button",{type:"button",onClick:J,className:"px-4 py-2 bg-secondary text-secondary-foreground rounded-lg font-semibold",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg font-semibold",children:"Save"})]})]})}),a.jsx(dr,{isOpen:!!v,onClose:()=>O(null),title:"Confirm Deletion",children:v&&a.jsxs("div",{children:[a.jsxs("p",{children:["Are you sure you want to delete the asset ",a.jsx("strong",{children:v.name})," (",v.identifier,")?"]}),a.jsx("p",{className:"text-sm text-red-600 mt-2",children:"This action cannot be undone."}),a.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[a.jsx("button",{onClick:()=>O(null),className:"px-4 py-2 bg-secondary rounded-lg font-semibold",children:"Cancel"}),a.jsx("button",{onClick:Y,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-semibold",children:"Delete Asset"})]})]})})]})},s8=()=>{const{currentUser:e,assets:t,hasPermission:n}=Sn();if(!n(Ut.VIEW_OWN_ASSETS))return a.jsxs("div",{className:"text-center p-8",children:[a.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"No Assets to Display"}),a.jsx("p",{className:"text-muted-foreground",children:"You do not have permission to view assets."})]});const r=t.filter(o=>o.assignedToUserId===(e==null?void 0:e.id));return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"My Assigned Assets"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"A list of all company assets currently assigned to you."})]}),r.length===0?a.jsxs("div",{className:"card text-center p-12",children:[a.jsx(Am,{className:"w-16 h-16 mx-auto text-muted-foreground/30"}),a.jsx("h3",{className:"mt-4 text-xl font-semibold text-foreground",children:"No Assets Assigned"}),a.jsx("p",{className:"mt-1 text-muted-foreground",children:"You do not currently have any company assets assigned to your account."})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(o=>a.jsxs("div",{className:"card p-6 border-l-4 border-primary",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsx("h3",{className:"text-lg font-bold text-foreground",children:o.name}),a.jsx("span",{className:"text-xs font-semibold px-2 py-1 rounded-full bg-secondary text-secondary-foreground",children:o.type})]}),a.jsx("p",{className:"font-mono text-sm text-muted-foreground mt-1",children:o.identifier}),a.jsxs("div",{className:"mt-4 pt-4 border-t border-border flex justify-between items-center",children:[o.status===Ed.ASSIGNED&&a.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[a.jsx(Ls,{className:"w-5 h-5"}),a.jsx("span",{className:"text-sm font-semibold",children:"Assigned to you"})]}),o.status===Ed.IN_REPAIR&&a.jsxs("div",{className:"flex items-center gap-2 text-yellow-600",children:[a.jsx(fv,{className:"w-5 h-5 animate-spin"}),a.jsx("span",{className:"text-sm font-semibold",children:"In Repair"})]}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Assigned: ",o.assignmentDate?new Date(o.assignmentDate).toLocaleDateString():"N/A"]})]})]},o.id))})]})},o8=()=>{const{suppliers:e,supplierTransactions:t,addSupplier:n,updateSupplier:r,deleteSupplier:o,addSupplierTransaction:l,hasPermission:f}=Sn(),[m,g]=me.useState(!1),[x,A]=me.useState("add"),[N,T]=me.useState(null),[v,O]=me.useState({}),[D,P]=me.useState(!1),[C,E]=me.useState({type:"Payment",amount:0,description:""}),[j,V]=me.useState("name"),[W,ie]=me.useState("asc"),[B,R]=me.useState("all");if(!f(Ut.MANAGE_SUPPLIERS))return a.jsx("div",{className:"text-center p-8",children:"Access Denied."});const M=me.useMemo(()=>{let G=e.map(Y=>{const z=t.filter(ue=>ue.supplier_id===Y.id),X=z.filter(ue=>ue.type==="Payment").reduce((ue,L)=>ue+(Number(L.amount)||0),0),te=z.filter(ue=>ue.type==="Credit").reduce((ue,L)=>ue+(Number(L.amount)||0),0),ge=te-X;return{...Y,totalPaid:X,totalOwed:te,outstandingBalance:ge}});return B==="owes-money"?G=G.filter(Y=>Y.outstandingBalance>0):B==="owed-money"?G=G.filter(Y=>Y.outstandingBalance<0):B==="balanced"&&(G=G.filter(Y=>Math.abs(Y.outstandingBalance)<.01)),G.sort((Y,z)=>{let X,te;switch(j){case"balance":X=Y.outstandingBalance,te=z.outstandingBalance;break;case"totalPaid":X=Y.totalPaid,te=z.totalPaid;break;case"totalOwed":X=Y.totalOwed,te=z.totalOwed;break;case"name":default:X=Y.name.toLowerCase(),te=z.name.toLowerCase();break}return typeof X=="string"?W==="asc"?X.localeCompare(te):te.localeCompare(X):W==="asc"?X-te:te-X}),G},[e,t,j,W,B]),Z=me.useMemo(()=>{const G=M.reduce((X,te)=>X+(Number(te.totalPaid)||0),0),Y=M.reduce((X,te)=>X+(Number(te.totalOwed)||0),0),z=M.reduce((X,te)=>X+(Number(te.outstandingBalance)||0),0);return{totalPaid:G,totalOwed:Y,outstandingBalance:z}},[M]),F=(G,Y)=>{A(G),T(Y||null),O(Y||{}),g(!0)},k=G=>{T(G),P(!0)},Q=G=>{G.preventDefault(),x==="add"?n(v):N&&r(N.id,v),g(!1)},J=G=>{G.preventDefault();const Y=Number(C.amount)||0;if(!N){alert("No supplier selected");return}if(Y<=0||isNaN(Y)){alert("Please enter a valid positive amount");return}l({supplier_id:N.id,date:new Date().toISOString(),...C,amount:Y}),P(!1),E({type:"Payment",amount:0,description:""})};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Supplier Management"}),a.jsxs("button",{onClick:()=>F("add"),className:"flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground font-semibold rounded-lg",children:[a.jsx(fl,{})," Add Supplier"]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsx(Rt,{title:"Total Owed to Suppliers",value:`${(Number(Z.totalOwed)||0).toFixed(2)} EGP`,icon:a.jsx(ua,{}),color:"#f59e0b"}),a.jsx(Rt,{title:"Total Paid to Suppliers",value:`${(Number(Z.totalPaid)||0).toFixed(2)} EGP`,icon:a.jsx(ua,{}),color:"#10b981"}),a.jsx(Rt,{title:"Total Outstanding Balance",value:`${(Number(Z.outstandingBalance)||0).toFixed(2)} EGP`,icon:a.jsx(ua,{}),color:"#ef4444"})]}),a.jsx("div",{className:"card p-4",children:a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Sort by:"}),a.jsxs("select",{value:j,onChange:G=>V(G.target.value),className:"px-3 py-1 border border-border rounded-md bg-background text-sm",children:[a.jsx("option",{value:"name",children:"Name"}),a.jsx("option",{value:"balance",children:"Balance"}),a.jsx("option",{value:"totalPaid",children:"Total Paid"}),a.jsx("option",{value:"totalOwed",children:"Total Owed"})]}),a.jsx("button",{onClick:()=>ie(W==="asc"?"desc":"asc"),className:"px-2 py-1 border border-border rounded-md bg-background text-sm hover:bg-secondary",children:W==="asc"?"↑":"↓"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Filter:"}),a.jsxs("select",{value:B,onChange:G=>R(G.target.value),className:"px-3 py-1 border border-border rounded-md bg-background text-sm",children:[a.jsx("option",{value:"all",children:"All Suppliers"}),a.jsx("option",{value:"owes-money",children:"We Owe Money"}),a.jsx("option",{value:"owed-money",children:"They Owe Money"}),a.jsx("option",{value:"balanced",children:"Balanced"})]})]}),a.jsxs("div",{className:"text-sm text-muted-foreground ml-auto",children:["Showing ",M.length," of ",e.length," suppliers"]})]})}),a.jsx("div",{className:"card overflow-hidden",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"bg-secondary",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Name"}),a.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Contact"}),a.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Total Owed"}),a.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Total Paid"}),a.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Balance"}),a.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-border",children:M.map(G=>a.jsxs("tr",{children:[a.jsx("td",{className:"p-4 font-semibold text-foreground",children:G.name}),a.jsxs("td",{className:"p-4 text-sm text-muted-foreground",children:[G.contact_person," (",G.phone,")"]}),a.jsx("td",{className:"p-4 font-mono text-muted-foreground",children:(Number(G.totalOwed)||0).toFixed(2)}),a.jsx("td",{className:"p-4 font-mono text-green-600 dark:text-green-400",children:(Number(G.totalPaid)||0).toFixed(2)}),a.jsxs("td",{className:`p-4 font-mono font-bold ${G.outstandingBalance>0?"text-red-600 dark:text-red-400":"text-foreground"}`,children:[(Number(G.outstandingBalance)||0).toFixed(2)," EGP"]}),a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>k(G),className:"px-3 py-1 bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300 text-sm font-semibold rounded",children:"Log Payment"}),a.jsx("button",{onClick:()=>F("edit",G),className:"p-2 text-muted-foreground hover:text-primary",children:a.jsx(Ms,{})}),a.jsx("button",{onClick:()=>o(G.id),className:"p-2 text-muted-foreground hover:text-red-500",children:a.jsx(Yd,{})})]})})]},G.id))})]})}),a.jsx(dr,{isOpen:m,onClose:()=>g(!1),title:x==="add"?"Add Supplier":"Edit Supplier",children:a.jsxs("form",{onSubmit:Q,className:"space-y-4",children:[a.jsx("input",{name:"name",value:v.name||"",onChange:G=>O({...v,name:G.target.value}),placeholder:"Supplier Name",className:"w-full p-2 border border-border rounded bg-background",required:!0}),a.jsx("input",{name:"contact_person",value:v.contact_person||"",onChange:G=>O({...v,contact_person:G.target.value}),placeholder:"Contact Person",className:"w-full p-2 border border-border rounded bg-background"}),a.jsx("input",{name:"phone",value:v.phone||"",onChange:G=>O({...v,phone:G.target.value}),placeholder:"Phone",className:"w-full p-2 border border-border rounded bg-background"}),a.jsx("input",{name:"email",value:v.email||"",onChange:G=>O({...v,email:G.target.value}),placeholder:"Email",className:"w-full p-2 border border-border rounded bg-background"}),a.jsx("textarea",{name:"address",value:v.address||"",onChange:G=>O({...v,address:G.target.value}),placeholder:"Address",className:"w-full p-2 border border-border rounded bg-background"}),a.jsx("button",{type:"submit",className:"w-full bg-primary text-primary-foreground py-2 rounded",children:"Save"})]})}),a.jsx(dr,{isOpen:D,onClose:()=>P(!1),title:`Log Transaction for ${N==null?void 0:N.name}`,children:a.jsxs("form",{onSubmit:J,className:"space-y-4",children:[a.jsxs("select",{value:C.type,onChange:G=>E({...C,type:G.target.value}),className:"w-full p-2 border border-border rounded bg-background",children:[a.jsx("option",{value:"Payment",children:"Payment"}),a.jsx("option",{value:"Credit",children:"Credit"})]}),a.jsx("input",{type:"number",value:C.amount,onChange:G=>E({...C,amount:Number(G.target.value)||0}),placeholder:"Amount",className:"w-full p-2 border border-border rounded bg-background",required:!0}),a.jsx("input",{value:C.description,onChange:G=>E({...C,description:G.target.value}),placeholder:"Description (optional)",className:"w-full p-2 border border-border rounded bg-background"}),a.jsx("button",{type:"submit",className:"w-full bg-primary text-primary-foreground py-2 rounded",children:"Log Transaction"})]})})]})},l8=({onSelectShipment:e})=>{const{shipments:t,hasPermission:n}=Sn(),[r,o]=me.useState(""),[l,f]=me.useState("");if(!n(Ut.VIEW_DELIVERED_SHIPMENTS))return a.jsx("div",{className:"p-8 text-center",children:"Access Denied."});const m=me.useMemo(()=>{let x=t.filter(A=>A.status===tt.DELIVERED);if(l&&(x=x.filter(A=>A.deliveryDate&&A.deliveryDate.startsWith(l))),r.trim()){const A=r.trim().toLowerCase();x=x.filter(N=>N.id.toLowerCase().includes(A)||N.recipientName.toLowerCase().includes(A))}return x.sort((A,N)=>new Date(N.deliveryDate).getTime()-new Date(A.deliveryDate).getTime())},[t,l,r]),g=()=>{const x=["ID","Client","Recipient","Delivery Date","Courier"],A=m.map(N=>[N.id,N.clientName,N.recipientName,N.deliveryDate?new Date(N.deliveryDate).toLocaleDateString():"N/A",N.courierId?`Courier ${N.courierId}`:"N/A"]);Ei(x,A,"Delivered_Shipments_Report")};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Delivered Shipments"}),a.jsxs("button",{onClick:g,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition",children:[a.jsx(Ki,{className:"w-5 h-5"}),"Export CSV"]})]}),a.jsxs("div",{className:"mb-6 card p-4 flex flex-col lg:flex-row gap-4 items-center",children:[a.jsx("input",{type:"text",placeholder:"Search by Shipment ID or Recipient...",value:r,onChange:x=>o(x.target.value),className:"w-full lg:w-1/3 px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background"}),a.jsx("input",{type:"date",value:l,onChange:x=>f(x.target.value),className:"w-full lg:w-auto px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background","aria-label":"Filter by delivery date"})]}),a.jsx("div",{className:"card overflow-hidden",children:a.jsx(yl,{shipments:m,onSelect:e,showClientFee:!1,showCourierCommission:!1,showNetProfit:!1})})]})},c8=()=>{const{users:e,shipments:t,hasPermission:n}=Sn(),[r,o]=me.useState(null),[l,f]=me.useState(null),[m,g]=me.useState("");if(!n(Ut.VIEW_COURIERS_BY_ZONE))return a.jsx("div",{className:"p-8 text-center",children:"Access Denied."});const x=me.useMemo(()=>e.filter(O=>O.roles.includes(zt.COURIER)),[e]),A=me.useMemo(()=>{const O=new Set;return x.forEach(D=>(D.zones||[]).forEach(P=>O.add(P))),Array.from(O).sort()},[x]),N=me.useMemo(()=>r?x.filter(O=>(O.zones||[]).includes(r)).map(O=>{const D=t.filter(C=>C.courierId===O.id&&[tt.ASSIGNED_TO_COURIER,tt.OUT_FOR_DELIVERY].includes(C.status)).length;return{...O,pendingTasks:D,isRestricted:{isRestricted:!1}.isRestricted}}):[],[r,x,t]),T=(O,D)=>{const P=t.filter(C=>C.courierId===O&&[tt.ASSIGNED_TO_COURIER,tt.OUT_FOR_DELIVERY].includes(C.status));f(P),g(`Pending Tasks for ${D}`)},v=()=>{if(!r)return;const O=["Courier Name","Phone","Status","Pending Tasks"],D=N.map(P=>[P.name,P.phone||"N/A",P.isRestricted?"Restricted":"Active",P.pendingTasks]);Ei(O,D,`Couriers_in_${r.replace(/\s/g,"_")}`)};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Couriers by Zone"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"View available couriers and their workload in a specific zone."})]}),a.jsxs("button",{onClick:v,disabled:!r,className:"w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition disabled:bg-muted",children:[a.jsx(Ki,{className:"w-5 h-5"}),"Export CSV"]})]}),a.jsxs("div",{className:"card p-4",children:[a.jsx("label",{htmlFor:"zone-select",className:"block text-sm font-medium text-foreground mb-2",children:"Select a Zone to View Couriers"}),a.jsxs("select",{id:"zone-select",value:r||"",onChange:O=>o(O.target.value),className:"w-full md:w-1/2 px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background",children:[a.jsx("option",{value:"",disabled:!0,children:"-- Select a Zone --"}),A.map(O=>a.jsx("option",{value:O,children:O},O))]})]}),r?a.jsxs("div",{className:"card overflow-hidden",children:[a.jsx("div",{className:"p-4 border-b border-border",children:a.jsxs("h3",{className:"text-lg font-bold text-foreground",children:["Available Couriers in ",r]})}),a.jsxs("div",{className:"overflow-x-auto",children:[a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"bg-secondary",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Courier"}),a.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Phone"}),a.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Status"}),a.jsx("th",{className:"p-4 text-xs font-medium text-muted-foreground uppercase",children:"Pending Tasks"})]})}),a.jsx("tbody",{className:"divide-y divide-border",children:N.map(O=>a.jsxs("tr",{children:[a.jsx("td",{className:"p-4 font-semibold text-foreground",children:O.name}),a.jsx("td",{className:"p-4 text-sm text-muted-foreground",children:a.jsxs("a",{href:`tel:${O.phone}`,className:"flex items-center gap-2 hover:text-primary",children:[a.jsx(vm,{className:"w-4 h-4"}),O.phone||"N/A"]})}),a.jsx("td",{className:"p-4",children:O.isRestricted?a.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300",children:"Restricted"}):a.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",children:"Active"})}),a.jsx("td",{className:"p-4 font-mono font-semibold text-center",children:a.jsx("button",{onClick:()=>T(O.id,O.name),className:"font-mono font-semibold text-primary hover:underline disabled:text-muted-foreground disabled:no-underline",disabled:O.pendingTasks===0,children:O.pendingTasks})})]},O.id))})]}),N.length===0&&a.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"No couriers are assigned to this zone."})]})]}):a.jsxs("div",{className:"text-center py-16 text-muted-foreground card",children:[a.jsx(Wi,{className:"w-16 h-16 mx-auto text-muted-foreground/30"}),a.jsx("p",{className:"mt-4 font-semibold",children:"Please select a zone"}),a.jsx("p",{className:"text-sm",children:"Choose a zone from the dropdown to see assigned couriers."})]}),a.jsx(dr,{isOpen:!!l,onClose:()=>f(null),title:m,size:"4xl",children:a.jsx("div",{className:"max-h-[70vh] overflow-y-auto",children:a.jsx(yl,{shipments:l||[]})})})]})},u8=()=>{const{tierSettings:e,updateTierSettings:t,addToast:n}=Sn(),[r,o]=me.useState([]);me.useEffect(()=>{const g=[...e].sort((x,A)=>x.shipmentThreshold-A.shipmentThreshold);o(g)},[e]);const l=(g,x,A)=>{const N=parseFloat(A);isNaN(N)||o(T=>T.map(v=>v.tierName===g?{...v,[x]:N}:v))},f=()=>{for(const g of r)if(g.shipmentThreshold<0||g.discountPercentage<0){n("Thresholds and discounts cannot be negative.","error");return}t(r),n("Partner tier settings saved successfully!","success")},m={[Yi.BRONZE]:a.jsx(O6,{className:"w-10 h-10 text-yellow-700"}),[Yi.SILVER]:a.jsx(L6,{className:"w-10 h-10 text-gray-500"}),[Yi.GOLD]:a.jsx(Wg,{className:"w-10 h-10 text-yellow-500"})};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Partner Tier Management"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"Configure the shipment thresholds and discount percentages for each loyalty tier."})]}),a.jsx("button",{onClick:f,className:"w-full sm:w-auto flex items-center justify-center gap-2 px-6 py-3 bg-primary text-primary-foreground font-semibold rounded-lg hover:bg-primary/90 transition shadow-sm",children:"Save Changes"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(g=>a.jsxs("div",{className:"card p-6 border-t-4",style:{borderTopColor:g.tierName==="Bronze"?"#B45309":g.tierName==="Silver"?"#6B7280":"#FBBF24"},children:[a.jsxs("div",{className:"flex items-center gap-4",children:[m[g.tierName],a.jsxs("h2",{className:"text-2xl font-bold text-foreground",children:[g.tierName," Tier"]})]}),a.jsxs("div",{className:"mt-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Shipments per Month"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"number",value:g.shipmentThreshold,onChange:x=>l(g.tierName,"shipmentThreshold",x.target.value),className:"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground"}),a.jsx("span",{className:"absolute inset-y-0 right-0 flex items-center pr-3 text-sm text-muted-foreground",children:"or more"})]}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Required shipments in the last 30 days."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Discount Percentage"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"number",step:"0.1",value:g.discountPercentage,onChange:x=>l(g.tierName,"discountPercentage",x.target.value),className:"w-full px-4 py-2 border border-border rounded-lg bg-background text-foreground"}),a.jsx("span",{className:"absolute inset-y-0 right-0 flex items-center pr-3 text-sm text-muted-foreground",children:"%"})]}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Discount applied to the shipping fee."})]})]})]},g.tierName))})]})},d8=()=>{const{currentUser:e,shipments:t,users:n,updateShipmentStatus:r,addToast:o,sendDeliveryVerificationCode:l,verifyDelivery:f,getCourierName:m,hasPermission:g}=Sn(),[x,A]=me.useState(!1),[N,T]=me.useState(null),[v,O]=me.useState("Recipient Unreachable"),[D,P]=me.useState(null),[C,E]=me.useState("send"),[j,V]=me.useState(""),[W,ie]=me.useState(!1),[B,R]=me.useState(""),[M,Z]=me.useState("all"),[F,k]=me.useState(""),Q=me.useMemo(()=>n.filter(q=>q.roles.includes(zt.COURIER)),[n]);if(!e||!g(Ut.VIEW_ADMIN_DELIVERY_MANAGEMENT))return a.jsx("div",{className:"p-8 text-center",children:"Access Denied. You do not have permission to view this page."});const J=me.useMemo(()=>{let q=t.filter(ee=>[tt.ASSIGNED_TO_COURIER,tt.OUT_FOR_DELIVERY].includes(ee.status));if(B){const ee=B.toLowerCase();q=q.filter(fe=>fe.id.toLowerCase().includes(ee)||fe.recipientName.toLowerCase().includes(ee)||fe.toAddress.zone.toLowerCase().includes(ee)||m(fe.courierId).toLowerCase().includes(ee))}return M!=="all"&&(q=q.filter(ee=>ee.courierId===M)),F&&(q=q.filter(ee=>ee.creationDate.startsWith(F))),q.sort((ee,fe)=>new Date(ee.creationDate).getTime()-new Date(fe.creationDate).getTime())},[t,B,M,F,m]),G=(q,ee)=>{r(q,ee)},Y=q=>{T(q),O("Recipient Unreachable"),A(!0)},z=()=>{N&&v&&(r(N.id,tt.DELIVERY_FAILED,{failureReason:v}),A(!1),T(null))},X=q=>{P(q),E("send"),V(""),ie(!1)},te=()=>P(null),ge=async()=>{if(!D)return;ie(!0),await l(D.id)&&E("verify"),ie(!1)},ue=async()=>{if(!D||j.length!==6)return;ie(!0),await f(D.id,j)&&te(),ie(!1)},L=({task:q})=>a.jsxs("div",{className:"card p-5 flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-mono text-sm text-muted-foreground",children:q.id}),a.jsxs("p",{className:"text-lg font-bold text-foreground",children:["To: ",q.recipientName]}),a.jsxs("p",{className:"text-muted-foreground",children:[q.toAddress.street,", ",q.toAddress.zone]}),a.jsxs("p",{className:"text-sm font-semibold text-foreground mt-1",children:["Courier: ",m(q.courierId)]}),a.jsxs("p",{className:"text-sm font-semibold text-foreground mt-1",children:["Payment: ",q.paymentMethod," (",(Number(q.price)||0)>0?`${(Number(q.price)||0).toFixed(2)} EGP`:"Pre-Paid",")"]})]}),a.jsxs("div",{className:"flex flex-col md:flex-row items-stretch md:items-center gap-3 w-full md:w-auto",children:[a.jsx("div",{className:"flex-grow",children:a.jsx(Xd,{status:q.status})}),a.jsxs(a.Fragment,{children:[q.status===tt.ASSIGNED_TO_COURIER&&a.jsx("button",{onClick:()=>G(q.id,tt.OUT_FOR_DELIVERY),className:"px-4 py-2 bg-primary text-primary-foreground font-semibold rounded-lg hover:bg-primary/90 transition w-full md:w-auto",children:"Start Delivery"}),q.status===tt.OUT_FOR_DELIVERY&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>X(q),className:"px-4 py-2 bg-green-500 text-white font-semibold rounded-lg hover:bg-green-600 transition w-full md:w-auto",children:"Verify & Deliver"}),a.jsx("button",{onClick:()=>Y(q),className:"px-4 py-2 bg-red-500 text-white font-semibold rounded-lg hover:bg-red-600 transition w-full md:w-auto",children:"Delivery Failed"})]})]})]})]});return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Admin Delivery Management"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"Oversee and manage all ongoing courier delivery tasks."})]}),a.jsxs("div",{className:"card p-4 flex flex-col md:flex-row gap-4 flex-wrap",children:[a.jsx("input",{type:"text",placeholder:"Search by ID, recipient, courier...",value:B,onChange:q=>R(q.target.value),className:"flex-grow px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background"}),a.jsxs("select",{value:M,onChange:q=>Z(q.target.value==="all"?"all":Number(q.target.value)),className:"w-full md:w-auto px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background",children:[a.jsx("option",{value:"all",children:"Filter by Courier"}),Q.map(q=>a.jsx("option",{value:q.id,children:q.name},q.id))]}),a.jsx("input",{type:"date",value:F,onChange:q=>k(q.target.value),className:"w-full md:w-auto px-4 py-2 border border-border rounded-lg","aria-label":"Filter by creation date"})]}),a.jsx("div",{className:"space-y-4",children:J.length===0?a.jsx("div",{className:"card text-center py-12 text-muted-foreground",children:"No active delivery tasks match the current filters."}):J.map(q=>a.jsx(L,{task:q},q.id))}),a.jsx(dr,{isOpen:x,onClose:()=>A(!1),title:"Log Delivery Failure",children:N&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("p",{children:["Marking shipment ",a.jsx("strong",{children:N.id})," as failed."]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Reason for failure *"}),a.jsxs("select",{value:v,onChange:q=>O(q.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background",children:[a.jsx("option",{value:"Recipient Unreachable",children:"Recipient Unreachable"}),a.jsx("option",{value:"Cancelled by Client",children:"Cancelled by Client"}),a.jsx("option",{value:"Order Lost",children:"Order Lost"}),a.jsx("option",{value:"Damaged Package",children:"Damaged Package"})]})]}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx("button",{onClick:()=>A(!1),className:"px-4 py-2 bg-secondary text-secondary-foreground rounded-lg",children:"Cancel"}),a.jsx("button",{onClick:z,disabled:!v,className:"px-4 py-2 bg-red-500 text-white rounded-lg",children:"Mark as Failed"})]})]})}),a.jsx(dr,{isOpen:!!D,onClose:te,title:"Confirm Delivery",children:D&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-secondary p-4 rounded-lg",children:[a.jsxs("p",{className:"font-semibold text-foreground",children:["Shipment: ",D.id]}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Recipient: ",D.recipientName]}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Phone: ",D.recipientPhone]})]}),C==="send"?a.jsxs("div",{children:[a.jsx("p",{className:"mb-4",children:"Send a 6-digit verification code to the recipient's phone."}),a.jsx("button",{onClick:ge,disabled:W,className:"w-full px-4 py-2 bg-primary text-primary-foreground font-semibold rounded-lg",children:W?"Sending...":"Send Code"})]}):a.jsxs("div",{children:[a.jsx("p",{className:"mb-2",children:"Enter the 6-digit code received by the recipient."}),a.jsx("input",{type:"text",value:j,onChange:q=>V(q.target.value),maxLength:6,placeholder:"123456",className:"w-full text-center tracking-[1em] font-mono text-2xl px-4 py-2 border border-border rounded-lg bg-background text-foreground"}),a.jsx("button",{onClick:ue,disabled:W||j.length!==6,className:"w-full mt-4 px-4 py-2 bg-green-600 text-white font-semibold rounded-lg",children:W?"Verifying...":"Confirm Delivery"})]})]})})]})},f8=()=>{var D;const{currentUser:e,shipments:t}=Sn(),[n,r]=me.useState(""),[o,l]=me.useState("all");if(!e||!((D=e.roles)!=null&&D.includes(zt.CLIENT)))return a.jsx("div",{className:"text-center py-16 text-muted-foreground",children:"Access denied."});const f=t.filter(P=>P.clientId===e.id),m=me.useMemo(()=>f.filter(P=>{const C=P.id.toLowerCase().includes(n.toLowerCase())||P.recipientName.toLowerCase().includes(n.toLowerCase()),E=o==="all"||P.status===o;return C&&E}),[f,n,o]),g=f.filter(P=>P.status===tt.DELIVERED),x=f.filter(P=>![tt.DELIVERED,tt.DELIVERY_FAILED].includes(P.status)),A=g.reduce((P,C)=>P+(Number(C.packageValue)||0),0),N=g.reduce((P,C)=>P+(Number(C.clientFlatRateFee)||0),0),T=A-N,v=x.reduce((P,C)=>{const E=Number(C.packageValue)||0,j=Number(C.clientFlatRateFee)||0;return P+Math.max(0,E-j)},0),O=()=>{const P=["Shipment ID","Recipient","Date","Status","Package Value (EGP)","Shipping Fee (EGP)","Net Revenue (EGP)"],C=m.map(E=>{const j=Number(E.packageValue)||0,V=Number(E.clientFlatRateFee)||0,W=E.status===tt.DELIVERED?Math.max(0,j-V):0;return[E.id,E.recipientName,new Date(E.creationDate).toLocaleDateString(),E.status,j.toFixed(2),V.toFixed(2),W.toFixed(2)]});Ei(P,C,"Client_Revenue_Report")};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"My Revenue"}),a.jsxs("button",{onClick:O,className:"flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground font-semibold rounded-lg hover:bg-primary/90",children:[a.jsx(Ki,{}),"Export Report"]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(Rt,{title:"Total Collected",value:`${(Number(A)||0).toFixed(2)} EGP`,icon:a.jsx(uu,{}),color:"#10b981"}),a.jsx(Rt,{title:"Shipping Fees Paid",value:`${(Number(N)||0).toFixed(2)} EGP`,icon:a.jsx(Xi,{}),color:"#f59e0b"}),a.jsx(Rt,{title:"Net Revenue",value:`${(Number(T)||0).toFixed(2)} EGP`,icon:a.jsx(sl,{}),color:"#3b82f6"}),a.jsx(Rt,{title:"Pending Revenue",value:`${(Number(v)||0).toFixed(2)} EGP`,icon:a.jsx(du,{}),color:"#8b5cf6"})]}),a.jsx("div",{className:"card p-4",children:a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[a.jsx("div",{className:"flex-1",children:a.jsx("input",{type:"text",placeholder:"Search by Shipment ID or Recipient...",value:n,onChange:P=>r(P.target.value),className:"w-full px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background text-foreground"})}),a.jsx("div",{className:"flex-1",children:a.jsxs("select",{value:o,onChange:P=>l(P.target.value),className:"w-full px-4 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background text-foreground",children:[a.jsx("option",{value:"all",children:"All Statuses"}),Object.values(tt).map(P=>a.jsx("option",{value:P,children:P},P))]})})]})}),a.jsxs("div",{className:"card overflow-hidden",children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-secondary",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-xs font-medium text-muted-foreground uppercase text-left",children:"Shipment"}),a.jsx("th",{className:"px-4 py-3 text-xs font-medium text-muted-foreground uppercase text-left",children:"Date"}),a.jsx("th",{className:"px-4 py-3 text-xs font-medium text-muted-foreground uppercase text-left",children:"Status"}),a.jsx("th",{className:"px-4 py-3 text-xs font-medium text-muted-foreground uppercase text-right",children:"Package Value"}),a.jsx("th",{className:"px-4 py-3 text-xs font-medium text-muted-foreground uppercase text-right",children:"Shipping Fee"}),a.jsx("th",{className:"px-4 py-3 text-xs font-medium text-muted-foreground uppercase text-right",children:"Net Revenue"})]})}),a.jsx("tbody",{className:"divide-y divide-border",children:m.map(P=>{const C=Number(P.packageValue)||0,E=Number(P.clientFlatRateFee)||0,j=P.status===tt.DELIVERED?Math.max(0,C-E):0;return a.jsxs("tr",{className:"hover:bg-accent",children:[a.jsxs("td",{className:"px-4 py-3",children:[a.jsx("p",{className:"font-mono text-sm font-semibold text-foreground",children:P.id}),a.jsx("p",{className:"text-xs text-muted-foreground",children:P.recipientName})]}),a.jsx("td",{className:"px-4 py-3 text-sm text-muted-foreground",children:new Date(P.creationDate).toLocaleDateString()}),a.jsx("td",{className:"px-4 py-3",children:a.jsx(Xd,{status:P.status})}),a.jsxs("td",{className:"px-4 py-3 text-right font-mono text-foreground",children:[C.toFixed(2)," EGP"]}),a.jsxs("td",{className:"px-4 py-3 text-right font-mono text-red-600 dark:text-red-400",children:[E.toFixed(2)," EGP"]}),a.jsx("td",{className:`px-4 py-3 text-right font-mono font-semibold ${P.status===tt.DELIVERED?"text-green-600 dark:text-green-400":"text-muted-foreground"}`,children:P.status===tt.DELIVERED?`${j.toFixed(2)} EGP`:"Pending"})]},P.id)})})]})}),m.length===0&&a.jsx("div",{className:"text-center py-16 text-muted-foreground",children:"No shipments found matching your criteria."})]})]})},h8=()=>{const{currentUser:e,logout:t,users:n,reassignCourier:r,getCourierName:o,hasPermission:l,setShipmentFilter:f}=Sn(),[m,g]=me.useState("dashboard"),[x,A]=me.useState(null),[N,T]=me.useState(null),[v,O]=me.useState(!1),[D,P]=me.useState(null),[C,E]=me.useState(!1),j=R=>{const M=["shipments","total-shipments"];M.includes(m)&&!M.includes(R)&&f(null),g(R)},V=()=>{A(null),O(!1),P(null)},W=()=>{x&&D&&(r(x.id,D),V())};if(me.useEffect(()=>(N?document.body.classList.add("printing-label"):document.body.classList.remove("printing-label"),()=>document.body.classList.remove("printing-label")),[N]),!e)return null;const ie=()=>{window.print()},B=()=>{switch(m){case"dashboard":return a.jsx(ox,{setActiveView:j});case"shipments":return a.jsx(XA,{onSelectShipment:A});case"create":return a.jsx(QA,{});case"packaging-and-assignment":return a.jsx(KA,{setLabelShipment:T});case"tasks":return a.jsx(PS,{setActiveView:j});case"completed-orders":return a.jsx(r8,{onSelectShipment:A});case"users":return a.jsx(FS,{});case"roles":return a.jsx(t8,{});case"wallet":return a.jsx(BS,{});case"financials":return a.jsx(US,{});case"admin-financials":return a.jsx(zS,{setActiveView:j});case"client-analytics":return a.jsx(qS,{onSelectShipment:A,setActiveView:j});case"notifications":return a.jsx(HS,{});case"profile":return a.jsx(VS,{});case"courier-financials":return a.jsx(YS,{});case"courier-performance":return a.jsx(XS,{onSelectShipment:A});case"total-shipments":return a.jsx(QS,{onSelectShipment:A});case"inventory":return a.jsx(i8,{});case"asset-management":return a.jsx(a8,{});case"my-assets":return a.jsx(s8,{});case"supplier-management":return a.jsx(o8,{});case"delivered-shipments":return a.jsx(l8,{onSelectShipment:A});case"couriers-by-zone":return a.jsx(c8,{});case"partner-tier-management":return a.jsx(u8,{});case"admin-delivery-management":return a.jsx(d8,{});case"client-revenue":return a.jsx(f8,{});default:return a.jsx(ox,{setActiveView:j})}};return a.jsxs("div",{className:"flex h-screen bg-background text-foreground",children:[a.jsx(z6,{activeView:m,setActiveView:j,isOpen:C,setIsOpen:E}),a.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[a.jsx(H6,{onLogout:t,user:e,onNavigate:j,onMenuClick:()=>E(!0)}),a.jsx("main",{className:"flex-1 overflow-y-auto p-6 md:p-8",children:B()})]}),a.jsx(dr,{isOpen:!!x,onClose:V,title:`Shipment Details: ${x==null?void 0:x.id}`,children:x&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-start gap-4",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"mb-1",children:[a.jsx("strong",{children:"Status:"})," ",a.jsx(Xd,{status:x.status})]}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.jsx("strong",{children:"From:"})," ",x.fromAddress.street,", ",x.fromAddress.city]}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.jsx("strong",{children:"To:"})," ",x.toAddress.street,", ",x.toAddress.city]}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.jsx("strong",{children:"Courier:"})," ",o(x.courierId)]})]}),a.jsx("div",{className:"flex flex-col gap-2 items-end flex-shrink-0",children:l(Ut.PRINT_LABELS)&&a.jsxs("button",{onClick:()=>T(x),className:"flex items-center gap-2 px-3 py-2 bg-secondary text-secondary-foreground font-semibold rounded-lg hover:bg-accent transition w-full justify-center text-sm",children:[a.jsx(Vc,{className:"w-5 h-5"}),"Print Label"]})})]}),x.packagingLog&&x.packagingLog.length>0&&!e.roles.includes(zt.CLIENT)&&!e.roles.includes("Client")&&a.jsxs("div",{className:"pt-4 border-t border-border",children:[a.jsx("h4",{className:"font-semibold text-foreground",children:"Packaging Info"}),a.jsx("ul",{className:"list-disc list-inside text-sm text-muted-foreground",children:x.packagingLog.map(R=>a.jsxs("li",{children:[R.quantityUsed,"x ",R.itemName]},R.inventoryItemId))}),x.packagingNotes&&a.jsxs("p",{className:"text-sm text-muted-foreground mt-2 bg-muted p-2 rounded-md",children:[a.jsx("strong",{children:"Notes:"})," ",x.packagingNotes]})]}),x.failureReason&&a.jsxs("div",{children:[a.jsx("strong",{children:"Failure Reason:"}),a.jsx("p",{className:"text-sm text-red-600 bg-red-50 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-lg mt-2",children:x.failureReason})]}),l(Ut.ASSIGN_SHIPMENTS)&&x.courierId&&![tt.DELIVERED,tt.DELIVERY_FAILED].includes(x.status)&&a.jsx("div",{className:"mt-4 pt-4 border-t border-border",children:v?a.jsxs("div",{className:"space-y-3 p-4 bg-secondary rounded-lg",children:[a.jsx("h4",{className:"font-semibold text-foreground",children:"Select new courier:"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("select",{onChange:R=>P(parseInt(R.target.value)),defaultValue:"",className:"flex-grow px-3 py-2 border border-border rounded-lg focus:ring-primary focus:border-primary bg-background",children:[a.jsx("option",{value:"",disabled:!0,children:"Available Couriers..."}),n.filter(R=>R.roles.includes(zt.COURIER)).map(R=>{var M;return a.jsxs("option",{value:R.id,children:[R.name," (",(M=R.zones)==null?void 0:M.join(", "),")"]},R.id)})]}),a.jsx("button",{onClick:W,disabled:!D,className:"px-4 py-2 bg-primary text-primary-foreground font-semibold rounded-lg hover:bg-primary/90 transition disabled:bg-muted",children:"Save"}),a.jsx("button",{onClick:()=>O(!1),className:"px-4 py-2 bg-secondary text-secondary-foreground rounded-lg hover:bg-accent",children:"Cancel"})]})]}):a.jsxs("button",{onClick:()=>O(!0),className:"flex items-center gap-2 px-3 py-2 bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300 font-semibold rounded-lg hover:bg-yellow-200 dark:hover:bg-yellow-900/60 transition text-sm",children:[a.jsx(wm,{className:"w-5 h-5"}),"Re-assign Courier"]})})]})}),a.jsx(dr,{isOpen:!!N,onClose:()=>T(null),title:"Print Shipment Label",size:"4xl",wrapperClassName:"label-print-modal",children:N&&a.jsxs("div",{className:"flex flex-col gap-6",children:[a.jsx($S,{shipment:N}),a.jsxs("div",{className:"flex justify-end gap-4 p-4 -mb-6 -mx-6 bg-secondary rounded-b-xl modal-footer",children:[a.jsx("button",{onClick:()=>T(null),className:"px-6 py-2 bg-muted text-muted-foreground rounded-lg hover:bg-accent font-semibold",children:"Close"}),a.jsxs("button",{onClick:ie,className:"flex items-center gap-2 px-6 py-2 bg-primary text-primary-foreground font-semibold rounded-lg hover:bg-primary/90 transition",children:[a.jsx(Vc,{className:"w-5 h-5"}),"Print"]})]})]})})]})},m8=()=>{const{currentUser:e,isLoading:t}=Sn();return $l.useEffect(()=>{document.body.className="",document.documentElement.removeAttribute("dir"),document.documentElement.removeAttribute("lang"),document.body.style.cursor="auto"},[]),t&&!e?a.jsx("div",{className:"flex items-center justify-center h-screen bg-background text-foreground",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 border-4 border-dashed rounded-full animate-spin border-primary mx-auto"}),a.jsx("h2",{className:"text-2xl font-bold mt-4",children:"Loading Data..."}),a.jsx("p",{className:"text-muted-foreground",children:"Please wait while we fetch your information."})]})}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"transition-opacity duration-500 opacity-100",children:e?a.jsx(h8,{}):a.jsx(U6,{})}),a.jsx(B6,{})]})},g8={en:{navHome:"Home",navServices:"Services",navAbout:"About Us",navPricing:"Pricing",navSubscriptions:"Subscriptions",navTestimonials:"Testimonials",navContact:"Contact",navTrackShipment:"Track Shipment",navLogin:"Login",learnMore:"Learn More",getStarted:"Get Started",customPrice:"Custom",premiumServiceTitle:"Express Shipping",aboutClickToLearn:"Click to learn more",aboutCommitment:"Our Commitment",aboutMissionCommitment:"Empowering every small business to reach new heights through reliable logistics solutions.",aboutVisionCommitment:"Building the future of e-commerce logistics in Egypt, one delivery at a time.",navTrackShipmentMobile:"Track Shipment",heroTitle:'Lightning-Fast Shipping for Your <span class="brand-yellow">E-commerce Business</span>',heroSubtitle:"We empower small businesses with professional handling and delivery in 3 business days, guaranteed.",heroCTA:"Get Started",heroStat1Text:"Delivery Success Rate",heroStat2Text:"Customer Support",heroStat3Text:"Max Delivery Time",trackTitle:"Track Your Shipment",trackSubtitle:"Enter your tracking number and phone to see the status of your package.",trackPlaceholder:"Enter your tracking number (e.g., FE123456789)",trackPhonePlaceholder:"Recipient or Sender Phone",trackButton:"Track",servicesTitle:"Our Promise to You",servicesSubtitle:"We handle every package with care and ensure it reaches its destination on time.",service1Title:"Professional Handling",service1Desc:"Our expert team is trained to handle your products with the utmost care, ensuring they arrive in perfect condition. We treat every package as if it were our own.",service2Title:"Max 3 Business Days Delivery",service2Desc:"Speed is crucial for e-commerce. We guarantee delivery within a maximum of three business days, helping you keep your customers happy and loyal.",service3Title:"Reliable & Secure",service3Desc:"End-to-end security with full accountability for every shipment.",service1Feature1:"Expert handling",service1Feature2:"Quality assurance",service1Feature3:"Damage protection",service1Feature4:"Insurance coverage",service2Feature1:"Same-day pickup",service2Feature2:"3-day guarantee",service2Feature3:"Real-time tracking",service2Feature4:"Priority processing",service3Feature1:"Secure packaging",service3Feature2:"GPS tracking",service3Feature3:"24/7 monitoring",service3Feature4:"Proof of delivery",aboutTitle:"Our Mission & Vision",aboutSubtitle:"The driving force behind our commitment to excellence.",missionTitle:"Our Mission",missionDesc:"To empower small businesses and e-commerce entrepreneurs by providing the fastest, most reliable, and professional shipping services in Egypt, ensuring their success is delivered with every package.",visionTitle:"Our Vision",visionDesc:"To be the leading logistics partner for Egypt's e-commerce sector, recognized for our unmatched speed, unwavering reliability, and our dedication to fostering the growth of local businesses.",pricingTitle:"Our Pricing",pricingSubtitle:"Simple, transparent pricing for our partners.",smallOrdersTitle:"Standard Shipping",smallOrdersPrice:"75 LE",smallOrdersDesc:"Flat rate for all our partners across Greater Cairo.",largeOrdersTitle:"Large Orders",largeOrdersDesc:"For bulk shipments or special requirements, please get in touch for a custom price quotation.",largeOrdersCTA:"Request a Quote",premiumServicePrice:"100 LE",premiumServiceDesc:"Enhanced service with priority handling and faster delivery.",standardFeature1:"Greater Cairo Coverage",standardFeature2:"3-Day Delivery Guarantee",standardFeature3:"Professional Handling",standardFeature4:"Real-time Tracking",standardFeature5:"Basic Insurance",premiumFeature1:"All Standard Features",premiumFeature2:"1-2 Day Express Delivery",premiumFeature3:"Priority Handling",premiumFeature4:"Premium Insurance",premiumFeature5:"Dedicated Support",premiumFeature6:"SMS & Email Updates",enterpriseFeature1:"Volume Discounts",enterpriseFeature2:"Custom Solutions",enterpriseFeature3:"Dedicated Account Manager",enterpriseFeature4:"API Integration",enterpriseFeature5:"White-label Options",enterpriseFeature6:"Same-day Pickup",subscriptionsTitle:"Exclusive Partner Program",subscriptionsDesc:"Our partner program is designed for our most loyal customers. Contact us to learn about the criteria and unlock special rates and exclusive offers.",subscriptionsCTA:"Learn More",testimonialsTitle:"Trusted by Businesses Like Yours",testimonialsSubtitle:"Hear what our happy customers have to say about our service.",testimonial1:'"Shuhna Express has been a game-changer for our online store. Their speed and reliability have significantly improved our customer satisfaction."',testimonial1Name:"Omar Hassan",testimonial1Role:"Founder, The Cairo Bazaar",testimonial2:`"The professional handling is top-notch. We ship fragile items, and with Shuhna Express, we have peace of mind knowing they'll arrive safely."`,testimonial2Name:"Fatima Ali",testimonial2Role:"Manager, Alexandria Crafts",testimonial3:'"Switching to Shuhna Express was the best decision we made for our logistics. The 3-day delivery promise is always met. Highly recommended!"',testimonial3Name:"Youssef Mahmoud",testimonial3Role:"Owner, Giza Goods",contactTitle:"Get in Touch",contactSubtitle:"You can reach us via call or WhatsApp for any inquiries.",contactNumber:"Customer Service",contactCall:"Call Us",contactWhatsapp:"WhatsApp",contactServiceAreaTitle:"Service Area",contactServiceAreaDesc:"Cairo, Giza and Surrounding Areas",contactHoursTitle:"Business Hours",contactHours1:"Sunday - Thursday: 9:00 AM - 8:00 PM",contactHours2:"Friday - Saturday: 10:00 AM - 6:00 PM",contactEmailTitle:"Email Support",contactEmail1:"General: info@shuhna.net",contactEmail2:"Support: support@shuhna.net",footerSlogan:"Your reliable partner for e-commerce shipping.",footerLinks:"Quick Links",footerTrack:"Track",footerFollow:"Follow Us",footerRights:"All rights reserved."},ar:{navHome:"الرئيسية",navServices:"خدماتنا",navAbout:"عنا",navPricing:"الأسعار",navSubscriptions:"الاشتراكات",navTestimonials:"آراء العملاء",navContact:"اتصل بنا",navTrackShipment:"تتبع شحنتك",navLogin:"تسجيل الدخول",learnMore:"اعرف المزيد",getStarted:"ابدأ الآن",customPrice:"مخصص",premiumServiceTitle:"شحن سريع",aboutClickToLearn:"انقر لمعرفة المزيد",aboutCommitment:"التزامنا",aboutMissionCommitment:"تمكين كل شركة صغيرة من الوصول إلى آفاق جديدة من خلال حلول لوجستية موثوقة.",aboutVisionCommitment:"بناء مستقبل الخدمات اللوجستية للتجارة الإلكترونية في مصر، شحنة تلو الأخرى.",navTrackShipmentMobile:"تتبع شحنتك",heroTitle:"شحن فائق السرعة لأعمالك التجارية الإلكترونية",heroSubtitle:"ندعم الشركات الصغيرة والمتاجر الإلكترونية من خلال التعامل الاحترافي والتوصيل في غضون 3 أيام عمل مضمونة.",heroCTA:"ابدأ الآن",heroStat1Text:"معدل نجاح التوصيل",heroStat2Text:"دعم العملاء",heroStat3Text:"أقصى مدة للتوصيل",trackTitle:"تتبع شحنتك",trackSubtitle:"أدخل رقم التتبع ورقم الهاتف الخاص بك لمعرفة حالة شحنتك.",trackPlaceholder:"أدخل رقم التتبع (مثال: FE123456789)",trackPhonePlaceholder:"رقم هاتف المستلم أو المرسل",trackButton:"تتبع",servicesTitle:"وعدنا لك",servicesSubtitle:"نتعامل مع كل طرد بعناية فائقة ونضمن وصوله إلى وجهته في الوقت المحدد.",service1Title:"تعامل احترافي",service1Desc:"فريقنا الخبير مدرب على التعامل مع منتجاتك بأقصى درجات العناية، مما يضمن وصولها في حالة ممتازة. نتعامل مع كل طرد كما لو كان ملكنا.",service2Title:"توصيل خلال 3 أيام عمل كحد أقصى",service2Desc:"السرعة أمر حاسم في التجارة الإلكترونية. نضمن التوصيل في غضون ثلاثة أيام عمل كحد أقصى، مما يساعدك على إبقاء عملائك سعداء ومخلصين.",service3Title:"موثوق وآمن",service3Desc:"أمان شامل مع مسؤولية كاملة عن كل شحنة.",service1Feature1:"تعامل خبير",service1Feature2:"ضمان الجودة",service1Feature3:"حماية من التلف",service1Feature4:"تغطية تأمينية",service2Feature1:"استلام في نفس اليوم",service2Feature2:"ضمان 3 أيام",service2Feature3:"تتبع في الوقت الفعلي",service2Feature4:"معالجة ذات أولوية",service3Feature1:"تغليف آمن",service3Feature2:"تتبع GPS",service3Feature3:"مراقبة 24/7",service3Feature4:"إثبات التسليم",aboutTitle:"مهمتنا ورؤيتنا",aboutSubtitle:"القوة الدافعة وراء التزامنا بالتميز.",missionTitle:"مهمتنا",missionDesc:"تمكين الشركات الصغيرة ورواد التجارة الإلكترونية من خلال توفير خدمات الشحن الأسرع والأكثر موثوقية واحترافية في مصر، مما يضمن تحقيق نجاحهم مع كل طرد.",visionTitle:"رؤيتنا",visionDesc:"أن نكون الشريك اللوجستي الرائد لقطاع التجارة الإلكترونية في مصر، معترف بنا لسرعتنا التي لا مثيل لها، وموثوقيتنا الثابتة، وتفانينا في تعزيز نمو الشركات المحلية.",pricingTitle:"أسعارنا",pricingSubtitle:"أسعار بسيطة وشفافة لشركائنا.",smallOrdersTitle:"الشحن",smallOrdersPrice:"75 جنيه",smallOrdersDesc:"سعر ثابت لجميع شركائنا في القاهرة الكبرى.",largeOrdersTitle:"الطلبات الكبيرة",largeOrdersDesc:"للشحنات الكبيرة أو المتطلبات الخاصة، يرجى التواصل معنا للحصول على عرض أسعار مخصص.",largeOrdersCTA:"اطلب عرض سعر",premiumServicePrice:"100 جنيه",premiumServiceDesc:"خدمة معززة مع أولوية في التعامل وتوصيل أسرع.",standardFeature1:"تغطية القاهرة الكبرى",standardFeature2:"ضمان توصيل 3 أيام",standardFeature3:"تعامل احترافي",standardFeature4:"تتبع في الوقت الفعلي",standardFeature5:"تأمين أساسي",premiumFeature1:"جميع ميزات الباقة الأساسية",premiumFeature2:"توصيل سريع خلال يوم إلى يومين",premiumFeature3:"أولوية في التعامل",premiumFeature4:"تأمين مميز",premiumFeature5:"دعم مخصص",premiumFeature6:"تحديثات عبر الرسائل والبريد",enterpriseFeature1:"خصومات على الكميات",enterpriseFeature2:"حلول مخصصة",enterpriseFeature3:"مدير حساب مخصص",enterpriseFeature4:"تكامل API",enterpriseFeature5:"خيارات العلامة البيضاء",enterpriseFeature6:"استلام في نفس اليوم",subscriptionsTitle:"برنامج الشركاء الحصري",subscriptionsDesc:"برنامج الشركاء مصمم لعملائنا الأكثر ولاءً. تواصل معنا لمعرفة المعايير والحصول على أسعار وخدمات خاصة.",subscriptionsCTA:"اعرف المزيد",testimonialsTitle:"موثوق به من قبل شركات مثل شركتك",testimonialsSubtitle:"استمع إلى ما يقوله عملاؤنا السعداء عن خدمتنا.",testimonial1:'"كانت شحنة إكسبريس نقطة تحول لمتجرنا عبر الإنترنت. لقد أدت سرعتهم وموثوقيتهم إلى تحسين رضا عملائنا بشكل كبير."',testimonial1Name:"عمر حسن",testimonial1Role:"مؤسس، بازار القاهرة",testimonial2:'"التعامل الاحترافي على أعلى مستوى. نحن نشحن عناصر هشة، ومع شحنة إكسبريس، نشعر براحة البال مع العلم أنها ستصل بأمان."',testimonial2Name:"فاطمة علي",testimonial2Role:"مديرة، حرف الإسكندرية",testimonial3:'"كان التحول إلى شحنة إكسبريس أفضل قرار اتخذناه بشأن الخدمات اللوجستية لدينا. يتم الوفاء بوعد التسليم لمدة 3 أيام دائمًا. موصى به للغاية!"',testimonial3Name:"يوسف محمود",testimonial3Role:"صاحب، بضائع الجيزة",contactTitle:"تواصل معنا",contactSubtitle:"يمكنك التواصل معنا عبر الاتصال أو واتساب لأي استفسارات.",contactNumber:"خدمة العملاء",contactCall:"اتصل بنا",contactWhatsapp:"واتساب",contactServiceAreaTitle:"منطقة الخدمة",contactServiceAreaDesc:"القاهرة، الجيزة والمناطق المحيطة بها",contactHoursTitle:"ساعات العمل",contactHours1:"الأحد - الخميس: 9:00 صباحًا - 8:00 مساءً",contactHours2:"الجمعة - السبت: 10:00 صباحًا - 6:00 مساءً",contactEmailTitle:"الدعم عبر البريد الإلكتروني",contactEmail1:"عام: info@shuhna.net",contactEmail2:"الدعم: support@shuhna.net",footerSlogan:"شريكك الموثوق به في شحن التجارة الإلكترونية.",footerLinks:"روابط سريعة",footerTrack:"تتبع",footerFollow:"تابعنا",footerRights:"جميع الحقوق محفوظة."}};/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p8=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Hv=(...e)=>e.filter((t,n,r)=>!!t&&r.indexOf(t)===n).join(" ");/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var x8={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b8=me.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:l,iconNode:f,...m},g)=>me.createElement("svg",{ref:g,...x8,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:Hv("lucide",o),...m},[...f.map(([x,A])=>me.createElement(x,A)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=(e,t)=>{const n=me.forwardRef(({className:r,...o},l)=>me.createElement(b8,{ref:l,iconNode:t,className:Hv(`lucide-${p8(e)}`,r),...o}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vv=Bn("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y8=Bn("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v8=Bn("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w8=Bn("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jd=Bn("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const th=Bn("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N8=Bn("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A8=Bn("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x1=Bn("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S8=Bn("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qv=Bn("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jg=Bn("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C8=Bn("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E8=Bn("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T8=Bn("PackageCheck",[["path",{d:"m16 16 2 2 4-4",key:"gfu2re"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _8=Bn("PackagePlus",[["path",{d:"M16 16h6",key:"100bgy"}],["path",{d:"M19 13v6",key:"85cyf1"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fm=Bn("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bm=Bn("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j8=Bn("Quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I8=Bn("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D8=Bn("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gx=Bn("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Id=Bn("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R8=Bn("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b1=Bn("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kh=Bn("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O8=Bn("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L8=Bn("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M8=Bn("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Um=Bn("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),k8=({currentLang:e,setLanguage:t,t:n})=>{const[r,o]=me.useState(!1),[l,f]=me.useState("hero"),[m,g]=me.useState(!1);me.useEffect(()=>{const N=()=>{g(window.scrollY>50);const T=["hero","tracking","services","about","pricing","subscriptions","testimonials","contact"],v=window.innerHeight;T.forEach(O=>{const D=document.getElementById(O);if(D){const P=D.getBoundingClientRect();P.top<=v/2&&P.bottom>=v/2&&f(O)}})};return window.addEventListener("scroll",N),()=>window.removeEventListener("scroll",N)},[]);const x=N=>{var T;(T=document.getElementById(N))==null||T.scrollIntoView({behavior:"smooth"}),o(!1)},A=[{id:"hero",label:n("navHome")},{id:"services",label:n("navServices")},{id:"about",label:n("navAbout")},{id:"pricing",label:n("navPricing")},{id:"subscriptions",label:n("navSubscriptions")},{id:"testimonials",label:n("navTestimonials")},{id:"contact",label:n("navContact")}];return a.jsx("nav",{className:`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${m?"header-blur shadow-xl":"bg-transparent"}`,children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"flex justify-between items-center py-4",children:[a.jsx("div",{className:"flex items-center",children:a.jsx("button",{onClick:()=>x("hero"),className:"flex items-center hover:opacity-80 transition-opacity duration-300",children:a.jsx("img",{src:"/shuhna-logo-main.png",alt:"Shuhna Express Logo",className:"h-16 w-auto"})})}),a.jsx("div",{className:"hidden md:flex items-center justify-center flex-1 mx-8",children:a.jsx("div",{className:"flex items-center gap-x-8",children:A.map(N=>a.jsx("button",{onClick:()=>x(N.id),className:`nav-link text-base font-medium transition-all duration-300 ${l===N.id?"text-[#FFD000] active":"text-white hover:text-[#FFD000]"}`,children:N.label},N.id))})}),a.jsx("div",{className:"hidden md:flex items-center",children:a.jsxs("button",{onClick:()=>x("tracking"),className:"bg-[#FFD000] text-[#061A40] px-6 py-3 rounded-lg font-semibold hover:bg-[#e6bb00] transition-all duration-300 shadow-lg hover:shadow-xl flex items-center mr-4",children:[a.jsx(Fm,{className:"inline h-5 w-5 me-2"}),n("navTrackShipment")]})}),a.jsxs("div",{className:"hidden md:flex items-center gap-x-3",children:[a.jsx("a",{href:"/app.html",className:"px-4 py-2 rounded-lg text-sm border border-white/60 text-white/80 hover:bg-white/10 hover:text-white transition-all duration-300 font-medium",children:n("navLogin")}),a.jsx("button",{onClick:()=>t(e==="en"?"ar":"en"),className:"px-4 py-2 rounded-lg border border-[#FFD000] text-[#FFD000] hover:bg-[#FFD000] hover:text-[#061A40] transition-all duration-300 font-medium text-sm",children:e==="en"?"AR":"EN"})]}),a.jsx("button",{className:"md:hidden p-3 text-white hover:text-[#FFD000] transition-colors",onClick:()=>o(!r),children:r?a.jsx(M8,{className:"h-8 w-8"}):a.jsx(C8,{className:"h-8 w-8"})})]}),r&&a.jsx("div",{className:"md:hidden mobile-menu-slide bg-[#061A40]/95 backdrop-blur-md rounded-lg mt-3 mb-6 p-6",children:a.jsxs("div",{className:"space-y-4",children:[A.map(N=>a.jsx("button",{onClick:()=>x(N.id),className:`block w-full text-left px-6 py-4 rounded-lg transition-all duration-300 text-base ${l===N.id?"bg-[#FFD000] text-[#061A40] font-semibold":"text-white hover:bg-[#FFD000]/10 hover:text-[#FFD000]"}`,children:N.label},N.id)),a.jsxs("div",{className:"pt-4 border-t border-white/20",children:[a.jsx("button",{onClick:()=>x("tracking"),className:"w-full bg-[#FFD000] text-[#061A40] px-6 py-3 rounded-lg font-semibold text-center mb-4",children:n("navTrackShipment")}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsx("a",{href:"/app.html",className:"flex-1 text-center bg-transparent border border-white/80 text-white/80 px-6 py-3 rounded-lg font-semibold",children:n("navLogin")}),a.jsx("button",{onClick:()=>t(e==="en"?"ar":"en"),className:"px-6 py-3 rounded-lg border border-[#FFD000] text-[#FFD000] font-semibold",children:e==="en"?"AR":"EN"})]})]})]})})]})})},P8=({t:e})=>{const[t,n]=me.useState(!1);me.useEffect(()=>{n(!0)},[]);const r=o=>{var l;(l=document.getElementById(o))==null||l.scrollIntoView({behavior:"smooth"})};return a.jsx("section",{id:"hero",className:"hero-bg min-h-screen flex items-center justify-center py-20",children:a.jsx("div",{className:"hero-content container mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"text-center max-w-5xl mx-auto",children:[a.jsx("div",{className:"absolute top-20 left-10 floating-element",children:a.jsx(Um,{className:"h-16 w-16 text-[#FFD000] lightning-bolt opacity-30"})}),a.jsx("div",{className:"absolute top-32 right-20 floating-element",style:{animationDelay:"2s"},children:a.jsx(kh,{className:"h-12 w-12 text-[#FFD000] hero-truck opacity-20"})}),a.jsx("div",{className:"absolute bottom-40 left-20 floating-element",style:{animationDelay:"4s"},children:a.jsx(jd,{className:"h-10 w-10 text-[#FFD000] opacity-25"})}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("div",{className:"mb-8",children:a.jsx(Um,{className:"h-20 w-20 mx-auto text-[#FFD000] lightning-bolt"})}),a.jsx("h1",{className:"will-animate text-4xl md:text-7xl font-black leading-tight mb-6 text-white hero-title",dangerouslySetInnerHTML:{__html:e("heroTitle")}}),a.jsx("p",{className:"will-animate text-xl md:text-2xl text-gray-300 max-w-3xl mx-auto mb-8 hero-subtitle",children:e("heroSubtitle")}),a.jsxs("div",{className:"will-animate flex flex-col sm:flex-row gap-6 justify-center items-center hero-cta",children:[a.jsxs("button",{onClick:()=>r("tracking"),className:"pulse-glow bg-[#FFD000] text-[#061A40] px-8 py-4 rounded-xl text-xl font-bold hover:bg-[#e6bb00] transition-all duration-300 flex items-center group",children:[e("heroCTA"),a.jsx(Vv,{className:"ml-2 h-6 w-6 group-hover:translate-x-1 transition-transform"})]}),a.jsx("button",{onClick:()=>r("about"),className:"border-2 border-[#FFD000] text-[#FFD000] px-8 py-4 rounded-xl text-xl font-bold hover:bg-[#FFD000] hover:text-[#061A40] transition-all duration-300",children:e("learnMore")})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mt-16 max-w-4xl mx-auto",children:[a.jsxs("div",{className:"will-animate stats-counter text-center",children:[a.jsx("div",{className:"text-4xl font-black text-[#FFD000] mb-2",children:"99.9%"}),a.jsx("div",{className:"text-gray-300",children:e("heroStat1Text")})]}),a.jsxs("div",{className:"will-animate stats-counter text-center",style:{animationDelay:"0.2s"},children:[a.jsx("div",{className:"text-4xl font-black text-[#FFD000] mb-2",children:"24/7"}),a.jsx("div",{className:"text-gray-300",children:e("heroStat2Text")})]}),a.jsxs("div",{className:"will-animate stats-counter text-center",style:{animationDelay:"0.4s"},children:[a.jsx("div",{className:"text-4xl font-black text-[#FFD000] mb-2",children:"3 Days"}),a.jsx("div",{className:"text-gray-300",children:e("heroStat3Text")})]})]})]})]})})})},F8=({t:e})=>{const[t,n]=me.useState(""),[r,o]=me.useState(""),[l,f]=me.useState(null),[m,g]=me.useState(!1),x=async A=>{if(A.preventDefault(),!(!t.trim()||!r.trim())){g(!0),f(null);try{const N=await fetch("/api/track",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({trackingId:t.trim(),phone:r.trim()})});if(N.ok){const T=await N.json(),O=(D=>{switch(D){case"Pending":return{status:"Order Confirmed",location:"Processing Center",details:"Your order has been confirmed and is being prepared.",icon:a.jsx(jd,{className:"h-5 w-5"}),color:"text-blue-600"};case"Assigned":return{status:"Assigned to Courier",location:"Local Hub",details:"Your package has been assigned to a courier.",icon:a.jsx(Fm,{className:"h-5 w-5"}),color:"text-blue-600"};case"In Transit":return{status:"In Transit",location:"En Route",details:"Your package is on its way.",icon:a.jsx(kh,{className:"h-5 w-5"}),color:"text-blue-600"};case"Out for Delivery":return{status:"Out for Delivery",location:"Local Area",details:"Your package is out for delivery and will arrive soon.",icon:a.jsx(kh,{className:"h-5 w-5"}),color:"text-orange-600"};case"Delivered":return{status:"Delivered",location:"Destination",details:"Package delivered successfully.",icon:a.jsx(w8,{className:"h-5 w-5"}),color:"text-green-600"};case"Delivery Failed":return{status:"Delivery Failed",location:"Local Hub",details:"Delivery attempt failed. Will retry next business day.",icon:a.jsx(b1,{className:"h-5 w-5"}),color:"text-red-600"};default:return{status:"Processing",location:"Hub",details:"Your package is being processed.",icon:a.jsx(Fm,{className:"h-5 w-5"}),color:"text-blue-600"}}})(T.status);f({trackingId:T.id,...O})}else{const T=await N.json();f({trackingId:t.toUpperCase(),status:"Not Found",location:"N/A",details:T.error||"Shipment not found or incorrect phone number.",icon:a.jsx(b1,{className:"h-5 w-5"}),color:"text-red-600"})}}catch(N){console.error("Tracking error:",N),f({trackingId:t.toUpperCase(),status:"Error",location:"N/A",details:"Unable to track shipment. Please try again later.",icon:a.jsx(b1,{className:"h-5 w-5"}),color:"text-red-600"})}finally{g(!1)}}};return a.jsx("section",{id:"tracking",className:"py-20 tracking-bg",children:a.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h2",{className:"text-4xl font-bold text-[#061A40] mb-4",children:e("trackTitle")}),a.jsx("p",{className:"text-xl text-gray-600",children:e("trackSubtitle")})]}),a.jsxs("div",{className:"tracking-form rounded-2xl p-8 shadow-xl",children:[a.jsxs("form",{onSubmit:x,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[a.jsxs("div",{className:"md:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"tracking-number-landing",className:"sr-only",children:"Tracking Number"}),a.jsx("input",{id:"tracking-number-landing",type:"text",value:t,onChange:A=>n(A.target.value),placeholder:e("trackPlaceholder"),className:"tracking-input w-full px-6 py-4 text-lg rounded-xl bg-white text-gray-800 placeholder-gray-400 focus:outline-none",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"phone-number-landing",className:"sr-only",children:"Phone Number"}),a.jsx("input",{id:"phone-number-landing",type:"tel",value:r,onChange:A=>o(A.target.value),placeholder:e("trackPhonePlaceholder"),className:"tracking-input w-full px-6 py-4 text-lg rounded-xl bg-white text-gray-800 placeholder-gray-400 focus:outline-none",required:!0})]})]}),a.jsx("button",{type:"submit",disabled:m,className:"tracking-button w-full px-8 py-4 rounded-xl text-lg font-bold text-[#061A40] flex items-center justify-center space-x-2 disabled:opacity-50",children:m?a.jsx("div",{className:"loading-spinner w-6 h-6 border-2 border-[#061A40] border-t-transparent rounded-full"}):a.jsxs(a.Fragment,{children:[a.jsx(D8,{className:"h-5 w-5"}),a.jsx("span",{children:e("trackButton")})]})})]}),l&&a.jsxs("div",{className:"result-slide mt-8 p-6 bg-gray-50 rounded-xl border-l-4 border-[#FFD000]",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h4",{className:"text-lg font-semibold text-[#061A40]",children:["Tracking ID: ",l.trackingId]}),a.jsxs("div",{className:`flex items-center space-x-2 ${l.color}`,children:[l.icon,a.jsx("span",{className:"font-medium",children:l.status})]})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Jg,{className:"h-5 w-5 text-gray-500"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-500",children:"Current Location"}),a.jsx("div",{className:"font-medium text-[#061A40]",children:l.location})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(jd,{className:"h-5 w-5 text-gray-500"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-500",children:"Details"}),a.jsx("div",{className:"font-medium text-[#061A40]",children:l.details})]})]})]})]})]})]})})})},B8=({t:e})=>{const[t,n]=me.useState(0),[r,o]=me.useState(!1),l=me.useRef(null),f=[{id:"professional",title:e("service1Title"),description:e("service1Desc"),icon:a.jsx(T8,{className:"h-8 w-8"}),features:[e("service1Feature1"),e("service1Feature2"),e("service1Feature3"),e("service1Feature4")]},{id:"fast",title:e("service2Title"),description:e("service2Desc"),icon:a.jsx(kh,{className:"h-8 w-8"}),features:[e("service2Feature1"),e("service2Feature2"),e("service2Feature3"),e("service2Feature4")]},{id:"reliable",title:e("service3Title"),description:e("service3Desc"),icon:a.jsx(Gx,{className:"h-8 w-8"}),features:[e("service3Feature1"),e("service3Feature2"),e("service3Feature3"),e("service3Feature4")]}];return me.useEffect(()=>{const m=new IntersectionObserver(([g])=>{g.isIntersecting&&o(!0)},{threshold:.3});return l.current&&m.observe(l.current),()=>{l.current&&m.unobserve(l.current)}},[]),me.useEffect(()=>{const m=setInterval(()=>{n(g=>(g+1)%f.length)},1e4);return()=>clearInterval(m)},[f.length]),a.jsx("section",{ref:l,id:"services",className:"services-bg py-20",children:a.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"text-center mb-16",children:[a.jsx("h2",{className:`will-animate text-4xl font-bold text-white mb-6 ${r?"slide-in-visible":""}`,children:e("servicesTitle")}),a.jsx("p",{className:`will-animate text-xl text-gray-300 max-w-3xl mx-auto ${r?"slide-in-visible":""}`,style:{animationDelay:"7.2s"},children:e("servicesSubtitle")})]}),a.jsxs("div",{className:"max-w-6xl mx-auto",children:[a.jsx("div",{className:"flex flex-col md:flex-row justify-center mb-12 space-y-4 md:space-y-0 md:space-x-4",children:f.map((m,g)=>a.jsxs("button",{onClick:()=>n(g),className:`service-tab p-6 rounded-xl text-left w-full md:w-auto will-animate ${t===g?"active text-[#061A40] shadow-2xl":"bg-white/10 text-white hover:bg-white/20"} ${r?"slide-in-visible":""}`,style:{animationDelay:`${.3+g*.1}s`},children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[a.jsx("div",{className:`floating-icon ${t===g?"text-[#061A40]":"text-[#FFD000]"}`,children:m.icon}),a.jsx("h3",{className:"text-lg font-semibold",children:m.title})]}),a.jsxs("p",{className:`text-sm ${t===g?"text-[#061A40]/80":"text-gray-300"}`,children:[m.description.substring(0,60),"..."]})]},m.id))}),a.jsx("div",{className:"service-content bg-white rounded-2xl p-8 md:p-12 shadow-2xl",children:a.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[a.jsx("div",{className:"p-3 bg-[#FFD000] rounded-xl text-[#061A40]",children:f[t].icon}),a.jsx("h3",{className:"text-3xl font-bold text-[#061A40]",children:f[t].title})]}),a.jsx("p",{className:"text-lg text-gray-700 mb-8",children:f[t].description}),a.jsx("div",{className:"space-y-4",children:f[t].features.map((m,g)=>a.jsxs("div",{className:"feature-item flex items-center space-x-3",children:[a.jsx("div",{className:"w-2 h-2 bg-[#FFD000] rounded-full"}),a.jsx("span",{className:"text-[#061A40] font-medium",children:m})]},g))})]}),a.jsx("div",{className:"relative",children:a.jsx("div",{className:"bg-gradient-to-r from-[#061A40] to-[#0A2F6B] rounded-2xl p-8 text-white",children:a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx(Id,{className:"h-12 w-12 mx-auto text-[#FFD000] mb-4"}),a.jsx("div",{className:"text-2xl font-bold",children:"4.9/5"}),a.jsx("div",{className:"text-sm text-gray-300",children:"Customer Rating"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx(L8,{className:"h-12 w-12 mx-auto text-[#FFD000] mb-4"}),a.jsx("div",{className:"text-2xl font-bold",children:"1000+"}),a.jsx("div",{className:"text-sm text-gray-300",children:"Happy Clients"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx(jd,{className:"h-12 w-12 mx-auto text-[#FFD000] mb-4"}),a.jsx("div",{className:"text-2xl font-bold",children:"99.9%"}),a.jsx("div",{className:"text-sm text-gray-300",children:"On-Time Delivery"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx(Gx,{className:"h-12 w-12 mx-auto text-[#FFD000] mb-4"}),a.jsx("div",{className:"text-2xl font-bold",children:"100%"}),a.jsx("div",{className:"text-sm text-gray-300",children:"Secure Handling"})]})]})})})]})})]})]})})},U8=({t:e})=>{const[t,n]=me.useState(0),[r,o]=me.useState(!1),l=me.useRef(null),f=[{id:"mission",title:e("missionTitle"),description:e("missionDesc"),icon:a.jsx(I8,{className:"h-12 w-12"}),color:"from-[#001f3d] to-[#001f3d]",stats:[{label:"Local Businesses Served",value:"500+"},{label:"Packages Delivered",value:"50K+"},{label:"Cities Covered",value:"25+"}]},{id:"vision",title:e("visionTitle"),description:e("visionDesc"),icon:a.jsx(N8,{className:"h-12 w-12"}),color:"from-[#e51717] to-[#e51717]",stats:[{label:"Growth Target",value:"200%"},{label:"New Partnerships",value:"100+"},{label:"Market Coverage",value:"80%"}]}];return me.useEffect(()=>{const m=new IntersectionObserver(([g])=>{g.isIntersecting&&o(!0)},{threshold:.3});return l.current&&m.observe(l.current),()=>{l.current&&m.unobserve(l.current)}},[]),me.useEffect(()=>{const m=setInterval(()=>{n(g=>(g+1)%f.length)},1e4);return()=>clearInterval(m)},[f.length]),a.jsx("section",{ref:l,id:"about",className:"about-bg py-20",children:a.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"text-center mb-16",children:[a.jsx("h2",{className:`will-animate text-4xl font-bold text-[#061A40] mb-6 ${r?"slide-in-visible":""}`,children:e("aboutTitle")}),a.jsx("p",{className:`will-animate text-xl text-gray-600 max-w-3xl mx-auto ${r?"slide-in-visible":""}`,style:{animationDelay:"0.2s"},children:e("aboutSubtitle")})]}),a.jsxs("div",{className:"max-w-6xl mx-auto",children:[a.jsx("div",{className:"flex flex-col md:flex-row justify-center mb-12 space-y-4 md:space-y-0 md:space-x-8",children:f.map((m,g)=>a.jsxs("button",{onClick:()=>n(g),className:`tab-button p-8 rounded-2xl text-center w-full md:w-auto will-animate ${t===g?"active text-[#061A40] shadow-2xl":"bg-white text-gray-700 hover:shadow-lg"} ${r?"slide-in-visible":""}`,style:{animationDelay:`${.3+g*.1}s`},children:[a.jsx("div",{className:`floating-icon mx-auto mb-4 ${t===g?"text-[#061A40]":"text-[#FFD000]"}`,children:m.icon}),a.jsx("h3",{className:"text-2xl font-bold mb-2",children:m.title}),a.jsx("p",{className:`text-sm ${t===g?"text-[#061A40]/80":"text-gray-600"}`,children:e("aboutClickToLearn")})]},m.id))}),a.jsx("div",{className:"tab-content bg-white rounded-2xl shadow-2xl overflow-hidden",children:a.jsxs("div",{className:"grid md:grid-cols-2 gap-0",children:[a.jsxs("div",{className:"p-8 md:p-12",children:[a.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[a.jsx("div",{className:"p-4 bg-[#FFD000] rounded-xl text-[#061A40]",children:f[t].icon}),a.jsx("h3",{className:"text-3xl font-bold text-[#061A40]",children:f[t].title})]}),a.jsx("p",{className:"text-lg text-gray-700 leading-relaxed mb-8",children:f[t].description}),a.jsx("div",{className:"space-y-4",children:f[t].stats.map((m,g)=>a.jsxs("div",{className:"stat-item flex items-center justify-between p-4 bg-gray-50 rounded-lg",style:{animationDelay:`${g*.1}s`},children:[a.jsx("span",{className:"text-[#061A40] font-medium",children:m.label}),a.jsx("span",{className:"text-2xl font-bold text-[#FFD000]",children:m.value})]},g))})]}),a.jsx("div",{className:`bg-gradient-to-br ${f[t].color} p-8 md:p-12 text-white flex items-center justify-center`,children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"floating-icon mb-8",children:a.jsx(R8,{className:"h-24 w-24 mx-auto text-white/80"})}),a.jsx("h4",{className:"text-2xl font-bold mb-4",children:e("aboutCommitment")}),a.jsx("p",{className:"text-lg opacity-90 mb-6",children:e(t===0?"aboutMissionCommitment":"aboutVisionCommitment")}),a.jsx("div",{className:"flex justify-center",children:a.jsx(y8,{className:"h-16 w-16 text-yellow-300"})})]})})]})})]})]})})},z8=({t:e})=>{const[t,n]=me.useState(!1),[r,o]=me.useState(0),l=me.useRef(null),f=[{id:"standard",title:e("smallOrdersTitle"),price:e("smallOrdersPrice"),description:e("smallOrdersDesc"),icon:a.jsx(v8,{className:"h-12 w-12"}),features:[e("standardFeature1"),e("standardFeature2"),e("standardFeature3"),e("standardFeature4"),e("standardFeature5")],color:"from-blue-500 to-blue-700",popular:!1},{id:"premium",title:e("premiumServiceTitle"),price:e("premiumServicePrice"),description:e("premiumServiceDesc"),icon:a.jsx(th,{className:"h-12 w-12"}),features:[e("premiumFeature1"),e("premiumFeature2"),e("premiumFeature3"),e("premiumFeature4"),e("premiumFeature5"),e("premiumFeature6")],color:"from-purple-500 to-purple-700",popular:!0},{id:"enterprise",title:e("largeOrdersTitle"),price:e("customPrice"),description:e("largeOrdersDesc"),icon:a.jsx(_8,{className:"h-12 w-12"}),features:[e("enterpriseFeature1"),e("enterpriseFeature2"),e("enterpriseFeature3"),e("enterpriseFeature4"),e("enterpriseFeature5"),e("enterpriseFeature6")],color:"from-green-500 to-green-700",popular:!1}];return me.useEffect(()=>{const m=new IntersectionObserver(([g])=>{g.isIntersecting&&n(!0)},{threshold:.3});return l.current&&m.observe(l.current),()=>{l.current&&m.unobserve(l.current)}},[]),me.useEffect(()=>{const m=setInterval(()=>{o(g=>(g+1)%f.length)},4e3);return()=>clearInterval(m)},[f.length]),a.jsx("section",{ref:l,id:"pricing",className:"pricing-bg py-20",children:a.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"text-center mb-16",children:[a.jsx("h2",{className:`will-animate text-4xl font-bold text-white mb-6 ${t?"slide-in-visible":""}`,children:e("pricingTitle")}),a.jsx("p",{className:`will-animate text-xl text-gray-300 max-w-3xl mx-auto ${t?"slide-in-visible":""}`,style:{animationDelay:"0.2s"},children:e("pricingSubtitle")})]}),a.jsx("div",{className:"max-w-6xl mx-auto",children:a.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:f.map((m,g)=>a.jsxs("div",{className:`tier-card flex flex-col bg-white rounded-2xl p-8 relative will-animate ${r===g?"active":""} ${t?"slide-in-visible":""}`,style:{animationDelay:`${.3+g*.1}s`},onMouseEnter:()=>o(g),children:[m.popular&&a.jsx("div",{className:"popular-badge absolute -top-4 left-1/2 transform -translate-x-1/2",children:a.jsxs("div",{className:"bg-[#FFD000] text-[#061A40] px-6 py-2 rounded-full text-sm font-bold flex items-center",children:[a.jsx(Um,{className:"h-4 w-4 mr-1"}),"Most Popular"]})}),a.jsxs("div",{className:"flex-grow",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:`p-4 rounded-xl bg-gradient-to-r ${m.color} inline-block mb-4`,children:a.jsx("div",{className:"text-white",children:m.icon})}),a.jsx("h3",{className:"text-2xl font-bold text-[#061A40] mb-2",children:m.title}),a.jsx("div",{className:"text-4xl font-black price-highlight mb-2",children:m.price}),a.jsx("p",{className:"text-gray-600",children:m.description})]}),a.jsx("div",{className:"space-y-4 mb-8",children:m.features.map((x,A)=>a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"feature-check w-5 h-5 bg-[#FFD000] rounded-full flex items-center justify-center",style:{animationDelay:`${.5+A*.1}s`},children:a.jsx("div",{className:"w-2 h-2 bg-[#061A40] rounded-full"})}),a.jsx("span",{className:"text-[#061A40] font-medium",children:x})]},A))})]}),a.jsx("button",{className:"w-full py-3 rounded-xl font-bold transition-all duration-300 mt-auto bg-[#FFD000] text-[#061A40] hover:bg-[#e6bb00]",children:m.id==="enterprise"?e("largeOrdersCTA"):e("getStarted")})]},m.id))})})]})})},H8=({t:e})=>{const[t,n]=me.useState(!1),r=me.useRef(null);me.useEffect(()=>{const l=new IntersectionObserver(([f])=>{f.isIntersecting&&n(!0)},{threshold:.3});return r.current&&l.observe(r.current),()=>{r.current&&l.unobserve(r.current)}},[]);const o=l=>{var f;(f=document.getElementById(l))==null||f.scrollIntoView({behavior:"smooth"})};return a.jsx("section",{ref:r,id:"subscriptions",className:"subscriptions-bg py-20",children:a.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:a.jsx("div",{className:"max-w-5xl mx-auto",children:a.jsxs("div",{className:`exclusive-card rounded-3xl p-12 md:p-16 text-center text-white relative overflow-hidden will-animate ${t?"slide-in-visible":""}`,children:[a.jsx("div",{className:"absolute top-10 left-10 floating-gems opacity-20",children:a.jsx(x1,{className:"h-16 w-16 text-[#FFD000]"})}),a.jsx("div",{className:"absolute top-20 right-20 floating-gems opacity-15",style:{animationDelay:"2s"},children:a.jsx(th,{className:"h-20 w-20 text-[#FFD000]"})}),a.jsx("div",{className:"absolute bottom-16 left-16 floating-gems opacity-25",style:{animationDelay:"4s"},children:a.jsx(Id,{className:"h-12 w-12 text-[#FFD000] star-twinkle"})}),a.jsx("div",{className:"absolute bottom-20 right-10 floating-gems opacity-20",style:{animationDelay:"1s"},children:a.jsx(x1,{className:"h-14 w-14 text-[#FFD000]"})}),a.jsx("div",{className:"absolute inset-0 shimmer"}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("div",{className:"mb-8",children:a.jsx("div",{className:"p-4 bg-[#FFD000] rounded-full inline-block mb-6",children:a.jsx(th,{className:"h-16 w-16 text-[#061A40]"})})}),a.jsx("h2",{className:"text-4xl md:text-5xl font-black mb-6",children:e("subscriptionsTitle")}),a.jsx("p",{className:"text-xl text-gray-300 max-w-3xl mx-auto mb-8 leading-relaxed",children:e("subscriptionsDesc")}),a.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-10",children:[a.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6",children:[a.jsx(Id,{className:"h-10 w-10 text-[#FFD000] mx-auto mb-4"}),a.jsx("h4",{className:"text-lg font-bold mb-2",children:"Exclusive Rates"}),a.jsx("p",{className:"text-sm text-gray-300",children:"Up to 30% discount on regular shipping rates"})]}),a.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6",children:[a.jsx(th,{className:"h-10 w-10 text-[#FFD000] mx-auto mb-4"}),a.jsx("h4",{className:"text-lg font-bold mb-2",children:"Priority Service"}),a.jsx("p",{className:"text-sm text-gray-300",children:"Jump the queue with priority processing"})]}),a.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6",children:[a.jsx(x1,{className:"h-10 w-10 text-[#FFD000] mx-auto mb-4"}),a.jsx("h4",{className:"text-lg font-bold mb-2",children:"Dedicated Support"}),a.jsx("p",{className:"text-sm text-gray-300",children:"24/7 premium customer service"})]})]}),a.jsxs("button",{onClick:()=>o("contact"),className:"cta-button px-10 py-4 rounded-xl text-xl font-bold text-[#061A40] flex items-center mx-auto group",children:[e("subscriptionsCTA"),a.jsx(Vv,{className:"ml-2 h-6 w-6 group-hover:translate-x-1 transition-transform"})]}),a.jsx("div",{className:"mt-8 text-sm text-gray-400",children:"* Partnership criteria based on monthly volume and business requirements"})]})]})})})})},V8=({t:e})=>{const[t,n]=me.useState(!1),[r,o]=me.useState(0),l=me.useRef(null),f=[{quote:e("testimonial1"),name:e("testimonial1Name"),role:e("testimonial1Role"),avatar:"https://images.pexels.com/photos/2379004/pexels-photo-2379004.jpeg?w=100&h=100&fit=crop&crop=face",rating:5},{quote:e("testimonial2"),name:e("testimonial2Name"),role:e("testimonial2Role"),avatar:"https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?w=100&h=100&fit=crop&crop=face",rating:5},{quote:e("testimonial3"),name:e("testimonial3Name"),role:e("testimonial3Role"),avatar:"https://images.pexels.com/photos/2182970/pexels-photo-2182970.jpeg?w=100&h=100&fit=crop&crop=face",rating:5}];return me.useEffect(()=>{const m=new IntersectionObserver(([g])=>{g.isIntersecting&&n(!0)},{threshold:.3});return l.current&&m.observe(l.current),()=>{l.current&&m.unobserve(l.current)}},[]),me.useEffect(()=>{const m=setInterval(()=>{o(g=>(g+1)%f.length)},5e3);return()=>clearInterval(m)},[f.length]),a.jsx("section",{ref:l,id:"testimonials",className:"testimonials-bg py-20",children:a.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"text-center mb-16",children:[a.jsx("h2",{className:`will-animate text-4xl font-bold text-white mb-6 ${t?"slide-in-visible":""}`,children:e("testimonialsTitle")}),a.jsx("p",{className:`will-animate text-xl text-gray-300 max-w-3xl mx-auto ${t?"slide-in-visible":""}`,style:{animationDelay:"0.2s"},children:e("testimonialsSubtitle")})]}),a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsxs("div",{className:`testimonial-card rounded-2xl p-8 md:p-12 mb-12 relative will-animate ${t?"slide-in-visible":""}`,style:{animationDelay:"0.4s"},children:[a.jsx(j8,{className:"quote-icon absolute top-6 left-6 h-16 w-16 text-[#FFD000]"}),a.jsxs("div",{className:"testimonial-transition",children:[a.jsx("div",{className:"flex star-rating justify-center mb-6",children:[...Array(f[r].rating)].map((m,g)=>a.jsx(Id,{className:"h-6 w-6 text-[#FFD000] fill-current"},g))}),a.jsx("blockquote",{className:"text-2xl md:text-3xl text-[#061A40] font-medium text-center mb-8 leading-relaxed",children:f[r].quote}),a.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[a.jsx("div",{className:"avatar-ring p-1 rounded-full",children:a.jsx("img",{className:"h-16 w-16 rounded-full object-cover",src:f[r].avatar,alt:f[r].name})}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-xl font-bold text-[#061A40]",children:f[r].name}),a.jsx("div",{className:"text-gray-600",children:f[r].role})]})]})]},r)]}),a.jsx("div",{className:"flex justify-center space-x-4",children:f.map((m,g)=>a.jsx("button",{onClick:()=>o(g),className:`w-4 h-4 rounded-full transition-all duration-300 ${r===g?"bg-[#FFD000] scale-125":"bg-white/30 hover:bg-white/50"}`},g))}),a.jsx("div",{className:"grid md:grid-cols-3 gap-8 mt-16",children:f.map((m,g)=>a.jsxs("div",{className:`testimonial-card rounded-xl p-6 will-animate ${t?"slide-in-visible":""}`,style:{animationDelay:`${.6+g*.1}s`},children:[a.jsx("div",{className:"flex mb-4",children:[...Array(m.rating)].map((x,A)=>a.jsx(Id,{className:"h-5 w-5 text-[#FFD000] fill-current"},A))}),a.jsx("p",{className:"text-[#061A40] mb-6 leading-relaxed",children:m.quote.length>100?m.quote.substring(0,100)+"...":m.quote}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("img",{className:"h-12 w-12 rounded-full object-cover",src:m.avatar,alt:m.name}),a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-[#061A40]",children:m.name}),a.jsx("div",{className:"text-sm text-gray-600",children:m.role})]})]})]},g))})]})]})})},q8=({t:e})=>{const[t,n]=me.useState(!1),r=me.useRef(null);return me.useEffect(()=>{const o=new IntersectionObserver(([l])=>{l.isIntersecting&&n(!0)},{threshold:.3});return r.current&&o.observe(r.current),()=>{r.current&&o.unobserve(r.current)}},[]),a.jsx("section",{ref:r,id:"contact",className:"contact-bg py-20",children:a.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"text-center mb-16",children:[a.jsx("h2",{className:`will-animate text-4xl font-bold text-[#061A40] mb-6 ${t?"slide-in-visible":""}`,children:e("contactTitle")}),a.jsx("p",{className:`will-animate text-xl text-gray-600 max-w-3xl mx-auto ${t?"slide-in-visible":""}`,style:{animationDelay:"0.2s"},children:e("contactSubtitle")})]}),a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mb-12",children:[a.jsxs("div",{className:`contact-card rounded-2xl p-8 text-center will-animate ${t?"slide-in-visible":""}`,style:{animationDelay:"0.4s"},children:[a.jsx("div",{className:"phone-pulse mb-6",children:a.jsx("div",{className:"p-4 bg-[#FFD000] rounded-full inline-block",children:a.jsx(Bm,{className:"h-16 w-16 text-[#061A40]"})})}),a.jsx("h3",{className:"text-2xl font-bold text-[#061A40] mb-4",children:e("contactNumber")}),a.jsx("div",{className:"text-3xl font-black text-[#061A40] mb-8 tracking-wider",dir:"ltr",children:"+2 010 3267 4447"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("a",{href:"tel:+201032674447",className:"contact-button w-full bg-[#061A40] text-white py-4 px-6 rounded-xl font-bold flex items-center justify-center space-x-3 hover:bg-[#0A2F6B] shadow-lg",children:[a.jsx(Bm,{className:"h-5 w-5"}),a.jsx("span",{children:e("contactCall")})]}),a.jsxs("a",{href:"https://wa.me/201032674447",target:"_blank",rel:"noopener noreferrer",className:"contact-button w-full bg-green-500 text-white py-4 px-6 rounded-xl font-bold flex items-center justify-center space-x-3 hover:bg-green-600 shadow-lg",children:[a.jsx(E8,{className:"h-5 w-5"}),a.jsx("span",{children:e("contactWhatsapp")})]})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:`info-card rounded-xl p-6 text-white will-animate ${t?"slide-in-visible":""}`,style:{animationDelay:"0.5s"},children:[a.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[a.jsx("div",{className:"floating-icon",children:a.jsx(Jg,{className:"h-8 w-8 text-[#FFD000]"})}),a.jsx("h4",{className:"text-xl font-bold",children:e("contactServiceAreaTitle")})]}),a.jsx("p",{className:"text-gray-300",children:e("contactServiceAreaDesc")})]}),a.jsxs("div",{className:`info-card rounded-xl p-6 text-white will-animate ${t?"slide-in-visible":""}`,style:{animationDelay:"0.6s"},children:[a.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[a.jsx("div",{className:"floating-icon",style:{animationDelay:"1s"},children:a.jsx(jd,{className:"h-8 w-8 text-[#FFD000]"})}),a.jsx("h4",{className:"text-xl font-bold",children:e("contactHoursTitle")})]}),a.jsxs("div",{className:"text-gray-300 space-y-2",children:[a.jsx("div",{children:e("contactHours1")}),a.jsx("div",{children:e("contactHours2")})]})]}),a.jsxs("div",{className:`info-card rounded-xl p-6 text-white will-animate ${t?"slide-in-visible":""}`,style:{animationDelay:"0.7s"},children:[a.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[a.jsx("div",{className:"floating-icon",style:{animationDelay:"2s"},children:a.jsx(qv,{className:"h-8 w-8 text-[#FFD000]"})}),a.jsx("h4",{className:"text-xl font-bold",children:e("contactEmailTitle")})]}),a.jsxs("div",{className:"text-gray-300",children:[a.jsx("div",{children:e("contactEmail1")}),a.jsx("div",{children:e("contactEmail2")})]})]})]})]}),a.jsx("div",{className:`bg-white rounded-2xl p-8 shadow-xl will-animate ${t?"slide-in-visible":""}`,style:{animationDelay:"0.8s"},children:a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 text-center",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-3xl font-black text-[#FFD000] mb-2",children:"<2min"}),a.jsx("div",{className:"text-gray-600",children:"Average Response Time"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-3xl font-black text-[#FFD000] mb-2",children:"24/7"}),a.jsx("div",{className:"text-gray-600",children:"WhatsApp Support"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-3xl font-black text-[#FFD000] mb-2",children:"99%"}),a.jsx("div",{className:"text-gray-600",children:"Customer Satisfaction"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-3xl font-black text-[#FFD000] mb-2",children:"100+"}),a.jsx("div",{className:"text-gray-600",children:"Calls Handled Daily"})]})]})})]})]})})},G8=({t:e})=>{const t=new Date().getFullYear(),n=r=>{var o;(o=document.getElementById(r))==null||o.scrollIntoView({behavior:"smooth"})};return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"wave-border"}),a.jsx("footer",{className:"footer-bg text-white",children:a.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[a.jsxs("div",{className:"col-span-1 lg:col-span-2",children:[a.jsx("div",{className:"flex items-center space-x-3 mb-6",children:a.jsx("div",{className:"logo-glow",children:a.jsx("img",{src:"/shuhna-logo-main.png",alt:"Shuhna Express Logo",className:"h-32 w-32 object-contain"})})}),a.jsx("p",{className:"text-xl text-gray-300 mb-6 leading-relaxed font-bold",children:e("footerSlogan")}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Bm,{className:"h-5 w-5 text-[#FFD000]"}),a.jsx("span",{className:"text-gray-300",children:"+2 010 3267 4447"})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(qv,{className:"h-5 w-5 text-[#FFD000]"}),a.jsx("span",{className:"text-gray-300",children:"info@shuhna.net"})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Jg,{className:"h-5 w-5 text-[#FFD000]"}),a.jsx("span",{className:"text-gray-300",children:"New Cairo - Egypt"})]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-xl font-bold text-[#FFD000] mb-6",children:e("footerLinks")}),a.jsx("ul",{className:"space-y-3",children:[{key:"navServices",section:"services"},{key:"navAbout",section:"about"},{key:"navPricing",section:"pricing"},{key:"navSubscriptions",section:"subscriptions"},{key:"footerTrack",section:"tracking"},{key:"navContact",section:"contact"}].map(r=>a.jsx("li",{children:a.jsx("button",{onClick:()=>n(r.section),className:"footer-link text-gray-300 hover:text-[#FFD000] text-left",children:e(r.key)})},r.key))})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-xl font-bold text-[#FFD000] mb-6",children:e("footerFollow")}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsx("a",{href:"#",className:"social-icon p-3 bg-white/10 rounded-full text-gray-300 hover:bg-[#FFD000] hover:text-[#061A40] transition-all duration-300",children:a.jsx(A8,{className:"h-5 w-5"})}),a.jsx("a",{href:"#",className:"social-icon p-3 bg-white/10 rounded-full text-gray-300 hover:bg-[#FFD000] hover:text-[#061A40] transition-all duration-300",children:a.jsx(O8,{className:"h-5 w-5"})}),a.jsx("a",{href:"#",className:"social-icon p-3 bg-white/10 rounded-full text-gray-300 hover:bg-[#FFD000] hover:text-[#061A40] transition-all duration-300",children:a.jsx(S8,{className:"h-5 w-5"})})]}),a.jsxs("div",{className:"mt-8",children:[a.jsx("h5",{className:"font-semibold mb-3 text-[#FFD000]",children:"Business Hours"}),a.jsxs("div",{className:"text-sm text-gray-400 space-y-1",children:[a.jsx("div",{children:"Sun-Thu: 9:00 AM - 8:00 PM"}),a.jsx("div",{children:"Fri-Sat: 10:00 AM - 6:00 PM"})]})]})]})]}),a.jsx("div",{className:"mt-12 pt-8 border-t border-white/20",children:a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0",children:[a.jsxs("div",{className:"text-gray-400 text-sm",children:["© ",t," Shuhna Express. ",e("footerRights")]}),a.jsxs("div",{className:"flex space-x-6 text-sm text-gray-400",children:[a.jsx("a",{href:"#",className:"hover:text-[#FFD000] transition-colors",children:"Privacy Policy"}),a.jsx("a",{href:"#",className:"hover:text-[#FFD000] transition-colors",children:"Terms of Service"}),a.jsx("a",{href:"#",className:"hover:text-[#FFD000] transition-colors",children:"Cookie Policy"})]})]})})]})})]})},W8=()=>{const[e,t]=me.useState("en"),n=r=>g8[e][r]||r;return me.useEffect(()=>(document.body.className="landing-page-active",e==="ar"?(document.body.classList.add("lang-ar"),document.documentElement.dir="rtl"):(document.body.classList.remove("lang-ar"),document.documentElement.dir="ltr"),()=>{document.body.className="",document.documentElement.dir=""}),[e]),a.jsxs("div",{className:"bg-[#061A40]",children:[a.jsx(k8,{currentLang:e,setLanguage:t,t:n}),a.jsxs("main",{children:[a.jsx(P8,{t:n}),a.jsx(F8,{t:n}),a.jsx(B8,{t:n}),a.jsx(U8,{t:n}),a.jsx(z8,{t:n}),a.jsx(H8,{t:n}),a.jsx(V8,{t:n}),a.jsx(q8,{t:n})]}),a.jsx(G8,{t:n})]})},Y8=()=>window.location.pathname==="/app.html"?a.jsx(rx,{children:a.jsx(A6,{children:a.jsx(m8,{})})}):a.jsx(rx,{children:a.jsx(W8,{})}),Gv=document.getElementById("root");if(!Gv)throw new Error("Could not find root element to mount to");const X8=TN.createRoot(Gv);X8.render(a.jsx($l.StrictMode,{children:a.jsx(Y8,{})}));export{Wn as _,eo as c,Ph as g};
